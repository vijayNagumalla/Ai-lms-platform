var yk=Object.defineProperty;var vk=(t,r,s)=>r in t?yk(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s;var Gm=(t,r,s)=>(vk(t,typeof r!="symbol"?r+"":r,s),s);function bk(t,r){for(var s=0;s<r.length;s++){const n=r[s];if(typeof n!="string"&&!Array.isArray(n)){for(const c in n)if(c!=="default"&&!(c in t)){const o=Object.getOwnPropertyDescriptor(n,c);o&&Object.defineProperty(t,c,o.get?o:{enumerable:!0,get:()=>n[c]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))n(c);new MutationObserver(c=>{for(const o of c)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(c){const o={};return c.integrity&&(o.integrity=c.integrity),c.referrerPolicy&&(o.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?o.credentials="include":c.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(c){if(c.ep)return;c.ep=!0;const o=s(c);fetch(c.href,o)}})();var _s=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Lf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var w2={exports:{}},Df={},j2={exports:{}},js={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ou=Symbol.for("react.element"),wk=Symbol.for("react.portal"),jk=Symbol.for("react.fragment"),_k=Symbol.for("react.strict_mode"),Nk=Symbol.for("react.profiler"),Sk=Symbol.for("react.provider"),Ck=Symbol.for("react.context"),kk=Symbol.for("react.forward_ref"),Ek=Symbol.for("react.suspense"),Ak=Symbol.for("react.memo"),Tk=Symbol.for("react.lazy"),zv=Symbol.iterator;function Rk(t){return t===null||typeof t!="object"?null:(t=zv&&t[zv]||t["@@iterator"],typeof t=="function"?t:null)}var _2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N2=Object.assign,S2={};function vc(t,r,s){this.props=t,this.context=r,this.refs=S2,this.updater=s||_2}vc.prototype.isReactComponent={};vc.prototype.setState=function(t,r){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,r,"setState")};vc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function C2(){}C2.prototype=vc.prototype;function ux(t,r,s){this.props=t,this.context=r,this.refs=S2,this.updater=s||_2}var hx=ux.prototype=new C2;hx.constructor=ux;N2(hx,vc.prototype);hx.isPureReactComponent=!0;var Uv=Array.isArray,k2=Object.prototype.hasOwnProperty,fx={current:null},E2={key:!0,ref:!0,__self:!0,__source:!0};function A2(t,r,s){var n,c={},o=null,a=null;if(r!=null)for(n in r.ref!==void 0&&(a=r.ref),r.key!==void 0&&(o=""+r.key),r)k2.call(r,n)&&!E2.hasOwnProperty(n)&&(c[n]=r[n]);var d=arguments.length-2;if(d===1)c.children=s;else if(1<d){for(var l=Array(d),i=0;i<d;i++)l[i]=arguments[i+2];c.children=l}if(t&&t.defaultProps)for(n in d=t.defaultProps,d)c[n]===void 0&&(c[n]=d[n]);return{$$typeof:ou,type:t,key:o,ref:a,props:c,_owner:fx.current}}function Pk(t,r){return{$$typeof:ou,type:t.type,key:r,ref:t.ref,props:t.props,_owner:t._owner}}function mx(t){return typeof t=="object"&&t!==null&&t.$$typeof===ou}function Mk(t){var r={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return r[s]})}var Vv=/\/+/g;function Km(t,r){return typeof t=="object"&&t!==null&&t.key!=null?Mk(""+t.key):r.toString(36)}function yh(t,r,s,n,c){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case ou:case wk:a=!0}}if(a)return a=t,c=c(a),t=n===""?"."+Km(a,0):n,Uv(c)?(s="",t!=null&&(s=t.replace(Vv,"$&/")+"/"),yh(c,r,s,"",function(i){return i})):c!=null&&(mx(c)&&(c=Pk(c,s+(!c.key||a&&a.key===c.key?"":(""+c.key).replace(Vv,"$&/")+"/")+t)),r.push(c)),1;if(a=0,n=n===""?".":n+":",Uv(t))for(var d=0;d<t.length;d++){o=t[d];var l=n+Km(o,d);a+=yh(o,r,s,l,c)}else if(l=Rk(t),typeof l=="function")for(t=l.call(t),d=0;!(o=t.next()).done;)o=o.value,l=n+Km(o,d++),a+=yh(o,r,s,l,c);else if(o==="object")throw r=String(t),Error("Objects are not valid as a React child (found: "+(r==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.");return a}function Iu(t,r,s){if(t==null)return t;var n=[],c=0;return yh(t,n,"","",function(o){return r.call(s,o,c++)}),n}function Ik(t){if(t._status===-1){var r=t._result;r=r(),r.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=r)}if(t._status===1)return t._result.default;throw t._result}var gn={current:null},vh={transition:null},Ok={ReactCurrentDispatcher:gn,ReactCurrentBatchConfig:vh,ReactCurrentOwner:fx};function T2(){throw Error("act(...) is not supported in production builds of React.")}js.Children={map:Iu,forEach:function(t,r,s){Iu(t,function(){r.apply(this,arguments)},s)},count:function(t){var r=0;return Iu(t,function(){r++}),r},toArray:function(t){return Iu(t,function(r){return r})||[]},only:function(t){if(!mx(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};js.Component=vc;js.Fragment=jk;js.Profiler=Nk;js.PureComponent=ux;js.StrictMode=_k;js.Suspense=Ek;js.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ok;js.act=T2;js.cloneElement=function(t,r,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=N2({},t.props),c=t.key,o=t.ref,a=t._owner;if(r!=null){if(r.ref!==void 0&&(o=r.ref,a=fx.current),r.key!==void 0&&(c=""+r.key),t.type&&t.type.defaultProps)var d=t.type.defaultProps;for(l in r)k2.call(r,l)&&!E2.hasOwnProperty(l)&&(n[l]=r[l]===void 0&&d!==void 0?d[l]:r[l])}var l=arguments.length-2;if(l===1)n.children=s;else if(1<l){d=Array(l);for(var i=0;i<l;i++)d[i]=arguments[i+2];n.children=d}return{$$typeof:ou,type:t.type,key:c,ref:o,props:n,_owner:a}};js.createContext=function(t){return t={$$typeof:Ck,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Sk,_context:t},t.Consumer=t};js.createElement=A2;js.createFactory=function(t){var r=A2.bind(null,t);return r.type=t,r};js.createRef=function(){return{current:null}};js.forwardRef=function(t){return{$$typeof:kk,render:t}};js.isValidElement=mx;js.lazy=function(t){return{$$typeof:Tk,_payload:{_status:-1,_result:t},_init:Ik}};js.memo=function(t,r){return{$$typeof:Ak,type:t,compare:r===void 0?null:r}};js.startTransition=function(t){var r=vh.transition;vh.transition={};try{t()}finally{vh.transition=r}};js.unstable_act=T2;js.useCallback=function(t,r){return gn.current.useCallback(t,r)};js.useContext=function(t){return gn.current.useContext(t)};js.useDebugValue=function(){};js.useDeferredValue=function(t){return gn.current.useDeferredValue(t)};js.useEffect=function(t,r){return gn.current.useEffect(t,r)};js.useId=function(){return gn.current.useId()};js.useImperativeHandle=function(t,r,s){return gn.current.useImperativeHandle(t,r,s)};js.useInsertionEffect=function(t,r){return gn.current.useInsertionEffect(t,r)};js.useLayoutEffect=function(t,r){return gn.current.useLayoutEffect(t,r)};js.useMemo=function(t,r){return gn.current.useMemo(t,r)};js.useReducer=function(t,r,s){return gn.current.useReducer(t,r,s)};js.useRef=function(t){return gn.current.useRef(t)};js.useState=function(t){return gn.current.useState(t)};js.useSyncExternalStore=function(t,r,s){return gn.current.useSyncExternalStore(t,r,s)};js.useTransition=function(){return gn.current.useTransition()};js.version="18.3.1";j2.exports=js;var A=j2.exports;const Lt=Lf(A),px=bk({__proto__:null,default:Lt},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fk=A,Lk=Symbol.for("react.element"),Dk=Symbol.for("react.fragment"),$k=Object.prototype.hasOwnProperty,Bk=Fk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zk={key:!0,ref:!0,__self:!0,__source:!0};function R2(t,r,s){var n,c={},o=null,a=null;s!==void 0&&(o=""+s),r.key!==void 0&&(o=""+r.key),r.ref!==void 0&&(a=r.ref);for(n in r)$k.call(r,n)&&!zk.hasOwnProperty(n)&&(c[n]=r[n]);if(t&&t.defaultProps)for(n in r=t.defaultProps,r)c[n]===void 0&&(c[n]=r[n]);return{$$typeof:Lk,type:t,key:o,ref:a,props:c,_owner:Bk.current}}Df.Fragment=Dk;Df.jsx=R2;Df.jsxs=R2;w2.exports=Df;var e=w2.exports,xg={},P2={exports:{}},qn={},M2={exports:{}},I2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function r(j,N){var E=j.length;j.push(N);e:for(;0<E;){var I=E-1>>>1,D=j[I];if(0<c(D,N))j[I]=N,j[E]=D,E=I;else break e}}function s(j){return j.length===0?null:j[0]}function n(j){if(j.length===0)return null;var N=j[0],E=j.pop();if(E!==N){j[0]=E;e:for(var I=0,D=j.length,V=D>>>1;I<V;){var H=2*(I+1)-1,G=j[H],$=H+1,Y=j[$];if(0>c(G,E))$<D&&0>c(Y,G)?(j[I]=Y,j[$]=E,I=$):(j[I]=G,j[H]=E,I=H);else if($<D&&0>c(Y,E))j[I]=Y,j[$]=E,I=$;else break e}}return N}function c(j,N){var E=j.sortIndex-N.sortIndex;return E!==0?E:j.id-N.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,d=a.now();t.unstable_now=function(){return a.now()-d}}var l=[],i=[],u=1,f=null,h=3,m=!1,p=!1,x=!1,g=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(j){for(var N=s(i);N!==null;){if(N.callback===null)n(i);else if(N.startTime<=j)n(i),N.sortIndex=N.expirationTime,r(l,N);else break;N=s(i)}}function C(j){if(x=!1,b(j),!p)if(s(l)!==null)p=!0,w(T);else{var N=s(i);N!==null&&_(C,N.startTime-j)}}function T(j,N){p=!1,x&&(x=!1,v(L),L=-1),m=!0;var E=h;try{for(b(N),f=s(l);f!==null&&(!(f.expirationTime>N)||j&&!q());){var I=f.callback;if(typeof I=="function"){f.callback=null,h=f.priorityLevel;var D=I(f.expirationTime<=N);N=t.unstable_now(),typeof D=="function"?f.callback=D:f===s(l)&&n(l),b(N)}else n(l);f=s(l)}if(f!==null)var V=!0;else{var H=s(i);H!==null&&_(C,H.startTime-N),V=!1}return V}finally{f=null,h=E,m=!1}}var M=!1,U=null,L=-1,P=5,B=-1;function q(){return!(t.unstable_now()-B<P)}function z(){if(U!==null){var j=t.unstable_now();B=j;var N=!0;try{N=U(!0,j)}finally{N?k():(M=!1,U=null)}}else M=!1}var k;if(typeof y=="function")k=function(){y(z)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,S=R.port2;R.port1.onmessage=z,k=function(){S.postMessage(null)}}else k=function(){g(z,0)};function w(j){U=j,M||(M=!0,k())}function _(j,N){L=g(function(){j(t.unstable_now())},N)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){p||m||(p=!0,w(T))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return s(l)},t.unstable_next=function(j){switch(h){case 1:case 2:case 3:var N=3;break;default:N=h}var E=h;h=N;try{return j()}finally{h=E}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,N){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var E=h;h=j;try{return N()}finally{h=E}},t.unstable_scheduleCallback=function(j,N,E){var I=t.unstable_now();switch(typeof E=="object"&&E!==null?(E=E.delay,E=typeof E=="number"&&0<E?I+E:I):E=I,j){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=E+D,j={id:u++,callback:N,priorityLevel:j,startTime:E,expirationTime:D,sortIndex:-1},E>I?(j.sortIndex=E,r(i,j),s(l)===null&&j===s(i)&&(x?(v(L),L=-1):x=!0,_(C,E-I))):(j.sortIndex=D,r(l,j),p||m||(p=!0,w(T))),j},t.unstable_shouldYield=q,t.unstable_wrapCallback=function(j){var N=h;return function(){var E=h;h=N;try{return j.apply(this,arguments)}finally{h=E}}}})(I2);M2.exports=I2;var Uk=M2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vk=A,Un=Uk;function Nt(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)r+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var O2=new Set,Cd={};function il(t,r){ec(t,r),ec(t+"Capture",r)}function ec(t,r){for(Cd[t]=r,t=0;t<r.length;t++)O2.add(r[t])}var ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yg=Object.prototype.hasOwnProperty,qk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qv={},Hv={};function Hk(t){return yg.call(Hv,t)?!0:yg.call(qv,t)?!1:qk.test(t)?Hv[t]=!0:(qv[t]=!0,!1)}function Wk(t,r,s,n){if(s!==null&&s.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Gk(t,r,s,n){if(r===null||typeof r>"u"||Wk(t,r,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function xn(t,r,s,n,c,o,a){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=n,this.attributeNamespace=c,this.mustUseProperty=s,this.propertyName=t,this.type=r,this.sanitizeURL=o,this.removeEmptyString=a}var Wr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Wr[t]=new xn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];Wr[r]=new xn(r,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Wr[t]=new xn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Wr[t]=new xn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Wr[t]=new xn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Wr[t]=new xn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Wr[t]=new xn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Wr[t]=new xn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Wr[t]=new xn(t,5,!1,t.toLowerCase(),null,!1,!1)});var gx=/[\-:]([a-z])/g;function xx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(gx,xx);Wr[r]=new xn(r,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(gx,xx);Wr[r]=new xn(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(gx,xx);Wr[r]=new xn(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Wr[t]=new xn(t,1,!1,t.toLowerCase(),null,!1,!1)});Wr.xlinkHref=new xn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Wr[t]=new xn(t,1,!1,t.toLowerCase(),null,!0,!0)});function yx(t,r,s,n){var c=Wr.hasOwnProperty(r)?Wr[r]:null;(c!==null?c.type!==0:n||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(Gk(r,s,c,n)&&(s=null),n||c===null?Hk(r)&&(s===null?t.removeAttribute(r):t.setAttribute(r,""+s)):c.mustUseProperty?t[c.propertyName]=s===null?c.type===3?!1:"":s:(r=c.attributeName,n=c.attributeNamespace,s===null?t.removeAttribute(r):(c=c.type,s=c===3||c===4&&s===!0?"":""+s,n?t.setAttributeNS(n,r,s):t.setAttribute(r,s))))}var fi=Vk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ou=Symbol.for("react.element"),_l=Symbol.for("react.portal"),Nl=Symbol.for("react.fragment"),vx=Symbol.for("react.strict_mode"),vg=Symbol.for("react.profiler"),F2=Symbol.for("react.provider"),L2=Symbol.for("react.context"),bx=Symbol.for("react.forward_ref"),bg=Symbol.for("react.suspense"),wg=Symbol.for("react.suspense_list"),wx=Symbol.for("react.memo"),wi=Symbol.for("react.lazy"),D2=Symbol.for("react.offscreen"),Wv=Symbol.iterator;function Ic(t){return t===null||typeof t!="object"?null:(t=Wv&&t[Wv]||t["@@iterator"],typeof t=="function"?t:null)}var nr=Object.assign,Ym;function Zc(t){if(Ym===void 0)try{throw Error()}catch(s){var r=s.stack.trim().match(/\n( *(at )?)/);Ym=r&&r[1]||""}return`
`+Ym+t}var Qm=!1;function Xm(t,r){if(!t||Qm)return"";Qm=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(i){var n=i}Reflect.construct(t,[],r)}else{try{r.call()}catch(i){n=i}t.call(r.prototype)}else{try{throw Error()}catch(i){n=i}t()}}catch(i){if(i&&n&&typeof i.stack=="string"){for(var c=i.stack.split(`
`),o=n.stack.split(`
`),a=c.length-1,d=o.length-1;1<=a&&0<=d&&c[a]!==o[d];)d--;for(;1<=a&&0<=d;a--,d--)if(c[a]!==o[d]){if(a!==1||d!==1)do if(a--,d--,0>d||c[a]!==o[d]){var l=`
`+c[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=d);break}}}finally{Qm=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?Zc(t):""}function Kk(t){switch(t.tag){case 5:return Zc(t.type);case 16:return Zc("Lazy");case 13:return Zc("Suspense");case 19:return Zc("SuspenseList");case 0:case 2:case 15:return t=Xm(t.type,!1),t;case 11:return t=Xm(t.type.render,!1),t;case 1:return t=Xm(t.type,!0),t;default:return""}}function jg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Nl:return"Fragment";case _l:return"Portal";case vg:return"Profiler";case vx:return"StrictMode";case bg:return"Suspense";case wg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case L2:return(t.displayName||"Context")+".Consumer";case F2:return(t._context.displayName||"Context")+".Provider";case bx:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case wx:return r=t.displayName||null,r!==null?r:jg(t.type)||"Memo";case wi:r=t._payload,t=t._init;try{return jg(t(r))}catch{}}return null}function Yk(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jg(r);case 8:return r===vx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Ji(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function $2(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Qk(t){var r=$2(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),n=""+t[r];if(!t.hasOwnProperty(r)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var c=s.get,o=s.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return c.call(this)},set:function(a){n=""+a,o.call(this,a)}}),Object.defineProperty(t,r,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Fu(t){t._valueTracker||(t._valueTracker=Qk(t))}function B2(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var s=r.getValue(),n="";return t&&(n=$2(t)?t.checked?"true":"false":t.value),t=n,t!==s?(r.setValue(t),!0):!1}function Dh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function _g(t,r){var s=r.checked;return nr({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function Gv(t,r){var s=r.defaultValue==null?"":r.defaultValue,n=r.checked!=null?r.checked:r.defaultChecked;s=Ji(r.value!=null?r.value:s),t._wrapperState={initialChecked:n,initialValue:s,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function z2(t,r){r=r.checked,r!=null&&yx(t,"checked",r,!1)}function Ng(t,r){z2(t,r);var s=Ji(r.value),n=r.type;if(s!=null)n==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?Sg(t,r.type,s):r.hasOwnProperty("defaultValue")&&Sg(t,r.type,Ji(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function Kv(t,r,s){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var n=r.type;if(!(n!=="submit"&&n!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,s||r===t.value||(t.value=r),t.defaultValue=r}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function Sg(t,r,s){(r!=="number"||Dh(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var Jc=Array.isArray;function ql(t,r,s,n){if(t=t.options,r){r={};for(var c=0;c<s.length;c++)r["$"+s[c]]=!0;for(s=0;s<t.length;s++)c=r.hasOwnProperty("$"+t[s].value),t[s].selected!==c&&(t[s].selected=c),c&&n&&(t[s].defaultSelected=!0)}else{for(s=""+Ji(s),r=null,c=0;c<t.length;c++){if(t[c].value===s){t[c].selected=!0,n&&(t[c].defaultSelected=!0);return}r!==null||t[c].disabled||(r=t[c])}r!==null&&(r.selected=!0)}}function Cg(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(Nt(91));return nr({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Yv(t,r){var s=r.value;if(s==null){if(s=r.children,r=r.defaultValue,s!=null){if(r!=null)throw Error(Nt(92));if(Jc(s)){if(1<s.length)throw Error(Nt(93));s=s[0]}r=s}r==null&&(r=""),s=r}t._wrapperState={initialValue:Ji(s)}}function U2(t,r){var s=Ji(r.value),n=Ji(r.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),r.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),n!=null&&(t.defaultValue=""+n)}function Qv(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function V2(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kg(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?V2(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Lu,q2=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,s,n,c){MSApp.execUnsafeLocalFunction(function(){return t(r,s,n,c)})}:t}(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(Lu=Lu||document.createElement("div"),Lu.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Lu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function kd(t,r){if(r){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=r;return}}t.textContent=r}var ld={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xk=["Webkit","ms","Moz","O"];Object.keys(ld).forEach(function(t){Xk.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),ld[r]=ld[t]})});function H2(t,r,s){return r==null||typeof r=="boolean"||r===""?"":s||typeof r!="number"||r===0||ld.hasOwnProperty(t)&&ld[t]?(""+r).trim():r+"px"}function W2(t,r){t=t.style;for(var s in r)if(r.hasOwnProperty(s)){var n=s.indexOf("--")===0,c=H2(s,r[s],n);s==="float"&&(s="cssFloat"),n?t.setProperty(s,c):t[s]=c}}var Zk=nr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Eg(t,r){if(r){if(Zk[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(Nt(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(Nt(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(Nt(61))}if(r.style!=null&&typeof r.style!="object")throw Error(Nt(62))}}function Ag(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tg=null;function jx(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Rg=null,Hl=null,Wl=null;function Xv(t){if(t=du(t)){if(typeof Rg!="function")throw Error(Nt(280));var r=t.stateNode;r&&(r=Vf(r),Rg(t.stateNode,t.type,r))}}function G2(t){Hl?Wl?Wl.push(t):Wl=[t]:Hl=t}function K2(){if(Hl){var t=Hl,r=Wl;if(Wl=Hl=null,Xv(t),r)for(t=0;t<r.length;t++)Xv(r[t])}}function Y2(t,r){return t(r)}function Q2(){}var Zm=!1;function X2(t,r,s){if(Zm)return t(r,s);Zm=!0;try{return Y2(t,r,s)}finally{Zm=!1,(Hl!==null||Wl!==null)&&(Q2(),K2())}}function Ed(t,r){var s=t.stateNode;if(s===null)return null;var n=Vf(s);if(n===null)return null;s=n[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(Nt(231,r,typeof s));return s}var Pg=!1;if(ri)try{var Oc={};Object.defineProperty(Oc,"passive",{get:function(){Pg=!0}}),window.addEventListener("test",Oc,Oc),window.removeEventListener("test",Oc,Oc)}catch{Pg=!1}function Jk(t,r,s,n,c,o,a,d,l){var i=Array.prototype.slice.call(arguments,3);try{r.apply(s,i)}catch(u){this.onError(u)}}var cd=!1,$h=null,Bh=!1,Mg=null,e8={onError:function(t){cd=!0,$h=t}};function t8(t,r,s,n,c,o,a,d,l){cd=!1,$h=null,Jk.apply(e8,arguments)}function s8(t,r,s,n,c,o,a,d,l){if(t8.apply(this,arguments),cd){if(cd){var i=$h;cd=!1,$h=null}else throw Error(Nt(198));Bh||(Bh=!0,Mg=i)}}function ol(t){var r=t,s=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,r.flags&4098&&(s=r.return),t=r.return;while(t)}return r.tag===3?s:null}function Z2(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function Zv(t){if(ol(t)!==t)throw Error(Nt(188))}function r8(t){var r=t.alternate;if(!r){if(r=ol(t),r===null)throw Error(Nt(188));return r!==t?null:t}for(var s=t,n=r;;){var c=s.return;if(c===null)break;var o=c.alternate;if(o===null){if(n=c.return,n!==null){s=n;continue}break}if(c.child===o.child){for(o=c.child;o;){if(o===s)return Zv(c),t;if(o===n)return Zv(c),r;o=o.sibling}throw Error(Nt(188))}if(s.return!==n.return)s=c,n=o;else{for(var a=!1,d=c.child;d;){if(d===s){a=!0,s=c,n=o;break}if(d===n){a=!0,n=c,s=o;break}d=d.sibling}if(!a){for(d=o.child;d;){if(d===s){a=!0,s=o,n=c;break}if(d===n){a=!0,n=o,s=c;break}d=d.sibling}if(!a)throw Error(Nt(189))}}if(s.alternate!==n)throw Error(Nt(190))}if(s.tag!==3)throw Error(Nt(188));return s.stateNode.current===s?t:r}function J2(t){return t=r8(t),t!==null?ej(t):null}function ej(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=ej(t);if(r!==null)return r;t=t.sibling}return null}var tj=Un.unstable_scheduleCallback,Jv=Un.unstable_cancelCallback,n8=Un.unstable_shouldYield,a8=Un.unstable_requestPaint,hr=Un.unstable_now,i8=Un.unstable_getCurrentPriorityLevel,_x=Un.unstable_ImmediatePriority,sj=Un.unstable_UserBlockingPriority,zh=Un.unstable_NormalPriority,o8=Un.unstable_LowPriority,rj=Un.unstable_IdlePriority,$f=null,Ma=null;function l8(t){if(Ma&&typeof Ma.onCommitFiberRoot=="function")try{Ma.onCommitFiberRoot($f,t,void 0,(t.current.flags&128)===128)}catch{}}var ba=Math.clz32?Math.clz32:u8,c8=Math.log,d8=Math.LN2;function u8(t){return t>>>=0,t===0?32:31-(c8(t)/d8|0)|0}var Du=64,$u=4194304;function ed(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Uh(t,r){var s=t.pendingLanes;if(s===0)return 0;var n=0,c=t.suspendedLanes,o=t.pingedLanes,a=s&268435455;if(a!==0){var d=a&~c;d!==0?n=ed(d):(o&=a,o!==0&&(n=ed(o)))}else a=s&~c,a!==0?n=ed(a):o!==0&&(n=ed(o));if(n===0)return 0;if(r!==0&&r!==n&&!(r&c)&&(c=n&-n,o=r&-r,c>=o||c===16&&(o&4194240)!==0))return r;if(n&4&&(n|=s&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=n;0<r;)s=31-ba(r),c=1<<s,n|=t[s],r&=~c;return n}function h8(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function f8(t,r){for(var s=t.suspendedLanes,n=t.pingedLanes,c=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-ba(o),d=1<<a,l=c[a];l===-1?(!(d&s)||d&n)&&(c[a]=h8(d,r)):l<=r&&(t.expiredLanes|=d),o&=~d}}function Ig(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function nj(){var t=Du;return Du<<=1,!(Du&4194240)&&(Du=64),t}function Jm(t){for(var r=[],s=0;31>s;s++)r.push(t);return r}function lu(t,r,s){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-ba(r),t[r]=s}function m8(t,r){var s=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<s;){var c=31-ba(s),o=1<<c;r[c]=0,n[c]=-1,t[c]=-1,s&=~o}}function Nx(t,r){var s=t.entangledLanes|=r;for(t=t.entanglements;s;){var n=31-ba(s),c=1<<n;c&r|t[n]&r&&(t[n]|=r),s&=~c}}var $s=0;function aj(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ij,Sx,oj,lj,cj,Og=!1,Bu=[],Bi=null,zi=null,Ui=null,Ad=new Map,Td=new Map,Ni=[],p8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function eb(t,r){switch(t){case"focusin":case"focusout":Bi=null;break;case"dragenter":case"dragleave":zi=null;break;case"mouseover":case"mouseout":Ui=null;break;case"pointerover":case"pointerout":Ad.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Td.delete(r.pointerId)}}function Fc(t,r,s,n,c,o){return t===null||t.nativeEvent!==o?(t={blockedOn:r,domEventName:s,eventSystemFlags:n,nativeEvent:o,targetContainers:[c]},r!==null&&(r=du(r),r!==null&&Sx(r)),t):(t.eventSystemFlags|=n,r=t.targetContainers,c!==null&&r.indexOf(c)===-1&&r.push(c),t)}function g8(t,r,s,n,c){switch(r){case"focusin":return Bi=Fc(Bi,t,r,s,n,c),!0;case"dragenter":return zi=Fc(zi,t,r,s,n,c),!0;case"mouseover":return Ui=Fc(Ui,t,r,s,n,c),!0;case"pointerover":var o=c.pointerId;return Ad.set(o,Fc(Ad.get(o)||null,t,r,s,n,c)),!0;case"gotpointercapture":return o=c.pointerId,Td.set(o,Fc(Td.get(o)||null,t,r,s,n,c)),!0}return!1}function dj(t){var r=Mo(t.target);if(r!==null){var s=ol(r);if(s!==null){if(r=s.tag,r===13){if(r=Z2(s),r!==null){t.blockedOn=r,cj(t.priority,function(){oj(s)});return}}else if(r===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function bh(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var s=Fg(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var n=new s.constructor(s.type,s);Tg=n,s.target.dispatchEvent(n),Tg=null}else return r=du(s),r!==null&&Sx(r),t.blockedOn=s,!1;r.shift()}return!0}function tb(t,r,s){bh(t)&&s.delete(r)}function x8(){Og=!1,Bi!==null&&bh(Bi)&&(Bi=null),zi!==null&&bh(zi)&&(zi=null),Ui!==null&&bh(Ui)&&(Ui=null),Ad.forEach(tb),Td.forEach(tb)}function Lc(t,r){t.blockedOn===r&&(t.blockedOn=null,Og||(Og=!0,Un.unstable_scheduleCallback(Un.unstable_NormalPriority,x8)))}function Rd(t){function r(c){return Lc(c,t)}if(0<Bu.length){Lc(Bu[0],t);for(var s=1;s<Bu.length;s++){var n=Bu[s];n.blockedOn===t&&(n.blockedOn=null)}}for(Bi!==null&&Lc(Bi,t),zi!==null&&Lc(zi,t),Ui!==null&&Lc(Ui,t),Ad.forEach(r),Td.forEach(r),s=0;s<Ni.length;s++)n=Ni[s],n.blockedOn===t&&(n.blockedOn=null);for(;0<Ni.length&&(s=Ni[0],s.blockedOn===null);)dj(s),s.blockedOn===null&&Ni.shift()}var Gl=fi.ReactCurrentBatchConfig,Vh=!0;function y8(t,r,s,n){var c=$s,o=Gl.transition;Gl.transition=null;try{$s=1,Cx(t,r,s,n)}finally{$s=c,Gl.transition=o}}function v8(t,r,s,n){var c=$s,o=Gl.transition;Gl.transition=null;try{$s=4,Cx(t,r,s,n)}finally{$s=c,Gl.transition=o}}function Cx(t,r,s,n){if(Vh){var c=Fg(t,r,s,n);if(c===null)cp(t,r,n,qh,s),eb(t,n);else if(g8(c,t,r,s,n))n.stopPropagation();else if(eb(t,n),r&4&&-1<p8.indexOf(t)){for(;c!==null;){var o=du(c);if(o!==null&&ij(o),o=Fg(t,r,s,n),o===null&&cp(t,r,n,qh,s),o===c)break;c=o}c!==null&&n.stopPropagation()}else cp(t,r,n,null,s)}}var qh=null;function Fg(t,r,s,n){if(qh=null,t=jx(n),t=Mo(t),t!==null)if(r=ol(t),r===null)t=null;else if(s=r.tag,s===13){if(t=Z2(r),t!==null)return t;t=null}else if(s===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return qh=t,null}function uj(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(i8()){case _x:return 1;case sj:return 4;case zh:case o8:return 16;case rj:return 536870912;default:return 16}default:return 16}}var ki=null,kx=null,wh=null;function hj(){if(wh)return wh;var t,r=kx,s=r.length,n,c="value"in ki?ki.value:ki.textContent,o=c.length;for(t=0;t<s&&r[t]===c[t];t++);var a=s-t;for(n=1;n<=a&&r[s-n]===c[o-n];n++);return wh=c.slice(t,1<n?1-n:void 0)}function jh(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function zu(){return!0}function sb(){return!1}function Hn(t){function r(s,n,c,o,a){this._reactName=s,this._targetInst=c,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var d in t)t.hasOwnProperty(d)&&(s=t[d],this[d]=s?s(o):o[d]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?zu:sb,this.isPropagationStopped=sb,this}return nr(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=zu)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=zu)},persist:function(){},isPersistent:zu}),r}var bc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ex=Hn(bc),cu=nr({},bc,{view:0,detail:0}),b8=Hn(cu),ep,tp,Dc,Bf=nr({},cu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ax,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Dc&&(Dc&&t.type==="mousemove"?(ep=t.screenX-Dc.screenX,tp=t.screenY-Dc.screenY):tp=ep=0,Dc=t),ep)},movementY:function(t){return"movementY"in t?t.movementY:tp}}),rb=Hn(Bf),w8=nr({},Bf,{dataTransfer:0}),j8=Hn(w8),_8=nr({},cu,{relatedTarget:0}),sp=Hn(_8),N8=nr({},bc,{animationName:0,elapsedTime:0,pseudoElement:0}),S8=Hn(N8),C8=nr({},bc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),k8=Hn(C8),E8=nr({},bc,{data:0}),nb=Hn(E8),A8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},T8={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},R8={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function P8(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=R8[t])?!!r[t]:!1}function Ax(){return P8}var M8=nr({},cu,{key:function(t){if(t.key){var r=A8[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=jh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?T8[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ax,charCode:function(t){return t.type==="keypress"?jh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?jh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),I8=Hn(M8),O8=nr({},Bf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ab=Hn(O8),F8=nr({},cu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ax}),L8=Hn(F8),D8=nr({},bc,{propertyName:0,elapsedTime:0,pseudoElement:0}),$8=Hn(D8),B8=nr({},Bf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),z8=Hn(B8),U8=[9,13,27,32],Tx=ri&&"CompositionEvent"in window,dd=null;ri&&"documentMode"in document&&(dd=document.documentMode);var V8=ri&&"TextEvent"in window&&!dd,fj=ri&&(!Tx||dd&&8<dd&&11>=dd),ib=String.fromCharCode(32),ob=!1;function mj(t,r){switch(t){case"keyup":return U8.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pj(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Sl=!1;function q8(t,r){switch(t){case"compositionend":return pj(r);case"keypress":return r.which!==32?null:(ob=!0,ib);case"textInput":return t=r.data,t===ib&&ob?null:t;default:return null}}function H8(t,r){if(Sl)return t==="compositionend"||!Tx&&mj(t,r)?(t=hj(),wh=kx=ki=null,Sl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return fj&&r.locale!=="ko"?null:r.data;default:return null}}var W8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lb(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!W8[t.type]:r==="textarea"}function gj(t,r,s,n){G2(n),r=Hh(r,"onChange"),0<r.length&&(s=new Ex("onChange","change",null,s,n),t.push({event:s,listeners:r}))}var ud=null,Pd=null;function G8(t){kj(t,0)}function zf(t){var r=El(t);if(B2(r))return t}function K8(t,r){if(t==="change")return r}var xj=!1;if(ri){var rp;if(ri){var np="oninput"in document;if(!np){var cb=document.createElement("div");cb.setAttribute("oninput","return;"),np=typeof cb.oninput=="function"}rp=np}else rp=!1;xj=rp&&(!document.documentMode||9<document.documentMode)}function db(){ud&&(ud.detachEvent("onpropertychange",yj),Pd=ud=null)}function yj(t){if(t.propertyName==="value"&&zf(Pd)){var r=[];gj(r,Pd,t,jx(t)),X2(G8,r)}}function Y8(t,r,s){t==="focusin"?(db(),ud=r,Pd=s,ud.attachEvent("onpropertychange",yj)):t==="focusout"&&db()}function Q8(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return zf(Pd)}function X8(t,r){if(t==="click")return zf(r)}function Z8(t,r){if(t==="input"||t==="change")return zf(r)}function J8(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var ja=typeof Object.is=="function"?Object.is:J8;function Md(t,r){if(ja(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var s=Object.keys(t),n=Object.keys(r);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var c=s[n];if(!yg.call(r,c)||!ja(t[c],r[c]))return!1}return!0}function ub(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hb(t,r){var s=ub(t);t=0;for(var n;s;){if(s.nodeType===3){if(n=t+s.textContent.length,t<=r&&n>=r)return{node:s,offset:r-t};t=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=ub(s)}}function vj(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?vj(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function bj(){for(var t=window,r=Dh();r instanceof t.HTMLIFrameElement;){try{var s=typeof r.contentWindow.location.href=="string"}catch{s=!1}if(s)t=r.contentWindow;else break;r=Dh(t.document)}return r}function Rx(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function eE(t){var r=bj(),s=t.focusedElem,n=t.selectionRange;if(r!==s&&s&&s.ownerDocument&&vj(s.ownerDocument.documentElement,s)){if(n!==null&&Rx(s)){if(r=n.start,t=n.end,t===void 0&&(t=r),"selectionStart"in s)s.selectionStart=r,s.selectionEnd=Math.min(t,s.value.length);else if(t=(r=s.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var c=s.textContent.length,o=Math.min(n.start,c);n=n.end===void 0?o:Math.min(n.end,c),!t.extend&&o>n&&(c=n,n=o,o=c),c=hb(s,o);var a=hb(s,n);c&&a&&(t.rangeCount!==1||t.anchorNode!==c.node||t.anchorOffset!==c.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(r=r.createRange(),r.setStart(c.node,c.offset),t.removeAllRanges(),o>n?(t.addRange(r),t.extend(a.node,a.offset)):(r.setEnd(a.node,a.offset),t.addRange(r)))}}for(r=[],t=s;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<r.length;s++)t=r[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var tE=ri&&"documentMode"in document&&11>=document.documentMode,Cl=null,Lg=null,hd=null,Dg=!1;function fb(t,r,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Dg||Cl==null||Cl!==Dh(n)||(n=Cl,"selectionStart"in n&&Rx(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),hd&&Md(hd,n)||(hd=n,n=Hh(Lg,"onSelect"),0<n.length&&(r=new Ex("onSelect","select",null,r,s),t.push({event:r,listeners:n}),r.target=Cl)))}function Uu(t,r){var s={};return s[t.toLowerCase()]=r.toLowerCase(),s["Webkit"+t]="webkit"+r,s["Moz"+t]="moz"+r,s}var kl={animationend:Uu("Animation","AnimationEnd"),animationiteration:Uu("Animation","AnimationIteration"),animationstart:Uu("Animation","AnimationStart"),transitionend:Uu("Transition","TransitionEnd")},ap={},wj={};ri&&(wj=document.createElement("div").style,"AnimationEvent"in window||(delete kl.animationend.animation,delete kl.animationiteration.animation,delete kl.animationstart.animation),"TransitionEvent"in window||delete kl.transitionend.transition);function Uf(t){if(ap[t])return ap[t];if(!kl[t])return t;var r=kl[t],s;for(s in r)if(r.hasOwnProperty(s)&&s in wj)return ap[t]=r[s];return t}var jj=Uf("animationend"),_j=Uf("animationiteration"),Nj=Uf("animationstart"),Sj=Uf("transitionend"),Cj=new Map,mb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ho(t,r){Cj.set(t,r),il(r,[t])}for(var ip=0;ip<mb.length;ip++){var op=mb[ip],sE=op.toLowerCase(),rE=op[0].toUpperCase()+op.slice(1);ho(sE,"on"+rE)}ho(jj,"onAnimationEnd");ho(_j,"onAnimationIteration");ho(Nj,"onAnimationStart");ho("dblclick","onDoubleClick");ho("focusin","onFocus");ho("focusout","onBlur");ho(Sj,"onTransitionEnd");ec("onMouseEnter",["mouseout","mouseover"]);ec("onMouseLeave",["mouseout","mouseover"]);ec("onPointerEnter",["pointerout","pointerover"]);ec("onPointerLeave",["pointerout","pointerover"]);il("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));il("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));il("onBeforeInput",["compositionend","keypress","textInput","paste"]);il("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));il("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));il("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var td="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nE=new Set("cancel close invalid load scroll toggle".split(" ").concat(td));function pb(t,r,s){var n=t.type||"unknown-event";t.currentTarget=s,s8(n,r,void 0,t),t.currentTarget=null}function kj(t,r){r=(r&4)!==0;for(var s=0;s<t.length;s++){var n=t[s],c=n.event;n=n.listeners;e:{var o=void 0;if(r)for(var a=n.length-1;0<=a;a--){var d=n[a],l=d.instance,i=d.currentTarget;if(d=d.listener,l!==o&&c.isPropagationStopped())break e;pb(c,d,i),o=l}else for(a=0;a<n.length;a++){if(d=n[a],l=d.instance,i=d.currentTarget,d=d.listener,l!==o&&c.isPropagationStopped())break e;pb(c,d,i),o=l}}}if(Bh)throw t=Mg,Bh=!1,Mg=null,t}function Ks(t,r){var s=r[Vg];s===void 0&&(s=r[Vg]=new Set);var n=t+"__bubble";s.has(n)||(Ej(r,t,2,!1),s.add(n))}function lp(t,r,s){var n=0;r&&(n|=4),Ej(s,t,n,r)}var Vu="_reactListening"+Math.random().toString(36).slice(2);function Id(t){if(!t[Vu]){t[Vu]=!0,O2.forEach(function(s){s!=="selectionchange"&&(nE.has(s)||lp(s,!1,t),lp(s,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Vu]||(r[Vu]=!0,lp("selectionchange",!1,r))}}function Ej(t,r,s,n){switch(uj(r)){case 1:var c=y8;break;case 4:c=v8;break;default:c=Cx}s=c.bind(null,r,s,t),c=void 0,!Pg||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(c=!0),n?c!==void 0?t.addEventListener(r,s,{capture:!0,passive:c}):t.addEventListener(r,s,!0):c!==void 0?t.addEventListener(r,s,{passive:c}):t.addEventListener(r,s,!1)}function cp(t,r,s,n,c){var o=n;if(!(r&1)&&!(r&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var d=n.stateNode.containerInfo;if(d===c||d.nodeType===8&&d.parentNode===c)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===c||l.nodeType===8&&l.parentNode===c))return;a=a.return}for(;d!==null;){if(a=Mo(d),a===null)return;if(l=a.tag,l===5||l===6){n=o=a;continue e}d=d.parentNode}}n=n.return}X2(function(){var i=o,u=jx(s),f=[];e:{var h=Cj.get(t);if(h!==void 0){var m=Ex,p=t;switch(t){case"keypress":if(jh(s)===0)break e;case"keydown":case"keyup":m=I8;break;case"focusin":p="focus",m=sp;break;case"focusout":p="blur",m=sp;break;case"beforeblur":case"afterblur":m=sp;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=rb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=j8;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=L8;break;case jj:case _j:case Nj:m=S8;break;case Sj:m=$8;break;case"scroll":m=b8;break;case"wheel":m=z8;break;case"copy":case"cut":case"paste":m=k8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=ab}var x=(r&4)!==0,g=!x&&t==="scroll",v=x?h!==null?h+"Capture":null:h;x=[];for(var y=i,b;y!==null;){b=y;var C=b.stateNode;if(b.tag===5&&C!==null&&(b=C,v!==null&&(C=Ed(y,v),C!=null&&x.push(Od(y,C,b)))),g)break;y=y.return}0<x.length&&(h=new m(h,p,null,s,u),f.push({event:h,listeners:x}))}}if(!(r&7)){e:{if(h=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",h&&s!==Tg&&(p=s.relatedTarget||s.fromElement)&&(Mo(p)||p[ni]))break e;if((m||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,m?(p=s.relatedTarget||s.toElement,m=i,p=p?Mo(p):null,p!==null&&(g=ol(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(m=null,p=i),m!==p)){if(x=rb,C="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(x=ab,C="onPointerLeave",v="onPointerEnter",y="pointer"),g=m==null?h:El(m),b=p==null?h:El(p),h=new x(C,y+"leave",m,s,u),h.target=g,h.relatedTarget=b,C=null,Mo(u)===i&&(x=new x(v,y+"enter",p,s,u),x.target=b,x.relatedTarget=g,C=x),g=C,m&&p)t:{for(x=m,v=p,y=0,b=x;b;b=pl(b))y++;for(b=0,C=v;C;C=pl(C))b++;for(;0<y-b;)x=pl(x),y--;for(;0<b-y;)v=pl(v),b--;for(;y--;){if(x===v||v!==null&&x===v.alternate)break t;x=pl(x),v=pl(v)}x=null}else x=null;m!==null&&gb(f,h,m,x,!1),p!==null&&g!==null&&gb(f,g,p,x,!0)}}e:{if(h=i?El(i):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var T=K8;else if(lb(h))if(xj)T=Z8;else{T=Q8;var M=Y8}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(T=X8);if(T&&(T=T(t,i))){gj(f,T,s,u);break e}M&&M(t,h,i),t==="focusout"&&(M=h._wrapperState)&&M.controlled&&h.type==="number"&&Sg(h,"number",h.value)}switch(M=i?El(i):window,t){case"focusin":(lb(M)||M.contentEditable==="true")&&(Cl=M,Lg=i,hd=null);break;case"focusout":hd=Lg=Cl=null;break;case"mousedown":Dg=!0;break;case"contextmenu":case"mouseup":case"dragend":Dg=!1,fb(f,s,u);break;case"selectionchange":if(tE)break;case"keydown":case"keyup":fb(f,s,u)}var U;if(Tx)e:{switch(t){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Sl?mj(t,s)&&(L="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(L="onCompositionStart");L&&(fj&&s.locale!=="ko"&&(Sl||L!=="onCompositionStart"?L==="onCompositionEnd"&&Sl&&(U=hj()):(ki=u,kx="value"in ki?ki.value:ki.textContent,Sl=!0)),M=Hh(i,L),0<M.length&&(L=new nb(L,t,null,s,u),f.push({event:L,listeners:M}),U?L.data=U:(U=pj(s),U!==null&&(L.data=U)))),(U=V8?q8(t,s):H8(t,s))&&(i=Hh(i,"onBeforeInput"),0<i.length&&(u=new nb("onBeforeInput","beforeinput",null,s,u),f.push({event:u,listeners:i}),u.data=U))}kj(f,r)})}function Od(t,r,s){return{instance:t,listener:r,currentTarget:s}}function Hh(t,r){for(var s=r+"Capture",n=[];t!==null;){var c=t,o=c.stateNode;c.tag===5&&o!==null&&(c=o,o=Ed(t,s),o!=null&&n.unshift(Od(t,o,c)),o=Ed(t,r),o!=null&&n.push(Od(t,o,c))),t=t.return}return n}function pl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function gb(t,r,s,n,c){for(var o=r._reactName,a=[];s!==null&&s!==n;){var d=s,l=d.alternate,i=d.stateNode;if(l!==null&&l===n)break;d.tag===5&&i!==null&&(d=i,c?(l=Ed(s,o),l!=null&&a.unshift(Od(s,l,d))):c||(l=Ed(s,o),l!=null&&a.push(Od(s,l,d)))),s=s.return}a.length!==0&&t.push({event:r,listeners:a})}var aE=/\r\n?/g,iE=/\u0000|\uFFFD/g;function xb(t){return(typeof t=="string"?t:""+t).replace(aE,`
`).replace(iE,"")}function qu(t,r,s){if(r=xb(r),xb(t)!==r&&s)throw Error(Nt(425))}function Wh(){}var $g=null,Bg=null;function zg(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Ug=typeof setTimeout=="function"?setTimeout:void 0,oE=typeof clearTimeout=="function"?clearTimeout:void 0,yb=typeof Promise=="function"?Promise:void 0,lE=typeof queueMicrotask=="function"?queueMicrotask:typeof yb<"u"?function(t){return yb.resolve(null).then(t).catch(cE)}:Ug;function cE(t){setTimeout(function(){throw t})}function dp(t,r){var s=r,n=0;do{var c=s.nextSibling;if(t.removeChild(s),c&&c.nodeType===8)if(s=c.data,s==="/$"){if(n===0){t.removeChild(c),Rd(r);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=c}while(s);Rd(r)}function Vi(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function vb(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(r===0)return t;r--}else s==="/$"&&r++}t=t.previousSibling}return null}var wc=Math.random().toString(36).slice(2),Ta="__reactFiber$"+wc,Fd="__reactProps$"+wc,ni="__reactContainer$"+wc,Vg="__reactEvents$"+wc,dE="__reactListeners$"+wc,uE="__reactHandles$"+wc;function Mo(t){var r=t[Ta];if(r)return r;for(var s=t.parentNode;s;){if(r=s[ni]||s[Ta]){if(s=r.alternate,r.child!==null||s!==null&&s.child!==null)for(t=vb(t);t!==null;){if(s=t[Ta])return s;t=vb(t)}return r}t=s,s=t.parentNode}return null}function du(t){return t=t[Ta]||t[ni],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function El(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Nt(33))}function Vf(t){return t[Fd]||null}var qg=[],Al=-1;function fo(t){return{current:t}}function Ys(t){0>Al||(t.current=qg[Al],qg[Al]=null,Al--)}function Us(t,r){Al++,qg[Al]=t.current,t.current=r}var eo={},rn=fo(eo),Cn=fo(!1),Yo=eo;function tc(t,r){var s=t.type.contextTypes;if(!s)return eo;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===r)return n.__reactInternalMemoizedMaskedChildContext;var c={},o;for(o in s)c[o]=r[o];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=c),c}function kn(t){return t=t.childContextTypes,t!=null}function Gh(){Ys(Cn),Ys(rn)}function bb(t,r,s){if(rn.current!==eo)throw Error(Nt(168));Us(rn,r),Us(Cn,s)}function Aj(t,r,s){var n=t.stateNode;if(r=r.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var c in n)if(!(c in r))throw Error(Nt(108,Yk(t)||"Unknown",c));return nr({},s,n)}function Kh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||eo,Yo=rn.current,Us(rn,t),Us(Cn,Cn.current),!0}function wb(t,r,s){var n=t.stateNode;if(!n)throw Error(Nt(169));s?(t=Aj(t,r,Yo),n.__reactInternalMemoizedMergedChildContext=t,Ys(Cn),Ys(rn),Us(rn,t)):Ys(Cn),Us(Cn,s)}var Ka=null,qf=!1,up=!1;function Tj(t){Ka===null?Ka=[t]:Ka.push(t)}function hE(t){qf=!0,Tj(t)}function mo(){if(!up&&Ka!==null){up=!0;var t=0,r=$s;try{var s=Ka;for($s=1;t<s.length;t++){var n=s[t];do n=n(!0);while(n!==null)}Ka=null,qf=!1}catch(c){throw Ka!==null&&(Ka=Ka.slice(t+1)),tj(_x,mo),c}finally{$s=r,up=!1}}return null}var Tl=[],Rl=0,Yh=null,Qh=0,Xn=[],Zn=0,Qo=null,Ya=1,Qa="";function ko(t,r){Tl[Rl++]=Qh,Tl[Rl++]=Yh,Yh=t,Qh=r}function Rj(t,r,s){Xn[Zn++]=Ya,Xn[Zn++]=Qa,Xn[Zn++]=Qo,Qo=t;var n=Ya;t=Qa;var c=32-ba(n)-1;n&=~(1<<c),s+=1;var o=32-ba(r)+c;if(30<o){var a=c-c%5;o=(n&(1<<a)-1).toString(32),n>>=a,c-=a,Ya=1<<32-ba(r)+c|s<<c|n,Qa=o+t}else Ya=1<<o|s<<c|n,Qa=t}function Px(t){t.return!==null&&(ko(t,1),Rj(t,1,0))}function Mx(t){for(;t===Yh;)Yh=Tl[--Rl],Tl[Rl]=null,Qh=Tl[--Rl],Tl[Rl]=null;for(;t===Qo;)Qo=Xn[--Zn],Xn[Zn]=null,Qa=Xn[--Zn],Xn[Zn]=null,Ya=Xn[--Zn],Xn[Zn]=null}var $n=null,Ln=null,Xs=!1,ya=null;function Pj(t,r){var s=ea(5,null,null,0);s.elementType="DELETED",s.stateNode=r,s.return=t,r=t.deletions,r===null?(t.deletions=[s],t.flags|=16):r.push(s)}function jb(t,r){switch(t.tag){case 5:var s=t.type;return r=r.nodeType!==1||s.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,$n=t,Ln=Vi(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,$n=t,Ln=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(s=Qo!==null?{id:Ya,overflow:Qa}:null,t.memoizedState={dehydrated:r,treeContext:s,retryLane:1073741824},s=ea(18,null,null,0),s.stateNode=r,s.return=t,t.child=s,$n=t,Ln=null,!0):!1;default:return!1}}function Hg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Wg(t){if(Xs){var r=Ln;if(r){var s=r;if(!jb(t,r)){if(Hg(t))throw Error(Nt(418));r=Vi(s.nextSibling);var n=$n;r&&jb(t,r)?Pj(n,s):(t.flags=t.flags&-4097|2,Xs=!1,$n=t)}}else{if(Hg(t))throw Error(Nt(418));t.flags=t.flags&-4097|2,Xs=!1,$n=t}}}function _b(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;$n=t}function Hu(t){if(t!==$n)return!1;if(!Xs)return _b(t),Xs=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!zg(t.type,t.memoizedProps)),r&&(r=Ln)){if(Hg(t))throw Mj(),Error(Nt(418));for(;r;)Pj(t,r),r=Vi(r.nextSibling)}if(_b(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Nt(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(r===0){Ln=Vi(t.nextSibling);break e}r--}else s!=="$"&&s!=="$!"&&s!=="$?"||r++}t=t.nextSibling}Ln=null}}else Ln=$n?Vi(t.stateNode.nextSibling):null;return!0}function Mj(){for(var t=Ln;t;)t=Vi(t.nextSibling)}function sc(){Ln=$n=null,Xs=!1}function Ix(t){ya===null?ya=[t]:ya.push(t)}var fE=fi.ReactCurrentBatchConfig;function $c(t,r,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(Nt(309));var n=s.stateNode}if(!n)throw Error(Nt(147,t));var c=n,o=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===o?r.ref:(r=function(a){var d=c.refs;a===null?delete d[o]:d[o]=a},r._stringRef=o,r)}if(typeof t!="string")throw Error(Nt(284));if(!s._owner)throw Error(Nt(290,t))}return t}function Wu(t,r){throw t=Object.prototype.toString.call(r),Error(Nt(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function Nb(t){var r=t._init;return r(t._payload)}function Ij(t){function r(v,y){if(t){var b=v.deletions;b===null?(v.deletions=[y],v.flags|=16):b.push(y)}}function s(v,y){if(!t)return null;for(;y!==null;)r(v,y),y=y.sibling;return null}function n(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function c(v,y){return v=Gi(v,y),v.index=0,v.sibling=null,v}function o(v,y,b){return v.index=b,t?(b=v.alternate,b!==null?(b=b.index,b<y?(v.flags|=2,y):b):(v.flags|=2,y)):(v.flags|=1048576,y)}function a(v){return t&&v.alternate===null&&(v.flags|=2),v}function d(v,y,b,C){return y===null||y.tag!==6?(y=yp(b,v.mode,C),y.return=v,y):(y=c(y,b),y.return=v,y)}function l(v,y,b,C){var T=b.type;return T===Nl?u(v,y,b.props.children,C,b.key):y!==null&&(y.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===wi&&Nb(T)===y.type)?(C=c(y,b.props),C.ref=$c(v,y,b),C.return=v,C):(C=Ah(b.type,b.key,b.props,null,v.mode,C),C.ref=$c(v,y,b),C.return=v,C)}function i(v,y,b,C){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=vp(b,v.mode,C),y.return=v,y):(y=c(y,b.children||[]),y.return=v,y)}function u(v,y,b,C,T){return y===null||y.tag!==7?(y=qo(b,v.mode,C,T),y.return=v,y):(y=c(y,b),y.return=v,y)}function f(v,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=yp(""+y,v.mode,b),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ou:return b=Ah(y.type,y.key,y.props,null,v.mode,b),b.ref=$c(v,null,y),b.return=v,b;case _l:return y=vp(y,v.mode,b),y.return=v,y;case wi:var C=y._init;return f(v,C(y._payload),b)}if(Jc(y)||Ic(y))return y=qo(y,v.mode,b,null),y.return=v,y;Wu(v,y)}return null}function h(v,y,b,C){var T=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return T!==null?null:d(v,y,""+b,C);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ou:return b.key===T?l(v,y,b,C):null;case _l:return b.key===T?i(v,y,b,C):null;case wi:return T=b._init,h(v,y,T(b._payload),C)}if(Jc(b)||Ic(b))return T!==null?null:u(v,y,b,C,null);Wu(v,b)}return null}function m(v,y,b,C,T){if(typeof C=="string"&&C!==""||typeof C=="number")return v=v.get(b)||null,d(y,v,""+C,T);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ou:return v=v.get(C.key===null?b:C.key)||null,l(y,v,C,T);case _l:return v=v.get(C.key===null?b:C.key)||null,i(y,v,C,T);case wi:var M=C._init;return m(v,y,b,M(C._payload),T)}if(Jc(C)||Ic(C))return v=v.get(b)||null,u(y,v,C,T,null);Wu(y,C)}return null}function p(v,y,b,C){for(var T=null,M=null,U=y,L=y=0,P=null;U!==null&&L<b.length;L++){U.index>L?(P=U,U=null):P=U.sibling;var B=h(v,U,b[L],C);if(B===null){U===null&&(U=P);break}t&&U&&B.alternate===null&&r(v,U),y=o(B,y,L),M===null?T=B:M.sibling=B,M=B,U=P}if(L===b.length)return s(v,U),Xs&&ko(v,L),T;if(U===null){for(;L<b.length;L++)U=f(v,b[L],C),U!==null&&(y=o(U,y,L),M===null?T=U:M.sibling=U,M=U);return Xs&&ko(v,L),T}for(U=n(v,U);L<b.length;L++)P=m(U,v,L,b[L],C),P!==null&&(t&&P.alternate!==null&&U.delete(P.key===null?L:P.key),y=o(P,y,L),M===null?T=P:M.sibling=P,M=P);return t&&U.forEach(function(q){return r(v,q)}),Xs&&ko(v,L),T}function x(v,y,b,C){var T=Ic(b);if(typeof T!="function")throw Error(Nt(150));if(b=T.call(b),b==null)throw Error(Nt(151));for(var M=T=null,U=y,L=y=0,P=null,B=b.next();U!==null&&!B.done;L++,B=b.next()){U.index>L?(P=U,U=null):P=U.sibling;var q=h(v,U,B.value,C);if(q===null){U===null&&(U=P);break}t&&U&&q.alternate===null&&r(v,U),y=o(q,y,L),M===null?T=q:M.sibling=q,M=q,U=P}if(B.done)return s(v,U),Xs&&ko(v,L),T;if(U===null){for(;!B.done;L++,B=b.next())B=f(v,B.value,C),B!==null&&(y=o(B,y,L),M===null?T=B:M.sibling=B,M=B);return Xs&&ko(v,L),T}for(U=n(v,U);!B.done;L++,B=b.next())B=m(U,v,L,B.value,C),B!==null&&(t&&B.alternate!==null&&U.delete(B.key===null?L:B.key),y=o(B,y,L),M===null?T=B:M.sibling=B,M=B);return t&&U.forEach(function(z){return r(v,z)}),Xs&&ko(v,L),T}function g(v,y,b,C){if(typeof b=="object"&&b!==null&&b.type===Nl&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Ou:e:{for(var T=b.key,M=y;M!==null;){if(M.key===T){if(T=b.type,T===Nl){if(M.tag===7){s(v,M.sibling),y=c(M,b.props.children),y.return=v,v=y;break e}}else if(M.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===wi&&Nb(T)===M.type){s(v,M.sibling),y=c(M,b.props),y.ref=$c(v,M,b),y.return=v,v=y;break e}s(v,M);break}else r(v,M);M=M.sibling}b.type===Nl?(y=qo(b.props.children,v.mode,C,b.key),y.return=v,v=y):(C=Ah(b.type,b.key,b.props,null,v.mode,C),C.ref=$c(v,y,b),C.return=v,v=C)}return a(v);case _l:e:{for(M=b.key;y!==null;){if(y.key===M)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){s(v,y.sibling),y=c(y,b.children||[]),y.return=v,v=y;break e}else{s(v,y);break}else r(v,y);y=y.sibling}y=vp(b,v.mode,C),y.return=v,v=y}return a(v);case wi:return M=b._init,g(v,y,M(b._payload),C)}if(Jc(b))return p(v,y,b,C);if(Ic(b))return x(v,y,b,C);Wu(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(s(v,y.sibling),y=c(y,b),y.return=v,v=y):(s(v,y),y=yp(b,v.mode,C),y.return=v,v=y),a(v)):s(v,y)}return g}var rc=Ij(!0),Oj=Ij(!1),Xh=fo(null),Zh=null,Pl=null,Ox=null;function Fx(){Ox=Pl=Zh=null}function Lx(t){var r=Xh.current;Ys(Xh),t._currentValue=r}function Gg(t,r,s){for(;t!==null;){var n=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,n!==null&&(n.childLanes|=r)):n!==null&&(n.childLanes&r)!==r&&(n.childLanes|=r),t===s)break;t=t.return}}function Kl(t,r){Zh=t,Ox=Pl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&r&&(Sn=!0),t.firstContext=null)}function aa(t){var r=t._currentValue;if(Ox!==t)if(t={context:t,memoizedValue:r,next:null},Pl===null){if(Zh===null)throw Error(Nt(308));Pl=t,Zh.dependencies={lanes:0,firstContext:t}}else Pl=Pl.next=t;return r}var Io=null;function Dx(t){Io===null?Io=[t]:Io.push(t)}function Fj(t,r,s,n){var c=r.interleaved;return c===null?(s.next=s,Dx(r)):(s.next=c.next,c.next=s),r.interleaved=s,ai(t,n)}function ai(t,r){t.lanes|=r;var s=t.alternate;for(s!==null&&(s.lanes|=r),s=t,t=t.return;t!==null;)t.childLanes|=r,s=t.alternate,s!==null&&(s.childLanes|=r),s=t,t=t.return;return s.tag===3?s.stateNode:null}var ji=!1;function $x(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lj(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ja(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function qi(t,r,s){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Ts&2){var c=n.pending;return c===null?r.next=r:(r.next=c.next,c.next=r),n.pending=r,ai(t,s)}return c=n.interleaved,c===null?(r.next=r,Dx(n)):(r.next=c.next,c.next=r),n.interleaved=r,ai(t,s)}function _h(t,r,s){if(r=r.updateQueue,r!==null&&(r=r.shared,(s&4194240)!==0)){var n=r.lanes;n&=t.pendingLanes,s|=n,r.lanes=s,Nx(t,s)}}function Sb(t,r){var s=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var c=null,o=null;if(s=s.firstBaseUpdate,s!==null){do{var a={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};o===null?c=o=a:o=o.next=a,s=s.next}while(s!==null);o===null?c=o=r:o=o.next=r}else c=o=r;s={baseState:n.baseState,firstBaseUpdate:c,lastBaseUpdate:o,shared:n.shared,effects:n.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=r:t.next=r,s.lastBaseUpdate=r}function Jh(t,r,s,n){var c=t.updateQueue;ji=!1;var o=c.firstBaseUpdate,a=c.lastBaseUpdate,d=c.shared.pending;if(d!==null){c.shared.pending=null;var l=d,i=l.next;l.next=null,a===null?o=i:a.next=i,a=l;var u=t.alternate;u!==null&&(u=u.updateQueue,d=u.lastBaseUpdate,d!==a&&(d===null?u.firstBaseUpdate=i:d.next=i,u.lastBaseUpdate=l))}if(o!==null){var f=c.baseState;a=0,u=i=l=null,d=o;do{var h=d.lane,m=d.eventTime;if((n&h)===h){u!==null&&(u=u.next={eventTime:m,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var p=t,x=d;switch(h=r,m=s,x.tag){case 1:if(p=x.payload,typeof p=="function"){f=p.call(m,f,h);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=x.payload,h=typeof p=="function"?p.call(m,f,h):p,h==null)break e;f=nr({},f,h);break e;case 2:ji=!0}}d.callback!==null&&d.lane!==0&&(t.flags|=64,h=c.effects,h===null?c.effects=[d]:h.push(d))}else m={eventTime:m,lane:h,tag:d.tag,payload:d.payload,callback:d.callback,next:null},u===null?(i=u=m,l=f):u=u.next=m,a|=h;if(d=d.next,d===null){if(d=c.shared.pending,d===null)break;h=d,d=h.next,h.next=null,c.lastBaseUpdate=h,c.shared.pending=null}}while(1);if(u===null&&(l=f),c.baseState=l,c.firstBaseUpdate=i,c.lastBaseUpdate=u,r=c.shared.interleaved,r!==null){c=r;do a|=c.lane,c=c.next;while(c!==r)}else o===null&&(c.shared.lanes=0);Zo|=a,t.lanes=a,t.memoizedState=f}}function Cb(t,r,s){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var n=t[r],c=n.callback;if(c!==null){if(n.callback=null,n=s,typeof c!="function")throw Error(Nt(191,c));c.call(n)}}}var uu={},Ia=fo(uu),Ld=fo(uu),Dd=fo(uu);function Oo(t){if(t===uu)throw Error(Nt(174));return t}function Bx(t,r){switch(Us(Dd,r),Us(Ld,t),Us(Ia,uu),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:kg(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=kg(r,t)}Ys(Ia),Us(Ia,r)}function nc(){Ys(Ia),Ys(Ld),Ys(Dd)}function Dj(t){Oo(Dd.current);var r=Oo(Ia.current),s=kg(r,t.type);r!==s&&(Us(Ld,t),Us(Ia,s))}function zx(t){Ld.current===t&&(Ys(Ia),Ys(Ld))}var er=fo(0);function ef(t){for(var r=t;r!==null;){if(r.tag===13){var s=r.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var hp=[];function Ux(){for(var t=0;t<hp.length;t++)hp[t]._workInProgressVersionPrimary=null;hp.length=0}var Nh=fi.ReactCurrentDispatcher,fp=fi.ReactCurrentBatchConfig,Xo=0,rr=null,Er=null,Fr=null,tf=!1,fd=!1,$d=0,mE=0;function Zr(){throw Error(Nt(321))}function Vx(t,r){if(r===null)return!1;for(var s=0;s<r.length&&s<t.length;s++)if(!ja(t[s],r[s]))return!1;return!0}function qx(t,r,s,n,c,o){if(Xo=o,rr=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Nh.current=t===null||t.memoizedState===null?yE:vE,t=s(n,c),fd){o=0;do{if(fd=!1,$d=0,25<=o)throw Error(Nt(301));o+=1,Fr=Er=null,r.updateQueue=null,Nh.current=bE,t=s(n,c)}while(fd)}if(Nh.current=sf,r=Er!==null&&Er.next!==null,Xo=0,Fr=Er=rr=null,tf=!1,r)throw Error(Nt(300));return t}function Hx(){var t=$d!==0;return $d=0,t}function Aa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fr===null?rr.memoizedState=Fr=t:Fr=Fr.next=t,Fr}function ia(){if(Er===null){var t=rr.alternate;t=t!==null?t.memoizedState:null}else t=Er.next;var r=Fr===null?rr.memoizedState:Fr.next;if(r!==null)Fr=r,Er=t;else{if(t===null)throw Error(Nt(310));Er=t,t={memoizedState:Er.memoizedState,baseState:Er.baseState,baseQueue:Er.baseQueue,queue:Er.queue,next:null},Fr===null?rr.memoizedState=Fr=t:Fr=Fr.next=t}return Fr}function Bd(t,r){return typeof r=="function"?r(t):r}function mp(t){var r=ia(),s=r.queue;if(s===null)throw Error(Nt(311));s.lastRenderedReducer=t;var n=Er,c=n.baseQueue,o=s.pending;if(o!==null){if(c!==null){var a=c.next;c.next=o.next,o.next=a}n.baseQueue=c=o,s.pending=null}if(c!==null){o=c.next,n=n.baseState;var d=a=null,l=null,i=o;do{var u=i.lane;if((Xo&u)===u)l!==null&&(l=l.next={lane:0,action:i.action,hasEagerState:i.hasEagerState,eagerState:i.eagerState,next:null}),n=i.hasEagerState?i.eagerState:t(n,i.action);else{var f={lane:u,action:i.action,hasEagerState:i.hasEagerState,eagerState:i.eagerState,next:null};l===null?(d=l=f,a=n):l=l.next=f,rr.lanes|=u,Zo|=u}i=i.next}while(i!==null&&i!==o);l===null?a=n:l.next=d,ja(n,r.memoizedState)||(Sn=!0),r.memoizedState=n,r.baseState=a,r.baseQueue=l,s.lastRenderedState=n}if(t=s.interleaved,t!==null){c=t;do o=c.lane,rr.lanes|=o,Zo|=o,c=c.next;while(c!==t)}else c===null&&(s.lanes=0);return[r.memoizedState,s.dispatch]}function pp(t){var r=ia(),s=r.queue;if(s===null)throw Error(Nt(311));s.lastRenderedReducer=t;var n=s.dispatch,c=s.pending,o=r.memoizedState;if(c!==null){s.pending=null;var a=c=c.next;do o=t(o,a.action),a=a.next;while(a!==c);ja(o,r.memoizedState)||(Sn=!0),r.memoizedState=o,r.baseQueue===null&&(r.baseState=o),s.lastRenderedState=o}return[o,n]}function $j(){}function Bj(t,r){var s=rr,n=ia(),c=r(),o=!ja(n.memoizedState,c);if(o&&(n.memoizedState=c,Sn=!0),n=n.queue,Wx(Vj.bind(null,s,n,t),[t]),n.getSnapshot!==r||o||Fr!==null&&Fr.memoizedState.tag&1){if(s.flags|=2048,zd(9,Uj.bind(null,s,n,c,r),void 0,null),$r===null)throw Error(Nt(349));Xo&30||zj(s,r,c)}return c}function zj(t,r,s){t.flags|=16384,t={getSnapshot:r,value:s},r=rr.updateQueue,r===null?(r={lastEffect:null,stores:null},rr.updateQueue=r,r.stores=[t]):(s=r.stores,s===null?r.stores=[t]:s.push(t))}function Uj(t,r,s,n){r.value=s,r.getSnapshot=n,qj(r)&&Hj(t)}function Vj(t,r,s){return s(function(){qj(r)&&Hj(t)})}function qj(t){var r=t.getSnapshot;t=t.value;try{var s=r();return!ja(t,s)}catch{return!0}}function Hj(t){var r=ai(t,1);r!==null&&wa(r,t,1,-1)}function kb(t){var r=Aa();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bd,lastRenderedState:t},r.queue=t,t=t.dispatch=xE.bind(null,rr,t),[r.memoizedState,t]}function zd(t,r,s,n){return t={tag:t,create:r,destroy:s,deps:n,next:null},r=rr.updateQueue,r===null?(r={lastEffect:null,stores:null},rr.updateQueue=r,r.lastEffect=t.next=t):(s=r.lastEffect,s===null?r.lastEffect=t.next=t:(n=s.next,s.next=t,t.next=n,r.lastEffect=t)),t}function Wj(){return ia().memoizedState}function Sh(t,r,s,n){var c=Aa();rr.flags|=t,c.memoizedState=zd(1|r,s,void 0,n===void 0?null:n)}function Hf(t,r,s,n){var c=ia();n=n===void 0?null:n;var o=void 0;if(Er!==null){var a=Er.memoizedState;if(o=a.destroy,n!==null&&Vx(n,a.deps)){c.memoizedState=zd(r,s,o,n);return}}rr.flags|=t,c.memoizedState=zd(1|r,s,o,n)}function Eb(t,r){return Sh(8390656,8,t,r)}function Wx(t,r){return Hf(2048,8,t,r)}function Gj(t,r){return Hf(4,2,t,r)}function Kj(t,r){return Hf(4,4,t,r)}function Yj(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Qj(t,r,s){return s=s!=null?s.concat([t]):null,Hf(4,4,Yj.bind(null,r,t),s)}function Gx(){}function Xj(t,r){var s=ia();r=r===void 0?null:r;var n=s.memoizedState;return n!==null&&r!==null&&Vx(r,n[1])?n[0]:(s.memoizedState=[t,r],t)}function Zj(t,r){var s=ia();r=r===void 0?null:r;var n=s.memoizedState;return n!==null&&r!==null&&Vx(r,n[1])?n[0]:(t=t(),s.memoizedState=[t,r],t)}function Jj(t,r,s){return Xo&21?(ja(s,r)||(s=nj(),rr.lanes|=s,Zo|=s,t.baseState=!0),r):(t.baseState&&(t.baseState=!1,Sn=!0),t.memoizedState=s)}function pE(t,r){var s=$s;$s=s!==0&&4>s?s:4,t(!0);var n=fp.transition;fp.transition={};try{t(!1),r()}finally{$s=s,fp.transition=n}}function e_(){return ia().memoizedState}function gE(t,r,s){var n=Wi(t);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},t_(t))s_(r,s);else if(s=Fj(t,r,s,n),s!==null){var c=un();wa(s,t,n,c),r_(s,r,n)}}function xE(t,r,s){var n=Wi(t),c={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(t_(t))s_(r,c);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=r.lastRenderedReducer,o!==null))try{var a=r.lastRenderedState,d=o(a,s);if(c.hasEagerState=!0,c.eagerState=d,ja(d,a)){var l=r.interleaved;l===null?(c.next=c,Dx(r)):(c.next=l.next,l.next=c),r.interleaved=c;return}}catch{}finally{}s=Fj(t,r,c,n),s!==null&&(c=un(),wa(s,t,n,c),r_(s,r,n))}}function t_(t){var r=t.alternate;return t===rr||r!==null&&r===rr}function s_(t,r){fd=tf=!0;var s=t.pending;s===null?r.next=r:(r.next=s.next,s.next=r),t.pending=r}function r_(t,r,s){if(s&4194240){var n=r.lanes;n&=t.pendingLanes,s|=n,r.lanes=s,Nx(t,s)}}var sf={readContext:aa,useCallback:Zr,useContext:Zr,useEffect:Zr,useImperativeHandle:Zr,useInsertionEffect:Zr,useLayoutEffect:Zr,useMemo:Zr,useReducer:Zr,useRef:Zr,useState:Zr,useDebugValue:Zr,useDeferredValue:Zr,useTransition:Zr,useMutableSource:Zr,useSyncExternalStore:Zr,useId:Zr,unstable_isNewReconciler:!1},yE={readContext:aa,useCallback:function(t,r){return Aa().memoizedState=[t,r===void 0?null:r],t},useContext:aa,useEffect:Eb,useImperativeHandle:function(t,r,s){return s=s!=null?s.concat([t]):null,Sh(4194308,4,Yj.bind(null,r,t),s)},useLayoutEffect:function(t,r){return Sh(4194308,4,t,r)},useInsertionEffect:function(t,r){return Sh(4,2,t,r)},useMemo:function(t,r){var s=Aa();return r=r===void 0?null:r,t=t(),s.memoizedState=[t,r],t},useReducer:function(t,r,s){var n=Aa();return r=s!==void 0?s(r):r,n.memoizedState=n.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},n.queue=t,t=t.dispatch=gE.bind(null,rr,t),[n.memoizedState,t]},useRef:function(t){var r=Aa();return t={current:t},r.memoizedState=t},useState:kb,useDebugValue:Gx,useDeferredValue:function(t){return Aa().memoizedState=t},useTransition:function(){var t=kb(!1),r=t[0];return t=pE.bind(null,t[1]),Aa().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,s){var n=rr,c=Aa();if(Xs){if(s===void 0)throw Error(Nt(407));s=s()}else{if(s=r(),$r===null)throw Error(Nt(349));Xo&30||zj(n,r,s)}c.memoizedState=s;var o={value:s,getSnapshot:r};return c.queue=o,Eb(Vj.bind(null,n,o,t),[t]),n.flags|=2048,zd(9,Uj.bind(null,n,o,s,r),void 0,null),s},useId:function(){var t=Aa(),r=$r.identifierPrefix;if(Xs){var s=Qa,n=Ya;s=(n&~(1<<32-ba(n)-1)).toString(32)+s,r=":"+r+"R"+s,s=$d++,0<s&&(r+="H"+s.toString(32)),r+=":"}else s=mE++,r=":"+r+"r"+s.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},vE={readContext:aa,useCallback:Xj,useContext:aa,useEffect:Wx,useImperativeHandle:Qj,useInsertionEffect:Gj,useLayoutEffect:Kj,useMemo:Zj,useReducer:mp,useRef:Wj,useState:function(){return mp(Bd)},useDebugValue:Gx,useDeferredValue:function(t){var r=ia();return Jj(r,Er.memoizedState,t)},useTransition:function(){var t=mp(Bd)[0],r=ia().memoizedState;return[t,r]},useMutableSource:$j,useSyncExternalStore:Bj,useId:e_,unstable_isNewReconciler:!1},bE={readContext:aa,useCallback:Xj,useContext:aa,useEffect:Wx,useImperativeHandle:Qj,useInsertionEffect:Gj,useLayoutEffect:Kj,useMemo:Zj,useReducer:pp,useRef:Wj,useState:function(){return pp(Bd)},useDebugValue:Gx,useDeferredValue:function(t){var r=ia();return Er===null?r.memoizedState=t:Jj(r,Er.memoizedState,t)},useTransition:function(){var t=pp(Bd)[0],r=ia().memoizedState;return[t,r]},useMutableSource:$j,useSyncExternalStore:Bj,useId:e_,unstable_isNewReconciler:!1};function pa(t,r){if(t&&t.defaultProps){r=nr({},r),t=t.defaultProps;for(var s in t)r[s]===void 0&&(r[s]=t[s]);return r}return r}function Kg(t,r,s,n){r=t.memoizedState,s=s(n,r),s=s==null?r:nr({},r,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Wf={isMounted:function(t){return(t=t._reactInternals)?ol(t)===t:!1},enqueueSetState:function(t,r,s){t=t._reactInternals;var n=un(),c=Wi(t),o=Ja(n,c);o.payload=r,s!=null&&(o.callback=s),r=qi(t,o,c),r!==null&&(wa(r,t,c,n),_h(r,t,c))},enqueueReplaceState:function(t,r,s){t=t._reactInternals;var n=un(),c=Wi(t),o=Ja(n,c);o.tag=1,o.payload=r,s!=null&&(o.callback=s),r=qi(t,o,c),r!==null&&(wa(r,t,c,n),_h(r,t,c))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var s=un(),n=Wi(t),c=Ja(s,n);c.tag=2,r!=null&&(c.callback=r),r=qi(t,c,n),r!==null&&(wa(r,t,n,s),_h(r,t,n))}};function Ab(t,r,s,n,c,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,o,a):r.prototype&&r.prototype.isPureReactComponent?!Md(s,n)||!Md(c,o):!0}function n_(t,r,s){var n=!1,c=eo,o=r.contextType;return typeof o=="object"&&o!==null?o=aa(o):(c=kn(r)?Yo:rn.current,n=r.contextTypes,o=(n=n!=null)?tc(t,c):eo),r=new r(s,o),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Wf,t.stateNode=r,r._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=c,t.__reactInternalMemoizedMaskedChildContext=o),r}function Tb(t,r,s,n){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(s,n),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(s,n),r.state!==t&&Wf.enqueueReplaceState(r,r.state,null)}function Yg(t,r,s,n){var c=t.stateNode;c.props=s,c.state=t.memoizedState,c.refs={},$x(t);var o=r.contextType;typeof o=="object"&&o!==null?c.context=aa(o):(o=kn(r)?Yo:rn.current,c.context=tc(t,o)),c.state=t.memoizedState,o=r.getDerivedStateFromProps,typeof o=="function"&&(Kg(t,r,o,s),c.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(r=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),r!==c.state&&Wf.enqueueReplaceState(c,c.state,null),Jh(t,s,c,n),c.state=t.memoizedState),typeof c.componentDidMount=="function"&&(t.flags|=4194308)}function ac(t,r){try{var s="",n=r;do s+=Kk(n),n=n.return;while(n);var c=s}catch(o){c=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:r,stack:c,digest:null}}function gp(t,r,s){return{value:t,source:null,stack:s??null,digest:r??null}}function Qg(t,r){try{console.error(r.value)}catch(s){setTimeout(function(){throw s})}}var wE=typeof WeakMap=="function"?WeakMap:Map;function a_(t,r,s){s=Ja(-1,s),s.tag=3,s.payload={element:null};var n=r.value;return s.callback=function(){nf||(nf=!0,i0=n),Qg(t,r)},s}function i_(t,r,s){s=Ja(-1,s),s.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var c=r.value;s.payload=function(){return n(c)},s.callback=function(){Qg(t,r)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(s.callback=function(){Qg(t,r),typeof n!="function"&&(Hi===null?Hi=new Set([this]):Hi.add(this));var a=r.stack;this.componentDidCatch(r.value,{componentStack:a!==null?a:""})}),s}function Rb(t,r,s){var n=t.pingCache;if(n===null){n=t.pingCache=new wE;var c=new Set;n.set(r,c)}else c=n.get(r),c===void 0&&(c=new Set,n.set(r,c));c.has(s)||(c.add(s),t=OE.bind(null,t,r,s),r.then(t,t))}function Pb(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function Mb(t,r,s,n,c){return t.mode&1?(t.flags|=65536,t.lanes=c,t):(t===r?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(r=Ja(-1,1),r.tag=2,qi(s,r,1))),s.lanes|=1),t)}var jE=fi.ReactCurrentOwner,Sn=!1;function dn(t,r,s,n){r.child=t===null?Oj(r,null,s,n):rc(r,t.child,s,n)}function Ib(t,r,s,n,c){s=s.render;var o=r.ref;return Kl(r,c),n=qx(t,r,s,n,o,c),s=Hx(),t!==null&&!Sn?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~c,ii(t,r,c)):(Xs&&s&&Px(r),r.flags|=1,dn(t,r,n,c),r.child)}function Ob(t,r,s,n,c){if(t===null){var o=s.type;return typeof o=="function"&&!ty(o)&&o.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(r.tag=15,r.type=o,o_(t,r,o,n,c)):(t=Ah(s.type,null,n,r,r.mode,c),t.ref=r.ref,t.return=r,r.child=t)}if(o=t.child,!(t.lanes&c)){var a=o.memoizedProps;if(s=s.compare,s=s!==null?s:Md,s(a,n)&&t.ref===r.ref)return ii(t,r,c)}return r.flags|=1,t=Gi(o,n),t.ref=r.ref,t.return=r,r.child=t}function o_(t,r,s,n,c){if(t!==null){var o=t.memoizedProps;if(Md(o,n)&&t.ref===r.ref)if(Sn=!1,r.pendingProps=n=o,(t.lanes&c)!==0)t.flags&131072&&(Sn=!0);else return r.lanes=t.lanes,ii(t,r,c)}return Xg(t,r,s,n,c)}function l_(t,r,s){var n=r.pendingProps,c=n.children,o=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Us(Il,In),In|=s;else{if(!(s&1073741824))return t=o!==null?o.baseLanes|s:s,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,Us(Il,In),In|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:s,Us(Il,In),In|=n}else o!==null?(n=o.baseLanes|s,r.memoizedState=null):n=s,Us(Il,In),In|=n;return dn(t,r,c,s),r.child}function c_(t,r){var s=r.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(r.flags|=512,r.flags|=2097152)}function Xg(t,r,s,n,c){var o=kn(s)?Yo:rn.current;return o=tc(r,o),Kl(r,c),s=qx(t,r,s,n,o,c),n=Hx(),t!==null&&!Sn?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~c,ii(t,r,c)):(Xs&&n&&Px(r),r.flags|=1,dn(t,r,s,c),r.child)}function Fb(t,r,s,n,c){if(kn(s)){var o=!0;Kh(r)}else o=!1;if(Kl(r,c),r.stateNode===null)Ch(t,r),n_(r,s,n),Yg(r,s,n,c),n=!0;else if(t===null){var a=r.stateNode,d=r.memoizedProps;a.props=d;var l=a.context,i=s.contextType;typeof i=="object"&&i!==null?i=aa(i):(i=kn(s)?Yo:rn.current,i=tc(r,i));var u=s.getDerivedStateFromProps,f=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(d!==n||l!==i)&&Tb(r,a,n,i),ji=!1;var h=r.memoizedState;a.state=h,Jh(r,n,a,c),l=r.memoizedState,d!==n||h!==l||Cn.current||ji?(typeof u=="function"&&(Kg(r,s,u,n),l=r.memoizedState),(d=ji||Ab(r,s,d,n,h,l,i))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(r.flags|=4194308)):(typeof a.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=n,r.memoizedState=l),a.props=n,a.state=l,a.context=i,n=d):(typeof a.componentDidMount=="function"&&(r.flags|=4194308),n=!1)}else{a=r.stateNode,Lj(t,r),d=r.memoizedProps,i=r.type===r.elementType?d:pa(r.type,d),a.props=i,f=r.pendingProps,h=a.context,l=s.contextType,typeof l=="object"&&l!==null?l=aa(l):(l=kn(s)?Yo:rn.current,l=tc(r,l));var m=s.getDerivedStateFromProps;(u=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(d!==f||h!==l)&&Tb(r,a,n,l),ji=!1,h=r.memoizedState,a.state=h,Jh(r,n,a,c);var p=r.memoizedState;d!==f||h!==p||Cn.current||ji?(typeof m=="function"&&(Kg(r,s,m,n),p=r.memoizedState),(i=ji||Ab(r,s,i,n,h,p,l)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,p,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,p,l)),typeof a.componentDidUpdate=="function"&&(r.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof a.componentDidUpdate!="function"||d===t.memoizedProps&&h===t.memoizedState||(r.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&h===t.memoizedState||(r.flags|=1024),r.memoizedProps=n,r.memoizedState=p),a.props=n,a.state=p,a.context=l,n=i):(typeof a.componentDidUpdate!="function"||d===t.memoizedProps&&h===t.memoizedState||(r.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&h===t.memoizedState||(r.flags|=1024),n=!1)}return Zg(t,r,s,n,o,c)}function Zg(t,r,s,n,c,o){c_(t,r);var a=(r.flags&128)!==0;if(!n&&!a)return c&&wb(r,s,!1),ii(t,r,o);n=r.stateNode,jE.current=r;var d=a&&typeof s.getDerivedStateFromError!="function"?null:n.render();return r.flags|=1,t!==null&&a?(r.child=rc(r,t.child,null,o),r.child=rc(r,null,d,o)):dn(t,r,d,o),r.memoizedState=n.state,c&&wb(r,s,!0),r.child}function d_(t){var r=t.stateNode;r.pendingContext?bb(t,r.pendingContext,r.pendingContext!==r.context):r.context&&bb(t,r.context,!1),Bx(t,r.containerInfo)}function Lb(t,r,s,n,c){return sc(),Ix(c),r.flags|=256,dn(t,r,s,n),r.child}var Jg={dehydrated:null,treeContext:null,retryLane:0};function e0(t){return{baseLanes:t,cachePool:null,transitions:null}}function u_(t,r,s){var n=r.pendingProps,c=er.current,o=!1,a=(r.flags&128)!==0,d;if((d=a)||(d=t!==null&&t.memoizedState===null?!1:(c&2)!==0),d?(o=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(c|=1),Us(er,c&1),t===null)return Wg(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(r.mode&1?t.data==="$!"?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(a=n.children,t=n.fallback,o?(n=r.mode,o=r.child,a={mode:"hidden",children:a},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Yf(a,n,0,null),t=qo(t,n,s,null),o.return=r,t.return=r,o.sibling=t,r.child=o,r.child.memoizedState=e0(s),r.memoizedState=Jg,t):Kx(r,a));if(c=t.memoizedState,c!==null&&(d=c.dehydrated,d!==null))return _E(t,r,a,n,d,c,s);if(o){o=n.fallback,a=r.mode,c=t.child,d=c.sibling;var l={mode:"hidden",children:n.children};return!(a&1)&&r.child!==c?(n=r.child,n.childLanes=0,n.pendingProps=l,r.deletions=null):(n=Gi(c,l),n.subtreeFlags=c.subtreeFlags&14680064),d!==null?o=Gi(d,o):(o=qo(o,a,s,null),o.flags|=2),o.return=r,n.return=r,n.sibling=o,r.child=n,n=o,o=r.child,a=t.child.memoizedState,a=a===null?e0(s):{baseLanes:a.baseLanes|s,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~s,r.memoizedState=Jg,n}return o=t.child,t=o.sibling,n=Gi(o,{mode:"visible",children:n.children}),!(r.mode&1)&&(n.lanes=s),n.return=r,n.sibling=null,t!==null&&(s=r.deletions,s===null?(r.deletions=[t],r.flags|=16):s.push(t)),r.child=n,r.memoizedState=null,n}function Kx(t,r){return r=Yf({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function Gu(t,r,s,n){return n!==null&&Ix(n),rc(r,t.child,null,s),t=Kx(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function _E(t,r,s,n,c,o,a){if(s)return r.flags&256?(r.flags&=-257,n=gp(Error(Nt(422))),Gu(t,r,a,n)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(o=n.fallback,c=r.mode,n=Yf({mode:"visible",children:n.children},c,0,null),o=qo(o,c,a,null),o.flags|=2,n.return=r,o.return=r,n.sibling=o,r.child=n,r.mode&1&&rc(r,t.child,null,a),r.child.memoizedState=e0(a),r.memoizedState=Jg,o);if(!(r.mode&1))return Gu(t,r,a,null);if(c.data==="$!"){if(n=c.nextSibling&&c.nextSibling.dataset,n)var d=n.dgst;return n=d,o=Error(Nt(419)),n=gp(o,n,void 0),Gu(t,r,a,n)}if(d=(a&t.childLanes)!==0,Sn||d){if(n=$r,n!==null){switch(a&-a){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(n.suspendedLanes|a)?0:c,c!==0&&c!==o.retryLane&&(o.retryLane=c,ai(t,c),wa(n,t,c,-1))}return ey(),n=gp(Error(Nt(421))),Gu(t,r,a,n)}return c.data==="$?"?(r.flags|=128,r.child=t.child,r=FE.bind(null,t),c._reactRetry=r,null):(t=o.treeContext,Ln=Vi(c.nextSibling),$n=r,Xs=!0,ya=null,t!==null&&(Xn[Zn++]=Ya,Xn[Zn++]=Qa,Xn[Zn++]=Qo,Ya=t.id,Qa=t.overflow,Qo=r),r=Kx(r,n.children),r.flags|=4096,r)}function Db(t,r,s){t.lanes|=r;var n=t.alternate;n!==null&&(n.lanes|=r),Gg(t.return,r,s)}function xp(t,r,s,n,c){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:c}:(o.isBackwards=r,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=s,o.tailMode=c)}function h_(t,r,s){var n=r.pendingProps,c=n.revealOrder,o=n.tail;if(dn(t,r,n.children,s),n=er.current,n&2)n=n&1|2,r.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Db(t,s,r);else if(t.tag===19)Db(t,s,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Us(er,n),!(r.mode&1))r.memoizedState=null;else switch(c){case"forwards":for(s=r.child,c=null;s!==null;)t=s.alternate,t!==null&&ef(t)===null&&(c=s),s=s.sibling;s=c,s===null?(c=r.child,r.child=null):(c=s.sibling,s.sibling=null),xp(r,!1,c,s,o);break;case"backwards":for(s=null,c=r.child,r.child=null;c!==null;){if(t=c.alternate,t!==null&&ef(t)===null){r.child=c;break}t=c.sibling,c.sibling=s,s=c,c=t}xp(r,!0,s,null,o);break;case"together":xp(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Ch(t,r){!(r.mode&1)&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function ii(t,r,s){if(t!==null&&(r.dependencies=t.dependencies),Zo|=r.lanes,!(s&r.childLanes))return null;if(t!==null&&r.child!==t.child)throw Error(Nt(153));if(r.child!==null){for(t=r.child,s=Gi(t,t.pendingProps),r.child=s,s.return=r;t.sibling!==null;)t=t.sibling,s=s.sibling=Gi(t,t.pendingProps),s.return=r;s.sibling=null}return r.child}function NE(t,r,s){switch(r.tag){case 3:d_(r),sc();break;case 5:Dj(r);break;case 1:kn(r.type)&&Kh(r);break;case 4:Bx(r,r.stateNode.containerInfo);break;case 10:var n=r.type._context,c=r.memoizedProps.value;Us(Xh,n._currentValue),n._currentValue=c;break;case 13:if(n=r.memoizedState,n!==null)return n.dehydrated!==null?(Us(er,er.current&1),r.flags|=128,null):s&r.child.childLanes?u_(t,r,s):(Us(er,er.current&1),t=ii(t,r,s),t!==null?t.sibling:null);Us(er,er.current&1);break;case 19:if(n=(s&r.childLanes)!==0,t.flags&128){if(n)return h_(t,r,s);r.flags|=128}if(c=r.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Us(er,er.current),n)break;return null;case 22:case 23:return r.lanes=0,l_(t,r,s)}return ii(t,r,s)}var f_,t0,m_,p_;f_=function(t,r){for(var s=r.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};t0=function(){};m_=function(t,r,s,n){var c=t.memoizedProps;if(c!==n){t=r.stateNode,Oo(Ia.current);var o=null;switch(s){case"input":c=_g(t,c),n=_g(t,n),o=[];break;case"select":c=nr({},c,{value:void 0}),n=nr({},n,{value:void 0}),o=[];break;case"textarea":c=Cg(t,c),n=Cg(t,n),o=[];break;default:typeof c.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Wh)}Eg(s,n);var a;s=null;for(i in c)if(!n.hasOwnProperty(i)&&c.hasOwnProperty(i)&&c[i]!=null)if(i==="style"){var d=c[i];for(a in d)d.hasOwnProperty(a)&&(s||(s={}),s[a]="")}else i!=="dangerouslySetInnerHTML"&&i!=="children"&&i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Cd.hasOwnProperty(i)?o||(o=[]):(o=o||[]).push(i,null));for(i in n){var l=n[i];if(d=c!=null?c[i]:void 0,n.hasOwnProperty(i)&&l!==d&&(l!=null||d!=null))if(i==="style")if(d){for(a in d)!d.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(s||(s={}),s[a]="");for(a in l)l.hasOwnProperty(a)&&d[a]!==l[a]&&(s||(s={}),s[a]=l[a])}else s||(o||(o=[]),o.push(i,s)),s=l;else i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,d=d?d.__html:void 0,l!=null&&d!==l&&(o=o||[]).push(i,l)):i==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(i,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&(Cd.hasOwnProperty(i)?(l!=null&&i==="onScroll"&&Ks("scroll",t),o||d===l||(o=[])):(o=o||[]).push(i,l))}s&&(o=o||[]).push("style",s);var i=o;(r.updateQueue=i)&&(r.flags|=4)}};p_=function(t,r,s,n){s!==n&&(r.flags|=4)};function Bc(t,r){if(!Xs)switch(t.tailMode){case"hidden":r=t.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Jr(t){var r=t.alternate!==null&&t.alternate.child===t.child,s=0,n=0;if(r)for(var c=t.child;c!==null;)s|=c.lanes|c.childLanes,n|=c.subtreeFlags&14680064,n|=c.flags&14680064,c.return=t,c=c.sibling;else for(c=t.child;c!==null;)s|=c.lanes|c.childLanes,n|=c.subtreeFlags,n|=c.flags,c.return=t,c=c.sibling;return t.subtreeFlags|=n,t.childLanes=s,r}function SE(t,r,s){var n=r.pendingProps;switch(Mx(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jr(r),null;case 1:return kn(r.type)&&Gh(),Jr(r),null;case 3:return n=r.stateNode,nc(),Ys(Cn),Ys(rn),Ux(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Hu(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,ya!==null&&(c0(ya),ya=null))),t0(t,r),Jr(r),null;case 5:zx(r);var c=Oo(Dd.current);if(s=r.type,t!==null&&r.stateNode!=null)m_(t,r,s,n,c),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!n){if(r.stateNode===null)throw Error(Nt(166));return Jr(r),null}if(t=Oo(Ia.current),Hu(r)){n=r.stateNode,s=r.type;var o=r.memoizedProps;switch(n[Ta]=r,n[Fd]=o,t=(r.mode&1)!==0,s){case"dialog":Ks("cancel",n),Ks("close",n);break;case"iframe":case"object":case"embed":Ks("load",n);break;case"video":case"audio":for(c=0;c<td.length;c++)Ks(td[c],n);break;case"source":Ks("error",n);break;case"img":case"image":case"link":Ks("error",n),Ks("load",n);break;case"details":Ks("toggle",n);break;case"input":Gv(n,o),Ks("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},Ks("invalid",n);break;case"textarea":Yv(n,o),Ks("invalid",n)}Eg(s,o),c=null;for(var a in o)if(o.hasOwnProperty(a)){var d=o[a];a==="children"?typeof d=="string"?n.textContent!==d&&(o.suppressHydrationWarning!==!0&&qu(n.textContent,d,t),c=["children",d]):typeof d=="number"&&n.textContent!==""+d&&(o.suppressHydrationWarning!==!0&&qu(n.textContent,d,t),c=["children",""+d]):Cd.hasOwnProperty(a)&&d!=null&&a==="onScroll"&&Ks("scroll",n)}switch(s){case"input":Fu(n),Kv(n,o,!0);break;case"textarea":Fu(n),Qv(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=Wh)}n=c,r.updateQueue=n,n!==null&&(r.flags|=4)}else{a=c.nodeType===9?c:c.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=V2(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(s,{is:n.is}):(t=a.createElement(s),s==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,s),t[Ta]=r,t[Fd]=n,f_(t,r,!1,!1),r.stateNode=t;e:{switch(a=Ag(s,n),s){case"dialog":Ks("cancel",t),Ks("close",t),c=n;break;case"iframe":case"object":case"embed":Ks("load",t),c=n;break;case"video":case"audio":for(c=0;c<td.length;c++)Ks(td[c],t);c=n;break;case"source":Ks("error",t),c=n;break;case"img":case"image":case"link":Ks("error",t),Ks("load",t),c=n;break;case"details":Ks("toggle",t),c=n;break;case"input":Gv(t,n),c=_g(t,n),Ks("invalid",t);break;case"option":c=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},c=nr({},n,{value:void 0}),Ks("invalid",t);break;case"textarea":Yv(t,n),c=Cg(t,n),Ks("invalid",t);break;default:c=n}Eg(s,c),d=c;for(o in d)if(d.hasOwnProperty(o)){var l=d[o];o==="style"?W2(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&q2(t,l)):o==="children"?typeof l=="string"?(s!=="textarea"||l!=="")&&kd(t,l):typeof l=="number"&&kd(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Cd.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Ks("scroll",t):l!=null&&yx(t,o,l,a))}switch(s){case"input":Fu(t),Kv(t,n,!1);break;case"textarea":Fu(t),Qv(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Ji(n.value));break;case"select":t.multiple=!!n.multiple,o=n.value,o!=null?ql(t,!!n.multiple,o,!1):n.defaultValue!=null&&ql(t,!!n.multiple,n.defaultValue,!0);break;default:typeof c.onClick=="function"&&(t.onclick=Wh)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Jr(r),null;case 6:if(t&&r.stateNode!=null)p_(t,r,t.memoizedProps,n);else{if(typeof n!="string"&&r.stateNode===null)throw Error(Nt(166));if(s=Oo(Dd.current),Oo(Ia.current),Hu(r)){if(n=r.stateNode,s=r.memoizedProps,n[Ta]=r,(o=n.nodeValue!==s)&&(t=$n,t!==null))switch(t.tag){case 3:qu(n.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&qu(n.nodeValue,s,(t.mode&1)!==0)}o&&(r.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[Ta]=r,r.stateNode=n}return Jr(r),null;case 13:if(Ys(er),n=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Xs&&Ln!==null&&r.mode&1&&!(r.flags&128))Mj(),sc(),r.flags|=98560,o=!1;else if(o=Hu(r),n!==null&&n.dehydrated!==null){if(t===null){if(!o)throw Error(Nt(318));if(o=r.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Nt(317));o[Ta]=r}else sc(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;Jr(r),o=!1}else ya!==null&&(c0(ya),ya=null),o=!0;if(!o)return r.flags&65536?r:null}return r.flags&128?(r.lanes=s,r):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(r.child.flags|=8192,r.mode&1&&(t===null||er.current&1?Pr===0&&(Pr=3):ey())),r.updateQueue!==null&&(r.flags|=4),Jr(r),null);case 4:return nc(),t0(t,r),t===null&&Id(r.stateNode.containerInfo),Jr(r),null;case 10:return Lx(r.type._context),Jr(r),null;case 17:return kn(r.type)&&Gh(),Jr(r),null;case 19:if(Ys(er),o=r.memoizedState,o===null)return Jr(r),null;if(n=(r.flags&128)!==0,a=o.rendering,a===null)if(n)Bc(o,!1);else{if(Pr!==0||t!==null&&t.flags&128)for(t=r.child;t!==null;){if(a=ef(t),a!==null){for(r.flags|=128,Bc(o,!1),n=a.updateQueue,n!==null&&(r.updateQueue=n,r.flags|=4),r.subtreeFlags=0,n=s,s=r.child;s!==null;)o=s,t=n,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return Us(er,er.current&1|2),r.child}t=t.sibling}o.tail!==null&&hr()>ic&&(r.flags|=128,n=!0,Bc(o,!1),r.lanes=4194304)}else{if(!n)if(t=ef(a),t!==null){if(r.flags|=128,n=!0,s=t.updateQueue,s!==null&&(r.updateQueue=s,r.flags|=4),Bc(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Xs)return Jr(r),null}else 2*hr()-o.renderingStartTime>ic&&s!==1073741824&&(r.flags|=128,n=!0,Bc(o,!1),r.lanes=4194304);o.isBackwards?(a.sibling=r.child,r.child=a):(s=o.last,s!==null?s.sibling=a:r.child=a,o.last=a)}return o.tail!==null?(r=o.tail,o.rendering=r,o.tail=r.sibling,o.renderingStartTime=hr(),r.sibling=null,s=er.current,Us(er,n?s&1|2:s&1),r):(Jr(r),null);case 22:case 23:return Jx(),n=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(r.flags|=8192),n&&r.mode&1?In&1073741824&&(Jr(r),r.subtreeFlags&6&&(r.flags|=8192)):Jr(r),null;case 24:return null;case 25:return null}throw Error(Nt(156,r.tag))}function CE(t,r){switch(Mx(r),r.tag){case 1:return kn(r.type)&&Gh(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return nc(),Ys(Cn),Ys(rn),Ux(),t=r.flags,t&65536&&!(t&128)?(r.flags=t&-65537|128,r):null;case 5:return zx(r),null;case 13:if(Ys(er),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(Nt(340));sc()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return Ys(er),null;case 4:return nc(),null;case 10:return Lx(r.type._context),null;case 22:case 23:return Jx(),null;case 24:return null;default:return null}}var Ku=!1,sn=!1,kE=typeof WeakSet=="function"?WeakSet:Set,$t=null;function Ml(t,r){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){or(t,r,n)}else s.current=null}function s0(t,r,s){try{s()}catch(n){or(t,r,n)}}var $b=!1;function EE(t,r){if($g=Vh,t=bj(),Rx(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var c=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{s.nodeType,o.nodeType}catch{s=null;break e}var a=0,d=-1,l=-1,i=0,u=0,f=t,h=null;t:for(;;){for(var m;f!==s||c!==0&&f.nodeType!==3||(d=a+c),f!==o||n!==0&&f.nodeType!==3||(l=a+n),f.nodeType===3&&(a+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===t)break t;if(h===s&&++i===c&&(d=a),h===o&&++u===n&&(l=a),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}s=d===-1||l===-1?null:{start:d,end:l}}else s=null}s=s||{start:0,end:0}}else s=null;for(Bg={focusedElem:t,selectionRange:s},Vh=!1,$t=r;$t!==null;)if(r=$t,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,$t=t;else for(;$t!==null;){r=$t;try{var p=r.alternate;if(r.flags&1024)switch(r.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var x=p.memoizedProps,g=p.memoizedState,v=r.stateNode,y=v.getSnapshotBeforeUpdate(r.elementType===r.type?x:pa(r.type,x),g);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=r.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Nt(163))}}catch(C){or(r,r.return,C)}if(t=r.sibling,t!==null){t.return=r.return,$t=t;break}$t=r.return}return p=$b,$b=!1,p}function md(t,r,s){var n=r.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var c=n=n.next;do{if((c.tag&t)===t){var o=c.destroy;c.destroy=void 0,o!==void 0&&s0(r,s,o)}c=c.next}while(c!==n)}}function Gf(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var n=s.create;s.destroy=n()}s=s.next}while(s!==r)}}function r0(t){var r=t.ref;if(r!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof r=="function"?r(t):r.current=t}}function g_(t){var r=t.alternate;r!==null&&(t.alternate=null,g_(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[Ta],delete r[Fd],delete r[Vg],delete r[dE],delete r[uE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function x_(t){return t.tag===5||t.tag===3||t.tag===4}function Bb(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||x_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function n0(t,r,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,r?s.nodeType===8?s.parentNode.insertBefore(t,r):s.insertBefore(t,r):(s.nodeType===8?(r=s.parentNode,r.insertBefore(t,s)):(r=s,r.appendChild(t)),s=s._reactRootContainer,s!=null||r.onclick!==null||(r.onclick=Wh));else if(n!==4&&(t=t.child,t!==null))for(n0(t,r,s),t=t.sibling;t!==null;)n0(t,r,s),t=t.sibling}function a0(t,r,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,r?s.insertBefore(t,r):s.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(a0(t,r,s),t=t.sibling;t!==null;)a0(t,r,s),t=t.sibling}var Vr=null,ga=!1;function gi(t,r,s){for(s=s.child;s!==null;)y_(t,r,s),s=s.sibling}function y_(t,r,s){if(Ma&&typeof Ma.onCommitFiberUnmount=="function")try{Ma.onCommitFiberUnmount($f,s)}catch{}switch(s.tag){case 5:sn||Ml(s,r);case 6:var n=Vr,c=ga;Vr=null,gi(t,r,s),Vr=n,ga=c,Vr!==null&&(ga?(t=Vr,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):Vr.removeChild(s.stateNode));break;case 18:Vr!==null&&(ga?(t=Vr,s=s.stateNode,t.nodeType===8?dp(t.parentNode,s):t.nodeType===1&&dp(t,s),Rd(t)):dp(Vr,s.stateNode));break;case 4:n=Vr,c=ga,Vr=s.stateNode.containerInfo,ga=!0,gi(t,r,s),Vr=n,ga=c;break;case 0:case 11:case 14:case 15:if(!sn&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){c=n=n.next;do{var o=c,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&s0(s,r,a),c=c.next}while(c!==n)}gi(t,r,s);break;case 1:if(!sn&&(Ml(s,r),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(d){or(s,r,d)}gi(t,r,s);break;case 21:gi(t,r,s);break;case 22:s.mode&1?(sn=(n=sn)||s.memoizedState!==null,gi(t,r,s),sn=n):gi(t,r,s);break;default:gi(t,r,s)}}function zb(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new kE),r.forEach(function(n){var c=LE.bind(null,t,n);s.has(n)||(s.add(n),n.then(c,c))})}}function ua(t,r){var s=r.deletions;if(s!==null)for(var n=0;n<s.length;n++){var c=s[n];try{var o=t,a=r,d=a;e:for(;d!==null;){switch(d.tag){case 5:Vr=d.stateNode,ga=!1;break e;case 3:Vr=d.stateNode.containerInfo,ga=!0;break e;case 4:Vr=d.stateNode.containerInfo,ga=!0;break e}d=d.return}if(Vr===null)throw Error(Nt(160));y_(o,a,c),Vr=null,ga=!1;var l=c.alternate;l!==null&&(l.return=null),c.return=null}catch(i){or(c,r,i)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)v_(r,t),r=r.sibling}function v_(t,r){var s=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ua(r,t),ka(t),n&4){try{md(3,t,t.return),Gf(3,t)}catch(x){or(t,t.return,x)}try{md(5,t,t.return)}catch(x){or(t,t.return,x)}}break;case 1:ua(r,t),ka(t),n&512&&s!==null&&Ml(s,s.return);break;case 5:if(ua(r,t),ka(t),n&512&&s!==null&&Ml(s,s.return),t.flags&32){var c=t.stateNode;try{kd(c,"")}catch(x){or(t,t.return,x)}}if(n&4&&(c=t.stateNode,c!=null)){var o=t.memoizedProps,a=s!==null?s.memoizedProps:o,d=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{d==="input"&&o.type==="radio"&&o.name!=null&&z2(c,o),Ag(d,a);var i=Ag(d,o);for(a=0;a<l.length;a+=2){var u=l[a],f=l[a+1];u==="style"?W2(c,f):u==="dangerouslySetInnerHTML"?q2(c,f):u==="children"?kd(c,f):yx(c,u,f,i)}switch(d){case"input":Ng(c,o);break;case"textarea":U2(c,o);break;case"select":var h=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!o.multiple;var m=o.value;m!=null?ql(c,!!o.multiple,m,!1):h!==!!o.multiple&&(o.defaultValue!=null?ql(c,!!o.multiple,o.defaultValue,!0):ql(c,!!o.multiple,o.multiple?[]:"",!1))}c[Fd]=o}catch(x){or(t,t.return,x)}}break;case 6:if(ua(r,t),ka(t),n&4){if(t.stateNode===null)throw Error(Nt(162));c=t.stateNode,o=t.memoizedProps;try{c.nodeValue=o}catch(x){or(t,t.return,x)}}break;case 3:if(ua(r,t),ka(t),n&4&&s!==null&&s.memoizedState.isDehydrated)try{Rd(r.containerInfo)}catch(x){or(t,t.return,x)}break;case 4:ua(r,t),ka(t);break;case 13:ua(r,t),ka(t),c=t.child,c.flags&8192&&(o=c.memoizedState!==null,c.stateNode.isHidden=o,!o||c.alternate!==null&&c.alternate.memoizedState!==null||(Xx=hr())),n&4&&zb(t);break;case 22:if(u=s!==null&&s.memoizedState!==null,t.mode&1?(sn=(i=sn)||u,ua(r,t),sn=i):ua(r,t),ka(t),n&8192){if(i=t.memoizedState!==null,(t.stateNode.isHidden=i)&&!u&&t.mode&1)for($t=t,u=t.child;u!==null;){for(f=$t=u;$t!==null;){switch(h=$t,m=h.child,h.tag){case 0:case 11:case 14:case 15:md(4,h,h.return);break;case 1:Ml(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){n=h,s=h.return;try{r=n,p.props=r.memoizedProps,p.state=r.memoizedState,p.componentWillUnmount()}catch(x){or(n,s,x)}}break;case 5:Ml(h,h.return);break;case 22:if(h.memoizedState!==null){Vb(f);continue}}m!==null?(m.return=h,$t=m):Vb(f)}u=u.sibling}e:for(u=null,f=t;;){if(f.tag===5){if(u===null){u=f;try{c=f.stateNode,i?(o=c.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(d=f.stateNode,l=f.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,d.style.display=H2("display",a))}catch(x){or(t,t.return,x)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=i?"":f.memoizedProps}catch(x){or(t,t.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ua(r,t),ka(t),n&4&&zb(t);break;case 21:break;default:ua(r,t),ka(t)}}function ka(t){var r=t.flags;if(r&2){try{e:{for(var s=t.return;s!==null;){if(x_(s)){var n=s;break e}s=s.return}throw Error(Nt(160))}switch(n.tag){case 5:var c=n.stateNode;n.flags&32&&(kd(c,""),n.flags&=-33);var o=Bb(t);a0(t,o,c);break;case 3:case 4:var a=n.stateNode.containerInfo,d=Bb(t);n0(t,d,a);break;default:throw Error(Nt(161))}}catch(l){or(t,t.return,l)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function AE(t,r,s){$t=t,b_(t)}function b_(t,r,s){for(var n=(t.mode&1)!==0;$t!==null;){var c=$t,o=c.child;if(c.tag===22&&n){var a=c.memoizedState!==null||Ku;if(!a){var d=c.alternate,l=d!==null&&d.memoizedState!==null||sn;d=Ku;var i=sn;if(Ku=a,(sn=l)&&!i)for($t=c;$t!==null;)a=$t,l=a.child,a.tag===22&&a.memoizedState!==null?qb(c):l!==null?(l.return=a,$t=l):qb(c);for(;o!==null;)$t=o,b_(o),o=o.sibling;$t=c,Ku=d,sn=i}Ub(t)}else c.subtreeFlags&8772&&o!==null?(o.return=c,$t=o):Ub(t)}}function Ub(t){for(;$t!==null;){var r=$t;if(r.flags&8772){var s=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:sn||Gf(5,r);break;case 1:var n=r.stateNode;if(r.flags&4&&!sn)if(s===null)n.componentDidMount();else{var c=r.elementType===r.type?s.memoizedProps:pa(r.type,s.memoizedProps);n.componentDidUpdate(c,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=r.updateQueue;o!==null&&Cb(r,o,n);break;case 3:var a=r.updateQueue;if(a!==null){if(s=null,r.child!==null)switch(r.child.tag){case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}Cb(r,a,s)}break;case 5:var d=r.stateNode;if(s===null&&r.flags&4){s=d;var l=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&s.focus();break;case"img":l.src&&(s.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var i=r.alternate;if(i!==null){var u=i.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&Rd(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Nt(163))}sn||r.flags&512&&r0(r)}catch(h){or(r,r.return,h)}}if(r===t){$t=null;break}if(s=r.sibling,s!==null){s.return=r.return,$t=s;break}$t=r.return}}function Vb(t){for(;$t!==null;){var r=$t;if(r===t){$t=null;break}var s=r.sibling;if(s!==null){s.return=r.return,$t=s;break}$t=r.return}}function qb(t){for(;$t!==null;){var r=$t;try{switch(r.tag){case 0:case 11:case 15:var s=r.return;try{Gf(4,r)}catch(l){or(r,s,l)}break;case 1:var n=r.stateNode;if(typeof n.componentDidMount=="function"){var c=r.return;try{n.componentDidMount()}catch(l){or(r,c,l)}}var o=r.return;try{r0(r)}catch(l){or(r,o,l)}break;case 5:var a=r.return;try{r0(r)}catch(l){or(r,a,l)}}}catch(l){or(r,r.return,l)}if(r===t){$t=null;break}var d=r.sibling;if(d!==null){d.return=r.return,$t=d;break}$t=r.return}}var TE=Math.ceil,rf=fi.ReactCurrentDispatcher,Yx=fi.ReactCurrentOwner,sa=fi.ReactCurrentBatchConfig,Ts=0,$r=null,jr=null,qr=0,In=0,Il=fo(0),Pr=0,Ud=null,Zo=0,Kf=0,Qx=0,pd=null,Nn=null,Xx=0,ic=1/0,Ga=null,nf=!1,i0=null,Hi=null,Yu=!1,Ei=null,af=0,gd=0,o0=null,kh=-1,Eh=0;function un(){return Ts&6?hr():kh!==-1?kh:kh=hr()}function Wi(t){return t.mode&1?Ts&2&&qr!==0?qr&-qr:fE.transition!==null?(Eh===0&&(Eh=nj()),Eh):(t=$s,t!==0||(t=window.event,t=t===void 0?16:uj(t.type)),t):1}function wa(t,r,s,n){if(50<gd)throw gd=0,o0=null,Error(Nt(185));lu(t,s,n),(!(Ts&2)||t!==$r)&&(t===$r&&(!(Ts&2)&&(Kf|=s),Pr===4&&Si(t,qr)),En(t,n),s===1&&Ts===0&&!(r.mode&1)&&(ic=hr()+500,qf&&mo()))}function En(t,r){var s=t.callbackNode;f8(t,r);var n=Uh(t,t===$r?qr:0);if(n===0)s!==null&&Jv(s),t.callbackNode=null,t.callbackPriority=0;else if(r=n&-n,t.callbackPriority!==r){if(s!=null&&Jv(s),r===1)t.tag===0?hE(Hb.bind(null,t)):Tj(Hb.bind(null,t)),lE(function(){!(Ts&6)&&mo()}),s=null;else{switch(aj(n)){case 1:s=_x;break;case 4:s=sj;break;case 16:s=zh;break;case 536870912:s=rj;break;default:s=zh}s=E_(s,w_.bind(null,t))}t.callbackPriority=r,t.callbackNode=s}}function w_(t,r){if(kh=-1,Eh=0,Ts&6)throw Error(Nt(327));var s=t.callbackNode;if(Yl()&&t.callbackNode!==s)return null;var n=Uh(t,t===$r?qr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||r)r=of(t,n);else{r=n;var c=Ts;Ts|=2;var o=__();($r!==t||qr!==r)&&(Ga=null,ic=hr()+500,Vo(t,r));do try{ME();break}catch(d){j_(t,d)}while(1);Fx(),rf.current=o,Ts=c,jr!==null?r=0:($r=null,qr=0,r=Pr)}if(r!==0){if(r===2&&(c=Ig(t),c!==0&&(n=c,r=l0(t,c))),r===1)throw s=Ud,Vo(t,0),Si(t,n),En(t,hr()),s;if(r===6)Si(t,n);else{if(c=t.current.alternate,!(n&30)&&!RE(c)&&(r=of(t,n),r===2&&(o=Ig(t),o!==0&&(n=o,r=l0(t,o))),r===1))throw s=Ud,Vo(t,0),Si(t,n),En(t,hr()),s;switch(t.finishedWork=c,t.finishedLanes=n,r){case 0:case 1:throw Error(Nt(345));case 2:Eo(t,Nn,Ga);break;case 3:if(Si(t,n),(n&130023424)===n&&(r=Xx+500-hr(),10<r)){if(Uh(t,0)!==0)break;if(c=t.suspendedLanes,(c&n)!==n){un(),t.pingedLanes|=t.suspendedLanes&c;break}t.timeoutHandle=Ug(Eo.bind(null,t,Nn,Ga),r);break}Eo(t,Nn,Ga);break;case 4:if(Si(t,n),(n&4194240)===n)break;for(r=t.eventTimes,c=-1;0<n;){var a=31-ba(n);o=1<<a,a=r[a],a>c&&(c=a),n&=~o}if(n=c,n=hr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*TE(n/1960))-n,10<n){t.timeoutHandle=Ug(Eo.bind(null,t,Nn,Ga),n);break}Eo(t,Nn,Ga);break;case 5:Eo(t,Nn,Ga);break;default:throw Error(Nt(329))}}}return En(t,hr()),t.callbackNode===s?w_.bind(null,t):null}function l0(t,r){var s=pd;return t.current.memoizedState.isDehydrated&&(Vo(t,r).flags|=256),t=of(t,r),t!==2&&(r=Nn,Nn=s,r!==null&&c0(r)),t}function c0(t){Nn===null?Nn=t:Nn.push.apply(Nn,t)}function RE(t){for(var r=t;;){if(r.flags&16384){var s=r.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var c=s[n],o=c.getSnapshot;c=c.value;try{if(!ja(o(),c))return!1}catch{return!1}}}if(s=r.child,r.subtreeFlags&16384&&s!==null)s.return=r,r=s;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Si(t,r){for(r&=~Qx,r&=~Kf,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var s=31-ba(r),n=1<<s;t[s]=-1,r&=~n}}function Hb(t){if(Ts&6)throw Error(Nt(327));Yl();var r=Uh(t,0);if(!(r&1))return En(t,hr()),null;var s=of(t,r);if(t.tag!==0&&s===2){var n=Ig(t);n!==0&&(r=n,s=l0(t,n))}if(s===1)throw s=Ud,Vo(t,0),Si(t,r),En(t,hr()),s;if(s===6)throw Error(Nt(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,Eo(t,Nn,Ga),En(t,hr()),null}function Zx(t,r){var s=Ts;Ts|=1;try{return t(r)}finally{Ts=s,Ts===0&&(ic=hr()+500,qf&&mo())}}function Jo(t){Ei!==null&&Ei.tag===0&&!(Ts&6)&&Yl();var r=Ts;Ts|=1;var s=sa.transition,n=$s;try{if(sa.transition=null,$s=1,t)return t()}finally{$s=n,sa.transition=s,Ts=r,!(Ts&6)&&mo()}}function Jx(){In=Il.current,Ys(Il)}function Vo(t,r){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,oE(s)),jr!==null)for(s=jr.return;s!==null;){var n=s;switch(Mx(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Gh();break;case 3:nc(),Ys(Cn),Ys(rn),Ux();break;case 5:zx(n);break;case 4:nc();break;case 13:Ys(er);break;case 19:Ys(er);break;case 10:Lx(n.type._context);break;case 22:case 23:Jx()}s=s.return}if($r=t,jr=t=Gi(t.current,null),qr=In=r,Pr=0,Ud=null,Qx=Kf=Zo=0,Nn=pd=null,Io!==null){for(r=0;r<Io.length;r++)if(s=Io[r],n=s.interleaved,n!==null){s.interleaved=null;var c=n.next,o=s.pending;if(o!==null){var a=o.next;o.next=c,n.next=a}s.pending=n}Io=null}return t}function j_(t,r){do{var s=jr;try{if(Fx(),Nh.current=sf,tf){for(var n=rr.memoizedState;n!==null;){var c=n.queue;c!==null&&(c.pending=null),n=n.next}tf=!1}if(Xo=0,Fr=Er=rr=null,fd=!1,$d=0,Yx.current=null,s===null||s.return===null){Pr=1,Ud=r,jr=null;break}e:{var o=t,a=s.return,d=s,l=r;if(r=qr,d.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var i=l,u=d,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=Pb(a);if(m!==null){m.flags&=-257,Mb(m,a,d,o,r),m.mode&1&&Rb(o,i,r),r=m,l=i;var p=r.updateQueue;if(p===null){var x=new Set;x.add(l),r.updateQueue=x}else p.add(l);break e}else{if(!(r&1)){Rb(o,i,r),ey();break e}l=Error(Nt(426))}}else if(Xs&&d.mode&1){var g=Pb(a);if(g!==null){!(g.flags&65536)&&(g.flags|=256),Mb(g,a,d,o,r),Ix(ac(l,d));break e}}o=l=ac(l,d),Pr!==4&&(Pr=2),pd===null?pd=[o]:pd.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,r&=-r,o.lanes|=r;var v=a_(o,l,r);Sb(o,v);break e;case 1:d=l;var y=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Hi===null||!Hi.has(b)))){o.flags|=65536,r&=-r,o.lanes|=r;var C=i_(o,d,r);Sb(o,C);break e}}o=o.return}while(o!==null)}S_(s)}catch(T){r=T,jr===s&&s!==null&&(jr=s=s.return);continue}break}while(1)}function __(){var t=rf.current;return rf.current=sf,t===null?sf:t}function ey(){(Pr===0||Pr===3||Pr===2)&&(Pr=4),$r===null||!(Zo&268435455)&&!(Kf&268435455)||Si($r,qr)}function of(t,r){var s=Ts;Ts|=2;var n=__();($r!==t||qr!==r)&&(Ga=null,Vo(t,r));do try{PE();break}catch(c){j_(t,c)}while(1);if(Fx(),Ts=s,rf.current=n,jr!==null)throw Error(Nt(261));return $r=null,qr=0,Pr}function PE(){for(;jr!==null;)N_(jr)}function ME(){for(;jr!==null&&!n8();)N_(jr)}function N_(t){var r=k_(t.alternate,t,In);t.memoizedProps=t.pendingProps,r===null?S_(t):jr=r,Yx.current=null}function S_(t){var r=t;do{var s=r.alternate;if(t=r.return,r.flags&32768){if(s=CE(s,r),s!==null){s.flags&=32767,jr=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Pr=6,jr=null;return}}else if(s=SE(s,r,In),s!==null){jr=s;return}if(r=r.sibling,r!==null){jr=r;return}jr=r=t}while(r!==null);Pr===0&&(Pr=5)}function Eo(t,r,s){var n=$s,c=sa.transition;try{sa.transition=null,$s=1,IE(t,r,s,n)}finally{sa.transition=c,$s=n}return null}function IE(t,r,s,n){do Yl();while(Ei!==null);if(Ts&6)throw Error(Nt(327));s=t.finishedWork;var c=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(Nt(177));t.callbackNode=null,t.callbackPriority=0;var o=s.lanes|s.childLanes;if(m8(t,o),t===$r&&(jr=$r=null,qr=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Yu||(Yu=!0,E_(zh,function(){return Yl(),null})),o=(s.flags&15990)!==0,s.subtreeFlags&15990||o){o=sa.transition,sa.transition=null;var a=$s;$s=1;var d=Ts;Ts|=4,Yx.current=null,EE(t,s),v_(s,t),eE(Bg),Vh=!!$g,Bg=$g=null,t.current=s,AE(s),a8(),Ts=d,$s=a,sa.transition=o}else t.current=s;if(Yu&&(Yu=!1,Ei=t,af=c),o=t.pendingLanes,o===0&&(Hi=null),l8(s.stateNode),En(t,hr()),r!==null)for(n=t.onRecoverableError,s=0;s<r.length;s++)c=r[s],n(c.value,{componentStack:c.stack,digest:c.digest});if(nf)throw nf=!1,t=i0,i0=null,t;return af&1&&t.tag!==0&&Yl(),o=t.pendingLanes,o&1?t===o0?gd++:(gd=0,o0=t):gd=0,mo(),null}function Yl(){if(Ei!==null){var t=aj(af),r=sa.transition,s=$s;try{if(sa.transition=null,$s=16>t?16:t,Ei===null)var n=!1;else{if(t=Ei,Ei=null,af=0,Ts&6)throw Error(Nt(331));var c=Ts;for(Ts|=4,$t=t.current;$t!==null;){var o=$t,a=o.child;if($t.flags&16){var d=o.deletions;if(d!==null){for(var l=0;l<d.length;l++){var i=d[l];for($t=i;$t!==null;){var u=$t;switch(u.tag){case 0:case 11:case 15:md(8,u,o)}var f=u.child;if(f!==null)f.return=u,$t=f;else for(;$t!==null;){u=$t;var h=u.sibling,m=u.return;if(g_(u),u===i){$t=null;break}if(h!==null){h.return=m,$t=h;break}$t=m}}}var p=o.alternate;if(p!==null){var x=p.child;if(x!==null){p.child=null;do{var g=x.sibling;x.sibling=null,x=g}while(x!==null)}}$t=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,$t=a;else e:for(;$t!==null;){if(o=$t,o.flags&2048)switch(o.tag){case 0:case 11:case 15:md(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,$t=v;break e}$t=o.return}}var y=t.current;for($t=y;$t!==null;){a=$t;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,$t=b;else e:for(a=y;$t!==null;){if(d=$t,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:Gf(9,d)}}catch(T){or(d,d.return,T)}if(d===a){$t=null;break e}var C=d.sibling;if(C!==null){C.return=d.return,$t=C;break e}$t=d.return}}if(Ts=c,mo(),Ma&&typeof Ma.onPostCommitFiberRoot=="function")try{Ma.onPostCommitFiberRoot($f,t)}catch{}n=!0}return n}finally{$s=s,sa.transition=r}}return!1}function Wb(t,r,s){r=ac(s,r),r=a_(t,r,1),t=qi(t,r,1),r=un(),t!==null&&(lu(t,1,r),En(t,r))}function or(t,r,s){if(t.tag===3)Wb(t,t,s);else for(;r!==null;){if(r.tag===3){Wb(r,t,s);break}else if(r.tag===1){var n=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Hi===null||!Hi.has(n))){t=ac(s,t),t=i_(r,t,1),r=qi(r,t,1),t=un(),r!==null&&(lu(r,1,t),En(r,t));break}}r=r.return}}function OE(t,r,s){var n=t.pingCache;n!==null&&n.delete(r),r=un(),t.pingedLanes|=t.suspendedLanes&s,$r===t&&(qr&s)===s&&(Pr===4||Pr===3&&(qr&130023424)===qr&&500>hr()-Xx?Vo(t,0):Qx|=s),En(t,r)}function C_(t,r){r===0&&(t.mode&1?(r=$u,$u<<=1,!($u&130023424)&&($u=4194304)):r=1);var s=un();t=ai(t,r),t!==null&&(lu(t,r,s),En(t,s))}function FE(t){var r=t.memoizedState,s=0;r!==null&&(s=r.retryLane),C_(t,s)}function LE(t,r){var s=0;switch(t.tag){case 13:var n=t.stateNode,c=t.memoizedState;c!==null&&(s=c.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Nt(314))}n!==null&&n.delete(r),C_(t,s)}var k_;k_=function(t,r,s){if(t!==null)if(t.memoizedProps!==r.pendingProps||Cn.current)Sn=!0;else{if(!(t.lanes&s)&&!(r.flags&128))return Sn=!1,NE(t,r,s);Sn=!!(t.flags&131072)}else Sn=!1,Xs&&r.flags&1048576&&Rj(r,Qh,r.index);switch(r.lanes=0,r.tag){case 2:var n=r.type;Ch(t,r),t=r.pendingProps;var c=tc(r,rn.current);Kl(r,s),c=qx(null,r,n,t,c,s);var o=Hx();return r.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,kn(n)?(o=!0,Kh(r)):o=!1,r.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,$x(r),c.updater=Wf,r.stateNode=c,c._reactInternals=r,Yg(r,n,t,s),r=Zg(null,r,n,!0,o,s)):(r.tag=0,Xs&&o&&Px(r),dn(null,r,c,s),r=r.child),r;case 16:n=r.elementType;e:{switch(Ch(t,r),t=r.pendingProps,c=n._init,n=c(n._payload),r.type=n,c=r.tag=$E(n),t=pa(n,t),c){case 0:r=Xg(null,r,n,t,s);break e;case 1:r=Fb(null,r,n,t,s);break e;case 11:r=Ib(null,r,n,t,s);break e;case 14:r=Ob(null,r,n,pa(n.type,t),s);break e}throw Error(Nt(306,n,""))}return r;case 0:return n=r.type,c=r.pendingProps,c=r.elementType===n?c:pa(n,c),Xg(t,r,n,c,s);case 1:return n=r.type,c=r.pendingProps,c=r.elementType===n?c:pa(n,c),Fb(t,r,n,c,s);case 3:e:{if(d_(r),t===null)throw Error(Nt(387));n=r.pendingProps,o=r.memoizedState,c=o.element,Lj(t,r),Jh(r,n,null,s);var a=r.memoizedState;if(n=a.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},r.updateQueue.baseState=o,r.memoizedState=o,r.flags&256){c=ac(Error(Nt(423)),r),r=Lb(t,r,n,s,c);break e}else if(n!==c){c=ac(Error(Nt(424)),r),r=Lb(t,r,n,s,c);break e}else for(Ln=Vi(r.stateNode.containerInfo.firstChild),$n=r,Xs=!0,ya=null,s=Oj(r,null,n,s),r.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(sc(),n===c){r=ii(t,r,s);break e}dn(t,r,n,s)}r=r.child}return r;case 5:return Dj(r),t===null&&Wg(r),n=r.type,c=r.pendingProps,o=t!==null?t.memoizedProps:null,a=c.children,zg(n,c)?a=null:o!==null&&zg(n,o)&&(r.flags|=32),c_(t,r),dn(t,r,a,s),r.child;case 6:return t===null&&Wg(r),null;case 13:return u_(t,r,s);case 4:return Bx(r,r.stateNode.containerInfo),n=r.pendingProps,t===null?r.child=rc(r,null,n,s):dn(t,r,n,s),r.child;case 11:return n=r.type,c=r.pendingProps,c=r.elementType===n?c:pa(n,c),Ib(t,r,n,c,s);case 7:return dn(t,r,r.pendingProps,s),r.child;case 8:return dn(t,r,r.pendingProps.children,s),r.child;case 12:return dn(t,r,r.pendingProps.children,s),r.child;case 10:e:{if(n=r.type._context,c=r.pendingProps,o=r.memoizedProps,a=c.value,Us(Xh,n._currentValue),n._currentValue=a,o!==null)if(ja(o.value,a)){if(o.children===c.children&&!Cn.current){r=ii(t,r,s);break e}}else for(o=r.child,o!==null&&(o.return=r);o!==null;){var d=o.dependencies;if(d!==null){a=o.child;for(var l=d.firstContext;l!==null;){if(l.context===n){if(o.tag===1){l=Ja(-1,s&-s),l.tag=2;var i=o.updateQueue;if(i!==null){i=i.shared;var u=i.pending;u===null?l.next=l:(l.next=u.next,u.next=l),i.pending=l}}o.lanes|=s,l=o.alternate,l!==null&&(l.lanes|=s),Gg(o.return,s,r),d.lanes|=s;break}l=l.next}}else if(o.tag===10)a=o.type===r.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(Nt(341));a.lanes|=s,d=a.alternate,d!==null&&(d.lanes|=s),Gg(a,s,r),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===r){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}dn(t,r,c.children,s),r=r.child}return r;case 9:return c=r.type,n=r.pendingProps.children,Kl(r,s),c=aa(c),n=n(c),r.flags|=1,dn(t,r,n,s),r.child;case 14:return n=r.type,c=pa(n,r.pendingProps),c=pa(n.type,c),Ob(t,r,n,c,s);case 15:return o_(t,r,r.type,r.pendingProps,s);case 17:return n=r.type,c=r.pendingProps,c=r.elementType===n?c:pa(n,c),Ch(t,r),r.tag=1,kn(n)?(t=!0,Kh(r)):t=!1,Kl(r,s),n_(r,n,c),Yg(r,n,c,s),Zg(null,r,n,!0,t,s);case 19:return h_(t,r,s);case 22:return l_(t,r,s)}throw Error(Nt(156,r.tag))};function E_(t,r){return tj(t,r)}function DE(t,r,s,n){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ea(t,r,s,n){return new DE(t,r,s,n)}function ty(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $E(t){if(typeof t=="function")return ty(t)?1:0;if(t!=null){if(t=t.$$typeof,t===bx)return 11;if(t===wx)return 14}return 2}function Gi(t,r){var s=t.alternate;return s===null?(s=ea(t.tag,r,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=r,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,r=t.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function Ah(t,r,s,n,c,o){var a=2;if(n=t,typeof t=="function")ty(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Nl:return qo(s.children,c,o,r);case vx:a=8,c|=8;break;case vg:return t=ea(12,s,r,c|2),t.elementType=vg,t.lanes=o,t;case bg:return t=ea(13,s,r,c),t.elementType=bg,t.lanes=o,t;case wg:return t=ea(19,s,r,c),t.elementType=wg,t.lanes=o,t;case D2:return Yf(s,c,o,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case F2:a=10;break e;case L2:a=9;break e;case bx:a=11;break e;case wx:a=14;break e;case wi:a=16,n=null;break e}throw Error(Nt(130,t==null?t:typeof t,""))}return r=ea(a,s,r,c),r.elementType=t,r.type=n,r.lanes=o,r}function qo(t,r,s,n){return t=ea(7,t,n,r),t.lanes=s,t}function Yf(t,r,s,n){return t=ea(22,t,n,r),t.elementType=D2,t.lanes=s,t.stateNode={isHidden:!1},t}function yp(t,r,s){return t=ea(6,t,null,r),t.lanes=s,t}function vp(t,r,s){return r=ea(4,t.children!==null?t.children:[],t.key,r),r.lanes=s,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function BE(t,r,s,n,c){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jm(0),this.expirationTimes=Jm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jm(0),this.identifierPrefix=n,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function sy(t,r,s,n,c,o,a,d,l){return t=new BE(t,r,s,d,l),r===1?(r=1,o===!0&&(r|=8)):r=0,o=ea(3,null,null,r),t.current=o,o.stateNode=t,o.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},$x(o),t}function zE(t,r,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_l,key:n==null?null:""+n,children:t,containerInfo:r,implementation:s}}function A_(t){if(!t)return eo;t=t._reactInternals;e:{if(ol(t)!==t||t.tag!==1)throw Error(Nt(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(kn(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(Nt(171))}if(t.tag===1){var s=t.type;if(kn(s))return Aj(t,s,r)}return r}function T_(t,r,s,n,c,o,a,d,l){return t=sy(s,n,!0,t,c,o,a,d,l),t.context=A_(null),s=t.current,n=un(),c=Wi(s),o=Ja(n,c),o.callback=r??null,qi(s,o,c),t.current.lanes=c,lu(t,c,n),En(t,n),t}function Qf(t,r,s,n){var c=r.current,o=un(),a=Wi(c);return s=A_(s),r.context===null?r.context=s:r.pendingContext=s,r=Ja(o,a),r.payload={element:t},n=n===void 0?null:n,n!==null&&(r.callback=n),t=qi(c,r,a),t!==null&&(wa(t,c,a,o),_h(t,c,a)),a}function lf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Gb(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<r?s:r}}function ry(t,r){Gb(t,r),(t=t.alternate)&&Gb(t,r)}function UE(){return null}var R_=typeof reportError=="function"?reportError:function(t){console.error(t)};function ny(t){this._internalRoot=t}Xf.prototype.render=ny.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(Nt(409));Qf(t,r,null,null)};Xf.prototype.unmount=ny.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Jo(function(){Qf(null,t,null,null)}),r[ni]=null}};function Xf(t){this._internalRoot=t}Xf.prototype.unstable_scheduleHydration=function(t){if(t){var r=lj();t={blockedOn:null,target:t,priority:r};for(var s=0;s<Ni.length&&r!==0&&r<Ni[s].priority;s++);Ni.splice(s,0,t),s===0&&dj(t)}};function ay(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Kb(){}function VE(t,r,s,n,c){if(c){if(typeof n=="function"){var o=n;n=function(){var i=lf(a);o.call(i)}}var a=T_(r,n,t,0,null,!1,!1,"",Kb);return t._reactRootContainer=a,t[ni]=a.current,Id(t.nodeType===8?t.parentNode:t),Jo(),a}for(;c=t.lastChild;)t.removeChild(c);if(typeof n=="function"){var d=n;n=function(){var i=lf(l);d.call(i)}}var l=sy(t,0,!1,null,null,!1,!1,"",Kb);return t._reactRootContainer=l,t[ni]=l.current,Id(t.nodeType===8?t.parentNode:t),Jo(function(){Qf(r,l,s,n)}),l}function Jf(t,r,s,n,c){var o=s._reactRootContainer;if(o){var a=o;if(typeof c=="function"){var d=c;c=function(){var l=lf(a);d.call(l)}}Qf(r,a,t,c)}else a=VE(s,r,t,c,n);return lf(a)}ij=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var s=ed(r.pendingLanes);s!==0&&(Nx(r,s|1),En(r,hr()),!(Ts&6)&&(ic=hr()+500,mo()))}break;case 13:Jo(function(){var n=ai(t,1);if(n!==null){var c=un();wa(n,t,1,c)}}),ry(t,1)}};Sx=function(t){if(t.tag===13){var r=ai(t,134217728);if(r!==null){var s=un();wa(r,t,134217728,s)}ry(t,134217728)}};oj=function(t){if(t.tag===13){var r=Wi(t),s=ai(t,r);if(s!==null){var n=un();wa(s,t,r,n)}ry(t,r)}};lj=function(){return $s};cj=function(t,r){var s=$s;try{return $s=t,r()}finally{$s=s}};Rg=function(t,r,s){switch(r){case"input":if(Ng(t,s),r=s.name,s.type==="radio"&&r!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<s.length;r++){var n=s[r];if(n!==t&&n.form===t.form){var c=Vf(n);if(!c)throw Error(Nt(90));B2(n),Ng(n,c)}}}break;case"textarea":U2(t,s);break;case"select":r=s.value,r!=null&&ql(t,!!s.multiple,r,!1)}};Y2=Zx;Q2=Jo;var qE={usingClientEntryPoint:!1,Events:[du,El,Vf,G2,K2,Zx]},zc={findFiberByHostInstance:Mo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},HE={bundleType:zc.bundleType,version:zc.version,rendererPackageName:zc.rendererPackageName,rendererConfig:zc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=J2(t),t===null?null:t.stateNode},findFiberByHostInstance:zc.findFiberByHostInstance||UE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qu.isDisabled&&Qu.supportsFiber)try{$f=Qu.inject(HE),Ma=Qu}catch{}}qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qE;qn.createPortal=function(t,r){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ay(r))throw Error(Nt(200));return zE(t,r,null,s)};qn.createRoot=function(t,r){if(!ay(t))throw Error(Nt(299));var s=!1,n="",c=R_;return r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(n=r.identifierPrefix),r.onRecoverableError!==void 0&&(c=r.onRecoverableError)),r=sy(t,1,!1,null,null,s,!1,n,c),t[ni]=r.current,Id(t.nodeType===8?t.parentNode:t),new ny(r)};qn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(Nt(188)):(t=Object.keys(t).join(","),Error(Nt(268,t)));return t=J2(r),t=t===null?null:t.stateNode,t};qn.flushSync=function(t){return Jo(t)};qn.hydrate=function(t,r,s){if(!Zf(r))throw Error(Nt(200));return Jf(null,t,r,!0,s)};qn.hydrateRoot=function(t,r,s){if(!ay(t))throw Error(Nt(405));var n=s!=null&&s.hydratedSources||null,c=!1,o="",a=R_;if(s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(o=s.identifierPrefix),s.onRecoverableError!==void 0&&(a=s.onRecoverableError)),r=T_(r,null,t,1,s??null,c,!1,o,a),t[ni]=r.current,Id(t),n)for(t=0;t<n.length;t++)s=n[t],c=s._getVersion,c=c(s._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[s,c]:r.mutableSourceEagerHydrationData.push(s,c);return new Xf(r)};qn.render=function(t,r,s){if(!Zf(r))throw Error(Nt(200));return Jf(null,t,r,!1,s)};qn.unmountComponentAtNode=function(t){if(!Zf(t))throw Error(Nt(40));return t._reactRootContainer?(Jo(function(){Jf(null,null,t,!1,function(){t._reactRootContainer=null,t[ni]=null})}),!0):!1};qn.unstable_batchedUpdates=Zx;qn.unstable_renderSubtreeIntoContainer=function(t,r,s,n){if(!Zf(s))throw Error(Nt(200));if(t==null||t._reactInternals===void 0)throw Error(Nt(38));return Jf(t,r,s,!1,n)};qn.version="18.3.1-next-f1338f8080-20240426";function P_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(P_)}catch(t){console.error(t)}}P_(),P2.exports=qn;var ll=P2.exports;const WE=Lf(ll);var Yb=ll;xg.createRoot=Yb.createRoot,xg.hydrateRoot=Yb.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vd(){return Vd=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},Vd.apply(this,arguments)}var Ai;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ai||(Ai={}));const Qb="popstate";function GE(t){t===void 0&&(t={});function r(n,c){let{pathname:o,search:a,hash:d}=n.location;return d0("",{pathname:o,search:a,hash:d},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function s(n,c){return typeof c=="string"?c:cf(c)}return YE(r,s,null,t)}function mr(t,r){if(t===!1||t===null||typeof t>"u")throw new Error(r)}function M_(t,r){if(!t){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function KE(){return Math.random().toString(36).substr(2,8)}function Xb(t,r){return{usr:t.state,key:t.key,idx:r}}function d0(t,r,s,n){return s===void 0&&(s=null),Vd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof r=="string"?jc(r):r,{state:s,key:r&&r.key||n||KE()})}function cf(t){let{pathname:r="/",search:s="",hash:n=""}=t;return s&&s!=="?"&&(r+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function jc(t){let r={};if(t){let s=t.indexOf("#");s>=0&&(r.hash=t.substr(s),t=t.substr(0,s));let n=t.indexOf("?");n>=0&&(r.search=t.substr(n),t=t.substr(0,n)),t&&(r.pathname=t)}return r}function YE(t,r,s,n){n===void 0&&(n={});let{window:c=document.defaultView,v5Compat:o=!1}=n,a=c.history,d=Ai.Pop,l=null,i=u();i==null&&(i=0,a.replaceState(Vd({},a.state,{idx:i}),""));function u(){return(a.state||{idx:null}).idx}function f(){d=Ai.Pop;let g=u(),v=g==null?null:g-i;i=g,l&&l({action:d,location:x.location,delta:v})}function h(g,v){d=Ai.Push;let y=d0(x.location,g,v);s&&s(y,g),i=u()+1;let b=Xb(y,i),C=x.createHref(y);try{a.pushState(b,"",C)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;c.location.assign(C)}o&&l&&l({action:d,location:x.location,delta:1})}function m(g,v){d=Ai.Replace;let y=d0(x.location,g,v);s&&s(y,g),i=u();let b=Xb(y,i),C=x.createHref(y);a.replaceState(b,"",C),o&&l&&l({action:d,location:x.location,delta:0})}function p(g){let v=c.location.origin!=="null"?c.location.origin:c.location.href,y=typeof g=="string"?g:cf(g);return y=y.replace(/ $/,"%20"),mr(v,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,v)}let x={get action(){return d},get location(){return t(c,a)},listen(g){if(l)throw new Error("A history only accepts one active listener");return c.addEventListener(Qb,f),l=g,()=>{c.removeEventListener(Qb,f),l=null}},createHref(g){return r(c,g)},createURL:p,encodeLocation(g){let v=p(g);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:m,go(g){return a.go(g)}};return x}var Zb;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Zb||(Zb={}));function QE(t,r,s){return s===void 0&&(s="/"),XE(t,r,s,!1)}function XE(t,r,s,n){let c=typeof r=="string"?jc(r):r,o=iy(c.pathname||"/",s);if(o==null)return null;let a=I_(t);ZE(a);let d=null;for(let l=0;d==null&&l<a.length;++l){let i=cA(o);d=oA(a[l],i,n)}return d}function I_(t,r,s,n){r===void 0&&(r=[]),s===void 0&&(s=[]),n===void 0&&(n="");let c=(o,a,d)=>{let l={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};l.relativePath.startsWith("/")&&(mr(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let i=Ki([n,l.relativePath]),u=s.concat(l);o.children&&o.children.length>0&&(mr(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+i+'".')),I_(o.children,r,u,i)),!(o.path==null&&!o.index)&&r.push({path:i,score:aA(i,o.index),routesMeta:u})};return t.forEach((o,a)=>{var d;if(o.path===""||!((d=o.path)!=null&&d.includes("?")))c(o,a);else for(let l of O_(o.path))c(o,a,l)}),r}function O_(t){let r=t.split("/");if(r.length===0)return[];let[s,...n]=r,c=s.endsWith("?"),o=s.replace(/\?$/,"");if(n.length===0)return c?[o,""]:[o];let a=O_(n.join("/")),d=[];return d.push(...a.map(l=>l===""?o:[o,l].join("/"))),c&&d.push(...a),d.map(l=>t.startsWith("/")&&l===""?"/":l)}function ZE(t){t.sort((r,s)=>r.score!==s.score?s.score-r.score:iA(r.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}const JE=/^:[\w-]+$/,eA=3,tA=2,sA=1,rA=10,nA=-2,Jb=t=>t==="*";function aA(t,r){let s=t.split("/"),n=s.length;return s.some(Jb)&&(n+=nA),r&&(n+=tA),s.filter(c=>!Jb(c)).reduce((c,o)=>c+(JE.test(o)?eA:o===""?sA:rA),n)}function iA(t,r){return t.length===r.length&&t.slice(0,-1).every((n,c)=>n===r[c])?t[t.length-1]-r[r.length-1]:0}function oA(t,r,s){s===void 0&&(s=!1);let{routesMeta:n}=t,c={},o="/",a=[];for(let d=0;d<n.length;++d){let l=n[d],i=d===n.length-1,u=o==="/"?r:r.slice(o.length)||"/",f=e1({path:l.relativePath,caseSensitive:l.caseSensitive,end:i},u),h=l.route;if(!f&&i&&s&&!n[n.length-1].route.index&&(f=e1({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!f)return null;Object.assign(c,f.params),a.push({params:c,pathname:Ki([o,f.pathname]),pathnameBase:fA(Ki([o,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(o=Ki([o,f.pathnameBase]))}return a}function e1(t,r){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,n]=lA(t.path,t.caseSensitive,t.end),c=r.match(s);if(!c)return null;let o=c[0],a=o.replace(/(.)\/+$/,"$1"),d=c.slice(1);return{params:n.reduce((i,u,f)=>{let{paramName:h,isOptional:m}=u;if(h==="*"){let x=d[f]||"";a=o.slice(0,o.length-x.length).replace(/(.)\/+$/,"$1")}const p=d[f];return m&&!p?i[h]=void 0:i[h]=(p||"").replace(/%2F/g,"/"),i},{}),pathname:o,pathnameBase:a,pattern:t}}function lA(t,r,s){r===void 0&&(r=!1),s===void 0&&(s=!0),M_(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],c="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,d,l)=>(n.push({paramName:d,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),c+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?c+="\\/*$":t!==""&&t!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,r?void 0:"i"),n]}function cA(t){try{return t.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return M_(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),t}}function iy(t,r){if(r==="/")return t;if(!t.toLowerCase().startsWith(r.toLowerCase()))return null;let s=r.endsWith("/")?r.length-1:r.length,n=t.charAt(s);return n&&n!=="/"?null:t.slice(s)||"/"}function dA(t,r){r===void 0&&(r="/");let{pathname:s,search:n="",hash:c=""}=typeof t=="string"?jc(t):t;return{pathname:s?s.startsWith("/")?s:uA(s,r):r,search:mA(n),hash:pA(c)}}function uA(t,r){let s=r.replace(/\/+$/,"").split("/");return t.split("/").forEach(c=>{c===".."?s.length>1&&s.pop():c!=="."&&s.push(c)}),s.length>1?s.join("/"):"/"}function bp(t,r,s,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function hA(t){return t.filter((r,s)=>s===0||r.route.path&&r.route.path.length>0)}function oy(t,r){let s=hA(t);return r?s.map((n,c)=>c===s.length-1?n.pathname:n.pathnameBase):s.map(n=>n.pathnameBase)}function ly(t,r,s,n){n===void 0&&(n=!1);let c;typeof t=="string"?c=jc(t):(c=Vd({},t),mr(!c.pathname||!c.pathname.includes("?"),bp("?","pathname","search",c)),mr(!c.pathname||!c.pathname.includes("#"),bp("#","pathname","hash",c)),mr(!c.search||!c.search.includes("#"),bp("#","search","hash",c)));let o=t===""||c.pathname==="",a=o?"/":c.pathname,d;if(a==null)d=s;else{let f=r.length-1;if(!n&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),f-=1;c.pathname=h.join("/")}d=f>=0?r[f]:"/"}let l=dA(c,d),i=a&&a!=="/"&&a.endsWith("/"),u=(o||a===".")&&s.endsWith("/");return!l.pathname.endsWith("/")&&(i||u)&&(l.pathname+="/"),l}const Ki=t=>t.join("/").replace(/\/\/+/g,"/"),fA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),mA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,pA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function gA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const F_=["post","put","patch","delete"];new Set(F_);const xA=["get",...F_];new Set(xA);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qd(){return qd=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},qd.apply(this,arguments)}const cy=A.createContext(null),yA=A.createContext(null),po=A.createContext(null),em=A.createContext(null),mi=A.createContext({outlet:null,matches:[],isDataRoute:!1}),L_=A.createContext(null);function vA(t,r){let{relative:s}=r===void 0?{}:r;_c()||mr(!1);let{basename:n,navigator:c}=A.useContext(po),{hash:o,pathname:a,search:d}=$_(t,{relative:s}),l=a;return n!=="/"&&(l=a==="/"?n:Ki([n,a])),c.createHref({pathname:l,search:d,hash:o})}function _c(){return A.useContext(em)!=null}function go(){return _c()||mr(!1),A.useContext(em).location}function D_(t){A.useContext(po).static||A.useLayoutEffect(t)}function Br(){let{isDataRoute:t}=A.useContext(mi);return t?PA():bA()}function bA(){_c()||mr(!1);let t=A.useContext(cy),{basename:r,future:s,navigator:n}=A.useContext(po),{matches:c}=A.useContext(mi),{pathname:o}=go(),a=JSON.stringify(oy(c,s.v7_relativeSplatPath)),d=A.useRef(!1);return D_(()=>{d.current=!0}),A.useCallback(function(i,u){if(u===void 0&&(u={}),!d.current)return;if(typeof i=="number"){n.go(i);return}let f=ly(i,JSON.parse(a),o,u.relative==="path");t==null&&r!=="/"&&(f.pathname=f.pathname==="/"?r:Ki([r,f.pathname])),(u.replace?n.replace:n.push)(f,u.state,u)},[r,n,a,o,t])}function dy(){let{matches:t}=A.useContext(mi),r=t[t.length-1];return r?r.params:{}}function $_(t,r){let{relative:s}=r===void 0?{}:r,{future:n}=A.useContext(po),{matches:c}=A.useContext(mi),{pathname:o}=go(),a=JSON.stringify(oy(c,n.v7_relativeSplatPath));return A.useMemo(()=>ly(t,JSON.parse(a),o,s==="path"),[t,a,o,s])}function wA(t,r){return jA(t,r)}function jA(t,r,s,n){_c()||mr(!1);let{navigator:c,static:o}=A.useContext(po),{matches:a}=A.useContext(mi),d=a[a.length-1],l=d?d.params:{};d&&d.pathname;let i=d?d.pathnameBase:"/";d&&d.route;let u=go(),f;if(r){var h;let v=typeof r=="string"?jc(r):r;i==="/"||(h=v.pathname)!=null&&h.startsWith(i)||mr(!1),f=v}else f=u;let m=f.pathname||"/",p=m;if(i!=="/"){let v=i.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(v.length).join("/")}let x=!o&&s&&s.matches&&s.matches.length>0?s.matches:QE(t,{pathname:p}),g=kA(x&&x.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:Ki([i,c.encodeLocation?c.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?i:Ki([i,c.encodeLocation?c.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),a,s,n);return r&&g?A.createElement(em.Provider,{value:{location:qd({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Ai.Pop}},g):g}function _A(){let t=RA(),r=gA(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},r),s?A.createElement("pre",{style:c},s):null,o)}const NA=A.createElement(_A,null);class SA extends A.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,s){return s.location!==r.location||s.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:s.error,location:s.location,revalidation:r.revalidation||s.revalidation}}componentDidCatch(r,s){console.error("React Router caught the following error during render",r,s)}render(){return this.state.error!==void 0?A.createElement(mi.Provider,{value:this.props.routeContext},A.createElement(L_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function CA(t){let{routeContext:r,match:s,children:n}=t,c=A.useContext(cy);return c&&c.static&&c.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=s.route.id),A.createElement(mi.Provider,{value:r},n)}function kA(t,r,s,n){var c;if(r===void 0&&(r=[]),s===void 0&&(s=null),n===void 0&&(n=null),t==null){var o;if(!s)return null;if(s.errors)t=s.matches;else if((o=n)!=null&&o.v7_partialHydration&&r.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let a=t,d=(c=s)==null?void 0:c.errors;if(d!=null){let u=a.findIndex(f=>f.route.id&&(d==null?void 0:d[f.route.id])!==void 0);u>=0||mr(!1),a=a.slice(0,Math.min(a.length,u+1))}let l=!1,i=-1;if(s&&n&&n.v7_partialHydration)for(let u=0;u<a.length;u++){let f=a[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(i=u),f.route.id){let{loaderData:h,errors:m}=s,p=f.route.loader&&h[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||p){l=!0,i>=0?a=a.slice(0,i+1):a=[a[0]];break}}}return a.reduceRight((u,f,h)=>{let m,p=!1,x=null,g=null;s&&(m=d&&f.route.id?d[f.route.id]:void 0,x=f.route.errorElement||NA,l&&(i<0&&h===0?(MA("route-fallback",!1),p=!0,g=null):i===h&&(p=!0,g=f.route.hydrateFallbackElement||null)));let v=r.concat(a.slice(0,h+1)),y=()=>{let b;return m?b=x:p?b=g:f.route.Component?b=A.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=u,A.createElement(CA,{match:f,routeContext:{outlet:u,matches:v,isDataRoute:s!=null},children:b})};return s&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?A.createElement(SA,{location:s.location,revalidation:s.revalidation,component:x,error:m,children:y(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):y()},null)}var B_=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(B_||{}),df=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(df||{});function EA(t){let r=A.useContext(cy);return r||mr(!1),r}function AA(t){let r=A.useContext(yA);return r||mr(!1),r}function TA(t){let r=A.useContext(mi);return r||mr(!1),r}function z_(t){let r=TA(),s=r.matches[r.matches.length-1];return s.route.id||mr(!1),s.route.id}function RA(){var t;let r=A.useContext(L_),s=AA(df.UseRouteError),n=z_(df.UseRouteError);return r!==void 0?r:(t=s.errors)==null?void 0:t[n]}function PA(){let{router:t}=EA(B_.UseNavigateStable),r=z_(df.UseNavigateStable),s=A.useRef(!1);return D_(()=>{s.current=!0}),A.useCallback(function(c,o){o===void 0&&(o={}),s.current&&(typeof c=="number"?t.navigate(c):t.navigate(c,qd({fromRouteId:r},o)))},[t,r])}const t1={};function MA(t,r,s){!r&&!t1[t]&&(t1[t]=!0)}function IA(t,r){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!r||r.v7_relativeSplatPath),r&&(r.v7_fetcherPersist,r.v7_normalizeFormMethod,r.v7_partialHydration,r.v7_skipActionErrorRevalidation)}function xd(t){let{to:r,replace:s,state:n,relative:c}=t;_c()||mr(!1);let{future:o,static:a}=A.useContext(po),{matches:d}=A.useContext(mi),{pathname:l}=go(),i=Br(),u=ly(r,oy(d,o.v7_relativeSplatPath),l,c==="path"),f=JSON.stringify(u);return A.useEffect(()=>i(JSON.parse(f),{replace:s,state:n,relative:c}),[i,f,c,s,n]),null}function Es(t){mr(!1)}function OA(t){let{basename:r="/",children:s=null,location:n,navigationType:c=Ai.Pop,navigator:o,static:a=!1,future:d}=t;_c()&&mr(!1);let l=r.replace(/^\/*/,"/"),i=A.useMemo(()=>({basename:l,navigator:o,static:a,future:qd({v7_relativeSplatPath:!1},d)}),[l,d,o,a]);typeof n=="string"&&(n=jc(n));let{pathname:u="/",search:f="",hash:h="",state:m=null,key:p="default"}=n,x=A.useMemo(()=>{let g=iy(u,l);return g==null?null:{location:{pathname:g,search:f,hash:h,state:m,key:p},navigationType:c}},[l,u,f,h,m,p,c]);return x==null?null:A.createElement(po.Provider,{value:i},A.createElement(em.Provider,{children:s,value:x}))}function FA(t){let{children:r,location:s}=t;return wA(u0(r),s)}new Promise(()=>{});function u0(t,r){r===void 0&&(r=[]);let s=[];return A.Children.forEach(t,(n,c)=>{if(!A.isValidElement(n))return;let o=[...r,c];if(n.type===A.Fragment){s.push.apply(s,u0(n.props.children,o));return}n.type!==Es&&mr(!1),!n.props.index||!n.props.children||mr(!1);let a={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=u0(n.props.children,o)),s.push(a)}),s}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function h0(){return h0=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},h0.apply(this,arguments)}function LA(t,r){if(t==null)return{};var s={},n=Object.keys(t),c,o;for(o=0;o<n.length;o++)c=n[o],!(r.indexOf(c)>=0)&&(s[c]=t[c]);return s}function DA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $A(t,r){return t.button===0&&(!r||r==="_self")&&!DA(t)}function f0(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((r,s)=>{let n=t[s];return r.concat(Array.isArray(n)?n.map(c=>[s,c]):[[s,n]])},[]))}function BA(t,r){let s=f0(t);return r&&r.forEach((n,c)=>{s.has(c)||r.getAll(c).forEach(o=>{s.append(c,o)})}),s}const zA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],UA="6";try{window.__reactRouterVersion=UA}catch{}const VA="startTransition",s1=px[VA];function qA(t){let{basename:r,children:s,future:n,window:c}=t,o=A.useRef();o.current==null&&(o.current=GE({window:c,v5Compat:!0}));let a=o.current,[d,l]=A.useState({action:a.action,location:a.location}),{v7_startTransition:i}=n||{},u=A.useCallback(f=>{i&&s1?s1(()=>l(f)):l(f)},[l,i]);return A.useLayoutEffect(()=>a.listen(u),[a,u]),A.useEffect(()=>IA(n),[n]),A.createElement(OA,{basename:r,children:s,location:d.location,navigationType:d.action,navigator:a,future:n})}const HA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",WA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ks=A.forwardRef(function(r,s){let{onClick:n,relative:c,reloadDocument:o,replace:a,state:d,target:l,to:i,preventScrollReset:u,viewTransition:f}=r,h=LA(r,zA),{basename:m}=A.useContext(po),p,x=!1;if(typeof i=="string"&&WA.test(i)&&(p=i,HA))try{let b=new URL(window.location.href),C=i.startsWith("//")?new URL(b.protocol+i):new URL(i),T=iy(C.pathname,m);C.origin===b.origin&&T!=null?i=T+C.search+C.hash:x=!0}catch{}let g=vA(i,{relative:c}),v=GA(i,{replace:a,state:d,target:l,preventScrollReset:u,relative:c,viewTransition:f});function y(b){n&&n(b),b.defaultPrevented||v(b)}return A.createElement("a",h0({},h,{href:p||g,onClick:x||o?n:y,ref:s,target:l}))});var r1;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(r1||(r1={}));var n1;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(n1||(n1={}));function GA(t,r){let{target:s,replace:n,state:c,preventScrollReset:o,relative:a,viewTransition:d}=r===void 0?{}:r,l=Br(),i=go(),u=$_(t,{relative:a});return A.useCallback(f=>{if($A(f,s)){f.preventDefault();let h=n!==void 0?n:cf(i)===cf(u);l(t,{replace:h,state:c,preventScrollReset:o,relative:a,viewTransition:d})}},[i,l,u,n,c,s,t,o,a,d])}function tm(t){let r=A.useRef(f0(t)),s=A.useRef(!1),n=go(),c=A.useMemo(()=>BA(n.search,s.current?null:r.current),[n.search]),o=Br(),a=A.useCallback((d,l)=>{const i=f0(typeof d=="function"?d(c):d);s.current=!0,o("?"+i,l)},[o,c]);return[c,a]}function U_(t){var r,s,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var c=t.length;for(r=0;r<c;r++)t[r]&&(s=U_(t[r]))&&(n&&(n+=" "),n+=s)}else for(s in t)t[s]&&(n&&(n+=" "),n+=s);return n}function V_(){for(var t,r,s=0,n="",c=arguments.length;s<c;s++)(t=arguments[s])&&(r=U_(t))&&(n&&(n+=" "),n+=r);return n}function KA(){for(var t=0,r,s,n="";t<arguments.length;)(r=arguments[t++])&&(s=q_(r))&&(n&&(n+=" "),n+=s);return n}function q_(t){if(typeof t=="string")return t;for(var r,s="",n=0;n<t.length;n++)t[n]&&(r=q_(t[n]))&&(s&&(s+=" "),s+=r);return s}var uy="-";function YA(t){var r=XA(t),s=t.conflictingClassGroups,n=t.conflictingClassGroupModifiers,c=n===void 0?{}:n;function o(d){var l=d.split(uy);return l[0]===""&&l.length!==1&&l.shift(),H_(l,r)||QA(d)}function a(d,l){var i=s[d]||[];return l&&c[d]?[].concat(i,c[d]):i}return{getClassGroupId:o,getConflictingClassGroupIds:a}}function H_(t,r){var a;if(t.length===0)return r.classGroupId;var s=t[0],n=r.nextPart.get(s),c=n?H_(t.slice(1),n):void 0;if(c)return c;if(r.validators.length!==0){var o=t.join(uy);return(a=r.validators.find(function(d){var l=d.validator;return l(o)}))==null?void 0:a.classGroupId}}var a1=/^\[(.+)\]$/;function QA(t){if(a1.test(t)){var r=a1.exec(t)[1],s=r==null?void 0:r.substring(0,r.indexOf(":"));if(s)return"arbitrary.."+s}}function XA(t){var r=t.theme,s=t.prefix,n={nextPart:new Map,validators:[]},c=JA(Object.entries(t.classGroups),s);return c.forEach(function(o){var a=o[0],d=o[1];m0(d,n,a,r)}),n}function m0(t,r,s,n){t.forEach(function(c){if(typeof c=="string"){var o=c===""?r:i1(r,c);o.classGroupId=s;return}if(typeof c=="function"){if(ZA(c)){m0(c(n),r,s,n);return}r.validators.push({validator:c,classGroupId:s});return}Object.entries(c).forEach(function(a){var d=a[0],l=a[1];m0(l,i1(r,d),s,n)})})}function i1(t,r){var s=t;return r.split(uy).forEach(function(n){s.nextPart.has(n)||s.nextPart.set(n,{nextPart:new Map,validators:[]}),s=s.nextPart.get(n)}),s}function ZA(t){return t.isThemeGetter}function JA(t,r){return r?t.map(function(s){var n=s[0],c=s[1],o=c.map(function(a){return typeof a=="string"?r+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(function(d){var l=d[0],i=d[1];return[r+l,i]})):a});return[n,o]}):t}function e7(t){if(t<1)return{get:function(){},set:function(){}};var r=0,s=new Map,n=new Map;function c(o,a){s.set(o,a),r++,r>t&&(r=0,n=s,s=new Map)}return{get:function(a){var d=s.get(a);if(d!==void 0)return d;if((d=n.get(a))!==void 0)return c(a,d),d},set:function(a,d){s.has(a)?s.set(a,d):c(a,d)}}}var W_="!";function t7(t){var r=t.separator||":",s=r.length===1,n=r[0],c=r.length;return function(a){for(var d=[],l=0,i=0,u,f=0;f<a.length;f++){var h=a[f];if(l===0){if(h===n&&(s||a.slice(f,f+c)===r)){d.push(a.slice(i,f)),i=f+c;continue}if(h==="/"){u=f;continue}}h==="["?l++:h==="]"&&l--}var m=d.length===0?a:a.substring(i),p=m.startsWith(W_),x=p?m.substring(1):m,g=u&&u>i?u-i:void 0;return{modifiers:d,hasImportantModifier:p,baseClassName:x,maybePostfixModifierPosition:g}}}function s7(t){if(t.length<=1)return t;var r=[],s=[];return t.forEach(function(n){var c=n[0]==="[";c?(r.push.apply(r,s.sort().concat([n])),s=[]):s.push(n)}),r.push.apply(r,s.sort()),r}function r7(t){return{cache:e7(t.cacheSize),splitModifiers:t7(t),...YA(t)}}var n7=/\s+/;function a7(t,r){var s=r.splitModifiers,n=r.getClassGroupId,c=r.getConflictingClassGroupIds,o=new Set;return t.trim().split(n7).map(function(a){var d=s(a),l=d.modifiers,i=d.hasImportantModifier,u=d.baseClassName,f=d.maybePostfixModifierPosition,h=n(f?u.substring(0,f):u),m=!!f;if(!h){if(!f)return{isTailwindClass:!1,originalClassName:a};if(h=n(u),!h)return{isTailwindClass:!1,originalClassName:a};m=!1}var p=s7(l).join(":"),x=i?p+W_:p;return{isTailwindClass:!0,modifierId:x,classGroupId:h,originalClassName:a,hasPostfixModifier:m}}).reverse().filter(function(a){if(!a.isTailwindClass)return!0;var d=a.modifierId,l=a.classGroupId,i=a.hasPostfixModifier,u=d+l;return o.has(u)?!1:(o.add(u),c(l,i).forEach(function(f){return o.add(d+f)}),!0)}).reverse().map(function(a){return a.originalClassName}).join(" ")}function i7(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var n,c,o,a=d;function d(i){var u=r[0],f=r.slice(1),h=f.reduce(function(m,p){return p(m)},u());return n=r7(h),c=n.cache.get,o=n.cache.set,a=l,l(i)}function l(i){var u=c(i);if(u)return u;var f=a7(i,n);return o(i,f),f}return function(){return a(KA.apply(null,arguments))}}function Gs(t){var r=function(n){return n[t]||[]};return r.isThemeGetter=!0,r}var G_=/^\[(?:([a-z-]+):)?(.+)\]$/i,o7=/^\d+\/\d+$/,l7=new Set(["px","full","screen"]),c7=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,d7=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,u7=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function ha(t){return Fo(t)||l7.has(t)||o7.test(t)||p0(t)}function p0(t){return cl(t,"length",x7)}function h7(t){return cl(t,"size",K_)}function f7(t){return cl(t,"position",K_)}function m7(t){return cl(t,"url",y7)}function Xu(t){return cl(t,"number",Fo)}function Fo(t){return!Number.isNaN(Number(t))}function p7(t){return t.endsWith("%")&&Fo(t.slice(0,-1))}function Uc(t){return o1(t)||cl(t,"number",o1)}function Ns(t){return G_.test(t)}function Vc(){return!0}function xi(t){return c7.test(t)}function g7(t){return cl(t,"",v7)}function cl(t,r,s){var n=G_.exec(t);return n?n[1]?n[1]===r:s(n[2]):!1}function x7(t){return d7.test(t)}function K_(){return!1}function y7(t){return t.startsWith("url(")}function o1(t){return Number.isInteger(Number(t))}function v7(t){return u7.test(t)}function b7(){var t=Gs("colors"),r=Gs("spacing"),s=Gs("blur"),n=Gs("brightness"),c=Gs("borderColor"),o=Gs("borderRadius"),a=Gs("borderSpacing"),d=Gs("borderWidth"),l=Gs("contrast"),i=Gs("grayscale"),u=Gs("hueRotate"),f=Gs("invert"),h=Gs("gap"),m=Gs("gradientColorStops"),p=Gs("gradientColorStopPositions"),x=Gs("inset"),g=Gs("margin"),v=Gs("opacity"),y=Gs("padding"),b=Gs("saturate"),C=Gs("scale"),T=Gs("sepia"),M=Gs("skew"),U=Gs("space"),L=Gs("translate"),P=function(){return["auto","contain","none"]},B=function(){return["auto","hidden","clip","visible","scroll"]},q=function(){return["auto",Ns,r]},z=function(){return[Ns,r]},k=function(){return["",ha]},R=function(){return["auto",Fo,Ns]},S=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},w=function(){return["solid","dashed","dotted","double","none"]},_=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},j=function(){return["start","end","center","between","around","evenly","stretch"]},N=function(){return["","0",Ns]},E=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},I=function(){return[Fo,Xu]},D=function(){return[Fo,Ns]};return{cacheSize:500,theme:{colors:[Vc],spacing:[ha],blur:["none","",xi,Ns],brightness:I(),borderColor:[t],borderRadius:["none","","full",xi,Ns],borderSpacing:z(),borderWidth:k(),contrast:I(),grayscale:N(),hueRotate:D(),invert:N(),gap:z(),gradientColorStops:[t],gradientColorStopPositions:[p7,p0],inset:q(),margin:q(),opacity:I(),padding:z(),saturate:I(),scale:I(),sepia:N(),skew:D(),space:z(),translate:z()},classGroups:{aspect:[{aspect:["auto","square","video",Ns]}],container:["container"],columns:[{columns:[xi]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(S(),[Ns])}],overflow:[{overflow:B()}],"overflow-x":[{"overflow-x":B()}],"overflow-y":[{"overflow-y":B()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Uc]}],basis:[{basis:q()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ns]}],grow:[{grow:N()}],shrink:[{shrink:N()}],order:[{order:["first","last","none",Uc]}],"grid-cols":[{"grid-cols":[Vc]}],"col-start-end":[{col:["auto",{span:["full",Uc]},Ns]}],"col-start":[{"col-start":R()}],"col-end":[{"col-end":R()}],"grid-rows":[{"grid-rows":[Vc]}],"row-start-end":[{row:["auto",{span:[Uc]},Ns]}],"row-start":[{"row-start":R()}],"row-end":[{"row-end":R()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ns]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ns]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal"].concat(j())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(j(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(j(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[U]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[U]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",Ns,r]}],"min-w":[{"min-w":["min","max","fit",Ns,ha]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[xi]},xi,Ns]}],h:[{h:[Ns,r,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",Ns,ha]}],"max-h":[{"max-h":[Ns,r,"min","max","fit"]}],"font-size":[{text:["base",xi,p0]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Xu]}],"font-family":[{font:[Vc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ns]}],"line-clamp":[{"line-clamp":["none",Fo,Xu]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ns,ha]}],"list-image":[{"list-image":["none",Ns]}],"list-style-type":[{list:["none","disc","decimal",Ns]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(w(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",ha]}],"underline-offset":[{"underline-offset":["auto",Ns,ha]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ns]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ns]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(S(),[f7])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",h7]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},m7]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[d]}],"border-w-x":[{"border-x":[d]}],"border-w-y":[{"border-y":[d]}],"border-w-s":[{"border-s":[d]}],"border-w-e":[{"border-e":[d]}],"border-w-t":[{"border-t":[d]}],"border-w-r":[{"border-r":[d]}],"border-w-b":[{"border-b":[d]}],"border-w-l":[{"border-l":[d]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[].concat(w(),["hidden"])}],"divide-x":[{"divide-x":[d]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[d]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:w()}],"border-color":[{border:[c]}],"border-color-x":[{"border-x":[c]}],"border-color-y":[{"border-y":[c]}],"border-color-t":[{"border-t":[c]}],"border-color-r":[{"border-r":[c]}],"border-color-b":[{"border-b":[c]}],"border-color-l":[{"border-l":[c]}],"divide-color":[{divide:[c]}],"outline-style":[{outline:[""].concat(w())}],"outline-offset":[{"outline-offset":[Ns,ha]}],"outline-w":[{outline:[ha]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:k()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[ha]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",xi,g7]}],"shadow-color":[{shadow:[Vc]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":_()}],"bg-blend":[{"bg-blend":_()}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",xi,Ns]}],grayscale:[{grayscale:[i]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[f]}],saturate:[{saturate:[b]}],sepia:[{sepia:[T]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[i]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[T]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ns]}],duration:[{duration:D()}],ease:[{ease:["linear","in","out","in-out",Ns]}],delay:[{delay:D()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ns]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[Uc,Ns]}],"translate-x":[{"translate-x":[L]}],"translate-y":[{"translate-y":[L]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ns]}],accent:[{accent:["auto",t]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ns]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":z()}],"scroll-mx":[{"scroll-mx":z()}],"scroll-my":[{"scroll-my":z()}],"scroll-ms":[{"scroll-ms":z()}],"scroll-me":[{"scroll-me":z()}],"scroll-mt":[{"scroll-mt":z()}],"scroll-mr":[{"scroll-mr":z()}],"scroll-mb":[{"scroll-mb":z()}],"scroll-ml":[{"scroll-ml":z()}],"scroll-p":[{"scroll-p":z()}],"scroll-px":[{"scroll-px":z()}],"scroll-py":[{"scroll-py":z()}],"scroll-ps":[{"scroll-ps":z()}],"scroll-pe":[{"scroll-pe":z()}],"scroll-pt":[{"scroll-pt":z()}],"scroll-pr":[{"scroll-pr":z()}],"scroll-pb":[{"scroll-pb":z()}],"scroll-pl":[{"scroll-pl":z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ns]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ha,Xu]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var w7=i7(b7);function Ot(...t){return w7(V_(t))}function l1(t,r){if(typeof t=="function")return t(r);t!=null&&(t.current=r)}function oi(...t){return r=>{let s=!1;const n=t.map(c=>{const o=l1(c,r);return!s&&typeof o=="function"&&(s=!0),o});if(s)return()=>{for(let c=0;c<n.length;c++){const o=n[c];typeof o=="function"?o():l1(t[c],null)}}}}function bs(...t){return A.useCallback(oi(...t),t)}function to(t){const r=_7(t),s=A.forwardRef((n,c)=>{const{children:o,...a}=n,d=A.Children.toArray(o),l=d.find(S7);if(l){const i=l.props.children,u=d.map(f=>f===l?A.Children.count(i)>1?A.Children.only(null):A.isValidElement(i)?i.props.children:null:f);return e.jsx(r,{...a,ref:c,children:A.isValidElement(i)?A.cloneElement(i,void 0,u):null})}return e.jsx(r,{...a,ref:c,children:o})});return s.displayName=`${t}.Slot`,s}var j7=to("Slot");function _7(t){const r=A.forwardRef((s,n)=>{const{children:c,...o}=s;if(A.isValidElement(c)){const a=k7(c),d=C7(o,c.props);return c.type!==A.Fragment&&(d.ref=n?oi(n,a):a),A.cloneElement(c,d)}return A.Children.count(c)>1?A.Children.only(null):null});return r.displayName=`${t}.SlotClone`,r}var Y_=Symbol("radix.slottable");function N7(t){const r=({children:s})=>e.jsx(e.Fragment,{children:s});return r.displayName=`${t}.Slottable`,r.__radixId=Y_,r}function S7(t){return A.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Y_}function C7(t,r){const s={...r};for(const n in r){const c=t[n],o=r[n];/^on[A-Z]/.test(n)?c&&o?s[n]=(...d)=>{const l=o(...d);return c(...d),l}:c&&(s[n]=c):n==="style"?s[n]={...c,...o}:n==="className"&&(s[n]=[c,o].filter(Boolean).join(" "))}return{...t,...s}}function k7(t){var n,c;let r=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?t.ref:(r=(c=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:c.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}const c1=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,d1=V_,sm=(t,r)=>s=>{var n;if((r==null?void 0:r.variants)==null)return d1(t,s==null?void 0:s.class,s==null?void 0:s.className);const{variants:c,defaultVariants:o}=r,a=Object.keys(c).map(i=>{const u=s==null?void 0:s[i],f=o==null?void 0:o[i];if(u===null)return null;const h=c1(u)||c1(f);return c[i][h]}),d=s&&Object.entries(s).reduce((i,u)=>{let[f,h]=u;return h===void 0||(i[f]=h),i},{}),l=r==null||(n=r.compoundVariants)===null||n===void 0?void 0:n.reduce((i,u)=>{let{class:f,className:h,...m}=u;return Object.entries(m).every(p=>{let[x,g]=p;return Array.isArray(g)?g.includes({...o,...d}[x]):{...o,...d}[x]===g})?[...i,f,h]:i},[]);return d1(t,a,l,s==null?void 0:s.class,s==null?void 0:s.className)},hy=sm("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ee=Lt.forwardRef(({className:t,variant:r,size:s,asChild:n=!1,...c},o)=>{const a=n?j7:"button";return e.jsx(a,{className:Ot(hy({variant:r,size:s,className:t})),ref:o,...c})});ee.displayName="Button";var E7={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const A7=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),it=(t,r)=>{const s=A.forwardRef(({color:n="currentColor",size:c=24,strokeWidth:o=2,absoluteStrokeWidth:a,children:d,...l},i)=>A.createElement("svg",{ref:i,...E7,width:c,height:c,stroke:n,strokeWidth:a?Number(o)*24/Number(c):o,className:`lucide lucide-${A7(t)}`,...l},[...r.map(([u,f])=>A.createElement(u,f)),...(Array.isArray(d)?d:[d])||[]]));return s.displayName=`${t}`,s},oc=it("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),Lr=it("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Ms=it("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),T7=it("AlignCenter",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"17",x2:"7",y1:"12",y2:"12",key:"rsh8ii"}],["line",{x1:"19",x2:"5",y1:"18",y2:"18",key:"1t0tuv"}]]),R7=it("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]),P7=it("AlignRight",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}],["line",{x1:"21",x2:"7",y1:"18",y2:"18",key:"1g9eri"}]]),M7=it("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),oa=it("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),li=it("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),I7=it("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),so=it("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),wp=it("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),Rr=it("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),u1=it("BarChartHorizontalBig",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["rect",{width:"12",height:"4",x:"7",y:"5",rx:"1",key:"936jl1"}],["rect",{width:"7",height:"4",x:"7",y:"13",rx:"1",key:"jqfkpy"}]]),O7=it("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]),F7=it("BookMarked",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}],["polyline",{points:"10 2 10 10 13 7 16 10 16 2",key:"13o6vz"}]]),g0=it("BookOpenText",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}],["path",{d:"M6 8h2",key:"30oboj"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M16 12h2",key:"7q9ll5"}]]),lr=it("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),L7=it("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),tr=it("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),fr=it("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),fy=it("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Yt=it("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Ar=it("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),hu=it("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),lc=it("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Hd=it("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Oa=it("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),my=it("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),D7=it("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]),jp=it("CircleDot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]),py=it("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),$7=it("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),Ps=it("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Gr=it("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),Ho=it("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Th=it("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),x0=it("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),Zs=it("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Rh=it("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),Wo=it("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Ss=it("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),B7=it("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),z7=it("FilePlus",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"12",x2:"12",y1:"18",y2:"12",key:"1tsf04"}],["line",{x1:"9",x2:"15",y1:"15",y2:"15",key:"110plj"}]]),h1=it("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]),Os=it("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),U7=it("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),f1=it("Fingerprint",[["path",{d:"M2 12C2 6.5 6.5 2 12 2a10 10 0 0 1 8 4",key:"1jc9o5"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12c0-.7.12-1.37.34-2",key:"1mxgy1"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2c0 .47 0 1.17-.02 2",key:"1fgabc"}]]),Q_=it("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]),V7=it("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]),X_=it("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),gy=it("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),Go=it("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]),q7=it("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),H7=it("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),y0=it("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),W7=it("Highlighter",[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]]),xy=it("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),G7=it("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Ti=it("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),K7=it("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]),v0=it("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),Y7=it("Laptop",[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]]),_p=it("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),Q7=it("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),X7=it("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),Z7=it("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]),Z_=it("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),Tr=it("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Wd=it("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),J7=it("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),m1=it("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),ro=it("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Pa=it("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),e9=it("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),J_=it("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]),t9=it("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]),eN=it("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),s9=it("Merge",[["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M12 2v10.3a4 4 0 0 1-1.172 2.872L4 22",key:"1hyw0i"}],["path",{d:"m20 22-5-5",key:"1m27yz"}]]),tN=it("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),sN=it("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),rN=it("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),Gd=it("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),b0=it("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),Np=it("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),r9=it("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),Bn=it("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),wr=it("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),n9=it("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),a9=it("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),ta=it("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),uf=it("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),vs=it("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Po=it("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),i9=it("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]),Is=it("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),o9=it("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]),Lo=it("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),no=it("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),l9=it("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]),c9=it("Scaling",[["path",{d:"M21 3 9 15",key:"15kdhq"}],["path",{d:"M12 3H3v18h18v-9",key:"8suug0"}],["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M14 15H9v-5",key:"pi4jk9"}]]),hn=it("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),hf=it("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),d9=it("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),la=it("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),u9=it("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),h9=it("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]),f9=it("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),el=it("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),m9=it("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),p9=it("Split",[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]]),gl=it("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),Kd=it("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),w0=it("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),p1=it("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]),g9=it("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]),x9=it("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),ra=it("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),y9=it("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]),g1=it("TestTube2",[["path",{d:"M21 7 6.82 21.18a2.83 2.83 0 0 1-3.99-.01v0a2.83 2.83 0 0 1 0-4L17 3",key:"dg8b2p"}],["path",{d:"m16 2 6 6",key:"1gw87d"}],["path",{d:"M12 16H4",key:"1cjfip"}]]),x1=it("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]),v9=it("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),Ds=it("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),xl=it("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),Nc=it("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),fu=it("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),b9=it("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),w9=it("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]),j9=it("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]),_9=it("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),va=it("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Jn=it("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),rm=it("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Da=it("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),as=it("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),xo=it("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),yo=it("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),Mr=it("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Dn=it("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),nm=it("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function It(t,r,{checkForDefaultPrevented:s=!0}={}){return function(c){if(t==null||t(c),s===!1||!c.defaultPrevented)return r==null?void 0:r(c)}}function N9(t,r){const s=A.createContext(r),n=o=>{const{children:a,...d}=o,l=A.useMemo(()=>d,Object.values(d));return e.jsx(s.Provider,{value:l,children:a})};n.displayName=t+"Provider";function c(o){const a=A.useContext(s);if(a)return a;if(r!==void 0)return r;throw new Error(`\`${o}\` must be used within \`${t}\``)}return[n,c]}function nn(t,r=[]){let s=[];function n(o,a){const d=A.createContext(a),l=s.length;s=[...s,a];const i=f=>{var v;const{scope:h,children:m,...p}=f,x=((v=h==null?void 0:h[t])==null?void 0:v[l])||d,g=A.useMemo(()=>p,Object.values(p));return e.jsx(x.Provider,{value:g,children:m})};i.displayName=o+"Provider";function u(f,h){var x;const m=((x=h==null?void 0:h[t])==null?void 0:x[l])||d,p=A.useContext(m);if(p)return p;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${o}\``)}return[i,u]}const c=()=>{const o=s.map(a=>A.createContext(a));return function(d){const l=(d==null?void 0:d[t])||o;return A.useMemo(()=>({[`__scope${t}`]:{...d,[t]:l}}),[d,l])}};return c.scopeName=t,[n,S9(c,...r)]}function S9(...t){const r=t[0];if(t.length===1)return r;const s=()=>{const n=t.map(c=>({useScope:c(),scopeName:c.scopeName}));return function(o){const a=n.reduce((d,{useScope:l,scopeName:i})=>{const f=l(o)[`__scope${i}`];return{...d,...f}},{});return A.useMemo(()=>({[`__scope${r.scopeName}`]:a}),[a])}};return s.scopeName=r.scopeName,s}var _r=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{},C9=px[" useInsertionEffect ".trim().toString()]||_r;function $a({prop:t,defaultProp:r,onChange:s=()=>{},caller:n}){const[c,o,a]=k9({defaultProp:r,onChange:s}),d=t!==void 0,l=d?t:c;{const u=A.useRef(t!==void 0);A.useEffect(()=>{const f=u.current;f!==d&&console.warn(`${n} is changing from ${f?"controlled":"uncontrolled"} to ${d?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=d},[d,n])}const i=A.useCallback(u=>{var f;if(d){const h=E9(u)?u(t):u;h!==t&&((f=a.current)==null||f.call(a,h))}else o(u)},[d,t,o,a]);return[l,i]}function k9({defaultProp:t,onChange:r}){const[s,n]=A.useState(t),c=A.useRef(s),o=A.useRef(r);return C9(()=>{o.current=r},[r]),A.useEffect(()=>{var a;c.current!==s&&((a=o.current)==null||a.call(o,s),c.current=s)},[s,c]),[s,n,o]}function E9(t){return typeof t=="function"}var A9=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Dt=A9.reduce((t,r)=>{const s=to(`Primitive.${r}`),n=A.forwardRef((c,o)=>{const{asChild:a,...d}=c,l=a?s:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(l,{...d,ref:o})});return n.displayName=`Primitive.${r}`,{...t,[r]:n}},{});function yy(t,r){t&&ll.flushSync(()=>t.dispatchEvent(r))}function am(t){const r=t+"CollectionProvider",[s,n]=nn(r),[c,o]=s(r,{collectionRef:{current:null},itemMap:new Map}),a=x=>{const{scope:g,children:v}=x,y=Lt.useRef(null),b=Lt.useRef(new Map).current;return e.jsx(c,{scope:g,itemMap:b,collectionRef:y,children:v})};a.displayName=r;const d=t+"CollectionSlot",l=to(d),i=Lt.forwardRef((x,g)=>{const{scope:v,children:y}=x,b=o(d,v),C=bs(g,b.collectionRef);return e.jsx(l,{ref:C,children:y})});i.displayName=d;const u=t+"CollectionItemSlot",f="data-radix-collection-item",h=to(u),m=Lt.forwardRef((x,g)=>{const{scope:v,children:y,...b}=x,C=Lt.useRef(null),T=bs(g,C),M=o(u,v);return Lt.useEffect(()=>(M.itemMap.set(C,{ref:C,...b}),()=>void M.itemMap.delete(C))),e.jsx(h,{[f]:"",ref:T,children:y})});m.displayName=u;function p(x){const g=o(t+"CollectionConsumer",x);return Lt.useCallback(()=>{const y=g.collectionRef.current;if(!y)return[];const b=Array.from(y.querySelectorAll(`[${f}]`));return Array.from(g.itemMap.values()).sort((M,U)=>b.indexOf(M.ref.current)-b.indexOf(U.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:a,Slot:i,ItemSlot:m},p,n]}var T9=A.createContext(void 0);function mu(t){const r=A.useContext(T9);return t||r||"ltr"}function fn(t){const r=A.useRef(t);return A.useEffect(()=>{r.current=t}),A.useMemo(()=>(...s)=>{var n;return(n=r.current)==null?void 0:n.call(r,...s)},[])}function R9(t,r=globalThis==null?void 0:globalThis.document){const s=fn(t);A.useEffect(()=>{const n=c=>{c.key==="Escape"&&s(c)};return r.addEventListener("keydown",n,{capture:!0}),()=>r.removeEventListener("keydown",n,{capture:!0})},[s,r])}var P9="DismissableLayer",j0="dismissableLayer.update",M9="dismissableLayer.pointerDownOutside",I9="dismissableLayer.focusOutside",y1,nN=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Sc=A.forwardRef((t,r)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:n,onPointerDownOutside:c,onFocusOutside:o,onInteractOutside:a,onDismiss:d,...l}=t,i=A.useContext(nN),[u,f]=A.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=A.useState({}),p=bs(r,U=>f(U)),x=Array.from(i.layers),[g]=[...i.layersWithOutsidePointerEventsDisabled].slice(-1),v=x.indexOf(g),y=u?x.indexOf(u):-1,b=i.layersWithOutsidePointerEventsDisabled.size>0,C=y>=v,T=F9(U=>{const L=U.target,P=[...i.branches].some(B=>B.contains(L));!C||P||(c==null||c(U),a==null||a(U),U.defaultPrevented||d==null||d())},h),M=L9(U=>{const L=U.target;[...i.branches].some(B=>B.contains(L))||(o==null||o(U),a==null||a(U),U.defaultPrevented||d==null||d())},h);return R9(U=>{y===i.layers.size-1&&(n==null||n(U),!U.defaultPrevented&&d&&(U.preventDefault(),d()))},h),A.useEffect(()=>{if(u)return s&&(i.layersWithOutsidePointerEventsDisabled.size===0&&(y1=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),i.layersWithOutsidePointerEventsDisabled.add(u)),i.layers.add(u),v1(),()=>{s&&i.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=y1)}},[u,h,s,i]),A.useEffect(()=>()=>{u&&(i.layers.delete(u),i.layersWithOutsidePointerEventsDisabled.delete(u),v1())},[u,i]),A.useEffect(()=>{const U=()=>m({});return document.addEventListener(j0,U),()=>document.removeEventListener(j0,U)},[]),e.jsx(Dt.div,{...l,ref:p,style:{pointerEvents:b?C?"auto":"none":void 0,...t.style},onFocusCapture:It(t.onFocusCapture,M.onFocusCapture),onBlurCapture:It(t.onBlurCapture,M.onBlurCapture),onPointerDownCapture:It(t.onPointerDownCapture,T.onPointerDownCapture)})});Sc.displayName=P9;var O9="DismissableLayerBranch",aN=A.forwardRef((t,r)=>{const s=A.useContext(nN),n=A.useRef(null),c=bs(r,n);return A.useEffect(()=>{const o=n.current;if(o)return s.branches.add(o),()=>{s.branches.delete(o)}},[s.branches]),e.jsx(Dt.div,{...t,ref:c})});aN.displayName=O9;function F9(t,r=globalThis==null?void 0:globalThis.document){const s=fn(t),n=A.useRef(!1),c=A.useRef(()=>{});return A.useEffect(()=>{const o=d=>{if(d.target&&!n.current){let l=function(){iN(M9,s,i,{discrete:!0})};const i={originalEvent:d};d.pointerType==="touch"?(r.removeEventListener("click",c.current),c.current=l,r.addEventListener("click",c.current,{once:!0})):l()}else r.removeEventListener("click",c.current);n.current=!1},a=window.setTimeout(()=>{r.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(a),r.removeEventListener("pointerdown",o),r.removeEventListener("click",c.current)}},[r,s]),{onPointerDownCapture:()=>n.current=!0}}function L9(t,r=globalThis==null?void 0:globalThis.document){const s=fn(t),n=A.useRef(!1);return A.useEffect(()=>{const c=o=>{o.target&&!n.current&&iN(I9,s,{originalEvent:o},{discrete:!1})};return r.addEventListener("focusin",c),()=>r.removeEventListener("focusin",c)},[r,s]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function v1(){const t=new CustomEvent(j0);document.dispatchEvent(t)}function iN(t,r,s,{discrete:n}){const c=s.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:s});r&&c.addEventListener(t,r,{once:!0}),n?yy(c,o):c.dispatchEvent(o)}var D9=Sc,$9=aN,Sp=0;function im(){A.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??b1()),document.body.insertAdjacentElement("beforeend",t[1]??b1()),Sp++,()=>{Sp===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),Sp--}},[])}function b1(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Cp="focusScope.autoFocusOnMount",kp="focusScope.autoFocusOnUnmount",w1={bubbles:!1,cancelable:!0},B9="FocusScope",pu=A.forwardRef((t,r)=>{const{loop:s=!1,trapped:n=!1,onMountAutoFocus:c,onUnmountAutoFocus:o,...a}=t,[d,l]=A.useState(null),i=fn(c),u=fn(o),f=A.useRef(null),h=bs(r,x=>l(x)),m=A.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;A.useEffect(()=>{if(n){let x=function(b){if(m.paused||!d)return;const C=b.target;d.contains(C)?f.current=C:vi(f.current,{select:!0})},g=function(b){if(m.paused||!d)return;const C=b.relatedTarget;C!==null&&(d.contains(C)||vi(f.current,{select:!0}))},v=function(b){if(document.activeElement===document.body)for(const T of b)T.removedNodes.length>0&&vi(d)};document.addEventListener("focusin",x),document.addEventListener("focusout",g);const y=new MutationObserver(v);return d&&y.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",g),y.disconnect()}}},[n,d,m.paused]),A.useEffect(()=>{if(d){_1.add(m);const x=document.activeElement;if(!d.contains(x)){const v=new CustomEvent(Cp,w1);d.addEventListener(Cp,i),d.dispatchEvent(v),v.defaultPrevented||(z9(W9(oN(d)),{select:!0}),document.activeElement===x&&vi(d))}return()=>{d.removeEventListener(Cp,i),setTimeout(()=>{const v=new CustomEvent(kp,w1);d.addEventListener(kp,u),d.dispatchEvent(v),v.defaultPrevented||vi(x??document.body,{select:!0}),d.removeEventListener(kp,u),_1.remove(m)},0)}}},[d,i,u,m]);const p=A.useCallback(x=>{if(!s&&!n||m.paused)return;const g=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,v=document.activeElement;if(g&&v){const y=x.currentTarget,[b,C]=U9(y);b&&C?!x.shiftKey&&v===C?(x.preventDefault(),s&&vi(b,{select:!0})):x.shiftKey&&v===b&&(x.preventDefault(),s&&vi(C,{select:!0})):v===y&&x.preventDefault()}},[s,n,m.paused]);return e.jsx(Dt.div,{tabIndex:-1,...a,ref:h,onKeyDown:p})});pu.displayName=B9;function z9(t,{select:r=!1}={}){const s=document.activeElement;for(const n of t)if(vi(n,{select:r}),document.activeElement!==s)return}function U9(t){const r=oN(t),s=j1(r,t),n=j1(r.reverse(),t);return[s,n]}function oN(t){const r=[],s=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const c=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||c?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)r.push(s.currentNode);return r}function j1(t,r){for(const s of t)if(!V9(s,{upTo:r}))return s}function V9(t,{upTo:r}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(r!==void 0&&t===r)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function q9(t){return t instanceof HTMLInputElement&&"select"in t}function vi(t,{select:r=!1}={}){if(t&&t.focus){const s=document.activeElement;t.focus({preventScroll:!0}),t!==s&&q9(t)&&r&&t.select()}}var _1=H9();function H9(){let t=[];return{add(r){const s=t[0];r!==s&&(s==null||s.pause()),t=N1(t,r),t.unshift(r)},remove(r){var s;t=N1(t,r),(s=t[0])==null||s.resume()}}}function N1(t,r){const s=[...t],n=s.indexOf(r);return n!==-1&&s.splice(n,1),s}function W9(t){return t.filter(r=>r.tagName!=="A")}var G9=px[" useId ".trim().toString()]||(()=>{}),K9=0;function Hr(t){const[r,s]=A.useState(G9());return _r(()=>{t||s(n=>n??String(K9++))},[t]),t||(r?`radix-${r}`:"")}const Y9=["top","right","bottom","left"],ao=Math.min,Fn=Math.max,ff=Math.round,Zu=Math.floor,Fa=t=>({x:t,y:t}),Q9={left:"right",right:"left",bottom:"top",top:"bottom"},X9={start:"end",end:"start"};function _0(t,r,s){return Fn(t,ao(r,s))}function ci(t,r){return typeof t=="function"?t(r):t}function di(t){return t.split("-")[0]}function Cc(t){return t.split("-")[1]}function vy(t){return t==="x"?"y":"x"}function by(t){return t==="y"?"height":"width"}function ei(t){return["top","bottom"].includes(di(t))?"y":"x"}function wy(t){return vy(ei(t))}function Z9(t,r,s){s===void 0&&(s=!1);const n=Cc(t),c=wy(t),o=by(c);let a=c==="x"?n===(s?"end":"start")?"right":"left":n==="start"?"bottom":"top";return r.reference[o]>r.floating[o]&&(a=mf(a)),[a,mf(a)]}function J9(t){const r=mf(t);return[N0(t),r,N0(r)]}function N0(t){return t.replace(/start|end/g,r=>X9[r])}function eT(t,r,s){const n=["left","right"],c=["right","left"],o=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return s?r?c:n:r?n:c;case"left":case"right":return r?o:a;default:return[]}}function tT(t,r,s,n){const c=Cc(t);let o=eT(di(t),s==="start",n);return c&&(o=o.map(a=>a+"-"+c),r&&(o=o.concat(o.map(N0)))),o}function mf(t){return t.replace(/left|right|bottom|top/g,r=>Q9[r])}function sT(t){return{top:0,right:0,bottom:0,left:0,...t}}function lN(t){return typeof t!="number"?sT(t):{top:t,right:t,bottom:t,left:t}}function pf(t){const{x:r,y:s,width:n,height:c}=t;return{width:n,height:c,top:s,left:r,right:r+n,bottom:s+c,x:r,y:s}}function S1(t,r,s){let{reference:n,floating:c}=t;const o=ei(r),a=wy(r),d=by(a),l=di(r),i=o==="y",u=n.x+n.width/2-c.width/2,f=n.y+n.height/2-c.height/2,h=n[d]/2-c[d]/2;let m;switch(l){case"top":m={x:u,y:n.y-c.height};break;case"bottom":m={x:u,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:f};break;case"left":m={x:n.x-c.width,y:f};break;default:m={x:n.x,y:n.y}}switch(Cc(r)){case"start":m[a]-=h*(s&&i?-1:1);break;case"end":m[a]+=h*(s&&i?-1:1);break}return m}const rT=async(t,r,s)=>{const{placement:n="bottom",strategy:c="absolute",middleware:o=[],platform:a}=s,d=o.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(r));let i=await a.getElementRects({reference:t,floating:r,strategy:c}),{x:u,y:f}=S1(i,n,l),h=n,m={},p=0;for(let x=0;x<d.length;x++){const{name:g,fn:v}=d[x],{x:y,y:b,data:C,reset:T}=await v({x:u,y:f,initialPlacement:n,placement:h,strategy:c,middlewareData:m,rects:i,platform:a,elements:{reference:t,floating:r}});u=y??u,f=b??f,m={...m,[g]:{...m[g],...C}},T&&p<=50&&(p++,typeof T=="object"&&(T.placement&&(h=T.placement),T.rects&&(i=T.rects===!0?await a.getElementRects({reference:t,floating:r,strategy:c}):T.rects),{x:u,y:f}=S1(i,h,l)),x=-1)}return{x:u,y:f,placement:h,strategy:c,middlewareData:m}};async function Yd(t,r){var s;r===void 0&&(r={});const{x:n,y:c,platform:o,rects:a,elements:d,strategy:l}=t,{boundary:i="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:h=!1,padding:m=0}=ci(r,t),p=lN(m),g=d[h?f==="floating"?"reference":"floating":f],v=pf(await o.getClippingRect({element:(s=await(o.isElement==null?void 0:o.isElement(g)))==null||s?g:g.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(d.floating)),boundary:i,rootBoundary:u,strategy:l})),y=f==="floating"?{x:n,y:c,width:a.floating.width,height:a.floating.height}:a.reference,b=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d.floating)),C=await(o.isElement==null?void 0:o.isElement(b))?await(o.getScale==null?void 0:o.getScale(b))||{x:1,y:1}:{x:1,y:1},T=pf(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:y,offsetParent:b,strategy:l}):y);return{top:(v.top-T.top+p.top)/C.y,bottom:(T.bottom-v.bottom+p.bottom)/C.y,left:(v.left-T.left+p.left)/C.x,right:(T.right-v.right+p.right)/C.x}}const nT=t=>({name:"arrow",options:t,async fn(r){const{x:s,y:n,placement:c,rects:o,platform:a,elements:d,middlewareData:l}=r,{element:i,padding:u=0}=ci(t,r)||{};if(i==null)return{};const f=lN(u),h={x:s,y:n},m=wy(c),p=by(m),x=await a.getDimensions(i),g=m==="y",v=g?"top":"left",y=g?"bottom":"right",b=g?"clientHeight":"clientWidth",C=o.reference[p]+o.reference[m]-h[m]-o.floating[p],T=h[m]-o.reference[m],M=await(a.getOffsetParent==null?void 0:a.getOffsetParent(i));let U=M?M[b]:0;(!U||!await(a.isElement==null?void 0:a.isElement(M)))&&(U=d.floating[b]||o.floating[p]);const L=C/2-T/2,P=U/2-x[p]/2-1,B=ao(f[v],P),q=ao(f[y],P),z=B,k=U-x[p]-q,R=U/2-x[p]/2+L,S=_0(z,R,k),w=!l.arrow&&Cc(c)!=null&&R!==S&&o.reference[p]/2-(R<z?B:q)-x[p]/2<0,_=w?R<z?R-z:R-k:0;return{[m]:h[m]+_,data:{[m]:S,centerOffset:R-S-_,...w&&{alignmentOffset:_}},reset:w}}}),aT=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(r){var s,n;const{placement:c,middlewareData:o,rects:a,initialPlacement:d,platform:l,elements:i}=r,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:x=!0,...g}=ci(t,r);if((s=o.arrow)!=null&&s.alignmentOffset)return{};const v=di(c),y=ei(d),b=di(d)===d,C=await(l.isRTL==null?void 0:l.isRTL(i.floating)),T=h||(b||!x?[mf(d)]:J9(d)),M=p!=="none";!h&&M&&T.push(...tT(d,x,p,C));const U=[d,...T],L=await Yd(r,g),P=[];let B=((n=o.flip)==null?void 0:n.overflows)||[];if(u&&P.push(L[v]),f){const S=Z9(c,a,C);P.push(L[S[0]],L[S[1]])}if(B=[...B,{placement:c,overflows:P}],!P.every(S=>S<=0)){var q,z;const S=(((q=o.flip)==null?void 0:q.index)||0)+1,w=U[S];if(w){var k;const j=f==="alignment"?y!==ei(w):!1,N=((k=B[0])==null?void 0:k.overflows[0])>0;if(!j||N)return{data:{index:S,overflows:B},reset:{placement:w}}}let _=(z=B.filter(j=>j.overflows[0]<=0).sort((j,N)=>j.overflows[1]-N.overflows[1])[0])==null?void 0:z.placement;if(!_)switch(m){case"bestFit":{var R;const j=(R=B.filter(N=>{if(M){const E=ei(N.placement);return E===y||E==="y"}return!0}).map(N=>[N.placement,N.overflows.filter(E=>E>0).reduce((E,I)=>E+I,0)]).sort((N,E)=>N[1]-E[1])[0])==null?void 0:R[0];j&&(_=j);break}case"initialPlacement":_=d;break}if(c!==_)return{reset:{placement:_}}}return{}}}};function C1(t,r){return{top:t.top-r.height,right:t.right-r.width,bottom:t.bottom-r.height,left:t.left-r.width}}function k1(t){return Y9.some(r=>t[r]>=0)}const iT=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(r){const{rects:s}=r,{strategy:n="referenceHidden",...c}=ci(t,r);switch(n){case"referenceHidden":{const o=await Yd(r,{...c,elementContext:"reference"}),a=C1(o,s.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:k1(a)}}}case"escaped":{const o=await Yd(r,{...c,altBoundary:!0}),a=C1(o,s.floating);return{data:{escapedOffsets:a,escaped:k1(a)}}}default:return{}}}}};async function oT(t,r){const{placement:s,platform:n,elements:c}=t,o=await(n.isRTL==null?void 0:n.isRTL(c.floating)),a=di(s),d=Cc(s),l=ei(s)==="y",i=["left","top"].includes(a)?-1:1,u=o&&l?-1:1,f=ci(r,t);let{mainAxis:h,crossAxis:m,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return d&&typeof p=="number"&&(m=d==="end"?p*-1:p),l?{x:m*u,y:h*i}:{x:h*i,y:m*u}}const lT=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(r){var s,n;const{x:c,y:o,placement:a,middlewareData:d}=r,l=await oT(r,t);return a===((s=d.offset)==null?void 0:s.placement)&&(n=d.arrow)!=null&&n.alignmentOffset?{}:{x:c+l.x,y:o+l.y,data:{...l,placement:a}}}}},cT=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(r){const{x:s,y:n,placement:c}=r,{mainAxis:o=!0,crossAxis:a=!1,limiter:d={fn:g=>{let{x:v,y}=g;return{x:v,y}}},...l}=ci(t,r),i={x:s,y:n},u=await Yd(r,l),f=ei(di(c)),h=vy(f);let m=i[h],p=i[f];if(o){const g=h==="y"?"top":"left",v=h==="y"?"bottom":"right",y=m+u[g],b=m-u[v];m=_0(y,m,b)}if(a){const g=f==="y"?"top":"left",v=f==="y"?"bottom":"right",y=p+u[g],b=p-u[v];p=_0(y,p,b)}const x=d.fn({...r,[h]:m,[f]:p});return{...x,data:{x:x.x-s,y:x.y-n,enabled:{[h]:o,[f]:a}}}}}},dT=function(t){return t===void 0&&(t={}),{options:t,fn(r){const{x:s,y:n,placement:c,rects:o,middlewareData:a}=r,{offset:d=0,mainAxis:l=!0,crossAxis:i=!0}=ci(t,r),u={x:s,y:n},f=ei(c),h=vy(f);let m=u[h],p=u[f];const x=ci(d,r),g=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(l){const b=h==="y"?"height":"width",C=o.reference[h]-o.floating[b]+g.mainAxis,T=o.reference[h]+o.reference[b]-g.mainAxis;m<C?m=C:m>T&&(m=T)}if(i){var v,y;const b=h==="y"?"width":"height",C=["top","left"].includes(di(c)),T=o.reference[f]-o.floating[b]+(C&&((v=a.offset)==null?void 0:v[f])||0)+(C?0:g.crossAxis),M=o.reference[f]+o.reference[b]+(C?0:((y=a.offset)==null?void 0:y[f])||0)-(C?g.crossAxis:0);p<T?p=T:p>M&&(p=M)}return{[h]:m,[f]:p}}}},uT=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(r){var s,n;const{placement:c,rects:o,platform:a,elements:d}=r,{apply:l=()=>{},...i}=ci(t,r),u=await Yd(r,i),f=di(c),h=Cc(c),m=ei(c)==="y",{width:p,height:x}=o.floating;let g,v;f==="top"||f==="bottom"?(g=f,v=h===(await(a.isRTL==null?void 0:a.isRTL(d.floating))?"start":"end")?"left":"right"):(v=f,g=h==="end"?"top":"bottom");const y=x-u.top-u.bottom,b=p-u.left-u.right,C=ao(x-u[g],y),T=ao(p-u[v],b),M=!r.middlewareData.shift;let U=C,L=T;if((s=r.middlewareData.shift)!=null&&s.enabled.x&&(L=b),(n=r.middlewareData.shift)!=null&&n.enabled.y&&(U=y),M&&!h){const B=Fn(u.left,0),q=Fn(u.right,0),z=Fn(u.top,0),k=Fn(u.bottom,0);m?L=p-2*(B!==0||q!==0?B+q:Fn(u.left,u.right)):U=x-2*(z!==0||k!==0?z+k:Fn(u.top,u.bottom))}await l({...r,availableWidth:L,availableHeight:U});const P=await a.getDimensions(d.floating);return p!==P.width||x!==P.height?{reset:{rects:!0}}:{}}}};function om(){return typeof window<"u"}function kc(t){return cN(t)?(t.nodeName||"").toLowerCase():"#document"}function zn(t){var r;return(t==null||(r=t.ownerDocument)==null?void 0:r.defaultView)||window}function za(t){var r;return(r=(cN(t)?t.ownerDocument:t.document)||window.document)==null?void 0:r.documentElement}function cN(t){return om()?t instanceof Node||t instanceof zn(t).Node:!1}function _a(t){return om()?t instanceof Element||t instanceof zn(t).Element:!1}function Ba(t){return om()?t instanceof HTMLElement||t instanceof zn(t).HTMLElement:!1}function E1(t){return!om()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof zn(t).ShadowRoot}function gu(t){const{overflow:r,overflowX:s,overflowY:n,display:c}=Na(t);return/auto|scroll|overlay|hidden|clip/.test(r+n+s)&&!["inline","contents"].includes(c)}function hT(t){return["table","td","th"].includes(kc(t))}function lm(t){return[":popover-open",":modal"].some(r=>{try{return t.matches(r)}catch{return!1}})}function jy(t){const r=_y(),s=_a(t)?Na(t):t;return["transform","translate","scale","rotate","perspective"].some(n=>s[n]?s[n]!=="none":!1)||(s.containerType?s.containerType!=="normal":!1)||!r&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!r&&(s.filter?s.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(s.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(s.contain||"").includes(n))}function fT(t){let r=io(t);for(;Ba(r)&&!cc(r);){if(jy(r))return r;if(lm(r))return null;r=io(r)}return null}function _y(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function cc(t){return["html","body","#document"].includes(kc(t))}function Na(t){return zn(t).getComputedStyle(t)}function cm(t){return _a(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function io(t){if(kc(t)==="html")return t;const r=t.assignedSlot||t.parentNode||E1(t)&&t.host||za(t);return E1(r)?r.host:r}function dN(t){const r=io(t);return cc(r)?t.ownerDocument?t.ownerDocument.body:t.body:Ba(r)&&gu(r)?r:dN(r)}function Qd(t,r,s){var n;r===void 0&&(r=[]),s===void 0&&(s=!0);const c=dN(t),o=c===((n=t.ownerDocument)==null?void 0:n.body),a=zn(c);if(o){const d=S0(a);return r.concat(a,a.visualViewport||[],gu(c)?c:[],d&&s?Qd(d):[])}return r.concat(c,Qd(c,[],s))}function S0(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function uN(t){const r=Na(t);let s=parseFloat(r.width)||0,n=parseFloat(r.height)||0;const c=Ba(t),o=c?t.offsetWidth:s,a=c?t.offsetHeight:n,d=ff(s)!==o||ff(n)!==a;return d&&(s=o,n=a),{width:s,height:n,$:d}}function Ny(t){return _a(t)?t:t.contextElement}function Ql(t){const r=Ny(t);if(!Ba(r))return Fa(1);const s=r.getBoundingClientRect(),{width:n,height:c,$:o}=uN(r);let a=(o?ff(s.width):s.width)/n,d=(o?ff(s.height):s.height)/c;return(!a||!Number.isFinite(a))&&(a=1),(!d||!Number.isFinite(d))&&(d=1),{x:a,y:d}}const mT=Fa(0);function hN(t){const r=zn(t);return!_y()||!r.visualViewport?mT:{x:r.visualViewport.offsetLeft,y:r.visualViewport.offsetTop}}function pT(t,r,s){return r===void 0&&(r=!1),!s||r&&s!==zn(t)?!1:r}function tl(t,r,s,n){r===void 0&&(r=!1),s===void 0&&(s=!1);const c=t.getBoundingClientRect(),o=Ny(t);let a=Fa(1);r&&(n?_a(n)&&(a=Ql(n)):a=Ql(t));const d=pT(o,s,n)?hN(o):Fa(0);let l=(c.left+d.x)/a.x,i=(c.top+d.y)/a.y,u=c.width/a.x,f=c.height/a.y;if(o){const h=zn(o),m=n&&_a(n)?zn(n):n;let p=h,x=S0(p);for(;x&&n&&m!==p;){const g=Ql(x),v=x.getBoundingClientRect(),y=Na(x),b=v.left+(x.clientLeft+parseFloat(y.paddingLeft))*g.x,C=v.top+(x.clientTop+parseFloat(y.paddingTop))*g.y;l*=g.x,i*=g.y,u*=g.x,f*=g.y,l+=b,i+=C,p=zn(x),x=S0(p)}}return pf({width:u,height:f,x:l,y:i})}function Sy(t,r){const s=cm(t).scrollLeft;return r?r.left+s:tl(za(t)).left+s}function fN(t,r,s){s===void 0&&(s=!1);const n=t.getBoundingClientRect(),c=n.left+r.scrollLeft-(s?0:Sy(t,n)),o=n.top+r.scrollTop;return{x:c,y:o}}function gT(t){let{elements:r,rect:s,offsetParent:n,strategy:c}=t;const o=c==="fixed",a=za(n),d=r?lm(r.floating):!1;if(n===a||d&&o)return s;let l={scrollLeft:0,scrollTop:0},i=Fa(1);const u=Fa(0),f=Ba(n);if((f||!f&&!o)&&((kc(n)!=="body"||gu(a))&&(l=cm(n)),Ba(n))){const m=tl(n);i=Ql(n),u.x=m.x+n.clientLeft,u.y=m.y+n.clientTop}const h=a&&!f&&!o?fN(a,l,!0):Fa(0);return{width:s.width*i.x,height:s.height*i.y,x:s.x*i.x-l.scrollLeft*i.x+u.x+h.x,y:s.y*i.y-l.scrollTop*i.y+u.y+h.y}}function xT(t){return Array.from(t.getClientRects())}function yT(t){const r=za(t),s=cm(t),n=t.ownerDocument.body,c=Fn(r.scrollWidth,r.clientWidth,n.scrollWidth,n.clientWidth),o=Fn(r.scrollHeight,r.clientHeight,n.scrollHeight,n.clientHeight);let a=-s.scrollLeft+Sy(t);const d=-s.scrollTop;return Na(n).direction==="rtl"&&(a+=Fn(r.clientWidth,n.clientWidth)-c),{width:c,height:o,x:a,y:d}}function vT(t,r){const s=zn(t),n=za(t),c=s.visualViewport;let o=n.clientWidth,a=n.clientHeight,d=0,l=0;if(c){o=c.width,a=c.height;const i=_y();(!i||i&&r==="fixed")&&(d=c.offsetLeft,l=c.offsetTop)}return{width:o,height:a,x:d,y:l}}function bT(t,r){const s=tl(t,!0,r==="fixed"),n=s.top+t.clientTop,c=s.left+t.clientLeft,o=Ba(t)?Ql(t):Fa(1),a=t.clientWidth*o.x,d=t.clientHeight*o.y,l=c*o.x,i=n*o.y;return{width:a,height:d,x:l,y:i}}function A1(t,r,s){let n;if(r==="viewport")n=vT(t,s);else if(r==="document")n=yT(za(t));else if(_a(r))n=bT(r,s);else{const c=hN(t);n={x:r.x-c.x,y:r.y-c.y,width:r.width,height:r.height}}return pf(n)}function mN(t,r){const s=io(t);return s===r||!_a(s)||cc(s)?!1:Na(s).position==="fixed"||mN(s,r)}function wT(t,r){const s=r.get(t);if(s)return s;let n=Qd(t,[],!1).filter(d=>_a(d)&&kc(d)!=="body"),c=null;const o=Na(t).position==="fixed";let a=o?io(t):t;for(;_a(a)&&!cc(a);){const d=Na(a),l=jy(a);!l&&d.position==="fixed"&&(c=null),(o?!l&&!c:!l&&d.position==="static"&&!!c&&["absolute","fixed"].includes(c.position)||gu(a)&&!l&&mN(t,a))?n=n.filter(u=>u!==a):c=d,a=io(a)}return r.set(t,n),n}function jT(t){let{element:r,boundary:s,rootBoundary:n,strategy:c}=t;const a=[...s==="clippingAncestors"?lm(r)?[]:wT(r,this._c):[].concat(s),n],d=a[0],l=a.reduce((i,u)=>{const f=A1(r,u,c);return i.top=Fn(f.top,i.top),i.right=ao(f.right,i.right),i.bottom=ao(f.bottom,i.bottom),i.left=Fn(f.left,i.left),i},A1(r,d,c));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function _T(t){const{width:r,height:s}=uN(t);return{width:r,height:s}}function NT(t,r,s){const n=Ba(r),c=za(r),o=s==="fixed",a=tl(t,!0,o,r);let d={scrollLeft:0,scrollTop:0};const l=Fa(0);function i(){l.x=Sy(c)}if(n||!n&&!o)if((kc(r)!=="body"||gu(c))&&(d=cm(r)),n){const m=tl(r,!0,o,r);l.x=m.x+r.clientLeft,l.y=m.y+r.clientTop}else c&&i();o&&!n&&c&&i();const u=c&&!n&&!o?fN(c,d):Fa(0),f=a.left+d.scrollLeft-l.x-u.x,h=a.top+d.scrollTop-l.y-u.y;return{x:f,y:h,width:a.width,height:a.height}}function Ep(t){return Na(t).position==="static"}function T1(t,r){if(!Ba(t)||Na(t).position==="fixed")return null;if(r)return r(t);let s=t.offsetParent;return za(t)===s&&(s=s.ownerDocument.body),s}function pN(t,r){const s=zn(t);if(lm(t))return s;if(!Ba(t)){let c=io(t);for(;c&&!cc(c);){if(_a(c)&&!Ep(c))return c;c=io(c)}return s}let n=T1(t,r);for(;n&&hT(n)&&Ep(n);)n=T1(n,r);return n&&cc(n)&&Ep(n)&&!jy(n)?s:n||fT(t)||s}const ST=async function(t){const r=this.getOffsetParent||pN,s=this.getDimensions,n=await s(t.floating);return{reference:NT(t.reference,await r(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function CT(t){return Na(t).direction==="rtl"}const kT={convertOffsetParentRelativeRectToViewportRelativeRect:gT,getDocumentElement:za,getClippingRect:jT,getOffsetParent:pN,getElementRects:ST,getClientRects:xT,getDimensions:_T,getScale:Ql,isElement:_a,isRTL:CT};function gN(t,r){return t.x===r.x&&t.y===r.y&&t.width===r.width&&t.height===r.height}function ET(t,r){let s=null,n;const c=za(t);function o(){var d;clearTimeout(n),(d=s)==null||d.disconnect(),s=null}function a(d,l){d===void 0&&(d=!1),l===void 0&&(l=1),o();const i=t.getBoundingClientRect(),{left:u,top:f,width:h,height:m}=i;if(d||r(),!h||!m)return;const p=Zu(f),x=Zu(c.clientWidth-(u+h)),g=Zu(c.clientHeight-(f+m)),v=Zu(u),b={rootMargin:-p+"px "+-x+"px "+-g+"px "+-v+"px",threshold:Fn(0,ao(1,l))||1};let C=!0;function T(M){const U=M[0].intersectionRatio;if(U!==l){if(!C)return a();U?a(!1,U):n=setTimeout(()=>{a(!1,1e-7)},1e3)}U===1&&!gN(i,t.getBoundingClientRect())&&a(),C=!1}try{s=new IntersectionObserver(T,{...b,root:c.ownerDocument})}catch{s=new IntersectionObserver(T,b)}s.observe(t)}return a(!0),o}function AT(t,r,s,n){n===void 0&&(n={});const{ancestorScroll:c=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,i=Ny(t),u=c||o?[...i?Qd(i):[],...Qd(r)]:[];u.forEach(v=>{c&&v.addEventListener("scroll",s,{passive:!0}),o&&v.addEventListener("resize",s)});const f=i&&d?ET(i,s):null;let h=-1,m=null;a&&(m=new ResizeObserver(v=>{let[y]=v;y&&y.target===i&&m&&(m.unobserve(r),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var b;(b=m)==null||b.observe(r)})),s()}),i&&!l&&m.observe(i),m.observe(r));let p,x=l?tl(t):null;l&&g();function g(){const v=tl(t);x&&!gN(x,v)&&s(),x=v,p=requestAnimationFrame(g)}return s(),()=>{var v;u.forEach(y=>{c&&y.removeEventListener("scroll",s),o&&y.removeEventListener("resize",s)}),f==null||f(),(v=m)==null||v.disconnect(),m=null,l&&cancelAnimationFrame(p)}}const TT=lT,RT=cT,PT=aT,MT=uT,IT=iT,R1=nT,OT=dT,FT=(t,r,s)=>{const n=new Map,c={platform:kT,...s},o={...c.platform,_c:n};return rT(t,r,{...c,platform:o})};var Ph=typeof document<"u"?A.useLayoutEffect:A.useEffect;function gf(t,r){if(t===r)return!0;if(typeof t!=typeof r)return!1;if(typeof t=="function"&&t.toString()===r.toString())return!0;let s,n,c;if(t&&r&&typeof t=="object"){if(Array.isArray(t)){if(s=t.length,s!==r.length)return!1;for(n=s;n--!==0;)if(!gf(t[n],r[n]))return!1;return!0}if(c=Object.keys(t),s=c.length,s!==Object.keys(r).length)return!1;for(n=s;n--!==0;)if(!{}.hasOwnProperty.call(r,c[n]))return!1;for(n=s;n--!==0;){const o=c[n];if(!(o==="_owner"&&t.$$typeof)&&!gf(t[o],r[o]))return!1}return!0}return t!==t&&r!==r}function xN(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function P1(t,r){const s=xN(t);return Math.round(r*s)/s}function Ap(t){const r=A.useRef(t);return Ph(()=>{r.current=t}),r}function LT(t){t===void 0&&(t={});const{placement:r="bottom",strategy:s="absolute",middleware:n=[],platform:c,elements:{reference:o,floating:a}={},transform:d=!0,whileElementsMounted:l,open:i}=t,[u,f]=A.useState({x:0,y:0,strategy:s,placement:r,middlewareData:{},isPositioned:!1}),[h,m]=A.useState(n);gf(h,n)||m(n);const[p,x]=A.useState(null),[g,v]=A.useState(null),y=A.useCallback(j=>{j!==M.current&&(M.current=j,x(j))},[]),b=A.useCallback(j=>{j!==U.current&&(U.current=j,v(j))},[]),C=o||p,T=a||g,M=A.useRef(null),U=A.useRef(null),L=A.useRef(u),P=l!=null,B=Ap(l),q=Ap(c),z=Ap(i),k=A.useCallback(()=>{if(!M.current||!U.current)return;const j={placement:r,strategy:s,middleware:h};q.current&&(j.platform=q.current),FT(M.current,U.current,j).then(N=>{const E={...N,isPositioned:z.current!==!1};R.current&&!gf(L.current,E)&&(L.current=E,ll.flushSync(()=>{f(E)}))})},[h,r,s,q,z]);Ph(()=>{i===!1&&L.current.isPositioned&&(L.current.isPositioned=!1,f(j=>({...j,isPositioned:!1})))},[i]);const R=A.useRef(!1);Ph(()=>(R.current=!0,()=>{R.current=!1}),[]),Ph(()=>{if(C&&(M.current=C),T&&(U.current=T),C&&T){if(B.current)return B.current(C,T,k);k()}},[C,T,k,B,P]);const S=A.useMemo(()=>({reference:M,floating:U,setReference:y,setFloating:b}),[y,b]),w=A.useMemo(()=>({reference:C,floating:T}),[C,T]),_=A.useMemo(()=>{const j={position:s,left:0,top:0};if(!w.floating)return j;const N=P1(w.floating,u.x),E=P1(w.floating,u.y);return d?{...j,transform:"translate("+N+"px, "+E+"px)",...xN(w.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:N,top:E}},[s,d,w.floating,u.x,u.y]);return A.useMemo(()=>({...u,update:k,refs:S,elements:w,floatingStyles:_}),[u,k,S,w,_])}const DT=t=>{function r(s){return{}.hasOwnProperty.call(s,"current")}return{name:"arrow",options:t,fn(s){const{element:n,padding:c}=typeof t=="function"?t(s):t;return n&&r(n)?n.current!=null?R1({element:n.current,padding:c}).fn(s):{}:n?R1({element:n,padding:c}).fn(s):{}}}},$T=(t,r)=>({...TT(t),options:[t,r]}),BT=(t,r)=>({...RT(t),options:[t,r]}),zT=(t,r)=>({...OT(t),options:[t,r]}),UT=(t,r)=>({...PT(t),options:[t,r]}),VT=(t,r)=>({...MT(t),options:[t,r]}),qT=(t,r)=>({...IT(t),options:[t,r]}),HT=(t,r)=>({...DT(t),options:[t,r]});var WT="Arrow",yN=A.forwardRef((t,r)=>{const{children:s,width:n=10,height:c=5,...o}=t;return e.jsx(Dt.svg,{...o,ref:r,width:n,height:c,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?s:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});yN.displayName=WT;var GT=yN;function Cy(t){const[r,s]=A.useState(void 0);return _r(()=>{if(t){s({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const o=c[0];let a,d;if("borderBoxSize"in o){const l=o.borderBoxSize,i=Array.isArray(l)?l[0]:l;a=i.inlineSize,d=i.blockSize}else a=t.offsetWidth,d=t.offsetHeight;s({width:a,height:d})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else s(void 0)},[t]),r}var ky="Popper",[vN,Ec]=nn(ky),[KT,bN]=vN(ky),wN=t=>{const{__scopePopper:r,children:s}=t,[n,c]=A.useState(null);return e.jsx(KT,{scope:r,anchor:n,onAnchorChange:c,children:s})};wN.displayName=ky;var jN="PopperAnchor",_N=A.forwardRef((t,r)=>{const{__scopePopper:s,virtualRef:n,...c}=t,o=bN(jN,s),a=A.useRef(null),d=bs(r,a);return A.useEffect(()=>{o.onAnchorChange((n==null?void 0:n.current)||a.current)}),n?null:e.jsx(Dt.div,{...c,ref:d})});_N.displayName=jN;var Ey="PopperContent",[YT,QT]=vN(Ey),NN=A.forwardRef((t,r)=>{var Y,F,O,W,K,Q;const{__scopePopper:s,side:n="bottom",sideOffset:c=0,align:o="center",alignOffset:a=0,arrowPadding:d=0,avoidCollisions:l=!0,collisionBoundary:i=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:p,...x}=t,g=bN(Ey,s),[v,y]=A.useState(null),b=bs(r,X=>y(X)),[C,T]=A.useState(null),M=Cy(C),U=(M==null?void 0:M.width)??0,L=(M==null?void 0:M.height)??0,P=n+(o!=="center"?"-"+o:""),B=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},q=Array.isArray(i)?i:[i],z=q.length>0,k={padding:B,boundary:q.filter(ZT),altBoundary:z},{refs:R,floatingStyles:S,placement:w,isPositioned:_,middlewareData:j}=LT({strategy:"fixed",placement:P,whileElementsMounted:(...X)=>AT(...X,{animationFrame:m==="always"}),elements:{reference:g.anchor},middleware:[$T({mainAxis:c+L,alignmentAxis:a}),l&&BT({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?zT():void 0,...k}),l&&UT({...k}),VT({...k,apply:({elements:X,rects:te,availableWidth:de,availableHeight:xe})=>{const{width:ne,height:ge}=te.reference,be=X.floating.style;be.setProperty("--radix-popper-available-width",`${de}px`),be.setProperty("--radix-popper-available-height",`${xe}px`),be.setProperty("--radix-popper-anchor-width",`${ne}px`),be.setProperty("--radix-popper-anchor-height",`${ge}px`)}}),C&&HT({element:C,padding:d}),JT({arrowWidth:U,arrowHeight:L}),h&&qT({strategy:"referenceHidden",...k})]}),[N,E]=kN(w),I=fn(p);_r(()=>{_&&(I==null||I())},[_,I]);const D=(Y=j.arrow)==null?void 0:Y.x,V=(F=j.arrow)==null?void 0:F.y,H=((O=j.arrow)==null?void 0:O.centerOffset)!==0,[G,$]=A.useState();return _r(()=>{v&&$(window.getComputedStyle(v).zIndex)},[v]),e.jsx("div",{ref:R.setFloating,"data-radix-popper-content-wrapper":"",style:{...S,transform:_?S.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:G,"--radix-popper-transform-origin":[(W=j.transformOrigin)==null?void 0:W.x,(K=j.transformOrigin)==null?void 0:K.y].join(" "),...((Q=j.hide)==null?void 0:Q.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(YT,{scope:s,placedSide:N,onArrowChange:T,arrowX:D,arrowY:V,shouldHideArrow:H,children:e.jsx(Dt.div,{"data-side":N,"data-align":E,...x,ref:b,style:{...x.style,animation:_?void 0:"none"}})})})});NN.displayName=Ey;var SN="PopperArrow",XT={top:"bottom",right:"left",bottom:"top",left:"right"},CN=A.forwardRef(function(r,s){const{__scopePopper:n,...c}=r,o=QT(SN,n),a=XT[o.placedSide];return e.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:e.jsx(GT,{...c,ref:s,style:{...c.style,display:"block"}})})});CN.displayName=SN;function ZT(t){return t!==null}var JT=t=>({name:"transformOrigin",options:t,fn(r){var g,v,y;const{placement:s,rects:n,middlewareData:c}=r,a=((g=c.arrow)==null?void 0:g.centerOffset)!==0,d=a?0:t.arrowWidth,l=a?0:t.arrowHeight,[i,u]=kN(s),f={start:"0%",center:"50%",end:"100%"}[u],h=(((v=c.arrow)==null?void 0:v.x)??0)+d/2,m=(((y=c.arrow)==null?void 0:y.y)??0)+l/2;let p="",x="";return i==="bottom"?(p=a?f:`${h}px`,x=`${-l}px`):i==="top"?(p=a?f:`${h}px`,x=`${n.floating.height+l}px`):i==="right"?(p=`${-l}px`,x=a?f:`${m}px`):i==="left"&&(p=`${n.floating.width+l}px`,x=a?f:`${m}px`),{data:{x:p,y:x}}}});function kN(t){const[r,s="center"]=t.split("-");return[r,s]}var Ay=wN,dm=_N,Ty=NN,Ry=CN,eR="Portal",Ac=A.forwardRef((t,r)=>{var d;const{container:s,...n}=t,[c,o]=A.useState(!1);_r(()=>o(!0),[]);const a=s||c&&((d=globalThis==null?void 0:globalThis.document)==null?void 0:d.body);return a?WE.createPortal(e.jsx(Dt.div,{...n,ref:r}),a):null});Ac.displayName=eR;function tR(t,r){return A.useReducer((s,n)=>r[s][n]??s,t)}var Tn=t=>{const{present:r,children:s}=t,n=sR(r),c=typeof s=="function"?s({present:n.isPresent}):A.Children.only(s),o=bs(n.ref,rR(c));return typeof s=="function"||n.isPresent?A.cloneElement(c,{ref:o}):null};Tn.displayName="Presence";function sR(t){const[r,s]=A.useState(),n=A.useRef(null),c=A.useRef(t),o=A.useRef("none"),a=t?"mounted":"unmounted",[d,l]=tR(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const i=Ju(n.current);o.current=d==="mounted"?i:"none"},[d]),_r(()=>{const i=n.current,u=c.current;if(u!==t){const h=o.current,m=Ju(i);t?l("MOUNT"):m==="none"||(i==null?void 0:i.display)==="none"?l("UNMOUNT"):l(u&&h!==m?"ANIMATION_OUT":"UNMOUNT"),c.current=t}},[t,l]),_r(()=>{if(r){let i;const u=r.ownerDocument.defaultView??window,f=m=>{const x=Ju(n.current).includes(m.animationName);if(m.target===r&&x&&(l("ANIMATION_END"),!c.current)){const g=r.style.animationFillMode;r.style.animationFillMode="forwards",i=u.setTimeout(()=>{r.style.animationFillMode==="forwards"&&(r.style.animationFillMode=g)})}},h=m=>{m.target===r&&(o.current=Ju(n.current))};return r.addEventListener("animationstart",h),r.addEventListener("animationcancel",f),r.addEventListener("animationend",f),()=>{u.clearTimeout(i),r.removeEventListener("animationstart",h),r.removeEventListener("animationcancel",f),r.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[r,l]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:A.useCallback(i=>{n.current=i?getComputedStyle(i):null,s(i)},[])}}function Ju(t){return(t==null?void 0:t.animationName)||"none"}function rR(t){var n,c;let r=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?t.ref:(r=(c=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:c.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var Tp="rovingFocusGroup.onEntryFocus",nR={bubbles:!1,cancelable:!0},xu="RovingFocusGroup",[C0,EN,aR]=am(xu),[iR,Tc]=nn(xu,[aR]),[oR,lR]=iR(xu),AN=A.forwardRef((t,r)=>e.jsx(C0.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(C0.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(cR,{...t,ref:r})})}));AN.displayName=xu;var cR=A.forwardRef((t,r)=>{const{__scopeRovingFocusGroup:s,orientation:n,loop:c=!1,dir:o,currentTabStopId:a,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:l,onEntryFocus:i,preventScrollOnEntryFocus:u=!1,...f}=t,h=A.useRef(null),m=bs(r,h),p=mu(o),[x,g]=$a({prop:a,defaultProp:d??null,onChange:l,caller:xu}),[v,y]=A.useState(!1),b=fn(i),C=EN(s),T=A.useRef(!1),[M,U]=A.useState(0);return A.useEffect(()=>{const L=h.current;if(L)return L.addEventListener(Tp,b),()=>L.removeEventListener(Tp,b)},[b]),e.jsx(oR,{scope:s,orientation:n,dir:p,loop:c,currentTabStopId:x,onItemFocus:A.useCallback(L=>g(L),[g]),onItemShiftTab:A.useCallback(()=>y(!0),[]),onFocusableItemAdd:A.useCallback(()=>U(L=>L+1),[]),onFocusableItemRemove:A.useCallback(()=>U(L=>L-1),[]),children:e.jsx(Dt.div,{tabIndex:v||M===0?-1:0,"data-orientation":n,...f,ref:m,style:{outline:"none",...t.style},onMouseDown:It(t.onMouseDown,()=>{T.current=!0}),onFocus:It(t.onFocus,L=>{const P=!T.current;if(L.target===L.currentTarget&&P&&!v){const B=new CustomEvent(Tp,nR);if(L.currentTarget.dispatchEvent(B),!B.defaultPrevented){const q=C().filter(w=>w.focusable),z=q.find(w=>w.active),k=q.find(w=>w.id===x),S=[z,k,...q].filter(Boolean).map(w=>w.ref.current);PN(S,u)}}T.current=!1}),onBlur:It(t.onBlur,()=>y(!1))})})}),TN="RovingFocusGroupItem",RN=A.forwardRef((t,r)=>{const{__scopeRovingFocusGroup:s,focusable:n=!0,active:c=!1,tabStopId:o,children:a,...d}=t,l=Hr(),i=o||l,u=lR(TN,s),f=u.currentTabStopId===i,h=EN(s),{onFocusableItemAdd:m,onFocusableItemRemove:p,currentTabStopId:x}=u;return A.useEffect(()=>{if(n)return m(),()=>p()},[n,m,p]),e.jsx(C0.ItemSlot,{scope:s,id:i,focusable:n,active:c,children:e.jsx(Dt.span,{tabIndex:f?0:-1,"data-orientation":u.orientation,...d,ref:r,onMouseDown:It(t.onMouseDown,g=>{n?u.onItemFocus(i):g.preventDefault()}),onFocus:It(t.onFocus,()=>u.onItemFocus(i)),onKeyDown:It(t.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){u.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const v=hR(g,u.orientation,u.dir);if(v!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let b=h().filter(C=>C.focusable).map(C=>C.ref.current);if(v==="last")b.reverse();else if(v==="prev"||v==="next"){v==="prev"&&b.reverse();const C=b.indexOf(g.currentTarget);b=u.loop?fR(b,C+1):b.slice(C+1)}setTimeout(()=>PN(b))}}),children:typeof a=="function"?a({isCurrentTabStop:f,hasTabStop:x!=null}):a})})});RN.displayName=TN;var dR={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function uR(t,r){return r!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function hR(t,r,s){const n=uR(t.key,s);if(!(r==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(r==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return dR[n]}function PN(t,r=!1){const s=document.activeElement;for(const n of t)if(n===s||(n.focus({preventScroll:r}),document.activeElement!==s))return}function fR(t,r){return t.map((s,n)=>t[(r+n)%t.length])}var Py=AN,My=RN,mR=function(t){if(typeof document>"u")return null;var r=Array.isArray(t)?t[0]:t;return r.ownerDocument.body},yl=new WeakMap,eh=new WeakMap,th={},Rp=0,MN=function(t){return t&&(t.host||MN(t.parentNode))},pR=function(t,r){return r.map(function(s){if(t.contains(s))return s;var n=MN(s);return n&&t.contains(n)?n:(console.error("aria-hidden",s,"in not contained inside",t,". Doing nothing"),null)}).filter(function(s){return!!s})},gR=function(t,r,s,n){var c=pR(r,Array.isArray(t)?t:[t]);th[s]||(th[s]=new WeakMap);var o=th[s],a=[],d=new Set,l=new Set(c),i=function(f){!f||d.has(f)||(d.add(f),i(f.parentNode))};c.forEach(i);var u=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(h){if(d.has(h))u(h);else try{var m=h.getAttribute(n),p=m!==null&&m!=="false",x=(yl.get(h)||0)+1,g=(o.get(h)||0)+1;yl.set(h,x),o.set(h,g),a.push(h),x===1&&p&&eh.set(h,!0),g===1&&h.setAttribute(s,"true"),p||h.setAttribute(n,"true")}catch(v){console.error("aria-hidden: cannot operate on ",h,v)}})};return u(r),d.clear(),Rp++,function(){a.forEach(function(f){var h=yl.get(f)-1,m=o.get(f)-1;yl.set(f,h),o.set(f,m),h||(eh.has(f)||f.removeAttribute(n),eh.delete(f)),m||f.removeAttribute(s)}),Rp--,Rp||(yl=new WeakMap,yl=new WeakMap,eh=new WeakMap,th={})}},um=function(t,r,s){s===void 0&&(s="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),c=r||mR(t);return c?(n.push.apply(n,Array.from(c.querySelectorAll("[aria-live], script"))),gR(n,c,s,"aria-hidden")):function(){return null}},Ra=function(){return Ra=Object.assign||function(r){for(var s,n=1,c=arguments.length;n<c;n++){s=arguments[n];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(r[o]=s[o])}return r},Ra.apply(this,arguments)};function IN(t,r){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,n=Object.getOwnPropertySymbols(t);c<n.length;c++)r.indexOf(n[c])<0&&Object.prototype.propertyIsEnumerable.call(t,n[c])&&(s[n[c]]=t[n[c]]);return s}function xR(t,r,s){if(s||arguments.length===2)for(var n=0,c=r.length,o;n<c;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))}var Mh="right-scroll-bar-position",Ih="width-before-scroll-bar",yR="with-scroll-bars-hidden",vR="--removed-body-scroll-bar-size";function Pp(t,r){return typeof t=="function"?t(r):t&&(t.current=r),t}function bR(t,r){var s=A.useState(function(){return{value:t,callback:r,facade:{get current(){return s.value},set current(n){var c=s.value;c!==n&&(s.value=n,s.callback(n,c))}}}})[0];return s.callback=r,s.facade}var wR=typeof window<"u"?A.useLayoutEffect:A.useEffect,M1=new WeakMap;function jR(t,r){var s=bR(r||null,function(n){return t.forEach(function(c){return Pp(c,n)})});return wR(function(){var n=M1.get(s);if(n){var c=new Set(n),o=new Set(t),a=s.current;c.forEach(function(d){o.has(d)||Pp(d,null)}),o.forEach(function(d){c.has(d)||Pp(d,a)})}M1.set(s,t)},[t]),s}function _R(t){return t}function NR(t,r){r===void 0&&(r=_R);var s=[],n=!1,c={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:t},useMedium:function(o){var a=r(o,n);return s.push(a),function(){s=s.filter(function(d){return d!==a})}},assignSyncMedium:function(o){for(n=!0;s.length;){var a=s;s=[],a.forEach(o)}s={push:function(d){return o(d)},filter:function(){return s}}},assignMedium:function(o){n=!0;var a=[];if(s.length){var d=s;s=[],d.forEach(o),a=s}var l=function(){var u=a;a=[],u.forEach(o)},i=function(){return Promise.resolve().then(l)};i(),s={push:function(u){a.push(u),i()},filter:function(u){return a=a.filter(u),s}}}};return c}function SR(t){t===void 0&&(t={});var r=NR(null);return r.options=Ra({async:!0,ssr:!1},t),r}var ON=function(t){var r=t.sideCar,s=IN(t,["sideCar"]);if(!r)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=r.read();if(!n)throw new Error("Sidecar medium not found");return A.createElement(n,Ra({},s))};ON.isSideCarExport=!0;function CR(t,r){return t.useMedium(r),ON}var FN=SR(),Mp=function(){},hm=A.forwardRef(function(t,r){var s=A.useRef(null),n=A.useState({onScrollCapture:Mp,onWheelCapture:Mp,onTouchMoveCapture:Mp}),c=n[0],o=n[1],a=t.forwardProps,d=t.children,l=t.className,i=t.removeScrollBar,u=t.enabled,f=t.shards,h=t.sideCar,m=t.noRelative,p=t.noIsolation,x=t.inert,g=t.allowPinchZoom,v=t.as,y=v===void 0?"div":v,b=t.gapMode,C=IN(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),T=h,M=jR([s,r]),U=Ra(Ra({},C),c);return A.createElement(A.Fragment,null,u&&A.createElement(T,{sideCar:FN,removeScrollBar:i,shards:f,noRelative:m,noIsolation:p,inert:x,setCallbacks:o,allowPinchZoom:!!g,lockRef:s,gapMode:b}),a?A.cloneElement(A.Children.only(d),Ra(Ra({},U),{ref:M})):A.createElement(y,Ra({},U,{className:l,ref:M}),d))});hm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};hm.classNames={fullWidth:Ih,zeroRight:Mh};var I1,kR=function(){if(I1)return I1;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function ER(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var r=kR();return r&&t.setAttribute("nonce",r),t}function AR(t,r){t.styleSheet?t.styleSheet.cssText=r:t.appendChild(document.createTextNode(r))}function TR(t){var r=document.head||document.getElementsByTagName("head")[0];r.appendChild(t)}var RR=function(){var t=0,r=null;return{add:function(s){t==0&&(r=ER())&&(AR(r,s),TR(r)),t++},remove:function(){t--,!t&&r&&(r.parentNode&&r.parentNode.removeChild(r),r=null)}}},PR=function(){var t=RR();return function(r,s){A.useEffect(function(){return t.add(r),function(){t.remove()}},[r&&s])}},LN=function(){var t=PR(),r=function(s){var n=s.styles,c=s.dynamic;return t(n,c),null};return r},MR={left:0,top:0,right:0,gap:0},Ip=function(t){return parseInt(t||"",10)||0},IR=function(t){var r=window.getComputedStyle(document.body),s=r[t==="padding"?"paddingLeft":"marginLeft"],n=r[t==="padding"?"paddingTop":"marginTop"],c=r[t==="padding"?"paddingRight":"marginRight"];return[Ip(s),Ip(n),Ip(c)]},OR=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return MR;var r=IR(t),s=document.documentElement.clientWidth,n=window.innerWidth;return{left:r[0],top:r[1],right:r[2],gap:Math.max(0,n-s+r[2]-r[0])}},FR=LN(),Xl="data-scroll-locked",LR=function(t,r,s,n){var c=t.left,o=t.top,a=t.right,d=t.gap;return s===void 0&&(s="margin"),`
  .`.concat(yR,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(d,"px ").concat(n,`;
  }
  body[`).concat(Xl,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([r&&"position: relative ".concat(n,";"),s==="margin"&&`
    padding-left: `.concat(c,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(d,"px ").concat(n,`;
    `),s==="padding"&&"padding-right: ".concat(d,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Mh,` {
    right: `).concat(d,"px ").concat(n,`;
  }
  
  .`).concat(Ih,` {
    margin-right: `).concat(d,"px ").concat(n,`;
  }
  
  .`).concat(Mh," .").concat(Mh,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Ih," .").concat(Ih,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Xl,`] {
    `).concat(vR,": ").concat(d,`px;
  }
`)},O1=function(){var t=parseInt(document.body.getAttribute(Xl)||"0",10);return isFinite(t)?t:0},DR=function(){A.useEffect(function(){return document.body.setAttribute(Xl,(O1()+1).toString()),function(){var t=O1()-1;t<=0?document.body.removeAttribute(Xl):document.body.setAttribute(Xl,t.toString())}},[])},$R=function(t){var r=t.noRelative,s=t.noImportant,n=t.gapMode,c=n===void 0?"margin":n;DR();var o=A.useMemo(function(){return OR(c)},[c]);return A.createElement(FR,{styles:LR(o,!r,c,s?"":"!important")})},k0=!1;if(typeof window<"u")try{var sh=Object.defineProperty({},"passive",{get:function(){return k0=!0,!0}});window.addEventListener("test",sh,sh),window.removeEventListener("test",sh,sh)}catch{k0=!1}var vl=k0?{passive:!1}:!1,BR=function(t){return t.tagName==="TEXTAREA"},DN=function(t,r){if(!(t instanceof Element))return!1;var s=window.getComputedStyle(t);return s[r]!=="hidden"&&!(s.overflowY===s.overflowX&&!BR(t)&&s[r]==="visible")},zR=function(t){return DN(t,"overflowY")},UR=function(t){return DN(t,"overflowX")},F1=function(t,r){var s=r.ownerDocument,n=r;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var c=$N(t,n);if(c){var o=BN(t,n),a=o[1],d=o[2];if(a>d)return!0}n=n.parentNode}while(n&&n!==s.body);return!1},VR=function(t){var r=t.scrollTop,s=t.scrollHeight,n=t.clientHeight;return[r,s,n]},qR=function(t){var r=t.scrollLeft,s=t.scrollWidth,n=t.clientWidth;return[r,s,n]},$N=function(t,r){return t==="v"?zR(r):UR(r)},BN=function(t,r){return t==="v"?VR(r):qR(r)},HR=function(t,r){return t==="h"&&r==="rtl"?-1:1},WR=function(t,r,s,n,c){var o=HR(t,window.getComputedStyle(r).direction),a=o*n,d=s.target,l=r.contains(d),i=!1,u=a>0,f=0,h=0;do{var m=BN(t,d),p=m[0],x=m[1],g=m[2],v=x-g-o*p;(p||v)&&$N(t,d)&&(f+=v,h+=p),d=d.parentNode.host||d.parentNode}while(!l&&d!==document.body||l&&(r.contains(d)||r===d));return(u&&(c&&Math.abs(f)<1||!c&&a>f)||!u&&(c&&Math.abs(h)<1||!c&&-a>h))&&(i=!0),i},rh=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},L1=function(t){return[t.deltaX,t.deltaY]},D1=function(t){return t&&"current"in t?t.current:t},GR=function(t,r){return t[0]===r[0]&&t[1]===r[1]},KR=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},YR=0,bl=[];function QR(t){var r=A.useRef([]),s=A.useRef([0,0]),n=A.useRef(),c=A.useState(YR++)[0],o=A.useState(LN)[0],a=A.useRef(t);A.useEffect(function(){a.current=t},[t]),A.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(c));var x=xR([t.lockRef.current],(t.shards||[]).map(D1),!0).filter(Boolean);return x.forEach(function(g){return g.classList.add("allow-interactivity-".concat(c))}),function(){document.body.classList.remove("block-interactivity-".concat(c)),x.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(c))})}}},[t.inert,t.lockRef.current,t.shards]);var d=A.useCallback(function(x,g){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!a.current.allowPinchZoom;var v=rh(x),y=s.current,b="deltaX"in x?x.deltaX:y[0]-v[0],C="deltaY"in x?x.deltaY:y[1]-v[1],T,M=x.target,U=Math.abs(b)>Math.abs(C)?"h":"v";if("touches"in x&&U==="h"&&M.type==="range")return!1;var L=F1(U,M);if(!L)return!0;if(L?T=U:(T=U==="v"?"h":"v",L=F1(U,M)),!L)return!1;if(!n.current&&"changedTouches"in x&&(b||C)&&(n.current=T),!T)return!0;var P=n.current||T;return WR(P,g,x,P==="h"?b:C,!0)},[]),l=A.useCallback(function(x){var g=x;if(!(!bl.length||bl[bl.length-1]!==o)){var v="deltaY"in g?L1(g):rh(g),y=r.current.filter(function(T){return T.name===g.type&&(T.target===g.target||g.target===T.shadowParent)&&GR(T.delta,v)})[0];if(y&&y.should){g.cancelable&&g.preventDefault();return}if(!y){var b=(a.current.shards||[]).map(D1).filter(Boolean).filter(function(T){return T.contains(g.target)}),C=b.length>0?d(g,b[0]):!a.current.noIsolation;C&&g.cancelable&&g.preventDefault()}}},[]),i=A.useCallback(function(x,g,v,y){var b={name:x,delta:g,target:v,should:y,shadowParent:XR(v)};r.current.push(b),setTimeout(function(){r.current=r.current.filter(function(C){return C!==b})},1)},[]),u=A.useCallback(function(x){s.current=rh(x),n.current=void 0},[]),f=A.useCallback(function(x){i(x.type,L1(x),x.target,d(x,t.lockRef.current))},[]),h=A.useCallback(function(x){i(x.type,rh(x),x.target,d(x,t.lockRef.current))},[]);A.useEffect(function(){return bl.push(o),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",l,vl),document.addEventListener("touchmove",l,vl),document.addEventListener("touchstart",u,vl),function(){bl=bl.filter(function(x){return x!==o}),document.removeEventListener("wheel",l,vl),document.removeEventListener("touchmove",l,vl),document.removeEventListener("touchstart",u,vl)}},[]);var m=t.removeScrollBar,p=t.inert;return A.createElement(A.Fragment,null,p?A.createElement(o,{styles:KR(c)}):null,m?A.createElement($R,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function XR(t){for(var r=null;t!==null;)t instanceof ShadowRoot&&(r=t.host,t=t.host),t=t.parentNode;return r}const ZR=CR(FN,QR);var zN=A.forwardRef(function(t,r){return A.createElement(hm,Ra({},t,{ref:r,sideCar:ZR}))});zN.classNames=hm.classNames;const fm=zN;var E0=["Enter"," "],JR=["ArrowDown","PageUp","Home"],UN=["ArrowUp","PageDown","End"],eP=[...JR,...UN],tP={ltr:[...E0,"ArrowRight"],rtl:[...E0,"ArrowLeft"]},sP={ltr:["ArrowLeft"],rtl:["ArrowRight"]},yu="Menu",[Xd,rP,nP]=am(yu),[dl,VN]=nn(yu,[nP,Ec,Tc]),mm=Ec(),qN=Tc(),[aP,ul]=dl(yu),[iP,vu]=dl(yu),HN=t=>{const{__scopeMenu:r,open:s=!1,children:n,dir:c,onOpenChange:o,modal:a=!0}=t,d=mm(r),[l,i]=A.useState(null),u=A.useRef(!1),f=fn(o),h=mu(c);return A.useEffect(()=>{const m=()=>{u.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>u.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),e.jsx(Ay,{...d,children:e.jsx(aP,{scope:r,open:s,onOpenChange:f,content:l,onContentChange:i,children:e.jsx(iP,{scope:r,onClose:A.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:u,dir:h,modal:a,children:n})})})};HN.displayName=yu;var oP="MenuAnchor",Iy=A.forwardRef((t,r)=>{const{__scopeMenu:s,...n}=t,c=mm(s);return e.jsx(dm,{...c,...n,ref:r})});Iy.displayName=oP;var Oy="MenuPortal",[lP,WN]=dl(Oy,{forceMount:void 0}),GN=t=>{const{__scopeMenu:r,forceMount:s,children:n,container:c}=t,o=ul(Oy,r);return e.jsx(lP,{scope:r,forceMount:s,children:e.jsx(Tn,{present:s||o.open,children:e.jsx(Ac,{asChild:!0,container:c,children:n})})})};GN.displayName=Oy;var na="MenuContent",[cP,Fy]=dl(na),KN=A.forwardRef((t,r)=>{const s=WN(na,t.__scopeMenu),{forceMount:n=s.forceMount,...c}=t,o=ul(na,t.__scopeMenu),a=vu(na,t.__scopeMenu);return e.jsx(Xd.Provider,{scope:t.__scopeMenu,children:e.jsx(Tn,{present:n||o.open,children:e.jsx(Xd.Slot,{scope:t.__scopeMenu,children:a.modal?e.jsx(dP,{...c,ref:r}):e.jsx(uP,{...c,ref:r})})})})}),dP=A.forwardRef((t,r)=>{const s=ul(na,t.__scopeMenu),n=A.useRef(null),c=bs(r,n);return A.useEffect(()=>{const o=n.current;if(o)return um(o)},[]),e.jsx(Ly,{...t,ref:c,trapFocus:s.open,disableOutsidePointerEvents:s.open,disableOutsideScroll:!0,onFocusOutside:It(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>s.onOpenChange(!1)})}),uP=A.forwardRef((t,r)=>{const s=ul(na,t.__scopeMenu);return e.jsx(Ly,{...t,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>s.onOpenChange(!1)})}),hP=to("MenuContent.ScrollLock"),Ly=A.forwardRef((t,r)=>{const{__scopeMenu:s,loop:n=!1,trapFocus:c,onOpenAutoFocus:o,onCloseAutoFocus:a,disableOutsidePointerEvents:d,onEntryFocus:l,onEscapeKeyDown:i,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:h,onDismiss:m,disableOutsideScroll:p,...x}=t,g=ul(na,s),v=vu(na,s),y=mm(s),b=qN(s),C=rP(s),[T,M]=A.useState(null),U=A.useRef(null),L=bs(r,U,g.onContentChange),P=A.useRef(0),B=A.useRef(""),q=A.useRef(0),z=A.useRef(null),k=A.useRef("right"),R=A.useRef(0),S=p?fm:A.Fragment,w=p?{as:hP,allowPinchZoom:!0}:void 0,_=N=>{var Y,F;const E=B.current+N,I=C().filter(O=>!O.disabled),D=document.activeElement,V=(Y=I.find(O=>O.ref.current===D))==null?void 0:Y.textValue,H=I.map(O=>O.textValue),G=NP(H,E,V),$=(F=I.find(O=>O.textValue===G))==null?void 0:F.ref.current;(function O(W){B.current=W,window.clearTimeout(P.current),W!==""&&(P.current=window.setTimeout(()=>O(""),1e3))})(E),$&&setTimeout(()=>$.focus())};A.useEffect(()=>()=>window.clearTimeout(P.current),[]),im();const j=A.useCallback(N=>{var I,D;return k.current===((I=z.current)==null?void 0:I.side)&&CP(N,(D=z.current)==null?void 0:D.area)},[]);return e.jsx(cP,{scope:s,searchRef:B,onItemEnter:A.useCallback(N=>{j(N)&&N.preventDefault()},[j]),onItemLeave:A.useCallback(N=>{var E;j(N)||((E=U.current)==null||E.focus(),M(null))},[j]),onTriggerLeave:A.useCallback(N=>{j(N)&&N.preventDefault()},[j]),pointerGraceTimerRef:q,onPointerGraceIntentChange:A.useCallback(N=>{z.current=N},[]),children:e.jsx(S,{...w,children:e.jsx(pu,{asChild:!0,trapped:c,onMountAutoFocus:It(o,N=>{var E;N.preventDefault(),(E=U.current)==null||E.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:e.jsx(Sc,{asChild:!0,disableOutsidePointerEvents:d,onEscapeKeyDown:i,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:h,onDismiss:m,children:e.jsx(Py,{asChild:!0,...b,dir:v.dir,orientation:"vertical",loop:n,currentTabStopId:T,onCurrentTabStopIdChange:M,onEntryFocus:It(l,N=>{v.isUsingKeyboardRef.current||N.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(Ty,{role:"menu","aria-orientation":"vertical","data-state":d4(g.open),"data-radix-menu-content":"",dir:v.dir,...y,...x,ref:L,style:{outline:"none",...x.style},onKeyDown:It(x.onKeyDown,N=>{const I=N.target.closest("[data-radix-menu-content]")===N.currentTarget,D=N.ctrlKey||N.altKey||N.metaKey,V=N.key.length===1;I&&(N.key==="Tab"&&N.preventDefault(),!D&&V&&_(N.key));const H=U.current;if(N.target!==H||!eP.includes(N.key))return;N.preventDefault();const $=C().filter(Y=>!Y.disabled).map(Y=>Y.ref.current);UN.includes(N.key)&&$.reverse(),jP($)}),onBlur:It(t.onBlur,N=>{N.currentTarget.contains(N.target)||(window.clearTimeout(P.current),B.current="")}),onPointerMove:It(t.onPointerMove,Zd(N=>{const E=N.target,I=R.current!==N.clientX;if(N.currentTarget.contains(E)&&I){const D=N.clientX>R.current?"right":"left";k.current=D,R.current=N.clientX}}))})})})})})})});KN.displayName=na;var fP="MenuGroup",Dy=A.forwardRef((t,r)=>{const{__scopeMenu:s,...n}=t;return e.jsx(Dt.div,{role:"group",...n,ref:r})});Dy.displayName=fP;var mP="MenuLabel",YN=A.forwardRef((t,r)=>{const{__scopeMenu:s,...n}=t;return e.jsx(Dt.div,{...n,ref:r})});YN.displayName=mP;var xf="MenuItem",$1="menu.itemSelect",pm=A.forwardRef((t,r)=>{const{disabled:s=!1,onSelect:n,...c}=t,o=A.useRef(null),a=vu(xf,t.__scopeMenu),d=Fy(xf,t.__scopeMenu),l=bs(r,o),i=A.useRef(!1),u=()=>{const f=o.current;if(!s&&f){const h=new CustomEvent($1,{bubbles:!0,cancelable:!0});f.addEventListener($1,m=>n==null?void 0:n(m),{once:!0}),yy(f,h),h.defaultPrevented?i.current=!1:a.onClose()}};return e.jsx(QN,{...c,ref:l,disabled:s,onClick:It(t.onClick,u),onPointerDown:f=>{var h;(h=t.onPointerDown)==null||h.call(t,f),i.current=!0},onPointerUp:It(t.onPointerUp,f=>{var h;i.current||(h=f.currentTarget)==null||h.click()}),onKeyDown:It(t.onKeyDown,f=>{const h=d.searchRef.current!=="";s||h&&f.key===" "||E0.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});pm.displayName=xf;var QN=A.forwardRef((t,r)=>{const{__scopeMenu:s,disabled:n=!1,textValue:c,...o}=t,a=Fy(xf,s),d=qN(s),l=A.useRef(null),i=bs(r,l),[u,f]=A.useState(!1),[h,m]=A.useState("");return A.useEffect(()=>{const p=l.current;p&&m((p.textContent??"").trim())},[o.children]),e.jsx(Xd.ItemSlot,{scope:s,disabled:n,textValue:c??h,children:e.jsx(My,{asChild:!0,...d,focusable:!n,children:e.jsx(Dt.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...o,ref:i,onPointerMove:It(t.onPointerMove,Zd(p=>{n?a.onItemLeave(p):(a.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:It(t.onPointerLeave,Zd(p=>a.onItemLeave(p))),onFocus:It(t.onFocus,()=>f(!0)),onBlur:It(t.onBlur,()=>f(!1))})})})}),pP="MenuCheckboxItem",XN=A.forwardRef((t,r)=>{const{checked:s=!1,onCheckedChange:n,...c}=t;return e.jsx(s4,{scope:t.__scopeMenu,checked:s,children:e.jsx(pm,{role:"menuitemcheckbox","aria-checked":yf(s)?"mixed":s,...c,ref:r,"data-state":By(s),onSelect:It(c.onSelect,()=>n==null?void 0:n(yf(s)?!0:!s),{checkForDefaultPrevented:!1})})})});XN.displayName=pP;var ZN="MenuRadioGroup",[gP,xP]=dl(ZN,{value:void 0,onValueChange:()=>{}}),JN=A.forwardRef((t,r)=>{const{value:s,onValueChange:n,...c}=t,o=fn(n);return e.jsx(gP,{scope:t.__scopeMenu,value:s,onValueChange:o,children:e.jsx(Dy,{...c,ref:r})})});JN.displayName=ZN;var e4="MenuRadioItem",t4=A.forwardRef((t,r)=>{const{value:s,...n}=t,c=xP(e4,t.__scopeMenu),o=s===c.value;return e.jsx(s4,{scope:t.__scopeMenu,checked:o,children:e.jsx(pm,{role:"menuitemradio","aria-checked":o,...n,ref:r,"data-state":By(o),onSelect:It(n.onSelect,()=>{var a;return(a=c.onValueChange)==null?void 0:a.call(c,s)},{checkForDefaultPrevented:!1})})})});t4.displayName=e4;var $y="MenuItemIndicator",[s4,yP]=dl($y,{checked:!1}),r4=A.forwardRef((t,r)=>{const{__scopeMenu:s,forceMount:n,...c}=t,o=yP($y,s);return e.jsx(Tn,{present:n||yf(o.checked)||o.checked===!0,children:e.jsx(Dt.span,{...c,ref:r,"data-state":By(o.checked)})})});r4.displayName=$y;var vP="MenuSeparator",n4=A.forwardRef((t,r)=>{const{__scopeMenu:s,...n}=t;return e.jsx(Dt.div,{role:"separator","aria-orientation":"horizontal",...n,ref:r})});n4.displayName=vP;var bP="MenuArrow",a4=A.forwardRef((t,r)=>{const{__scopeMenu:s,...n}=t,c=mm(s);return e.jsx(Ry,{...c,...n,ref:r})});a4.displayName=bP;var wP="MenuSub",[rH,i4]=dl(wP),sd="MenuSubTrigger",o4=A.forwardRef((t,r)=>{const s=ul(sd,t.__scopeMenu),n=vu(sd,t.__scopeMenu),c=i4(sd,t.__scopeMenu),o=Fy(sd,t.__scopeMenu),a=A.useRef(null),{pointerGraceTimerRef:d,onPointerGraceIntentChange:l}=o,i={__scopeMenu:t.__scopeMenu},u=A.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return A.useEffect(()=>u,[u]),A.useEffect(()=>{const f=d.current;return()=>{window.clearTimeout(f),l(null)}},[d,l]),e.jsx(Iy,{asChild:!0,...i,children:e.jsx(QN,{id:c.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":c.contentId,"data-state":d4(s.open),...t,ref:oi(r,c.onTriggerChange),onClick:f=>{var h;(h=t.onClick)==null||h.call(t,f),!(t.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),s.open||s.onOpenChange(!0))},onPointerMove:It(t.onPointerMove,Zd(f=>{o.onItemEnter(f),!f.defaultPrevented&&!t.disabled&&!s.open&&!a.current&&(o.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{s.onOpenChange(!0),u()},100))})),onPointerLeave:It(t.onPointerLeave,Zd(f=>{var m,p;u();const h=(m=s.content)==null?void 0:m.getBoundingClientRect();if(h){const x=(p=s.content)==null?void 0:p.dataset.side,g=x==="right",v=g?-5:5,y=h[g?"left":"right"],b=h[g?"right":"left"];o.onPointerGraceIntentChange({area:[{x:f.clientX+v,y:f.clientY},{x:y,y:h.top},{x:b,y:h.top},{x:b,y:h.bottom},{x:y,y:h.bottom}],side:x}),window.clearTimeout(d.current),d.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(f),f.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:It(t.onKeyDown,f=>{var m;const h=o.searchRef.current!=="";t.disabled||h&&f.key===" "||tP[n.dir].includes(f.key)&&(s.onOpenChange(!0),(m=s.content)==null||m.focus(),f.preventDefault())})})})});o4.displayName=sd;var l4="MenuSubContent",c4=A.forwardRef((t,r)=>{const s=WN(na,t.__scopeMenu),{forceMount:n=s.forceMount,...c}=t,o=ul(na,t.__scopeMenu),a=vu(na,t.__scopeMenu),d=i4(l4,t.__scopeMenu),l=A.useRef(null),i=bs(r,l);return e.jsx(Xd.Provider,{scope:t.__scopeMenu,children:e.jsx(Tn,{present:n||o.open,children:e.jsx(Xd.Slot,{scope:t.__scopeMenu,children:e.jsx(Ly,{id:d.contentId,"aria-labelledby":d.triggerId,...c,ref:i,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var f;a.isUsingKeyboardRef.current&&((f=l.current)==null||f.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:It(t.onFocusOutside,u=>{u.target!==d.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:It(t.onEscapeKeyDown,u=>{a.onClose(),u.preventDefault()}),onKeyDown:It(t.onKeyDown,u=>{var m;const f=u.currentTarget.contains(u.target),h=sP[a.dir].includes(u.key);f&&h&&(o.onOpenChange(!1),(m=d.trigger)==null||m.focus(),u.preventDefault())})})})})})});c4.displayName=l4;function d4(t){return t?"open":"closed"}function yf(t){return t==="indeterminate"}function By(t){return yf(t)?"indeterminate":t?"checked":"unchecked"}function jP(t){const r=document.activeElement;for(const s of t)if(s===r||(s.focus(),document.activeElement!==r))return}function _P(t,r){return t.map((s,n)=>t[(r+n)%t.length])}function NP(t,r,s){const c=r.length>1&&Array.from(r).every(i=>i===r[0])?r[0]:r,o=s?t.indexOf(s):-1;let a=_P(t,Math.max(o,0));c.length===1&&(a=a.filter(i=>i!==s));const l=a.find(i=>i.toLowerCase().startsWith(c.toLowerCase()));return l!==s?l:void 0}function SP(t,r){const{x:s,y:n}=t;let c=!1;for(let o=0,a=r.length-1;o<r.length;a=o++){const d=r[o],l=r[a],i=d.x,u=d.y,f=l.x,h=l.y;u>n!=h>n&&s<(f-i)*(n-u)/(h-u)+i&&(c=!c)}return c}function CP(t,r){if(!r)return!1;const s={x:t.clientX,y:t.clientY};return SP(s,r)}function Zd(t){return r=>r.pointerType==="mouse"?t(r):void 0}var kP=HN,EP=Iy,AP=GN,TP=KN,RP=Dy,PP=YN,MP=pm,IP=XN,OP=JN,FP=t4,LP=r4,DP=n4,$P=a4,BP=o4,zP=c4,gm="DropdownMenu",[UP,nH]=nn(gm,[VN]),yn=VN(),[VP,u4]=UP(gm),h4=t=>{const{__scopeDropdownMenu:r,children:s,dir:n,open:c,defaultOpen:o,onOpenChange:a,modal:d=!0}=t,l=yn(r),i=A.useRef(null),[u,f]=$a({prop:c,defaultProp:o??!1,onChange:a,caller:gm});return e.jsx(VP,{scope:r,triggerId:Hr(),triggerRef:i,contentId:Hr(),open:u,onOpenChange:f,onOpenToggle:A.useCallback(()=>f(h=>!h),[f]),modal:d,children:e.jsx(kP,{...l,open:u,onOpenChange:f,dir:n,modal:d,children:s})})};h4.displayName=gm;var f4="DropdownMenuTrigger",m4=A.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,disabled:n=!1,...c}=t,o=u4(f4,s),a=yn(s);return e.jsx(EP,{asChild:!0,...a,children:e.jsx(Dt.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...c,ref:oi(r,o.triggerRef),onPointerDown:It(t.onPointerDown,d=>{!n&&d.button===0&&d.ctrlKey===!1&&(o.onOpenToggle(),o.open||d.preventDefault())}),onKeyDown:It(t.onKeyDown,d=>{n||(["Enter"," "].includes(d.key)&&o.onOpenToggle(),d.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(d.key)&&d.preventDefault())})})})});m4.displayName=f4;var qP="DropdownMenuPortal",p4=t=>{const{__scopeDropdownMenu:r,...s}=t,n=yn(r);return e.jsx(AP,{...n,...s})};p4.displayName=qP;var g4="DropdownMenuContent",x4=A.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...n}=t,c=u4(g4,s),o=yn(s),a=A.useRef(!1);return e.jsx(TP,{id:c.contentId,"aria-labelledby":c.triggerId,...o,...n,ref:r,onCloseAutoFocus:It(t.onCloseAutoFocus,d=>{var l;a.current||(l=c.triggerRef.current)==null||l.focus(),a.current=!1,d.preventDefault()}),onInteractOutside:It(t.onInteractOutside,d=>{const l=d.detail.originalEvent,i=l.button===0&&l.ctrlKey===!0,u=l.button===2||i;(!c.modal||u)&&(a.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});x4.displayName=g4;var HP="DropdownMenuGroup",y4=A.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...n}=t,c=yn(s);return e.jsx(RP,{...c,...n,ref:r})});y4.displayName=HP;var WP="DropdownMenuLabel",v4=A.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...n}=t,c=yn(s);return e.jsx(PP,{...c,...n,ref:r})});v4.displayName=WP;var GP="DropdownMenuItem",b4=A.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...n}=t,c=yn(s);return e.jsx(MP,{...c,...n,ref:r})});b4.displayName=GP;var KP="DropdownMenuCheckboxItem",w4=A.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...n}=t,c=yn(s);return e.jsx(IP,{...c,...n,ref:r})});w4.displayName=KP;var YP="DropdownMenuRadioGroup",QP=A.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...n}=t,c=yn(s);return e.jsx(OP,{...c,...n,ref:r})});QP.displayName=YP;var XP="DropdownMenuRadioItem",j4=A.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...n}=t,c=yn(s);return e.jsx(FP,{...c,...n,ref:r})});j4.displayName=XP;var ZP="DropdownMenuItemIndicator",_4=A.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...n}=t,c=yn(s);return e.jsx(LP,{...c,...n,ref:r})});_4.displayName=ZP;var JP="DropdownMenuSeparator",N4=A.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...n}=t,c=yn(s);return e.jsx(DP,{...c,...n,ref:r})});N4.displayName=JP;var eM="DropdownMenuArrow",tM=A.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...n}=t,c=yn(s);return e.jsx($P,{...c,...n,ref:r})});tM.displayName=eM;var sM="DropdownMenuSubTrigger",S4=A.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...n}=t,c=yn(s);return e.jsx(BP,{...c,...n,ref:r})});S4.displayName=sM;var rM="DropdownMenuSubContent",C4=A.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...n}=t,c=yn(s);return e.jsx(zP,{...c,...n,ref:r,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});C4.displayName=rM;var nM=h4,aM=m4,iM=p4,k4=x4,oM=y4,E4=v4,A4=b4,T4=w4,R4=j4,P4=_4,M4=N4,I4=S4,O4=C4;const Ri=nM,Pi=aM,Op=oM,lM=Lt.forwardRef(({className:t,inset:r,children:s,...n},c)=>e.jsxs(I4,{ref:c,className:Ot("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",r&&"pl-8",t),...n,children:[s,e.jsx(Oa,{className:"ml-auto h-4 w-4"})]}));lM.displayName=I4.displayName;const cM=Lt.forwardRef(({className:t,...r},s)=>e.jsx(O4,{ref:s,className:Ot("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));cM.displayName=O4.displayName;const Xa=Lt.forwardRef(({className:t,sideOffset:r=4,...s},n)=>e.jsx(iM,{children:e.jsx(k4,{ref:n,sideOffset:r,className:Ot("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s})}));Xa.displayName=k4.displayName;const br=Lt.forwardRef(({className:t,inset:r,...s},n)=>e.jsx(A4,{ref:n,className:Ot("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r&&"pl-8",t),...s}));br.displayName=A4.displayName;const dM=Lt.forwardRef(({className:t,children:r,checked:s,...n},c)=>e.jsxs(T4,{ref:c,className:Ot("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:s,...n,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(P4,{children:e.jsx(hu,{className:"h-4 w-4"})})}),r]}));dM.displayName=T4.displayName;const uM=Lt.forwardRef(({className:t,children:r,...s},n)=>e.jsxs(R4,{ref:n,className:Ot("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...s,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(P4,{children:e.jsx(py,{className:"h-2 w-2 fill-current"})})}),r]}));uM.displayName=R4.displayName;const F4=Lt.forwardRef(({className:t,inset:r,...s},n)=>e.jsx(E4,{ref:n,className:Ot("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",t),...s}));F4.displayName=E4.displayName;const A0=Lt.forwardRef(({className:t,...r},s)=>e.jsx(M4,{ref:s,className:Ot("-mx-1 my-1 h-px bg-muted",t),...r}));A0.displayName=M4.displayName;const L4=A.createContext({theme:"system",setTheme:()=>null});function hM({children:t,defaultTheme:r="system",storageKey:s="vite-ui-theme",...n}){const[c,o]=A.useState(()=>localStorage.getItem(s)||r);A.useEffect(()=>{const d=window.document.documentElement;if(d.classList.remove("light","dark"),c==="system"){const l=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";d.classList.add(l);return}d.classList.add(c)},[c]);const a={theme:c,setTheme:d=>{localStorage.setItem(s,d),o(d)}};return e.jsx(L4.Provider,{...n,value:a,children:t})}const D4=()=>{const t=A.useContext(L4);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t};var $4={exports:{}},B4={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dc=A;function fM(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var mM=typeof Object.is=="function"?Object.is:fM,pM=dc.useState,gM=dc.useEffect,xM=dc.useLayoutEffect,yM=dc.useDebugValue;function vM(t,r){var s=r(),n=pM({inst:{value:s,getSnapshot:r}}),c=n[0].inst,o=n[1];return xM(function(){c.value=s,c.getSnapshot=r,Fp(c)&&o({inst:c})},[t,s,r]),gM(function(){return Fp(c)&&o({inst:c}),t(function(){Fp(c)&&o({inst:c})})},[t]),yM(s),s}function Fp(t){var r=t.getSnapshot;t=t.value;try{var s=r();return!mM(t,s)}catch{return!0}}function bM(t,r){return r()}var wM=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?bM:vM;B4.useSyncExternalStore=dc.useSyncExternalStore!==void 0?dc.useSyncExternalStore:wM;$4.exports=B4;var jM=$4.exports;function _M(){return jM.useSyncExternalStore(NM,()=>!0,()=>!1)}function NM(){return()=>{}}var zy="Avatar",[SM,aH]=nn(zy),[CM,z4]=SM(zy),U4=A.forwardRef((t,r)=>{const{__scopeAvatar:s,...n}=t,[c,o]=A.useState("idle");return e.jsx(CM,{scope:s,imageLoadingStatus:c,onImageLoadingStatusChange:o,children:e.jsx(Dt.span,{...n,ref:r})})});U4.displayName=zy;var V4="AvatarImage",q4=A.forwardRef((t,r)=>{const{__scopeAvatar:s,src:n,onLoadingStatusChange:c=()=>{},...o}=t,a=z4(V4,s),d=kM(n,o),l=fn(i=>{c(i),a.onImageLoadingStatusChange(i)});return _r(()=>{d!=="idle"&&l(d)},[d,l]),d==="loaded"?e.jsx(Dt.img,{...o,ref:r,src:n}):null});q4.displayName=V4;var H4="AvatarFallback",W4=A.forwardRef((t,r)=>{const{__scopeAvatar:s,delayMs:n,...c}=t,o=z4(H4,s),[a,d]=A.useState(n===void 0);return A.useEffect(()=>{if(n!==void 0){const l=window.setTimeout(()=>d(!0),n);return()=>window.clearTimeout(l)}},[n]),a&&o.imageLoadingStatus!=="loaded"?e.jsx(Dt.span,{...c,ref:r}):null});W4.displayName=H4;function B1(t,r){return t?r?(t.src!==r&&(t.src=r),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function kM(t,{referrerPolicy:r,crossOrigin:s}){const n=_M(),c=A.useRef(null),o=(()=>n?(c.current||(c.current=new window.Image),c.current):null)(),[a,d]=A.useState(()=>B1(o,t));return _r(()=>{d(B1(o,t))},[o,t]),_r(()=>{const l=f=>()=>{d(f)};if(!o)return;const i=l("loaded"),u=l("error");return o.addEventListener("load",i),o.addEventListener("error",u),r&&(o.referrerPolicy=r),typeof s=="string"&&(o.crossOrigin=s),()=>{o.removeEventListener("load",i),o.removeEventListener("error",u)}},[o,s,r]),a}var G4=U4,K4=q4,Y4=W4;const Jd=Lt.forwardRef(({className:t,...r},s)=>e.jsx(G4,{ref:s,className:Ot("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...r}));Jd.displayName=G4.displayName;const eu=Lt.forwardRef(({className:t,...r},s)=>e.jsx(K4,{ref:s,className:Ot("aspect-square h-full w-full",t),...r}));eu.displayName=K4.displayName;const tu=Lt.forwardRef(({className:t,...r},s)=>e.jsx(Y4,{ref:s,className:Ot("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...r}));tu.displayName=Y4.displayName;const EM=1;let Lp=0;function AM(){return Lp=(Lp+1)%Number.MAX_VALUE,Lp.toString()}const ln={state:{toasts:[]},listeners:[],getState:()=>ln.state,setState:t=>{typeof t=="function"?ln.state=t(ln.state):ln.state={...ln.state,...t},ln.listeners.forEach(r=>r(ln.state))},subscribe:t=>(ln.listeners.push(t),()=>{ln.listeners=ln.listeners.filter(r=>r!==t)})},fs=({...t})=>{const r=AM(),s=c=>ln.setState(o=>({...o,toasts:o.toasts.map(a=>a.id===r?{...a,...c}:a)})),n=()=>ln.setState(c=>({...c,toasts:c.toasts.filter(o=>o.id!==r)}));return ln.setState(c=>({...c,toasts:[{...t,id:r,dismiss:n},...c.toasts].slice(0,EM)})),{id:r,dismiss:n,update:s}};function Js(){const[t,r]=A.useState(ln.getState());return A.useEffect(()=>ln.subscribe(n=>{r(n)}),[]),A.useEffect(()=>{const s=[];return t.toasts.forEach(n=>{if(n.duration===1/0)return;const c=setTimeout(()=>{n.dismiss()},n.duration||5e3);s.push(c)}),()=>{s.forEach(n=>clearTimeout(n))}},[t.toasts]),{toast:fs,toasts:t.toasts}}const TM={}.VITE_API_URL||"http://localhost:5000/api";class RM{constructor(){this.baseURL=TM}getAuthToken(){return localStorage.getItem("lmsToken")}setAuthToken(r){localStorage.setItem("lmsToken",r)}removeAuthToken(){localStorage.removeItem("lmsToken")}getCSRFToken(){const r=document.cookie.split(";");for(let s of r){const[n,c]=s.trim().split("=");if(n==="XSRF-TOKEN")return c}return localStorage.getItem("csrfToken")}setCSRFToken(r){localStorage.setItem("csrfToken",r)}getHeaders(){const r={"Content-Type":"application/json"},s=this.getAuthToken();s&&(r.Authorization=`Bearer ${s}`);const n=this.getCSRFToken();return n&&(r["X-CSRF-Token"]=n),r}async retryRequest(r,s=3,n=1e3){var o,a,d,l,i,u,f,h,m;let c;for(let p=0;p<s;p++)try{return await r()}catch(x){if(c=x,(o=x.message)!=null&&o.includes("Authentication")||(a=x.message)!=null&&a.includes("Unauthorized")||(d=x.message)!=null&&d.includes("not found")||(l=x.message)!=null&&l.includes("expired")||(i=x.message)!=null&&i.includes("exceeded")||(u=x.message)!=null&&u.includes("permission")||x.name==="AbortError"||x instanceof DOMException&&x.name==="AbortError"||(f=x.message)!=null&&f.toLowerCase().includes("timeout")||(h=x.message)!=null&&h.toLowerCase().includes("aborted")||(m=x.message)!=null&&m.toLowerCase().includes("cancelled")||x.message&&!x.message.includes("network")&&!x.message.includes("fetch"))throw x;p<s-1&&await new Promise(g=>setTimeout(g,n*Math.pow(2,p)))}throw c}async request(r,s={},n={}){const{maxRetries:c=3,retryDelay:o=1e3,timeout:a=3e4}=n,d=`${this.baseURL}${r}`,l=new AbortController;let i=null;const u=()=>{i&&(clearTimeout(i),i=null)};return i=setTimeout(()=>{l.signal.aborted||l.abort("Request timeout - server took too long to respond")},a),this.retryRequest(async()=>{var h,m,p,x,g;if(l.signal.aborted)throw new Error("Request was cancelled");const f={headers:this.getHeaders(),...s,signal:l.signal};try{const v=await fetch(d,f);if(u(),l.signal.aborted)throw new DOMException("Request was cancelled","AbortError");const y=await v.json();if(!v.ok){if(v.status===401)throw this.removeAuthToken(),localStorage.removeItem("lmsUser"),window.location.href="/login",new Error("Authentication failed");if(v.status===403&&((h=y.message)!=null&&h.includes("CSRF token")||(m=y.message)!=null&&m.includes("csrf")))try{await this.fetchCSRFToken();const b={...f,headers:this.getHeaders()},C=await fetch(d,b),T=await C.json();if(!C.ok)throw new Error(T.message||"Request failed");return T}catch(b){throw console.error("Failed to refresh CSRF token:",b),new Error(y.message||"CSRF token error")}if(v.status===403&&y.requiresEmailVerification)return{success:!1,requiresEmailVerification:!0,message:y.message||"Email verification required"};if(v.status===429){const b=v.headers.get("Retry-After")||v.headers.get("retry-after");return{success:!1,rateLimited:!0,message:y.message||"Too many requests, please try again later",retryAfter:b?parseInt(b):null}}throw new Error(y.message||"Request failed")}return y}catch(v){throw u(),v.name==="AbortError"||v instanceof DOMException&&v.name==="AbortError"||((p=v.message)==null?void 0:p.toLowerCase().includes("aborted"))||((x=v.message)==null?void 0:x.toLowerCase().includes("signal"))||((g=v.message)==null?void 0:g.toLowerCase().includes("cancelled"))||l.signal.aborted?new Error("Request timeout - the server took too long to respond. Please try again."):v}},c,o)}async get(r){return this.request(r,{method:"GET"})}async post(r,s){return this.request(r,{method:"POST",body:JSON.stringify(s)})}async put(r,s){return this.request(r,{method:"PUT",body:JSON.stringify(s)})}async delete(r){return this.request(r,{method:"DELETE"})}async patch(r,s){return this.request(r,{method:"PATCH",body:JSON.stringify(s)})}async getUsers(r={}){const s=new URLSearchParams(r).toString(),n=s?`/users?${s}`:"/users";return this.get(n)}async getUserById(r){return this.get(`/users/${r}`)}async createUser(r){return this.post("/users",r)}async updateUser(r,s){return this.put(`/users/${r}`,s)}async deleteUser(r){return this.delete(`/users/${r}`)}async toggleUserStatus(r){return this.patch(`/users/${r}/toggle-status`)}async downloadUserTemplate(r){const s=`${this.baseURL}/users/template/${r}`,n=this.getHeaders();delete n["Content-Type"];const c=await fetch(s,{headers:n});if(!c.ok)throw new Error("Failed to download template");return await c.blob()}async bulkUploadUsers(r){const s=`${this.baseURL}/users/bulk-upload`,n=this.getHeaders();delete n["Content-Type"];const c=new FormData;c.append("file",r);const o=await fetch(s,{method:"POST",headers:n,body:c}),a=await o.json();if(!o.ok)throw new Error(a.message||"Upload failed");return a}async login(r){const s=await this.post("/auth/login",r);return s.success&&(this.setAuthToken(s.data.token),localStorage.setItem("lmsUser",JSON.stringify(s.data.user)),await this.fetchCSRFToken()),s}async fetchCSRFToken(){try{const r=await this.get("/csrf-token");r.success&&r.csrfToken&&this.setCSRFToken(r.csrfToken)}catch(r){console.warn("Failed to fetch CSRF token:",r)}}async register(r){const s=await this.post("/auth/register",r);return s.success&&(this.setAuthToken(s.data.token),localStorage.setItem("lmsUser",JSON.stringify(s.data.user)),await this.fetchCSRFToken()),s}async logout(){try{await this.post("/auth/logout")}catch{}finally{this.removeAuthToken(),localStorage.removeItem("lmsUser")}}async getProfile(){return this.get("/auth/profile")}async updateProfile(r){return this.put("/auth/profile",r)}async changePassword(r){return this.put("/auth/change-password",r)}async resendVerificationEmail(r){return this.post("/auth/resend-verification",{email:r})}async verifyEmail(r){return this.post("/auth/verify-email",{token:r})}async getSuperAdminDashboardStats(){return this.get("/super-admin/dashboard/stats")}async getSuperAdminAnalytics(){return this.get("/super-admin/analytics")}async getAnalyticsData(r={}){const s=new URLSearchParams(r).toString(),n=s?`/analytics/data?${s}`:"/analytics/data";return this.get(n)}async getCourseAnalyticsData(r={}){const s=new URLSearchParams(r).toString(),n=s?`/analytics/course-data?${s}`:"/analytics/course-data";return this.get(n)}async getCollegesForAnalytics(){return this.get("/analytics/colleges")}async getDepartmentsForAnalytics(r){const s={collegeId:r},n=new URLSearchParams(s).toString(),c=n?`/analytics/departments?${n}`:"/analytics/departments";return this.get(c)}async getStudentsForAnalytics(r={}){const s=new URLSearchParams(r).toString(),n=s?`/analytics/students?${s}`:"/analytics/students";return this.get(n)}async getStudents(r={}){const s=new URLSearchParams(r).toString(),n=s?`/users/students?${s}`:"/users/students";return this.get(n)}async getFacultyForAnalytics(r={}){const s=new URLSearchParams(r).toString(),n=s?`/analytics/faculty?${s}`:"/analytics/faculty";return this.get(n)}async getAssessmentTypes(){return this.get("/analytics/assessment-types")}async getCourseCategories(){return this.get("/analytics/course-categories")}async exportAnalyticsData(r={},s="excel"){return this.post("/analytics/export",{...r,format:s})}async saveAnalyticsView(r){return this.post("/analytics/views",r)}async getSavedAnalyticsViews(){return this.get("/analytics/views")}async getSavedAnalyticsView(r){return this.get(`/analytics/views/${r}`)}async addChartAnnotation(r){return this.post("/analytics/annotations",r)}async getChartAnnotations(r={}){const s=new URLSearchParams(r).toString(),n=s?`/analytics/annotations?${s}`:"/analytics/annotations";return this.get(n)}async getAssessmentDetails(r,s={}){const n=new URLSearchParams(s).toString(),c=n?`/analytics/assessment/${r}?${n}`:`/analytics/assessment/${r}`;return this.get(c)}async getAssessmentSubmissions(r,s={}){const n=new URLSearchParams(s).toString(),c=n?`/analytics/assessment/${r}/submissions?${n}`:`/analytics/assessment/${r}/submissions`;return this.get(c)}async getCollegeAssessments(r,s={}){const n=new URLSearchParams(s).toString(),c=n?`/analytics/college/${r}/assessments?${n}`:`/analytics/college/${r}/assessments`;return this.get(c)}async getAssessmentCollegeAnalysis(r,s={}){const n=new URLSearchParams(s).toString(),c=n?`/analytics/assessment/${r}/college-analysis?${n}`:`/analytics/assessment/${r}/college-analysis`;return this.get(c)}async getSuperAdminColleges(r={}){const s=new URLSearchParams(r).toString(),n=s?`/super-admin/colleges?${s}`:"/super-admin/colleges";return this.get(n)}async getSuperAdminCollegeLocations(){return this.get("/super-admin/colleges/locations")}async getSuperAdminCollegeById(r){return this.get(`/super-admin/colleges/${r}`)}async createSuperAdminCollege(r){return this.post("/super-admin/colleges",r)}async updateSuperAdminCollege(r,s){return this.put(`/super-admin/colleges/${r}`,s)}async deleteSuperAdminCollege(r,s={}){const n=new URLSearchParams(s).toString(),c=n?`/super-admin/colleges/${r}?${n}`:`/super-admin/colleges/${r}`;return this.delete(c)}async getSuperAdminCollegeStats(r){return this.get(`/super-admin/colleges/${r}/stats`)}async getSuperAdminCollegeDetails(r){return this.get(`/super-admin/colleges/${r}/details`)}async getCollegeDepartments(r){return this.get(`/super-admin/colleges/${r}/departments`)}async getCollegeBatches(r){return this.get(`/super-admin/colleges/${r}/batches`)}async getDepartmentsForColleges(r){return this.post("/super-admin/colleges/departments/batch",{collegeIds:r})}async getBatchesForColleges(r){return this.post("/super-admin/colleges/batches/batch",{collegeIds:r})}async getCommonDepartments(){return this.get("/super-admin/colleges/departments/common")}async getBatches(r={}){const s=new URLSearchParams(r).toString(),n=s?`/batches?${s}`:"/batches";return this.get(n)}async createBatch(r){return this.post("/batches",r)}async updateBatch(r,s){return this.put(`/batches/${r}`,s)}async deleteBatch(r){return this.delete(`/batches/${r}`)}async getSuperAdminUsers(r={}){const s=new URLSearchParams(r).toString(),n=s?`/super-admin/users?${s}`:"/super-admin/users";return this.get(n)}async getSuperAdminUserById(r){return this.get(`/super-admin/users/${r}`)}async createSuperAdminUser(r){return this.post("/super-admin/users",r)}async updateSuperAdminUser(r,s){return this.put(`/super-admin/users/${r}`,s)}async deleteSuperAdminUser(r){return this.delete(`/super-admin/users/${r}`)}async toggleSuperAdminUserStatus(r){return this.request(`/super-admin/users/${r}/toggle-status`,{method:"PATCH"})}async downloadStudentTemplate(){const r=`${this.baseURL}/super-admin/users/template/student`,s=this.getHeaders();delete s["Content-Type"];const n=await fetch(r,{headers:s});if(!n.ok)throw new Error("Failed to download template");return await n.blob()}async uploadStudentsExcel(r){const s=`${this.baseURL}/super-admin/users/bulk-upload`,n=this.getHeaders();delete n["Content-Type"];const c=new FormData;c.append("file",r);const o=await fetch(s,{method:"POST",headers:n,body:c}),a=await o.json();if(!o.ok)throw new Error(a.message||"Upload failed");return a}async getAssessmentTemplates(r={}){const s=new URLSearchParams(r).toString(),n=s?`/assessments/templates?${s}`:"/assessments/templates";return this.get(n)}async getAssessmentTemplateById(r){return this.get(`/assessments/templates/${r}`)}async createAssessmentTemplate(r){return this.post("/assessments/templates",r)}async updateAssessmentTemplate(r,s){return this.put(`/assessments/templates/${r}`,s)}async deleteAssessmentTemplate(r){return this.delete(`/assessments/templates/${r}`)}async createAssessmentSection(r,s){return this.post(`/assessments/templates/${r}/sections`,s)}async updateAssessmentSection(r,s,n){return this.put(`/assessments/templates/${r}/sections/${s}`,n)}async deleteAssessmentSection(r,s){return this.delete(`/assessments/templates/${r}/sections/${s}`)}async addQuestionToAssessment(r,s){return this.post(`/assessments/templates/${r}/questions`,s)}async removeQuestionFromAssessment(r,s){return this.delete(`/assessments/templates/${r}/questions/${s}`)}async reorderAssessmentQuestions(r,s){return this.put(`/assessments/templates/${r}/questions/reorder`,{question_orders:s})}async createAssessmentAssignment(r,s){return this.post(`/assessments/templates/${r}/assignments`,s)}async getAssessmentAssignments(r){return this.get(`/assessments/templates/${r}/assignments`)}async deleteAssessmentAssignment(r,s){return this.delete(`/assessments/templates/${r}/assignments/${s}`)}async sendAssessmentNotifications(r){return this.post("/assessments/notifications/send",r)}async sendAssessmentReminder(r){return this.post(`/assessments/notifications/reminder/${r}`)}async sendAssessmentNotification(r,s,n){return this.post("/assessments/notifications/send",{assessment_id:r,student_id:s,...n})}async getQuestionsForSelection(r={}){const s=new URLSearchParams(r).toString(),n=s?`/assessments/questions/selection?${s}`:"/assessments/questions/selection";return this.get(n)}async calculateAssessmentPoints(r){return this.get(`/assessments/templates/${r}/points`)}async getAssessmentInstances(r={}){const s=Date.now(),n={...r,_t:s},c=new URLSearchParams(n).toString(),o=c?`/assessments/instances?${c}`:"/assessments/instances";return this.get(o)}async createAssessmentInstance(r){return this.post("/assessments/instances",r)}async getAssessmentAttemptInfo(r){return this.get(`/assessments/${r}/attempt-info`)}async getAssessmentAttemptsHistory(r){return this.get(`/assessments/${r}/attempts-history`)}async startAssessmentAttempt(r){return this.post("/assessments/attempts/start",r)}async submitAssessmentAttempt(r){return this.post("/assessments/attempts/submit",r)}async getAssessmentAttemptResults(r){return this.get(`/assessments/attempts/${r}/results`)}async getAssessmentAnalytics(r){return this.get(`/assessments/templates/${r}/analytics`)}async getQuestionCategories(r={}){const s=new URLSearchParams(r).toString(),n=s?`/question-bank/categories?${s}`:"/question-bank/categories";return this.get(n)}async createQuestionCategory(r){return this.post("/question-bank/categories",r)}async updateQuestionCategory(r,s){return this.put(`/question-bank/categories/${r}`,s)}async deleteQuestionCategory(r){return this.delete(`/question-bank/categories/${r}`)}async getQuestionTags(){return this.get("/question-bank/tags")}async createQuestionTag(r){return this.post("/question-bank/tags",r)}async getQuestions(r={}){const s=new URLSearchParams(r).toString(),n=s?`/question-bank/questions?${s}`:"/question-bank/questions";return this.get(n)}async getQuestionById(r){return this.get(`/question-bank/questions/${r}`)}async createQuestion(r){return this.post("/question-bank/questions",r)}async updateQuestion(r,s){return this.put(`/question-bank/questions/${r}`,s)}async deleteQuestion(r){return this.delete(`/question-bank/questions/${r}`)}async downloadQuestionTemplate(r){const s=`${this.baseURL}/question-bank/questions/template/${r}`,n=this.getHeaders(),c=await fetch(s,{method:"GET",headers:n});if(!c.ok){const l=await c.json();throw new Error(l.message||"Failed to download template")}const o=await c.blob(),a=window.URL.createObjectURL(o),d=document.createElement("a");return d.href=a,d.download=`question_template_${r}.xlsx`,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(a),{success:!0}}async previewBulkUploadQuestions(r,s){const n=`${this.baseURL}/question-bank/questions/bulk-upload/preview`,c=this.getHeaders();delete c["Content-Type"];const o=new FormData;o.append("file",r),o.append("question_type",s);const a=await fetch(n,{method:"POST",headers:c,body:o}),d=await a.json();if(!a.ok)throw new Error(d.message||"Failed to preview bulk upload");return d}async bulkUploadQuestions(r,s){const n=`${this.baseURL}/question-bank/questions/bulk-upload`,c=this.getHeaders();delete c["Content-Type"];const o=new FormData;o.append("file",r),o.append("question_type",s);const a=await fetch(n,{method:"POST",headers:c,body:o}),d=await a.json();if(!a.ok)throw new Error(d.message||"Bulk upload failed");return d}async uploadQuestionAttachment(r,s){const n=`${this.baseURL}/question-bank/questions/${r}/attachments`,c=this.getHeaders();delete c["Content-Type"];const o=new FormData;o.append("file",s);const a=await fetch(n,{method:"POST",headers:c,body:o}),d=await a.json();if(!a.ok)throw new Error(d.message||"Upload failed");return d}async deleteQuestionAttachment(r){return this.delete(`/question-bank/attachments/${r}`)}async getQuestionAnalytics(r){return this.get(`/question-bank/questions/${r}/analytics`)}async executeCode(r){return this.post("/coding/execute",r)}async runTestCases(r){return this.post("/coding/test-cases",r)}async submitCode(r){return this.post("/coding/submit",r)}async getSupportedLanguages(){return this.get("/coding/languages")}async getLanguageTemplates(){return this.get("/coding/templates")}async verifyCodingQuestion(r){return this.post("/coding/verify",r)}async getCodingHealthCheck(){return this.get("/coding/health")}async getSubmissionStatus(r){return this.get(`/coding/submission/${r}`)}async getAssessmentQuestionsForAdmin(r){return this.get(`/assessments/${r}/questions/admin`)}async addQuestionToAssessment(r,s,n,c,o,a,d){return this.post(`/assessments/templates/${r}/questions`,{question_id:s,section_id:n,question_order:c,points:o,time_limit_seconds:a,is_required:d})}async assignAssessmentToStudents(r,s){return this.post(`/assessments/${r}/assign`,{student_ids:s})}async sendAssessmentReminders(r){return this.post("/assessments/reminders",r)}async getAssessmentSubmission(r,s){return this.get(`/assessments/${r}/submissions/${s}`)}async saveAssessmentProgress(r,s){return this.post(`/assessments/${r}/save-progress`,s)}async submitAssessment(r,s){return this.post(`/assessments/${r}/submit`,s)}async getAssessmentResults(r,s){return this.get(`/assessments/${r}/results/${s}`)}async getStudentAssessments(r,s={}){const n=new URLSearchParams(s).toString();return this.get(`/student/${r}/assessments?${n}`)}async debugAssessmentData(r){return this.get(`/assessments/debug/${r}`)}async debugUpdateAssignmentDates(r,s){return this.post(`/assessments/debug/${r}/update-dates`,s)}async getColleges(){return this.get("/colleges")}async getDepartments(){return this.get("/colleges/departments/common")}async getDepartmentsByCollege(r){return this.get(`/colleges/${r}/departments`)}async getCodingPlatforms(){return this.request("/coding-profiles/platforms",{method:"GET"},{timeout:6e4,maxRetries:2})}async getAllStudentsCodingProfiles(r={}){const s=new URLSearchParams(r).toString();return this.request(`/coding-profiles/students${s?`?${s}`:""}`,{method:"GET"},{timeout:6e4,maxRetries:2})}async getStudentCodingProfiles(){return this.get("/coding-profiles/my-profiles")}async addCodingProfile(r,s){return this.post("/coding-profiles/profiles",{student_id:r,...s})}async updateCodingProfile(r,s){return this.put(`/coding-profiles/profiles/${r}`,s)}async updateStudentCodingProfile(r,s,n){return this.put(`/coding-profiles/student/${r}/profiles/${s}`,n)}async syncCodingProfile(r){return this.post(`/coding-profiles/profiles/${r}/sync`)}async syncAllProfiles(){return this.post("/coding-profiles/sync-all")}async deleteCodingProfile(r){return this.delete(`/coding-profiles/profiles/${r}`)}async deleteAllStudentProfiles(r){return this.delete(`/coding-profiles/student/${r}`)}async fetchPlatformStatistics(r){return this.get(`/coding-profiles/student/${r}/statistics`)}async getStudentPlatformStatistics(){return this.get("/coding-profiles/my-statistics")}async getStudentCachedPlatformStatistics(){return this.get("/coding-profiles/my-statistics/cached")}async getCachedPlatformStatistics(r){return this.get(`/coding-profiles/student/${r}/statistics/cached`)}async fetchBatchPlatformStatistics(r,s=!1){return this.request("/coding-profiles/students/batch-statistics",{method:"POST",body:JSON.stringify({studentIds:r,forceRefresh:s})},{timeout:18e4,maxRetries:2})}async getCachedBatchPlatformStatistics(r){return this.get(`/coding-profiles/students/batch-statistics/${r}/cached`)}async getCodingProfileAnalytics(){return this.get("/coding-profiles/analytics")}async downloadBulkUploadTemplate(){const r=`${this.baseURL}/bulk-upload/template`,s=this.getHeaders();delete s["Content-Type"];const n=await fetch(r,{headers:s});if(!n.ok)throw new Error("Failed to download template");return await n.blob()}async bulkUploadProfiles(r){const s=`${this.baseURL}/bulk-upload/upload`,n=this.getHeaders();delete n["Content-Type"];const c=new FormData;c.append("file",r);const o=await fetch(s,{method:"POST",headers:n,body:c}),a=await o.json();if(!o.ok)throw new Error(a.message||"Upload failed");return a}async getBulkUploadStats(){return this.get("/bulk-upload/stats")}async syncBulkProfiles(){return this.post("/bulk-upload/sync",{autoSync:!0})}async getAttendanceSessions(r={}){const s=new URLSearchParams(r).toString();return this.get(`/enhanced/attendance/sessions${s?`?${s}`:""}`)}async createAttendanceSession(r){return this.post("/enhanced/attendance/sessions",r)}async markAttendance(r){return this.post("/enhanced/attendance/mark",r)}async getAttendanceRecords(r){return this.get(`/enhanced/attendance/sessions/${r}/records`)}async getCourses(r={}){const s=new URLSearchParams(r).toString();return this.get(`/enhanced/courses${s?`?${s}`:""}`)}async createCourse(r){return this.post("/enhanced/courses",r)}async getClasses(r={}){const s=new URLSearchParams(r).toString();return this.get(`/enhanced/classes${s?`?${s}`:""}`)}async getClassSchedules(r={}){const s=new URLSearchParams(r).toString();return this.get(`/enhanced/schedules${s?`?${s}`:""}`)}async getFacultyStatus(r={}){const s=new URLSearchParams(r).toString();return this.get(`/enhanced/faculty/status${s?`?${s}`:""}`)}async updateFacultyStatus(r){return this.put("/enhanced/faculty/status",r)}async getFacultyAvailability(r={}){const s=new URLSearchParams(r).toString();return this.get(`/enhanced/faculty/availability${s?`?${s}`:""}`)}async getFacultyWorkload(r={}){const s=new URLSearchParams(r).toString();return this.get(`/enhanced/faculty/workload${s?`?${s}`:""}`)}async getRooms(r={}){const s=new URLSearchParams(r).toString();return this.get(`/enhanced/rooms${s?`?${s}`:""}`)}async getDepartments(r={}){const s=new URLSearchParams(r).toString();return this.get(`/enhanced/departments${s?`?${s}`:""}`)}async getNotifications(r={}){const s=new URLSearchParams(r).toString(),n=s?`/notifications?${s}`:"/notifications";return this.get(n)}async markNotificationAsRead(r){return this.patch(`/notifications/${r}/read`)}async markAllNotificationsAsRead(){return this.patch("/notifications/read-all")}async getProjects(r={}){const s=new URLSearchParams(r).toString();return this.get(`/v1/project-management/projects${s?`?${s}`:""}`)}async getProjectById(r){return this.get(`/v1/project-management/projects/${r}`)}async createProject(r){return this.post("/v1/project-management/projects",r)}async updateProject(r,s){return this.put(`/v1/project-management/projects/${r}`,s)}async deleteProject(r){return this.delete(`/v1/project-management/projects/${r}`)}async updateProjectStatus(r,s){return this.patch(`/v1/project-management/projects/${r}/status`,{status:s})}async addDepartmentsToProject(r,s){return this.post(`/v1/project-management/projects/${r}/departments`,{department_ids:s})}async addBatchesToProject(r,s){return this.post(`/v1/project-management/projects/${r}/batches`,{batch_ids:s})}async allocateFaculty(r,s){return this.post(`/v1/project-management/projects/${r}/faculty`,s)}async getProjectFaculty(r){return this.get(`/v1/project-management/projects/${r}/faculty`)}async replaceFaculty(r,s){return this.post(`/v1/project-management/faculty-allocations/${r}/replace`,s)}async getRecommendedTrainers(r){return this.get(`/v1/project-management/faculty/recommendations?project_id=${r}`)}async getFacultyProfile(r){return this.get(`/v1/project-management/faculty/${r}/profile`)}async updateFacultyProfile(r,s){return this.put(`/v1/project-management/faculty/${r}/profile`,s)}async checkFacultyAvailability(r,s,n,c=null){const o=new URLSearchParams({faculty_id:r,start_time:s,end_time:n});return c&&o.append("exclude_session_id",c),this.get(`/v1/project-management/faculty/${r}/availability?${o}`)}async createSession(r){return this.post("/v1/project-management/sessions",r)}async getSessions(r={}){const s=new URLSearchParams(r).toString();return this.get(`/v1/project-management/sessions${s?`?${s}`:""}`)}async autoGenerateSchedule(r){return this.post("/v1/project-management/sessions/auto-generate",{project_id:r})}async checkConflicts(r){const s=new URLSearchParams(r).toString();return this.get(`/v1/project-management/sessions/conflicts?${s}`)}async exportSessionsToExcel(r={}){const s=new URLSearchParams(r).toString();return this.get(`/v1/project-management/sessions/export?${s}`,{responseType:"blob"})}async markAttendance(r,s){return this.post("/v1/project-management/attendance",{session_id:r,attendance_data:s})}async getSessionAttendance(r){return this.get(`/v1/project-management/attendance/session/${r}`)}async bulkUploadAttendance(r,s){const n=new FormData;return n.append("session_id",r),n.append("file",s),this.post("/v1/project-management/attendance/bulk-upload",n,{"Content-Type":"multipart/form-data"})}async getAttendanceReports(r={}){const s=new URLSearchParams(r).toString();return this.get(`/v1/project-management/attendance/reports${s?`?${s}`:""}`)}async getStudentAttendanceSummary(r,s={}){const n=new URLSearchParams(s).toString();return this.get(`/v1/project-management/attendance/student/${r}/summary${n?`?${n}`:""}`)}async submitFeedback(r){return this.post("/v1/project-management/feedback",r)}async getFeedback(r={}){const s=new URLSearchParams(r).toString();return this.get(`/v1/project-management/feedback${s?`?${s}`:""}`)}async getFeedbackAnalytics(r={}){const s=new URLSearchParams(r).toString();return this.get(`/v1/project-management/feedback/analytics${s?`?${s}`:""}`)}async addTopicsCovered(r,s){return this.post("/v1/project-management/topics-covered",{session_id:r,topics:s})}async getSessionTopics(r){return this.get(`/v1/project-management/topics-covered/session/${r}`)}async getProjectTopics(r){return this.get(`/v1/project-management/topics-covered/project/${r}`)}async updateTopicsCovered(r,s){return this.put(`/v1/project-management/topics-covered/${r}`,s)}async generateInvoice(r){return this.post("/v1/project-management/invoices/generate",r)}async getInvoices(r={}){const s=new URLSearchParams(r).toString();return this.get(`/v1/project-management/invoices${s?`?${s}`:""}`)}async getFacultyInvoices(r){return this.get(`/v1/project-management/invoices/faculty/${r}`)}async getCalendarEvents(r={}){const s=new URLSearchParams(r).toString();return this.get(`/v1/project-management/calendar${s?`?${s}`:""}`)}async getDayView(r){return this.get(`/v1/project-management/calendar/day/${r}`)}async getWeekView(r){return this.get(`/v1/project-management/calendar/week/${r}`)}async getMonthView(r){return this.get(`/v1/project-management/calendar/month/${r}`)}async allocateAdmin(r,s){return this.post("/v1/project-management/admin-allocations",{project_id:r,...s})}async getProjectAdmins(r){return this.get(`/v1/project-management/projects/${r}/admins`)}async removeAdminAllocation(r){return this.delete(`/v1/project-management/admin-allocations/${r}`)}async getAdminWorkload(r){return this.get(`/v1/project-management/admin/workload?admin_id=${r}`)}async getProjectProgressReport(r={}){const s=new URLSearchParams(r).toString();return this.get(`/v1/project-management/reports/project-progress${s?`?${s}`:""}`)}async getTrainerUtilizationReport(r={}){const s=new URLSearchParams(r).toString();return this.get(`/v1/project-management/reports/trainer-utilization${s?`?${s}`:""}`)}async getCollegeAttendanceReport(r={}){const s=new URLSearchParams(r).toString();return this.get(`/v1/project-management/reports/college-attendance${s?`?${s}`:""}`)}async getInvoiceSummaryReport(r={}){const s=new URLSearchParams(r).toString();return this.get(`/v1/project-management/reports/invoice-summary${s?`?${s}`:""}`)}async retakeAssessment(r){return this.post(`/student-assessments/${r}/retake`)}async startAssessment(r,s={}){return this.post(`/student-assessments/${r}/start`,s)}async getStudentAssessment(r){return this.get(`/student-assessments/${r}`)}async getAssessmentQuestions(r){return this.get(`/student-assessments/${r}/questions`)}async saveAnswer(r,s){return this.post(`/student-assessments/${r}/answers`,s)}async submitAssessment(r,s={}){return this.post(`/student-assessments/${r}/submit`,s)}async getAssessmentResults(r){return this.get(`/student-assessments/${r}/results`)}async runCodingTests(r){return this.post("/coding/test-cases",r)}async logProctoringViolation(r,s){return this.post("/proctoring/violations",{submissionId:r,...s})}async verifyAssessmentAccess(r,s){return this.post("/student-assessments/verify-access",{assessmentId:r,...s})}async validateAssessmentAttempt(r){return this.post("/student-assessments/validate-attempt",{assessmentId:r})}}const Pe=new RM,Q4=A.createContext(null),PM=({children:t})=>{const[r,s]=A.useState(null),[n,c]=A.useState(!0),{toast:o}=Js();A.useEffect(()=>{(async()=>{const h=localStorage.getItem("lmsUser"),m=localStorage.getItem("lmsToken");if(h&&m)try{const p=JSON.parse(h);s(p);try{await Pe.getProfile(),await Pe.fetchCSRFToken()}catch{localStorage.removeItem("lmsUser"),localStorage.removeItem("lmsToken"),s(null)}}catch{localStorage.removeItem("lmsUser"),localStorage.removeItem("lmsToken")}c(!1)})()},[]);const a=async f=>{try{const h=await Pe.login(f);if(h.success)return s(h.data.user),o({title:"Login Successful",description:`Welcome back, ${h.data.user.name||h.data.user.email}!`}),h.data.user;if(h.requiresEmailVerification)return{requiresEmailVerification:!0,email:f.email,message:h.message};if(h.rateLimited){const m=h.retryAfter?`Please try again in ${h.retryAfter} seconds.`:"Please try again in a few minutes.";return o({variant:"destructive",title:"Too Many Requests",description:`${h.message} ${m}`}),{rateLimited:!0,message:h.message,retryAfter:h.retryAfter}}return o({variant:"destructive",title:"Login Failed",description:h.message||"Invalid email or password."}),null}catch(h){return console.error("Login error:",h),o({variant:"destructive",title:"Login Failed",description:h.message||"An error occurred during login."}),null}},d=async f=>{try{const h=await Pe.resendVerificationEmail(f);return h.success?(o({title:"Verification Email Sent",description:"Please check your inbox for the verification link."}),!0):(o({variant:"destructive",title:"Failed to Send Email",description:h.message||"Could not send verification email."}),!1)}catch(h){return o({variant:"destructive",title:"Failed to Send Email",description:h.message||"An error occurred while sending the verification email."}),!1}},l=async f=>{try{const h=await Pe.register(f);return h.success?(s(h.data.user),o({title:"Signup Successful",description:`Welcome, ${h.data.user.name||h.data.user.email}!`}),h.data.user):(o({variant:"destructive",title:"Signup Failed",description:h.message||"An error occurred during signup."}),null)}catch(h){return o({variant:"destructive",title:"Signup Failed",description:h.message||"An error occurred during signup."}),null}},i=async()=>{try{await Pe.logout()}catch{}finally{s(null)}},u=async f=>{try{const h=await Pe.updateProfile(f);return h.success?(s(h.data),localStorage.setItem("lmsUser",JSON.stringify(h.data)),o({title:"Profile Updated",description:"Your profile information has been updated."}),h.data):(o({variant:"destructive",title:"Update Failed",description:h.message||"Failed to update profile."}),null)}catch(h){return o({variant:"destructive",title:"Update Failed",description:h.message||"An error occurred while updating profile."}),null}};return e.jsx(Q4.Provider,{value:{user:r,login:a,logout:i,signup:l,updateUser:u,resendVerificationEmail:d,loading:n},children:!n&&t})},qs=()=>{const t=A.useContext(Q4);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},MM=()=>{const{theme:t,setTheme:r}=D4(),{user:s,logout:n}=qs(),c=Br(),o=go(),{toast:a}=Js(),[d,l]=A.useState(!1),i=()=>{r(t==="light"?"dark":"light")},u=()=>{n(),a({title:"Logged Out",description:"You have been successfully logged out."}),c("/")},f=()=>{l(!d)},h=()=>{l(!1)},m=z=>{if(!z)return"U";const k=z.split(" ");return k.length===1?k[0].charAt(0).toUpperCase():k[0].charAt(0).toUpperCase()+k[k.length-1].charAt(0).toUpperCase()},p=z=>z==="/dashboard"?o.pathname==="/dashboard"||o.pathname.match(/^\/dashboard\/(super-admin|college-admin|faculty|student)$/):z==="/assessments"?o.pathname.startsWith("/assessments")&&!o.pathname.startsWith("/student/assessments"):z==="/student/assessments"?o.pathname.startsWith("/student/assessments"):z==="/student/coding-platforms"?o.pathname.startsWith("/student/coding-platforms"):z==="/admin/colleges"?o.pathname.startsWith("/admin/colleges"):z==="/admin/users"?o.pathname.startsWith("/admin/users"):z==="/admin/faculty"?o.pathname.startsWith("/admin/faculty"):z==="/admin/coding-profiles"?o.pathname.startsWith("/admin/coding-profiles"):z==="/dashboard/super-admin/courses"?o.pathname.startsWith("/dashboard/super-admin/courses"):z==="/dashboard/super-admin/attendance"?o.pathname.startsWith("/dashboard/super-admin/attendance"):z==="/dashboard/super-admin/scheduling"?o.pathname.startsWith("/dashboard/super-admin/scheduling"):z==="/dashboard/super-admin/faculty-status"?o.pathname.startsWith("/dashboard/super-admin/faculty-status"):z==="/question-bank"?o.pathname.startsWith("/question-bank"):z==="/analytics/dashboard"?o.pathname.startsWith("/analytics"):z==="/projects"||z.includes("/project-management")?o.pathname.includes("/project-management"):o.pathname===z||o.pathname.startsWith(z+"/"),x=z=>{const k="relative text-sm font-medium transition-all duration-300 px-3 py-2 rounded-lg min-w-[80px] text-center",R="text-white bg-gradient-to-r from-primary to-purple-600 shadow-lg transform scale-105",S="text-muted-foreground hover:text-primary hover:bg-muted/80 hover:shadow-md";return`${k} ${p(z)?R:S}`},g=z=>({"aria-current":p(z)?"page":void 0,"aria-label":p(z)?`${z.split("/").pop()||"page"} (current page)`:void 0}),v=()=>p("/dashboard/super-admin/courses")?"Course Management":p("/admin/faculty")?"Faculty Management":p("/assessments")?"Assessment Management":p("/dashboard/super-admin/attendance")?"Attendance Management":o.pathname.includes("/project-management")?"Project Management":p("/admin/coding-profiles")?"Coding Profiles":p("/dashboard/super-admin/scheduling")?"Class Management":p("/analytics/dashboard")?"Analytics Management":"Management",y=()=>p("/admin/users")?"Users":p("/admin/colleges")?"Colleges":p("/question-bank")?"Question Bank":"Administration",b=[{title:"Course Management",href:"/dashboard/super-admin/courses",icon:F7,roles:["super-admin"]},{title:"Faculty Management",href:"/admin/faculty",icon:Go,roles:["super-admin","college-admin"]},{title:"Assessment Management",href:"/assessments",icon:Ar,roles:["super-admin","college-admin","faculty"]},{title:"Attendance Management",href:"/dashboard/super-admin/attendance",icon:Jn,roles:["super-admin"]},{title:"Project Management",href:(s==null?void 0:s.role)==="super-admin"?"/dashboard/super-admin/project-management":(s==null?void 0:s.role)==="college-admin"?"/dashboard/college-admin/project-management":(s==null?void 0:s.role)==="faculty"?"/dashboard/faculty/project-management":"/dashboard/student/project-management",icon:V7,roles:["super-admin","college-admin","faculty","student"]},{title:"Coding Profiles",href:"/admin/coding-profiles",icon:Gr,roles:["super-admin"]},{title:"Class Management",href:"/dashboard/super-admin/scheduling",icon:fr,roles:["super-admin"]},{title:"Analytics Management",href:"/analytics/dashboard",icon:Rr,roles:["super-admin","college-admin","faculty","student"]}],C=[{title:"Users",href:"/admin/users",icon:as,roles:["super-admin"]},{title:"Colleges",href:"/admin/colleges",icon:tr,roles:["super-admin"]},{title:"Question Bank",href:"/question-bank",icon:Os,roles:["super-admin","college-admin","faculty"]}],T=[{title:"Assessments",href:"/student/assessments",icon:Ar,roles:["student"]},{title:"Coding Platforms",href:"/student/coding-platforms",icon:Gr,roles:["student"]}],M=b.filter(z=>z.roles.includes(s==null?void 0:s.role)),U=C.filter(z=>z.roles.includes(s==null?void 0:s.role)),L=T.filter(z=>z.roles.includes(s==null?void 0:s.role)),P=M.length>0,B=U.length>0,q=L.length>0;return e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"sticky top-0 z-50 w-full border-b border-border/40 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 shadow-sm",children:e.jsxs("div",{className:"w-full max-w-[1920px] mx-auto flex h-16 items-center justify-between px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16",children:[e.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[e.jsx(ee,{variant:"ghost",size:"icon",onClick:f,className:"mr-3 lg:hidden flex-shrink-0","aria-label":"Toggle mobile menu",children:e.jsx(eN,{className:"h-6 w-6"})}),e.jsxs(ks,{to:"/",className:"mr-4 lg:mr-6 xl:mr-8 flex items-center space-x-3 flex-shrink-0",children:[e.jsxs("div",{className:"relative",children:[e.jsx(g0,{className:"h-8 w-8 text-primary drop-shadow-sm"}),e.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-primary/20 to-purple-500/20 rounded-full blur-sm"})]}),e.jsx("span",{className:"font-bold text-xl lg:text-2xl bg-clip-text text-transparent bg-gradient-to-r from-primary via-purple-600 to-pink-600 drop-shadow-sm whitespace-nowrap",children:"EduHorizon"})]}),e.jsxs("nav",{className:"hidden lg:flex items-center space-x-2 xl:space-x-3 2xl:space-x-4 flex-1 min-w-0",children:[s&&e.jsxs(ks,{to:"/dashboard",className:x("/dashboard"),...g("/dashboard"),children:[e.jsxs("span",{className:"relative z-10 flex items-center space-x-2",children:[e.jsx(_p,{className:"h-4 w-4"}),e.jsx("span",{children:"Dashboard"})]}),p("/dashboard")&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/10 to-purple-500/10 rounded-lg animate-pulse"})]}),s&&P&&e.jsxs(Ri,{children:[e.jsx(Pi,{asChild:!0,children:e.jsxs(ee,{variant:"ghost",className:`relative text-sm font-medium transition-all duration-300 px-3 py-2 rounded-lg min-w-[120px] text-center ${p("/dashboard/super-admin/courses")||p("/admin/faculty")||p("/assessments")||p("/dashboard/super-admin/attendance")||o.pathname.includes("/project-management")||p("/admin/coding-profiles")||p("/dashboard/super-admin/scheduling")||p("/analytics/dashboard")?"text-white bg-gradient-to-r from-primary to-purple-600 shadow-lg transform scale-105":"text-muted-foreground hover:text-primary hover:bg-muted/80 hover:shadow-md"}`,children:[e.jsx("span",{className:"relative z-10",children:v()}),e.jsx(lc,{className:"ml-2 h-4 w-4 relative z-10"}),(p("/dashboard/super-admin/courses")||p("/admin/faculty")||p("/assessments")||p("/dashboard/super-admin/attendance")||o.pathname.includes("/project-management")||p("/admin/coding-profiles")||p("/dashboard/super-admin/scheduling")||p("/analytics/dashboard"))&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/10 to-purple-500/10 rounded-lg animate-pulse"})]})}),e.jsx(Xa,{align:"start",className:"w-56 p-1",children:e.jsx(Op,{children:M.map(z=>{const k=z.icon;return e.jsx(br,{asChild:!0,className:`p-3 rounded-lg hover:bg-muted/80 ${p(z.href)?"bg-primary/10 text-primary":""}`,children:e.jsxs(ks,{to:z.href,children:[e.jsx(k,{className:"mr-3 h-4 w-4"}),e.jsx("span",{children:z.title})]})},z.href)})})})]}),s&&B&&e.jsxs(Ri,{children:[e.jsx(Pi,{asChild:!0,children:e.jsxs(ee,{variant:"ghost",className:`relative text-sm font-medium transition-all duration-300 px-3 py-2 rounded-lg min-w-[140px] text-center ${p("/admin/users")||p("/admin/colleges")||p("/question-bank")?"text-white bg-gradient-to-r from-primary to-purple-600 shadow-lg transform scale-105":"text-muted-foreground hover:text-primary hover:bg-muted/80 hover:shadow-md"}`,children:[e.jsx("span",{className:"relative z-10",children:y()}),e.jsx(lc,{className:"ml-2 h-4 w-4 relative z-10"}),(p("/admin/users")||p("/admin/colleges")||p("/question-bank"))&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/10 to-purple-500/10 rounded-lg animate-pulse"})]})}),e.jsx(Xa,{align:"start",className:"w-56 p-1",children:e.jsx(Op,{children:U.map(z=>{const k=z.icon;return e.jsx(br,{asChild:!0,className:`p-3 rounded-lg hover:bg-muted/80 ${p(z.href)?"bg-primary/10 text-primary":""}`,children:e.jsxs(ks,{to:z.href,children:[e.jsx(k,{className:"mr-3 h-4 w-4"}),e.jsx("span",{children:z.title})]})},z.href)})})})]}),s&&q&&L.map(z=>{const k=z.icon;return e.jsxs(ks,{to:z.href,className:x(z.href),...g(z.href),children:[e.jsxs("span",{className:"relative z-10 flex items-center space-x-2",children:[k&&e.jsx(k,{className:"h-4 w-4"}),e.jsx("span",{children:z.title})]}),p(z.href)&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/10 to-purple-500/10 rounded-lg animate-pulse"})]},z.href)})]})]}),e.jsxs("div",{className:"hidden lg:flex items-center space-x-2 sm:space-x-3 lg:space-x-4 xl:space-x-6 flex-shrink-0",children:[e.jsxs(ee,{variant:"ghost",size:"sm",onClick:i,"aria-label":"Toggle theme",className:"relative overflow-hidden hover:bg-muted/80 transition-all duration-300",children:[e.jsx(w0,{className:"h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),e.jsx(b0,{className:"absolute h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"})]}),s?e.jsxs(Ri,{children:[e.jsx(Pi,{asChild:!0,children:e.jsx(ee,{variant:"ghost",className:"relative h-10 w-10 rounded-full border-2 border-transparent hover:border-primary/20 transition-all duration-300",children:e.jsxs(Jd,{className:"h-9 w-9",children:[e.jsx(eu,{src:s.avatarUrl||`https://avatar.vercel.sh/${s.email}.png`,alt:s.name||s.email}),e.jsx(tu,{className:"text-xs font-semibold",children:m(s.name)})]})})}),e.jsxs(Xa,{align:"end",className:"w-64 p-2",children:[e.jsx(F4,{className:"font-normal p-3",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("p",{className:"text-sm font-semibold leading-none",children:s.name||"User"}),e.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:s.email})]})}),e.jsx(A0,{}),e.jsxs(Op,{children:[e.jsx(br,{asChild:!0,className:"p-3 rounded-lg hover:bg-muted/80",children:e.jsxs(ks,{to:"/profile",children:[e.jsx(Da,{className:"mr-3 h-4 w-4"}),e.jsx("span",{children:"Profile"})]})}),e.jsx(br,{asChild:!0,className:"p-3 rounded-lg hover:bg-muted/80",children:e.jsxs(ks,{to:"/dashboard",children:[e.jsx(_p,{className:"mr-3 h-4 w-4"}),e.jsx("span",{children:"Dashboard"})]})})]}),e.jsx(A0,{}),e.jsxs(br,{onClick:u,className:"p-3 rounded-lg hover:bg-red-50 hover:text-red-600 dark:hover:bg-red-950/20",children:[e.jsx(m1,{className:"mr-3 h-4 w-4"}),e.jsx("span",{children:"Log out"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ee,{variant:"outline",size:"sm",asChild:!0,className:"hover:bg-muted/80",children:e.jsx(ks,{to:"/login",children:"Sign In"})}),e.jsx(ee,{size:"sm",asChild:!0,className:"bg-gradient-to-r from-primary to-purple-600 hover:from-primary/90 hover:to-purple-600/90",children:e.jsx(ks,{to:"/signup",children:"Sign Up"})})]})]})]})}),d&&e.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:h}),e.jsxs("div",{className:"fixed left-0 top-0 h-full w-80 max-w-[85vw] bg-background border-r border-border shadow-xl flex flex-col",children:[e.jsxs("div",{className:"flex h-16 items-center justify-between border-b px-6 flex-shrink-0",children:[e.jsxs(ks,{to:"/",className:"flex items-center space-x-3",onClick:h,children:[e.jsx(g0,{className:"h-7 w-7 text-primary"}),e.jsx("span",{className:"font-bold text-xl bg-clip-text text-transparent bg-gradient-to-r from-primary via-purple-500 to-pink-500",children:"EduHorizon"})]}),e.jsx(ee,{variant:"ghost",size:"icon",onClick:h,className:"h-9 w-9",children:e.jsx(Dn,{className:"h-5 w-5"})})]}),e.jsxs("nav",{className:"flex-1 space-y-2 p-6 overflow-y-auto min-h-0",children:[s&&e.jsxs(ks,{to:"/dashboard",className:`flex items-center space-x-3 px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 ${p("/dashboard")?"bg-primary text-primary-foreground shadow-md":"text-muted-foreground hover:text-foreground hover:bg-muted"}`,onClick:h,children:[e.jsx(_p,{className:"h-4 w-4"}),e.jsx("span",{children:"Dashboard"})]}),s&&P&&e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Management"}),M.map(z=>{const k=z.icon;return e.jsxs(ks,{to:z.href,className:`flex items-center space-x-3 px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 ${p(z.href)?"bg-primary text-primary-foreground shadow-md":"text-muted-foreground hover:text-foreground hover:bg-muted"}`,onClick:h,children:[e.jsx(k,{className:"h-4 w-4"}),e.jsx("span",{children:z.title})]},z.href)})]}),s&&B&&e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Administration"}),U.map(z=>{const k=z.icon;return e.jsxs(ks,{to:z.href,className:`flex items-center space-x-3 px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 ${p(z.href)?"bg-primary text-primary-foreground shadow-md":"text-muted-foreground hover:text-foreground hover:bg-muted"}`,onClick:h,children:[e.jsx(k,{className:"h-4 w-4"}),e.jsx("span",{children:z.title})]},z.href)})]}),s&&q&&e.jsx("div",{className:"pt-4 border-t",children:L.map(z=>{const k=z.icon;return e.jsxs(ks,{to:z.href,className:`flex items-center space-x-3 px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 ${p(z.href)?"bg-primary text-primary-foreground shadow-md":"text-muted-foreground hover:text-foreground hover:bg-muted"}`,onClick:h,children:[e.jsx(k,{className:"h-4 w-4"}),e.jsx("span",{children:z.title})]},z.href)})})]}),e.jsxs("div",{className:"border-t p-6 space-y-3 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(Jd,{className:"h-10 w-10",children:[e.jsx(eu,{src:(s==null?void 0:s.avatarUrl)||`https://avatar.vercel.sh/${s==null?void 0:s.email}.png`,alt:(s==null?void 0:s.name)||(s==null?void 0:s.email)}),e.jsx(tu,{className:"text-sm font-semibold",children:m(s==null?void 0:s.name)})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold leading-none truncate",children:(s==null?void 0:s.name)||"User"}),e.jsx("p",{className:"text-xs leading-none text-muted-foreground truncate",children:s==null?void 0:s.email})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ee,{variant:"ghost",size:"sm",onClick:i,className:"flex-1 mr-2",children:[e.jsx(w0,{className:"h-4 w-4 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),e.jsx(b0,{className:"absolute h-4 w-4 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),e.jsx("span",{className:"ml-2",children:"Theme"})]}),e.jsxs(ee,{variant:"ghost",size:"sm",onClick:u,className:"flex-1 text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-950/20",children:[e.jsx(m1,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})]})]})]})},z1=()=>{const t=new Date().getFullYear();return e.jsx("footer",{className:"bg-muted/30 border-t border-border/40 mt-auto",children:e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g0,{className:"h-5 w-5 text-primary"}),e.jsx("span",{className:"text-sm font-semibold bg-clip-text text-transparent bg-gradient-to-r from-primary via-purple-500 to-pink-500",children:"EduHorizon LMS"})]}),e.jsxs("div",{className:"flex items-center gap-6 text-xs",children:[e.jsx("a",{href:"#",className:"text-muted-foreground hover:text-primary transition-colors",children:"About"}),e.jsx("a",{href:"#",className:"text-muted-foreground hover:text-primary transition-colors",children:"Courses"}),e.jsx("a",{href:"#",className:"text-muted-foreground hover:text-primary transition-colors",children:"Contact"}),e.jsx("a",{href:"#",className:"text-muted-foreground hover:text-primary transition-colors",children:"Privacy"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("a",{href:"#","aria-label":"Facebook",className:"text-muted-foreground hover:text-primary transition-colors",children:e.jsx(B7,{size:16})}),e.jsx("a",{href:"#","aria-label":"Twitter",className:"text-muted-foreground hover:text-primary transition-colors",children:e.jsx(b9,{size:16})}),e.jsx("a",{href:"#","aria-label":"LinkedIn",className:"text-muted-foreground hover:text-primary transition-colors",children:e.jsx(Z7,{size:16})})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-border/30 text-center",children:e.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ",t," EduHorizon LMS. All rights reserved."]})})]})})},IM=({children:t})=>{const{user:r}=qs();return r?e.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.jsx(MM,{}),e.jsx("main",{className:"flex-1 p-6 pt-8",children:t}),e.jsx(z1,{})]}):e.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.jsx("main",{className:"flex-1",children:t}),e.jsx(z1,{})]})},X4=A.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),xm=A.createContext({}),ym=A.createContext(null),vm=typeof document<"u",Uy=vm?A.useLayoutEffect:A.useEffect,Z4=A.createContext({strict:!1}),Vy=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),OM="framerAppearId",J4="data-"+Vy(OM);function FM(t,r,s,n){const{visualElement:c}=A.useContext(xm),o=A.useContext(Z4),a=A.useContext(ym),d=A.useContext(X4).reducedMotion,l=A.useRef();n=n||o.renderer,!l.current&&n&&(l.current=n(t,{visualState:r,parent:c,props:s,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:d}));const i=l.current;A.useInsertionEffect(()=>{i&&i.update(s,a)});const u=A.useRef(!!(s[J4]&&!window.HandoffComplete));return Uy(()=>{i&&(i.render(),u.current&&i.animationState&&i.animationState.animateChanges())}),A.useEffect(()=>{i&&(i.updateFeatures(),!u.current&&i.animationState&&i.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),i}function Ol(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function LM(t,r,s){return A.useCallback(n=>{n&&t.mount&&t.mount(n),r&&(n?r.mount(n):r.unmount()),s&&(typeof s=="function"?s(n):Ol(s)&&(s.current=n))},[r])}function su(t){return typeof t=="string"||Array.isArray(t)}function bm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const qy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Hy=["initial",...qy];function wm(t){return bm(t.animate)||Hy.some(r=>su(t[r]))}function e3(t){return!!(wm(t)||t.variants)}function DM(t,r){if(wm(t)){const{initial:s,animate:n}=t;return{initial:s===!1||su(s)?s:void 0,animate:su(n)?n:void 0}}return t.inherit!==!1?r:{}}function $M(t){const{initial:r,animate:s}=DM(t,A.useContext(xm));return A.useMemo(()=>({initial:r,animate:s}),[U1(r),U1(s)])}function U1(t){return Array.isArray(t)?t.join(" "):t}const V1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ru={};for(const t in V1)ru[t]={isEnabled:r=>V1[t].some(s=>!!r[s])};function BM(t){for(const r in t)ru[r]={...ru[r],...t[r]}}const Wy=A.createContext({}),t3=A.createContext({}),zM=Symbol.for("motionComponentSymbol");function UM({preloadedFeatures:t,createVisualElement:r,useRender:s,useVisualState:n,Component:c}){t&&BM(t);function o(d,l){let i;const u={...A.useContext(X4),...d,layoutId:VM(d)},{isStatic:f}=u,h=$M(d),m=n(d,f);if(!f&&vm){h.visualElement=FM(c,m,u,r);const p=A.useContext(t3),x=A.useContext(Z4).strict;h.visualElement&&(i=h.visualElement.loadFeatures(u,x,t,p))}return A.createElement(xm.Provider,{value:h},i&&h.visualElement?A.createElement(i,{visualElement:h.visualElement,...u}):null,s(c,d,LM(m,h.visualElement,l),m,f,h.visualElement))}const a=A.forwardRef(o);return a[zM]=c,a}function VM({layoutId:t}){const r=A.useContext(Wy).id;return r&&t!==void 0?r+"-"+t:t}function qM(t){function r(n,c={}){return UM(t(n,c))}if(typeof Proxy>"u")return r;const s=new Map;return new Proxy(r,{get:(n,c)=>(s.has(c)||s.set(c,r(c)),s.get(c))})}const HM=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Gy(t){return typeof t!="string"||t.includes("-")?!1:!!(HM.indexOf(t)>-1||/[A-Z]/.test(t))}const vf={};function WM(t){Object.assign(vf,t)}const bu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],hl=new Set(bu);function s3(t,{layout:r,layoutId:s}){return hl.has(t)||t.startsWith("origin")||(r||s!==void 0)&&(!!vf[t]||t==="opacity")}const An=t=>!!(t&&t.getVelocity),GM={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},KM=bu.length;function YM(t,{enableHardwareAcceleration:r=!0,allowTransformNone:s=!0},n,c){let o="";for(let a=0;a<KM;a++){const d=bu[a];if(t[d]!==void 0){const l=GM[d]||d;o+=`${l}(${t[d]}) `}}return r&&!t.z&&(o+="translateZ(0)"),o=o.trim(),c?o=c(t,n?"":o):s&&n&&(o="none"),o}const r3=t=>r=>typeof r=="string"&&r.startsWith(t),n3=r3("--"),T0=r3("var(--"),QM=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,XM=(t,r)=>r&&typeof t=="number"?r.transform(t):t,oo=(t,r,s)=>Math.min(Math.max(s,t),r),fl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},yd={...fl,transform:t=>oo(0,1,t)},nh={...fl,default:1},vd=t=>Math.round(t*1e5)/1e5,jm=/(-)?([\d]*\.?[\d])+/g,a3=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,ZM=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function wu(t){return typeof t=="string"}const ju=t=>({test:r=>wu(r)&&r.endsWith(t)&&r.split(" ").length===1,parse:parseFloat,transform:r=>`${r}${t}`}),bi=ju("deg"),La=ju("%"),rs=ju("px"),JM=ju("vh"),eI=ju("vw"),q1={...La,parse:t=>La.parse(t)/100,transform:t=>La.transform(t*100)},H1={...fl,transform:Math.round},i3={borderWidth:rs,borderTopWidth:rs,borderRightWidth:rs,borderBottomWidth:rs,borderLeftWidth:rs,borderRadius:rs,radius:rs,borderTopLeftRadius:rs,borderTopRightRadius:rs,borderBottomRightRadius:rs,borderBottomLeftRadius:rs,width:rs,maxWidth:rs,height:rs,maxHeight:rs,size:rs,top:rs,right:rs,bottom:rs,left:rs,padding:rs,paddingTop:rs,paddingRight:rs,paddingBottom:rs,paddingLeft:rs,margin:rs,marginTop:rs,marginRight:rs,marginBottom:rs,marginLeft:rs,rotate:bi,rotateX:bi,rotateY:bi,rotateZ:bi,scale:nh,scaleX:nh,scaleY:nh,scaleZ:nh,skew:bi,skewX:bi,skewY:bi,distance:rs,translateX:rs,translateY:rs,translateZ:rs,x:rs,y:rs,z:rs,perspective:rs,transformPerspective:rs,opacity:yd,originX:q1,originY:q1,originZ:rs,zIndex:H1,fillOpacity:yd,strokeOpacity:yd,numOctaves:H1};function Ky(t,r,s,n){const{style:c,vars:o,transform:a,transformOrigin:d}=t;let l=!1,i=!1,u=!0;for(const f in r){const h=r[f];if(n3(f)){o[f]=h;continue}const m=i3[f],p=XM(h,m);if(hl.has(f)){if(l=!0,a[f]=p,!u)continue;h!==(m.default||0)&&(u=!1)}else f.startsWith("origin")?(i=!0,d[f]=p):c[f]=p}if(r.transform||(l||n?c.transform=YM(t.transform,s,u,n):c.transform&&(c.transform="none")),i){const{originX:f="50%",originY:h="50%",originZ:m=0}=d;c.transformOrigin=`${f} ${h} ${m}`}}const Yy=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function o3(t,r,s){for(const n in r)!An(r[n])&&!s3(n,s)&&(t[n]=r[n])}function tI({transformTemplate:t},r,s){return A.useMemo(()=>{const n=Yy();return Ky(n,r,{enableHardwareAcceleration:!s},t),Object.assign({},n.vars,n.style)},[r])}function sI(t,r,s){const n=t.style||{},c={};return o3(c,n,t),Object.assign(c,tI(t,r,s)),t.transformValues?t.transformValues(c):c}function rI(t,r,s){const n={},c=sI(t,r,s);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,c.userSelect=c.WebkitUserSelect=c.WebkitTouchCallout="none",c.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=c,n}const nI=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function bf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||nI.has(t)}let l3=t=>!bf(t);function aI(t){t&&(l3=r=>r.startsWith("on")?!bf(r):t(r))}try{aI(require("@emotion/is-prop-valid").default)}catch{}function iI(t,r,s){const n={};for(const c in t)c==="values"&&typeof t.values=="object"||(l3(c)||s===!0&&bf(c)||!r&&!bf(c)||t.draggable&&c.startsWith("onDrag"))&&(n[c]=t[c]);return n}function W1(t,r,s){return typeof t=="string"?t:rs.transform(r+s*t)}function oI(t,r,s){const n=W1(r,t.x,t.width),c=W1(s,t.y,t.height);return`${n} ${c}`}const lI={offset:"stroke-dashoffset",array:"stroke-dasharray"},cI={offset:"strokeDashoffset",array:"strokeDasharray"};function dI(t,r,s=1,n=0,c=!0){t.pathLength=1;const o=c?lI:cI;t[o.offset]=rs.transform(-n);const a=rs.transform(r),d=rs.transform(s);t[o.array]=`${a} ${d}`}function Qy(t,{attrX:r,attrY:s,attrScale:n,originX:c,originY:o,pathLength:a,pathSpacing:d=1,pathOffset:l=0,...i},u,f,h){if(Ky(t,i,u,h),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:p,dimensions:x}=t;m.transform&&(x&&(p.transform=m.transform),delete m.transform),x&&(c!==void 0||o!==void 0||p.transform)&&(p.transformOrigin=oI(x,c!==void 0?c:.5,o!==void 0?o:.5)),r!==void 0&&(m.x=r),s!==void 0&&(m.y=s),n!==void 0&&(m.scale=n),a!==void 0&&dI(m,a,d,l,!1)}const c3=()=>({...Yy(),attrs:{}}),Xy=t=>typeof t=="string"&&t.toLowerCase()==="svg";function uI(t,r,s,n){const c=A.useMemo(()=>{const o=c3();return Qy(o,r,{enableHardwareAcceleration:!1},Xy(n),t.transformTemplate),{...o.attrs,style:{...o.style}}},[r]);if(t.style){const o={};o3(o,t.style,t),c.style={...o,...c.style}}return c}function hI(t=!1){return(s,n,c,{latestValues:o},a)=>{const l=(Gy(s)?uI:rI)(n,o,a,s),u={...iI(n,typeof s=="string",t),...l,ref:c},{children:f}=n,h=A.useMemo(()=>An(f)?f.get():f,[f]);return A.createElement(s,{...u,children:h})}}function d3(t,{style:r,vars:s},n,c){Object.assign(t.style,r,c&&c.getProjectionStyles(n));for(const o in s)t.style.setProperty(o,s[o])}const u3=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function h3(t,r,s,n){d3(t,r,void 0,n);for(const c in r.attrs)t.setAttribute(u3.has(c)?c:Vy(c),r.attrs[c])}function Zy(t,r){const{style:s}=t,n={};for(const c in s)(An(s[c])||r.style&&An(r.style[c])||s3(c,t))&&(n[c]=s[c]);return n}function f3(t,r){const s=Zy(t,r);for(const n in t)if(An(t[n])||An(r[n])){const c=bu.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;s[c]=t[n]}return s}function Jy(t,r,s,n={},c={}){return typeof r=="function"&&(r=r(s!==void 0?s:t.custom,n,c)),typeof r=="string"&&(r=t.variants&&t.variants[r]),typeof r=="function"&&(r=r(s!==void 0?s:t.custom,n,c)),r}function m3(t){const r=A.useRef(null);return r.current===null&&(r.current=t()),r.current}const wf=t=>Array.isArray(t),fI=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),mI=t=>wf(t)?t[t.length-1]||0:t;function Oh(t){const r=An(t)?t.get():t;return fI(r)?r.toValue():r}function pI({scrapeMotionValuesFromProps:t,createRenderState:r,onMount:s},n,c,o){const a={latestValues:gI(n,c,o,t),renderState:r()};return s&&(a.mount=d=>s(n,d,a)),a}const p3=t=>(r,s)=>{const n=A.useContext(xm),c=A.useContext(ym),o=()=>pI(t,r,n,c);return s?o():m3(o)};function gI(t,r,s,n){const c={},o=n(t,{});for(const h in o)c[h]=Oh(o[h]);let{initial:a,animate:d}=t;const l=wm(t),i=e3(t);r&&i&&!l&&t.inherit!==!1&&(a===void 0&&(a=r.initial),d===void 0&&(d=r.animate));let u=s?s.initial===!1:!1;u=u||a===!1;const f=u?d:a;return f&&typeof f!="boolean"&&!bm(f)&&(Array.isArray(f)?f:[f]).forEach(m=>{const p=Jy(t,m);if(!p)return;const{transitionEnd:x,transition:g,...v}=p;for(const y in v){let b=v[y];if(Array.isArray(b)){const C=u?b.length-1:0;b=b[C]}b!==null&&(c[y]=b)}for(const y in x)c[y]=x[y]}),c}const cr=t=>t;class G1{constructor(){this.order=[],this.scheduled=new Set}add(r){if(!this.scheduled.has(r))return this.scheduled.add(r),this.order.push(r),!0}remove(r){const s=this.order.indexOf(r);s!==-1&&(this.order.splice(s,1),this.scheduled.delete(r))}clear(){this.order.length=0,this.scheduled.clear()}}function xI(t){let r=new G1,s=new G1,n=0,c=!1,o=!1;const a=new WeakSet,d={schedule:(l,i=!1,u=!1)=>{const f=u&&c,h=f?r:s;return i&&a.add(l),h.add(l)&&f&&c&&(n=r.order.length),l},cancel:l=>{s.remove(l),a.delete(l)},process:l=>{if(c){o=!0;return}if(c=!0,[r,s]=[s,r],s.clear(),n=r.order.length,n)for(let i=0;i<n;i++){const u=r.order[i];u(l),a.has(u)&&(d.schedule(u),t())}c=!1,o&&(o=!1,d.process(l))}};return d}const ah=["prepare","read","update","preRender","render","postRender"],yI=40;function vI(t,r){let s=!1,n=!0;const c={delta:0,timestamp:0,isProcessing:!1},o=ah.reduce((f,h)=>(f[h]=xI(()=>s=!0),f),{}),a=f=>o[f].process(c),d=()=>{const f=performance.now();s=!1,c.delta=n?1e3/60:Math.max(Math.min(f-c.timestamp,yI),1),c.timestamp=f,c.isProcessing=!0,ah.forEach(a),c.isProcessing=!1,s&&r&&(n=!1,t(d))},l=()=>{s=!0,n=!0,c.isProcessing||t(d)};return{schedule:ah.reduce((f,h)=>{const m=o[h];return f[h]=(p,x=!1,g=!1)=>(s||l(),m.schedule(p,x,g)),f},{}),cancel:f=>ah.forEach(h=>o[h].cancel(f)),state:c,steps:o}}const{schedule:Vs,cancel:ui,state:tn,steps:Dp}=vI(typeof requestAnimationFrame<"u"?requestAnimationFrame:cr,!0),bI={useVisualState:p3({scrapeMotionValuesFromProps:f3,createRenderState:c3,onMount:(t,r,{renderState:s,latestValues:n})=>{Vs.read(()=>{try{s.dimensions=typeof r.getBBox=="function"?r.getBBox():r.getBoundingClientRect()}catch{s.dimensions={x:0,y:0,width:0,height:0}}}),Vs.render(()=>{Qy(s,n,{enableHardwareAcceleration:!1},Xy(r.tagName),t.transformTemplate),h3(r,s)})}})},wI={useVisualState:p3({scrapeMotionValuesFromProps:Zy,createRenderState:Yy})};function jI(t,{forwardMotionProps:r=!1},s,n){return{...Gy(t)?bI:wI,preloadedFeatures:s,useRender:hI(r),createVisualElement:n,Component:t}}function Za(t,r,s,n={passive:!0}){return t.addEventListener(r,s,n),()=>t.removeEventListener(r,s)}const g3=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function _m(t,r="page"){return{point:{x:t[r+"X"],y:t[r+"Y"]}}}const _I=t=>r=>g3(r)&&t(r,_m(r));function ti(t,r,s,n){return Za(t,r,_I(s),n)}const NI=(t,r)=>s=>r(t(s)),Yi=(...t)=>t.reduce(NI);function x3(t){let r=null;return()=>{const s=()=>{r=null};return r===null?(r=t,s):!1}}const K1=x3("dragHorizontal"),Y1=x3("dragVertical");function y3(t){let r=!1;if(t==="y")r=Y1();else if(t==="x")r=K1();else{const s=K1(),n=Y1();s&&n?r=()=>{s(),n()}:(s&&s(),n&&n())}return r}function v3(){const t=y3(!0);return t?(t(),!1):!0}class vo{constructor(r){this.isMounted=!1,this.node=r}update(){}}function Q1(t,r){const s="pointer"+(r?"enter":"leave"),n="onHover"+(r?"Start":"End"),c=(o,a)=>{if(o.pointerType==="touch"||v3())return;const d=t.getProps();t.animationState&&d.whileHover&&t.animationState.setActive("whileHover",r),d[n]&&Vs.update(()=>d[n](o,a))};return ti(t.current,s,c,{passive:!t.getProps()[n]})}class SI extends vo{mount(){this.unmount=Yi(Q1(this.node,!0),Q1(this.node,!1))}unmount(){}}class CI extends vo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let r=!1;try{r=this.node.current.matches(":focus-visible")}catch{r=!0}!r||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Yi(Za(this.node.current,"focus",()=>this.onFocus()),Za(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const b3=(t,r)=>r?t===r?!0:b3(t,r.parentElement):!1;function $p(t,r){if(!r)return;const s=new PointerEvent("pointer"+t);r(s,_m(s))}class kI extends vo{constructor(){super(...arguments),this.removeStartListeners=cr,this.removeEndListeners=cr,this.removeAccessibleListeners=cr,this.startPointerPress=(r,s)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),o=ti(window,"pointerup",(d,l)=>{if(!this.checkPressEnd())return;const{onTap:i,onTapCancel:u,globalTapTarget:f}=this.node.getProps();Vs.update(()=>{!f&&!b3(this.node.current,d.target)?u&&u(d,l):i&&i(d,l)})},{passive:!(n.onTap||n.onPointerUp)}),a=ti(window,"pointercancel",(d,l)=>this.cancelPress(d,l),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=Yi(o,a),this.startPress(r,s)},this.startAccessiblePress=()=>{const r=o=>{if(o.key!=="Enter"||this.isPressing)return;const a=d=>{d.key!=="Enter"||!this.checkPressEnd()||$p("up",(l,i)=>{const{onTap:u}=this.node.getProps();u&&Vs.update(()=>u(l,i))})};this.removeEndListeners(),this.removeEndListeners=Za(this.node.current,"keyup",a),$p("down",(d,l)=>{this.startPress(d,l)})},s=Za(this.node.current,"keydown",r),n=()=>{this.isPressing&&$p("cancel",(o,a)=>this.cancelPress(o,a))},c=Za(this.node.current,"blur",n);this.removeAccessibleListeners=Yi(s,c)}}startPress(r,s){this.isPressing=!0;const{onTapStart:n,whileTap:c}=this.node.getProps();c&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&Vs.update(()=>n(r,s))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!v3()}cancelPress(r,s){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&Vs.update(()=>n(r,s))}mount(){const r=this.node.getProps(),s=ti(r.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(r.onTapStart||r.onPointerStart)}),n=Za(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Yi(s,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const R0=new WeakMap,Bp=new WeakMap,EI=t=>{const r=R0.get(t.target);r&&r(t)},AI=t=>{t.forEach(EI)};function TI({root:t,...r}){const s=t||document;Bp.has(s)||Bp.set(s,{});const n=Bp.get(s),c=JSON.stringify(r);return n[c]||(n[c]=new IntersectionObserver(AI,{root:t,...r})),n[c]}function RI(t,r,s){const n=TI(r);return R0.set(t,s),n.observe(t),()=>{R0.delete(t),n.unobserve(t)}}const PI={some:0,all:1};class MI extends vo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:r={}}=this.node.getProps(),{root:s,margin:n,amount:c="some",once:o}=r,a={root:s?s.current:void 0,rootMargin:n,threshold:typeof c=="number"?c:PI[c]},d=l=>{const{isIntersecting:i}=l;if(this.isInView===i||(this.isInView=i,o&&!i&&this.hasEnteredView))return;i&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",i);const{onViewportEnter:u,onViewportLeave:f}=this.node.getProps(),h=i?u:f;h&&h(l)};return RI(this.node.current,a,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:r,prevProps:s}=this.node;["amount","margin","root"].some(II(r,s))&&this.startObserver()}unmount(){}}function II({viewport:t={}},{viewport:r={}}={}){return s=>t[s]!==r[s]}const OI={inView:{Feature:MI},tap:{Feature:kI},focus:{Feature:CI},hover:{Feature:SI}};function w3(t,r){if(!Array.isArray(r))return!1;const s=r.length;if(s!==t.length)return!1;for(let n=0;n<s;n++)if(r[n]!==t[n])return!1;return!0}function FI(t){const r={};return t.values.forEach((s,n)=>r[n]=s.get()),r}function LI(t){const r={};return t.values.forEach((s,n)=>r[n]=s.getVelocity()),r}function Nm(t,r,s){const n=t.getProps();return Jy(n,r,s!==void 0?s:n.custom,FI(t),LI(t))}let DI=cr,ev=cr;const Qi=t=>t*1e3,si=t=>t/1e3,$I={current:!1},j3=t=>Array.isArray(t)&&typeof t[0]=="number";function _3(t){return!!(!t||typeof t=="string"&&N3[t]||j3(t)||Array.isArray(t)&&t.every(_3))}const rd=([t,r,s,n])=>`cubic-bezier(${t}, ${r}, ${s}, ${n})`,N3={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:rd([0,.65,.55,1]),circOut:rd([.55,0,1,.45]),backIn:rd([.31,.01,.66,-.59]),backOut:rd([.33,1.53,.69,.99])};function S3(t){if(t)return j3(t)?rd(t):Array.isArray(t)?t.map(S3):N3[t]}function BI(t,r,s,{delay:n=0,duration:c,repeat:o=0,repeatType:a="loop",ease:d,times:l}={}){const i={[r]:s};l&&(i.offset=l);const u=S3(d);return Array.isArray(u)&&(i.easing=u),t.animate(i,{delay:n,duration:c,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}function zI(t,{repeat:r,repeatType:s="loop"}){const n=r&&s!=="loop"&&r%2===1?0:t.length-1;return t[n]}const C3=(t,r,s)=>(((1-3*s+3*r)*t+(3*s-6*r))*t+3*r)*t,UI=1e-7,VI=12;function qI(t,r,s,n,c){let o,a,d=0;do a=r+(s-r)/2,o=C3(a,n,c)-t,o>0?s=a:r=a;while(Math.abs(o)>UI&&++d<VI);return a}function _u(t,r,s,n){if(t===r&&s===n)return cr;const c=o=>qI(o,0,1,t,s);return o=>o===0||o===1?o:C3(c(o),r,n)}const HI=_u(.42,0,1,1),WI=_u(0,0,.58,1),k3=_u(.42,0,.58,1),GI=t=>Array.isArray(t)&&typeof t[0]!="number",E3=t=>r=>r<=.5?t(2*r)/2:(2-t(2*(1-r)))/2,A3=t=>r=>1-t(1-r),tv=t=>1-Math.sin(Math.acos(t)),T3=A3(tv),KI=E3(tv),R3=_u(.33,1.53,.69,.99),sv=A3(R3),YI=E3(sv),QI=t=>(t*=2)<1?.5*sv(t):.5*(2-Math.pow(2,-10*(t-1))),XI={linear:cr,easeIn:HI,easeInOut:k3,easeOut:WI,circIn:tv,circInOut:KI,circOut:T3,backIn:sv,backInOut:YI,backOut:R3,anticipate:QI},X1=t=>{if(Array.isArray(t)){ev(t.length===4);const[r,s,n,c]=t;return _u(r,s,n,c)}else if(typeof t=="string")return XI[t];return t},rv=(t,r)=>s=>!!(wu(s)&&ZM.test(s)&&s.startsWith(t)||r&&Object.prototype.hasOwnProperty.call(s,r)),P3=(t,r,s)=>n=>{if(!wu(n))return n;const[c,o,a,d]=n.match(jm);return{[t]:parseFloat(c),[r]:parseFloat(o),[s]:parseFloat(a),alpha:d!==void 0?parseFloat(d):1}},ZI=t=>oo(0,255,t),zp={...fl,transform:t=>Math.round(ZI(t))},Do={test:rv("rgb","red"),parse:P3("red","green","blue"),transform:({red:t,green:r,blue:s,alpha:n=1})=>"rgba("+zp.transform(t)+", "+zp.transform(r)+", "+zp.transform(s)+", "+vd(yd.transform(n))+")"};function JI(t){let r="",s="",n="",c="";return t.length>5?(r=t.substring(1,3),s=t.substring(3,5),n=t.substring(5,7),c=t.substring(7,9)):(r=t.substring(1,2),s=t.substring(2,3),n=t.substring(3,4),c=t.substring(4,5),r+=r,s+=s,n+=n,c+=c),{red:parseInt(r,16),green:parseInt(s,16),blue:parseInt(n,16),alpha:c?parseInt(c,16)/255:1}}const P0={test:rv("#"),parse:JI,transform:Do.transform},Fl={test:rv("hsl","hue"),parse:P3("hue","saturation","lightness"),transform:({hue:t,saturation:r,lightness:s,alpha:n=1})=>"hsla("+Math.round(t)+", "+La.transform(vd(r))+", "+La.transform(vd(s))+", "+vd(yd.transform(n))+")"},cn={test:t=>Do.test(t)||P0.test(t)||Fl.test(t),parse:t=>Do.test(t)?Do.parse(t):Fl.test(t)?Fl.parse(t):P0.parse(t),transform:t=>wu(t)?t:t.hasOwnProperty("red")?Do.transform(t):Fl.transform(t)},sr=(t,r,s)=>-s*t+s*r+t;function Up(t,r,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(r-t)*6*s:s<1/2?r:s<2/3?t+(r-t)*(2/3-s)*6:t}function eO({hue:t,saturation:r,lightness:s,alpha:n}){t/=360,r/=100,s/=100;let c=0,o=0,a=0;if(!r)c=o=a=s;else{const d=s<.5?s*(1+r):s+r-s*r,l=2*s-d;c=Up(l,d,t+1/3),o=Up(l,d,t),a=Up(l,d,t-1/3)}return{red:Math.round(c*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:n}}const Vp=(t,r,s)=>{const n=t*t;return Math.sqrt(Math.max(0,s*(r*r-n)+n))},tO=[P0,Do,Fl],sO=t=>tO.find(r=>r.test(t));function Z1(t){const r=sO(t);let s=r.parse(t);return r===Fl&&(s=eO(s)),s}const M3=(t,r)=>{const s=Z1(t),n=Z1(r),c={...s};return o=>(c.red=Vp(s.red,n.red,o),c.green=Vp(s.green,n.green,o),c.blue=Vp(s.blue,n.blue,o),c.alpha=sr(s.alpha,n.alpha,o),Do.transform(c))};function rO(t){var r,s;return isNaN(t)&&wu(t)&&(((r=t.match(jm))===null||r===void 0?void 0:r.length)||0)+(((s=t.match(a3))===null||s===void 0?void 0:s.length)||0)>0}const I3={regex:QM,countKey:"Vars",token:"${v}",parse:cr},O3={regex:a3,countKey:"Colors",token:"${c}",parse:cn.parse},F3={regex:jm,countKey:"Numbers",token:"${n}",parse:fl.parse};function qp(t,{regex:r,countKey:s,token:n,parse:c}){const o=t.tokenised.match(r);o&&(t["num"+s]=o.length,t.tokenised=t.tokenised.replace(r,n),t.values.push(...o.map(c)))}function jf(t){const r=t.toString(),s={value:r,tokenised:r,values:[],numVars:0,numColors:0,numNumbers:0};return s.value.includes("var(--")&&qp(s,I3),qp(s,O3),qp(s,F3),s}function L3(t){return jf(t).values}function D3(t){const{values:r,numColors:s,numVars:n,tokenised:c}=jf(t),o=r.length;return a=>{let d=c;for(let l=0;l<o;l++)l<n?d=d.replace(I3.token,a[l]):l<n+s?d=d.replace(O3.token,cn.transform(a[l])):d=d.replace(F3.token,vd(a[l]));return d}}const nO=t=>typeof t=="number"?0:t;function aO(t){const r=L3(t);return D3(t)(r.map(nO))}const lo={test:rO,parse:L3,createTransformer:D3,getAnimatableNone:aO},$3=(t,r)=>s=>`${s>0?r:t}`;function B3(t,r){return typeof t=="number"?s=>sr(t,r,s):cn.test(t)?M3(t,r):t.startsWith("var(")?$3(t,r):U3(t,r)}const z3=(t,r)=>{const s=[...t],n=s.length,c=t.map((o,a)=>B3(o,r[a]));return o=>{for(let a=0;a<n;a++)s[a]=c[a](o);return s}},iO=(t,r)=>{const s={...t,...r},n={};for(const c in s)t[c]!==void 0&&r[c]!==void 0&&(n[c]=B3(t[c],r[c]));return c=>{for(const o in n)s[o]=n[o](c);return s}},U3=(t,r)=>{const s=lo.createTransformer(r),n=jf(t),c=jf(r);return n.numVars===c.numVars&&n.numColors===c.numColors&&n.numNumbers>=c.numNumbers?Yi(z3(n.values,c.values),s):$3(t,r)},nu=(t,r,s)=>{const n=r-t;return n===0?1:(s-t)/n},J1=(t,r)=>s=>sr(t,r,s);function oO(t){return typeof t=="number"?J1:typeof t=="string"?cn.test(t)?M3:U3:Array.isArray(t)?z3:typeof t=="object"?iO:J1}function lO(t,r,s){const n=[],c=s||oO(t[0]),o=t.length-1;for(let a=0;a<o;a++){let d=c(t[a],t[a+1]);if(r){const l=Array.isArray(r)?r[a]||cr:r;d=Yi(l,d)}n.push(d)}return n}function V3(t,r,{clamp:s=!0,ease:n,mixer:c}={}){const o=t.length;if(ev(o===r.length),o===1)return()=>r[0];t[0]>t[o-1]&&(t=[...t].reverse(),r=[...r].reverse());const a=lO(r,n,c),d=a.length,l=i=>{let u=0;if(d>1)for(;u<t.length-2&&!(i<t[u+1]);u++);const f=nu(t[u],t[u+1],i);return a[u](f)};return s?i=>l(oo(t[0],t[o-1],i)):l}function cO(t,r){const s=t[t.length-1];for(let n=1;n<=r;n++){const c=nu(0,r,n);t.push(sr(s,1,c))}}function dO(t){const r=[0];return cO(r,t.length-1),r}function uO(t,r){return t.map(s=>s*r)}function hO(t,r){return t.map(()=>r||k3).splice(0,t.length-1)}function _f({duration:t=300,keyframes:r,times:s,ease:n="easeInOut"}){const c=GI(n)?n.map(X1):X1(n),o={done:!1,value:r[0]},a=uO(s&&s.length===r.length?s:dO(r),t),d=V3(a,r,{ease:Array.isArray(c)?c:hO(r,c)});return{calculatedDuration:t,next:l=>(o.value=d(l),o.done=l>=t,o)}}function q3(t,r){return r?t*(1e3/r):0}const fO=5;function H3(t,r,s){const n=Math.max(r-fO,0);return q3(s-t(n),r-n)}const Hp=.001,mO=.01,ew=10,pO=.05,gO=1;function xO({duration:t=800,bounce:r=.25,velocity:s=0,mass:n=1}){let c,o;DI(t<=Qi(ew));let a=1-r;a=oo(pO,gO,a),t=oo(mO,ew,si(t)),a<1?(c=i=>{const u=i*a,f=u*t,h=u-s,m=M0(i,a),p=Math.exp(-f);return Hp-h/m*p},o=i=>{const f=i*a*t,h=f*s+s,m=Math.pow(a,2)*Math.pow(i,2)*t,p=Math.exp(-f),x=M0(Math.pow(i,2),a);return(-c(i)+Hp>0?-1:1)*((h-m)*p)/x}):(c=i=>{const u=Math.exp(-i*t),f=(i-s)*t+1;return-Hp+u*f},o=i=>{const u=Math.exp(-i*t),f=(s-i)*(t*t);return u*f});const d=5/t,l=vO(c,o,d);if(t=Qi(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const i=Math.pow(l,2)*n;return{stiffness:i,damping:a*2*Math.sqrt(n*i),duration:t}}}const yO=12;function vO(t,r,s){let n=s;for(let c=1;c<yO;c++)n=n-t(n)/r(n);return n}function M0(t,r){return t*Math.sqrt(1-r*r)}const bO=["duration","bounce"],wO=["stiffness","damping","mass"];function tw(t,r){return r.some(s=>t[s]!==void 0)}function jO(t){let r={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!tw(t,wO)&&tw(t,bO)){const s=xO(t);r={...r,...s,mass:1},r.isResolvedFromDuration=!0}return r}function W3({keyframes:t,restDelta:r,restSpeed:s,...n}){const c=t[0],o=t[t.length-1],a={done:!1,value:c},{stiffness:d,damping:l,mass:i,duration:u,velocity:f,isResolvedFromDuration:h}=jO({...n,velocity:-si(n.velocity||0)}),m=f||0,p=l/(2*Math.sqrt(d*i)),x=o-c,g=si(Math.sqrt(d/i)),v=Math.abs(x)<5;s||(s=v?.01:2),r||(r=v?.005:.5);let y;if(p<1){const b=M0(g,p);y=C=>{const T=Math.exp(-p*g*C);return o-T*((m+p*g*x)/b*Math.sin(b*C)+x*Math.cos(b*C))}}else if(p===1)y=b=>o-Math.exp(-g*b)*(x+(m+g*x)*b);else{const b=g*Math.sqrt(p*p-1);y=C=>{const T=Math.exp(-p*g*C),M=Math.min(b*C,300);return o-T*((m+p*g*x)*Math.sinh(M)+b*x*Math.cosh(M))/b}}return{calculatedDuration:h&&u||null,next:b=>{const C=y(b);if(h)a.done=b>=u;else{let T=m;b!==0&&(p<1?T=H3(y,b,C):T=0);const M=Math.abs(T)<=s,U=Math.abs(o-C)<=r;a.done=M&&U}return a.value=a.done?o:C,a}}}function sw({keyframes:t,velocity:r=0,power:s=.8,timeConstant:n=325,bounceDamping:c=10,bounceStiffness:o=500,modifyTarget:a,min:d,max:l,restDelta:i=.5,restSpeed:u}){const f=t[0],h={done:!1,value:f},m=L=>d!==void 0&&L<d||l!==void 0&&L>l,p=L=>d===void 0?l:l===void 0||Math.abs(d-L)<Math.abs(l-L)?d:l;let x=s*r;const g=f+x,v=a===void 0?g:a(g);v!==g&&(x=v-f);const y=L=>-x*Math.exp(-L/n),b=L=>v+y(L),C=L=>{const P=y(L),B=b(L);h.done=Math.abs(P)<=i,h.value=h.done?v:B};let T,M;const U=L=>{m(h.value)&&(T=L,M=W3({keyframes:[h.value,p(h.value)],velocity:H3(b,L,h.value),damping:c,stiffness:o,restDelta:i,restSpeed:u}))};return U(0),{calculatedDuration:null,next:L=>{let P=!1;return!M&&T===void 0&&(P=!0,C(L),U(L)),T!==void 0&&L>T?M.next(L-T):(!P&&C(L),h)}}}const _O=t=>{const r=({timestamp:s})=>t(s);return{start:()=>Vs.update(r,!0),stop:()=>ui(r),now:()=>tn.isProcessing?tn.timestamp:performance.now()}},rw=2e4;function nw(t){let r=0;const s=50;let n=t.next(r);for(;!n.done&&r<rw;)r+=s,n=t.next(r);return r>=rw?1/0:r}const NO={decay:sw,inertia:sw,tween:_f,keyframes:_f,spring:W3};function Nf({autoplay:t=!0,delay:r=0,driver:s=_O,keyframes:n,type:c="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:d="loop",onPlay:l,onStop:i,onComplete:u,onUpdate:f,...h}){let m=1,p=!1,x,g;const v=()=>{g=new Promise(I=>{x=I})};v();let y;const b=NO[c]||_f;let C;b!==_f&&typeof n[0]!="number"&&(C=V3([0,100],n,{clamp:!1}),n=[0,100]);const T=b({...h,keyframes:n});let M;d==="mirror"&&(M=b({...h,keyframes:[...n].reverse(),velocity:-(h.velocity||0)}));let U="idle",L=null,P=null,B=null;T.calculatedDuration===null&&o&&(T.calculatedDuration=nw(T));const{calculatedDuration:q}=T;let z=1/0,k=1/0;q!==null&&(z=q+a,k=z*(o+1)-a);let R=0;const S=I=>{if(P===null)return;m>0&&(P=Math.min(P,I)),m<0&&(P=Math.min(I-k/m,P)),L!==null?R=L:R=Math.round(I-P)*m;const D=R-r*(m>=0?1:-1),V=m>=0?D<0:D>k;R=Math.max(D,0),U==="finished"&&L===null&&(R=k);let H=R,G=T;if(o){const O=Math.min(R,k)/z;let W=Math.floor(O),K=O%1;!K&&O>=1&&(K=1),K===1&&W--,W=Math.min(W,o+1),!!(W%2)&&(d==="reverse"?(K=1-K,a&&(K-=a/z)):d==="mirror"&&(G=M)),H=oo(0,1,K)*z}const $=V?{done:!1,value:n[0]}:G.next(H);C&&($.value=C($.value));let{done:Y}=$;!V&&q!==null&&(Y=m>=0?R>=k:R<=0);const F=L===null&&(U==="finished"||U==="running"&&Y);return f&&f($.value),F&&j(),$},w=()=>{y&&y.stop(),y=void 0},_=()=>{U="idle",w(),x(),v(),P=B=null},j=()=>{U="finished",u&&u(),w(),x()},N=()=>{if(p)return;y||(y=s(S));const I=y.now();l&&l(),L!==null?P=I-L:(!P||U==="finished")&&(P=I),U==="finished"&&v(),B=P,L=null,U="running",y.start()};t&&N();const E={then(I,D){return g.then(I,D)},get time(){return si(R)},set time(I){I=Qi(I),R=I,L!==null||!y||m===0?L=I:P=y.now()-I/m},get duration(){const I=T.calculatedDuration===null?nw(T):T.calculatedDuration;return si(I)},get speed(){return m},set speed(I){I===m||!y||(m=I,E.time=si(R))},get state(){return U},play:N,pause:()=>{U="paused",L=R},stop:()=>{p=!0,U!=="idle"&&(U="idle",i&&i(),_())},cancel:()=>{B!==null&&S(B),_()},complete:()=>{U="finished"},sample:I=>(P=0,S(I))};return E}function SO(t){let r;return()=>(r===void 0&&(r=t()),r)}const CO=SO(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),kO=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),ih=10,EO=2e4,AO=(t,r)=>r.type==="spring"||t==="backgroundColor"||!_3(r.ease);function TO(t,r,{onUpdate:s,onComplete:n,...c}){if(!(CO()&&kO.has(r)&&!c.repeatDelay&&c.repeatType!=="mirror"&&c.damping!==0&&c.type!=="inertia"))return!1;let a=!1,d,l,i=!1;const u=()=>{l=new Promise(b=>{d=b})};u();let{keyframes:f,duration:h=300,ease:m,times:p}=c;if(AO(r,c)){const b=Nf({...c,repeat:0,delay:0});let C={done:!1,value:f[0]};const T=[];let M=0;for(;!C.done&&M<EO;)C=b.sample(M),T.push(C.value),M+=ih;p=void 0,f=T,h=M-ih,m="linear"}const x=BI(t.owner.current,r,f,{...c,duration:h,ease:m,times:p}),g=()=>{i=!1,x.cancel()},v=()=>{i=!0,Vs.update(g),d(),u()};return x.onfinish=()=>{i||(t.set(zI(f,c)),n&&n(),v())},{then(b,C){return l.then(b,C)},attachTimeline(b){return x.timeline=b,x.onfinish=null,cr},get time(){return si(x.currentTime||0)},set time(b){x.currentTime=Qi(b)},get speed(){return x.playbackRate},set speed(b){x.playbackRate=b},get duration(){return si(h)},play:()=>{a||(x.play(),ui(g))},pause:()=>x.pause(),stop:()=>{if(a=!0,x.playState==="idle")return;const{currentTime:b}=x;if(b){const C=Nf({...c,autoplay:!1});t.setWithVelocity(C.sample(b-ih).value,C.sample(b).value,ih)}v()},complete:()=>{i||x.finish()},cancel:v}}function RO({keyframes:t,delay:r,onUpdate:s,onComplete:n}){const c=()=>(s&&s(t[t.length-1]),n&&n(),{time:0,speed:1,duration:0,play:cr,pause:cr,stop:cr,then:o=>(o(),Promise.resolve()),cancel:cr,complete:cr});return r?Nf({keyframes:[0,1],duration:0,delay:r,onComplete:c}):c()}const PO={type:"spring",stiffness:500,damping:25,restSpeed:10},MO=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),IO={type:"keyframes",duration:.8},OO={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},FO=(t,{keyframes:r})=>r.length>2?IO:hl.has(t)?t.startsWith("scale")?MO(r[1]):PO:OO,I0=(t,r)=>t==="zIndex"?!1:!!(typeof r=="number"||Array.isArray(r)||typeof r=="string"&&(lo.test(r)||r==="0")&&!r.startsWith("url(")),LO=new Set(["brightness","contrast","saturate","opacity"]);function DO(t){const[r,s]=t.slice(0,-1).split("(");if(r==="drop-shadow")return t;const[n]=s.match(jm)||[];if(!n)return t;const c=s.replace(n,"");let o=LO.has(r)?1:0;return n!==s&&(o*=100),r+"("+o+c+")"}const $O=/([a-z-]*)\(.*?\)/g,O0={...lo,getAnimatableNone:t=>{const r=t.match($O);return r?r.map(DO).join(" "):t}},BO={...i3,color:cn,backgroundColor:cn,outlineColor:cn,fill:cn,stroke:cn,borderColor:cn,borderTopColor:cn,borderRightColor:cn,borderBottomColor:cn,borderLeftColor:cn,filter:O0,WebkitFilter:O0},nv=t=>BO[t];function G3(t,r){let s=nv(t);return s!==O0&&(s=lo),s.getAnimatableNone?s.getAnimatableNone(r):void 0}const K3=t=>/^0[^.\s]+$/.test(t);function zO(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||K3(t)}function UO(t,r,s,n){const c=I0(r,s);let o;Array.isArray(s)?o=[...s]:o=[null,s];const a=n.from!==void 0?n.from:t.get();let d;const l=[];for(let i=0;i<o.length;i++)o[i]===null&&(o[i]=i===0?a:o[i-1]),zO(o[i])&&l.push(i),typeof o[i]=="string"&&o[i]!=="none"&&o[i]!=="0"&&(d=o[i]);if(c&&l.length&&d)for(let i=0;i<l.length;i++){const u=l[i];o[u]=G3(r,d)}return o}function VO({when:t,delay:r,delayChildren:s,staggerChildren:n,staggerDirection:c,repeat:o,repeatType:a,repeatDelay:d,from:l,elapsed:i,...u}){return!!Object.keys(u).length}function av(t,r){return t[r]||t.default||t}const qO={skipAnimations:!1},iv=(t,r,s,n={})=>c=>{const o=av(n,t)||{},a=o.delay||n.delay||0;let{elapsed:d=0}=n;d=d-Qi(a);const l=UO(r,t,s,o),i=l[0],u=l[l.length-1],f=I0(t,i),h=I0(t,u);let m={keyframes:l,velocity:r.getVelocity(),ease:"easeOut",...o,delay:-d,onUpdate:p=>{r.set(p),o.onUpdate&&o.onUpdate(p)},onComplete:()=>{c(),o.onComplete&&o.onComplete()}};if(VO(o)||(m={...m,...FO(t,m)}),m.duration&&(m.duration=Qi(m.duration)),m.repeatDelay&&(m.repeatDelay=Qi(m.repeatDelay)),!f||!h||$I.current||o.type===!1||qO.skipAnimations)return RO(m);if(!n.isHandoff&&r.owner&&r.owner.current instanceof HTMLElement&&!r.owner.getProps().onUpdate){const p=TO(r,t,m);if(p)return p}return Nf(m)};function Sf(t){return!!(An(t)&&t.add)}const Y3=t=>/^\-?\d*\.?\d+$/.test(t);function ov(t,r){t.indexOf(r)===-1&&t.push(r)}function lv(t,r){const s=t.indexOf(r);s>-1&&t.splice(s,1)}class cv{constructor(){this.subscriptions=[]}add(r){return ov(this.subscriptions,r),()=>lv(this.subscriptions,r)}notify(r,s,n){const c=this.subscriptions.length;if(c)if(c===1)this.subscriptions[0](r,s,n);else for(let o=0;o<c;o++){const a=this.subscriptions[o];a&&a(r,s,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const HO=t=>!isNaN(parseFloat(t));class WO{constructor(r,s={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,c=!0)=>{this.prev=this.current,this.current=n;const{delta:o,timestamp:a}=tn;this.lastUpdated!==a&&(this.timeDelta=o,this.lastUpdated=a,Vs.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),c&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Vs.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=r,this.canTrackVelocity=HO(this.current),this.owner=s.owner}onChange(r){return this.on("change",r)}on(r,s){this.events[r]||(this.events[r]=new cv);const n=this.events[r].add(s);return r==="change"?()=>{n(),Vs.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const r in this.events)this.events[r].clear()}attach(r,s){this.passiveEffect=r,this.stopPassiveEffect=s}set(r,s=!0){!s||!this.passiveEffect?this.updateAndNotify(r,s):this.passiveEffect(r,this.updateAndNotify)}setWithVelocity(r,s,n){this.set(s),this.prev=r,this.timeDelta=n}jump(r){this.updateAndNotify(r),this.prev=r,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?q3(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(r){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=r(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function uc(t,r){return new WO(t,r)}const Q3=t=>r=>r.test(t),GO={test:t=>t==="auto",parse:t=>t},X3=[fl,rs,La,bi,eI,JM,GO],qc=t=>X3.find(Q3(t)),KO=[...X3,cn,lo],YO=t=>KO.find(Q3(t));function QO(t,r,s){t.hasValue(r)?t.getValue(r).set(s):t.addValue(r,uc(s))}function XO(t,r){const s=Nm(t,r);let{transitionEnd:n={},transition:c={},...o}=s?t.makeTargetAnimatable(s,!1):{};o={...o,...n};for(const a in o){const d=mI(o[a]);QO(t,a,d)}}function ZO(t,r,s){var n,c;const o=Object.keys(r).filter(d=>!t.hasValue(d)),a=o.length;if(a)for(let d=0;d<a;d++){const l=o[d],i=r[l];let u=null;Array.isArray(i)&&(u=i[0]),u===null&&(u=(c=(n=s[l])!==null&&n!==void 0?n:t.readValue(l))!==null&&c!==void 0?c:r[l]),u!=null&&(typeof u=="string"&&(Y3(u)||K3(u))?u=parseFloat(u):!YO(u)&&lo.test(i)&&(u=G3(l,i)),t.addValue(l,uc(u,{owner:t})),s[l]===void 0&&(s[l]=u),u!==null&&t.setBaseTarget(l,u))}}function JO(t,r){return r?(r[t]||r.default||r).from:void 0}function eF(t,r,s){const n={};for(const c in t){const o=JO(c,r);if(o!==void 0)n[c]=o;else{const a=s.getValue(c);a&&(n[c]=a.get())}}return n}function tF({protectedKeys:t,needsAnimating:r},s){const n=t.hasOwnProperty(s)&&r[s]!==!0;return r[s]=!1,n}function sF(t,r){const s=t.get();if(Array.isArray(r)){for(let n=0;n<r.length;n++)if(r[n]!==s)return!0}else return s!==r}function Z3(t,r,{delay:s=0,transitionOverride:n,type:c}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:a,...d}=t.makeTargetAnimatable(r);const l=t.getValue("willChange");n&&(o=n);const i=[],u=c&&t.animationState&&t.animationState.getState()[c];for(const f in d){const h=t.getValue(f),m=d[f];if(!h||m===void 0||u&&tF(u,f))continue;const p={delay:s,elapsed:0,...av(o||{},f)};if(window.HandoffAppearAnimations){const v=t.getProps()[J4];if(v){const y=window.HandoffAppearAnimations(v,f,h,Vs);y!==null&&(p.elapsed=y,p.isHandoff=!0)}}let x=!p.isHandoff&&!sF(h,m);if(p.type==="spring"&&(h.getVelocity()||p.velocity)&&(x=!1),h.animation&&(x=!1),x)continue;h.start(iv(f,h,m,t.shouldReduceMotion&&hl.has(f)?{type:!1}:p));const g=h.animation;Sf(l)&&(l.add(f),g.then(()=>l.remove(f))),i.push(g)}return a&&Promise.all(i).then(()=>{a&&XO(t,a)}),i}function F0(t,r,s={}){const n=Nm(t,r,s.custom);let{transition:c=t.getDefaultTransition()||{}}=n||{};s.transitionOverride&&(c=s.transitionOverride);const o=n?()=>Promise.all(Z3(t,n,s)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:i=0,staggerChildren:u,staggerDirection:f}=c;return rF(t,r,i+l,u,f,s)}:()=>Promise.resolve(),{when:d}=c;if(d){const[l,i]=d==="beforeChildren"?[o,a]:[a,o];return l().then(()=>i())}else return Promise.all([o(),a(s.delay)])}function rF(t,r,s=0,n=0,c=1,o){const a=[],d=(t.variantChildren.size-1)*n,l=c===1?(i=0)=>i*n:(i=0)=>d-i*n;return Array.from(t.variantChildren).sort(nF).forEach((i,u)=>{i.notify("AnimationStart",r),a.push(F0(i,r,{...o,delay:s+l(u)}).then(()=>i.notify("AnimationComplete",r)))}),Promise.all(a)}function nF(t,r){return t.sortNodePosition(r)}function aF(t,r,s={}){t.notify("AnimationStart",r);let n;if(Array.isArray(r)){const c=r.map(o=>F0(t,o,s));n=Promise.all(c)}else if(typeof r=="string")n=F0(t,r,s);else{const c=typeof r=="function"?Nm(t,r,s.custom):r;n=Promise.all(Z3(t,c,s))}return n.then(()=>t.notify("AnimationComplete",r))}const iF=[...qy].reverse(),oF=qy.length;function lF(t){return r=>Promise.all(r.map(({animation:s,options:n})=>aF(t,s,n)))}function cF(t){let r=lF(t);const s=uF();let n=!0;const c=(l,i)=>{const u=Nm(t,i);if(u){const{transition:f,transitionEnd:h,...m}=u;l={...l,...m,...h}}return l};function o(l){r=l(t)}function a(l,i){const u=t.getProps(),f=t.getVariantContext(!0)||{},h=[],m=new Set;let p={},x=1/0;for(let v=0;v<oF;v++){const y=iF[v],b=s[y],C=u[y]!==void 0?u[y]:f[y],T=su(C),M=y===i?b.isActive:null;M===!1&&(x=v);let U=C===f[y]&&C!==u[y]&&T;if(U&&n&&t.manuallyAnimateOnMount&&(U=!1),b.protectedKeys={...p},!b.isActive&&M===null||!C&&!b.prevProp||bm(C)||typeof C=="boolean")continue;let P=dF(b.prevProp,C)||y===i&&b.isActive&&!U&&T||v>x&&T,B=!1;const q=Array.isArray(C)?C:[C];let z=q.reduce(c,{});M===!1&&(z={});const{prevResolvedValues:k={}}=b,R={...k,...z},S=w=>{P=!0,m.has(w)&&(B=!0,m.delete(w)),b.needsAnimating[w]=!0};for(const w in R){const _=z[w],j=k[w];if(p.hasOwnProperty(w))continue;let N=!1;wf(_)&&wf(j)?N=!w3(_,j):N=_!==j,N?_!==void 0?S(w):m.add(w):_!==void 0&&m.has(w)?S(w):b.protectedKeys[w]=!0}b.prevProp=C,b.prevResolvedValues=z,b.isActive&&(p={...p,...z}),n&&t.blockInitialAnimation&&(P=!1),P&&(!U||B)&&h.push(...q.map(w=>({animation:w,options:{type:y,...l}})))}if(m.size){const v={};m.forEach(y=>{const b=t.getBaseTarget(y);b!==void 0&&(v[y]=b)}),h.push({animation:v})}let g=!!h.length;return n&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(g=!1),n=!1,g?r(h):Promise.resolve()}function d(l,i,u){var f;if(s[l].isActive===i)return Promise.resolve();(f=t.variantChildren)===null||f===void 0||f.forEach(m=>{var p;return(p=m.animationState)===null||p===void 0?void 0:p.setActive(l,i)}),s[l].isActive=i;const h=a(u,l);for(const m in s)s[m].protectedKeys={};return h}return{animateChanges:a,setActive:d,setAnimateFunction:o,getState:()=>s}}function dF(t,r){return typeof r=="string"?r!==t:Array.isArray(r)?!w3(r,t):!1}function Co(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function uF(){return{animate:Co(!0),whileInView:Co(),whileHover:Co(),whileTap:Co(),whileDrag:Co(),whileFocus:Co(),exit:Co()}}class hF extends vo{constructor(r){super(r),r.animationState||(r.animationState=cF(r))}updateAnimationControlsSubscription(){const{animate:r}=this.node.getProps();this.unmount(),bm(r)&&(this.unmount=r.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:r}=this.node.getProps(),{animate:s}=this.node.prevProps||{};r!==s&&this.updateAnimationControlsSubscription()}unmount(){}}let fF=0;class mF extends vo{constructor(){super(...arguments),this.id=fF++}update(){if(!this.node.presenceContext)return;const{isPresent:r,onExitComplete:s,custom:n}=this.node.presenceContext,{isPresent:c}=this.node.prevPresenceContext||{};if(!this.node.animationState||r===c)return;const o=this.node.animationState.setActive("exit",!r,{custom:n??this.node.getProps().custom});s&&!r&&o.then(()=>s(this.id))}mount(){const{register:r}=this.node.presenceContext||{};r&&(this.unmount=r(this.id))}unmount(){}}const pF={animation:{Feature:hF},exit:{Feature:mF}},aw=(t,r)=>Math.abs(t-r);function gF(t,r){const s=aw(t.x,r.x),n=aw(t.y,r.y);return Math.sqrt(s**2+n**2)}class J3{constructor(r,s,{transformPagePoint:n,contextWindow:c,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Gp(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,m=gF(f.offset,{x:0,y:0})>=3;if(!h&&!m)return;const{point:p}=f,{timestamp:x}=tn;this.history.push({...p,timestamp:x});const{onStart:g,onMove:v}=this.handlers;h||(g&&g(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,f)},this.handlePointerMove=(f,h)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Wp(h,this.transformPagePoint),Vs.update(this.updatePoint,!0)},this.handlePointerUp=(f,h)=>{this.end();const{onEnd:m,onSessionEnd:p,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Gp(f.type==="pointercancel"?this.lastMoveEventInfo:Wp(h,this.transformPagePoint),this.history);this.startEvent&&m&&m(f,g),p&&p(f,g)},!g3(r))return;this.dragSnapToOrigin=o,this.handlers=s,this.transformPagePoint=n,this.contextWindow=c||window;const a=_m(r),d=Wp(a,this.transformPagePoint),{point:l}=d,{timestamp:i}=tn;this.history=[{...l,timestamp:i}];const{onSessionStart:u}=s;u&&u(r,Gp(d,this.history)),this.removeListeners=Yi(ti(this.contextWindow,"pointermove",this.handlePointerMove),ti(this.contextWindow,"pointerup",this.handlePointerUp),ti(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(r){this.handlers=r}end(){this.removeListeners&&this.removeListeners(),ui(this.updatePoint)}}function Wp(t,r){return r?{point:r(t.point)}:t}function iw(t,r){return{x:t.x-r.x,y:t.y-r.y}}function Gp({point:t},r){return{point:t,delta:iw(t,e6(r)),offset:iw(t,xF(r)),velocity:yF(r,.1)}}function xF(t){return t[0]}function e6(t){return t[t.length-1]}function yF(t,r){if(t.length<2)return{x:0,y:0};let s=t.length-1,n=null;const c=e6(t);for(;s>=0&&(n=t[s],!(c.timestamp-n.timestamp>Qi(r)));)s--;if(!n)return{x:0,y:0};const o=si(c.timestamp-n.timestamp);if(o===0)return{x:0,y:0};const a={x:(c.x-n.x)/o,y:(c.y-n.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Vn(t){return t.max-t.min}function L0(t,r=0,s=.01){return Math.abs(t-r)<=s}function ow(t,r,s,n=.5){t.origin=n,t.originPoint=sr(r.min,r.max,t.origin),t.scale=Vn(s)/Vn(r),(L0(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=sr(s.min,s.max,t.origin)-t.originPoint,(L0(t.translate)||isNaN(t.translate))&&(t.translate=0)}function bd(t,r,s,n){ow(t.x,r.x,s.x,n?n.originX:void 0),ow(t.y,r.y,s.y,n?n.originY:void 0)}function lw(t,r,s){t.min=s.min+r.min,t.max=t.min+Vn(r)}function vF(t,r,s){lw(t.x,r.x,s.x),lw(t.y,r.y,s.y)}function cw(t,r,s){t.min=r.min-s.min,t.max=t.min+Vn(r)}function wd(t,r,s){cw(t.x,r.x,s.x),cw(t.y,r.y,s.y)}function bF(t,{min:r,max:s},n){return r!==void 0&&t<r?t=n?sr(r,t,n.min):Math.max(t,r):s!==void 0&&t>s&&(t=n?sr(s,t,n.max):Math.min(t,s)),t}function dw(t,r,s){return{min:r!==void 0?t.min+r:void 0,max:s!==void 0?t.max+s-(t.max-t.min):void 0}}function wF(t,{top:r,left:s,bottom:n,right:c}){return{x:dw(t.x,s,c),y:dw(t.y,r,n)}}function uw(t,r){let s=r.min-t.min,n=r.max-t.max;return r.max-r.min<t.max-t.min&&([s,n]=[n,s]),{min:s,max:n}}function jF(t,r){return{x:uw(t.x,r.x),y:uw(t.y,r.y)}}function _F(t,r){let s=.5;const n=Vn(t),c=Vn(r);return c>n?s=nu(r.min,r.max-n,t.min):n>c&&(s=nu(t.min,t.max-c,r.min)),oo(0,1,s)}function NF(t,r){const s={};return r.min!==void 0&&(s.min=r.min-t.min),r.max!==void 0&&(s.max=r.max-t.min),s}const D0=.35;function SF(t=D0){return t===!1?t=0:t===!0&&(t=D0),{x:hw(t,"left","right"),y:hw(t,"top","bottom")}}function hw(t,r,s){return{min:fw(t,r),max:fw(t,s)}}function fw(t,r){return typeof t=="number"?t:t[r]||0}const mw=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ll=()=>({x:mw(),y:mw()}),pw=()=>({min:0,max:0}),vr=()=>({x:pw(),y:pw()});function Qn(t){return[t("x"),t("y")]}function t6({top:t,left:r,right:s,bottom:n}){return{x:{min:r,max:s},y:{min:t,max:n}}}function CF({x:t,y:r}){return{top:r.min,right:t.max,bottom:r.max,left:t.min}}function kF(t,r){if(!r)return t;const s=r({x:t.left,y:t.top}),n=r({x:t.right,y:t.bottom});return{top:s.y,left:s.x,bottom:n.y,right:n.x}}function Kp(t){return t===void 0||t===1}function $0({scale:t,scaleX:r,scaleY:s}){return!Kp(t)||!Kp(r)||!Kp(s)}function Ao(t){return $0(t)||s6(t)||t.z||t.rotate||t.rotateX||t.rotateY}function s6(t){return gw(t.x)||gw(t.y)}function gw(t){return t&&t!=="0%"}function Cf(t,r,s){const n=t-s,c=r*n;return s+c}function xw(t,r,s,n,c){return c!==void 0&&(t=Cf(t,c,n)),Cf(t,s,n)+r}function B0(t,r=0,s=1,n,c){t.min=xw(t.min,r,s,n,c),t.max=xw(t.max,r,s,n,c)}function r6(t,{x:r,y:s}){B0(t.x,r.translate,r.scale,r.originPoint),B0(t.y,s.translate,s.scale,s.originPoint)}function EF(t,r,s,n=!1){const c=s.length;if(!c)return;r.x=r.y=1;let o,a;for(let d=0;d<c;d++){o=s[d],a=o.projectionDelta;const l=o.instance;l&&l.style&&l.style.display==="contents"||(n&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Dl(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(r.x*=a.x.scale,r.y*=a.y.scale,r6(t,a)),n&&Ao(o.latestValues)&&Dl(t,o.latestValues))}r.x=yw(r.x),r.y=yw(r.y)}function yw(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function _i(t,r){t.min=t.min+r,t.max=t.max+r}function vw(t,r,[s,n,c]){const o=r[c]!==void 0?r[c]:.5,a=sr(t.min,t.max,o);B0(t,r[s],r[n],a,r.scale)}const AF=["x","scaleX","originX"],TF=["y","scaleY","originY"];function Dl(t,r){vw(t.x,r,AF),vw(t.y,r,TF)}function n6(t,r){return t6(kF(t.getBoundingClientRect(),r))}function RF(t,r,s){const n=n6(t,s),{scroll:c}=r;return c&&(_i(n.x,c.offset.x),_i(n.y,c.offset.y)),n}const a6=({current:t})=>t?t.ownerDocument.defaultView:null,PF=new WeakMap;class MF{constructor(r){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=vr(),this.visualElement=r}start(r,{snapToCursor:s=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const c=u=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(_m(u,"page").point)},o=(u,f)=>{const{drag:h,dragPropagation:m,onDragStart:p}=this.getProps();if(h&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=y3(h),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Qn(g=>{let v=this.getAxisMotionValue(g).get()||0;if(La.test(v)){const{projection:y}=this.visualElement;if(y&&y.layout){const b=y.layout.layoutBox[g];b&&(v=Vn(b)*(parseFloat(v)/100))}}this.originPoint[g]=v}),p&&Vs.update(()=>p(u,f),!1,!0);const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},a=(u,f)=>{const{dragPropagation:h,dragDirectionLock:m,onDirectionLock:p,onDrag:x}=this.getProps();if(!h&&!this.openGlobalLock)return;const{offset:g}=f;if(m&&this.currentDirection===null){this.currentDirection=IF(g),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",f.point,g),this.updateAxis("y",f.point,g),this.visualElement.render(),x&&x(u,f)},d=(u,f)=>this.stop(u,f),l=()=>Qn(u=>{var f;return this.getAnimationState(u)==="paused"&&((f=this.getAxisMotionValue(u).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:i}=this.getProps();this.panSession=new J3(r,{onSessionStart:c,onStart:o,onMove:a,onSessionEnd:d,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:i,contextWindow:a6(this.visualElement)})}stop(r,s){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:c}=s;this.startAnimation(c);const{onDragEnd:o}=this.getProps();o&&Vs.update(()=>o(r,s))}cancel(){this.isDragging=!1;const{projection:r,animationState:s}=this.visualElement;r&&(r.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(r,s,n){const{drag:c}=this.getProps();if(!n||!oh(r,c,this.currentDirection))return;const o=this.getAxisMotionValue(r);let a=this.originPoint[r]+n[r];this.constraints&&this.constraints[r]&&(a=bF(a,this.constraints[r],this.elastic[r])),o.set(a)}resolveConstraints(){var r;const{dragConstraints:s,dragElastic:n}=this.getProps(),c=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(r=this.visualElement.projection)===null||r===void 0?void 0:r.layout,o=this.constraints;s&&Ol(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&c?this.constraints=wF(c.layoutBox,s):this.constraints=!1,this.elastic=SF(n),o!==this.constraints&&c&&this.constraints&&!this.hasMutatedConstraints&&Qn(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=NF(c.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:r,onMeasureDragConstraints:s}=this.getProps();if(!r||!Ol(r))return!1;const n=r.current,{projection:c}=this.visualElement;if(!c||!c.layout)return!1;const o=RF(n,c.root,this.visualElement.getTransformPagePoint());let a=jF(c.layout.layoutBox,o);if(s){const d=s(CF(a));this.hasMutatedConstraints=!!d,d&&(a=t6(d))}return a}startAnimation(r){const{drag:s,dragMomentum:n,dragElastic:c,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:d}=this.getProps(),l=this.constraints||{},i=Qn(u=>{if(!oh(u,s,this.currentDirection))return;let f=l&&l[u]||{};a&&(f={min:0,max:0});const h=c?200:1e6,m=c?40:1e7,p={type:"inertia",velocity:n?r[u]:0,bounceStiffness:h,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...o,...f};return this.startAxisValueAnimation(u,p)});return Promise.all(i).then(d)}startAxisValueAnimation(r,s){const n=this.getAxisMotionValue(r);return n.start(iv(r,n,0,s))}stopAnimation(){Qn(r=>this.getAxisMotionValue(r).stop())}pauseAnimation(){Qn(r=>{var s;return(s=this.getAxisMotionValue(r).animation)===null||s===void 0?void 0:s.pause()})}getAnimationState(r){var s;return(s=this.getAxisMotionValue(r).animation)===null||s===void 0?void 0:s.state}getAxisMotionValue(r){const s="_drag"+r.toUpperCase(),n=this.visualElement.getProps(),c=n[s];return c||this.visualElement.getValue(r,(n.initial?n.initial[r]:void 0)||0)}snapToCursor(r){Qn(s=>{const{drag:n}=this.getProps();if(!oh(s,n,this.currentDirection))return;const{projection:c}=this.visualElement,o=this.getAxisMotionValue(s);if(c&&c.layout){const{min:a,max:d}=c.layout.layoutBox[s];o.set(r[s]-sr(a,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:r,dragConstraints:s}=this.getProps(),{projection:n}=this.visualElement;if(!Ol(s)||!n||!this.constraints)return;this.stopAnimation();const c={x:0,y:0};Qn(a=>{const d=this.getAxisMotionValue(a);if(d){const l=d.get();c[a]=_F({min:l,max:l},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Qn(a=>{if(!oh(a,r,null))return;const d=this.getAxisMotionValue(a),{min:l,max:i}=this.constraints[a];d.set(sr(l,i,c[a]))})}addListeners(){if(!this.visualElement.current)return;PF.set(this.visualElement,this);const r=this.visualElement.current,s=ti(r,"pointerdown",l=>{const{drag:i,dragListener:u=!0}=this.getProps();i&&u&&this.start(l)}),n=()=>{const{dragConstraints:l}=this.getProps();Ol(l)&&(this.constraints=this.resolveRefConstraints())},{projection:c}=this.visualElement,o=c.addEventListener("measure",n);c&&!c.layout&&(c.root&&c.root.updateScroll(),c.updateLayout()),n();const a=Za(window,"resize",()=>this.scalePositionWithinConstraints()),d=c.addEventListener("didUpdate",({delta:l,hasLayoutChanged:i})=>{this.isDragging&&i&&(Qn(u=>{const f=this.getAxisMotionValue(u);f&&(this.originPoint[u]+=l[u].translate,f.set(f.get()+l[u].translate))}),this.visualElement.render())});return()=>{a(),s(),o(),d&&d()}}getProps(){const r=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:n=!1,dragPropagation:c=!1,dragConstraints:o=!1,dragElastic:a=D0,dragMomentum:d=!0}=r;return{...r,drag:s,dragDirectionLock:n,dragPropagation:c,dragConstraints:o,dragElastic:a,dragMomentum:d}}}function oh(t,r,s){return(r===!0||r===t)&&(s===null||s===t)}function IF(t,r=10){let s=null;return Math.abs(t.y)>r?s="y":Math.abs(t.x)>r&&(s="x"),s}class OF extends vo{constructor(r){super(r),this.removeGroupControls=cr,this.removeListeners=cr,this.controls=new MF(r)}mount(){const{dragControls:r}=this.node.getProps();r&&(this.removeGroupControls=r.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||cr}unmount(){this.removeGroupControls(),this.removeListeners()}}const bw=t=>(r,s)=>{t&&Vs.update(()=>t(r,s))};class FF extends vo{constructor(){super(...arguments),this.removePointerDownListener=cr}onPointerDown(r){this.session=new J3(r,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:a6(this.node)})}createPanHandlers(){const{onPanSessionStart:r,onPanStart:s,onPan:n,onPanEnd:c}=this.node.getProps();return{onSessionStart:bw(r),onStart:bw(s),onMove:n,onEnd:(o,a)=>{delete this.session,c&&Vs.update(()=>c(o,a))}}}mount(){this.removePointerDownListener=ti(this.node.current,"pointerdown",r=>this.onPointerDown(r))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function LF(){const t=A.useContext(ym);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:s,register:n}=t,c=A.useId();return A.useEffect(()=>n(c),[]),!r&&s?[!1,()=>s&&s(c)]:[!0]}const Fh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ww(t,r){return r.max===r.min?0:t/(r.max-r.min)*100}const Hc={correct:(t,r)=>{if(!r.target)return t;if(typeof t=="string")if(rs.test(t))t=parseFloat(t);else return t;const s=ww(t,r.target.x),n=ww(t,r.target.y);return`${s}% ${n}%`}},DF={correct:(t,{treeScale:r,projectionDelta:s})=>{const n=t,c=lo.parse(t);if(c.length>5)return n;const o=lo.createTransformer(t),a=typeof c[0]!="number"?1:0,d=s.x.scale*r.x,l=s.y.scale*r.y;c[0+a]/=d,c[1+a]/=l;const i=sr(d,l,.5);return typeof c[2+a]=="number"&&(c[2+a]/=i),typeof c[3+a]=="number"&&(c[3+a]/=i),o(c)}};class $F extends Lt.Component{componentDidMount(){const{visualElement:r,layoutGroup:s,switchLayoutGroup:n,layoutId:c}=this.props,{projection:o}=r;WM(BF),o&&(s.group&&s.group.add(o),n&&n.register&&c&&n.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Fh.hasEverUpdated=!0}getSnapshotBeforeUpdate(r){const{layoutDependency:s,visualElement:n,drag:c,isPresent:o}=this.props,a=n.projection;return a&&(a.isPresent=o,c||r.layoutDependency!==s||s===void 0?a.willUpdate():this.safeToRemove(),r.isPresent!==o&&(o?a.promote():a.relegate()||Vs.postRender(()=>{const d=a.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:r}=this.props.visualElement;r&&(r.root.didUpdate(),queueMicrotask(()=>{!r.currentAnimation&&r.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:r,layoutGroup:s,switchLayoutGroup:n}=this.props,{projection:c}=r;c&&(c.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(c),n&&n.deregister&&n.deregister(c))}safeToRemove(){const{safeToRemove:r}=this.props;r&&r()}render(){return null}}function i6(t){const[r,s]=LF(),n=A.useContext(Wy);return Lt.createElement($F,{...t,layoutGroup:n,switchLayoutGroup:A.useContext(t3),isPresent:r,safeToRemove:s})}const BF={borderRadius:{...Hc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Hc,borderTopRightRadius:Hc,borderBottomLeftRadius:Hc,borderBottomRightRadius:Hc,boxShadow:DF},o6=["TopLeft","TopRight","BottomLeft","BottomRight"],zF=o6.length,jw=t=>typeof t=="string"?parseFloat(t):t,_w=t=>typeof t=="number"||rs.test(t);function UF(t,r,s,n,c,o){c?(t.opacity=sr(0,s.opacity!==void 0?s.opacity:1,VF(n)),t.opacityExit=sr(r.opacity!==void 0?r.opacity:1,0,qF(n))):o&&(t.opacity=sr(r.opacity!==void 0?r.opacity:1,s.opacity!==void 0?s.opacity:1,n));for(let a=0;a<zF;a++){const d=`border${o6[a]}Radius`;let l=Nw(r,d),i=Nw(s,d);if(l===void 0&&i===void 0)continue;l||(l=0),i||(i=0),l===0||i===0||_w(l)===_w(i)?(t[d]=Math.max(sr(jw(l),jw(i),n),0),(La.test(i)||La.test(l))&&(t[d]+="%")):t[d]=i}(r.rotate||s.rotate)&&(t.rotate=sr(r.rotate||0,s.rotate||0,n))}function Nw(t,r){return t[r]!==void 0?t[r]:t.borderRadius}const VF=l6(0,.5,T3),qF=l6(.5,.95,cr);function l6(t,r,s){return n=>n<t?0:n>r?1:s(nu(t,r,n))}function Sw(t,r){t.min=r.min,t.max=r.max}function Yn(t,r){Sw(t.x,r.x),Sw(t.y,r.y)}function Cw(t,r,s,n,c){return t-=r,t=Cf(t,1/s,n),c!==void 0&&(t=Cf(t,1/c,n)),t}function HF(t,r=0,s=1,n=.5,c,o=t,a=t){if(La.test(r)&&(r=parseFloat(r),r=sr(a.min,a.max,r/100)-a.min),typeof r!="number")return;let d=sr(o.min,o.max,n);t===o&&(d-=r),t.min=Cw(t.min,r,s,d,c),t.max=Cw(t.max,r,s,d,c)}function kw(t,r,[s,n,c],o,a){HF(t,r[s],r[n],r[c],r.scale,o,a)}const WF=["x","scaleX","originX"],GF=["y","scaleY","originY"];function Ew(t,r,s,n){kw(t.x,r,WF,s?s.x:void 0,n?n.x:void 0),kw(t.y,r,GF,s?s.y:void 0,n?n.y:void 0)}function Aw(t){return t.translate===0&&t.scale===1}function c6(t){return Aw(t.x)&&Aw(t.y)}function KF(t,r){return t.x.min===r.x.min&&t.x.max===r.x.max&&t.y.min===r.y.min&&t.y.max===r.y.max}function d6(t,r){return Math.round(t.x.min)===Math.round(r.x.min)&&Math.round(t.x.max)===Math.round(r.x.max)&&Math.round(t.y.min)===Math.round(r.y.min)&&Math.round(t.y.max)===Math.round(r.y.max)}function Tw(t){return Vn(t.x)/Vn(t.y)}class YF{constructor(){this.members=[]}add(r){ov(this.members,r),r.scheduleRender()}remove(r){if(lv(this.members,r),r===this.prevLead&&(this.prevLead=void 0),r===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(r){const s=this.members.findIndex(c=>r===c);if(s===0)return!1;let n;for(let c=s;c>=0;c--){const o=this.members[c];if(o.isPresent!==!1){n=o;break}}return n?(this.promote(n),!0):!1}promote(r,s){const n=this.lead;if(r!==n&&(this.prevLead=n,this.lead=r,r.show(),n)){n.instance&&n.scheduleRender(),r.scheduleRender(),r.resumeFrom=n,s&&(r.resumeFrom.preserveOpacity=!0),n.snapshot&&(r.snapshot=n.snapshot,r.snapshot.latestValues=n.animationValues||n.latestValues),r.root&&r.root.isUpdating&&(r.isLayoutDirty=!0);const{crossfade:c}=r.options;c===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(r=>{const{options:s,resumingFrom:n}=r;s.onExitComplete&&s.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(r=>{r.instance&&r.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Rw(t,r,s){let n="";const c=t.x.translate/r.x,o=t.y.translate/r.y;if((c||o)&&(n=`translate3d(${c}px, ${o}px, 0) `),(r.x!==1||r.y!==1)&&(n+=`scale(${1/r.x}, ${1/r.y}) `),s){const{rotate:l,rotateX:i,rotateY:u}=s;l&&(n+=`rotate(${l}deg) `),i&&(n+=`rotateX(${i}deg) `),u&&(n+=`rotateY(${u}deg) `)}const a=t.x.scale*r.x,d=t.y.scale*r.y;return(a!==1||d!==1)&&(n+=`scale(${a}, ${d})`),n||"none"}const QF=(t,r)=>t.depth-r.depth;class XF{constructor(){this.children=[],this.isDirty=!1}add(r){ov(this.children,r),this.isDirty=!0}remove(r){lv(this.children,r),this.isDirty=!0}forEach(r){this.isDirty&&this.children.sort(QF),this.isDirty=!1,this.children.forEach(r)}}function ZF(t,r){const s=performance.now(),n=({timestamp:c})=>{const o=c-s;o>=r&&(ui(n),t(o-r))};return Vs.read(n,!0),()=>ui(n)}function JF(t){window.MotionDebug&&window.MotionDebug.record(t)}function eL(t){return t instanceof SVGElement&&t.tagName!=="svg"}function tL(t,r,s){const n=An(t)?t:uc(t);return n.start(iv("",n,r,s)),n.animation}const Pw=["","X","Y","Z"],sL={visibility:"hidden"},Mw=1e3;let rL=0;const To={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function u6({attachResizeListener:t,defaultParent:r,measureScroll:s,checkIsScrollRoot:n,resetTransform:c}){return class{constructor(a={},d=r==null?void 0:r()){this.id=rL++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,To.totalNodes=To.resolvedTargetDeltas=To.recalculatedProjection=0,this.nodes.forEach(iL),this.nodes.forEach(uL),this.nodes.forEach(hL),this.nodes.forEach(oL),JF(To)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new XF)}addEventListener(a,d){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new cv),this.eventHandlers.get(a).add(d)}notifyListeners(a,...d){const l=this.eventHandlers.get(a);l&&l.notify(...d)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,d=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=eL(a),this.instance=a;const{layoutId:l,layout:i,visualElement:u}=this.options;if(u&&!u.current&&u.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),d&&(i||l)&&(this.isLayoutDirty=!0),t){let f;const h=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=ZF(h,250),Fh.hasAnimatedSinceResize&&(Fh.hasAnimatedSinceResize=!1,this.nodes.forEach(Ow))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||i)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeTargetChanged:m,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||u.getDefaultTransition()||xL,{onLayoutAnimationStart:g,onLayoutAnimationComplete:v}=u.getProps(),y=!this.targetLayout||!d6(this.targetLayout,p)||m,b=!h&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||h&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,b);const C={...av(x,"layout"),onPlay:g,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C)}else h||Ow(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ui(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(fL),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const f=this.path[u];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:d,layout:l}=this.options;if(d===void 0&&!l)return;const i=this.getTransformTemplate();this.prevTransformTemplateValue=i?i(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Iw);return}this.isUpdating||this.nodes.forEach(cL),this.isUpdating=!1,this.nodes.forEach(dL),this.nodes.forEach(nL),this.nodes.forEach(aL),this.clearAllSnapshots();const d=performance.now();tn.delta=oo(0,1e3/60,d-tn.timestamp),tn.timestamp=d,tn.isProcessing=!0,Dp.update.process(tn),Dp.preRender.process(tn),Dp.render.process(tn),tn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(lL),this.sharedNodes.forEach(mL)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Vs.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Vs.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=vr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let d=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(d=!1),d&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:n(this.instance),offset:s(this.instance)})}resetTransform(){if(!c)return;const a=this.isLayoutDirty||this.shouldResetTransform,d=this.projectionDelta&&!c6(this.projectionDelta),l=this.getTransformTemplate(),i=l?l(this.latestValues,""):void 0,u=i!==this.prevTransformTemplateValue;a&&(d||Ao(this.latestValues)||u)&&(c(this.instance,i),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const d=this.measurePageBox();let l=this.removeElementScroll(d);return a&&(l=this.removeTransform(l)),yL(l),{animationId:this.root.animationId,measuredBox:d,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return vr();const d=a.measureViewportBox(),{scroll:l}=this.root;return l&&(_i(d.x,l.offset.x),_i(d.y,l.offset.y)),d}removeElementScroll(a){const d=vr();Yn(d,a);for(let l=0;l<this.path.length;l++){const i=this.path[l],{scroll:u,options:f}=i;if(i!==this.root&&u&&f.layoutScroll){if(u.isRoot){Yn(d,a);const{scroll:h}=this.root;h&&(_i(d.x,-h.offset.x),_i(d.y,-h.offset.y))}_i(d.x,u.offset.x),_i(d.y,u.offset.y)}}return d}applyTransform(a,d=!1){const l=vr();Yn(l,a);for(let i=0;i<this.path.length;i++){const u=this.path[i];!d&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Dl(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Ao(u.latestValues)&&Dl(l,u.latestValues)}return Ao(this.latestValues)&&Dl(l,this.latestValues),l}removeTransform(a){const d=vr();Yn(d,a);for(let l=0;l<this.path.length;l++){const i=this.path[l];if(!i.instance||!Ao(i.latestValues))continue;$0(i.latestValues)&&i.updateSnapshot();const u=vr(),f=i.measurePageBox();Yn(u,f),Ew(d,i.latestValues,i.snapshot?i.snapshot.layoutBox:void 0,u)}return Ao(this.latestValues)&&Ew(d,this.latestValues),d}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==tn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var d;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const i=!!this.resumingFrom||this!==l;if(!(a||i&&this.isSharedProjectionDirty||this.isProjectionDirty||!((d=this.parent)===null||d===void 0)&&d.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:f,layoutId:h}=this.options;if(!(!this.layout||!(f||h))){if(this.resolvedRelativeTargetAt=tn.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=vr(),this.relativeTargetOrigin=vr(),wd(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Yn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=vr(),this.targetWithTransforms=vr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),vF(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Yn(this.target,this.layout.layoutBox),r6(this.target,this.targetDelta)):Yn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=vr(),this.relativeTargetOrigin=vr(),wd(this.relativeTargetOrigin,this.target,m.target),Yn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}To.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||$0(this.parent.latestValues)||s6(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const d=this.getLead(),l=!!this.resumingFrom||this!==d;let i=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(i=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(i=!1),this.resolvedRelativeTargetAt===tn.timestamp&&(i=!1),i)return;const{layout:u,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||f))return;Yn(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;EF(this.layoutCorrected,this.treeScale,this.path,l),d.layout&&!d.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(d.target=d.layout.layoutBox);const{target:p}=d;if(!p){this.projectionTransform&&(this.projectionDelta=Ll(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Ll(),this.projectionDeltaWithTransform=Ll());const x=this.projectionTransform;bd(this.projectionDelta,this.layoutCorrected,p,this.latestValues),this.projectionTransform=Rw(this.projectionDelta,this.treeScale),(this.projectionTransform!==x||this.treeScale.x!==h||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),To.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,d=!1){const l=this.snapshot,i=l?l.latestValues:{},u={...this.latestValues},f=Ll();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const h=vr(),m=l?l.source:void 0,p=this.layout?this.layout.source:void 0,x=m!==p,g=this.getStack(),v=!g||g.members.length<=1,y=!!(x&&!v&&this.options.crossfade===!0&&!this.path.some(gL));this.animationProgress=0;let b;this.mixTargetDelta=C=>{const T=C/1e3;Fw(f.x,a.x,T),Fw(f.y,a.y,T),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(wd(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),pL(this.relativeTarget,this.relativeTargetOrigin,h,T),b&&KF(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=vr()),Yn(b,this.relativeTarget)),x&&(this.animationValues=u,UF(u,i,this.latestValues,T,y,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ui(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Vs.update(()=>{Fh.hasAnimatedSinceResize=!0,this.currentAnimation=tL(0,Mw,{...a,onUpdate:d=>{this.mixTargetDelta(d),a.onUpdate&&a.onUpdate(d)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Mw),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:d,target:l,layout:i,latestValues:u}=a;if(!(!d||!l||!i)){if(this!==a&&this.layout&&i&&h6(this.options.animationType,this.layout.layoutBox,i.layoutBox)){l=this.target||vr();const f=Vn(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+f;const h=Vn(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+h}Yn(d,l),Dl(d,u),bd(this.projectionDeltaWithTransform,this.layoutCorrected,d,u)}}registerSharedNode(a,d){this.sharedNodes.has(a)||this.sharedNodes.set(a,new YF),this.sharedNodes.get(a).add(d);const i=d.options.initialPromotionConfig;d.promote({transition:i?i.transition:void 0,preserveFollowOpacity:i&&i.shouldPreserveFollowOpacity?i.shouldPreserveFollowOpacity(d):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:d}=this.options;return d?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:d}=this.options;return d?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:d,preserveFollowOpacity:l}={}){const i=this.getStack();i&&i.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let d=!1;const{latestValues:l}=a;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(d=!0),!d)return;const i={};for(let u=0;u<Pw.length;u++){const f="rotate"+Pw[u];l[f]&&(i[f]=l[f],a.setStaticValue(f,0))}a.render();for(const u in i)a.setStaticValue(u,i[u]);a.scheduleRender()}getProjectionStyles(a){var d,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return sL;const i={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,i.opacity="",i.pointerEvents=Oh(a==null?void 0:a.pointerEvents)||"",i.transform=u?u(this.latestValues,""):"none",i;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=Oh(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Ao(this.latestValues)&&(x.transform=u?u({},""):"none",this.hasProjected=!1),x}const h=f.animationValues||f.latestValues;this.applyTransformsToTarget(),i.transform=Rw(this.projectionDeltaWithTransform,this.treeScale,h),u&&(i.transform=u(h,i.transform));const{x:m,y:p}=this.projectionDelta;i.transformOrigin=`${m.origin*100}% ${p.origin*100}% 0`,f.animationValues?i.opacity=f===this?(l=(d=h.opacity)!==null&&d!==void 0?d:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:i.opacity=f===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const x in vf){if(h[x]===void 0)continue;const{correct:g,applyTo:v}=vf[x],y=i.transform==="none"?h[x]:g(h[x],f);if(v){const b=v.length;for(let C=0;C<b;C++)i[v[C]]=y}else i[x]=y}return this.options.layoutId&&(i.pointerEvents=f===this?Oh(a==null?void 0:a.pointerEvents)||"":"none"),i}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var d;return(d=a.currentAnimation)===null||d===void 0?void 0:d.stop()}),this.root.nodes.forEach(Iw),this.root.sharedNodes.clear()}}}function nL(t){t.updateLayout()}function aL(t){var r;const s=((r=t.resumeFrom)===null||r===void 0?void 0:r.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&s&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:c}=t.layout,{animationType:o}=t.options,a=s.source!==t.layout.source;o==="size"?Qn(f=>{const h=a?s.measuredBox[f]:s.layoutBox[f],m=Vn(h);h.min=n[f].min,h.max=h.min+m}):h6(o,s.layoutBox,n)&&Qn(f=>{const h=a?s.measuredBox[f]:s.layoutBox[f],m=Vn(n[f]);h.max=h.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+m)});const d=Ll();bd(d,n,s.layoutBox);const l=Ll();a?bd(l,t.applyTransform(c,!0),s.measuredBox):bd(l,n,s.layoutBox);const i=!c6(d);let u=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:m}=f;if(h&&m){const p=vr();wd(p,s.layoutBox,h.layoutBox);const x=vr();wd(x,n,m.layoutBox),d6(p,x)||(u=!0),f.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=p,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:s,delta:l,layoutDelta:d,hasLayoutChanged:i,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function iL(t){To.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function oL(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function lL(t){t.clearSnapshot()}function Iw(t){t.clearMeasurements()}function cL(t){t.isLayoutDirty=!1}function dL(t){const{visualElement:r}=t.options;r&&r.getProps().onBeforeLayoutMeasure&&r.notify("BeforeLayoutMeasure"),t.resetTransform()}function Ow(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function uL(t){t.resolveTargetDelta()}function hL(t){t.calcProjection()}function fL(t){t.resetRotation()}function mL(t){t.removeLeadSnapshot()}function Fw(t,r,s){t.translate=sr(r.translate,0,s),t.scale=sr(r.scale,1,s),t.origin=r.origin,t.originPoint=r.originPoint}function Lw(t,r,s,n){t.min=sr(r.min,s.min,n),t.max=sr(r.max,s.max,n)}function pL(t,r,s,n){Lw(t.x,r.x,s.x,n),Lw(t.y,r.y,s.y,n)}function gL(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const xL={duration:.45,ease:[.4,0,.1,1]},Dw=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),$w=Dw("applewebkit/")&&!Dw("chrome/")?Math.round:cr;function Bw(t){t.min=$w(t.min),t.max=$w(t.max)}function yL(t){Bw(t.x),Bw(t.y)}function h6(t,r,s){return t==="position"||t==="preserve-aspect"&&!L0(Tw(r),Tw(s),.2)}const vL=u6({attachResizeListener:(t,r)=>Za(t,"resize",r),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Yp={current:void 0},f6=u6({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Yp.current){const t=new vL({});t.mount(window),t.setOptions({layoutScroll:!0}),Yp.current=t}return Yp.current},resetTransform:(t,r)=>{t.style.transform=r!==void 0?r:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),bL={pan:{Feature:FF},drag:{Feature:OF,ProjectionNode:f6,MeasureLayout:i6}},wL=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function jL(t){const r=wL.exec(t);if(!r)return[,];const[,s,n]=r;return[s,n]}function z0(t,r,s=1){const[n,c]=jL(t);if(!n)return;const o=window.getComputedStyle(r).getPropertyValue(n);if(o){const a=o.trim();return Y3(a)?parseFloat(a):a}else return T0(c)?z0(c,r,s+1):c}function _L(t,{...r},s){const n=t.current;if(!(n instanceof Element))return{target:r,transitionEnd:s};s&&(s={...s}),t.values.forEach(c=>{const o=c.get();if(!T0(o))return;const a=z0(o,n);a&&c.set(a)});for(const c in r){const o=r[c];if(!T0(o))continue;const a=z0(o,n);a&&(r[c]=a,s||(s={}),s[c]===void 0&&(s[c]=o))}return{target:r,transitionEnd:s}}const NL=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),m6=t=>NL.has(t),SL=t=>Object.keys(t).some(m6),zw=t=>t===fl||t===rs,Uw=(t,r)=>parseFloat(t.split(", ")[r]),Vw=(t,r)=>(s,{transform:n})=>{if(n==="none"||!n)return 0;const c=n.match(/^matrix3d\((.+)\)$/);if(c)return Uw(c[1],r);{const o=n.match(/^matrix\((.+)\)$/);return o?Uw(o[1],t):0}},CL=new Set(["x","y","z"]),kL=bu.filter(t=>!CL.has(t));function EL(t){const r=[];return kL.forEach(s=>{const n=t.getValue(s);n!==void 0&&(r.push([s,n.get()]),n.set(s.startsWith("scale")?1:0))}),r.length&&t.render(),r}const hc={width:({x:t},{paddingLeft:r="0",paddingRight:s="0"})=>t.max-t.min-parseFloat(r)-parseFloat(s),height:({y:t},{paddingTop:r="0",paddingBottom:s="0"})=>t.max-t.min-parseFloat(r)-parseFloat(s),top:(t,{top:r})=>parseFloat(r),left:(t,{left:r})=>parseFloat(r),bottom:({y:t},{top:r})=>parseFloat(r)+(t.max-t.min),right:({x:t},{left:r})=>parseFloat(r)+(t.max-t.min),x:Vw(4,13),y:Vw(5,14)};hc.translateX=hc.x;hc.translateY=hc.y;const AL=(t,r,s)=>{const n=r.measureViewportBox(),c=r.current,o=getComputedStyle(c),{display:a}=o,d={};a==="none"&&r.setStaticValue("display",t.display||"block"),s.forEach(i=>{d[i]=hc[i](n,o)}),r.render();const l=r.measureViewportBox();return s.forEach(i=>{const u=r.getValue(i);u&&u.jump(d[i]),t[i]=hc[i](l,o)}),t},TL=(t,r,s={},n={})=>{r={...r},n={...n};const c=Object.keys(r).filter(m6);let o=[],a=!1;const d=[];if(c.forEach(l=>{const i=t.getValue(l);if(!t.hasValue(l))return;let u=s[l],f=qc(u);const h=r[l];let m;if(wf(h)){const p=h.length,x=h[0]===null?1:0;u=h[x],f=qc(u);for(let g=x;g<p&&h[g]!==null;g++)m?ev(qc(h[g])===m):m=qc(h[g])}else m=qc(h);if(f!==m)if(zw(f)&&zw(m)){const p=i.get();typeof p=="string"&&i.set(parseFloat(p)),typeof h=="string"?r[l]=parseFloat(h):Array.isArray(h)&&m===rs&&(r[l]=h.map(parseFloat))}else f!=null&&f.transform&&(m!=null&&m.transform)&&(u===0||h===0)?u===0?i.set(m.transform(u)):r[l]=f.transform(h):(a||(o=EL(t),a=!0),d.push(l),n[l]=n[l]!==void 0?n[l]:r[l],i.jump(h))}),d.length){const l=d.indexOf("height")>=0?window.pageYOffset:null,i=AL(r,t,d);return o.length&&o.forEach(([u,f])=>{t.getValue(u).set(f)}),t.render(),vm&&l!==null&&window.scrollTo({top:l}),{target:i,transitionEnd:n}}else return{target:r,transitionEnd:n}};function RL(t,r,s,n){return SL(r)?TL(t,r,s,n):{target:r,transitionEnd:n}}const PL=(t,r,s,n)=>{const c=_L(t,r,n);return r=c.target,n=c.transitionEnd,RL(t,r,s,n)},U0={current:null},p6={current:!1};function ML(){if(p6.current=!0,!!vm)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),r=()=>U0.current=t.matches;t.addListener(r),r()}else U0.current=!1}function IL(t,r,s){const{willChange:n}=r;for(const c in r){const o=r[c],a=s[c];if(An(o))t.addValue(c,o),Sf(n)&&n.add(c);else if(An(a))t.addValue(c,uc(o,{owner:t})),Sf(n)&&n.remove(c);else if(a!==o)if(t.hasValue(c)){const d=t.getValue(c);!d.hasAnimated&&d.set(o)}else{const d=t.getStaticValue(c);t.addValue(c,uc(d!==void 0?d:o,{owner:t}))}}for(const c in s)r[c]===void 0&&t.removeValue(c);return r}const qw=new WeakMap,g6=Object.keys(ru),OL=g6.length,Hw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],FL=Hy.length;class LL{constructor({parent:r,props:s,presenceContext:n,reducedMotionConfig:c,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Vs.render(this.render,!1,!0);const{latestValues:d,renderState:l}=o;this.latestValues=d,this.baseTarget={...d},this.initialValues=s.initial?{...d}:{},this.renderState=l,this.parent=r,this.props=s,this.presenceContext=n,this.depth=r?r.depth+1:0,this.reducedMotionConfig=c,this.options=a,this.isControllingVariants=wm(s),this.isVariantNode=e3(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(r&&r.current);const{willChange:i,...u}=this.scrapeMotionValuesFromProps(s,{});for(const f in u){const h=u[f];d[f]!==void 0&&An(h)&&(h.set(d[f],!1),Sf(i)&&i.add(f))}}scrapeMotionValuesFromProps(r,s){return{}}mount(r){this.current=r,qw.set(r,this),this.projection&&!this.projection.instance&&this.projection.mount(r),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,n)=>this.bindToMotionValue(n,s)),p6.current||ML(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:U0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){qw.delete(this.current),this.projection&&this.projection.unmount(),ui(this.notifyUpdate),ui(this.render),this.valueSubscriptions.forEach(r=>r()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const r in this.events)this.events[r].clear();for(const r in this.features)this.features[r].unmount();this.current=null}bindToMotionValue(r,s){const n=hl.has(r),c=s.on("change",a=>{this.latestValues[r]=a,this.props.onUpdate&&Vs.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),o=s.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(r,()=>{c(),o()})}sortNodePosition(r){return!this.current||!this.sortInstanceNodePosition||this.type!==r.type?0:this.sortInstanceNodePosition(this.current,r.current)}loadFeatures({children:r,...s},n,c,o){let a,d;for(let l=0;l<OL;l++){const i=g6[l],{isEnabled:u,Feature:f,ProjectionNode:h,MeasureLayout:m}=ru[i];h&&(a=h),u(s)&&(!this.features[i]&&f&&(this.features[i]=new f(this)),m&&(d=m))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:i,drag:u,dragConstraints:f,layoutScroll:h,layoutRoot:m}=s;this.projection.setOptions({layoutId:l,layout:i,alwaysMeasureLayout:!!u||f&&Ol(f),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof i=="string"?i:"both",initialPromotionConfig:o,layoutScroll:h,layoutRoot:m})}return d}updateFeatures(){for(const r in this.features){const s=this.features[r];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):vr()}getStaticValue(r){return this.latestValues[r]}setStaticValue(r,s){this.latestValues[r]=s}makeTargetAnimatable(r,s=!0){return this.makeTargetAnimatableFromInstance(r,this.props,s)}update(r,s){(r.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=r,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let n=0;n<Hw.length;n++){const c=Hw[n];this.propEventSubscriptions[c]&&(this.propEventSubscriptions[c](),delete this.propEventSubscriptions[c]);const o=r["on"+c];o&&(this.propEventSubscriptions[c]=this.on(c,o))}this.prevMotionValues=IL(this,this.scrapeMotionValuesFromProps(r,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(r){return this.props.variants?this.props.variants[r]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(r=!1){if(r)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const s={};for(let n=0;n<FL;n++){const c=Hy[n],o=this.props[c];(su(o)||o===!1)&&(s[c]=o)}return s}addVariantChild(r){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(r),()=>s.variantChildren.delete(r)}addValue(r,s){s!==this.values.get(r)&&(this.removeValue(r),this.bindToMotionValue(r,s)),this.values.set(r,s),this.latestValues[r]=s.get()}removeValue(r){this.values.delete(r);const s=this.valueSubscriptions.get(r);s&&(s(),this.valueSubscriptions.delete(r)),delete this.latestValues[r],this.removeValueFromRenderState(r,this.renderState)}hasValue(r){return this.values.has(r)}getValue(r,s){if(this.props.values&&this.props.values[r])return this.props.values[r];let n=this.values.get(r);return n===void 0&&s!==void 0&&(n=uc(s,{owner:this}),this.addValue(r,n)),n}readValue(r){var s;return this.latestValues[r]!==void 0||!this.current?this.latestValues[r]:(s=this.getBaseTargetFromProps(this.props,r))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,r,this.options)}setBaseTarget(r,s){this.baseTarget[r]=s}getBaseTarget(r){var s;const{initial:n}=this.props,c=typeof n=="string"||typeof n=="object"?(s=Jy(this.props,n))===null||s===void 0?void 0:s[r]:void 0;if(n&&c!==void 0)return c;const o=this.getBaseTargetFromProps(this.props,r);return o!==void 0&&!An(o)?o:this.initialValues[r]!==void 0&&c===void 0?void 0:this.baseTarget[r]}on(r,s){return this.events[r]||(this.events[r]=new cv),this.events[r].add(s)}notify(r,...s){this.events[r]&&this.events[r].notify(...s)}}class x6 extends LL{sortInstanceNodePosition(r,s){return r.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(r,s){return r.style?r.style[s]:void 0}removeValueFromRenderState(r,{vars:s,style:n}){delete s[r],delete n[r]}makeTargetAnimatableFromInstance({transition:r,transitionEnd:s,...n},{transformValues:c},o){let a=eF(n,r||{},this);if(c&&(s&&(s=c(s)),n&&(n=c(n)),a&&(a=c(a))),o){ZO(this,n,a);const d=PL(this,n,a,s);s=d.transitionEnd,n=d.target}return{transition:r,transitionEnd:s,...n}}}function DL(t){return window.getComputedStyle(t)}class $L extends x6{constructor(){super(...arguments),this.type="html"}readValueFromInstance(r,s){if(hl.has(s)){const n=nv(s);return n&&n.default||0}else{const n=DL(r),c=(n3(s)?n.getPropertyValue(s):n[s])||0;return typeof c=="string"?c.trim():c}}measureInstanceViewportBox(r,{transformPagePoint:s}){return n6(r,s)}build(r,s,n,c){Ky(r,s,n,c.transformTemplate)}scrapeMotionValuesFromProps(r,s){return Zy(r,s)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:r}=this.props;An(r)&&(this.childSubscription=r.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}renderInstance(r,s,n,c){d3(r,s,n,c)}}class BL extends x6{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(r,s){return r[s]}readValueFromInstance(r,s){if(hl.has(s)){const n=nv(s);return n&&n.default||0}return s=u3.has(s)?s:Vy(s),r.getAttribute(s)}measureInstanceViewportBox(){return vr()}scrapeMotionValuesFromProps(r,s){return f3(r,s)}build(r,s,n,c){Qy(r,s,n,this.isSVGTag,c.transformTemplate)}renderInstance(r,s,n,c){h3(r,s,n,c)}mount(r){this.isSVGTag=Xy(r.tagName),super.mount(r)}}const zL=(t,r)=>Gy(t)?new BL(r,{enableHardwareAcceleration:!1}):new $L(r,{enableHardwareAcceleration:!0}),UL={layout:{ProjectionNode:f6,MeasureLayout:i6}},VL={...pF,...OI,...bL,...UL},os=qM((t,r)=>jI(t,r,VL,zL));function y6(){const t=A.useRef(!1);return Uy(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function qL(){const t=y6(),[r,s]=A.useState(0),n=A.useCallback(()=>{t.current&&s(r+1)},[r]);return[A.useCallback(()=>Vs.postRender(n),[n]),r]}class HL extends A.Component{getSnapshotBeforeUpdate(r){const s=this.props.childRef.current;if(s&&r.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=s.offsetHeight||0,n.width=s.offsetWidth||0,n.top=s.offsetTop,n.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function WL({children:t,isPresent:r}){const s=A.useId(),n=A.useRef(null),c=A.useRef({width:0,height:0,top:0,left:0});return A.useInsertionEffect(()=>{const{width:o,height:a,top:d,left:l}=c.current;if(r||!n.current||!o||!a)return;n.current.dataset.motionPopId=s;const i=document.createElement("style");return document.head.appendChild(i),i.sheet&&i.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${d}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(i)}},[r]),A.createElement(HL,{isPresent:r,childRef:n,sizeRef:c},A.cloneElement(t,{ref:n}))}const Qp=({children:t,initial:r,isPresent:s,onExitComplete:n,custom:c,presenceAffectsLayout:o,mode:a})=>{const d=m3(GL),l=A.useId(),i=A.useMemo(()=>({id:l,initial:r,isPresent:s,custom:c,onExitComplete:u=>{d.set(u,!0);for(const f of d.values())if(!f)return;n&&n()},register:u=>(d.set(u,!1),()=>d.delete(u))}),o?void 0:[s]);return A.useMemo(()=>{d.forEach((u,f)=>d.set(f,!1))},[s]),A.useEffect(()=>{!s&&!d.size&&n&&n()},[s]),a==="popLayout"&&(t=A.createElement(WL,{isPresent:s},t)),A.createElement(ym.Provider,{value:i},t)};function GL(){return new Map}function KL(t){return A.useEffect(()=>()=>t(),[])}const Ro=t=>t.key||"";function YL(t,r){t.forEach(s=>{const n=Ro(s);r.set(n,s)})}function QL(t){const r=[];return A.Children.forEach(t,s=>{A.isValidElement(s)&&r.push(s)}),r}const dv=({children:t,custom:r,initial:s=!0,onExitComplete:n,exitBeforeEnter:c,presenceAffectsLayout:o=!0,mode:a="sync"})=>{const d=A.useContext(Wy).forceRender||qL()[0],l=y6(),i=QL(t);let u=i;const f=A.useRef(new Map).current,h=A.useRef(u),m=A.useRef(new Map).current,p=A.useRef(!0);if(Uy(()=>{p.current=!1,YL(i,m),h.current=u}),KL(()=>{p.current=!0,m.clear(),f.clear()}),p.current)return A.createElement(A.Fragment,null,u.map(y=>A.createElement(Qp,{key:Ro(y),isPresent:!0,initial:s?void 0:!1,presenceAffectsLayout:o,mode:a},y)));u=[...u];const x=h.current.map(Ro),g=i.map(Ro),v=x.length;for(let y=0;y<v;y++){const b=x[y];g.indexOf(b)===-1&&!f.has(b)&&f.set(b,void 0)}return a==="wait"&&f.size&&(u=[]),f.forEach((y,b)=>{if(g.indexOf(b)!==-1)return;const C=m.get(b);if(!C)return;const T=x.indexOf(b);let M=y;if(!M){const U=()=>{f.delete(b);const L=Array.from(m.keys()).filter(P=>!g.includes(P));if(L.forEach(P=>m.delete(P)),h.current=i.filter(P=>{const B=Ro(P);return B===b||L.includes(B)}),!f.size){if(l.current===!1)return;d(),n&&n()}};M=A.createElement(Qp,{key:Ro(C),isPresent:!1,onExitComplete:U,custom:r,presenceAffectsLayout:o,mode:a},C),f.set(b,M)}u.splice(T,0,M)}),u=u.map(y=>{const b=y.key;return f.has(b)?y:A.createElement(Qp,{key:Ro(y),isPresent:!0,presenceAffectsLayout:o,mode:a},y)}),A.createElement(A.Fragment,null,f.size?u:u.map(y=>A.cloneElement(y)))},Re=Lt.forwardRef(({className:t,...r},s)=>e.jsx("div",{ref:s,className:Ot("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r}));Re.displayName="Card";const lt=Lt.forwardRef(({className:t,...r},s)=>e.jsx("div",{ref:s,className:Ot("flex flex-col space-y-1.5 p-6",t),...r}));lt.displayName="CardHeader";const mt=Lt.forwardRef(({className:t,...r},s)=>e.jsx("h3",{ref:s,className:Ot("text-2xl font-semibold leading-none tracking-tight",t),...r}));mt.displayName="CardTitle";const ts=Lt.forwardRef(({className:t,...r},s)=>e.jsx("p",{ref:s,className:Ot("text-sm text-muted-foreground",t),...r}));ts.displayName="CardDescription";const De=Lt.forwardRef(({className:t,...r},s)=>e.jsx("div",{ref:s,className:Ot("p-6 pt-0",t),...r}));De.displayName="CardContent";const Sm=Lt.forwardRef(({className:t,...r},s)=>e.jsx("div",{ref:s,className:Ot("flex items-center p-6 pt-0",t),...r}));Sm.displayName="CardFooter";const XL=()=>{const t={hidden:{opacity:0,y:20},visible:s=>({opacity:1,y:0,transition:{delay:s*.1,duration:.5}})},r=[{icon:e.jsx(as,{className:"h-10 w-10 text-primary"}),title:"Multi-Role Access",description:"Dedicated portals for Admins, Faculty, and Students."},{icon:e.jsx(Gr,{className:"h-10 w-10 text-primary"}),title:"Interactive Learning Tools",description:"Engage students with interactive assessments and multimedia content."},{icon:e.jsx(Rr,{className:"h-10 w-10 text-primary"}),title:"Advanced Analytics",description:"Track progress and performance with insightful dashboards."}];return e.jsxs("div",{className:"space-y-16",children:[e.jsx(os.section,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},className:"text-center py-16 md:py-24 bg-gradient-to-br from-primary/10 via-background to-secondary/10 rounded-xl",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs(os.h1,{className:"text-4xl md:text-6xl font-bold mb-6 tracking-tight",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.5},children:["The Future of ",e.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-purple-500 via-pink-500 to-orange-500",children:"Education"}),", Reimagined."]}),e.jsx(os.p,{className:"text-lg md:text-xl text-muted-foreground max-w-2xl mx-auto mb-10",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.5},children:"EduHorizon LMS provides a scalable, multi-tenant platform for modern learning institutions. Empower your faculty and inspire your students."}),e.jsxs(os.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},className:"space-x-4",children:[e.jsx(ee,{size:"lg",asChild:!0,children:e.jsx(ks,{to:"/signup",children:"Get Started"})}),e.jsx(ee,{size:"lg",variant:"outline",asChild:!0,children:e.jsx(ks,{to:"/features",children:"Learn More"})})]})]})}),e.jsx("section",{className:"py-16",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-4",children:"Platform Highlights"}),e.jsx("p",{className:"text-muted-foreground text-center max-w-xl mx-auto mb-12",children:"Discover the powerful features that make EduHorizon LMS the ideal choice for your institution."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:r.map((s,n)=>e.jsx(os.div,{custom:n,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.3},variants:t,className:"w-full",children:e.jsxs(Re,{className:"h-full hover:shadow-xl transition-shadow duration-300 glassmorphic",children:[e.jsxs(lt,{className:"items-center text-center",children:[s.icon,e.jsx(mt,{className:"mt-4",children:s.title})]}),e.jsx(De,{className:"text-center",children:e.jsx(ts,{children:s.description})})]})},n))})]})}),e.jsx("section",{className:"py-16 bg-secondary/50 rounded-xl",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx(os.h2,{className:"text-3xl md:text-4xl font-bold mb-6",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5},children:"Ready to Elevate Your Institution's Learning Experience?"}),e.jsx(os.p,{className:"text-muted-foreground max-w-xl mx-auto mb-8",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:.2},children:"Join leading colleges and universities who trust EduHorizon LMS to deliver exceptional education."}),e.jsx(os.div,{initial:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.5,delay:.4},children:e.jsx(ee,{size:"lg",className:"bg-gradient-to-r from-primary to-purple-600 hover:from-primary/90 hover:to-purple-600/90 text-primary-foreground shadow-lg transform hover:scale-105 transition-transform duration-300",children:"Request a Demo"})})]})}),e.jsx("section",{className:"py-16",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-12",children:"Visualizing Success"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Seamless Integration, Powerful Results"}),e.jsx("p",{className:"text-muted-foreground mb-2",children:"Our platform is designed for ease of use, allowing for quick adoption and immediate impact. See how EduHorizon LMS can transform your educational delivery."}),e.jsxs("ul",{className:"space-y-2 text-muted-foreground",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx(Yt,{className:"h-5 w-5 text-green-500 mr-2"})," Intuitive dashboards for all user roles."]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx(Yt,{className:"h-5 w-5 text-green-500 mr-2"})," Customizable learning paths."]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx(Yt,{className:"h-5 w-5 text-green-500 mr-2"})," Secure and reliable infrastructure."]})]})]}),e.jsx(os.div,{className:"rounded-lg overflow-hidden shadow-2xl",initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.7},children:e.jsx("img",{className:"w-full h-auto object-cover",alt:"Modern e-learning dashboard interface",src:"https://images.unsplash.com/photo-1562212424-f9452f6d6e8f"})})]})]})})]})},Ye=Lt.forwardRef(({className:t,type:r,...s},n)=>e.jsx("input",{type:r,className:Ot("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...s}));Ye.displayName="Input";var ZL="Label",v6=A.forwardRef((t,r)=>e.jsx(Dt.label,{...t,ref:r,onMouseDown:s=>{var c;s.target.closest("button, input, select, textarea")||((c=t.onMouseDown)==null||c.call(t,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));v6.displayName=ZL;var b6=v6;const JL=sm("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Se=Lt.forwardRef(({className:t,...r},s)=>e.jsx(b6,{ref:s,className:Ot(JL(),t),...r}));Se.displayName=b6.displayName;const eD=sm("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),pr=A.forwardRef(({className:t,variant:r,...s},n)=>e.jsx("div",{ref:n,role:"alert",className:Ot(eD({variant:r}),t),...s}));pr.displayName="Alert";const kf=A.forwardRef(({className:t,...r},s)=>e.jsx("h5",{ref:s,className:Ot("mb-1 font-medium leading-none tracking-tight",t),...r}));kf.displayName="AlertTitle";const gr=A.forwardRef(({className:t,...r},s)=>e.jsx("div",{ref:s,className:Ot("text-sm [&_p]:leading-relaxed",t),...r}));gr.displayName="AlertDescription";const tD=()=>{const[t,r]=A.useState(""),[s,n]=A.useState(""),[c,o]=A.useState(!1),[a,d]=A.useState(!1),[l,i]=A.useState(!1),{login:u,resendVerificationEmail:f}=qs(),h=Br(),m=async x=>{x.preventDefault(),o(!0),d(!1);try{const g=await u({email:t,password:s});if(g&&g.requiresEmailVerification){d(!0),o(!1);return}g&&g.role&&setTimeout(()=>{switch(g.role){case"super-admin":h("/dashboard/super-admin",{replace:!0});break;case"college-admin":h("/dashboard/college-admin",{replace:!0});break;case"faculty":h("/dashboard/faculty",{replace:!0});break;case"student":h("/dashboard/student",{replace:!0});break;default:h("/dashboard",{replace:!0})}setTimeout(()=>{window.location.pathname==="/login"&&(window.location.href=`/dashboard/${g.role==="super-admin"?"super-admin":g.role==="college-admin"?"college-admin":g.role==="faculty"?"faculty":"student"}`)},1e3)},100)}catch(g){g.message&&!g.message.includes("verify your email")&&!g.message.includes("Too many requests")&&!g.message.includes("rate limit")&&console.error("Login error:",g)}finally{o(!1)}},p=async()=>{t&&(i(!0),await f(t),i(!1))};return e.jsx(os.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex items-center justify-center min-h-[calc(100vh-10rem)] py-12",children:e.jsxs(Re,{className:"w-full max-w-md shadow-2xl glassmorphic",children:[e.jsxs(lt,{className:"space-y-1 text-center",children:[e.jsx(os.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:260,damping:20},children:e.jsx(J7,{className:"mx-auto h-12 w-12 text-primary"})}),e.jsx(mt,{className:"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary via-purple-500 to-pink-500",children:"Welcome Back!"}),e.jsx(ts,{children:"Enter your credentials to access your account."})]}),e.jsxs(De,{children:[a&&e.jsxs(pr,{className:"mb-6 border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20",children:[e.jsx(Lr,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-400"}),e.jsx(kf,{className:"text-yellow-800 dark:text-yellow-200",children:"Email Verification Required"}),e.jsxs(gr,{className:"text-yellow-700 dark:text-yellow-300 mt-2",children:[e.jsx("p",{className:"mb-3",children:"Please verify your email address before logging in. Check your inbox for the verification link."}),e.jsxs(ee,{type:"button",variant:"outline",size:"sm",onClick:p,disabled:l,className:"w-full border-yellow-500 text-yellow-700 hover:bg-yellow-100 dark:hover:bg-yellow-800",children:[e.jsx(ro,{className:"mr-2 h-4 w-4"}),l?"Sending...":"Resend Verification Email"]})]})]}),e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"email",children:"Email"}),e.jsx(Ye,{id:"email",type:"email",placeholder:"m@example.com",value:t,onChange:x=>{r(x.target.value),d(!1)},required:!0,className:"bg-background/70"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Se,{htmlFor:"password",children:"Password"}),e.jsx(ks,{to:"/forgot-password",className:"text-sm text-primary hover:underline",children:"Forgot password?"})]}),e.jsx(Ye,{id:"password",type:"password",value:s,onChange:x=>n(x.target.value),required:!0,placeholder:"",className:"bg-background/70"})]}),e.jsx(ee,{type:"submit",disabled:c,className:"w-full bg-gradient-to-r from-primary to-purple-600 hover:from-primary/90 hover:to-purple-600/90 text-primary-foreground shadow-lg transform hover:scale-105 transition-transform duration-300",children:c?"Signing In...":"Sign In"})]})]}),e.jsx(Sm,{className:"text-center text-sm",children:e.jsxs("p",{children:["Don't have an account?"," ",e.jsx(ks,{to:"/signup",className:"font-semibold text-primary hover:underline",children:"Sign up"})]})})]})})},sD=()=>{const[t,r]=A.useState(""),[s,n]=A.useState(""),[c,o]=A.useState(""),[a,d]=A.useState(""),[l,i]=A.useState("student"),[u,f]=A.useState(""),{signup:h}=qs(),m=Br(),{toast:p}=Js(),x=g=>{if(g.preventDefault(),c!==a){p({variant:"destructive",title:"Signup Failed",description:"Passwords do not match."});return}const v={name:t,email:s,password:c,role:l};l==="super-admin"&&(v.registrationCode=u);const y=h(v);if(y)switch(y.role){case"super-admin":m("/dashboard/super-admin");break;case"college-admin":m("/dashboard/college-admin");break;case"faculty":m("/dashboard/faculty");break;case"student":m("/dashboard/student");break;default:m("/dashboard")}};return e.jsx(os.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex items-center justify-center min-h-[calc(100vh-10rem)] py-12",children:e.jsxs(Re,{className:"w-full max-w-md shadow-2xl glassmorphic",children:[e.jsxs(lt,{className:"space-y-1 text-center",children:[e.jsx(os.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:260,damping:20},children:e.jsx(rm,{className:"mx-auto h-12 w-12 text-primary"})}),e.jsx(mt,{className:"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary via-purple-500 to-pink-500",children:"Create an Account"}),e.jsx(ts,{children:"Join EduHorizon LMS today!"})]}),e.jsx(De,{children:e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"name",children:"Full Name"}),e.jsx(Ye,{id:"name",type:"text",placeholder:"John Doe",value:t,onChange:g=>r(g.target.value),required:!0,className:"bg-background/70"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"email",children:"Email"}),e.jsx(Ye,{id:"email",type:"email",placeholder:"m@example.com",value:s,onChange:g=>n(g.target.value),required:!0,className:"bg-background/70"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"password",children:"Password"}),e.jsx(Ye,{id:"password",type:"password",value:c,onChange:g=>o(g.target.value),required:!0,placeholder:"",className:"bg-background/70"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx(Ye,{id:"confirmPassword",type:"password",value:a,onChange:g=>d(g.target.value),required:!0,placeholder:"",className:"bg-background/70"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"role",children:"I am a..."}),e.jsxs(Ri,{children:[e.jsx(Pi,{asChild:!0,children:e.jsx(ee,{variant:"outline",className:"w-full justify-start font-normal bg-background/70",children:l.charAt(0).toUpperCase()+l.slice(1)})}),e.jsxs(Xa,{className:"w-full",children:[e.jsx(br,{onSelect:()=>i("student"),children:"Student"}),e.jsx(br,{onSelect:()=>i("faculty"),children:"Faculty"}),e.jsx(br,{onSelect:()=>i("college-admin"),children:"College Admin"}),e.jsx(br,{onSelect:()=>i("super-admin"),children:"Super Admin"})]})]})]}),l==="super-admin"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"registrationCode",children:"Registration Code"}),e.jsx(Ye,{id:"registrationCode",type:"password",placeholder:"Enter super admin registration code",value:u,onChange:g=>f(g.target.value),required:!0,className:"bg-background/70"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Super admin registration requires a special code. Contact system administrator for the code."})]}),e.jsx(ee,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-purple-600 hover:from-primary/90 hover:to-purple-600/90 text-primary-foreground shadow-lg transform hover:scale-105 transition-transform duration-300",children:"Sign Up"})]})}),e.jsx(Sm,{className:"text-center text-sm",children:e.jsxs("p",{children:["Already have an account?"," ",e.jsx(ks,{to:"/login",className:"font-semibold text-primary hover:underline",children:"Sign in"})]})})]})})},rD=()=>{const[t]=tm(),r=Br(),[s,n]=A.useState("verifying"),[c,o]=A.useState(""),a=t.get("token");return A.useEffect(()=>{(async()=>{if(!a){n("error"),o("Verification token is missing. Please check your email for the complete verification link.");return}try{const l=await Pe.verifyEmail(a);l.success?(n("success"),o("Your email has been verified successfully! You can now log in to your account."),setTimeout(()=>{r("/login",{replace:!0})},3e3)):(n("error"),o(l.message||"Failed to verify email. Please try again."))}catch(l){console.error("Email verification error:",l),n("error"),o(l.message||"An error occurred while verifying your email. The link may have expired. Please request a new verification email.")}})()},[a,r]),e.jsx(os.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex items-center justify-center min-h-[calc(100vh-10rem)] py-12",children:e.jsxs(Re,{className:"w-full max-w-md shadow-2xl glassmorphic",children:[e.jsxs(lt,{className:"space-y-1 text-center",children:[s==="verifying"&&e.jsx(os.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:260,damping:20},children:e.jsx(Tr,{className:"mx-auto h-12 w-12 text-primary animate-spin"})}),s==="success"&&e.jsx(os.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:260,damping:20},children:e.jsx(Yt,{className:"mx-auto h-12 w-12 text-green-500"})}),s==="error"&&e.jsx(os.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:260,damping:20},children:e.jsx(Mr,{className:"mx-auto h-12 w-12 text-red-500"})}),e.jsxs(mt,{className:"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary via-purple-500 to-pink-500",children:[s==="verifying"&&"Verifying Email...",s==="success"&&"Email Verified!",s==="error"&&"Verification Failed"]}),e.jsxs(ts,{children:[s==="verifying"&&"Please wait while we verify your email address.",s==="success"&&"Your email has been successfully verified.",s==="error"&&"We couldn't verify your email address."]})]}),e.jsxs(De,{className:"space-y-4",children:[s==="verifying"&&e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-muted-foreground",children:"Verifying your email address..."})}),s==="success"&&e.jsxs(pr,{className:"border-green-500 bg-green-50 dark:bg-green-900/20",children:[e.jsx(Yt,{className:"h-4 w-4 text-green-600 dark:text-green-400"}),e.jsx(kf,{className:"text-green-800 dark:text-green-200",children:"Verification Successful"}),e.jsx(gr,{className:"text-green-700 dark:text-green-300 mt-2",children:c})]}),s==="error"&&e.jsxs(e.Fragment,{children:[e.jsxs(pr,{className:"border-red-500 bg-red-50 dark:bg-red-900/20",children:[e.jsx(Mr,{className:"h-4 w-4 text-red-600 dark:text-red-400"}),e.jsx(kf,{className:"text-red-800 dark:text-red-200",children:"Verification Failed"}),e.jsx(gr,{className:"text-red-700 dark:text-red-300 mt-2",children:c})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"The verification link may have expired or is invalid. You can request a new verification email."}),e.jsx(ee,{asChild:!0,variant:"outline",className:"w-full",children:e.jsxs(ks,{to:"/login",children:[e.jsx(ro,{className:"mr-2 h-4 w-4"}),"Go to Login"]})})]})]})]})]})})},nD=()=>{const{user:t,loading:r}=qs(),s=Br();return A.useEffect(()=>{if(!r&&t)switch(t.role){case"super-admin":s("/dashboard/super-admin",{replace:!0});break;case"college-admin":s("/dashboard/college-admin",{replace:!0});break;case"faculty":s("/dashboard/faculty",{replace:!0});break;case"student":s("/dashboard/student",{replace:!0});break;default:s("/",{replace:!0})}else!r&&!t&&s("/login",{replace:!0})},[t,r,s]),r||!t?e.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-10rem)]",children:e.jsx(Tr,{className:"h-16 w-16 animate-spin text-primary"})}):e.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-10rem)]",children:e.jsx("h1",{className:"text-2xl font-semibold",children:"Redirecting to your dashboard..."})})},aD=()=>{const{user:t}=qs(),[r,s]=A.useState([{title:"Total Students",value:"0",icon:e.jsx(as,{className:"h-6 w-6 text-primary"}),color:"bg-blue-500/10",detailsLink:`/college/${t==null?void 0:t.collegeId}/students`},{title:"Active Faculty",value:"0",icon:e.jsx(as,{className:"h-6 w-6 text-primary"}),color:"bg-green-500/10",detailsLink:`/college/${t==null?void 0:t.collegeId}/faculty`},{title:"Courses Offered",value:"0",icon:e.jsx(lr,{className:"h-6 w-6 text-primary"}),color:"bg-yellow-500/10",detailsLink:`/college/${t==null?void 0:t.collegeId}/courses`},{title:"Overall Engagement",value:"0%",icon:e.jsx(wp,{className:"h-6 w-6 text-primary"}),color:"bg-purple-500/10",detailsLink:`/college/${t==null?void 0:t.collegeId}/analytics/engagement`}]),n=[{label:"Manage Faculty",icon:e.jsx(rm,{className:"mr-2 h-5 w-5"}),linkTo:`/college/${t==null?void 0:t.collegeId}/faculty/manage`},{label:"Manage Students",icon:e.jsx(as,{className:"mr-2 h-5 w-5"}),linkTo:`/college/${t==null?void 0:t.collegeId}/students/manage`},{label:"Course Management",icon:e.jsx(z7,{className:"mr-2 h-5 w-5"}),linkTo:"/courses"},{label:"View College Analytics",icon:e.jsx(wp,{className:"mr-2 h-5 w-5"}),linkTo:"/analytics/dashboard"},{label:"College Settings",icon:e.jsx(la,{className:"mr-2 h-5 w-5"}),linkTo:`/college/${t==null?void 0:t.collegeId}/settings`}],c={hidden:{opacity:0,y:20},visible:o=>({opacity:1,y:0,transition:{delay:o*.1,duration:.5}})};return A.useEffect(()=>{(async()=>{var a;try{if(t!=null&&t.collegeId){const d=await Pe.getAnalyticsData({viewType:"college",collegeId:t.collegeId,dateRange:"30"});if(d.success&&d.data.summary){const l=d.data.summary;s([{title:"Total Students",value:((a=l.total_students)==null?void 0:a.toString())||"0",icon:e.jsx(as,{className:"h-6 w-6 text-primary"}),color:"bg-blue-500/10",detailsLink:`/college/${t==null?void 0:t.collegeId}/students`},{title:"Active Faculty",value:"0",icon:e.jsx(as,{className:"h-6 w-6 text-primary"}),color:"bg-green-500/10",detailsLink:`/college/${t==null?void 0:t.collegeId}/faculty`},{title:"Courses Offered",value:"0",icon:e.jsx(lr,{className:"h-6 w-6 text-primary"}),color:"bg-yellow-500/10",detailsLink:`/college/${t==null?void 0:t.collegeId}/courses`},{title:"Overall Engagement",value:`${(l.completion_rate||0).toFixed(1)}%`,icon:e.jsx(wp,{className:"h-6 w-6 text-primary"}),color:"bg-purple-500/10",detailsLink:`/college/${t==null?void 0:t.collegeId}/analytics/engagement`}])}}}catch(d){console.error("Error loading dashboard data:",d)}})()},[t==null?void 0:t.collegeId]),e.jsxs("div",{className:"space-y-8",children:[e.jsx(os.h1,{className:"text-3xl md:text-4xl font-bold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-primary via-purple-500 to-pink-500",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:"College Admin Dashboard"}),(t==null?void 0:t.collegeId)&&e.jsxs("p",{className:"text-muted-foreground",children:["Managing: College ID ",t.collegeId]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:r.map((o,a)=>e.jsx(os.div,{custom:a,initial:"hidden",animate:"visible",variants:c,children:e.jsxs(Re,{className:`shadow-lg hover:shadow-xl transition-shadow duration-300 ${o.color} border-primary/20`,children:[e.jsxs(lt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(mt,{className:"text-sm font-medium text-muted-foreground",children:o.title}),o.icon]}),e.jsxs(De,{children:[e.jsx("div",{className:"text-2xl font-bold text-foreground",children:o.value}),o.detailsLink&&e.jsx(ee,{variant:"link",size:"sm",asChild:!0,className:"px-0 text-xs text-primary hover:underline",children:e.jsxs(ks,{to:o.detailsLink,children:[e.jsx(Ss,{className:"mr-1 h-3 w-3"}),"View Details"]})})]})]})},a))}),e.jsx(os.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.5},children:e.jsxs(Re,{className:"shadow-lg glassmorphic",children:[e.jsxs(lt,{children:[e.jsx(mt,{className:"text-xl",children:"Administrative Tools"}),e.jsx(ts,{children:"Manage your college's resources and users."})]}),e.jsx(De,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map((o,a)=>e.jsx(os.div,{custom:a+r.length,initial:"hidden",animate:"visible",variants:c,children:e.jsx(ee,{variant:"outline",className:"w-full justify-start py-6 text-left hover:bg-accent/50 transition-colors duration-300 border-primary/30",asChild:!0,children:e.jsxs(ks,{to:o.linkTo,children:[o.icon,e.jsx("span",{className:"text-md font-medium",children:o.label})]})})},a))})]})}),e.jsx(os.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},className:"mt-8",children:e.jsxs(Re,{className:"shadow-lg",children:[e.jsxs(lt,{children:[e.jsx(mt,{children:"College Performance Overview"}),e.jsx(ts,{children:"Key metrics for your institution."})]}),e.jsxs(De,{children:[e.jsx("p",{className:"text-muted-foreground",children:"This area will display detailed analytics on student progress, faculty activity, and course effectiveness specific to your college. Integration with a backend will enable dynamic charts, reports, and data filtering capabilities."}),e.jsxs("div",{className:"mt-4 p-6 bg-secondary/30 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-primary",children:"Key Analytics Areas:"}),e.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1",children:[e.jsx("li",{children:"Student Performance Tracking (Quizzes, Exams, Assignments)"}),e.jsx("li",{children:"Faculty Engagement & Course Creation Metrics"}),e.jsx("li",{children:"Assessment Success Rates & Difficulty Analysis"}),e.jsx("li",{children:"Overall Student Activity & Time Spent"})]})]})]})]})})]})},et=A.forwardRef(({className:t,...r},s)=>e.jsx("span",{ref:s,className:Ot("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",t),...r}));et.displayName="Badge";var Cm="Tabs",[iD,oH]=nn(Cm,[Tc]),w6=Tc(),[oD,uv]=iD(Cm),j6=A.forwardRef((t,r)=>{const{__scopeTabs:s,value:n,onValueChange:c,defaultValue:o,orientation:a="horizontal",dir:d,activationMode:l="automatic",...i}=t,u=mu(d),[f,h]=$a({prop:n,onChange:c,defaultProp:o??"",caller:Cm});return e.jsx(oD,{scope:s,baseId:Hr(),value:f,onValueChange:h,orientation:a,dir:u,activationMode:l,children:e.jsx(Dt.div,{dir:u,"data-orientation":a,...i,ref:r})})});j6.displayName=Cm;var _6="TabsList",N6=A.forwardRef((t,r)=>{const{__scopeTabs:s,loop:n=!0,...c}=t,o=uv(_6,s),a=w6(s);return e.jsx(Py,{asChild:!0,...a,orientation:o.orientation,dir:o.dir,loop:n,children:e.jsx(Dt.div,{role:"tablist","aria-orientation":o.orientation,...c,ref:r})})});N6.displayName=_6;var S6="TabsTrigger",C6=A.forwardRef((t,r)=>{const{__scopeTabs:s,value:n,disabled:c=!1,...o}=t,a=uv(S6,s),d=w6(s),l=A6(a.baseId,n),i=T6(a.baseId,n),u=n===a.value;return e.jsx(My,{asChild:!0,...d,focusable:!c,active:u,children:e.jsx(Dt.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":i,"data-state":u?"active":"inactive","data-disabled":c?"":void 0,disabled:c,id:l,...o,ref:r,onMouseDown:It(t.onMouseDown,f=>{!c&&f.button===0&&f.ctrlKey===!1?a.onValueChange(n):f.preventDefault()}),onKeyDown:It(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&a.onValueChange(n)}),onFocus:It(t.onFocus,()=>{const f=a.activationMode!=="manual";!u&&!c&&f&&a.onValueChange(n)})})})});C6.displayName=S6;var k6="TabsContent",E6=A.forwardRef((t,r)=>{const{__scopeTabs:s,value:n,forceMount:c,children:o,...a}=t,d=uv(k6,s),l=A6(d.baseId,n),i=T6(d.baseId,n),u=n===d.value,f=A.useRef(u);return A.useEffect(()=>{const h=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(h)},[]),e.jsx(Tn,{present:c||u,children:({present:h})=>e.jsx(Dt.div,{"data-state":u?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:i,tabIndex:0,...a,ref:r,style:{...t.style,animationDuration:f.current?"0s":void 0},children:h&&o})})});E6.displayName=k6;function A6(t,r){return`${t}-trigger-${r}`}function T6(t,r){return`${t}-content-${r}`}var lD=j6,R6=N6,P6=C6,M6=E6;const Dr=lD,Ir=Lt.forwardRef(({className:t,...r},s)=>e.jsx(R6,{ref:s,className:Ot("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...r}));Ir.displayName=R6.displayName;const zt=Lt.forwardRef(({className:t,...r},s)=>e.jsx(P6,{ref:s,className:Ot("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...r}));zt.displayName=P6.displayName;const Kt=Lt.forwardRef(({className:t,...r},s)=>e.jsx(M6,{ref:s,className:Ot("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...r}));Kt.displayName=M6.displayName;var hv="Progress",fv=100,[cD,lH]=nn(hv),[dD,uD]=cD(hv),I6=A.forwardRef((t,r)=>{const{__scopeProgress:s,value:n=null,max:c,getValueLabel:o=hD,...a}=t;(c||c===0)&&!Ww(c)&&console.error(fD(`${c}`,"Progress"));const d=Ww(c)?c:fv;n!==null&&!Gw(n,d)&&console.error(mD(`${n}`,"Progress"));const l=Gw(n,d)?n:null,i=Ef(l)?o(l,d):void 0;return e.jsx(dD,{scope:s,value:l,max:d,children:e.jsx(Dt.div,{"aria-valuemax":d,"aria-valuemin":0,"aria-valuenow":Ef(l)?l:void 0,"aria-valuetext":i,role:"progressbar","data-state":L6(l,d),"data-value":l??void 0,"data-max":d,...a,ref:r})})});I6.displayName=hv;var O6="ProgressIndicator",F6=A.forwardRef((t,r)=>{const{__scopeProgress:s,...n}=t,c=uD(O6,s);return e.jsx(Dt.div,{"data-state":L6(c.value,c.max),"data-value":c.value??void 0,"data-max":c.max,...n,ref:r})});F6.displayName=O6;function hD(t,r){return`${Math.round(t/r*100)}%`}function L6(t,r){return t==null?"indeterminate":t===r?"complete":"loading"}function Ef(t){return typeof t=="number"}function Ww(t){return Ef(t)&&!isNaN(t)&&t>0}function Gw(t,r){return Ef(t)&&!isNaN(t)&&t<=r&&t>=0}function fD(t,r){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${r}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${fv}\`.`}function mD(t,r){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${r}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${fv} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var D6=I6,pD=F6;const co=A.forwardRef(({className:t,value:r,...s},n)=>e.jsx(D6,{ref:n,className:Ot("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...s,children:e.jsx(pD,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(r||0)}%)`}})}));co.displayName=D6.displayName;const gD=()=>{var q,z,k;const[t,r]=A.useState([]),[s,n]=A.useState(!0),[c,o]=A.useState(null),[a,d]=A.useState(navigator.onLine),[l,i]=A.useState(new Date),[u,f]=A.useState(!1),[h,m]=A.useState({status:"checking",uptime:"Calculating...",activeUsers:0,totalRequests:0}),[p,x]=A.useState([]),[g,v]=A.useState([]),[y,b]=A.useState({byRole:[],byCollege:[],total:0}),[C,T]=A.useState(null),{toast:M}=Js();qs();const U=A.useCallback(async()=>{f(!0);try{await L()}catch(R){console.error("Error refreshing data:",R)}finally{f(!1),i(new Date)}},[]);A.useEffect(()=>{const R=()=>d(!0),S=()=>d(!1);return window.addEventListener("online",R),window.addEventListener("offline",S),()=>{window.removeEventListener("online",R),window.removeEventListener("offline",S)}},[]),A.useEffect(()=>{L()},[]);const L=async()=>{try{n(!0);const[R,S,w,_]=await Promise.all([Pe.getSuperAdminDashboardStats(),Pe.getColleges(),Pe.getUsers({limit:1e3}),Pe.getAnalyticsData({viewType:"college",dateRange:"30"})]);let j=0,N=0,E=0,I=0;const D=w.success&&Array.isArray(w.data)?w.data:[];if(I=D.filter(V=>V.is_active).length,R.success){j=R.data.totalUsers||0,N=R.data.totalColleges||0,E=R.data.totalDepartments||0;const V=[{title:"Total Users",value:j.toString(),icon:e.jsx(as,{className:"h-6 w-6 text-primary"}),color:"bg-blue-500/10",detailsLink:"/admin/users",trend:`${j>0?"+"+Math.round(j*.12):"0"}`,trendType:"positive"},{title:"Total Colleges",value:N.toString(),icon:e.jsx(tr,{className:"h-6 w-6 text-primary"}),color:"bg-green-500/10",detailsLink:"/admin/colleges",trend:`${N>0?"+"+Math.round(N*.1):"0"}`,trendType:"positive"},{title:"Total Departments",value:E.toString(),icon:e.jsx(Rr,{className:"h-6 w-6 text-primary"}),color:"bg-purple-500/10",detailsLink:"/admin/departments",trend:`${E>0?"+"+Math.round(E*.15):"0"}`,trendType:"positive"},{title:"Active Users",value:I.toString(),icon:e.jsx(oc,{className:"h-6 w-6 text-primary"}),color:"bg-orange-500/10",detailsLink:"/admin/users",trend:`${I>0&&j>0?Math.round(I/j*100)+"%":"0%"}`,trendType:"positive"}];r(V)}if(S.success&&S.data){const V=Array.isArray(S.data.colleges)?S.data.colleges:[],H=[],G=V.slice(0,10);for(const $ of G){const Y=D.filter(O=>O.college_id===$.id).length;let F=0;try{const O=await Pe.getCourses({collegeId:$.id});F=O.success&&Array.isArray(O.data)?O.data.length:0}catch{F=0}H.push({id:$.id,name:$.name,users:Y,courses:F,status:$.is_active?"active":"inactive"})}v(H)}if(D.length>0){const V=D,H=V.reduce((O,W)=>{const K=W.role||"unknown";return O[K]||(O[K]=0),O[K]++,O},{}),G=Object.entries(H).map(([O,W])=>({role:O.replace("-"," ").replace(/\b\w/g,K=>K.toUpperCase()),count:W})),$=V.reduce((O,W)=>(W.college_id&&(O[W.college_id]||(O[W.college_id]=0),O[W.college_id]++),O),{}),Y=Array.isArray(S.data.colleges)?S.data.colleges:[],F=Object.entries($).slice(0,5).map(([O,W])=>{const K=Y.find(Q=>Q.id===O);return{college:K?K.name:"Unknown",count:W}});b({byRole:G,byCollege:F,total:V.length})}_.success&&T(_.data),m({status:"healthy",uptime:"99.9%",activeUsers:I,totalRequests:0}),x([{id:1,type:"user",title:"New User Registration",description:`${j} total users in the system`,time:"Just now",icon:e.jsx(as,{className:"h-4 w-4"})},{id:2,type:"college",title:"Active Colleges",description:`${N} colleges are active`,time:"5 min ago",icon:e.jsx(tr,{className:"h-4 w-4"})},{id:3,type:"department",title:"Department Count",description:`${E} departments configured`,time:"10 min ago",icon:e.jsx(Rr,{className:"h-4 w-4"})}])}catch(R){console.error("Error fetching dashboard stats:",R),o("Failed to load dashboard statistics"),M({variant:"destructive",title:"Error",description:"Failed to load dashboard statistics"})}finally{n(!1)}},P=[{label:"Manage Colleges",icon:e.jsx(tr,{className:"mr-2 h-5 w-5"}),linkTo:"/admin/colleges"},{label:"User Management",icon:e.jsx(as,{className:"mr-2 h-5 w-5"}),linkTo:"/admin/users"},{label:"System Analytics",icon:e.jsx(Rr,{className:"mr-2 h-5 w-5"}),linkTo:"/analytics/dashboard"},{label:"System Settings",icon:e.jsx(la,{className:"mr-2 h-5 w-5"}),linkTo:"/admin/settings"}],B={hidden:{opacity:0,y:20},visible:R=>({opacity:1,y:0,transition:{delay:R*.1,duration:.5}})};return s?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Tr,{className:"h-12 w-12 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading dashboard..."})]})}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsx(os.h1,{className:"text-3xl md:text-4xl font-bold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-primary via-purple-500 to-pink-500",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:"Super Admin Dashboard"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[a?e.jsx(yo,{className:"h-4 w-4 text-green-500"}):e.jsx(xo,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:a?"Online":"Offline"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${h.status==="healthy"?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:"text-sm text-muted-foreground capitalize",children:h.status})]}),e.jsxs(ee,{variant:"outline",size:"sm",onClick:U,disabled:u,children:[e.jsx(Is,{className:`h-4 w-4 ${u?"animate-spin":""}`}),"Refresh"]})]})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:t.map((R,S)=>e.jsx(os.div,{custom:S,initial:"hidden",animate:"visible",variants:B,children:e.jsxs(Re,{className:`shadow-lg hover:shadow-xl transition-shadow duration-300 ${R.color} border-primary/20`,children:[e.jsxs(lt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(mt,{className:"text-sm font-medium text-muted-foreground",children:R.title}),R.icon]}),e.jsxs(De,{children:[e.jsx("div",{className:"text-2xl font-bold text-foreground",children:R.value}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:`text-xs ${R.trendType==="positive"?"text-green-600":"text-red-600"}`,children:R.trend}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"vs last month"})]}),R.detailsLink&&e.jsx(ee,{variant:"link",size:"sm",asChild:!0,className:"px-0 text-xs text-primary hover:underline mt-2",children:e.jsxs(ks,{to:R.detailsLink,children:[e.jsx(Ss,{className:"mr-1 h-3 w-3"}),"View Details"]})})]})]})},S))}),e.jsxs(Dr,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(Ir,{className:"grid w-full grid-cols-5",children:[e.jsx(zt,{value:"overview",children:"Overview"}),e.jsx(zt,{value:"colleges",children:"Colleges"}),e.jsx(zt,{value:"users",children:"Users"}),e.jsx(zt,{value:"analytics",children:"Analytics"}),e.jsx(zt,{value:"system",children:"System"})]}),e.jsx(Kt,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(Re,{className:"shadow-lg",children:[e.jsxs(lt,{children:[e.jsx(mt,{className:"text-xl",children:"Quick Actions"}),e.jsx(ts,{children:"Common administrative tasks"})]}),e.jsx(De,{className:"grid gap-3",children:P.map((R,S)=>e.jsx(ee,{variant:"outline",className:"justify-start py-6 text-left hover:bg-accent/50 transition-colors duration-300 border-primary/30",asChild:!0,children:e.jsxs(ks,{to:R.linkTo,children:[R.icon,e.jsx("span",{className:"text-md font-medium",children:R.label})]})},S))})]}),e.jsxs(Re,{className:"shadow-lg",children:[e.jsxs(lt,{children:[e.jsxs(mt,{className:"text-xl flex items-center gap-2",children:[e.jsx(oc,{className:"h-5 w-5"}),"Recent Activities"]}),e.jsx(ts,{children:"Latest system activities"})]}),e.jsx(De,{children:e.jsx("div",{className:"space-y-4",children:p.map(R=>e.jsxs("div",{className:"flex items-center gap-4 p-3 border rounded-lg hover:bg-accent/50 transition-colors",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:R.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium",children:R.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:R.description})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:R.time})]},R.id))})})]})]})}),e.jsx(Kt,{value:"colleges",className:"space-y-6",children:e.jsxs(Re,{children:[e.jsxs(lt,{children:[e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(tr,{className:"h-5 w-5"}),"College Statistics"]}),e.jsx(ts,{children:"Overview of all colleges in the system"})]}),e.jsx(De,{children:g.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(tr,{className:"h-12 w-12 text-muted-foreground mx-auto mb-3"}),e.jsx("p",{className:"text-muted-foreground",children:"No colleges found"}),e.jsx(ee,{asChild:!0,className:"mt-4",children:e.jsxs(ks,{to:"/admin/colleges",children:[e.jsx(uf,{className:"mr-2 h-4 w-4"}),"Add College"]})})]}):e.jsx("div",{className:"space-y-4",children:g.map(R=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(tr,{className:"h-4 w-4 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:R.name}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("span",{children:[R.users," users"]}),e.jsx("span",{children:""}),e.jsxs("span",{children:[R.courses," courses"]})]})]})]}),e.jsx(et,{variant:R.status==="active"?"default":"secondary",children:R.status})]},R.id))})})]})}),e.jsx(Kt,{value:"users",className:"space-y-6",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(Re,{children:[e.jsxs(lt,{children:[e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(as,{className:"h-5 w-5"}),"Users by Role"]}),e.jsx(ts,{children:"Distribution of users across roles"})]}),e.jsx(De,{children:e.jsx("div",{className:"space-y-4",children:y.byRole.map((R,S)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:R.role}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[R.count," users"]})]}),e.jsx(co,{value:R.count/y.total*100,className:"h-2"})]},S))})})]}),e.jsxs(Re,{children:[e.jsxs(lt,{children:[e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(tr,{className:"h-5 w-5"}),"Users by College"]}),e.jsx(ts,{children:"Top colleges by user count"})]}),e.jsx(De,{children:e.jsx("div",{className:"space-y-4",children:y.byCollege.map((R,S)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:R.college}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[R.count," users"]})]}),e.jsx(co,{value:R.count/y.total*100,className:"h-2"})]},S))})})]})]})}),e.jsx(Kt,{value:"analytics",className:"space-y-6",children:e.jsxs(Re,{children:[e.jsxs(lt,{children:[e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(Rr,{className:"h-5 w-5"}),"System Analytics"]}),e.jsx(ts,{children:"Key performance metrics"})]}),e.jsx(De,{children:C?e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Total Assessments"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:((q=C.summary)==null?void 0:q.totalAssessments)||0})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"Active Students"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:((z=C.summary)==null?void 0:z.activeStudents)||0})]}),e.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-purple-800 mb-2",children:"Average Score"}),e.jsxs("p",{className:"text-3xl font-bold text-purple-600",children:[(((k=C.summary)==null?void 0:k.averageScore)||0).toFixed(1),"%"]})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Rr,{className:"h-12 w-12 text-muted-foreground mx-auto mb-3"}),e.jsx("p",{className:"text-muted-foreground",children:"No analytics data available"})]})})]})}),e.jsx(Kt,{value:"system",className:"space-y-6",children:e.jsxs(Re,{children:[e.jsxs(lt,{children:[e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(d9,{className:"h-5 w-5"}),"System Health"]}),e.jsx(ts,{children:"Monitor system performance and health"})]}),e.jsx(De,{children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"System Status"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-4 h-4 rounded-full ${h.status==="healthy"?"bg-green-500":"bg-red-500"}`}),e.jsx("p",{className:"text-2xl font-bold text-green-600 capitalize",children:h.status})]})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Active Users"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:h.activeUsers})]}),e.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-purple-800 mb-2",children:"Uptime"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:h.uptime})]}),e.jsxs("div",{className:"p-4 bg-orange-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-orange-800 mb-2",children:"Database"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Yt,{className:"h-6 w-6 text-green-500"}),e.jsx("p",{className:"text-lg font-bold text-orange-600",children:"Connected"})]})]})]})})]})})]}),e.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["Last updated: ",l.toLocaleTimeString(),u&&e.jsx("span",{className:"ml-2",children:" Refreshing..."})]})]})},xD=()=>{const{user:t}=qs(),{toast:r}=Js(),[s,n]=A.useState(navigator.onLine),[c,o]=A.useState(new Date),[a,d]=A.useState(!1),[l,i]=A.useState(!0);A.useState([]);const[u,f]=A.useState("offline");A.useState(null);const[h,m]=A.useState({today:{present:0,absent:0,late:0},week:{present:0,absent:0,late:0},month:{present:0,absent:0,late:0}}),[p,x]=A.useState([{title:"My Courses",value:"0",icon:e.jsx(lr,{className:"h-6 w-6 text-primary"}),color:"bg-blue-500/10",link:"/courses",detailsLink:"/courses",trend:"+0",trendType:"neutral"},{title:"Enrolled Students",value:"0",icon:e.jsx(as,{className:"h-6 w-6 text-primary"}),color:"bg-green-500/10",detailsLink:"/faculty/students",trend:"+0",trendType:"neutral"},{title:"Pending Gradings",value:"0",icon:e.jsx(Bn,{className:"h-6 w-6 text-primary"}),color:"bg-yellow-500/10",detailsLink:"/faculty/grading",trend:"+0",trendType:"neutral"},{title:"Average Score",value:"0%",icon:e.jsx(u1,{className:"h-6 w-6 text-primary"}),color:"bg-purple-500/10",detailsLink:"/faculty/analytics/scores",trend:"+0%",trendType:"neutral"}]),[g,v]=A.useState([]),[y,b]=A.useState([]),C=A.useCallback(async()=>{d(!0);try{await T()}catch(B){console.error("Error refreshing data:",B)}finally{d(!1),o(new Date)}},[]);A.useEffect(()=>{const B=setInterval(C,3e4);return()=>clearInterval(B)},[C]),A.useEffect(()=>{const B=()=>n(!0),q=()=>n(!1);return window.addEventListener("online",B),window.addEventListener("offline",q),()=>{window.removeEventListener("online",B),window.removeEventListener("offline",q)}},[]),A.useEffect(()=>{T()},[]);const T=async()=>{var B,q;try{i(!0);const z=await Pe.getAnalyticsData({viewType:"faculty",dateRange:"30"}),k=await Pe.getCourses({instructorId:t==null?void 0:t.id,status:"active"}),R=await Pe.getFacultyStatus({facultyId:t==null?void 0:t.id}),S=await Pe.getClassSchedules({instructorId:t==null?void 0:t.id}),w=await Pe.getAttendanceSessions({instructorId:t==null?void 0:t.id,date:new Date().toISOString().split("T")[0]});if(z.success&&z.data.summary){const _=z.data.summary,j=k.success?k.data:[],N=R.success?R.data[0]:null,E=S.success?S.data:[],I=w.success?w.data:[];x([{title:"My Courses",value:j.length.toString(),icon:e.jsx(lr,{className:"h-6 w-6 text-primary"}),color:"bg-blue-500/10",link:"/courses",detailsLink:"/courses",trend:j.length>0?"+2":"+0",trendType:j.length>0?"positive":"neutral"},{title:"Enrolled Students",value:((B=_.total_students)==null?void 0:B.toString())||"0",icon:e.jsx(as,{className:"h-6 w-6 text-primary"}),color:"bg-green-500/10",detailsLink:"/faculty/students",trend:_.total_students>0?"+12":"+0",trendType:_.total_students>0?"positive":"neutral"},{title:"Pending Gradings",value:((q=_.pending_submissions)==null?void 0:q.toString())||"0",icon:e.jsx(Bn,{className:"h-6 w-6 text-primary"}),color:"bg-yellow-500/10",detailsLink:"/faculty/grading",trend:_.pending_submissions>0?"-3":"+0",trendType:_.pending_submissions>0?"negative":"neutral"},{title:"Average Score",value:`${(_.average_score||0).toFixed(1)}%`,icon:e.jsx(u1,{className:"h-6 w-6 text-primary"}),color:"bg-purple-500/10",detailsLink:"/faculty/analytics/scores",trend:_.average_score>0?"+5%":"+0%",trendType:_.average_score>0?"positive":"neutral"}]),N&&f(N.status||"offline");const D=new Date,V=E.filter(G=>new Date(G.start_date||D).toDateString()===D.toDateString());v(V.map(G=>({id:G.id,course:G.class_name||"Class",time:G.start_time,room:G.room_name||"TBD",students:0,status:"upcoming"})));const H=I.reduce((G,$)=>(G.present+=$.present_count||0,G.absent+=$.absent_count||0,G.late+=$.late_count||0,G),{present:0,absent:0,late:0});m(G=>({...G,today:H}))}b([{id:1,type:"assessment",title:"New Assessment Created",description:"Data Structures Quiz created",time:"2 hours ago",icon:e.jsx(lr,{className:"h-4 w-4"})},{id:2,type:"student",title:"Student Submission",description:"John Doe submitted Algorithm Assignment",time:"4 hours ago",icon:e.jsx(as,{className:"h-4 w-4"})},{id:3,type:"attendance",title:"Attendance Marked",description:"45 students marked present for CS201",time:"6 hours ago",icon:e.jsx(Jn,{className:"h-4 w-4"})}])}catch(z){console.error("Error loading dashboard data:",z),r({variant:"destructive",title:"Error",description:"Failed to load dashboard data"})}finally{i(!1)}},M=async B=>{try{await Pe.updateFacultyStatus({facultyId:t==null?void 0:t.id,status:B,deviceType:"desktop",browser:navigator.userAgent,locationType:"on_campus",building:"Main Building",room:"Office 201"}),f(B),r({title:"Status Updated",description:`Your status has been updated to ${B}`})}catch(q){console.error("Error updating faculty status:",q),r({variant:"destructive",title:"Error",description:"Failed to update faculty status"})}},U=B=>{switch(B){case"available":return"bg-green-100 text-green-800 border-green-200";case"busy":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"away":return"bg-orange-100 text-orange-800 border-orange-200";case"offline":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},L=B=>{switch(B){case"available":return e.jsx(Yt,{className:"h-4 w-4 text-green-600"});case"busy":return e.jsx(Ps,{className:"h-4 w-4 text-yellow-600"});case"away":return e.jsx(Lr,{className:"h-4 w-4 text-orange-600"});case"offline":return e.jsx(Mr,{className:"h-4 w-4 text-gray-600"});default:return e.jsx(Mr,{className:"h-4 w-4 text-gray-600"})}},P=B=>{switch(B){case"positive":return"text-green-600";case"negative":return"text-red-600";default:return"text-gray-600"}};return l?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-muted-foreground mx-auto"}),e.jsx("p",{className:"mt-4 text-muted-foreground text-lg",children:"Loading your dashboard..."})]})}):e.jsx("div",{className:"min-h-screen bg-background p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Faculty Dashboard"}),e.jsxs("p",{className:"text-muted-foreground",children:["Welcome back, ",(t==null?void 0:t.name)||"Faculty","!"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s?e.jsx(yo,{className:"h-4 w-4 text-green-500"}):e.jsx(xo,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:s?"Online":"Offline"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[L(u),e.jsx(et,{className:U(u),children:u})]}),e.jsxs(ee,{variant:"outline",size:"sm",onClick:C,disabled:a,className:"flex items-center gap-2",children:[e.jsx(Is,{className:`h-4 w-4 ${a?"animate-spin":""}`}),"Refresh"]})]})]}),e.jsx(Re,{children:e.jsx(De,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Update Your Status"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Let students know your availability"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ee,{variant:u==="available"?"default":"outline",size:"sm",onClick:()=>M("available"),children:[e.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Available"]}),e.jsxs(ee,{variant:u==="busy"?"default":"outline",size:"sm",onClick:()=>M("busy"),children:[e.jsx(Ps,{className:"h-4 w-4 mr-2"}),"Busy"]}),e.jsxs(ee,{variant:u==="away"?"default":"outline",size:"sm",onClick:()=>M("away"),children:[e.jsx(Lr,{className:"h-4 w-4 mr-2"}),"Away"]})]})]})})}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:p.map((B,q)=>e.jsx(os.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:q*.1},children:e.jsxs(Re,{className:`shadow-lg hover:shadow-xl transition-shadow duration-300 ${B.color} border-primary/20`,children:[e.jsxs(lt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(mt,{className:"text-sm font-medium text-muted-foreground",children:B.title}),B.icon]}),e.jsxs(De,{children:[e.jsx("div",{className:"text-2xl font-bold text-foreground",children:B.value}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:`text-xs ${P(B.trendType)}`,children:B.trend}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"vs last month"})]}),B.detailsLink&&e.jsx(ee,{variant:"link",size:"sm",asChild:!0,className:"px-0 text-xs text-primary hover:underline mt-2",children:e.jsxs(ks,{to:B.detailsLink,children:[e.jsx(Ss,{className:"mr-1 h-3 w-3"}),"View Details"]})})]})]})},q))}),e.jsxs(Dr,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(Ir,{className:"grid w-full grid-cols-4",children:[e.jsx(zt,{value:"overview",children:"Overview"}),e.jsx(zt,{value:"schedule",children:"Today's Schedule"}),e.jsx(zt,{value:"attendance",children:"Attendance"}),e.jsx(zt,{value:"activities",children:"Activities"})]}),e.jsx(Kt,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(Re,{children:[e.jsxs(lt,{children:[e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(oc,{className:"h-5 w-5"}),"Quick Actions"]}),e.jsx(ts,{children:"Common tasks and shortcuts"})]}),e.jsxs(De,{className:"grid gap-3",children:[e.jsx(ee,{variant:"outline",className:"justify-start",asChild:!0,children:e.jsxs(ks,{to:"/assessments/create",children:[e.jsx(uf,{className:"mr-2 h-4 w-4"}),"Create Assessment"]})}),e.jsx(ee,{variant:"outline",className:"justify-start",asChild:!0,children:e.jsxs(ks,{to:"/admin/attendance",children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"}),"Mark Attendance"]})}),e.jsx(ee,{variant:"outline",className:"justify-start",asChild:!0,children:e.jsxs(ks,{to:"/admin/courses",children:[e.jsx(lr,{className:"mr-2 h-4 w-4"}),"Manage Courses"]})}),e.jsx(ee,{variant:"outline",className:"justify-start",asChild:!0,children:e.jsxs(ks,{to:"/question-bank",children:[e.jsx(Gr,{className:"mr-2 h-4 w-4"}),"Question Bank"]})})]})]}),e.jsxs(Re,{children:[e.jsxs(lt,{children:[e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(Jn,{className:"h-5 w-5"}),"Today's Attendance"]}),e.jsx(ts,{children:"Attendance summary for today"})]}),e.jsx(De,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"Present"}),e.jsx("span",{className:"text-2xl font-bold text-green-600",children:h.today.present})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"Absent"}),e.jsx("span",{className:"text-2xl font-bold text-red-600",children:h.today.absent})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"Late"}),e.jsx("span",{className:"text-2xl font-bold text-yellow-600",children:h.today.late})]})]})})]})]})}),e.jsx(Kt,{value:"schedule",className:"space-y-6",children:e.jsxs(Re,{children:[e.jsxs(lt,{children:[e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(fr,{className:"h-5 w-5"}),"Today's Classes"]}),e.jsx(ts,{children:"Your scheduled classes for today"})]}),e.jsx(De,{children:g.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(fr,{className:"h-12 w-12 text-muted-foreground mx-auto mb-3"}),e.jsx("p",{className:"text-muted-foreground",children:"No classes scheduled for today"})]}):e.jsx("div",{className:"space-y-4",children:g.map(B=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(lr,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:B.course}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ps,{className:"h-3 w-3"}),B.time]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Pa,{className:"h-3 w-3"}),B.room]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(as,{className:"h-3 w-3"}),B.students," students"]})]})]})]}),e.jsx(et,{variant:"outline",children:B.status})]},B.id))})})]})}),e.jsx(Kt,{value:"attendance",className:"space-y-6",children:e.jsxs(Re,{children:[e.jsxs(lt,{children:[e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(Jn,{className:"h-5 w-5"}),"Attendance Management"]}),e.jsx(ts,{children:"Track and manage student attendance"})]}),e.jsx(De,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Jn,{className:"h-12 w-12 text-muted-foreground mx-auto mb-3"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Manage attendance for your classes"}),e.jsx(ee,{asChild:!0,children:e.jsxs(ks,{to:"/admin/attendance",children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"}),"Open Attendance Management"]})})]})})]})}),e.jsx(Kt,{value:"activities",className:"space-y-6",children:e.jsxs(Re,{children:[e.jsxs(lt,{children:[e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(oc,{className:"h-5 w-5"}),"Recent Activities"]}),e.jsx(ts,{children:"Your recent actions and updates"})]}),e.jsx(De,{children:e.jsx("div",{className:"space-y-4",children:y.map(B=>e.jsxs("div",{className:"flex items-center gap-4 p-3 border rounded-lg hover:bg-accent/50 transition-colors",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:B.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium",children:B.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:B.description})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:B.time})]},B.id))})})]})})]}),e.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["Last updated: ",c.toLocaleTimeString(),a&&e.jsx("span",{className:"ml-2",children:" Refreshing..."})]})]})})},yD=()=>{const{user:t}=qs(),{toast:r}=Js(),[s,n]=A.useState(navigator.onLine),[c,o]=A.useState(new Date),[a,d]=A.useState(!1),[l,i]=A.useState(!0),[u,f]=A.useState([]),[h,m]=A.useState([]),[p,x]=A.useState([]),[g,v]=A.useState({totalAssessments:0,completedAssessments:0,pendingAssessments:0,scheduledAssessments:0,inProgressAssessments:0,averageScore:0,totalScore:0,streak:0}),[y,b]=A.useState({totalProblemsSolved:0,activePlatforms:0}),C=A.useCallback(async()=>{d(!0);try{await T()}catch(j){console.error("Error refreshing data:",j)}finally{d(!1),o(new Date)}},[]);A.useEffect(()=>{const j=()=>n(!0),N=()=>n(!1);return window.addEventListener("online",j),window.addEventListener("offline",N),()=>{window.removeEventListener("online",j),window.removeEventListener("offline",N)}},[]),A.useEffect(()=>{T()},[]);const T=async()=>{try{i(!0);const j=await Pe.getProfile();j.success&&(await M(j.data.id),await U(j.data.id),await L(j.data.id),await P())}catch(j){console.error("Error loading dashboard data:",j),r({variant:"destructive",title:"Error",description:"Failed to load dashboard data"})}finally{i(!1)}},M=async j=>{if(j)try{const N=await Pe.getAssessmentInstances({student_id:j,limit:50});if(N.success&&N.data){const I=N.data.filter((D,V,H)=>H.findIndex($=>$.id===D.id)===V);f(I),B(I)}else f([]),B([])}catch(N){console.error("Error loading assessments:",N),f([]),B([])}},U=async j=>{try{if(!j)return;const N=await Pe.getCourses({studentId:j,status:"active"});N.success&&N.data?m(N.data):m([])}catch(N){console.error("Error loading courses:",N),m([])}},L=async j=>{var N;try{const E=await Pe.getStudentCachedPlatformStatistics();if(E.success&&((N=E.data)!=null&&N.platformStatistics)){const I=E.data.platformStatistics,D=Object.entries(I).reduce((H,[G,$])=>G==="hackerrank"?H:H+(($==null?void 0:$.problemsSolved)||0),0),V=Object.keys(I).filter(H=>H!=="hackerrank"&&I[H]&&I[H].problemsSolved>0).length;b({totalProblemsSolved:D,activePlatforms:V})}}catch(E){E.message&&!E.message.includes("No cached platform statistics")&&console.error("Error loading coding stats:",E)}},P=async()=>{try{const j=await Pe.getNotifications();j.success&&j.data?x(j.data):x([])}catch(j){console.error("Error loading notifications:",j),x([])}},B=j=>{try{const N=j.length,E=j.filter(K=>K.submission_status==="submitted"||K.submission_status==="graded"),I=j.filter(K=>K.submission_status==="in_progress"),D=j.filter(K=>K.submission_status==="scheduled"),V=j.filter(K=>K.submission_status==="assigned"),H=I.length+D.length+V.length;let G=0,$=0;E.forEach(K=>{if(K.percentage_score)G+=parseFloat(K.percentage_score)||0,$++;else if(K.score&&K.total_points){const Q=parseFloat(K.score)/parseFloat(K.total_points)*100;G+=Q,$++}});const Y=$>0?Math.round(G/$):0;let F=0,O=0;if(E.length>0){const K=E.filter(Q=>Q.completion_date||Q.submitted_at||Q.updated_at).sort((Q,X)=>{const te=new Date(Q.completion_date||Q.submitted_at||Q.updated_at);return new Date(X.completion_date||X.submitted_at||X.updated_at)-te});if(K.length>0){const Q=new Date;Q.setHours(0,0,0,0),new Date(K[0].completion_date||K[0].submitted_at||K[0].updated_at).setHours(0,0,0,0);let te=0,de=new Date(Q);for(;K.some(be=>{const Ie=new Date(be.completion_date||be.submitted_at||be.updated_at);return Ie.setHours(0,0,0,0),Ie.getTime()===de.getTime()});)te++,de.setDate(de.getDate()-1);F=te;let xe=0,ne=null;K.forEach(ge=>{const be=new Date(ge.completion_date||ge.submitted_at||ge.updated_at);be.setHours(0,0,0,0),ne===null?xe=1:Math.floor((ne-be)/864e5)===1?xe++:xe=1,xe>O&&(O=xe),ne=be})}}F===0&&E.length>0&&(F=Math.min(E.length,7));const W={totalAssessments:N,completedAssessments:E.length,pendingAssessments:H,scheduledAssessments:D.length,inProgressAssessments:I.length,averageScore:Y,totalScore:Math.round(G),streak:F,maxStreak:O};v(W)}catch(N){console.error("Error calculating stats:",N)}},q=j=>{if(!j)return"S";const N=j.split(" ");return N.length===1?N[0].charAt(0).toUpperCase():N[0].charAt(0).toUpperCase()+N[N.length-1].charAt(0).toUpperCase()},z=j=>{switch(j){case"submitted":case"graded":return"bg-emerald-50 text-emerald-700 border-emerald-200";case"in_progress":return"bg-blue-50 text-blue-700 border-blue-200";case"scheduled":return"bg-purple-50 text-purple-700 border-purple-200";case"assigned":return"bg-orange-50 text-orange-700 border-orange-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},k=j=>{switch(j){case"submitted":case"graded":return"Completed";case"in_progress":return"In Progress";case"scheduled":return"Scheduled";case"assigned":return"Assigned";default:return"Unknown"}},R=j=>{if(j.submission_status!=="in_progress")return!1;if(j.end_date_only&&j.end_time_only){const N=`${j.end_date_only}T${j.end_time_only}`,E=new Date(N);if(new Date>E)return!1}if(j.started_at&&j.time_limit_minutes){const N=new Date(j.started_at);if(Math.floor((new Date-N)/(1e3*60))>=j.time_limit_minutes)return!1}return!0},S=j=>{if(!R(j))return null;if(j.started_at&&j.time_limit_minutes){const N=new Date(j.started_at),I=Math.floor((new Date-N)/(1e3*60)),D=Math.max(0,j.time_limit_minutes-I),V=Math.floor(D/60),H=D%60;return V>0?`${V}h ${H}m`:`${H}m`}return null},w=j=>j>=90?"text-emerald-600":j>=80?"text-blue-600":j>=70?"text-yellow-600":j>=60?"text-orange-600":"text-red-600",_=j=>j>=90?e.jsx(fu,{className:"h-5 w-5 text-yellow-500"}):j>=80?e.jsx(Kd,{className:"h-5 w-5 text-blue-500"}):j>=70?e.jsx(so,{className:"h-5 w-5 text-green-500"}):j>=60?e.jsx(nm,{className:"h-5 w-5 text-orange-500"}):e.jsx(ra,{className:"h-5 w-5 text-red-500"});return l?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-muted-foreground mx-auto"}),e.jsx("p",{className:"mt-4 text-muted-foreground text-lg",children:"Loading your dashboard..."})]})}):e.jsx("div",{className:"min-h-screen bg-background p-4",children:e.jsxs("div",{className:"max-w-[95vw] mx-auto space-y-8",children:[e.jsx("div",{className:"bg-card rounded-2xl p-8 text-card-foreground shadow-lg border border-border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs(Jd,{className:"h-20 w-20 border-4 border-border shadow-lg bg-card",children:[e.jsx(eu,{src:t==null?void 0:t.avatar_url}),e.jsx(tu,{className:"bg-muted text-muted-foreground text-2xl font-bold",children:q(t==null?void 0:t.name)})]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl font-bold mb-2 text-card-foreground",children:["Welcome back, ",(t==null?void 0:t.name)||"Student","! "]}),e.jsx("p",{className:"text-xl text-muted-foreground",children:"Ready to ace your next assessment?"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-4xl font-bold text-amber-600",children:g.streak}),e.jsxs("div",{className:"text-muted-foreground text-lg",children:[g.streak===1?"Day":"Days"," Streak "]}),g.maxStreak>g.streak&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Best: ",g.maxStreak," days"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[e.jsx(Re,{className:"bg-card text-card-foreground border border-border shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:e.jsx(De,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm font-medium",children:"Total"}),e.jsx("p",{className:"text-4xl font-bold text-card-foreground",children:g.totalAssessments}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Assessments"})]}),e.jsx(lr,{className:"h-12 w-12 text-blue-600"})]})})}),e.jsx(Re,{className:"bg-card text-card-foreground border border-border shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:e.jsx(De,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm font-medium",children:"Completed"}),e.jsx("p",{className:"text-4xl font-bold text-card-foreground",children:g.completedAssessments}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Finished"})]}),e.jsx(Yt,{className:"h-12 w-12 text-emerald-600"})]})})}),e.jsx(Re,{className:"bg-card text-card-foreground border border-border shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:e.jsx(De,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm font-medium",children:"Pending"}),e.jsx("p",{className:"text-4xl font-bold text-card-foreground",children:g.pendingAssessments}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Awaiting"})]}),e.jsx(Ps,{className:"h-12 w-12 text-orange-600"})]})})}),e.jsx(Re,{className:"bg-card text-card-foreground border border-border shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:e.jsx(De,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm font-medium",children:"Avg Score"}),e.jsxs("p",{className:"text-4xl font-bold text-card-foreground",children:[g.averageScore,"%"]}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Performance"})]}),e.jsx(Nc,{className:"h-12 w-12 text-purple-600"})]})})}),e.jsx(Re,{className:"bg-card text-card-foreground border border-border shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:e.jsx(De,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm font-medium",children:"Coding"}),e.jsx("p",{className:"text-4xl font-bold text-card-foreground",children:y.totalProblemsSolved}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Problems Solved"})]}),e.jsx(Gr,{className:"h-12 w-12 text-orange-600"})]})})})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs(Re,{className:"bg-card backdrop-blur-sm border-0 shadow-lg border border-border",children:[e.jsx(lt,{className:"bg-muted text-card-foreground rounded-t-lg border-b border-border",children:e.jsxs(mt,{className:"flex items-center space-x-3",children:[e.jsx(Ar,{className:"h-6 w-6 text-muted-foreground"}),e.jsx("span",{className:"text-xl",children:"Recent Assessments"})]})}),e.jsx(De,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[u.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(lr,{className:"h-12 w-12 text-muted-foreground mx-auto mb-3"}),e.jsx("p",{className:"text-muted-foreground text-base",children:"No assessments yet"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Your assigned assessments will appear here"})]}):e.jsx("div",{className:"space-y-3",children:u.slice(0,8).map((j,N)=>{var E;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-card rounded-lg border border-border hover:shadow-sm transition-all duration-200",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(lr,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-card-foreground truncate text-sm",children:j.title}),e.jsxs("div",{className:"flex items-center space-x-3 text-xs text-muted-foreground mt-1",children:[e.jsx("span",{className:"capitalize",children:(E=j.assessment_type)==null?void 0:E.replace("_"," ")}),j.total_points&&e.jsxs("span",{children:[" ",j.total_points," pts"]}),j.time_limit_minutes&&e.jsxs("span",{children:[" ",j.time_limit_minutes,"m"]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[j.percentage_score&&e.jsxs("div",{className:"flex items-center space-x-1",children:[_(j.percentage_score),e.jsxs("span",{className:`font-medium text-xs ${w(j.percentage_score)}`,children:[j.percentage_score,"%"]})]}),R(j)&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ps,{className:"h-3 w-3 text-orange-500"}),e.jsxs("span",{className:"text-xs text-orange-600 font-medium",children:[S(j)," left"]})]}),e.jsx(et,{className:`${z(j.submission_status)} border text-xs`,children:k(j.submission_status)})]}),R(j)&&e.jsx("div",{className:"mt-2",children:e.jsx(ee,{size:"sm",className:"w-full bg-orange-500 hover:bg-orange-600 text-white text-xs",asChild:!0,children:e.jsxs(ks,{to:`/student/assessments/${j.id}/take`,children:[e.jsx(ta,{className:"h-3 w-3 mr-1"}),"Resume Assessment"]})})})]},`${j.id}-${j.submission_status}-${N}`)})}),e.jsx("div",{className:"mt-4 space-y-2",children:e.jsx(ee,{className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground shadow-lg text-sm",asChild:!0,children:e.jsx(ks,{to:"/student/assessments",children:"View All Assessments"})})})]})})]}),g.totalAssessments>0&&e.jsxs(Re,{className:"bg-card backdrop-blur-sm border-0 shadow-lg border border-border",children:[e.jsx(lt,{className:"bg-muted text-card-foreground rounded-t-lg border-b border-border",children:e.jsxs(mt,{className:"flex items-center space-x-3",children:[e.jsx(o9,{className:"h-6 w-6 text-muted-foreground"}),e.jsx("span",{className:"text-xl",children:"Progress Overview"})]})}),e.jsx(De,{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-card-foreground mb-2",children:[Math.round(g.completedAssessments/g.totalAssessments*100),"%"]}),e.jsx("p",{className:"text-muted-foreground",children:"Completion Percentage"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[e.jsxs("div",{className:"bg-muted rounded-lg p-3 border border-border",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:g.completedAssessments}),e.jsx("div",{className:"text-sm text-blue-600",children:"Completed"})]}),e.jsxs("div",{className:"bg-muted rounded-lg p-3 border border-border",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:g.pendingAssessments}),e.jsx("div",{className:"text-sm text-orange-600",children:"Remaining"})]})]}),e.jsxs("p",{className:"text-center text-sm text-slate-500",children:[g.completedAssessments," of ",g.totalAssessments," assessments completed"]})]})})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s?e.jsx(yo,{className:"h-4 w-4 text-green-500"}):e.jsx(xo,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{children:s?"Online":"Offline"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{children:["Last updated: ",c.toLocaleTimeString()]}),a&&e.jsx("span",{children:" Refreshing..."}),e.jsx(ee,{variant:"outline",size:"sm",onClick:C,disabled:a,className:"ml-2",children:e.jsx(Is,{className:`h-4 w-4 ${a?"animate-spin":""}`})})]})]})]})]})})},$o=A.forwardRef(({className:t,...r},s)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:s,className:Ot("w-full caption-bottom text-sm",t),...r})}));$o.displayName="Table";const Bo=A.forwardRef(({className:t,...r},s)=>e.jsx("thead",{ref:s,className:Ot("[&_tr]:border-b",t),...r}));Bo.displayName="TableHeader";const zo=A.forwardRef(({className:t,...r},s)=>e.jsx("tbody",{ref:s,className:Ot("[&_tr:last-child]:border-0",t),...r}));zo.displayName="TableBody";const vD=A.forwardRef(({className:t,...r},s)=>e.jsx("tfoot",{ref:s,className:Ot("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...r}));vD.displayName="TableFooter";const _n=A.forwardRef(({className:t,...r},s)=>e.jsx("tr",{ref:s,className:Ot("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...r}));_n.displayName="TableRow";const Xt=A.forwardRef(({className:t,...r},s)=>e.jsx("th",{ref:s,className:Ot("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...r}));Xt.displayName="TableHead";const ns=A.forwardRef(({className:t,...r},s)=>e.jsx("td",{ref:s,className:Ot("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...r}));ns.displayName="TableCell";const bD=A.forwardRef(({className:t,...r},s)=>e.jsx("caption",{ref:s,className:Ot("mt-4 text-sm text-muted-foreground",t),...r}));bD.displayName="TableCaption";const ms=A.forwardRef(({className:t,...r},s)=>e.jsx("textarea",{className:Ot("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...r}));ms.displayName="Textarea";var km="Dialog",[$6,B6]=nn(km),[wD,Sa]=$6(km),z6=t=>{const{__scopeDialog:r,children:s,open:n,defaultOpen:c,onOpenChange:o,modal:a=!0}=t,d=A.useRef(null),l=A.useRef(null),[i,u]=$a({prop:n,defaultProp:c??!1,onChange:o,caller:km});return e.jsx(wD,{scope:r,triggerRef:d,contentRef:l,contentId:Hr(),titleId:Hr(),descriptionId:Hr(),open:i,onOpenChange:u,onOpenToggle:A.useCallback(()=>u(f=>!f),[u]),modal:a,children:s})};z6.displayName=km;var U6="DialogTrigger",V6=A.forwardRef((t,r)=>{const{__scopeDialog:s,...n}=t,c=Sa(U6,s),o=bs(r,c.triggerRef);return e.jsx(Dt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":c.open,"aria-controls":c.contentId,"data-state":gv(c.open),...n,ref:o,onClick:It(t.onClick,c.onOpenToggle)})});V6.displayName=U6;var mv="DialogPortal",[jD,q6]=$6(mv,{forceMount:void 0}),H6=t=>{const{__scopeDialog:r,forceMount:s,children:n,container:c}=t,o=Sa(mv,r);return e.jsx(jD,{scope:r,forceMount:s,children:A.Children.map(n,a=>e.jsx(Tn,{present:s||o.open,children:e.jsx(Ac,{asChild:!0,container:c,children:a})}))})};H6.displayName=mv;var Af="DialogOverlay",W6=A.forwardRef((t,r)=>{const s=q6(Af,t.__scopeDialog),{forceMount:n=s.forceMount,...c}=t,o=Sa(Af,t.__scopeDialog);return o.modal?e.jsx(Tn,{present:n||o.open,children:e.jsx(ND,{...c,ref:r})}):null});W6.displayName=Af;var _D=to("DialogOverlay.RemoveScroll"),ND=A.forwardRef((t,r)=>{const{__scopeDialog:s,...n}=t,c=Sa(Af,s);return e.jsx(fm,{as:_D,allowPinchZoom:!0,shards:[c.contentRef],children:e.jsx(Dt.div,{"data-state":gv(c.open),...n,ref:r,style:{pointerEvents:"auto",...n.style}})})}),sl="DialogContent",G6=A.forwardRef((t,r)=>{const s=q6(sl,t.__scopeDialog),{forceMount:n=s.forceMount,...c}=t,o=Sa(sl,t.__scopeDialog);return e.jsx(Tn,{present:n||o.open,children:o.modal?e.jsx(SD,{...c,ref:r}):e.jsx(CD,{...c,ref:r})})});G6.displayName=sl;var SD=A.forwardRef((t,r)=>{const s=Sa(sl,t.__scopeDialog),n=A.useRef(null),c=bs(r,s.contentRef,n);return A.useEffect(()=>{const o=n.current;if(o)return um(o)},[]),e.jsx(K6,{...t,ref:c,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:It(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),(a=s.triggerRef.current)==null||a.focus()}),onPointerDownOutside:It(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,d=a.button===0&&a.ctrlKey===!0;(a.button===2||d)&&o.preventDefault()}),onFocusOutside:It(t.onFocusOutside,o=>o.preventDefault())})}),CD=A.forwardRef((t,r)=>{const s=Sa(sl,t.__scopeDialog),n=A.useRef(!1),c=A.useRef(!1);return e.jsx(K6,{...t,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var a,d;(a=t.onCloseAutoFocus)==null||a.call(t,o),o.defaultPrevented||(n.current||(d=s.triggerRef.current)==null||d.focus(),o.preventDefault()),n.current=!1,c.current=!1},onInteractOutside:o=>{var l,i;(l=t.onInteractOutside)==null||l.call(t,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(c.current=!0));const a=o.target;((i=s.triggerRef.current)==null?void 0:i.contains(a))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&c.current&&o.preventDefault()}})}),K6=A.forwardRef((t,r)=>{const{__scopeDialog:s,trapFocus:n,onOpenAutoFocus:c,onCloseAutoFocus:o,...a}=t,d=Sa(sl,s),l=A.useRef(null),i=bs(r,l);return im(),e.jsxs(e.Fragment,{children:[e.jsx(pu,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:c,onUnmountAutoFocus:o,children:e.jsx(Sc,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":gv(d.open),...a,ref:i,onDismiss:()=>d.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(ED,{titleId:d.titleId}),e.jsx(TD,{contentRef:l,descriptionId:d.descriptionId})]})]})}),pv="DialogTitle",Y6=A.forwardRef((t,r)=>{const{__scopeDialog:s,...n}=t,c=Sa(pv,s);return e.jsx(Dt.h2,{id:c.titleId,...n,ref:r})});Y6.displayName=pv;var Q6="DialogDescription",X6=A.forwardRef((t,r)=>{const{__scopeDialog:s,...n}=t,c=Sa(Q6,s);return e.jsx(Dt.p,{id:c.descriptionId,...n,ref:r})});X6.displayName=Q6;var Z6="DialogClose",J6=A.forwardRef((t,r)=>{const{__scopeDialog:s,...n}=t,c=Sa(Z6,s);return e.jsx(Dt.button,{type:"button",...n,ref:r,onClick:It(t.onClick,()=>c.onOpenChange(!1))})});J6.displayName=Z6;function gv(t){return t?"open":"closed"}var eS="DialogTitleWarning",[kD,tS]=N9(eS,{contentName:sl,titleName:pv,docsSlug:"dialog"}),ED=({titleId:t})=>{const r=tS(eS),s=`\`${r.contentName}\` requires a \`${r.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${r.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${r.docsSlug}`;return A.useEffect(()=>{t&&(document.getElementById(t)||console.error(s))},[s,t]),null},AD="DialogDescriptionWarning",TD=({contentRef:t,descriptionId:r})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${tS(AD).contentName}}.`;return A.useEffect(()=>{var o;const c=(o=t.current)==null?void 0:o.getAttribute("aria-describedby");r&&c&&(document.getElementById(r)||console.warn(n))},[n,t,r]),null},xv=z6,sS=V6,yv=H6,Em=W6,Am=G6,vv=Y6,bv=X6,wv=J6;const Ht=xv,xa=sS,RD=yv,rS=Lt.forwardRef(({className:t,...r},s)=>e.jsx(Em,{ref:s,className:Ot("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r}));rS.displayName=Em.displayName;const Zt=Lt.forwardRef(({className:t,children:r,...s},n)=>e.jsxs(RD,{children:[e.jsx(rS,{}),e.jsxs(Am,{ref:n,className:Ot("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s,children:[r,e.jsxs(wv,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(Dn,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Zt.displayName=Am.displayName;const Jt=({className:t,...r})=>e.jsx("div",{className:Ot("flex flex-col space-y-1.5 text-center sm:text-left",t),...r});Jt.displayName="DialogHeader";const ir=({className:t,...r})=>e.jsx("div",{className:Ot("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r});ir.displayName="DialogFooter";const es=Lt.forwardRef(({className:t,...r},s)=>e.jsx(vv,{ref:s,className:Ot("text-lg font-semibold leading-none tracking-tight",t),...r}));es.displayName=vv.displayName;const ps=Lt.forwardRef(({className:t,...r},s)=>e.jsx(bv,{ref:s,className:Ot("text-sm text-muted-foreground",t),...r}));ps.displayName=bv.displayName;var nS="AlertDialog",[PD,cH]=nn(nS,[B6]),pi=B6(),aS=t=>{const{__scopeAlertDialog:r,...s}=t,n=pi(r);return e.jsx(xv,{...n,...s,modal:!0})};aS.displayName=nS;var MD="AlertDialogTrigger",iS=A.forwardRef((t,r)=>{const{__scopeAlertDialog:s,...n}=t,c=pi(s);return e.jsx(sS,{...c,...n,ref:r})});iS.displayName=MD;var ID="AlertDialogPortal",oS=t=>{const{__scopeAlertDialog:r,...s}=t,n=pi(r);return e.jsx(yv,{...n,...s})};oS.displayName=ID;var OD="AlertDialogOverlay",lS=A.forwardRef((t,r)=>{const{__scopeAlertDialog:s,...n}=t,c=pi(s);return e.jsx(Em,{...c,...n,ref:r})});lS.displayName=OD;var Zl="AlertDialogContent",[FD,LD]=PD(Zl),DD=N7("AlertDialogContent"),cS=A.forwardRef((t,r)=>{const{__scopeAlertDialog:s,children:n,...c}=t,o=pi(s),a=A.useRef(null),d=bs(r,a),l=A.useRef(null);return e.jsx(kD,{contentName:Zl,titleName:dS,docsSlug:"alert-dialog",children:e.jsx(FD,{scope:s,cancelRef:l,children:e.jsxs(Am,{role:"alertdialog",...o,...c,ref:d,onOpenAutoFocus:It(c.onOpenAutoFocus,i=>{var u;i.preventDefault(),(u=l.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:i=>i.preventDefault(),onInteractOutside:i=>i.preventDefault(),children:[e.jsx(DD,{children:n}),e.jsx(BD,{contentRef:a})]})})})});cS.displayName=Zl;var dS="AlertDialogTitle",uS=A.forwardRef((t,r)=>{const{__scopeAlertDialog:s,...n}=t,c=pi(s);return e.jsx(vv,{...c,...n,ref:r})});uS.displayName=dS;var hS="AlertDialogDescription",fS=A.forwardRef((t,r)=>{const{__scopeAlertDialog:s,...n}=t,c=pi(s);return e.jsx(bv,{...c,...n,ref:r})});fS.displayName=hS;var $D="AlertDialogAction",mS=A.forwardRef((t,r)=>{const{__scopeAlertDialog:s,...n}=t,c=pi(s);return e.jsx(wv,{...c,...n,ref:r})});mS.displayName=$D;var pS="AlertDialogCancel",gS=A.forwardRef((t,r)=>{const{__scopeAlertDialog:s,...n}=t,{cancelRef:c}=LD(pS,s),o=pi(s),a=bs(r,c);return e.jsx(wv,{...o,...n,ref:a})});gS.displayName=pS;var BD=({contentRef:t})=>{const r=`\`${Zl}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Zl}\` by passing a \`${hS}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Zl}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return A.useEffect(()=>{var n;document.getElementById((n=t.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(r)},[r,t]),null},zD=aS,UD=iS,VD=oS,xS=lS,yS=cS,vS=mS,bS=gS,wS=uS,jS=fS;const Uo=zD,V0=UD,qD=VD,_S=Lt.forwardRef(({className:t,...r},s)=>e.jsx(xS,{className:Ot("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r,ref:s}));_S.displayName=xS.displayName;const Mi=Lt.forwardRef(({className:t,...r},s)=>e.jsxs(qD,{children:[e.jsx(_S,{}),e.jsx(yS,{ref:s,className:Ot("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r})]}));Mi.displayName=yS.displayName;const Ii=({className:t,...r})=>e.jsx("div",{className:Ot("flex flex-col space-y-2 text-center sm:text-left",t),...r});Ii.displayName="AlertDialogHeader";const Oi=({className:t,...r})=>e.jsx("div",{className:Ot("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r});Oi.displayName="AlertDialogFooter";const Fi=Lt.forwardRef(({className:t,...r},s)=>e.jsx(wS,{ref:s,className:Ot("text-lg font-semibold",t),...r}));Fi.displayName=wS.displayName;const Li=Lt.forwardRef(({className:t,...r},s)=>e.jsx(jS,{ref:s,className:Ot("text-sm text-muted-foreground",t),...r}));Li.displayName=jS.displayName;const Di=Lt.forwardRef(({className:t,...r},s)=>e.jsx(vS,{ref:s,className:Ot(hy(),t),...r}));Di.displayName=vS.displayName;const Ko=Lt.forwardRef(({className:t,...r},s)=>e.jsx(bS,{ref:s,className:Ot(hy({variant:"outline"}),"mt-2 sm:mt-0",t),...r}));Ko.displayName=bS.displayName;function Kw(t,[r,s]){return Math.min(s,Math.max(r,t))}function jv(t){const r=A.useRef({value:t,previous:t});return A.useMemo(()=>(r.current.value!==t&&(r.current.previous=r.current.value,r.current.value=t),r.current.previous),[t])}var NS=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),HD="VisuallyHidden",_v=A.forwardRef((t,r)=>e.jsx(Dt.span,{...t,ref:r,style:{...NS,...t.style}}));_v.displayName=HD;var WD=[" ","Enter","ArrowUp","ArrowDown"],GD=[" ","Enter"],rl="Select",[Tm,Rm,KD]=am(rl),[Rc,dH]=nn(rl,[KD,Ec]),Pm=Ec(),[YD,bo]=Rc(rl),[QD,XD]=Rc(rl),SS=t=>{const{__scopeSelect:r,children:s,open:n,defaultOpen:c,onOpenChange:o,value:a,defaultValue:d,onValueChange:l,dir:i,name:u,autoComplete:f,disabled:h,required:m,form:p}=t,x=Pm(r),[g,v]=A.useState(null),[y,b]=A.useState(null),[C,T]=A.useState(!1),M=mu(i),[U,L]=$a({prop:n,defaultProp:c??!1,onChange:o,caller:rl}),[P,B]=$a({prop:a,defaultProp:d,onChange:l,caller:rl}),q=A.useRef(null),z=g?p||!!g.closest("form"):!0,[k,R]=A.useState(new Set),S=Array.from(k).map(w=>w.props.value).join(";");return e.jsx(Ay,{...x,children:e.jsxs(YD,{required:m,scope:r,trigger:g,onTriggerChange:v,valueNode:y,onValueNodeChange:b,valueNodeHasChildren:C,onValueNodeHasChildrenChange:T,contentId:Hr(),value:P,onValueChange:B,open:U,onOpenChange:L,dir:M,triggerPointerDownPosRef:q,disabled:h,children:[e.jsx(Tm.Provider,{scope:r,children:e.jsx(QD,{scope:t.__scopeSelect,onNativeOptionAdd:A.useCallback(w=>{R(_=>new Set(_).add(w))},[]),onNativeOptionRemove:A.useCallback(w=>{R(_=>{const j=new Set(_);return j.delete(w),j})},[]),children:s})}),z?e.jsxs(YS,{"aria-hidden":!0,required:m,tabIndex:-1,name:u,autoComplete:f,value:P,onChange:w=>B(w.target.value),disabled:h,form:p,children:[P===void 0?e.jsx("option",{value:""}):null,Array.from(k)]},S):null]})})};SS.displayName=rl;var CS="SelectTrigger",kS=A.forwardRef((t,r)=>{const{__scopeSelect:s,disabled:n=!1,...c}=t,o=Pm(s),a=bo(CS,s),d=a.disabled||n,l=bs(r,a.onTriggerChange),i=Rm(s),u=A.useRef("touch"),[f,h,m]=XS(x=>{const g=i().filter(b=>!b.disabled),v=g.find(b=>b.value===a.value),y=ZS(g,x,v);y!==void 0&&a.onValueChange(y.value)}),p=x=>{d||(a.onOpenChange(!0),m()),x&&(a.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return e.jsx(dm,{asChild:!0,...o,children:e.jsx(Dt.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:d,"data-disabled":d?"":void 0,"data-placeholder":QS(a.value)?"":void 0,...c,ref:l,onClick:It(c.onClick,x=>{x.currentTarget.focus(),u.current!=="mouse"&&p(x)}),onPointerDown:It(c.onPointerDown,x=>{u.current=x.pointerType;const g=x.target;g.hasPointerCapture(x.pointerId)&&g.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(p(x),x.preventDefault())}),onKeyDown:It(c.onKeyDown,x=>{const g=f.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&h(x.key),!(g&&x.key===" ")&&WD.includes(x.key)&&(p(),x.preventDefault())})})})});kS.displayName=CS;var ES="SelectValue",AS=A.forwardRef((t,r)=>{const{__scopeSelect:s,className:n,style:c,children:o,placeholder:a="",...d}=t,l=bo(ES,s),{onValueNodeHasChildrenChange:i}=l,u=o!==void 0,f=bs(r,l.onValueNodeChange);return _r(()=>{i(u)},[i,u]),e.jsx(Dt.span,{...d,ref:f,style:{pointerEvents:"none"},children:QS(l.value)?e.jsx(e.Fragment,{children:a}):o})});AS.displayName=ES;var ZD="SelectIcon",TS=A.forwardRef((t,r)=>{const{__scopeSelect:s,children:n,...c}=t;return e.jsx(Dt.span,{"aria-hidden":!0,...c,ref:r,children:n||""})});TS.displayName=ZD;var JD="SelectPortal",RS=t=>e.jsx(Ac,{asChild:!0,...t});RS.displayName=JD;var nl="SelectContent",PS=A.forwardRef((t,r)=>{const s=bo(nl,t.__scopeSelect),[n,c]=A.useState();if(_r(()=>{c(new DocumentFragment)},[]),!s.open){const o=n;return o?ll.createPortal(e.jsx(MS,{scope:t.__scopeSelect,children:e.jsx(Tm.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),o):null}return e.jsx(IS,{...t,ref:r})});PS.displayName=nl;var fa=10,[MS,wo]=Rc(nl),e$="SelectContentImpl",t$=to("SelectContent.RemoveScroll"),IS=A.forwardRef((t,r)=>{const{__scopeSelect:s,position:n="item-aligned",onCloseAutoFocus:c,onEscapeKeyDown:o,onPointerDownOutside:a,side:d,sideOffset:l,align:i,alignOffset:u,arrowPadding:f,collisionBoundary:h,collisionPadding:m,sticky:p,hideWhenDetached:x,avoidCollisions:g,...v}=t,y=bo(nl,s),[b,C]=A.useState(null),[T,M]=A.useState(null),U=bs(r,Y=>C(Y)),[L,P]=A.useState(null),[B,q]=A.useState(null),z=Rm(s),[k,R]=A.useState(!1),S=A.useRef(!1);A.useEffect(()=>{if(b)return um(b)},[b]),im();const w=A.useCallback(Y=>{const[F,...O]=z().map(Q=>Q.ref.current),[W]=O.slice(-1),K=document.activeElement;for(const Q of Y)if(Q===K||(Q==null||Q.scrollIntoView({block:"nearest"}),Q===F&&T&&(T.scrollTop=0),Q===W&&T&&(T.scrollTop=T.scrollHeight),Q==null||Q.focus(),document.activeElement!==K))return},[z,T]),_=A.useCallback(()=>w([L,b]),[w,L,b]);A.useEffect(()=>{k&&_()},[k,_]);const{onOpenChange:j,triggerPointerDownPosRef:N}=y;A.useEffect(()=>{if(b){let Y={x:0,y:0};const F=W=>{var K,Q;Y={x:Math.abs(Math.round(W.pageX)-(((K=N.current)==null?void 0:K.x)??0)),y:Math.abs(Math.round(W.pageY)-(((Q=N.current)==null?void 0:Q.y)??0))}},O=W=>{Y.x<=10&&Y.y<=10?W.preventDefault():b.contains(W.target)||j(!1),document.removeEventListener("pointermove",F),N.current=null};return N.current!==null&&(document.addEventListener("pointermove",F),document.addEventListener("pointerup",O,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",F),document.removeEventListener("pointerup",O,{capture:!0})}}},[b,j,N]),A.useEffect(()=>{const Y=()=>j(!1);return window.addEventListener("blur",Y),window.addEventListener("resize",Y),()=>{window.removeEventListener("blur",Y),window.removeEventListener("resize",Y)}},[j]);const[E,I]=XS(Y=>{const F=z().filter(K=>!K.disabled),O=F.find(K=>K.ref.current===document.activeElement),W=ZS(F,Y,O);W&&setTimeout(()=>W.ref.current.focus())}),D=A.useCallback((Y,F,O)=>{const W=!S.current&&!O;(y.value!==void 0&&y.value===F||W)&&(P(Y),W&&(S.current=!0))},[y.value]),V=A.useCallback(()=>b==null?void 0:b.focus(),[b]),H=A.useCallback((Y,F,O)=>{const W=!S.current&&!O;(y.value!==void 0&&y.value===F||W)&&q(Y)},[y.value]),G=n==="popper"?q0:OS,$=G===q0?{side:d,sideOffset:l,align:i,alignOffset:u,arrowPadding:f,collisionBoundary:h,collisionPadding:m,sticky:p,hideWhenDetached:x,avoidCollisions:g}:{};return e.jsx(MS,{scope:s,content:b,viewport:T,onViewportChange:M,itemRefCallback:D,selectedItem:L,onItemLeave:V,itemTextRefCallback:H,focusSelectedItem:_,selectedItemText:B,position:n,isPositioned:k,searchRef:E,children:e.jsx(fm,{as:t$,allowPinchZoom:!0,children:e.jsx(pu,{asChild:!0,trapped:y.open,onMountAutoFocus:Y=>{Y.preventDefault()},onUnmountAutoFocus:It(c,Y=>{var F;(F=y.trigger)==null||F.focus({preventScroll:!0}),Y.preventDefault()}),children:e.jsx(Sc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:Y=>Y.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:e.jsx(G,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:Y=>Y.preventDefault(),...v,...$,onPlaced:()=>R(!0),ref:U,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:It(v.onKeyDown,Y=>{const F=Y.ctrlKey||Y.altKey||Y.metaKey;if(Y.key==="Tab"&&Y.preventDefault(),!F&&Y.key.length===1&&I(Y.key),["ArrowUp","ArrowDown","Home","End"].includes(Y.key)){let W=z().filter(K=>!K.disabled).map(K=>K.ref.current);if(["ArrowUp","End"].includes(Y.key)&&(W=W.slice().reverse()),["ArrowUp","ArrowDown"].includes(Y.key)){const K=Y.target,Q=W.indexOf(K);W=W.slice(Q+1)}setTimeout(()=>w(W)),Y.preventDefault()}})})})})})})});IS.displayName=e$;var s$="SelectItemAlignedPosition",OS=A.forwardRef((t,r)=>{const{__scopeSelect:s,onPlaced:n,...c}=t,o=bo(nl,s),a=wo(nl,s),[d,l]=A.useState(null),[i,u]=A.useState(null),f=bs(r,U=>u(U)),h=Rm(s),m=A.useRef(!1),p=A.useRef(!0),{viewport:x,selectedItem:g,selectedItemText:v,focusSelectedItem:y}=a,b=A.useCallback(()=>{if(o.trigger&&o.valueNode&&d&&i&&x&&g&&v){const U=o.trigger.getBoundingClientRect(),L=i.getBoundingClientRect(),P=o.valueNode.getBoundingClientRect(),B=v.getBoundingClientRect();if(o.dir!=="rtl"){const K=B.left-L.left,Q=P.left-K,X=U.left-Q,te=U.width+X,de=Math.max(te,L.width),xe=window.innerWidth-fa,ne=Kw(Q,[fa,Math.max(fa,xe-de)]);d.style.minWidth=te+"px",d.style.left=ne+"px"}else{const K=L.right-B.right,Q=window.innerWidth-P.right-K,X=window.innerWidth-U.right-Q,te=U.width+X,de=Math.max(te,L.width),xe=window.innerWidth-fa,ne=Kw(Q,[fa,Math.max(fa,xe-de)]);d.style.minWidth=te+"px",d.style.right=ne+"px"}const q=h(),z=window.innerHeight-fa*2,k=x.scrollHeight,R=window.getComputedStyle(i),S=parseInt(R.borderTopWidth,10),w=parseInt(R.paddingTop,10),_=parseInt(R.borderBottomWidth,10),j=parseInt(R.paddingBottom,10),N=S+w+k+j+_,E=Math.min(g.offsetHeight*5,N),I=window.getComputedStyle(x),D=parseInt(I.paddingTop,10),V=parseInt(I.paddingBottom,10),H=U.top+U.height/2-fa,G=z-H,$=g.offsetHeight/2,Y=g.offsetTop+$,F=S+w+Y,O=N-F;if(F<=H){const K=q.length>0&&g===q[q.length-1].ref.current;d.style.bottom="0px";const Q=i.clientHeight-x.offsetTop-x.offsetHeight,X=Math.max(G,$+(K?V:0)+Q+_),te=F+X;d.style.height=te+"px"}else{const K=q.length>0&&g===q[0].ref.current;d.style.top="0px";const X=Math.max(H,S+x.offsetTop+(K?D:0)+$)+O;d.style.height=X+"px",x.scrollTop=F-H+x.offsetTop}d.style.margin=`${fa}px 0`,d.style.minHeight=E+"px",d.style.maxHeight=z+"px",n==null||n(),requestAnimationFrame(()=>m.current=!0)}},[h,o.trigger,o.valueNode,d,i,x,g,v,o.dir,n]);_r(()=>b(),[b]);const[C,T]=A.useState();_r(()=>{i&&T(window.getComputedStyle(i).zIndex)},[i]);const M=A.useCallback(U=>{U&&p.current===!0&&(b(),y==null||y(),p.current=!1)},[b,y]);return e.jsx(n$,{scope:s,contentWrapper:d,shouldExpandOnScrollRef:m,onScrollButtonChange:M,children:e.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:e.jsx(Dt.div,{...c,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...c.style}})})})});OS.displayName=s$;var r$="SelectPopperPosition",q0=A.forwardRef((t,r)=>{const{__scopeSelect:s,align:n="start",collisionPadding:c=fa,...o}=t,a=Pm(s);return e.jsx(Ty,{...a,...o,ref:r,align:n,collisionPadding:c,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});q0.displayName=r$;var[n$,Nv]=Rc(nl,{}),H0="SelectViewport",FS=A.forwardRef((t,r)=>{const{__scopeSelect:s,nonce:n,...c}=t,o=wo(H0,s),a=Nv(H0,s),d=bs(r,o.onViewportChange),l=A.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),e.jsx(Tm.Slot,{scope:s,children:e.jsx(Dt.div,{"data-radix-select-viewport":"",role:"presentation",...c,ref:d,style:{position:"relative",flex:1,overflow:"hidden auto",...c.style},onScroll:It(c.onScroll,i=>{const u=i.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:h}=a;if(h!=null&&h.current&&f){const m=Math.abs(l.current-u.scrollTop);if(m>0){const p=window.innerHeight-fa*2,x=parseFloat(f.style.minHeight),g=parseFloat(f.style.height),v=Math.max(x,g);if(v<p){const y=v+m,b=Math.min(p,y),C=y-b;f.style.height=b+"px",f.style.bottom==="0px"&&(u.scrollTop=C>0?C:0,f.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});FS.displayName=H0;var LS="SelectGroup",[a$,i$]=Rc(LS),o$=A.forwardRef((t,r)=>{const{__scopeSelect:s,...n}=t,c=Hr();return e.jsx(a$,{scope:s,id:c,children:e.jsx(Dt.div,{role:"group","aria-labelledby":c,...n,ref:r})})});o$.displayName=LS;var DS="SelectLabel",$S=A.forwardRef((t,r)=>{const{__scopeSelect:s,...n}=t,c=i$(DS,s);return e.jsx(Dt.div,{id:c.id,...n,ref:r})});$S.displayName=DS;var Tf="SelectItem",[l$,BS]=Rc(Tf),zS=A.forwardRef((t,r)=>{const{__scopeSelect:s,value:n,disabled:c=!1,textValue:o,...a}=t,d=bo(Tf,s),l=wo(Tf,s),i=d.value===n,[u,f]=A.useState(o??""),[h,m]=A.useState(!1),p=bs(r,y=>{var b;return(b=l.itemRefCallback)==null?void 0:b.call(l,y,n,c)}),x=Hr(),g=A.useRef("touch"),v=()=>{c||(d.onValueChange(n),d.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(l$,{scope:s,value:n,disabled:c,textId:x,isSelected:i,onItemTextChange:A.useCallback(y=>{f(b=>b||((y==null?void 0:y.textContent)??"").trim())},[]),children:e.jsx(Tm.ItemSlot,{scope:s,value:n,disabled:c,textValue:u,children:e.jsx(Dt.div,{role:"option","aria-labelledby":x,"data-highlighted":h?"":void 0,"aria-selected":i&&h,"data-state":i?"checked":"unchecked","aria-disabled":c||void 0,"data-disabled":c?"":void 0,tabIndex:c?void 0:-1,...a,ref:p,onFocus:It(a.onFocus,()=>m(!0)),onBlur:It(a.onBlur,()=>m(!1)),onClick:It(a.onClick,()=>{g.current!=="mouse"&&v()}),onPointerUp:It(a.onPointerUp,()=>{g.current==="mouse"&&v()}),onPointerDown:It(a.onPointerDown,y=>{g.current=y.pointerType}),onPointerMove:It(a.onPointerMove,y=>{var b;g.current=y.pointerType,c?(b=l.onItemLeave)==null||b.call(l):g.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:It(a.onPointerLeave,y=>{var b;y.currentTarget===document.activeElement&&((b=l.onItemLeave)==null||b.call(l))}),onKeyDown:It(a.onKeyDown,y=>{var C;((C=l.searchRef)==null?void 0:C.current)!==""&&y.key===" "||(GD.includes(y.key)&&v(),y.key===" "&&y.preventDefault())})})})})});zS.displayName=Tf;var nd="SelectItemText",US=A.forwardRef((t,r)=>{const{__scopeSelect:s,className:n,style:c,...o}=t,a=bo(nd,s),d=wo(nd,s),l=BS(nd,s),i=XD(nd,s),[u,f]=A.useState(null),h=bs(r,v=>f(v),l.onItemTextChange,v=>{var y;return(y=d.itemTextRefCallback)==null?void 0:y.call(d,v,l.value,l.disabled)}),m=u==null?void 0:u.textContent,p=A.useMemo(()=>e.jsx("option",{value:l.value,disabled:l.disabled,children:m},l.value),[l.disabled,l.value,m]),{onNativeOptionAdd:x,onNativeOptionRemove:g}=i;return _r(()=>(x(p),()=>g(p)),[x,g,p]),e.jsxs(e.Fragment,{children:[e.jsx(Dt.span,{id:l.textId,...o,ref:h}),l.isSelected&&a.valueNode&&!a.valueNodeHasChildren?ll.createPortal(o.children,a.valueNode):null]})});US.displayName=nd;var VS="SelectItemIndicator",qS=A.forwardRef((t,r)=>{const{__scopeSelect:s,...n}=t;return BS(VS,s).isSelected?e.jsx(Dt.span,{"aria-hidden":!0,...n,ref:r}):null});qS.displayName=VS;var W0="SelectScrollUpButton",HS=A.forwardRef((t,r)=>{const s=wo(W0,t.__scopeSelect),n=Nv(W0,t.__scopeSelect),[c,o]=A.useState(!1),a=bs(r,n.onScrollButtonChange);return _r(()=>{if(s.viewport&&s.isPositioned){let d=function(){const i=l.scrollTop>0;o(i)};const l=s.viewport;return d(),l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[s.viewport,s.isPositioned]),c?e.jsx(GS,{...t,ref:a,onAutoScroll:()=>{const{viewport:d,selectedItem:l}=s;d&&l&&(d.scrollTop=d.scrollTop-l.offsetHeight)}}):null});HS.displayName=W0;var G0="SelectScrollDownButton",WS=A.forwardRef((t,r)=>{const s=wo(G0,t.__scopeSelect),n=Nv(G0,t.__scopeSelect),[c,o]=A.useState(!1),a=bs(r,n.onScrollButtonChange);return _r(()=>{if(s.viewport&&s.isPositioned){let d=function(){const i=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<i;o(u)};const l=s.viewport;return d(),l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[s.viewport,s.isPositioned]),c?e.jsx(GS,{...t,ref:a,onAutoScroll:()=>{const{viewport:d,selectedItem:l}=s;d&&l&&(d.scrollTop=d.scrollTop+l.offsetHeight)}}):null});WS.displayName=G0;var GS=A.forwardRef((t,r)=>{const{__scopeSelect:s,onAutoScroll:n,...c}=t,o=wo("SelectScrollButton",s),a=A.useRef(null),d=Rm(s),l=A.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return A.useEffect(()=>()=>l(),[l]),_r(()=>{var u;const i=d().find(f=>f.ref.current===document.activeElement);(u=i==null?void 0:i.ref.current)==null||u.scrollIntoView({block:"nearest"})},[d]),e.jsx(Dt.div,{"aria-hidden":!0,...c,ref:r,style:{flexShrink:0,...c.style},onPointerDown:It(c.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(n,50))}),onPointerMove:It(c.onPointerMove,()=>{var i;(i=o.onItemLeave)==null||i.call(o),a.current===null&&(a.current=window.setInterval(n,50))}),onPointerLeave:It(c.onPointerLeave,()=>{l()})})}),c$="SelectSeparator",KS=A.forwardRef((t,r)=>{const{__scopeSelect:s,...n}=t;return e.jsx(Dt.div,{"aria-hidden":!0,...n,ref:r})});KS.displayName=c$;var K0="SelectArrow",d$=A.forwardRef((t,r)=>{const{__scopeSelect:s,...n}=t,c=Pm(s),o=bo(K0,s),a=wo(K0,s);return o.open&&a.position==="popper"?e.jsx(Ry,{...c,...n,ref:r}):null});d$.displayName=K0;var u$="SelectBubbleInput",YS=A.forwardRef(({__scopeSelect:t,value:r,...s},n)=>{const c=A.useRef(null),o=bs(n,c),a=jv(r);return A.useEffect(()=>{const d=c.current;if(!d)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(a!==r&&u){const f=new Event("change",{bubbles:!0});u.call(d,r),d.dispatchEvent(f)}},[a,r]),e.jsx(Dt.select,{...s,style:{...NS,...s.style},ref:o,defaultValue:r})});YS.displayName=u$;function QS(t){return t===""||t===void 0}function XS(t){const r=fn(t),s=A.useRef(""),n=A.useRef(0),c=A.useCallback(a=>{const d=s.current+a;r(d),function l(i){s.current=i,window.clearTimeout(n.current),i!==""&&(n.current=window.setTimeout(()=>l(""),1e3))}(d)},[r]),o=A.useCallback(()=>{s.current="",window.clearTimeout(n.current)},[]);return A.useEffect(()=>()=>window.clearTimeout(n.current),[]),[s,c,o]}function ZS(t,r,s){const c=r.length>1&&Array.from(r).every(i=>i===r[0])?r[0]:r,o=s?t.indexOf(s):-1;let a=h$(t,Math.max(o,0));c.length===1&&(a=a.filter(i=>i!==s));const l=a.find(i=>i.textValue.toLowerCase().startsWith(c.toLowerCase()));return l!==s?l:void 0}function h$(t,r){return t.map((s,n)=>t[(r+n)%t.length])}var f$=SS,JS=kS,m$=AS,p$=TS,g$=RS,e5=PS,x$=FS,t5=$S,s5=zS,y$=US,v$=qS,r5=HS,n5=WS,a5=KS;const At=f$,Rt=m$,St=A.forwardRef(({className:t,children:r,...s},n)=>e.jsxs(JS,{ref:n,className:Ot("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...s,children:[r,e.jsx(p$,{asChild:!0,children:e.jsx(lc,{className:"h-4 w-4 opacity-50"})})]}));St.displayName=JS.displayName;const i5=A.forwardRef(({className:t,...r},s)=>e.jsx(r5,{ref:s,className:Ot("flex cursor-default items-center justify-center py-1",t),...r,children:e.jsx(my,{className:"h-4 w-4"})}));i5.displayName=r5.displayName;const o5=A.forwardRef(({className:t,...r},s)=>e.jsx(n5,{ref:s,className:Ot("flex cursor-default items-center justify-center py-1",t),...r,children:e.jsx(lc,{className:"h-4 w-4"})}));o5.displayName=n5.displayName;const Ct=A.forwardRef(({className:t,children:r,position:s="popper",...n},c)=>e.jsx(g$,{children:e.jsxs(e5,{ref:c,className:Ot("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:s,...n,children:[e.jsx(i5,{}),e.jsx(x$,{className:Ot("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),e.jsx(o5,{})]})}));Ct.displayName=e5.displayName;const b$=A.forwardRef(({className:t,...r},s)=>e.jsx(t5,{ref:s,className:Ot("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...r}));b$.displayName=t5.displayName;const Te=A.forwardRef(({className:t,children:r,...s},n)=>e.jsxs(s5,{ref:n,className:Ot("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...s,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(v$,{children:e.jsx(hu,{className:"h-4 w-4"})})}),e.jsx(y$,{children:r})]}));Te.displayName=s5.displayName;const w$=A.forwardRef(({className:t,...r},s)=>e.jsx(a5,{ref:s,className:Ot("-mx-1 my-1 h-px bg-muted",t),...r}));w$.displayName=a5.displayName;var Nu={},j$=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},l5={},Wn={};let Sv;const _$=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Wn.getSymbolSize=function(r){if(!r)throw new Error('"version" cannot be null or undefined');if(r<1||r>40)throw new Error('"version" should be in range from 1 to 40');return r*4+17};Wn.getSymbolTotalCodewords=function(r){return _$[r]};Wn.getBCHDigit=function(t){let r=0;for(;t!==0;)r++,t>>>=1;return r};Wn.setToSJISFunction=function(r){if(typeof r!="function")throw new Error('"toSJISFunc" is not a valid function.');Sv=r};Wn.isKanjiModeEnabled=function(){return typeof Sv<"u"};Wn.toSJIS=function(r){return Sv(r)};var Mm={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function r(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+s)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,c){if(t.isValid(n))return n;try{return r(n)}catch{return c}}})(Mm);function c5(){this.buffer=[],this.length=0}c5.prototype={get:function(t){const r=Math.floor(t/8);return(this.buffer[r]>>>7-t%8&1)===1},put:function(t,r){for(let s=0;s<r;s++)this.putBit((t>>>r-s-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const r=Math.floor(this.length/8);this.buffer.length<=r&&this.buffer.push(0),t&&(this.buffer[r]|=128>>>this.length%8),this.length++}};var N$=c5;function Su(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}Su.prototype.set=function(t,r,s,n){const c=t*this.size+r;this.data[c]=s,n&&(this.reservedBit[c]=!0)};Su.prototype.get=function(t,r){return this.data[t*this.size+r]};Su.prototype.xor=function(t,r,s){this.data[t*this.size+r]^=s};Su.prototype.isReserved=function(t,r){return this.reservedBit[t*this.size+r]};var S$=Su,d5={};(function(t){const r=Wn.getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];const c=Math.floor(n/7)+2,o=r(n),a=o===145?26:Math.ceil((o-13)/(2*c-2))*2,d=[o-7];for(let l=1;l<c-1;l++)d[l]=d[l-1]-a;return d.push(6),d.reverse()},t.getPositions=function(n){const c=[],o=t.getRowColCoords(n),a=o.length;for(let d=0;d<a;d++)for(let l=0;l<a;l++)d===0&&l===0||d===0&&l===a-1||d===a-1&&l===0||c.push([o[d],o[l]]);return c}})(d5);var u5={};const C$=Wn.getSymbolSize,Yw=7;u5.getPositions=function(r){const s=C$(r);return[[0,0],[s-Yw,0],[0,s-Yw]]};var h5={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const r={N1:3,N2:3,N3:40,N4:10};t.isValid=function(c){return c!=null&&c!==""&&!isNaN(c)&&c>=0&&c<=7},t.from=function(c){return t.isValid(c)?parseInt(c,10):void 0},t.getPenaltyN1=function(c){const o=c.size;let a=0,d=0,l=0,i=null,u=null;for(let f=0;f<o;f++){d=l=0,i=u=null;for(let h=0;h<o;h++){let m=c.get(f,h);m===i?d++:(d>=5&&(a+=r.N1+(d-5)),i=m,d=1),m=c.get(h,f),m===u?l++:(l>=5&&(a+=r.N1+(l-5)),u=m,l=1)}d>=5&&(a+=r.N1+(d-5)),l>=5&&(a+=r.N1+(l-5))}return a},t.getPenaltyN2=function(c){const o=c.size;let a=0;for(let d=0;d<o-1;d++)for(let l=0;l<o-1;l++){const i=c.get(d,l)+c.get(d,l+1)+c.get(d+1,l)+c.get(d+1,l+1);(i===4||i===0)&&a++}return a*r.N2},t.getPenaltyN3=function(c){const o=c.size;let a=0,d=0,l=0;for(let i=0;i<o;i++){d=l=0;for(let u=0;u<o;u++)d=d<<1&2047|c.get(i,u),u>=10&&(d===1488||d===93)&&a++,l=l<<1&2047|c.get(u,i),u>=10&&(l===1488||l===93)&&a++}return a*r.N3},t.getPenaltyN4=function(c){let o=0;const a=c.data.length;for(let l=0;l<a;l++)o+=c.data[l];return Math.abs(Math.ceil(o*100/a/5)-10)*r.N4};function s(n,c,o){switch(n){case t.Patterns.PATTERN000:return(c+o)%2===0;case t.Patterns.PATTERN001:return c%2===0;case t.Patterns.PATTERN010:return o%3===0;case t.Patterns.PATTERN011:return(c+o)%3===0;case t.Patterns.PATTERN100:return(Math.floor(c/2)+Math.floor(o/3))%2===0;case t.Patterns.PATTERN101:return c*o%2+c*o%3===0;case t.Patterns.PATTERN110:return(c*o%2+c*o%3)%2===0;case t.Patterns.PATTERN111:return(c*o%3+(c+o)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(c,o){const a=o.size;for(let d=0;d<a;d++)for(let l=0;l<a;l++)o.isReserved(l,d)||o.xor(l,d,s(c,l,d))},t.getBestMask=function(c,o){const a=Object.keys(t.Patterns).length;let d=0,l=1/0;for(let i=0;i<a;i++){o(i),t.applyMask(i,c);const u=t.getPenaltyN1(c)+t.getPenaltyN2(c)+t.getPenaltyN3(c)+t.getPenaltyN4(c);t.applyMask(i,c),u<l&&(l=u,d=i)}return d}})(h5);var Im={};const $i=Mm,lh=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],ch=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Im.getBlocksCount=function(r,s){switch(s){case $i.L:return lh[(r-1)*4+0];case $i.M:return lh[(r-1)*4+1];case $i.Q:return lh[(r-1)*4+2];case $i.H:return lh[(r-1)*4+3];default:return}};Im.getTotalCodewordsCount=function(r,s){switch(s){case $i.L:return ch[(r-1)*4+0];case $i.M:return ch[(r-1)*4+1];case $i.Q:return ch[(r-1)*4+2];case $i.H:return ch[(r-1)*4+3];default:return}};var f5={},Om={};const jd=new Uint8Array(512),Rf=new Uint8Array(256);(function(){let r=1;for(let s=0;s<255;s++)jd[s]=r,Rf[r]=s,r<<=1,r&256&&(r^=285);for(let s=255;s<512;s++)jd[s]=jd[s-255]})();Om.log=function(r){if(r<1)throw new Error("log("+r+")");return Rf[r]};Om.exp=function(r){return jd[r]};Om.mul=function(r,s){return r===0||s===0?0:jd[Rf[r]+Rf[s]]};(function(t){const r=Om;t.mul=function(n,c){const o=new Uint8Array(n.length+c.length-1);for(let a=0;a<n.length;a++)for(let d=0;d<c.length;d++)o[a+d]^=r.mul(n[a],c[d]);return o},t.mod=function(n,c){let o=new Uint8Array(n);for(;o.length-c.length>=0;){const a=o[0];for(let l=0;l<c.length;l++)o[l]^=r.mul(c[l],a);let d=0;for(;d<o.length&&o[d]===0;)d++;o=o.slice(d)}return o},t.generateECPolynomial=function(n){let c=new Uint8Array([1]);for(let o=0;o<n;o++)c=t.mul(c,new Uint8Array([1,r.exp(o)]));return c}})(f5);const m5=f5;function Cv(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Cv.prototype.initialize=function(r){this.degree=r,this.genPoly=m5.generateECPolynomial(this.degree)};Cv.prototype.encode=function(r){if(!this.genPoly)throw new Error("Encoder not initialized");const s=new Uint8Array(r.length+this.degree);s.set(r);const n=m5.mod(s,this.genPoly),c=this.degree-n.length;if(c>0){const o=new Uint8Array(this.degree);return o.set(n,c),o}return n};var k$=Cv,p5={},jo={},kv={};kv.isValid=function(r){return!isNaN(r)&&r>=1&&r<=40};var Ua={};const g5="[0-9]+",E$="[A-Z $%*+\\-./:]+";let au="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";au=au.replace(/u/g,"\\u");const A$="(?:(?![A-Z0-9 $%*+\\-./:]|"+au+`)(?:.|[\r
]))+`;Ua.KANJI=new RegExp(au,"g");Ua.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Ua.BYTE=new RegExp(A$,"g");Ua.NUMERIC=new RegExp(g5,"g");Ua.ALPHANUMERIC=new RegExp(E$,"g");const T$=new RegExp("^"+au+"$"),R$=new RegExp("^"+g5+"$"),P$=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Ua.testKanji=function(r){return T$.test(r)};Ua.testNumeric=function(r){return R$.test(r)};Ua.testAlphanumeric=function(r){return P$.test(r)};(function(t){const r=kv,s=Ua;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(o,a){if(!o.ccBits)throw new Error("Invalid mode: "+o);if(!r.isValid(a))throw new Error("Invalid version: "+a);return a>=1&&a<10?o.ccBits[0]:a<27?o.ccBits[1]:o.ccBits[2]},t.getBestModeForData=function(o){return s.testNumeric(o)?t.NUMERIC:s.testAlphanumeric(o)?t.ALPHANUMERIC:s.testKanji(o)?t.KANJI:t.BYTE},t.toString=function(o){if(o&&o.id)return o.id;throw new Error("Invalid mode")},t.isValid=function(o){return o&&o.bit&&o.ccBits};function n(c){if(typeof c!="string")throw new Error("Param is not a string");switch(c.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+c)}}t.from=function(o,a){if(t.isValid(o))return o;try{return n(o)}catch{return a}}})(jo);(function(t){const r=Wn,s=Im,n=Mm,c=jo,o=kv,a=7973,d=r.getBCHDigit(a);function l(h,m,p){for(let x=1;x<=40;x++)if(m<=t.getCapacity(x,p,h))return x}function i(h,m){return c.getCharCountIndicator(h,m)+4}function u(h,m){let p=0;return h.forEach(function(x){const g=i(x.mode,m);p+=g+x.getBitsLength()}),p}function f(h,m){for(let p=1;p<=40;p++)if(u(h,p)<=t.getCapacity(p,m,c.MIXED))return p}t.from=function(m,p){return o.isValid(m)?parseInt(m,10):p},t.getCapacity=function(m,p,x){if(!o.isValid(m))throw new Error("Invalid QR Code version");typeof x>"u"&&(x=c.BYTE);const g=r.getSymbolTotalCodewords(m),v=s.getTotalCodewordsCount(m,p),y=(g-v)*8;if(x===c.MIXED)return y;const b=y-i(x,m);switch(x){case c.NUMERIC:return Math.floor(b/10*3);case c.ALPHANUMERIC:return Math.floor(b/11*2);case c.KANJI:return Math.floor(b/13);case c.BYTE:default:return Math.floor(b/8)}},t.getBestVersionForData=function(m,p){let x;const g=n.from(p,n.M);if(Array.isArray(m)){if(m.length>1)return f(m,g);if(m.length===0)return 1;x=m[0]}else x=m;return l(x.mode,x.getLength(),g)},t.getEncodedBits=function(m){if(!o.isValid(m)||m<7)throw new Error("Invalid QR Code version");let p=m<<12;for(;r.getBCHDigit(p)-d>=0;)p^=a<<r.getBCHDigit(p)-d;return m<<12|p}})(p5);var x5={};const Y0=Wn,y5=1335,M$=21522,Qw=Y0.getBCHDigit(y5);x5.getEncodedBits=function(r,s){const n=r.bit<<3|s;let c=n<<10;for(;Y0.getBCHDigit(c)-Qw>=0;)c^=y5<<Y0.getBCHDigit(c)-Qw;return(n<<10|c)^M$};var v5={};const I$=jo;function fc(t){this.mode=I$.NUMERIC,this.data=t.toString()}fc.getBitsLength=function(r){return 10*Math.floor(r/3)+(r%3?r%3*3+1:0)};fc.prototype.getLength=function(){return this.data.length};fc.prototype.getBitsLength=function(){return fc.getBitsLength(this.data.length)};fc.prototype.write=function(r){let s,n,c;for(s=0;s+3<=this.data.length;s+=3)n=this.data.substr(s,3),c=parseInt(n,10),r.put(c,10);const o=this.data.length-s;o>0&&(n=this.data.substr(s),c=parseInt(n,10),r.put(c,o*3+1))};var O$=fc;const F$=jo,Xp=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function mc(t){this.mode=F$.ALPHANUMERIC,this.data=t}mc.getBitsLength=function(r){return 11*Math.floor(r/2)+6*(r%2)};mc.prototype.getLength=function(){return this.data.length};mc.prototype.getBitsLength=function(){return mc.getBitsLength(this.data.length)};mc.prototype.write=function(r){let s;for(s=0;s+2<=this.data.length;s+=2){let n=Xp.indexOf(this.data[s])*45;n+=Xp.indexOf(this.data[s+1]),r.put(n,11)}this.data.length%2&&r.put(Xp.indexOf(this.data[s]),6)};var L$=mc;const D$=jo;function pc(t){this.mode=D$.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}pc.getBitsLength=function(r){return r*8};pc.prototype.getLength=function(){return this.data.length};pc.prototype.getBitsLength=function(){return pc.getBitsLength(this.data.length)};pc.prototype.write=function(t){for(let r=0,s=this.data.length;r<s;r++)t.put(this.data[r],8)};var $$=pc;const B$=jo,z$=Wn;function gc(t){this.mode=B$.KANJI,this.data=t}gc.getBitsLength=function(r){return r*13};gc.prototype.getLength=function(){return this.data.length};gc.prototype.getBitsLength=function(){return gc.getBitsLength(this.data.length)};gc.prototype.write=function(t){let r;for(r=0;r<this.data.length;r++){let s=z$.toSJIS(this.data[r]);if(s>=33088&&s<=40956)s-=33088;else if(s>=57408&&s<=60351)s-=49472;else throw new Error("Invalid SJIS character: "+this.data[r]+`
Make sure your charset is UTF-8`);s=(s>>>8&255)*192+(s&255),t.put(s,13)}};var U$=gc,b5={exports:{}};(function(t){var r={single_source_shortest_paths:function(s,n,c){var o={},a={};a[n]=0;var d=r.PriorityQueue.make();d.push(n,0);for(var l,i,u,f,h,m,p,x,g;!d.empty();){l=d.pop(),i=l.value,f=l.cost,h=s[i]||{};for(u in h)h.hasOwnProperty(u)&&(m=h[u],p=f+m,x=a[u],g=typeof a[u]>"u",(g||x>p)&&(a[u]=p,d.push(u,p),o[u]=i))}if(typeof c<"u"&&typeof a[c]>"u"){var v=["Could not find a path from ",n," to ",c,"."].join("");throw new Error(v)}return o},extract_shortest_path_from_predecessor_list:function(s,n){for(var c=[],o=n;o;)c.push(o),s[o],o=s[o];return c.reverse(),c},find_path:function(s,n,c){var o=r.single_source_shortest_paths(s,n,c);return r.extract_shortest_path_from_predecessor_list(o,c)},PriorityQueue:{make:function(s){var n=r.PriorityQueue,c={},o;s=s||{};for(o in n)n.hasOwnProperty(o)&&(c[o]=n[o]);return c.queue=[],c.sorter=s.sorter||n.default_sorter,c},default_sorter:function(s,n){return s.cost-n.cost},push:function(s,n){var c={value:s,cost:n};this.queue.push(c),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=r})(b5);var V$=b5.exports;(function(t){const r=jo,s=O$,n=L$,c=$$,o=U$,a=Ua,d=Wn,l=V$;function i(v){return unescape(encodeURIComponent(v)).length}function u(v,y,b){const C=[];let T;for(;(T=v.exec(b))!==null;)C.push({data:T[0],index:T.index,mode:y,length:T[0].length});return C}function f(v){const y=u(a.NUMERIC,r.NUMERIC,v),b=u(a.ALPHANUMERIC,r.ALPHANUMERIC,v);let C,T;return d.isKanjiModeEnabled()?(C=u(a.BYTE,r.BYTE,v),T=u(a.KANJI,r.KANJI,v)):(C=u(a.BYTE_KANJI,r.BYTE,v),T=[]),y.concat(b,C,T).sort(function(U,L){return U.index-L.index}).map(function(U){return{data:U.data,mode:U.mode,length:U.length}})}function h(v,y){switch(y){case r.NUMERIC:return s.getBitsLength(v);case r.ALPHANUMERIC:return n.getBitsLength(v);case r.KANJI:return o.getBitsLength(v);case r.BYTE:return c.getBitsLength(v)}}function m(v){return v.reduce(function(y,b){const C=y.length-1>=0?y[y.length-1]:null;return C&&C.mode===b.mode?(y[y.length-1].data+=b.data,y):(y.push(b),y)},[])}function p(v){const y=[];for(let b=0;b<v.length;b++){const C=v[b];switch(C.mode){case r.NUMERIC:y.push([C,{data:C.data,mode:r.ALPHANUMERIC,length:C.length},{data:C.data,mode:r.BYTE,length:C.length}]);break;case r.ALPHANUMERIC:y.push([C,{data:C.data,mode:r.BYTE,length:C.length}]);break;case r.KANJI:y.push([C,{data:C.data,mode:r.BYTE,length:i(C.data)}]);break;case r.BYTE:y.push([{data:C.data,mode:r.BYTE,length:i(C.data)}])}}return y}function x(v,y){const b={},C={start:{}};let T=["start"];for(let M=0;M<v.length;M++){const U=v[M],L=[];for(let P=0;P<U.length;P++){const B=U[P],q=""+M+P;L.push(q),b[q]={node:B,lastCount:0},C[q]={};for(let z=0;z<T.length;z++){const k=T[z];b[k]&&b[k].node.mode===B.mode?(C[k][q]=h(b[k].lastCount+B.length,B.mode)-h(b[k].lastCount,B.mode),b[k].lastCount+=B.length):(b[k]&&(b[k].lastCount=B.length),C[k][q]=h(B.length,B.mode)+4+r.getCharCountIndicator(B.mode,y))}}T=L}for(let M=0;M<T.length;M++)C[T[M]].end=0;return{map:C,table:b}}function g(v,y){let b;const C=r.getBestModeForData(v);if(b=r.from(y,C),b!==r.BYTE&&b.bit<C.bit)throw new Error('"'+v+'" cannot be encoded with mode '+r.toString(b)+`.
 Suggested mode is: `+r.toString(C));switch(b===r.KANJI&&!d.isKanjiModeEnabled()&&(b=r.BYTE),b){case r.NUMERIC:return new s(v);case r.ALPHANUMERIC:return new n(v);case r.KANJI:return new o(v);case r.BYTE:return new c(v)}}t.fromArray=function(y){return y.reduce(function(b,C){return typeof C=="string"?b.push(g(C,null)):C.data&&b.push(g(C.data,C.mode)),b},[])},t.fromString=function(y,b){const C=f(y,d.isKanjiModeEnabled()),T=p(C),M=x(T,b),U=l.find_path(M.map,"start","end"),L=[];for(let P=1;P<U.length-1;P++)L.push(M.table[U[P]].node);return t.fromArray(m(L))},t.rawSplit=function(y){return t.fromArray(f(y,d.isKanjiModeEnabled()))}})(v5);const Fm=Wn,Zp=Mm,q$=N$,H$=S$,W$=d5,G$=u5,Q0=h5,X0=Im,K$=k$,Pf=p5,Y$=x5,Q$=jo,Jp=v5;function X$(t,r){const s=t.size,n=G$.getPositions(r);for(let c=0;c<n.length;c++){const o=n[c][0],a=n[c][1];for(let d=-1;d<=7;d++)if(!(o+d<=-1||s<=o+d))for(let l=-1;l<=7;l++)a+l<=-1||s<=a+l||(d>=0&&d<=6&&(l===0||l===6)||l>=0&&l<=6&&(d===0||d===6)||d>=2&&d<=4&&l>=2&&l<=4?t.set(o+d,a+l,!0,!0):t.set(o+d,a+l,!1,!0))}}function Z$(t){const r=t.size;for(let s=8;s<r-8;s++){const n=s%2===0;t.set(s,6,n,!0),t.set(6,s,n,!0)}}function J$(t,r){const s=W$.getPositions(r);for(let n=0;n<s.length;n++){const c=s[n][0],o=s[n][1];for(let a=-2;a<=2;a++)for(let d=-2;d<=2;d++)a===-2||a===2||d===-2||d===2||a===0&&d===0?t.set(c+a,o+d,!0,!0):t.set(c+a,o+d,!1,!0)}}function eB(t,r){const s=t.size,n=Pf.getEncodedBits(r);let c,o,a;for(let d=0;d<18;d++)c=Math.floor(d/3),o=d%3+s-8-3,a=(n>>d&1)===1,t.set(c,o,a,!0),t.set(o,c,a,!0)}function eg(t,r,s){const n=t.size,c=Y$.getEncodedBits(r,s);let o,a;for(o=0;o<15;o++)a=(c>>o&1)===1,o<6?t.set(o,8,a,!0):o<8?t.set(o+1,8,a,!0):t.set(n-15+o,8,a,!0),o<8?t.set(8,n-o-1,a,!0):o<9?t.set(8,15-o-1+1,a,!0):t.set(8,15-o-1,a,!0);t.set(n-8,8,1,!0)}function tB(t,r){const s=t.size;let n=-1,c=s-1,o=7,a=0;for(let d=s-1;d>0;d-=2)for(d===6&&d--;;){for(let l=0;l<2;l++)if(!t.isReserved(c,d-l)){let i=!1;a<r.length&&(i=(r[a]>>>o&1)===1),t.set(c,d-l,i),o--,o===-1&&(a++,o=7)}if(c+=n,c<0||s<=c){c-=n,n=-n;break}}}function sB(t,r,s){const n=new q$;s.forEach(function(l){n.put(l.mode.bit,4),n.put(l.getLength(),Q$.getCharCountIndicator(l.mode,t)),l.write(n)});const c=Fm.getSymbolTotalCodewords(t),o=X0.getTotalCodewordsCount(t,r),a=(c-o)*8;for(n.getLengthInBits()+4<=a&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const d=(a-n.getLengthInBits())/8;for(let l=0;l<d;l++)n.put(l%2?17:236,8);return rB(n,t,r)}function rB(t,r,s){const n=Fm.getSymbolTotalCodewords(r),c=X0.getTotalCodewordsCount(r,s),o=n-c,a=X0.getBlocksCount(r,s),d=n%a,l=a-d,i=Math.floor(n/a),u=Math.floor(o/a),f=u+1,h=i-u,m=new K$(h);let p=0;const x=new Array(a),g=new Array(a);let v=0;const y=new Uint8Array(t.buffer);for(let U=0;U<a;U++){const L=U<l?u:f;x[U]=y.slice(p,p+L),g[U]=m.encode(x[U]),p+=L,v=Math.max(v,L)}const b=new Uint8Array(n);let C=0,T,M;for(T=0;T<v;T++)for(M=0;M<a;M++)T<x[M].length&&(b[C++]=x[M][T]);for(T=0;T<h;T++)for(M=0;M<a;M++)b[C++]=g[M][T];return b}function nB(t,r,s,n){let c;if(Array.isArray(t))c=Jp.fromArray(t);else if(typeof t=="string"){let i=r;if(!i){const u=Jp.rawSplit(t);i=Pf.getBestVersionForData(u,s)}c=Jp.fromString(t,i||40)}else throw new Error("Invalid data");const o=Pf.getBestVersionForData(c,s);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!r)r=o;else if(r<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);const a=sB(r,s,c),d=Fm.getSymbolSize(r),l=new H$(d);return X$(l,r),Z$(l),J$(l,r),eg(l,s,0),r>=7&&eB(l,r),tB(l,a),isNaN(n)&&(n=Q0.getBestMask(l,eg.bind(null,l,s))),Q0.applyMask(n,l),eg(l,s,n),{modules:l,version:r,errorCorrectionLevel:s,maskPattern:n,segments:c}}l5.create=function(r,s){if(typeof r>"u"||r==="")throw new Error("No input text");let n=Zp.M,c,o;return typeof s<"u"&&(n=Zp.from(s.errorCorrectionLevel,Zp.M),c=Pf.from(s.version),o=Q0.from(s.maskPattern),s.toSJISFunc&&Fm.setToSJISFunction(s.toSJISFunc)),nB(r,c,n,o)};var w5={},Ev={};(function(t){function r(s){if(typeof s=="number"&&(s=s.toString()),typeof s!="string")throw new Error("Color should be defined as hex string");let n=s.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+s);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(o){return[o,o]}))),n.length===6&&n.push("F","F");const c=parseInt(n.join(""),16);return{r:c>>24&255,g:c>>16&255,b:c>>8&255,a:c&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});const c=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,o=n.width&&n.width>=21?n.width:void 0,a=n.scale||4;return{width:o,scale:o?4:a,margin:c,color:{dark:r(n.color.dark||"#000000ff"),light:r(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,c){return c.width&&c.width>=n+c.margin*2?c.width/(n+c.margin*2):c.scale},t.getImageWidth=function(n,c){const o=t.getScale(n,c);return Math.floor((n+c.margin*2)*o)},t.qrToImageData=function(n,c,o){const a=c.modules.size,d=c.modules.data,l=t.getScale(a,o),i=Math.floor((a+o.margin*2)*l),u=o.margin*l,f=[o.color.light,o.color.dark];for(let h=0;h<i;h++)for(let m=0;m<i;m++){let p=(h*i+m)*4,x=o.color.light;if(h>=u&&m>=u&&h<i-u&&m<i-u){const g=Math.floor((h-u)/l),v=Math.floor((m-u)/l);x=f[d[g*a+v]?1:0]}n[p++]=x.r,n[p++]=x.g,n[p++]=x.b,n[p]=x.a}}})(Ev);(function(t){const r=Ev;function s(c,o,a){c.clearRect(0,0,o.width,o.height),o.style||(o.style={}),o.height=a,o.width=a,o.style.height=a+"px",o.style.width=a+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(o,a,d){let l=d,i=a;typeof l>"u"&&(!a||!a.getContext)&&(l=a,a=void 0),a||(i=n()),l=r.getOptions(l);const u=r.getImageWidth(o.modules.size,l),f=i.getContext("2d"),h=f.createImageData(u,u);return r.qrToImageData(h.data,o,l),s(f,i,u),f.putImageData(h,0,0),i},t.renderToDataURL=function(o,a,d){let l=d;typeof l>"u"&&(!a||!a.getContext)&&(l=a,a=void 0),l||(l={});const i=t.render(o,a,l),u=l.type||"image/png",f=l.rendererOpts||{};return i.toDataURL(u,f.quality)}})(w5);var j5={};const aB=Ev;function Xw(t,r){const s=t.a/255,n=r+'="'+t.hex+'"';return s<1?n+" "+r+'-opacity="'+s.toFixed(2).slice(1)+'"':n}function tg(t,r,s){let n=t+r;return typeof s<"u"&&(n+=" "+s),n}function iB(t,r,s){let n="",c=0,o=!1,a=0;for(let d=0;d<t.length;d++){const l=Math.floor(d%r),i=Math.floor(d/r);!l&&!o&&(o=!0),t[d]?(a++,d>0&&l>0&&t[d-1]||(n+=o?tg("M",l+s,.5+i+s):tg("m",c,0),c=0,o=!1),l+1<r&&t[d+1]||(n+=tg("h",a),a=0)):c++}return n}j5.render=function(r,s,n){const c=aB.getOptions(s),o=r.modules.size,a=r.modules.data,d=o+c.margin*2,l=c.color.light.a?"<path "+Xw(c.color.light,"fill")+' d="M0 0h'+d+"v"+d+'H0z"/>':"",i="<path "+Xw(c.color.dark,"stroke")+' d="'+iB(a,o,c.margin)+'"/>',u='viewBox="0 0 '+d+" "+d+'"',h='<svg xmlns="http://www.w3.org/2000/svg" '+(c.width?'width="'+c.width+'" height="'+c.width+'" ':"")+u+' shape-rendering="crispEdges">'+l+i+`</svg>
`;return typeof n=="function"&&n(null,h),h};const oB=j$,Z0=l5,_5=w5,lB=j5;function Av(t,r,s,n,c){const o=[].slice.call(arguments,1),a=o.length,d=typeof o[a-1]=="function";if(!d&&!oB())throw new Error("Callback required as last argument");if(d){if(a<2)throw new Error("Too few arguments provided");a===2?(c=s,s=r,r=n=void 0):a===3&&(r.getContext&&typeof c>"u"?(c=n,n=void 0):(c=n,n=s,s=r,r=void 0))}else{if(a<1)throw new Error("Too few arguments provided");return a===1?(s=r,r=n=void 0):a===2&&!r.getContext&&(n=s,s=r,r=void 0),new Promise(function(l,i){try{const u=Z0.create(s,n);l(t(u,r,n))}catch(u){i(u)}})}try{const l=Z0.create(s,n);c(null,t(l,r,n))}catch(l){c(l)}}Nu.create=Z0.create;Nu.toCanvas=Av.bind(null,_5.render);Nu.toDataURL=Av.bind(null,_5.renderToDataURL);Nu.toString=Av.bind(null,function(t,r,s){return lB.render(t,s)});const cB=()=>{var ml;const{user:t}=qs(),[r,s]=A.useState([]),[n,c]=A.useState(!0),[o,a]=A.useState(""),[d,l]=A.useState(!1),[i,u]=A.useState(!1),[f,h]=A.useState(!1),[m,p]=A.useState(!1),[x,g]=A.useState(!1),[v,y]=A.useState(!1),[b,C]=A.useState(!1),[T,M]=A.useState(!1),[U,L]=A.useState(!1),[P,B]=A.useState(!1),[q,z]=A.useState(null),[k,R]=A.useState(null),[S,w]=A.useState({name:"",code:"",description:""}),[_,j]=A.useState({name:"",code:"",description:""}),[N,E]=A.useState([]),[I,D]=A.useState([]),[V,H]=A.useState([]),[G,$]=A.useState(null),[Y,F]=A.useState(!1),[O,W]=A.useState({type:"",name:"",students:[]}),[K,Q]=A.useState({}),[X,te]=A.useState({}),[de,xe]=A.useState({page:1,limit:10,total:0,totalPages:0}),[ne,ge]=A.useState([]),[be,Ie]=A.useState({city:"",state:"",country:"",is_active:""}),[Ce,Oe]=A.useState({page:1,limit:10,total:0,totalPages:0}),[Ee,pe]=A.useState({name:"",code:"",email:"",phone:"",address:"",city:"",state:"",country:"India",postal_code:"",website:"",logo_url:"",established_year:"",accreditation:"",description:""}),[Ae,st]=A.useState([{name:"",phone:"",email:"",designation:""}]),[qe,ie]=A.useState([]),[ae,we]=A.useState([{name:"",code:"",description:""}]),[ve,He]=A.useState({}),{toast:$e}=Js(),[ue,oe]=A.useState([]),[_e,Me]=A.useState([]),[ze,Xe]=A.useState(""),[Ve,ot]=A.useState(""),[xt,ft]=A.useState(1),[at,Be]=A.useState(1),[Ue,re]=A.useState(0),[ye,ke]=A.useState(0),Fe=10,Ke=10,Qe=Br(),[he,je]=A.useState(""),[Ne,tt]=A.useState(""),[jt,dt]=A.useState(!1),[kt,gt]=A.useState(!1),[wt,Pt]=A.useState(""),[bt,yt]=A.useState(null),[Ge,J]=A.useState(!1);A.useEffect(()=>{t&&t.role==="super-admin"?(ce(),Je()):c(!1)},[Ce.page,Ce.limit,o,be,t]),A.useEffect(()=>{G&&G.departments&&G.departments.length>0&&Ws()},[G==null?void 0:G.departments]),A.useEffect(()=>{V&&V.length>0&&Z()},[V]);const ce=async()=>{try{c(!0);const se={page:Ce.page,limit:Ce.limit,search:o,...be},fe=await Pe.getSuperAdminColleges(se);fe.success&&(s(fe.data.colleges),Oe(We=>({...We,total:fe.data.pagination.total,totalPages:fe.data.pagination.totalPages})))}catch{$e({variant:"destructive",title:"Error",description:"Failed to load colleges"})}finally{c(!1)}},Je=async()=>{try{const se=await Pe.getSuperAdminCollegeLocations();se.success&&ge(se.data||[])}catch{ge([])}},ht=se=>{se.preventDefault(),Oe(fe=>({...fe,page:1}))},le=(se,fe)=>{Ie(We=>({...We,[se]:fe})),Oe(We=>({...We,page:1}))},Le=()=>{Ie({city:"",state:"",country:"",is_active:""}),a(""),Oe(se=>({...se,page:1}))},rt=()=>{st([...Ae,{name:"",phone:"",email:"",designation:""}])},pt=se=>{Ae.length>1&&st(Ae.filter((fe,We)=>We!==se))},Tt=(se,fe,We)=>{const nt=[...Ae];nt[se]={...nt[se],[fe]:We},st(nt)},vt=se=>{ie(qe.filter((fe,We)=>We!==se))},_t=se=>{we(ae.filter((fe,We)=>We!==se))},Bt=se=>{if(!se||se.trim()==="")return"";const We=se.replace(/[^\w\s]/g,"").trim().split(/\s+/).filter(Mt=>Mt.length>0);if(We.length===0)return"";let nt="";if(We.length===1){const Mt=We[0];Mt.length<=4?nt=Mt.toUpperCase():nt=Mt.substring(0,4).toUpperCase()}else if(We.length===2){const Mt=We[0].substring(0,2),ys=We[1].substring(0,2);nt=(Mt+ys).toUpperCase()}else{const Mt=We[0].charAt(0),ys=We[1].charAt(0),Wt=We[We.length-1].charAt(0);nt=(Mt+ys+Wt).toUpperCase()}return Qt(nt)},Qt=se=>{if(!se)return"";let fe=se,We=1;for(;r.some(nt=>nt.code===fe);)if(fe=`${se}${We}`,We++,We>100){fe=`${se}${Date.now().toString().slice(-3)}`;break}return fe},Gt=()=>{$e({title:"Code is Auto-Generated",description:"College codes are automatically generated from the name and cannot be edited manually to ensure uniqueness.",variant:"default"})},Ut=se=>{if(!se||se.trim()==="")return"";const We=se.replace(/[^\w\s]/g,"").trim().split(/\s+/).filter(nt=>nt.length>0);if(We.length===0)return"";if(We.length===1){const nt=We[0];return nt.length<=3?nt.toUpperCase():nt.substring(0,3).toUpperCase()}else if(We.length===2){const nt=We[0].charAt(0),Mt=We[1].charAt(0);return(nt+Mt).toUpperCase()}else{const nt=We[0].charAt(0),Mt=We[1].charAt(0),ys=We[We.length-1].charAt(0);return(nt+Mt+ys).toUpperCase()}},gs=se=>{if(!se||se.trim()==="")return"";const We=se.replace(/[^\w\s]/g,"").trim().split(/\s+/).filter(nt=>nt.length>0);if(We.length===0)return"";if(We.length===1){const nt=We[0];return nt.length<=3?nt.toUpperCase():nt.substring(0,3).toUpperCase()}else if(We.length===2){const nt=We[0].charAt(0),Mt=We[1].charAt(0);return(nt+Mt).toUpperCase()}else{const nt=We[0].charAt(0),Mt=We[1].charAt(0),ys=We[We.length-1].charAt(0);return(nt+Mt+ys).toUpperCase()}},ds=(se,fe,We)=>{const nt=[...ae];if(nt[se]={...nt[se],[fe]:We},fe==="name"&&We.trim()!==""){const Mt=Ut(We);nt[se].code=Mt}we(nt)},cs=()=>{const se={};if(Ee.name.trim()||(se.name="Name is required"),Ee.code.trim()||(se.code="Code is required"),Ee.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Ee.email)||(se.email="Invalid email format"):se.email="Email is required",Ae.length===0?se.contactPersons="At least one contact person is required":Ae.forEach((fe,We)=>{fe.name.trim()||(se[`contact_person_${We}_name`]="Contact person name is required"),fe.phone.trim()||(se[`contact_person_${We}_phone`]="Contact person phone is required"),fe.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(fe.email)||(se[`contact_person_${We}_email`]="Invalid contact person email format"):se[`contact_person_${We}_email`]="Contact person email is required"}),ae.length>0){const fe=new Set,We=new Set;qe.forEach(Wt=>{Wt.code&&fe.add(Wt.code.toUpperCase()),Wt.name&&We.add(Wt.name.toLowerCase())}),ae.forEach((Wt,Xr)=>{Wt.name.trim()?We.has(Wt.name.trim().toLowerCase())?se[`custom_dept_name_${Xr}`]="Department name must be unique":We.add(Wt.name.trim().toLowerCase()):se[`custom_dept_name_${Xr}`]="Department name is required",Wt.code.trim()?fe.has(Wt.code.trim().toUpperCase())?se[`custom_dept_code_${Xr}`]="Department code must be unique":fe.add(Wt.code.trim().toUpperCase()):se[`custom_dept_code_${Xr}`]="Department code is required"});const nt=qe.map(Wt=>Wt.code.toUpperCase()).filter(Boolean),ys=ae.filter(Wt=>Wt.name.trim()&&Wt.code.trim()).map(Wt=>Wt.code.toUpperCase()).filter(Wt=>nt.includes(Wt));ys.length>0&&(se.departments=`Department codes already exist: ${ys.join(", ")}. Please use different codes.`)}if(V.length>0){const fe=new Set,We=new Set;V.forEach((nt,Mt)=>{if(nt.name.trim()?We.has(nt.name.trim().toLowerCase())?se[`batch_name_${Mt}`]="Batch name must be unique":We.add(nt.name.trim().toLowerCase()):se[`batch_name_${Mt}`]="Batch name is required",nt.code.trim()?fe.has(nt.code.trim().toUpperCase())?se[`batch_code_${Mt}`]="Batch code must be unique":fe.add(nt.code.trim().toUpperCase()):se[`batch_code_${Mt}`]="Batch code is required",nt.start_year&&nt.end_year){const ys=parseInt(nt.start_year),Wt=parseInt(nt.end_year);ys>=Wt&&(se[`batch_years_${Mt}`]="Start year must be before end year")}})}return Ee.established_year&&(Ee.established_year<1800||Ee.established_year>new Date().getFullYear())&&(se.established_year="Invalid establishment year"),He(se),Object.keys(se).length===0},Cs=async se=>{se.preventDefault();const fe={};if(Ee.name.trim()||(fe.name="College name is required"),Ee.code.trim()||(fe.code="College code is required"),Ee.email.trim()||(fe.email="Email is required"),Ae.filter(nt=>nt.name.trim()&&nt.phone.trim()&&nt.email.trim()).length===0&&(fe.contactPersons="At least one contact person with name, phone, and email is required"),V.length>0){const nt=new Set,Mt=new Set;V.forEach((ys,Wt)=>{if(ys.name.trim()?Mt.has(ys.name.trim().toLowerCase())?fe[`batch_name_${Wt}`]="Batch name must be unique":Mt.add(ys.name.trim().toLowerCase()):fe[`batch_name_${Wt}`]="Batch name is required",ys.code.trim()?nt.has(ys.code.trim().toUpperCase())?fe[`batch_code_${Wt}`]="Batch code must be unique":nt.add(ys.code.trim().toUpperCase()):fe[`batch_code_${Wt}`]="Batch code is required",ys.start_year&&ys.end_year){const Xr=parseInt(ys.start_year),ur=parseInt(ys.end_year);Xr>=ur&&(fe[`batch_years_${Wt}`]="Start year must be before end year")}})}if(Ee.established_year.trim()){const nt=parseInt(Ee.established_year);(isNaN(nt)||nt<1800||nt>new Date().getFullYear())&&(fe.established_year=`Year must be between 1800 and ${new Date().getFullYear()}`)}if(Object.keys(fe).length>0){He(fe);return}try{c(!0);const nt=Ae.filter(ur=>ur.name.trim()&&ur.phone.trim()&&ur.email.trim()),Mt=[...qe,...ae.filter(ur=>ur.name.trim()&&ur.code.trim())],ys=V.filter(ur=>ur.name.trim()&&ur.code.trim()),Wt={...Ee,established_year:Ee.established_year.trim()?parseInt(Ee.established_year):null,contact_persons:nt,departments:Mt,batches:ys};if(nt.length===0){$e({title:"Error",description:"At least one contact person with name, phone, and email is required",variant:"destructive"}),c(!1);return}const Xr=await Pe.createSuperAdminCollege(Wt);Xr.success?($e({title:"Success!",description:"College created successfully."}),l(!1),vn(),ce()):$e({title:"Error",description:Xr.message||"Failed to create college",variant:"destructive"})}catch(nt){console.error("Error creating college:",nt),$e({title:"Error",description:"Failed to create college. Please try again.",variant:"destructive"})}finally{c(!1)}},Fs=async se=>{if(se.preventDefault(),!!cs())try{c(!0);const fe=new Set(qe.map(Wt=>Wt.code.toUpperCase())),nt=ae.filter(Wt=>Wt.name.trim()&&Wt.code.trim()).map(Wt=>Wt.code.toUpperCase()).filter(Wt=>fe.has(Wt));if(nt.length>0){$e({variant:"destructive",title:"Duplicate Department Codes",description:`Department codes already exist: ${nt.join(", ")}. Please use different codes.`});return}const Mt={...Ee,established_year:Ee.established_year.trim()?parseInt(Ee.established_year):null,contact_persons:Ae.filter(Wt=>Wt.name.trim()&&Wt.phone.trim()&&Wt.email.trim()),departments:[...qe,...ae.filter(Wt=>Wt.name.trim()&&Wt.code.trim())]},ys=await Pe.updateSuperAdminCollege(G.id,Mt);ys.success?($e({title:"Success",description:"College updated successfully"}),u(!1),vn(),ce()):$e({title:"Error",description:ys.message||"Failed to update college",variant:"destructive"})}catch(fe){console.error("Error updating college:",fe),$e({variant:"destructive",title:"Error",description:fe.message||"Failed to update college"})}finally{c(!1)}},Hs=async se=>{try{if((await Pe.deleteSuperAdminCollege(se)).success){$e({title:"Success",description:"College deleted successfully"}),ce();return}}catch(fe){if(fe.message&&fe.message.includes("Cannot delete college with active users"))if(window.confirm(`  CANNOT DELETE COLLEGE 

This college has active students and/or faculty members.

To delete this college, you must first:
1. Deactivate or delete all students
2. Deactivate or delete all faculty
3. Remove all contact persons
4. Remove all departments
5. Then try deleting the college again

Would you like to:
 View the college details to see all data? (Click Cancel)
 Try to delete anyway? (Click OK)

Click OK to attempt deletion, or Cancel to view details first.`))await Nr(se);else{const nt=r.find(Mt=>Mt.id===se);nt&&us(nt)}else $e({variant:"destructive",title:"Error",description:fe.message||"Failed to delete college"})}},Nr=async se=>{try{c(!0);const fe=await Pe.getSuperAdminCollegeDetails(se);if(!fe.success)throw new Error("Failed to fetch college details");const We=fe.data;$e({title:"Deleting College",description:`Deleting ${We.name} and all associated data...`,variant:"default"});try{if((await Pe.deleteSuperAdminCollege(se)).success){$e({title:"Success",description:`${We.name} has been deleted successfully`}),ce();return}}catch(nt){$e({variant:"destructive",title:"Backend Limitation",description:"The backend currently prevents deletion of colleges with active users. To enable complete deletion, the backend needs to be updated to support cascading deletes. For now, please deactivate all users manually before deleting the college.",duration:8e3}),console.error("College deletion failed:",nt)}}catch(fe){console.error("Error in cascading delete:",fe),$e({variant:"destructive",title:"Error",description:fe.message||"Failed to process college deletion. Please try again."})}finally{c(!1)}},Kr=async se=>{try{c(!0);const[fe,We]=await Promise.all([Pe.getSuperAdminUsers({college_id:se,role:"student",limit:1e3}),Pe.getSuperAdminUsers({college_id:se,role:"faculty",limit:1e3})]),nt=Array.isArray(fe.data)?fe.data:fe.data.users||[],Mt=Array.isArray(We.data)?We.data:We.data.users||[];if(nt.length===0&&Mt.length===0){$e({title:"No Users Found",description:"This college has no active users to deactivate.",variant:"default"});return}if(!window.confirm(`  BULK DEACTIVATION 

This will deactivate ALL users in the college:
 Students: ${nt.length}
 Faculty: ${Mt.length}

After deactivation, you can delete the college.

Are you sure you want to proceed?`))return;const Wt=nt.map(ur=>Pe.toggleSuperAdminUserStatus(ur.id)),Xr=Mt.map(ur=>Pe.toggleSuperAdminUserStatus(ur.id));await Promise.all([...Wt,...Xr]),$e({title:"Users Deactivated",description:`Successfully deactivated ${nt.length} students and ${Mt.length} faculty members. You can now delete the college.`,variant:"default"}),ce()}catch(fe){console.error("Error deactivating users:",fe),$e({variant:"destructive",title:"Deactivation Failed",description:"Failed to deactivate users. Please try again or contact support."})}finally{c(!1)}},vn=()=>{pe({name:"",code:"",email:"",phone:"",address:"",city:"",state:"",country:"India",postal_code:"",website:"",logo_url:"",established_year:"",accreditation:"",description:""}),st([{name:"",phone:"",email:"",designation:""}]),ie([]),we([{name:"",code:"",description:""}]),H([]),He({}),$(null)},Gn=()=>{vn(),H([{name:"",code:"",description:""}]),l(!0)},bn=async se=>{$(se);try{const fe=await Pe.getSuperAdminCollegeDetails(se.id);if(fe.success){const We=fe.data;pe({name:We.name||"",code:We.code||"",email:We.email||"",phone:We.phone||"",address:We.address||"",city:We.city||"",state:We.state||"",country:We.country||"India",postal_code:We.postal_code||"",website:We.website||"",logo_url:We.logo_url||"",established_year:We.established_year||"",accreditation:We.accreditation||"",description:We.description||""}),We.contact_persons&&Array.isArray(We.contact_persons)?st(We.contact_persons.map(nt=>({name:nt.name||"",phone:nt.phone||"",email:nt.email||"",designation:nt.designation||""}))):st([{name:"",phone:"",email:"",designation:""}]),We.departments&&Array.isArray(We.departments)?ie(We.departments.map(nt=>({id:nt.id||Date.now(),name:nt.name||"",code:nt.code||"",description:nt.description||""}))):ie([]),we([{name:"",code:"",description:""}])}}catch(fe){console.error("Error fetching college details:",fe),$e({variant:"destructive",title:"Error",description:"Failed to load college details"}),pe({name:se.name||"",code:se.code||"",email:se.email||"",phone:se.phone||"",address:se.address||"",city:se.city||"",state:se.state||"",country:se.country||"India",postal_code:se.postal_code||"",website:se.website||"",logo_url:se.logo_url||"",established_year:se.established_year||"",accreditation:se.accreditation||"",description:se.description||""}),st([{name:"",phone:"",email:"",designation:""}]),ie([]),we([{name:"",code:"",description:""}])}He({}),u(!0)},us=async se=>{$(se);try{const fe=await Pe.getSuperAdminCollegeDetails(se.id);fe.success&&$(fe.data)}catch(fe){console.error("Error fetching college details:",fe)}h(!0),Xe(""),ot(""),ft(1),Be(1),Va(se.id,1,"",1,"",!1)},hs=async se=>{$(se);try{const fe=await Pe.getSuperAdminCollegeDetails(se.id);fe.success&&$(fe.data)}catch(fe){console.error("Error fetching college details:",fe)}p(!0)},Yr=async se=>{$(se);try{const fe=await Pe.getSuperAdminCollegeDetails(se.id);fe.success&&$(fe.data)}catch(fe){console.error("Error fetching college details:",fe)}g(!0),Xe(""),ft(1),Va(se.id,1,"",1,"",!1)},wn=async se=>{$(se);try{const fe=await Pe.getSuperAdminCollegeDetails(se.id);fe.success&&$(fe.data)}catch(fe){console.error("Error fetching college details:",fe)}y(!0),Xe(""),ot(""),ft(1),Be(1),Va(se.id,1,"",1,"",!0)},Sr=async se=>{$(se);try{const fe=await Pe.getSuperAdminCollegeDetails(se.id);fe.success&&($(fe.data),E(fe.data.departments||[]),D(fe.data.custom_departments||[]))}catch(fe){console.error("Error fetching college details:",fe)}C(!0),L(!1),z(null),w({name:"",code:"",description:""})},xr=async se=>{$(se);try{const fe=await Pe.getBatches({college_id:se.id});fe.success&&H(fe.data||[])}catch(fe){console.error("Error fetching batches:",fe),H([])}M(!0),B(!1),R(null),j({name:"",code:"",description:"",start_year:"",end_year:""})},zr=()=>{C(!1),L(!1),z(null),w({name:"",code:"",description:""}),E([]),D([])},Or=()=>{M(!1),B(!1),R(null),j({name:"",code:"",description:"",start_year:"",end_year:""}),H([])},Pn=()=>{var We;if(!S.name.trim()||!S.code.trim()){$e({title:"Validation Error",description:"Department name and code are required",variant:"destructive"});return}if((We=G.departments)==null?void 0:We.find(nt=>nt.name.toLowerCase()===S.name.toLowerCase()||nt.code.toLowerCase()===S.code.toLowerCase())){$e({title:"Duplicate Department",description:"A department with this name or code already exists",variant:"destructive"});return}const fe={...G,departments:[...G.departments||[],S]};$(fe),w({name:"",code:"",description:""}),L(!1),$e({title:"Department Added",description:`${S.name} department has been added to the list. Click "Save Changes" to save to the database.`,variant:"default"})},me=se=>{const fe=G.departments[se];z(se),w({...fe}),L(!0)},ct=()=>{var nt;if(!S.name.trim()||!S.code.trim()){$e({title:"Validation Error",description:"Department name and code are required",variant:"destructive"});return}if((nt=G.departments)==null?void 0:nt.find((Mt,ys)=>ys!==q&&(Mt.name.toLowerCase()===S.name.toLowerCase()||Mt.code.toLowerCase()===S.code.toLowerCase()))){$e({title:"Duplicate Department",description:"A department with this name or code already exists",variant:"destructive"});return}const fe=[...G.departments];fe[q]=S;const We={...G,departments:fe};$(We),w({name:"",code:"",description:""}),L(!1),z(null),$e({title:"Department Updated",description:`${S.name} department has been updated in the list. Click "Save Changes" to save to the database.`,variant:"default"})},Ft=se=>{const fe=G.departments[se];if(window.confirm(`Are you sure you want to remove "${fe.name}"?`)){const We=G.departments.filter((nt,Mt)=>Mt!==se);$({...G,departments:We}),$e({title:"Department Removed",description:`${fe.name} has been removed from the list. Click "Save Changes" to save to the database.`,variant:"default"})}},xs=async()=>{try{await Pe.updateSuperAdminCollege(G.id,{...G,departments:G.departments}),ce(),$e({title:"Changes Saved",description:"All department changes have been saved successfully",variant:"default"}),zr()}catch(se){console.error("Error saving departments:",se),$e({title:"Error",description:"Failed to save department changes. Please try again.",variant:"destructive"})}},As=async()=>{var se,fe;if(!_.name.trim()||!_.code.trim()){$e({title:"Validation Error",description:"Batch name and code are required",variant:"destructive"});return}try{const We=await Pe.createBatch({college_id:G.id,name:_.name.trim(),code:_.code.trim(),description:_.description.trim(),start_year:_.start_year?parseInt(_.start_year):null,end_year:_.end_year?parseInt(_.end_year):null});We.success&&(H([...V,We.data]),j({name:"",code:"",description:"",start_year:"",end_year:""}),B(!1),$e({title:"Batch Created",description:`${_.name} batch has been created successfully`,variant:"default"}),ce())}catch(We){console.error("Error creating batch:",We),$e({title:"Error",description:((fe=(se=We.response)==null?void 0:se.data)==null?void 0:fe.message)||"Failed to create batch. Please try again.",variant:"destructive"})}},Cr=se=>{const fe=V[se];j({name:fe.name,code:fe.code,description:fe.description||"",start_year:fe.start_year?fe.start_year.toString():"",end_year:fe.end_year?fe.end_year.toString():""}),R(se),B(!0)},yr=async()=>{var se,fe;if(!_.name.trim()||!_.code.trim()){$e({title:"Validation Error",description:"Batch name and code are required",variant:"destructive"});return}try{const We=V[k];if((await Pe.updateBatch(We.id,{name:_.name.trim(),code:_.code.trim(),description:_.description.trim(),start_year:_.start_year?parseInt(_.start_year):null,end_year:_.end_year?parseInt(_.end_year):null})).success){const Mt=[...V];Mt[k]={...We,name:_.name.trim(),code:_.code.trim(),description:_.description.trim(),start_year:_.start_year?parseInt(_.start_year):null,end_year:_.end_year?parseInt(_.end_year):null},H(Mt),j({name:"",code:"",description:"",start_year:"",end_year:""}),B(!1),R(null),$e({title:"Batch Updated",description:"Batch has been updated successfully",variant:"default"})}}catch(We){console.error("Error updating batch:",We),$e({title:"Error",description:((fe=(se=We.response)==null?void 0:se.data)==null?void 0:fe.message)||"Failed to update batch. Please try again.",variant:"destructive"})}},Ur=async se=>{var fe,We;if(window.confirm("Are you sure you want to delete this batch? This action cannot be undone."))try{(await Pe.deleteBatch(se)).success&&(H(V.filter(Mt=>Mt.id!==se)),$e({title:"Batch Deleted",description:"Batch has been deleted successfully",variant:"default"}),ce())}catch(nt){console.error("Error deleting batch:",nt),$e({title:"Error",description:((We=(fe=nt.response)==null?void 0:fe.data)==null?void 0:We.message)||"Failed to delete batch. Please try again.",variant:"destructive"})}},Ls=async(se,fe=1)=>{var We,nt;try{c(!0);const Mt=await Pe.getUsers({role:"student",college_id:G.id,department:se.name,page:fe,limit:de.limit});if(Mt.success)W({type:"department",name:se.name,students:Mt.data||[]}),xe({page:fe,limit:de.limit,total:((We=Mt.pagination)==null?void 0:We.total)||0,totalPages:((nt=Mt.pagination)==null?void 0:nt.totalPages)||0}),F(!0);else throw new Error(Mt.message||"Failed to fetch students")}catch(Mt){console.error("Error fetching department students:",Mt),$e({variant:"destructive",title:"Error",description:Mt.message||"Failed to fetch students for this department."})}finally{c(!1)}},Mn=async(se,fe=1)=>{var We,nt;try{c(!0);const Mt=await Pe.getUsers({role:"student",college_id:G.id,batch:se.name,page:fe,limit:de.limit});if(Mt.success)W({type:"batch",name:se.name,students:Mt.data||[]}),xe({page:fe,limit:de.limit,total:((We=Mt.pagination)==null?void 0:We.total)||0,totalPages:((nt=Mt.pagination)==null?void 0:nt.totalPages)||0}),F(!0);else throw new Error(Mt.message||"Failed to fetch students")}catch(Mt){console.error("Error fetching batch students:",Mt),$e({variant:"destructive",title:"Error",description:Mt.message||"Failed to fetch students for this batch."})}finally{c(!1)}},Ws=async()=>{var se;if(!(!G||!G.departments))try{const fe={};for(const We of G.departments){const nt=await Pe.getUsers({role:"student",college_id:G.id,department:We.name,page:1,limit:1});nt.success?fe[We.name]=((se=nt.pagination)==null?void 0:se.total)||0:fe[We.name]=0}Q(fe)}catch(fe){console.error("Error fetching department student counts:",fe)}},Z=async()=>{var se;if(!(!V||V.length===0))try{const fe={};for(const We of V){const nt=await Pe.getUsers({role:"student",college_id:G.id,batch:We.name,page:1,limit:1});nt.success?fe[We.name]=((se=nt.pagination)==null?void 0:se.total)||0:fe[We.name]=0}te(fe)}catch(fe){console.error("Error fetching batch student counts:",fe)}},Ze=async se=>{if(O.type==="department"){const fe={name:O.name};await Ls(fe,se)}else if(O.type==="batch"){const fe={name:O.name};await Mn(fe,se)}},Et=async se=>{const fe=`Name: ${se.name}
Phone: ${se.phone}
Email: ${se.email}${se.designation?`
Designation: ${se.designation}`:""}`;try{await navigator.clipboard.writeText(fe),$e({title:"Copied!",description:"Contact information copied to clipboard",variant:"default"})}catch(We){console.error("Failed to copy to clipboard:",We),$e({title:"Error",description:"Failed to copy to clipboard",variant:"destructive"})}},qt=async se=>{try{const fe={name:se.name,phone:se.phone,email:se.email,designation:se.designation||"",type:"contact"},We=JSON.stringify(fe),nt=await Nu.toDataURL(We,{width:300,margin:2,color:{dark:"#000000",light:"#FFFFFF"}});Pt(nt),yt(se),J(!0)}catch(fe){console.error("Failed to generate QR code:",fe),$e({title:"Error",description:"Failed to generate QR code",variant:"destructive"})}},ss=async()=>{if(wt)try{const se=document.createElement("a");se.download=`contact-${(bt==null?void 0:bt.name)||"qr"}.png`,se.href=wt,document.body.appendChild(se),se.click(),document.body.removeChild(se),$e({title:"Downloaded!",description:"QR code downloaded successfully",variant:"default"})}catch(se){console.error("Failed to download QR code:",se),$e({title:"Error",description:"Failed to download QR code",variant:"destructive"})}},is=se=>{yt(se),dt(!0),setShowWhatsAppInput(!1),je("")},Bs=se=>{yt(se),setShowWhatsAppInput(!0),dt(!1),tt("")},kr=()=>{if(!he.trim()){$e({title:"Error",description:"Please enter recipient email address",variant:"destructive"});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(he)){$e({title:"Invalid Email",description:"Please enter a valid email address",variant:"destructive"});return}const fe=`Contact Information - ${bt.name}`,We=`Hi,

Here's the contact information for ${bt.name}:

Name: ${bt.name}
Phone: ${bt.phone}
Email: ${bt.email}${bt.designation?`
Designation: ${bt.designation}`:""}

Best regards`,nt=`mailto:${he}?subject=${encodeURIComponent(fe)}&body=${encodeURIComponent(We)}`;window.open(nt),je(""),dt(!1),$e({title:"Email Opened",description:`Email client opened with ${he} as recipient`,variant:"default"})},Ca=()=>{if(!Ne.trim()){$e({title:"Error",description:"Please enter recipient phone number",variant:"destructive"});return}const se=Ne.replace(/[^\d+]/g,"");if(!se||se.length<10){$e({title:"Invalid Phone Number",description:"Please enter a valid phone number with country code",variant:"destructive"});return}const fe=`Contact Information - ${bt.name}:

Name: ${bt.name}
Phone: ${bt.phone}
Email: ${bt.email}${bt.designation?`
Designation: ${bt.designation}`:""}`,We=`https://wa.me/${se}?text=${encodeURIComponent(fe)}`;window.open(We,"_blank"),tt(""),setShowWhatsAppInput(!1),$e({title:"WhatsApp Opened",description:`WhatsApp opened for ${se}`,variant:"default"})},Qr=()=>{dt(!1),setShowWhatsAppInput(!1),je(""),tt(""),yt(null)},da=()=>{J(!1),Pt(""),yt(null)},Rs=async se=>{const fe=`Name: ${se.contact_person}
Phone: ${se.contact_person_phone||"N/A"}
Email: ${se.contact_person_email||"N/A"}${se.contact_person_designation?`
Designation: ${se.contact_person_designation}`:""}`;try{await navigator.clipboard.writeText(fe),$e({title:"Copied!",description:"Contact information copied to clipboard",variant:"default"})}catch(We){console.error("Failed to copy to clipboard:",We),$e({title:"Error",description:"Failed to copy to clipboard",variant:"destructive"})}},Qs=se=>se?e.jsx(et,{className:"bg-green-100 text-green-800",children:"Active"}):e.jsx(et,{variant:"secondary",children:"Inactive"}),jn=se=>new Date(se).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),So=se=>{Oe(fe=>({...fe,page:se}))},Ru=se=>{Oe(fe=>({...fe,limit:se,page:1}))},Va=async(se,fe=1,We="",nt=1,Mt="",ys=!1)=>{var Wt,Xr,ur;try{const[Kn,qa]=await Promise.all([Pe.getSuperAdminUsers({college_id:se,role:"student",limit:ys?1e3:Fe,page:fe,search:We}),Pe.getSuperAdminUsers({college_id:se,role:"faculty",limit:ys?1e3:Ke,page:nt,search:Mt})]),Pc=Array.isArray(Kn.data)?Kn.data:Kn.data.users||[],Mc=Array.isArray(qa.data)?qa.data:qa.data.users||[];oe(Pc);const Mu=((Wt=Kn.data.pagination)==null?void 0:Wt.total)||Kn.data.total||Kn.data.count||Kn.total||(G!=null&&G.student_count&&Pc.length===Fe?G.student_count:((Xr=r.find(Wm=>Wm.id===se))==null?void 0:Xr.student_count)||Pc.length);re(Mu);const Hm=((ur=qa.data.pagination)==null?void 0:ur.total)||qa.data.total||qa.data.count||qa.total||Mc.length;Me(Mc),ke(Hm),G&&$(Wm=>({...Wm,student_count:Mu,faculty_count:Hm}))}catch(Kn){console.error("Error in fetchCollegeUsers:",Kn),oe([]),Me([]),re(0),ke(0)}},Pu=se=>{Xe(se.target.value),ft(1),G&&Va(G.id,1,se.target.value,at,Ve,!1)},ls=se=>{ot(se.target.value),Be(1),G&&Va(G.id,xt,ze,1,se.target.value,!1)},ar=se=>{ft(se),G&&Va(G.id,se,ze,at,Ve,!1)},dr=se=>{Be(se),G&&Va(G.id,xt,ze,se,Ve,!1)},an=(se,fe="established_year")=>{const We=se.trim();if(We===""){pe({...Ee,[fe]:""});return}const nt=parseInt(We);isNaN(nt)||nt<1800||nt>new Date().getFullYear()||pe({...Ee,[fe]:We})};return t?t.role!=="super-admin"?e.jsx("div",{className:"space-y-6 p-6",children:e.jsx(Re,{className:"shadow-lg",children:e.jsx(De,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"You need super admin privileges to access this page."}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Current role: ",t.role]})]})})})}):e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(os.h1,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary via-purple-500 to-pink-500",children:"College Management"}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(ee,{onClick:Gn,className:"bg-primary hover:bg-primary/90",children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),"Create New College"]})})]}),e.jsxs(Re,{className:"shadow-lg",children:[e.jsx(lt,{children:e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(U7,{className:"h-5 w-5"}),"Search & Filters"]})}),e.jsxs(De,{className:"space-y-4",children:[e.jsxs("form",{onSubmit:ht,className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(Ye,{placeholder:"Search colleges by name, code, email, phone, or contact person...",value:o,onChange:se=>a(se.target.value),className:"w-full"})}),e.jsxs(ee,{type:"submit",variant:"outline",children:[e.jsx(hn,{className:"mr-2 h-4 w-4"}),"Search"]}),e.jsxs(ee,{type:"button",variant:"outline",onClick:Le,children:[e.jsx(Is,{className:"mr-2 h-4 w-4"}),"Clear"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(Se,{children:"City"}),e.jsxs(At,{value:be.city,onValueChange:se=>le("city",se),children:[e.jsx(St,{children:e.jsx(Rt,{placeholder:"Select city"})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"all-cities",children:"All Cities"}),ne&&ne.length>0?ne.filter(se=>se.city).map((se,fe)=>e.jsx(Te,{value:se.city,children:se.city},`${se.city}-${fe}`)):e.jsx(Te,{value:"none",disabled:!0,children:"No cities available"})]})]})]}),e.jsxs("div",{children:[e.jsx(Se,{children:"State"}),e.jsxs(At,{value:be.state,onValueChange:se=>le("state",se),children:[e.jsx(St,{children:e.jsx(Rt,{placeholder:"Select state"})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"all-states",children:"All States"}),ne&&ne.length>0?ne.filter(se=>se.state).map((se,fe)=>e.jsx(Te,{value:se.state,children:se.state},`${se.state}-${fe}`)):e.jsx(Te,{value:"none",disabled:!0,children:"No states available"})]})]})]}),e.jsxs("div",{children:[e.jsx(Se,{children:"Country"}),e.jsxs(At,{value:be.country,onValueChange:se=>le("country",se),children:[e.jsx(St,{children:e.jsx(Rt,{placeholder:"Select country"})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"all-countries",children:"All Countries"}),ne&&ne.length>0?ne.filter(se=>se.country).map((se,fe)=>e.jsx(Te,{value:se.country,children:se.country},`${se.country}-${fe}`)):e.jsx(Te,{value:"none",disabled:!0,children:"No countries available"})]})]})]}),e.jsxs("div",{children:[e.jsx(Se,{children:"Status"}),e.jsxs(At,{value:be.is_active,onValueChange:se=>le("is_active",se),children:[e.jsx(St,{children:e.jsx(Rt,{placeholder:"Select status"})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"all-status",children:"All Status"}),e.jsx(Te,{value:"true",children:"Active"}),e.jsx(Te,{value:"false",children:"Inactive"})]})]})]})]})]})]}),n?e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3,4,5,6].map(se=>e.jsxs(Re,{className:"shadow-lg",children:[e.jsxs(lt,{children:[e.jsx("div",{className:"h-4 w-3/4 bg-muted animate-pulse rounded"}),e.jsx("div",{className:"h-3 w-1/2 bg-muted animate-pulse rounded"})]}),e.jsx(De,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-3 w-full bg-muted animate-pulse rounded"}),e.jsx("div",{className:"h-3 w-2/3 bg-muted animate-pulse rounded"}),e.jsx("div",{className:"h-3 w-1/2 bg-muted animate-pulse rounded"})]})})]},se))}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs($o,{children:[e.jsx(Bo,{children:e.jsxs(_n,{children:[e.jsx(Xt,{children:"College Name"}),e.jsx(Xt,{children:"Code"}),e.jsx(Xt,{children:"City"}),e.jsx(Xt,{children:"Contact Person"}),e.jsx(Xt,{children:"Departments"}),e.jsx(Xt,{children:"Batches"}),e.jsx(Xt,{children:"No. of Students"}),e.jsx(Xt,{children:"No. of Faculty"}),e.jsx(Xt,{children:"Actions"})]})}),e.jsx(zo,{children:r.map((se,fe)=>e.jsxs(os.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:fe*.1},className:"hover:bg-muted/50",children:[e.jsx(ns,{className:"font-medium text-primary",children:se.name}),e.jsx(ns,{className:"font-mono text-sm",children:se.code}),e.jsx(ns,{children:se.city&&se.state?`${se.city}, ${se.state}`:"N/A"}),e.jsx(ns,{children:e.jsx(ee,{variant:"link",className:"p-0 h-auto text-blue-600 hover:text-blue-800",onClick:()=>hs(se),children:"View Contact"})}),e.jsx(ns,{children:e.jsx(ee,{variant:"link",className:"p-0 h-auto text-blue-600 hover:text-blue-800",onClick:()=>Sr(se),children:se.departments&&Array.isArray(se.departments)?se.departments.length:se.department_count||0})}),e.jsx(ns,{children:e.jsx(ee,{variant:"link",className:"p-0 h-auto text-blue-600 hover:text-blue-800",onClick:()=>xr(se),children:se.batch_count||0})}),e.jsx(ns,{children:e.jsx(ee,{variant:"link",className:"p-0 h-auto text-blue-600 hover:text-blue-800",onClick:()=>Yr(se),children:se.student_count||0})}),e.jsx(ns,{children:e.jsx(ee,{variant:"link",className:"p-0 h-auto text-blue-600 hover:text-blue-800",onClick:()=>wn(se),children:se.faculty_count||0})}),e.jsx(ns,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>us(se),title:"View Details",className:"h-8 w-8 p-0",children:e.jsx(Ss,{className:"h-4 w-4"})}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>bn(se),title:"Edit College",className:"h-8 w-8 p-0",children:e.jsx(wr,{className:"h-4 w-4"})}),e.jsxs(Uo,{children:[e.jsx(V0,{asChild:!0,children:e.jsx(ee,{variant:"outline",size:"sm",title:"Delete College",className:"h-8 w-8 p-0",children:e.jsx(Ds,{className:"h-4 w-4"})})}),e.jsxs(Mi,{children:[e.jsxs(Ii,{children:[e.jsx(Fi,{children:"Delete College"}),e.jsxs(Li,{children:['Are you sure you want to delete "',se.name,'"? This action cannot be undone.',se.student_count>0||se.faculty_count>0?e.jsxs("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded text-sm",children:["  This college has active users:",se.student_count>0&&e.jsxs("div",{children:[" ",se.student_count," students"]}),se.faculty_count>0&&e.jsxs("div",{children:[" ",se.faculty_count," faculty members"]}),e.jsx("div",{className:"mt-1 text-xs",children:'You may need to deactivate users first. Use the "View Details" button to manage users.'})]}):null]})]}),e.jsxs(Oi,{children:[e.jsx(Ko,{children:"Cancel"}),e.jsx(Di,{onClick:()=>Hs(se.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})]})]})})]},se.id))})]})}),Ce.totalPages>1&&e.jsx(Re,{className:"shadow-lg",children:e.jsx(De,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",(Ce.page-1)*Ce.limit+1," to"," ",Math.min(Ce.page*Ce.limit,Ce.total)," of"," ",Ce.total," colleges"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(At,{value:Ce.limit.toString(),onValueChange:se=>Ru(parseInt(se)),children:[e.jsx(St,{className:"w-20",children:e.jsx(Rt,{})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"10",children:"10"}),e.jsx(Te,{value:"25",children:"25"}),e.jsx(Te,{value:"50",children:"50"})]})]}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>So(Ce.page-1),disabled:Ce.page===1,children:e.jsx(Hd,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-sm",children:["Page ",Ce.page," of ",Ce.totalPages]}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>So(Ce.page+1),disabled:Ce.page===Ce.totalPages,children:e.jsx(Oa,{className:"h-4 w-4"})})]})]})})})]}),e.jsx(Ht,{open:d,onOpenChange:l,children:e.jsxs(Zt,{className:"max-w-7xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Jt,{children:[e.jsx(es,{children:"Create New College"}),e.jsx(ps,{children:"Add a new college to the platform. Fill in all required fields."})]}),e.jsxs("form",{onSubmit:Cs,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"name",className:"text-sm font-medium text-gray-700",children:"College Name *"}),e.jsx(Ye,{id:"name",value:Ee.name,onChange:se=>{const fe=se.target.value,We=Bt(fe);pe({...Ee,name:fe,code:We})},placeholder:"Enter college name",className:`h-11 ${ve.name?"border-red-500":""}`}),ve.name&&e.jsx("p",{className:"text-sm text-red-500",children:ve.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Se,{htmlFor:"code",children:["College Code * ",e.jsx("span",{className:"text-xs text-gray-500",children:"(Auto-generated)"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ye,{id:"code",value:Ee.code,readOnly:!0,placeholder:"Auto-generated from name",className:`${ve.code?"border-red-500":"bg-gray-50"} cursor-not-allowed pr-16`,onClick:Gt,title:"Click to learn why this field cannot be edited"}),Ee.name.trim()&&e.jsx("button",{type:"button",onClick:()=>{const se=Bt(Ee.name);pe({...Ee,code:se}),$e({title:"Code Regenerated",description:"College code has been regenerated to ensure uniqueness.",variant:"default"})},className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-1 hover:bg-gray-200 rounded transition-colors",title:"Regenerate code",children:e.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),Ee.name.trim()&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-xs text-blue-600",children:["Code generated from: ",e.jsx("span",{className:"font-mono font-medium",children:Ee.name})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"The code is automatically generated and made unique. You cannot edit it manually."})]}),!Ee.name.trim()&&e.jsx("p",{className:"text-xs text-gray-500",children:"Enter a college name above to auto-generate a unique code"}),ve.code&&e.jsx("p",{className:"text-sm text-red-500",children:ve.code})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"email",children:"Email *"}),e.jsx(Ye,{id:"email",type:"email",value:Ee.email,onChange:se=>pe({...Ee,email:se.target.value}),placeholder:"Enter email address",className:ve.email?"border-red-500":""}),ve.email&&e.jsx("p",{className:"text-sm text-red-500",children:ve.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"phone",children:"Phone"}),e.jsx(Ye,{id:"phone",value:Ee.phone,onChange:se=>pe({...Ee,phone:se.target.value}),placeholder:"Enter phone number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"city",children:"City"}),e.jsx(Ye,{id:"city",value:Ee.city,onChange:se=>pe({...Ee,city:se.target.value}),placeholder:"Enter city"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"state",children:"State"}),e.jsx(Ye,{id:"state",value:Ee.state,onChange:se=>pe({...Ee,state:se.target.value}),placeholder:"Enter state"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"country",children:"Country"}),e.jsx(Ye,{id:"country",value:Ee.country,onChange:se=>pe({...Ee,country:se.target.value}),placeholder:"Enter country"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"postal_code",children:"Postal Code"}),e.jsx(Ye,{id:"postal_code",value:Ee.postal_code,onChange:se=>pe({...Ee,postal_code:se.target.value}),placeholder:"Enter postal code"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"website",children:"Website"}),e.jsx(Ye,{id:"website",value:Ee.website,onChange:se=>pe({...Ee,website:se.target.value}),placeholder:"Enter website URL"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"established_year",children:"Established Year"}),e.jsx(Ye,{id:"established_year",type:"number",value:Ee.established_year,onChange:se=>an(se.target.value),placeholder:"e.g., 1995",className:ve.established_year?"border-red-500":""}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Optional: Enter a year between 1800 and ",new Date().getFullYear()]}),ve.established_year&&e.jsx("p",{className:"text-sm text-red-500",children:ve.established_year})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"accreditation",children:"Accreditation"}),e.jsx(Ye,{id:"accreditation",value:Ee.accreditation,onChange:se=>pe({...Ee,accreditation:se.target.value}),placeholder:"Enter accreditation"})]}),e.jsxs("div",{className:"md:col-span-3 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Se,{className:"text-base font-semibold",children:"Contact Persons *"}),e.jsxs(ee,{type:"button",variant:"outline",size:"sm",onClick:rt,className:"flex items-center gap-2",children:[e.jsx(vs,{className:"h-4 w-4"}),"Add Contact"]})]}),Ae.map((se,fe)=>e.jsxs("div",{className:"border rounded-lg p-3 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Se,{className:"text-sm font-medium",children:["Contact ",fe+1," ",fe===0&&"(Primary)"]}),Ae.length>1&&e.jsx(ee,{type:"button",variant:"ghost",size:"sm",onClick:()=>pt(fe),className:"text-red-500 hover:text-red-700 h-8 w-8 p-0",children:e.jsx(Ds,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(Se,{htmlFor:`contact_name_${fe}`,className:"text-xs",children:"Name *"}),e.jsx(Ye,{id:`contact_name_${fe}`,value:se.name,onChange:We=>Tt(fe,"name",We.target.value),placeholder:"Full name",className:`h-9 ${ve[`contact_person_${fe}_name`]?"border-red-500":""}`}),ve[`contact_person_${fe}_name`]&&e.jsx("p",{className:"text-xs text-red-500",children:ve[`contact_person_${fe}_name`]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(Se,{htmlFor:`contact_phone_${fe}`,className:"text-xs",children:"Phone *"}),e.jsx(Ye,{id:`contact_phone_${fe}`,value:se.phone,onChange:We=>Tt(fe,"phone",We.target.value),placeholder:"Phone number",className:`h-9 ${ve[`contact_person_${fe}_phone`]?"border-red-500":""}`}),ve[`contact_person_${fe}_phone`]&&e.jsx("p",{className:"text-xs text-red-500",children:ve[`contact_person_${fe}_phone`]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(Se,{htmlFor:`contact_email_${fe}`,className:"text-xs",children:"Email *"}),e.jsx(Ye,{id:`contact_email_${fe}`,type:"email",value:se.email,onChange:We=>Tt(fe,"email",We.target.value),placeholder:"Email address",className:`h-9 ${ve[`contact_person_${fe}_email`]?"border-red-500":""}`}),ve[`contact_person_${fe}_email`]&&e.jsx("p",{className:"text-xs text-red-500",children:ve[`contact_person_${fe}_email`]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(Se,{htmlFor:`contact_designation_${fe}`,className:"text-xs",children:"Designation"}),e.jsx(Ye,{id:`contact_designation_${fe}`,value:se.designation,onChange:We=>Tt(fe,"designation",We.target.value),placeholder:"e.g., Principal, HOD",className:"h-9"})]})]})]},fe)),ve.contactPersons&&e.jsx("p",{className:"text-sm text-red-500",children:ve.contactPersons})]}),e.jsxs("div",{className:"md:col-span-3 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Se,{className:"text-base font-semibold",children:"Departments"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Add custom departments. Codes are auto-generated from names."})]}),e.jsxs(ee,{type:"button",variant:"outline",size:"sm",onClick:()=>we([...ae,{name:"",code:"",description:""}]),className:"flex items-center gap-2",children:[e.jsx(vs,{className:"h-4 w-4"}),"Add Department"]})]}),ae.map((se,fe)=>e.jsxs("div",{className:"border rounded-lg p-3 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Se,{className:"text-sm font-medium",children:["Department ",fe+1]}),ae.length>1&&e.jsx(ee,{type:"button",variant:"ghost",size:"sm",onClick:()=>_t(fe),className:"text-red-500 hover:text-red-700 h-8 w-8 p-0",children:e.jsx(Ds,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(Se,{htmlFor:`custom_dept_name_${fe}`,className:"text-xs",children:"Name *"}),e.jsx(Ye,{id:`custom_dept_name_${fe}`,value:se.name,onChange:We=>ds(fe,"name",We.target.value),placeholder:"Department name",className:`h-9 ${ve[`custom_dept_name_${fe}`]?"border-red-500":""}`}),ve[`custom_dept_name_${fe}`]&&e.jsx("p",{className:"text-xs text-red-500",children:ve[`custom_dept_name_${fe}`]}),se.name.trim()&&e.jsxs("p",{className:"text-xs text-blue-600",children:["Code: ",e.jsx("span",{className:"font-mono font-medium",children:Ut(se.name)})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs(Se,{htmlFor:`custom_dept_code_${fe}`,className:"text-xs",children:["Code * ",e.jsx("span",{className:"text-gray-500",children:"(Auto)"})]}),e.jsx(Ye,{id:`custom_dept_code_${fe}`,value:se.code,onChange:We=>ds(fe,"code",We.target.value.toUpperCase()),placeholder:"Auto-generated",className:`h-9 ${ve[`custom_dept_code_${fe}`]?"border-red-500":""}`}),ve[`custom_dept_code_${fe}`]&&e.jsx("p",{className:"text-xs text-red-500",children:ve[`custom_dept_code_${fe}`]})]}),e.jsxs("div",{className:"md:col-span-2 space-y-1",children:[e.jsx(Se,{htmlFor:`custom_dept_description_${fe}`,className:"text-xs",children:"Description"}),e.jsx(ms,{id:`custom_dept_description_${fe}`,value:se.description,onChange:We=>ds(fe,"description",We.target.value),placeholder:"Brief description",rows:2,className:"resize-none h-9"})]})]})]},fe)),ve.customDepartments&&e.jsx("p",{className:"text-sm text-red-500",children:ve.customDepartments}),qe.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{className:"text-sm font-medium text-gray-700",children:"Selected Default Departments"}),e.jsx("div",{className:"space-y-2",children:qe.map((se,fe)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:se.name}),e.jsx("div",{className:"text-sm text-gray-500",children:se.code}),se.description&&e.jsx("div",{className:"text-xs text-gray-600",children:se.description})]}),e.jsx(ee,{type:"button",variant:"ghost",size:"sm",onClick:()=>vt(fe),className:"text-red-500 hover:text-red-700",children:e.jsx(Ds,{className:"h-4 w-4"})})]},se.id))})]})]}),e.jsxs("div",{className:"md:col-span-3 space-y-2",children:[e.jsx(Se,{htmlFor:"logo_url",className:"text-sm font-medium text-gray-700",children:"Logo URL"}),e.jsx(Ye,{id:"logo_url",value:Ee.logo_url,onChange:se=>pe({...Ee,logo_url:se.target.value}),placeholder:"Enter logo URL",className:"h-11"})]}),e.jsxs("div",{className:"md:col-span-3 space-y-2",children:[e.jsx(Se,{htmlFor:"address",className:"text-sm font-medium text-gray-700",children:"Address"}),e.jsx(ms,{id:"address",value:Ee.address,onChange:se=>pe({...Ee,address:se.target.value}),placeholder:"Enter full address",rows:3,className:"resize-none"})]}),e.jsxs("div",{className:"md:col-span-3 space-y-2",children:[e.jsx(Se,{htmlFor:"description",className:"text-sm font-medium text-gray-700",children:"Description"}),e.jsx(ms,{id:"description",value:Ee.description,onChange:se=>pe({...Ee,description:se.target.value}),placeholder:"Enter college description",rows:3,className:"resize-none"})]})]}),e.jsxs("div",{className:"md:col-span-3 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Se,{className:"text-base font-semibold",children:"Batches"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Add batches to organize students by intake year or class group."})]}),e.jsxs(ee,{type:"button",variant:"outline",size:"sm",onClick:()=>H([...V,{name:"",code:"",description:""}]),className:"flex items-center gap-2",children:[e.jsx(vs,{className:"h-4 w-4"}),"Add Batch"]})]}),V.map((se,fe)=>e.jsxs("div",{className:"border rounded-lg p-3 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Se,{className:"text-sm font-medium",children:["Batch ",fe+1]}),V.length>1&&e.jsx(ee,{type:"button",variant:"ghost",size:"sm",onClick:()=>{const We=V.filter((nt,Mt)=>Mt!==fe);H(We)},className:"text-red-500 hover:text-red-700 h-8 w-8 p-0",children:e.jsx(Ds,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(Se,{htmlFor:`batch_name_${fe}`,className:"text-xs",children:"Name *"}),e.jsx(Ye,{id:`batch_name_${fe}`,value:se.name,onChange:We=>{const nt=[...V],Mt=We.target.value,ys=gs(Mt);nt[fe]={...se,name:Mt,code:ys},H(nt)},placeholder:"e.g., 2024-2028, A1",className:`h-9 ${ve[`batch_name_${fe}`]?"border-red-500":""}`}),ve[`batch_name_${fe}`]&&e.jsx("p",{className:"text-xs text-red-500",children:ve[`batch_name_${fe}`]}),se.name.trim()&&e.jsxs("p",{className:"text-xs text-blue-600",children:["Code: ",e.jsx("span",{className:"font-mono font-medium",children:gs(se.name)})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs(Se,{htmlFor:`batch_code_${fe}`,className:"text-xs",children:["Code * ",e.jsx("span",{className:"text-gray-500",children:"(Auto)"})]}),e.jsx(Ye,{id:`batch_code_${fe}`,value:se.code,onChange:We=>{const nt=[...V];nt[fe]={...se,code:We.target.value.toUpperCase()},H(nt)},placeholder:"Auto-generated",className:`h-9 ${ve[`batch_code_${fe}`]?"border-red-500":""}`}),ve[`batch_code_${fe}`]&&e.jsx("p",{className:"text-xs text-red-500",children:ve[`batch_code_${fe}`]})]}),e.jsxs("div",{className:"md:col-span-2 space-y-1",children:[e.jsx(Se,{htmlFor:`batch_description_${fe}`,className:"text-xs",children:"Description"}),e.jsx(ms,{id:`batch_description_${fe}`,value:se.description,onChange:We=>{const nt=[...V];nt[fe]={...se,description:We.target.value},H(nt)},placeholder:"Brief description",rows:2,className:"resize-none h-9"})]})]})]},fe)),V.length===0&&e.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed border-gray-300 rounded-lg",children:[e.jsx(fr,{className:"h-12 w-12 mx-auto mb-3 text-muted-foreground/50"}),e.jsx("p",{className:"text-base font-medium",children:"No batches added yet"}),e.jsx("p",{className:"text-sm",children:'Click "Add Batch" to create batches for organizing students'})]})]}),e.jsxs(ir,{children:[e.jsx(ee,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsx(ee,{type:"submit",children:"Create College"})]})]})]})}),e.jsx(Ht,{open:i,onOpenChange:u,children:e.jsxs(Zt,{className:"max-w-7xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Jt,{children:[e.jsx(es,{children:"Edit College"}),e.jsx(ps,{children:"Update college information. Required fields are marked with *."})]}),e.jsxs("form",{onSubmit:Fs,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"edit-name",className:"text-sm font-medium text-gray-700",children:"College Name *"}),e.jsx(Ye,{id:"edit-name",value:Ee.name,onChange:se=>{const fe=se.target.value,We=Bt(fe);pe({...Ee,name:fe,code:We})},placeholder:"Enter college name",className:`h-11 ${ve.name?"border-red-500":""}`}),ve.name&&e.jsx("p",{className:"text-sm text-red-500",children:ve.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Se,{htmlFor:"edit-code",className:"text-sm font-medium text-gray-700",children:["College Code * ",e.jsx("span",{className:"text-xs text-gray-500",children:"(Auto-generated)"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ye,{id:"edit-code",value:Ee.code,readOnly:!0,placeholder:"Auto-generated from name",className:`${ve.code?"border-red-500":"bg-gray-50"} cursor-not-allowed pr-16`,onClick:Gt,title:"Click to learn why this field cannot be edited"}),Ee.name.trim()&&e.jsx("button",{type:"button",onClick:()=>{const se=Bt(Ee.name);pe({...Ee,code:se}),$e({title:"Code Regenerated",description:"College code has been regenerated to ensure uniqueness.",variant:"default"})},className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-1 hover:bg-gray-200 rounded transition-colors",title:"Regenerate code",children:e.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),Ee.name.trim()&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-xs text-blue-600",children:["Code generated from: ",e.jsx("span",{className:"font-mono font-medium",children:Ee.name})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"The code is automatically generated and made unique. You cannot edit it manually."})]}),ve.code&&e.jsx("p",{className:"text-sm text-red-500",children:ve.code})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"edit-email",className:"text-sm font-medium text-gray-700",children:"Email *"}),e.jsx(Ye,{id:"edit-email",type:"email",value:Ee.email,onChange:se=>pe({...Ee,email:se.target.value}),placeholder:"Enter email address",className:`h-11 ${ve.email?"border-red-500":""}`}),ve.email&&e.jsx("p",{className:"text-sm text-red-500",children:ve.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"edit-phone",className:"text-sm font-medium text-gray-700",children:"Phone"}),e.jsx(Ye,{id:"edit-phone",value:Ee.phone,onChange:se=>pe({...Ee,phone:se.target.value}),placeholder:"Enter phone number",className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"edit-city",className:"text-sm font-medium text-gray-700",children:"City"}),e.jsx(Ye,{id:"edit-city",value:Ee.city,onChange:se=>pe({...Ee,city:se.target.value}),placeholder:"Enter city",className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"edit-state",className:"text-sm font-medium text-gray-700",children:"State"}),e.jsx(Ye,{id:"edit-state",value:Ee.state,onChange:se=>pe({...Ee,state:se.target.value}),placeholder:"Enter state",className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"edit-country",className:"text-sm font-medium text-gray-700",children:"Country"}),e.jsx(Ye,{id:"edit-country",value:Ee.country,onChange:se=>pe({...Ee,country:se.target.value}),placeholder:"Enter country",className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"edit-postal_code",className:"text-sm font-medium text-gray-700",children:"Postal Code"}),e.jsx(Ye,{id:"edit-postal_code",value:Ee.postal_code,onChange:se=>pe({...Ee,postal_code:se.target.value}),placeholder:"Enter postal code",className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"edit-website",className:"text-sm font-medium text-gray-700",children:"Website"}),e.jsx(Ye,{id:"edit-website",value:Ee.website,onChange:se=>pe({...Ee,website:se.target.value}),placeholder:"Enter website URL",className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"edit-established_year",className:"text-sm font-medium text-gray-700",children:"Established Year"}),e.jsx(Ye,{id:"edit-established_year",type:"number",value:Ee.established_year,onChange:se=>an(se.target.value),placeholder:"e.g., 1995",className:`h-11 ${ve.established_year?"border-red-500":""}`}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Optional: Enter a year between 1800 and ",new Date().getFullYear()]}),ve.established_year&&e.jsx("p",{className:"text-sm text-red-500",children:ve.established_year})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"edit-accreditation",className:"text-sm font-medium text-gray-700",children:"Accreditation"}),e.jsx(Ye,{id:"edit-accreditation",value:Ee.accreditation,onChange:se=>pe({...Ee,accreditation:se.target.value}),placeholder:"Enter accreditation",className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"edit-logo_url",className:"text-sm font-medium text-gray-700",children:"Logo URL"}),e.jsx(Ye,{id:"edit-logo_url",value:Ee.logo_url,onChange:se=>pe({...Ee,logo_url:se.target.value}),placeholder:"Enter logo URL",className:"h-11"})]}),e.jsxs("div",{className:"md:col-span-3 space-y-2",children:[e.jsx(Se,{htmlFor:"edit-address",className:"text-sm font-medium text-gray-700",children:"Address"}),e.jsx(ms,{id:"edit-address",value:Ee.address,onChange:se=>pe({...Ee,address:se.target.value}),placeholder:"Enter full address",rows:3,className:"resize-none"})]}),e.jsxs("div",{className:"md:col-span-3 space-y-2",children:[e.jsx(Se,{htmlFor:"edit-description",className:"text-sm font-medium text-gray-700",children:"Description"}),e.jsx(ms,{id:"edit-description",value:Ee.description,onChange:se=>pe({...Ee,description:se.target.value}),placeholder:"Enter college description",rows:3,className:"resize-none"})]}),e.jsxs("div",{className:"md:col-span-3 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Se,{className:"text-base font-semibold",children:"Contact Persons *"}),e.jsxs(ee,{type:"button",variant:"outline",size:"sm",onClick:rt,className:"flex items-center gap-2",children:[e.jsx(vs,{className:"h-4 w-4"}),"Add Contact Person"]})]}),Ae.map((se,fe)=>e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Se,{className:"text-sm font-medium",children:["Contact Person ",fe+1," ",fe===0&&"(Primary)"]}),Ae.length>1&&e.jsx(ee,{type:"button",variant:"ghost",size:"sm",onClick:()=>pt(fe),className:"text-red-500 hover:text-red-700",children:e.jsx(Ds,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:`edit_contact_name_${fe}`,children:"Name *"}),e.jsx(Ye,{id:`edit_contact_name_${fe}`,value:se.name,onChange:We=>Tt(fe,"name",We.target.value),placeholder:"Enter contact person name",className:ve[`contact_person_${fe}_name`]?"border-red-500":""}),ve[`contact_person_${fe}_name`]&&e.jsx("p",{className:"text-sm text-red-500",children:ve[`contact_person_${fe}_name`]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:`edit_contact_phone_${fe}`,children:"Phone *"}),e.jsx(Ye,{id:`edit_contact_phone_${fe}`,value:se.phone,onChange:We=>Tt(fe,"phone",We.target.value),placeholder:"Enter contact person phone",className:ve[`contact_person_${fe}_phone`]?"border-red-500":""}),ve[`contact_person_${fe}_phone`]&&e.jsx("p",{className:"text-sm text-red-500",children:ve[`contact_person_${fe}_phone`]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:`edit_contact_email_${fe}`,children:"Email *"}),e.jsx(Ye,{id:`edit_contact_email_${fe}`,type:"email",value:se.email,onChange:We=>Tt(fe,"email",We.target.value),placeholder:"Enter contact person email",className:ve[`contact_person_${fe}_email`]?"border-red-500":""}),ve[`contact_person_${fe}_email`]&&e.jsx("p",{className:"text-sm text-red-500",children:ve[`contact_person_${fe}_email`]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:`edit_contact_designation_${fe}`,children:"Designation"}),e.jsx(Ye,{id:`edit_contact_designation_${fe}`,value:se.designation,onChange:We=>Tt(fe,"designation",We.target.value),placeholder:"e.g., Principal, HOD, etc."})]})]})]},fe)),ve.contactPersons&&e.jsx("p",{className:"text-sm text-red-500",children:ve.contactPersons})]}),e.jsxs("div",{className:"md:col-span-3 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Se,{className:"text-base font-semibold",children:"Departments"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Choose from common departments or create custom ones. Custom department codes are auto-generated from names."})]}),e.jsxs(ee,{type:"button",variant:"outline",size:"sm",onClick:()=>we([...ae,{name:"",code:"",description:""}]),className:"flex items-center gap-2",children:[e.jsx(vs,{className:"h-4 w-4"}),"Custom Department"]})]}),ae.map((se,fe)=>e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Se,{className:"text-sm font-medium",children:["Custom Department ",fe+1]}),ae.length>1&&e.jsx(ee,{type:"button",variant:"ghost",size:"sm",onClick:()=>_t(fe),className:"text-red-500 hover:text-red-700",children:e.jsx(Ds,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:`edit_custom_dept_name_${fe}`,children:"Name *"}),e.jsx(Ye,{id:`edit_custom_dept_name_${fe}`,value:se.name,onChange:We=>ds(fe,"name",We.target.value),placeholder:"Enter department name",className:ve[`custom_dept_name_${fe}`]?"border-red-500":""}),ve[`custom_dept_name_${fe}`]&&e.jsx("p",{className:"text-sm text-red-500",children:ve[`custom_dept_name_${fe}`]}),se.name.trim()&&e.jsxs("p",{className:"text-xs text-blue-600",children:["Code will be: ",e.jsx("span",{className:"font-mono font-medium",children:Ut(se.name)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Se,{htmlFor:`edit_custom_dept_code_${fe}`,children:["Code *",e.jsx("span",{className:"text-xs text-gray-500 ml-1",children:"(Auto-generated)"})]}),e.jsx(Ye,{id:`edit_custom_dept_code_${fe}`,value:se.code,onChange:We=>ds(fe,"code",We.target.value.toUpperCase()),placeholder:"Auto-generated from name",className:ve[`custom_dept_code_${fe}`]?"border-red-500":""}),ve[`custom_dept_code_${fe}`]&&e.jsx("p",{className:"text-sm text-red-500",children:ve[`custom_dept_code_${fe}`]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Code is automatically generated from the department name. You can modify it if needed."})]}),e.jsxs("div",{className:"md:col-span-2 space-y-2",children:[e.jsx(Se,{htmlFor:`edit_custom_dept_description_${fe}`,children:"Description"}),e.jsx(ms,{id:`edit_custom_dept_description_${fe}`,value:se.description,onChange:We=>ds(fe,"description",We.target.value),placeholder:"Enter department description",rows:3,className:"resize-none"})]})]})]},fe)),ve.customDepartments&&e.jsx("p",{className:"text-sm text-red-500",children:ve.customDepartments}),qe.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{className:"text-sm font-medium text-gray-700",children:"Selected Default Departments"}),e.jsx("div",{className:"space-y-2",children:qe.map((se,fe)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:se.name}),e.jsx("div",{className:"text-sm text-gray-500",children:se.code}),se.description&&e.jsx("div",{className:"text-xs text-gray-600",children:se.description})]}),e.jsx(ee,{type:"button",variant:"ghost",size:"sm",onClick:()=>vt(fe),className:"text-red-500 hover:text-red-700",children:e.jsx(Ds,{className:"h-4 w-4"})})]},se.id))})]})]})]}),e.jsxs(ir,{children:[e.jsx(ee,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),e.jsx(ee,{type:"submit",children:"Update College"})]})]})]})}),e.jsx(Ht,{open:f,onOpenChange:h,children:e.jsxs(Zt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Jt,{children:[e.jsx(es,{children:"College Details"}),e.jsx(ps,{children:"View detailed information about the college."})]}),G&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg text-primary",children:G.name}),e.jsx("p",{className:"text-sm text-muted-foreground font-mono",children:G.code}),Qs(G.is_active)]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ro,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:G.email})]}),G.phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n9,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:G.phone})]}),G.website&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gy,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("a",{href:G.website,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline",children:G.website})]}),G.address&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Pa,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),e.jsx("span",{className:"text-sm",children:G.address})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:G.total_users||0}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Users"})]}),e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:G.course_count||0}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Courses"})]}),e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:G.faculty_count||0}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Faculty"})]}),e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:G.student_count||0}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Students"})]})]}),G.contact_person&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-semibold flex items-center gap-2",children:[e.jsx(Da,{className:"h-4 w-4"}),"Contact Person"]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",G.contact_person]}),G.contact_person_phone&&e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",G.contact_person_phone]}),G.contact_person_email&&e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",G.contact_person_email]})]})]})]})]}),G.departments&&G.departments.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-semibold flex items-center gap-2",children:[e.jsx(tr,{className:"h-4 w-4"}),"Departments"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:G.departments.map((se,fe)=>e.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[e.jsx("div",{className:"font-medium text-primary",children:se.name}),e.jsx("div",{className:"text-sm text-muted-foreground font-mono",children:se.code}),se.description&&e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:se.description})]},se.id||fe))})]}),(G.established_year||G.accreditation||G.description)&&e.jsxs("div",{className:"space-y-4",children:[G.established_year&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fr,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:[e.jsx("strong",{children:"Established:"})," ",G.established_year]})]}),G.accreditation&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(so,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:[e.jsx("strong",{children:"Accreditation:"})," ",G.accreditation]})]}),G.description&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:G.description})]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Created:"})," ",jn(G.created_at)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Last Updated:"})," ",jn(G.updated_at)]})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Students"}),e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx(Ye,{placeholder:"Search students...",value:ze,onChange:Pu})}),e.jsx("div",{className:"overflow-x-auto mb-2",children:e.jsxs("table",{className:"w-full table-auto border",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"p-2 border",children:"Name"}),e.jsx("th",{className:"p-2 border",children:"Email"}),e.jsx("th",{className:"p-2 border",children:"Student ID"}),e.jsx("th",{className:"p-2 border",children:"Department"}),e.jsx("th",{className:"p-2 border",children:"Status"})]})}),e.jsx("tbody",{children:ue.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center p-4",children:"No students found."})}):ue.map(se=>e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 border text-blue-600 cursor-pointer hover:underline",onClick:()=>Qe(`/profile/${se.id}`),children:se.name}),e.jsx("td",{className:"p-2 border",children:se.email}),e.jsx("td",{className:"p-2 border",children:se.student_id}),e.jsx("td",{className:"p-2 border",children:se.department}),e.jsx("td",{className:"p-2 border",children:se.is_active?"Active":"Inactive"})]},se.id))})]})}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("span",{children:["Page ",xt," of ",Math.max(1,Math.ceil(Ue/Fe))]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ee,{size:"sm",disabled:xt===1,onClick:()=>ar(xt-1),children:"Prev"}),e.jsx(ee,{size:"sm",disabled:xt>=Math.ceil(Ue/Fe),onClick:()=>ar(xt+1),children:"Next"})]})]}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Faculty"}),e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx(Ye,{placeholder:"Search faculty...",value:Ve,onChange:ls})}),e.jsx("div",{className:"overflow-x-auto mb-2",children:e.jsxs("table",{className:"w-full table-auto border",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"p-2 border",children:"Name"}),e.jsx("th",{className:"p-2 border",children:"Email"}),e.jsx("th",{className:"p-2 border",children:"Department"}),e.jsx("th",{className:"p-2 border",children:"Status"})]})}),e.jsx("tbody",{children:_e.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"text-center p-4",children:"No faculty found."})}):_e.map(se=>e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 border text-blue-600 cursor-pointer hover:underline",onClick:()=>Qe(`/profile/${se.id}`),children:se.name}),e.jsx("td",{className:"p-2 border",children:se.email}),e.jsx("td",{className:"p-2 border",children:se.department}),e.jsx("td",{className:"p-2 border",children:se.is_active?"Active":"Inactive"})]},se.id))})]})}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("span",{children:["Page ",at," of ",Math.max(1,Math.ceil(ye/Ke))]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ee,{size:"sm",disabled:at===1,onClick:()=>dr(at-1),children:"Prev"}),e.jsx(ee,{size:"sm",disabled:at>=Math.ceil(ye/Ke),onClick:()=>dr(at+1),children:"Next"})]})]})]})]}),e.jsxs(ir,{children:[e.jsx(ee,{variant:"outline",onClick:()=>h(!1),children:"Close"}),G&&e.jsxs(e.Fragment,{children:[e.jsx(ee,{variant:"destructive",onClick:()=>{window.confirm(`  DEACTIVATE ALL USERS 

This will deactivate ALL users in ${G.name}:
 Students: ${G.student_count||0}
 Faculty: ${G.faculty_count||0}

After deactivation, you can delete the college.

Are you sure you want to proceed?`)&&Kr(G.id)},disabled:n,children:n?"Processing...":"Deactivate All Users"}),e.jsx(ee,{onClick:()=>{h(!1),bn(G)},children:"Edit College"})]})]})]})}),e.jsx(Ht,{open:m,onOpenChange:p,children:e.jsxs(Zt,{className:"max-w-4xl",children:[e.jsxs(Jt,{children:[e.jsx(es,{children:"Contact Person Details"}),e.jsxs(ps,{children:["Contact information for ",G==null?void 0:G.name," - Share or copy contact details"]})]}),G&&e.jsx("div",{className:"space-y-6",children:G.contact_persons&&G.contact_persons.length>0?G.contact_persons.map((se,fe)=>e.jsxs("div",{className:"border rounded-lg p-6 bg-gradient-to-r from-blue-50 to-indigo-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"font-semibold text-primary text-lg",children:se.is_primary?"Primary Contact":`Contact ${fe+1}`}),se.is_primary&&e.jsx(et,{variant:"default",className:"text-xs",children:"Primary"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{className:"font-medium",children:"Name"}),e.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:se.name||"N/A"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{className:"font-medium",children:"Phone"}),e.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:se.phone||"N/A"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{className:"font-medium",children:"Email"}),e.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:se.email||"N/A"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{className:"font-medium",children:"Designation"}),e.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:se.designation||"N/A"})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h5",{className:"font-medium text-gray-700 mb-3",children:"Share Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>Et(se),className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy to Clipboard"]}),e.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>qt(se),className:"flex items-center gap-2",children:[e.jsx(Po,{className:"w-4 h-4"}),"Generate QR Code"]}),e.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>is(se),className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Share via Email"]}),e.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>Bs(se),className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"})}),"Share via WhatsApp"]})]})]})]},se.id||fe)):G.contact_person?e.jsxs("div",{className:"border rounded-lg p-6 bg-gradient-to-r from-blue-50 to-indigo-50",children:[e.jsx("h4",{className:"font-semibold text-primary text-lg mb-4",children:"Contact Person"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{className:"font-medium",children:"Name"}),e.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:G.contact_person||"N/A"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{className:"font-medium",children:"Phone"}),e.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:G.contact_person_phone||"N/A"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{className:"font-medium",children:"Email"}),e.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:G.contact_person_email||"N/A"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{className:"font-medium",children:"Designation"}),e.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:G.contact_person_designation||"N/A"})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h5",{className:"font-medium text-gray-700 mb-3",children:"Share Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>Rs(G),className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy to Clipboard"]}),e.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>generateLegacyContactQRCode(G),className:"flex items-center gap-2",children:[e.jsx(Po,{className:"w-4 h-4"}),"Generate QR Code"]}),e.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>handleLegacyEmailShare(G),className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Share via Email"]}),e.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>handleLegacyWhatsAppShare(G),className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"})}),"Share via WhatsApp"]})]})]})]}):e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No contact information available"})}),e.jsx(ir,{children:e.jsx(ee,{variant:"outline",onClick:()=>p(!1),children:"Close"})})]})}),e.jsx(Ht,{open:jt,onOpenChange:dt,children:e.jsxs(Zt,{className:"max-w-md",children:[e.jsxs(Jt,{children:[e.jsx(es,{children:"Share Contact via Email"}),e.jsx(ps,{children:"Enter the recipient's email address to share contact information"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"email-recipient",children:"Recipient Email"}),e.jsx(Ye,{id:"email-recipient",type:"email",placeholder:"Enter email address",value:he,onChange:se=>je(se.target.value)})]}),bt&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Contact:"})," ",bt.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",bt.phone||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",bt.email||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Designation:"})," ",bt.designation||"N/A"]})]})]}),e.jsxs(ir,{children:[e.jsx(ee,{variant:"outline",onClick:Qr,children:"Cancel"}),e.jsx(ee,{onClick:kr,children:"Send Email"})]})]})}),e.jsx(Ht,{open:kt,onOpenChange:gt,children:e.jsxs(Zt,{className:"max-w-md",children:[e.jsxs(Jt,{children:[e.jsx(es,{children:"Share Contact via WhatsApp"}),e.jsx(ps,{children:"Enter the recipient's phone number to share contact information"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"whatsapp-recipient",children:"Recipient Phone Number"}),e.jsx(Ye,{id:"whatsapp-recipient",type:"tel",placeholder:"Enter phone number (e.g., 911234567890)",value:Ne,onChange:se=>tt(se.target.value)})]}),bt&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Contact:"})," ",bt.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",bt.phone||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",bt.email||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Designation:"})," ",bt.designation||"N/A"]})]})]}),e.jsxs(ir,{children:[e.jsx(ee,{variant:"outline",onClick:Qr,children:"Cancel"}),e.jsx(ee,{onClick:Ca,children:"Send WhatsApp"})]})]})}),e.jsx(Ht,{open:Ge,onOpenChange:J,children:e.jsxs(Zt,{className:"max-w-md",children:[e.jsxs(Jt,{children:[e.jsx(es,{children:"Contact QR Code"}),e.jsx(ps,{children:"Scan this QR code to get contact information"})]}),e.jsx("div",{className:"space-y-4",children:wt&&e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("img",{src:wt,alt:"Contact QR Code",className:"w-64 h-64 border rounded-lg"}),bt&&e.jsxs("div",{className:"text-sm text-muted-foreground text-center",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Contact:"})," ",bt.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",bt.phone||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",bt.email||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Designation:"})," ",bt.designation||"N/A"]})]})]})}),e.jsxs(ir,{children:[e.jsx(ee,{variant:"outline",onClick:da,children:"Close"}),e.jsxs(ee,{onClick:ss,className:"flex items-center gap-2",children:[e.jsx(Zs,{className:"w-4 h-4"}),"Download QR Code"]})]})]})}),e.jsx(Ht,{open:x,onOpenChange:g,children:e.jsxs(Zt,{className:"max-w-7xl max-h-[95vh] overflow-hidden flex flex-col",children:[e.jsx(Jt,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(es,{children:["Students - ",G==null?void 0:G.name]}),e.jsx(ps,{children:"View all students enrolled in this college"})]}),e.jsx(Ye,{placeholder:"Search students...",value:ze,onChange:Pu,className:"max-w-sm"})]})}),G&&e.jsxs("div",{className:"flex flex-col flex-1 min-h-0",children:[e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs($o,{children:[e.jsx(Bo,{children:e.jsxs(_n,{children:[e.jsx(Xt,{className:"py-2",children:"Name"}),e.jsx(Xt,{className:"py-2",children:"Email"}),e.jsx(Xt,{className:"py-2",children:"Student ID"}),e.jsx(Xt,{className:"py-2",children:"Department"}),e.jsx(Xt,{className:"py-2",children:"Status"}),e.jsx(Xt,{className:"py-2",children:"Created Date"})]})}),e.jsx(zo,{children:ue.length===0?e.jsx(_n,{children:e.jsx(ns,{colSpan:6,className:"text-center py-4",children:"No students found."})}):ue.map(se=>e.jsxs(_n,{className:"hover:bg-muted/50",children:[e.jsx(ns,{className:"py-2 font-medium text-blue-600 cursor-pointer hover:underline",onClick:()=>Qe(`/profile/${se.id}`),children:se.name}),e.jsx(ns,{className:"py-2 text-sm",children:se.email}),e.jsx(ns,{className:"py-2 font-mono text-sm",children:se.student_id}),e.jsx(ns,{className:"py-2 text-sm",children:se.department}),e.jsx(ns,{className:"py-2",children:e.jsx(et,{variant:se.is_active?"default":"secondary",className:"text-xs",children:se.is_active?"Active":"Inactive"})}),e.jsx(ns,{className:"py-2 text-sm",children:jn(se.created_at)})]},se.id))})]})}),ue.length>0&&e.jsxs("div",{className:"flex justify-between items-center mt-3 pt-3 border-t",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",xt," of ",Math.ceil(Ue/Fe)]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ee,{size:"sm",variant:"outline",disabled:xt===1,onClick:()=>ar(xt-1),children:"Previous"}),e.jsx(ee,{size:"sm",variant:"outline",disabled:xt>=Math.ceil(Ue/Fe),onClick:()=>ar(xt+1),children:"Next"}),e.jsx(ee,{variant:"outline",onClick:()=>g(!1),children:"Close"})]})]})]})]})}),e.jsx(Ht,{open:v,onOpenChange:y,children:e.jsxs(Zt,{className:"max-w-6xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Jt,{children:[e.jsxs(es,{children:["Faculty - ",G==null?void 0:G.name]}),e.jsx(ps,{children:"View all faculty members in this college"})]}),G&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Ye,{placeholder:"Search faculty...",value:Ve,onChange:ls,className:"max-w-sm"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs($o,{children:[e.jsx(Bo,{children:e.jsxs(_n,{children:[e.jsx(Xt,{children:"Name"}),e.jsx(Xt,{children:"Email"}),e.jsx(Xt,{children:"Department"}),e.jsx(Xt,{children:"Status"}),e.jsx(Xt,{children:"Created Date"})]})}),e.jsx(zo,{children:_e.length===0?e.jsx(_n,{children:e.jsx(ns,{colSpan:5,className:"text-center py-8",children:"No faculty members found."})}):_e.map(se=>e.jsxs(_n,{className:"hover:bg-muted/50",children:[e.jsx(ns,{className:"font-medium text-blue-600 cursor-pointer hover:underline",onClick:()=>Qe(`/profile/${se.id}`),children:se.name}),e.jsx(ns,{children:se.email}),e.jsx(ns,{children:se.department}),e.jsx(ns,{children:e.jsx(et,{variant:se.is_active?"default":"secondary",children:se.is_active?"Active":"Inactive"})}),e.jsx(ns,{children:jn(se.created_at)})]},se.id))})]})}),ye>Ke&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",at," of ",Math.ceil(ye/Ke)]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ee,{size:"sm",variant:"outline",disabled:at===1,onClick:()=>dr(at-1),children:"Previous"}),e.jsx(ee,{size:"sm",variant:"outline",disabled:at>=Math.ceil(ye/Ke),onClick:()=>dr(at+1),children:"Next"})]})]})]}),e.jsx(ir,{children:e.jsx(ee,{variant:"outline",onClick:()=>y(!1),children:"Close"})})]})}),e.jsx(Ht,{open:b,onOpenChange:C,children:e.jsxs(Zt,{className:"max-w-7xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Jt,{children:[e.jsxs(es,{children:["Manage Departments - ",G==null?void 0:G.name]}),e.jsx(ps,{children:"Add, edit, and manage departments for this college. Choose from common departments or create custom ones."})]}),G&&e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Current Departments"}),e.jsxs(ee,{onClick:()=>{z(-1),w({name:"",code:"",description:""})},children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),"Add Department"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3",children:[q===-1&&e.jsx(Re,{className:"p-3 border-dashed border-2 border-primary/30 bg-primary/5",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ye,{value:S.name,onChange:se=>w(fe=>({...fe,name:se.target.value})),placeholder:"Department Name",className:"h-8 text-sm"}),e.jsx(Ye,{value:S.code,onChange:se=>w(fe=>({...fe,code:se.target.value.toUpperCase()})),placeholder:"Department Code",className:"h-8 text-sm"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(ee,{size:"sm",onClick:Pn,disabled:!S.name||!S.code,className:"h-6 px-2 text-xs",children:"Add"}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>{z(null),w({name:"",code:"",description:""})},className:"h-6 px-2 text-xs",children:"Cancel"})]})]})}),G.departments&&G.departments.length>0&&G.departments.map((se,fe)=>e.jsx(Re,{className:"p-3 hover:shadow-md transition-shadow",children:q===fe?e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ye,{value:S.name,onChange:We=>w(nt=>({...nt,name:We.target.value})),placeholder:"Department Name",className:"h-8 text-sm"}),e.jsx(Ye,{value:S.code,onChange:We=>w(nt=>({...nt,code:We.target.value.toUpperCase()})),placeholder:"Department Code",className:"h-8 text-sm"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(ee,{size:"sm",onClick:ct,disabled:!S.name||!S.code,className:"h-6 px-2 text-xs",children:"Save"}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>{z(null),w({name:"",code:"",description:""})},className:"h-6 px-2 text-xs",children:"Cancel"})]})]}):e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-base mb-1 truncate",children:se.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-mono text-xs text-muted-foreground",children:se.code}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",K[se.name]||0," students)"]})]})]}),e.jsxs("div",{className:"flex gap-1 ml-2",children:[e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>Ls(se),className:"text-green-600 hover:text-green-700 hover:bg-green-50 h-6 w-6 p-0",title:"View Students",children:e.jsx(as,{className:"h-3 w-3"})}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>me(fe),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50 h-6 w-6 p-0",title:"Edit Department",children:e.jsx(wr,{className:"h-3 w-3"})}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>Ft(fe),className:"text-red-600 hover:text-red-700 hover:bg-red-50 h-6 w-6 p-0",title:"Delete Department",children:e.jsx(Ds,{className:"h-3 w-3"})})]})]})},fe))]}),(!G.departments||G.departments.length===0)&&q!==-1&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(L7,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No departments found for this college."}),e.jsx("p",{className:"text-sm",children:'Click "Add Department" to get started.'})]})]})}),e.jsxs(ir,{className:"flex justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[((ml=G==null?void 0:G.departments)==null?void 0:ml.length)||0," departments in this college"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ee,{variant:"outline",onClick:zr,children:"Cancel"}),e.jsx(ee,{onClick:xs,children:"Save Changes"})]})]})]})}),e.jsx(Ht,{open:T,onOpenChange:M,children:e.jsxs(Zt,{className:"max-w-7xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Jt,{children:[e.jsxs(es,{children:["Manage Batches - ",G==null?void 0:G.name]}),e.jsx(ps,{children:"Add, edit, and manage batches for this college. Batches help organize students by intake year or class group."})]}),G&&e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Current Batches"}),e.jsxs(ee,{onClick:()=>{R(-1),j({name:"",code:"",description:"",start_year:"",end_year:""})},children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),"Add Batch"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3",children:[k===-1&&e.jsx(Re,{className:"p-3 border-dashed border-2 border-primary/30 bg-primary/5",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ye,{value:_.name,onChange:se=>j(fe=>({...fe,name:se.target.value})),placeholder:"Batch Name",className:"h-8 text-sm"}),e.jsx(Ye,{value:_.code,onChange:se=>j(fe=>({...fe,code:se.target.value.toUpperCase()})),placeholder:"Batch Code",className:"h-8 text-sm"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(ee,{size:"sm",onClick:As,disabled:!_.name||!_.code,className:"h-6 px-2 text-xs",children:"Add"}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>{R(null),j({name:"",code:"",description:"",start_year:"",end_year:""})},className:"h-6 px-2 text-xs",children:"Cancel"})]})]})}),V&&V.length>0&&V.map((se,fe)=>e.jsx(Re,{className:"p-3 hover:shadow-md transition-shadow",children:k===fe?e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ye,{value:_.name,onChange:We=>j(nt=>({...nt,name:We.target.value})),placeholder:"Batch Name",className:"h-8 text-sm"}),e.jsx(Ye,{value:_.code,onChange:We=>j(nt=>({...nt,code:We.target.value.toUpperCase()})),placeholder:"Batch Code",className:"h-8 text-sm"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(ee,{size:"sm",onClick:yr,disabled:!_.name||!_.code,className:"h-6 px-2 text-xs",children:"Save"}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>{R(null),j({name:"",code:"",description:"",start_year:"",end_year:""})},className:"h-6 px-2 text-xs",children:"Cancel"})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-semibold text-base truncate",children:se.name}),e.jsxs("div",{className:"flex gap-1 ml-2",children:[e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>Mn(se),className:"text-green-600 hover:text-green-700 hover:bg-green-50 h-6 w-6 p-0",title:"View Students",children:e.jsx(as,{className:"h-3 w-3"})}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>Cr(fe),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50 h-6 w-6 p-0",title:"Edit Batch",children:e.jsx(wr,{className:"h-3 w-3"})}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>Ur(se.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50 h-6 w-6 p-0",title:"Delete Batch",children:e.jsx(Ds,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-mono text-xs text-muted-foreground",children:se.code}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",X[se.name]||0," students)"]})]})]})},se.id))]}),(!V||V.length===0)&&k!==-1&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(fr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No batches found for this college."}),e.jsx("p",{className:"text-sm",children:'Click "Add Batch" to get started.'})]})]})}),e.jsxs(ir,{className:"flex justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[(V==null?void 0:V.length)||0," batches in this college"]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(ee,{variant:"outline",onClick:Or,children:"Close"})})]})]})}),e.jsx(Ht,{open:Y,onOpenChange:F,children:e.jsxs(Zt,{className:"max-w-7xl max-h-[95vh] overflow-y-auto",children:[e.jsxs(Jt,{children:[e.jsxs(es,{children:["Students in ",O.type==="department"?"Department":"Batch",": ",O.name]}),e.jsxs(ps,{children:["View all students in this ",O.type==="department"?"department":"batch","."]})]}),e.jsx("div",{className:"space-y-4",children:n?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx(Tr,{className:"h-8 w-8 animate-spin"})}):O.students.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs($o,{children:[e.jsx(Bo,{children:e.jsxs(_n,{children:[e.jsx(Xt,{className:"py-2",children:"Student ID"}),e.jsx(Xt,{className:"py-2",children:"Name"}),e.jsx(Xt,{className:"py-2",children:"Email"}),e.jsx(Xt,{className:"py-2",children:"Phone"}),e.jsx(Xt,{className:"py-2",children:"Joining Year"}),e.jsx(Xt,{className:"py-2",children:"Current Year"}),e.jsx(Xt,{className:"py-2",children:"Status"})]})}),e.jsx(zo,{children:O.students.map(se=>e.jsxs(_n,{className:"hover:bg-muted/50",children:[e.jsx(ns,{className:"py-2 font-mono text-sm",children:se.student_id}),e.jsx(ns,{className:"py-2 font-medium",children:se.name}),e.jsx(ns,{className:"py-2 text-sm",children:se.email}),e.jsx(ns,{className:"py-2 text-sm",children:se.phone||"N/A"}),e.jsx(ns,{className:"py-2 text-sm",children:se.joining_year}),e.jsx(ns,{className:"py-2 text-sm",children:se.current_year||"N/A"}),e.jsx(ns,{className:"py-2",children:e.jsx(et,{variant:se.status==="active"?"default":"secondary",children:se.status||"active"})})]},se.id))})]})}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(as,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsxs("p",{children:["No students found in this ",O.type==="department"?"department":"batch","."]})]})}),e.jsxs(ir,{className:"flex flex-col gap-4",children:[de.totalPages>1&&e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",(de.page-1)*de.limit+1," to ",Math.min(de.page*de.limit,de.total)," of ",de.total," students"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>Ze(de.page-1),disabled:de.page<=1,className:"h-8 px-3",children:[e.jsx(Hd,{className:"h-4 w-4 mr-1"}),"Previous"]}),e.jsxs("span",{className:"text-sm text-muted-foreground px-2",children:["Page ",de.page," of ",de.totalPages]}),e.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>Ze(de.page+1),disabled:de.page>=de.totalPages,className:"h-8 px-3",children:["Next",e.jsx(Oa,{className:"h-4 w-4 ml-1"})]})]})]}),e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[de.total," students in this ",O.type==="department"?"department":"batch"]}),e.jsx(ee,{variant:"outline",onClick:()=>F(!1),children:"Close"})]})]})]})})]}):e.jsx("div",{className:"space-y-6 p-6",children:e.jsx(Re,{className:"shadow-lg",children:e.jsx(De,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Authentication Required"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Please log in to access the College Management page."}),e.jsx(ee,{asChild:!0,children:e.jsx("a",{href:"/login",children:"Go to Login"})})]})})})})};var dB="Separator",Zw="horizontal",uB=["horizontal","vertical"],N5=A.forwardRef((t,r)=>{const{decorative:s,orientation:n=Zw,...c}=t,o=hB(n)?n:Zw,d=s?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return e.jsx(Dt.div,{"data-orientation":o,...d,...c,ref:r})});N5.displayName=dB;function hB(t){return uB.includes(t)}var S5=N5;const xc=A.forwardRef(({className:t,orientation:r="horizontal",decorative:s=!0,...n},c)=>e.jsx(S5,{ref:c,decorative:s,orientation:r,className:Ot("shrink-0 bg-border",r==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...n}));xc.displayName=S5.displayName;var Jw=1,fB=.9,mB=.8,pB=.17,sg=.1,rg=.999,gB=.9999,xB=.99,yB=/[\\\/_+.#"@\[\(\{&]/,vB=/[\\\/_+.#"@\[\(\{&]/g,bB=/[\s-]/,C5=/[\s-]/g;function J0(t,r,s,n,c,o,a){if(o===r.length)return c===t.length?Jw:xB;var d=`${c},${o}`;if(a[d]!==void 0)return a[d];for(var l=n.charAt(o),i=s.indexOf(l,c),u=0,f,h,m,p;i>=0;)f=J0(t,r,s,n,i+1,o+1,a),f>u&&(i===c?f*=Jw:yB.test(t.charAt(i-1))?(f*=mB,m=t.slice(c,i-1).match(vB),m&&c>0&&(f*=Math.pow(rg,m.length))):bB.test(t.charAt(i-1))?(f*=fB,p=t.slice(c,i-1).match(C5),p&&c>0&&(f*=Math.pow(rg,p.length))):(f*=pB,c>0&&(f*=Math.pow(rg,i-c))),t.charAt(i)!==r.charAt(o)&&(f*=gB)),(f<sg&&s.charAt(i-1)===n.charAt(o+1)||n.charAt(o+1)===n.charAt(o)&&s.charAt(i-1)!==n.charAt(o))&&(h=J0(t,r,s,n,i+1,o+2,a),h*sg>f&&(f=h*sg)),f>u&&(u=f),i=s.indexOf(l,i+1);return a[d]=u,u}function e2(t){return t.toLowerCase().replace(C5," ")}function wB(t,r,s){return t=s&&s.length>0?`${t+" "+s.join(" ")}`:t,J0(t,r,e2(t),e2(r),0,0,{})}var Wc='[cmdk-group=""]',ng='[cmdk-group-items=""]',jB='[cmdk-group-heading=""]',k5='[cmdk-item=""]',t2=`${k5}:not([aria-disabled="true"])`,ex="cmdk-item-select",wl="data-value",_B=(t,r,s)=>wB(t,r,s),E5=A.createContext(void 0),Cu=()=>A.useContext(E5),A5=A.createContext(void 0),Tv=()=>A.useContext(A5),T5=A.createContext(void 0),R5=A.forwardRef((t,r)=>{let s=jl(()=>{var D,V;return{search:"",value:(V=(D=t.value)!=null?D:t.defaultValue)!=null?V:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),n=jl(()=>new Set),c=jl(()=>new Map),o=jl(()=>new Map),a=jl(()=>new Set),d=P5(t),{label:l,children:i,value:u,onValueChange:f,filter:h,shouldFilter:m,loop:p,disablePointerSelection:x=!1,vimBindings:g=!0,...v}=t,y=Hr(),b=Hr(),C=Hr(),T=A.useRef(null),M=IB();al(()=>{if(u!==void 0){let D=u.trim();s.current.value=D,U.emit()}},[u]),al(()=>{M(6,k)},[]);let U=A.useMemo(()=>({subscribe:D=>(a.current.add(D),()=>a.current.delete(D)),snapshot:()=>s.current,setState:(D,V,H)=>{var G,$,Y,F;if(!Object.is(s.current[D],V)){if(s.current[D]=V,D==="search")z(),B(),M(1,q);else if(D==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let O=document.getElementById(C);O?O.focus():(G=document.getElementById(y))==null||G.focus()}if(M(7,()=>{var O;s.current.selectedItemId=(O=R())==null?void 0:O.id,U.emit()}),H||M(5,k),(($=d.current)==null?void 0:$.value)!==void 0){let O=V??"";(F=(Y=d.current).onValueChange)==null||F.call(Y,O);return}}U.emit()}},emit:()=>{a.current.forEach(D=>D())}}),[]),L=A.useMemo(()=>({value:(D,V,H)=>{var G;V!==((G=o.current.get(D))==null?void 0:G.value)&&(o.current.set(D,{value:V,keywords:H}),s.current.filtered.items.set(D,P(V,H)),M(2,()=>{B(),U.emit()}))},item:(D,V)=>(n.current.add(D),V&&(c.current.has(V)?c.current.get(V).add(D):c.current.set(V,new Set([D]))),M(3,()=>{z(),B(),s.current.value||q(),U.emit()}),()=>{o.current.delete(D),n.current.delete(D),s.current.filtered.items.delete(D);let H=R();M(4,()=>{z(),(H==null?void 0:H.getAttribute("id"))===D&&q(),U.emit()})}),group:D=>(c.current.has(D)||c.current.set(D,new Set),()=>{o.current.delete(D),c.current.delete(D)}),filter:()=>d.current.shouldFilter,label:l||t["aria-label"],getDisablePointerSelection:()=>d.current.disablePointerSelection,listId:y,inputId:C,labelId:b,listInnerRef:T}),[]);function P(D,V){var H,G;let $=(G=(H=d.current)==null?void 0:H.filter)!=null?G:_B;return D?$(D,s.current.search,V):0}function B(){if(!s.current.search||d.current.shouldFilter===!1)return;let D=s.current.filtered.items,V=[];s.current.filtered.groups.forEach(G=>{let $=c.current.get(G),Y=0;$.forEach(F=>{let O=D.get(F);Y=Math.max(O,Y)}),V.push([G,Y])});let H=T.current;S().sort((G,$)=>{var Y,F;let O=G.getAttribute("id"),W=$.getAttribute("id");return((Y=D.get(W))!=null?Y:0)-((F=D.get(O))!=null?F:0)}).forEach(G=>{let $=G.closest(ng);$?$.appendChild(G.parentElement===$?G:G.closest(`${ng} > *`)):H.appendChild(G.parentElement===H?G:G.closest(`${ng} > *`))}),V.sort((G,$)=>$[1]-G[1]).forEach(G=>{var $;let Y=($=T.current)==null?void 0:$.querySelector(`${Wc}[${wl}="${encodeURIComponent(G[0])}"]`);Y==null||Y.parentElement.appendChild(Y)})}function q(){let D=S().find(H=>H.getAttribute("aria-disabled")!=="true"),V=D==null?void 0:D.getAttribute(wl);U.setState("value",V||void 0)}function z(){var D,V,H,G;if(!s.current.search||d.current.shouldFilter===!1){s.current.filtered.count=n.current.size;return}s.current.filtered.groups=new Set;let $=0;for(let Y of n.current){let F=(V=(D=o.current.get(Y))==null?void 0:D.value)!=null?V:"",O=(G=(H=o.current.get(Y))==null?void 0:H.keywords)!=null?G:[],W=P(F,O);s.current.filtered.items.set(Y,W),W>0&&$++}for(let[Y,F]of c.current)for(let O of F)if(s.current.filtered.items.get(O)>0){s.current.filtered.groups.add(Y);break}s.current.filtered.count=$}function k(){var D,V,H;let G=R();G&&(((D=G.parentElement)==null?void 0:D.firstChild)===G&&((H=(V=G.closest(Wc))==null?void 0:V.querySelector(jB))==null||H.scrollIntoView({block:"nearest"})),G.scrollIntoView({block:"nearest"}))}function R(){var D;return(D=T.current)==null?void 0:D.querySelector(`${k5}[aria-selected="true"]`)}function S(){var D;return Array.from(((D=T.current)==null?void 0:D.querySelectorAll(t2))||[])}function w(D){let V=S()[D];V&&U.setState("value",V.getAttribute(wl))}function _(D){var V;let H=R(),G=S(),$=G.findIndex(F=>F===H),Y=G[$+D];(V=d.current)!=null&&V.loop&&(Y=$+D<0?G[G.length-1]:$+D===G.length?G[0]:G[$+D]),Y&&U.setState("value",Y.getAttribute(wl))}function j(D){let V=R(),H=V==null?void 0:V.closest(Wc),G;for(;H&&!G;)H=D>0?PB(H,Wc):MB(H,Wc),G=H==null?void 0:H.querySelector(t2);G?U.setState("value",G.getAttribute(wl)):_(D)}let N=()=>w(S().length-1),E=D=>{D.preventDefault(),D.metaKey?N():D.altKey?j(1):_(1)},I=D=>{D.preventDefault(),D.metaKey?w(0):D.altKey?j(-1):_(-1)};return A.createElement(Dt.div,{ref:r,tabIndex:-1,...v,"cmdk-root":"",onKeyDown:D=>{var V;(V=v.onKeyDown)==null||V.call(v,D);let H=D.nativeEvent.isComposing||D.keyCode===229;if(!(D.defaultPrevented||H))switch(D.key){case"n":case"j":{g&&D.ctrlKey&&E(D);break}case"ArrowDown":{E(D);break}case"p":case"k":{g&&D.ctrlKey&&I(D);break}case"ArrowUp":{I(D);break}case"Home":{D.preventDefault(),w(0);break}case"End":{D.preventDefault(),N();break}case"Enter":{D.preventDefault();let G=R();if(G){let $=new Event(ex);G.dispatchEvent($)}}}}},A.createElement("label",{"cmdk-label":"",htmlFor:L.inputId,id:L.labelId,style:FB},l),Lm(t,D=>A.createElement(A5.Provider,{value:U},A.createElement(E5.Provider,{value:L},D))))}),NB=A.forwardRef((t,r)=>{var s,n;let c=Hr(),o=A.useRef(null),a=A.useContext(T5),d=Cu(),l=P5(t),i=(n=(s=l.current)==null?void 0:s.forceMount)!=null?n:a==null?void 0:a.forceMount;al(()=>{if(!i)return d.item(c,a==null?void 0:a.id)},[i]);let u=M5(c,o,[t.value,t.children,o],t.keywords),f=Tv(),h=uo(M=>M.value&&M.value===u.current),m=uo(M=>i||d.filter()===!1?!0:M.search?M.filtered.items.get(c)>0:!0);A.useEffect(()=>{let M=o.current;if(!(!M||t.disabled))return M.addEventListener(ex,p),()=>M.removeEventListener(ex,p)},[m,t.onSelect,t.disabled]);function p(){var M,U;x(),(U=(M=l.current).onSelect)==null||U.call(M,u.current)}function x(){f.setState("value",u.current,!0)}if(!m)return null;let{disabled:g,value:v,onSelect:y,forceMount:b,keywords:C,...T}=t;return A.createElement(Dt.div,{ref:oi(o,r),...T,id:c,"cmdk-item":"",role:"option","aria-disabled":!!g,"aria-selected":!!h,"data-disabled":!!g,"data-selected":!!h,onPointerMove:g||d.getDisablePointerSelection()?void 0:x,onClick:g?void 0:p},t.children)}),SB=A.forwardRef((t,r)=>{let{heading:s,children:n,forceMount:c,...o}=t,a=Hr(),d=A.useRef(null),l=A.useRef(null),i=Hr(),u=Cu(),f=uo(m=>c||u.filter()===!1?!0:m.search?m.filtered.groups.has(a):!0);al(()=>u.group(a),[]),M5(a,d,[t.value,t.heading,l]);let h=A.useMemo(()=>({id:a,forceMount:c}),[c]);return A.createElement(Dt.div,{ref:oi(d,r),...o,"cmdk-group":"",role:"presentation",hidden:f?void 0:!0},s&&A.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:i},s),Lm(t,m=>A.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":s?i:void 0},A.createElement(T5.Provider,{value:h},m))))}),CB=A.forwardRef((t,r)=>{let{alwaysRender:s,...n}=t,c=A.useRef(null),o=uo(a=>!a.search);return!s&&!o?null:A.createElement(Dt.div,{ref:oi(c,r),...n,"cmdk-separator":"",role:"separator"})}),kB=A.forwardRef((t,r)=>{let{onValueChange:s,...n}=t,c=t.value!=null,o=Tv(),a=uo(i=>i.search),d=uo(i=>i.selectedItemId),l=Cu();return A.useEffect(()=>{t.value!=null&&o.setState("search",t.value)},[t.value]),A.createElement(Dt.input,{ref:r,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":d,id:l.inputId,type:"text",value:c?t.value:a,onChange:i=>{c||o.setState("search",i.target.value),s==null||s(i.target.value)}})}),EB=A.forwardRef((t,r)=>{let{children:s,label:n="Suggestions",...c}=t,o=A.useRef(null),a=A.useRef(null),d=uo(i=>i.selectedItemId),l=Cu();return A.useEffect(()=>{if(a.current&&o.current){let i=a.current,u=o.current,f,h=new ResizeObserver(()=>{f=requestAnimationFrame(()=>{let m=i.offsetHeight;u.style.setProperty("--cmdk-list-height",m.toFixed(1)+"px")})});return h.observe(i),()=>{cancelAnimationFrame(f),h.unobserve(i)}}},[]),A.createElement(Dt.div,{ref:oi(o,r),...c,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":d,"aria-label":n,id:l.listId},Lm(t,i=>A.createElement("div",{ref:oi(a,l.listInnerRef),"cmdk-list-sizer":""},i)))}),AB=A.forwardRef((t,r)=>{let{open:s,onOpenChange:n,overlayClassName:c,contentClassName:o,container:a,...d}=t;return A.createElement(xv,{open:s,onOpenChange:n},A.createElement(yv,{container:a},A.createElement(Em,{"cmdk-overlay":"",className:c}),A.createElement(Am,{"aria-label":t.label,"cmdk-dialog":"",className:o},A.createElement(R5,{ref:r,...d}))))}),TB=A.forwardRef((t,r)=>uo(s=>s.filtered.count===0)?A.createElement(Dt.div,{ref:r,...t,"cmdk-empty":"",role:"presentation"}):null),RB=A.forwardRef((t,r)=>{let{progress:s,children:n,label:c="Loading...",...o}=t;return A.createElement(Dt.div,{ref:r,...o,"cmdk-loading":"",role:"progressbar","aria-valuenow":s,"aria-valuemin":0,"aria-valuemax":100,"aria-label":c},Lm(t,a=>A.createElement("div",{"aria-hidden":!0},a)))}),Rn=Object.assign(R5,{List:EB,Item:NB,Input:kB,Group:SB,Separator:CB,Dialog:AB,Empty:TB,Loading:RB});function PB(t,r){let s=t.nextElementSibling;for(;s;){if(s.matches(r))return s;s=s.nextElementSibling}}function MB(t,r){let s=t.previousElementSibling;for(;s;){if(s.matches(r))return s;s=s.previousElementSibling}}function P5(t){let r=A.useRef(t);return al(()=>{r.current=t}),r}var al=typeof window>"u"?A.useEffect:A.useLayoutEffect;function jl(t){let r=A.useRef();return r.current===void 0&&(r.current=t()),r}function uo(t){let r=Tv(),s=()=>t(r.snapshot());return A.useSyncExternalStore(r.subscribe,s,s)}function M5(t,r,s,n=[]){let c=A.useRef(),o=Cu();return al(()=>{var a;let d=(()=>{var i;for(let u of s){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(i=u.current.textContent)==null?void 0:i.trim():c.current}})(),l=n.map(i=>i.trim());o.value(t,d,l),(a=r.current)==null||a.setAttribute(wl,d),c.current=d}),c}var IB=()=>{let[t,r]=A.useState(),s=jl(()=>new Map);return al(()=>{s.current.forEach(n=>n()),s.current=new Map},[t]),(n,c)=>{s.current.set(n,c),r({})}};function OB(t){let r=t.type;return typeof r=="function"?r(t.props):"render"in r?r.render(t.props):t}function Lm({asChild:t,children:r},s){return t&&A.isValidElement(r)?A.cloneElement(OB(r),{ref:r.ref},s(r.props.children)):s(r)}var FB={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const I5=A.forwardRef(({className:t,...r},s)=>e.jsx(Rn,{ref:s,className:Ot("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...r}));I5.displayName=Rn.displayName;const O5=A.forwardRef(({className:t,...r},s)=>e.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[e.jsx(hn,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx(Rn.Input,{ref:s,className:Ot("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...r})]}));O5.displayName=Rn.Input.displayName;const F5=A.forwardRef(({className:t,...r},s)=>e.jsx(Rn.List,{ref:s,className:Ot("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...r}));F5.displayName=Rn.List.displayName;const L5=A.forwardRef((t,r)=>e.jsx(Rn.Empty,{ref:r,className:"py-6 text-center text-sm",...t}));L5.displayName=Rn.Empty.displayName;const D5=A.forwardRef(({className:t,...r},s)=>e.jsx(Rn.Group,{ref:s,className:Ot("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...r}));D5.displayName=Rn.Group.displayName;const LB=A.forwardRef(({className:t,...r},s)=>e.jsx(Rn.Separator,{ref:s,className:Ot("-mx-1 h-px bg-border",t),...r}));LB.displayName=Rn.Separator.displayName;const $5=A.forwardRef(({className:t,...r},s)=>e.jsx(Rn.Item,{ref:s,className:Ot("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r}));$5.displayName=Rn.Item.displayName;var Dm="Popover",[B5,uH]=nn(Dm,[Ec]),ku=Ec(),[DB,_o]=B5(Dm),z5=t=>{const{__scopePopover:r,children:s,open:n,defaultOpen:c,onOpenChange:o,modal:a=!1}=t,d=ku(r),l=A.useRef(null),[i,u]=A.useState(!1),[f,h]=$a({prop:n,defaultProp:c??!1,onChange:o,caller:Dm});return e.jsx(Ay,{...d,children:e.jsx(DB,{scope:r,contentId:Hr(),triggerRef:l,open:f,onOpenChange:h,onOpenToggle:A.useCallback(()=>h(m=>!m),[h]),hasCustomAnchor:i,onCustomAnchorAdd:A.useCallback(()=>u(!0),[]),onCustomAnchorRemove:A.useCallback(()=>u(!1),[]),modal:a,children:s})})};z5.displayName=Dm;var U5="PopoverAnchor",$B=A.forwardRef((t,r)=>{const{__scopePopover:s,...n}=t,c=_o(U5,s),o=ku(s),{onCustomAnchorAdd:a,onCustomAnchorRemove:d}=c;return A.useEffect(()=>(a(),()=>d()),[a,d]),e.jsx(dm,{...o,...n,ref:r})});$B.displayName=U5;var V5="PopoverTrigger",q5=A.forwardRef((t,r)=>{const{__scopePopover:s,...n}=t,c=_o(V5,s),o=ku(s),a=bs(r,c.triggerRef),d=e.jsx(Dt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":c.open,"aria-controls":c.contentId,"data-state":Y5(c.open),...n,ref:a,onClick:It(t.onClick,c.onOpenToggle)});return c.hasCustomAnchor?d:e.jsx(dm,{asChild:!0,...o,children:d})});q5.displayName=V5;var Rv="PopoverPortal",[BB,zB]=B5(Rv,{forceMount:void 0}),H5=t=>{const{__scopePopover:r,forceMount:s,children:n,container:c}=t,o=_o(Rv,r);return e.jsx(BB,{scope:r,forceMount:s,children:e.jsx(Tn,{present:s||o.open,children:e.jsx(Ac,{asChild:!0,container:c,children:n})})})};H5.displayName=Rv;var yc="PopoverContent",W5=A.forwardRef((t,r)=>{const s=zB(yc,t.__scopePopover),{forceMount:n=s.forceMount,...c}=t,o=_o(yc,t.__scopePopover);return e.jsx(Tn,{present:n||o.open,children:o.modal?e.jsx(VB,{...c,ref:r}):e.jsx(qB,{...c,ref:r})})});W5.displayName=yc;var UB=to("PopoverContent.RemoveScroll"),VB=A.forwardRef((t,r)=>{const s=_o(yc,t.__scopePopover),n=A.useRef(null),c=bs(r,n),o=A.useRef(!1);return A.useEffect(()=>{const a=n.current;if(a)return um(a)},[]),e.jsx(fm,{as:UB,allowPinchZoom:!0,children:e.jsx(G5,{...t,ref:c,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:It(t.onCloseAutoFocus,a=>{var d;a.preventDefault(),o.current||(d=s.triggerRef.current)==null||d.focus()}),onPointerDownOutside:It(t.onPointerDownOutside,a=>{const d=a.detail.originalEvent,l=d.button===0&&d.ctrlKey===!0,i=d.button===2||l;o.current=i},{checkForDefaultPrevented:!1}),onFocusOutside:It(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),qB=A.forwardRef((t,r)=>{const s=_o(yc,t.__scopePopover),n=A.useRef(!1),c=A.useRef(!1);return e.jsx(G5,{...t,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var a,d;(a=t.onCloseAutoFocus)==null||a.call(t,o),o.defaultPrevented||(n.current||(d=s.triggerRef.current)==null||d.focus(),o.preventDefault()),n.current=!1,c.current=!1},onInteractOutside:o=>{var l,i;(l=t.onInteractOutside)==null||l.call(t,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(c.current=!0));const a=o.target;((i=s.triggerRef.current)==null?void 0:i.contains(a))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&c.current&&o.preventDefault()}})}),G5=A.forwardRef((t,r)=>{const{__scopePopover:s,trapFocus:n,onOpenAutoFocus:c,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEscapeKeyDown:d,onPointerDownOutside:l,onFocusOutside:i,onInteractOutside:u,...f}=t,h=_o(yc,s),m=ku(s);return im(),e.jsx(pu,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:c,onUnmountAutoFocus:o,children:e.jsx(Sc,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:u,onEscapeKeyDown:d,onPointerDownOutside:l,onFocusOutside:i,onDismiss:()=>h.onOpenChange(!1),children:e.jsx(Ty,{"data-state":Y5(h.open),role:"dialog",id:h.contentId,...m,...f,ref:r,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),K5="PopoverClose",HB=A.forwardRef((t,r)=>{const{__scopePopover:s,...n}=t,c=_o(K5,s);return e.jsx(Dt.button,{type:"button",...n,ref:r,onClick:It(t.onClick,()=>c.onOpenChange(!1))})});HB.displayName=K5;var WB="PopoverArrow",GB=A.forwardRef((t,r)=>{const{__scopePopover:s,...n}=t,c=ku(s);return e.jsx(Ry,{...c,...n,ref:r})});GB.displayName=WB;function Y5(t){return t?"open":"closed"}var KB=z5,YB=q5,QB=H5,Q5=W5;const X5=KB,Z5=YB,Pv=A.forwardRef(({className:t,align:r="center",sideOffset:s=4,...n},c)=>e.jsx(QB,{children:e.jsx(Q5,{ref:c,align:r,sideOffset:s,className:Ot("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));Pv.displayName=Q5.displayName;const _d=[{code:"IN",name:"India",timezone:"Asia/Kolkata",flag:""},{code:"US",name:"United States",timezone:"America/New_York",flag:""},{code:"CA",name:"Canada",timezone:"America/Toronto",flag:""},{code:"GB",name:"United Kingdom",timezone:"Europe/London",flag:""},{code:"DE",name:"Germany",timezone:"Europe/Berlin",flag:""},{code:"FR",name:"France",timezone:"Europe/Paris",flag:""},{code:"AU",name:"Australia",timezone:"Australia/Sydney",flag:""},{code:"JP",name:"Japan",timezone:"Asia/Tokyo",flag:""},{code:"CN",name:"China",timezone:"Asia/Shanghai",flag:""},{code:"KR",name:"South Korea",timezone:"Asia/Seoul",flag:""},{code:"SG",name:"Singapore",timezone:"Asia/Singapore",flag:""},{code:"BR",name:"Brazil",timezone:"America/Sao_Paulo",flag:""},{code:"MX",name:"Mexico",timezone:"America/Mexico_City",flag:""},{code:"ZA",name:"South Africa",timezone:"Africa/Johannesburg",flag:""},{code:"RU",name:"Russia",timezone:"Europe/Moscow",flag:""},{code:"IT",name:"Italy",timezone:"Europe/Rome",flag:""},{code:"ES",name:"Spain",timezone:"Europe/Madrid",flag:""},{code:"NL",name:"Netherlands",timezone:"Europe/Amsterdam",flag:""},{code:"SE",name:"Sweden",timezone:"Europe/Stockholm",flag:""},{code:"NO",name:"Norway",timezone:"Europe/Oslo",flag:""},{code:"DK",name:"Denmark",timezone:"Europe/Copenhagen",flag:""},{code:"FI",name:"Finland",timezone:"Europe/Helsinki",flag:""},{code:"PL",name:"Poland",timezone:"Europe/Warsaw",flag:""},{code:"CZ",name:"Czech Republic",timezone:"Europe/Prague",flag:""},{code:"HU",name:"Hungary",timezone:"Europe/Budapest",flag:""},{code:"AT",name:"Austria",timezone:"Europe/Vienna",flag:""},{code:"CH",name:"Switzerland",timezone:"Europe/Zurich",flag:""},{code:"BE",name:"Belgium",timezone:"Europe/Brussels",flag:""},{code:"IE",name:"Ireland",timezone:"Europe/Dublin",flag:""},{code:"PT",name:"Portugal",timezone:"Europe/Lisbon",flag:""},{code:"GR",name:"Greece",timezone:"Europe/Athens",flag:""},{code:"TR",name:"Turkey",timezone:"Europe/Istanbul",flag:""},{code:"UA",name:"Ukraine",timezone:"Europe/Kiev",flag:""},{code:"RO",name:"Romania",timezone:"Europe/Bucharest",flag:""},{code:"BG",name:"Bulgaria",timezone:"Europe/Sofia",flag:""},{code:"HR",name:"Croatia",timezone:"Europe/Zagreb",flag:""},{code:"SI",name:"Slovenia",timezone:"Europe/Ljubljana",flag:""},{code:"SK",name:"Slovakia",timezone:"Europe/Bratislava",flag:""},{code:"LT",name:"Lithuania",timezone:"Europe/Vilnius",flag:""},{code:"LV",name:"Latvia",timezone:"Europe/Riga",flag:""},{code:"EE",name:"Estonia",timezone:"Europe/Tallinn",flag:""},{code:"IS",name:"Iceland",timezone:"Atlantic/Reykjavik",flag:""},{code:"MT",name:"Malta",timezone:"Europe/Malta",flag:""},{code:"CY",name:"Cyprus",timezone:"Asia/Nicosia",flag:""},{code:"LU",name:"Luxembourg",timezone:"Europe/Luxembourg",flag:""},{code:"MC",name:"Monaco",timezone:"Europe/Monaco",flag:""},{code:"LI",name:"Liechtenstein",timezone:"Europe/Vaduz",flag:""},{code:"AD",name:"Andorra",timezone:"Europe/Andorra",flag:""},{code:"SM",name:"San Marino",timezone:"Europe/San_Marino",flag:""},{code:"VA",name:"Vatican City",timezone:"Europe/Vatican",flag:""},{code:"AL",name:"Albania",timezone:"Europe/Tirane",flag:""},{code:"BA",name:"Bosnia and Herzegovina",timezone:"Europe/Sarajevo",flag:""},{code:"ME",name:"Montenegro",timezone:"Europe/Podgorica",flag:""},{code:"MK",name:"North Macedonia",timezone:"Europe/Skopje",flag:""},{code:"RS",name:"Serbia",timezone:"Europe/Belgrade",flag:""},{code:"XK",name:"Kosovo",timezone:"Europe/Belgrade",flag:""},{code:"MD",name:"Moldova",timezone:"Europe/Chisinau",flag:""},{code:"GE",name:"Georgia",timezone:"Asia/Tbilisi",flag:""},{code:"AM",name:"Armenia",timezone:"Asia/Yerevan",flag:""},{code:"AZ",name:"Azerbaijan",timezone:"Asia/Baku",flag:""},{code:"KZ",name:"Kazakhstan",timezone:"Asia/Almaty",flag:""},{code:"UZ",name:"Uzbekistan",timezone:"Asia/Tashkent",flag:""},{code:"KG",name:"Kyrgyzstan",timezone:"Asia/Bishkek",flag:""},{code:"TJ",name:"Tajikistan",timezone:"Asia/Dushanbe",flag:""},{code:"TM",name:"Turkmenistan",timezone:"Asia/Ashgabat",flag:""},{code:"MN",name:"Mongolia",timezone:"Asia/Ulaanbaatar",flag:""},{code:"VN",name:"Vietnam",timezone:"Asia/Ho_Chi_Minh",flag:""},{code:"TH",name:"Thailand",timezone:"Asia/Bangkok",flag:""},{code:"MY",name:"Malaysia",timezone:"Asia/Kuala_Lumpur",flag:""},{code:"ID",name:"Indonesia",timezone:"Asia/Jakarta",flag:""},{code:"PH",name:"Philippines",timezone:"Asia/Manila",flag:""},{code:"MM",name:"Myanmar",timezone:"Asia/Yangon",flag:""},{code:"KH",name:"Cambodia",timezone:"Asia/Phnom_Penh",flag:""},{code:"LA",name:"Laos",timezone:"Asia/Vientiane",flag:""},{code:"BN",name:"Brunei",timezone:"Asia/Brunei",flag:""},{code:"TL",name:"East Timor",timezone:"Asia/Dili",flag:""},{code:"PG",name:"Papua New Guinea",timezone:"Pacific/Port_Moresby",flag:""},{code:"FJ",name:"Fiji",timezone:"Pacific/Fiji",flag:""},{code:"NZ",name:"New Zealand",timezone:"Pacific/Auckland",flag:""},{code:"VU",name:"Vanuatu",timezone:"Pacific/Efate",flag:""},{code:"SB",name:"Solomon Islands",timezone:"Pacific/Guadalcanal",flag:""},{code:"NC",name:"New Caledonia",timezone:"Pacific/Noumea",flag:""},{code:"PF",name:"French Polynesia",timezone:"Pacific/Tahiti",flag:""},{code:"WS",name:"Samoa",timezone:"Pacific/Apia",flag:""},{code:"TO",name:"Tonga",timezone:"Pacific/Tongatapu",flag:""},{code:"CK",name:"Cook Islands",timezone:"Pacific/Rarotonga",flag:""},{code:"NU",name:"Niue",timezone:"Pacific/Niue",flag:""},{code:"TK",name:"Tokelau",timezone:"Pacific/Fakaofo",flag:""},{code:"TV",name:"Tuvalu",timezone:"Pacific/Funafuti",flag:""},{code:"KI",name:"Kiribati",timezone:"Pacific/Tarawa",flag:""},{code:"MH",name:"Marshall Islands",timezone:"Pacific/Majuro",flag:""},{code:"FM",name:"Micronesia",timezone:"Pacific/Pohnpei",flag:""},{code:"PW",name:"Palau",timezone:"Pacific/Palau",flag:""},{code:"NR",name:"Nauru",timezone:"Pacific/Nauru",flag:""},{code:"CL",name:"Chile",timezone:"America/Santiago",flag:""},{code:"AR",name:"Argentina",timezone:"America/Argentina/Buenos_Aires",flag:""},{code:"UY",name:"Uruguay",timezone:"America/Montevideo",flag:""},{code:"PY",name:"Paraguay",timezone:"America/Asuncion",flag:""},{code:"BO",name:"Bolivia",timezone:"America/La_Paz",flag:""},{code:"PE",name:"Peru",timezone:"America/Lima",flag:""},{code:"EC",name:"Ecuador",timezone:"America/Guayaquil",flag:""},{code:"CO",name:"Colombia",timezone:"America/Bogota",flag:""},{code:"VE",name:"Venezuela",timezone:"America/Caracas",flag:""},{code:"GY",name:"Guyana",timezone:"America/Guyana",flag:""},{code:"SR",name:"Suriname",timezone:"America/Paramaribo",flag:""},{code:"GF",name:"French Guiana",timezone:"America/Cayenne",flag:""},{code:"FK",name:"Falkland Islands",timezone:"Atlantic/Stanley",flag:""},{code:"GS",name:"South Georgia",timezone:"Atlantic/South_Georgia",flag:""},{code:"AQ",name:"Antarctica",timezone:"Antarctica/McMurdo",flag:""},{code:"GL",name:"Greenland",timezone:"America/Godthab",flag:""},{code:"FO",name:"Faroe Islands",timezone:"Atlantic/Faroe",flag:""},{code:"SJ",name:"Svalbard",timezone:"Arctic/Longyearbyen",flag:""},{code:"BV",name:"Bouvet Island",timezone:"Antarctica/Bouvet",flag:""},{code:"HM",name:"Heard Island",timezone:"Indian/Kerguelen",flag:""},{code:"TF",name:"French Southern Territories",timezone:"Indian/Kerguelen",flag:""},{code:"EG",name:"Egypt",timezone:"Africa/Cairo",flag:""},{code:"LY",name:"Libya",timezone:"Africa/Tripoli",flag:""},{code:"TN",name:"Tunisia",timezone:"Africa/Tunis",flag:""},{code:"DZ",name:"Algeria",timezone:"Africa/Algiers",flag:""},{code:"MA",name:"Morocco",timezone:"Africa/Casablanca",flag:""},{code:"EH",name:"Western Sahara",timezone:"Africa/El_Aaiun",flag:""},{code:"MR",name:"Mauritania",timezone:"Africa/Nouakchott",flag:""},{code:"SN",name:"Senegal",timezone:"Africa/Dakar",flag:""},{code:"GM",name:"Gambia",timezone:"Africa/Banjul",flag:""},{code:"GW",name:"Guinea-Bissau",timezone:"Africa/Bissau",flag:""},{code:"GN",name:"Guinea",timezone:"Africa/Conakry",flag:""},{code:"SL",name:"Sierra Leone",timezone:"Africa/Freetown",flag:""},{code:"LR",name:"Liberia",timezone:"Africa/Monrovia",flag:""},{code:"CI",name:"Ivory Coast",timezone:"Africa/Abidjan",flag:""},{code:"GH",name:"Ghana",timezone:"Africa/Accra",flag:""},{code:"TG",name:"Togo",timezone:"Africa/Lome",flag:""},{code:"BJ",name:"Benin",timezone:"Africa/Porto-Novo",flag:""},{code:"NG",name:"Nigeria",timezone:"Africa/Lagos",flag:""},{code:"NE",name:"Niger",timezone:"Africa/Niamey",flag:""},{code:"BF",name:"Burkina Faso",timezone:"Africa/Ouagadougou",flag:""},{code:"ML",name:"Mali",timezone:"Africa/Bamako",flag:""},{code:"TD",name:"Chad",timezone:"Africa/Ndjamena",flag:""},{code:"CF",name:"Central African Republic",timezone:"Africa/Bangui",flag:""},{code:"CM",name:"Cameroon",timezone:"Africa/Douala",flag:""},{code:"GQ",name:"Equatorial Guinea",timezone:"Africa/Malabo",flag:""},{code:"GA",name:"Gabon",timezone:"Africa/Libreville",flag:""},{code:"CG",name:"Republic of the Congo",timezone:"Africa/Brazzaville",flag:""},{code:"CD",name:"Democratic Republic of the Congo",timezone:"Africa/Kinshasa",flag:""},{code:"AO",name:"Angola",timezone:"Africa/Luanda",flag:""},{code:"ZM",name:"Zambia",timezone:"Africa/Lusaka",flag:""},{code:"MW",name:"Malawi",timezone:"Africa/Blantyre",flag:""},{code:"MZ",name:"Mozambique",timezone:"Africa/Maputo",flag:""},{code:"ZW",name:"Zimbabwe",timezone:"Africa/Harare",flag:""},{code:"BW",name:"Botswana",timezone:"Africa/Gaborone",flag:""},{code:"NA",name:"Namibia",timezone:"Africa/Windhoek",flag:""},{code:"LS",name:"Lesotho",timezone:"Africa/Maseru",flag:""},{code:"SZ",name:"Eswatini",timezone:"Africa/Mbabane",flag:""},{code:"MG",name:"Madagascar",timezone:"Indian/Antananarivo",flag:""},{code:"KM",name:"Comoros",timezone:"Indian/Comoro",flag:""},{code:"YT",name:"Mayotte",timezone:"Indian/Mayotte",flag:""},{code:"SC",name:"Seychelles",timezone:"Indian/Mahe",flag:""},{code:"MU",name:"Mauritius",timezone:"Indian/Mauritius",flag:""},{code:"RE",name:"Reunion",timezone:"Indian/Reunion",flag:""},{code:"SH",name:"Saint Helena",timezone:"Atlantic/St_Helena",flag:""},{code:"CV",name:"Cape Verde",timezone:"Atlantic/Cape_Verde",flag:""},{code:"ST",name:"Sao Tome and Principe",timezone:"Africa/Sao_Tome",flag:""}];function J5({value:t,onValueChange:r,placeholder:s="Select country..."}){const[n,c]=A.useState(!1),[o,a]=A.useState(""),d=A.useMemo(()=>o?_d.filter(i=>i.name.toLowerCase().includes(o.toLowerCase())||i.code.toLowerCase().includes(o.toLowerCase())):_d,[o]),l=_d.find(i=>i.name===t);return e.jsxs(X5,{open:n,onOpenChange:c,children:[e.jsx(Z5,{asChild:!0,children:e.jsxs(ee,{variant:"outline",role:"combobox","aria-expanded":n,className:"w-full justify-between",children:[l?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:l.flag}),e.jsx("span",{children:l.name})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gy,{className:"h-4 w-4"}),e.jsx("span",{children:s})]}),e.jsx(D7,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(Pv,{className:"w-full p-0",align:"start",children:e.jsxs(I5,{children:[e.jsx(O5,{placeholder:"Search countries...",value:o,onValueChange:a}),e.jsxs(F5,{children:[e.jsx(L5,{children:"No country found."}),e.jsx(D5,{children:d.map(i=>e.jsxs($5,{value:i.name,onSelect:()=>{r(i.name),c(!1),a("")},children:[e.jsx(hu,{className:Ot("mr-2 h-4 w-4",t===i.name?"opacity-100":"opacity-0")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:i.flag}),e.jsx("span",{children:i.name})]})]},i.code))})]})]})})]})}const XB=t=>{const r=_d.find(s=>s.name===t);return r?r.timezone:"UTC"},ZB=t=>{const r=_d.find(s=>s.timezone===t);return r?r.name:null},JB=()=>{const{user:t,updateUser:r}=qs(),{toast:s}=Js(),[n,c]=A.useState(!1),[o,a]=A.useState(!1),[d,l]=A.useState(!1),[i,u]=A.useState(!1),[f,h]=A.useState(!1),[m,p]=A.useState({name:"",phone:"",avatar_url:"",department:"",student_id:"",country:""}),[x,g]=A.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[v,y]=A.useState({});A.useEffect(()=>{t&&p({name:t.name||"",phone:t.phone||"",avatar_url:t.avatar_url||"",department:t.department||"",student_id:t.student_id||"",country:t.country||""})},[t]);const b=z=>{const{name:k,value:R}=z.target;p(S=>({...S,[k]:R})),v[k]&&y(S=>({...S,[k]:""}))},C=z=>{const{name:k,value:R}=z.target;g(S=>({...S,[k]:R})),v[k]&&y(S=>({...S,[k]:""}))},T=z=>{const k=z.target.files[0];if(k){if(!["image/jpeg","image/png","image/gif","image/webp"].includes(k.type)){s({variant:"destructive",title:"Invalid file type",description:"Please select a valid image file (JPEG, PNG, GIF, or WebP)"});return}if(k.size>5242880){s({variant:"destructive",title:"File too large",description:"Please select an image smaller than 5MB"});return}const w=new FileReader;w.onloadend=()=>{p(_=>({..._,avatar_url:w.result}))},w.readAsDataURL(k)}},M=()=>{const z={};return m.name.trim()?m.name.trim().length<2&&(z.name="Name must be at least 2 characters long"):z.name="Name is required",m.phone&&!/^[\+]?[1-9][\d]{0,15}$/.test(m.phone.replace(/\s/g,""))&&(z.phone="Please enter a valid phone number"),m.student_id&&m.student_id.trim().length<3&&(z.student_id="Student ID must be at least 3 characters long"),y(z),Object.keys(z).length===0},U=()=>{const z={};return(x.newPassword||x.confirmPassword||x.currentPassword)&&(x.currentPassword||(z.currentPassword="Current password is required"),x.newPassword?x.newPassword.length<6&&(z.newPassword="Password must be at least 6 characters long"):z.newPassword="New password is required",x.confirmPassword?x.newPassword!==x.confirmPassword&&(z.confirmPassword="Passwords do not match"):z.confirmPassword="Please confirm your new password"),y(k=>({...k,...z})),Object.keys(z).length===0},L=async z=>{if(z.preventDefault(),!M()){s({variant:"destructive",title:"Validation Error",description:"Please fix the errors in the form"});return}if(x.newPassword&&!U()){s({variant:"destructive",title:"Password Validation Error",description:"Please fix the password errors"});return}a(!0);try{const k=await Pe.updateProfile(m);k.success&&(r(k.data),s({title:"Profile Updated",description:"Your profile has been updated successfully"})),x.newPassword&&(await Pe.changePassword({currentPassword:x.currentPassword,newPassword:x.newPassword})).success&&(s({title:"Password Changed",description:"Your password has been changed successfully"}),g({currentPassword:"",newPassword:"",confirmPassword:""})),c(!1)}catch(k){console.error("Profile update error:",k),s({variant:"destructive",title:"Update Failed",description:k.message||"Failed to update profile"})}finally{a(!1)}},P=()=>{c(!1),p({name:t.name||"",phone:t.phone||"",avatar_url:t.avatar_url||"",department:t.department||"",student_id:t.student_id||""}),g({currentPassword:"",newPassword:"",confirmPassword:""}),y({})},B=z=>{if(!z)return"U";const k=z.split(" ");return k.length===1?k[0].charAt(0).toUpperCase():k[0].charAt(0).toUpperCase()+k[k.length-1].charAt(0).toUpperCase()},q=z=>({"super-admin":"Super Administrator","college-admin":"College Administrator",faculty:"Faculty Member",student:"Student"})[z]||z;return t?e.jsx(os.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-4xl mx-auto space-y-6",children:e.jsxs("div",{className:"grid gap-8 md:grid-cols-3",children:[e.jsx("div",{className:"md:col-span-1",children:e.jsxs(Re,{className:"shadow-2xl glassmorphic",children:[e.jsxs(lt,{className:"text-center",children:[e.jsxs(os.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.1,type:"spring",stiffness:260,damping:20},className:"relative w-32 h-32 mx-auto",children:[e.jsxs(Jd,{className:"w-32 h-32 mx-auto border-4 border-primary shadow-lg",children:[e.jsx(eu,{src:m.avatar_url||`https://avatar.vercel.sh/${t.email}.png`,alt:t.name}),e.jsx(tu,{className:"text-4xl",children:B(t.name)})]}),n&&e.jsxs("label",{htmlFor:"avatarUpload",className:"absolute bottom-0 right-0 bg-primary text-primary-foreground p-2 rounded-full cursor-pointer hover:bg-primary/80 transition-colors",children:[e.jsx(fy,{size:18}),e.jsx("input",{id:"avatarUpload",type:"file",accept:"image/*",className:"hidden",onChange:T})]})]}),e.jsx(mt,{className:"text-2xl font-bold mt-4 bg-clip-text text-transparent bg-gradient-to-r from-primary via-purple-500 to-pink-500",children:t.name||"User Profile"}),e.jsx(ts,{className:"text-sm",children:t.email}),e.jsx(et,{variant:"secondary",className:"mt-2",children:q(t.role)})]}),e.jsxs(De,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Member since"}),e.jsx("p",{className:"font-medium",children:t.created_at?new Date(t.created_at).toLocaleDateString():"N/A"})]}),!n&&e.jsxs(ee,{onClick:()=>c(!0),className:"w-full bg-gradient-to-r from-primary to-purple-600 hover:from-primary/90 hover:to-purple-600/90",children:[e.jsx(Bn,{className:"mr-2 h-4 w-4"})," Edit Profile"]})]})]})}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs(Re,{className:"shadow-2xl glassmorphic",children:[e.jsxs(lt,{children:[e.jsx(mt,{className:"text-2xl font-bold",children:n?"Edit Profile Information":"Profile Information"}),e.jsx(ts,{children:n?"Update your personal information and settings":"View your profile information"})]}),e.jsx(De,{children:e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[e.jsx(Da,{className:"mr-2 h-4 w-4"}),"Basic Information"]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"name",children:"Full Name *"}),e.jsx(Ye,{id:"name",name:"name",type:"text",value:m.name,onChange:b,disabled:!n,className:`mt-1 ${v.name?"border-red-500":""}`,placeholder:"Enter your full name"}),v.name&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:v.name})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"email",children:"Email Address"}),e.jsx(Ye,{id:"email",name:"email",type:"email",value:t.email,disabled:!0,className:"mt-1 bg-muted/50 cursor-not-allowed"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Email cannot be changed"})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"phone",children:"Phone Number"}),e.jsx(Ye,{id:"phone",name:"phone",type:"tel",value:m.phone,onChange:b,disabled:!n,className:`mt-1 ${v.phone?"border-red-500":""}`,placeholder:"Enter your phone number"}),v.phone&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:v.phone})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"department",children:"Department"}),e.jsx(Ye,{id:"department",name:"department",type:"text",value:m.department,onChange:b,disabled:!n,placeholder:"Enter your department"})]}),t.role==="student"&&e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"student_id",children:"Student ID"}),e.jsx(Ye,{id:"student_id",name:"student_id",type:"text",value:m.student_id,onChange:b,disabled:!n,className:`mt-1 ${v.student_id?"border-red-500":""}`,placeholder:"Enter your student ID"}),v.student_id&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:v.student_id})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"country",children:"Country"}),e.jsx(J5,{value:m.country,onValueChange:z=>{p(k=>({...k,country:z})),v.country&&y(k=>({...k,country:""}))},placeholder:"Select your country"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Used for timezone calculations in assessments"}),v.country&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:v.country})]})]})]}),n&&e.jsxs(e.Fragment,{children:[e.jsx(xc,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[e.jsx(v0,{className:"mr-2 h-4 w-4"}),"Change Password"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Leave password fields blank if you don't want to change your password"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"currentPassword",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ye,{id:"currentPassword",name:"currentPassword",type:d?"text":"password",value:x.currentPassword,onChange:C,className:`mt-1 ${v.currentPassword?"border-red-500":""}`,placeholder:"Enter current password"}),e.jsx(ee,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>l(!d),children:d?e.jsx(Wo,{className:"h-4 w-4"}):e.jsx(Ss,{className:"h-4 w-4"})})]}),v.currentPassword&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:v.currentPassword})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"newPassword",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ye,{id:"newPassword",name:"newPassword",type:i?"text":"password",value:x.newPassword,onChange:C,className:`mt-1 ${v.newPassword?"border-red-500":""}`,placeholder:"Enter new password"}),e.jsx(ee,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>u(!i),children:i?e.jsx(Wo,{className:"h-4 w-4"}):e.jsx(Ss,{className:"h-4 w-4"})})]}),v.newPassword&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:v.newPassword})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"confirmPassword",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ye,{id:"confirmPassword",name:"confirmPassword",type:f?"text":"password",value:x.confirmPassword,onChange:C,className:`mt-1 ${v.confirmPassword?"border-red-500":""}`,placeholder:"Confirm new password"}),e.jsx(ee,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>h(!f),children:f?e.jsx(Wo,{className:"h-4 w-4"}):e.jsx(Ss,{className:"h-4 w-4"})})]}),v.confirmPassword&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:v.confirmPassword})]})]})]})]}),n&&e.jsxs(Sm,{className:"flex justify-end gap-3 p-0 pt-6",children:[e.jsxs(ee,{type:"button",variant:"outline",onClick:P,disabled:o,children:[e.jsx(Dn,{className:"mr-2 h-4 w-4"}),"Cancel"]}),e.jsx(ee,{type:"submit",disabled:o,className:"bg-gradient-to-r from-primary to-purple-600 hover:from-primary/90 hover:to-purple-600/90",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(no,{className:"mr-2 h-4 w-4"}),"Save Changes"]})})]})]})})]})})]})}):e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading user profile..."})]})})},ez=()=>{const t=[{icon:e.jsx(as,{className:"h-12 w-12 text-primary"}),title:"Multi-Tenant Architecture",description:"Separate portals for each college, ensuring data isolation and custom branding capabilities.",category:"Platform"},{icon:e.jsx(f9,{className:"h-12 w-12 text-primary"}),title:"Role-Based Access Control",description:"Granular permissions for Super Admins, College Admins, Faculty, and Students.",category:"Security"},{icon:e.jsx(Gr,{className:"h-12 w-12 text-primary"}),title:"Interactive Learning Tools",description:"Engage students with interactive assessments, multimedia content, and real-time feedback systems.",category:"Academics"},{icon:e.jsx(nm,{className:"h-12 w-12 text-primary"}),title:"Advanced Assessment Platform",description:"Create diverse assessments including quizzes, assignments, and interactive learning modules.",category:"Engagement"},{icon:e.jsx(Rr,{className:"h-12 w-12 text-primary"}),title:"Advanced Analytics & Reporting",description:"Track student activity, assessment performance, and faculty contributions with detailed dashboards.",category:"Insights"},{icon:e.jsx(c9,{className:"h-12 w-12 text-primary"}),title:"Scalable Infrastructure",description:"Designed to handle thousands of concurrent users, ensuring smooth performance during peak times.",category:"Platform"},{icon:e.jsx(r9,{className:"h-12 w-12 text-primary"}),title:"Customizable Themes & Branding",description:"Colleges can personalize their portal with their own branding, logos, and color schemes.",category:"Customization"},{icon:e.jsx(tN,{className:"h-12 w-12 text-primary"}),title:"Communication Tools",description:"Facilitate interaction with announcements, discussion forums, and direct messaging capabilities.",category:"Engagement"}],r={hidden:{opacity:0,scale:.9},visible:s=>({opacity:1,scale:1,transition:{delay:s*.05,duration:.4,ease:"easeOut"}})};return e.jsxs("div",{className:"py-12 md:py-20 px-4",children:[e.jsxs(os.section,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.7,ease:"easeOut"},className:"text-center mb-16",children:[e.jsxs("h1",{className:"text-4xl md:text-5xl font-extrabold mb-4 tracking-tight",children:["Powerful Features for a ",e.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-purple-600 via-pink-500 to-orange-400",children:"Transformative Learning Experience"})]}),e.jsx("p",{className:"text-lg md:text-xl text-muted-foreground max-w-3xl mx-auto",children:"EduHorizon LMS is packed with cutting-edge tools designed to empower educators and inspire students. Explore what makes our platform unique."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map((s,n)=>e.jsx(os.div,{custom:n,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.2},variants:r,children:e.jsxs(Re,{className:"h-full shadow-xl hover:shadow-2xl transition-all duration-300 ease-in-out transform hover:-translate-y-1 glassmorphic border-primary/20",children:[e.jsxs(lt,{className:"items-center text-center p-6",children:[e.jsx("div",{className:"p-4 bg-primary/10 rounded-full mb-4 inline-block",children:s.icon}),e.jsx(mt,{className:"text-2xl font-semibold",children:s.title}),e.jsx("span",{className:"text-xs font-medium text-primary bg-primary/10 px-2 py-0.5 rounded-full",children:s.category})]}),e.jsx(De,{className:"text-center p-6 pt-0",children:e.jsx(ts,{className:"text-base leading-relaxed",children:s.description})})]})},n))}),e.jsxs(os.section,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.7,delay:.5,ease:"easeOut"},className:"text-center mt-20",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6",children:"Ready to Experience the Future of Education?"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-xl mx-auto mb-8",children:"Join the growing number of institutions choosing EduHorizon LMS."}),e.jsxs("div",{className:"space-x-4",children:[e.jsx(ee,{size:"lg",className:"bg-gradient-to-r from-primary to-purple-600 hover:from-primary/90 hover:to-purple-600/90 text-primary-foreground shadow-lg transform hover:scale-105 transition-transform duration-300",asChild:!0,children:e.jsx(ks,{to:"/signup",children:"Get Started Now"})}),e.jsx(ee,{size:"lg",variant:"outline",asChild:!0,children:e.jsx(ks,{to:"/contact",children:"Request a Demo"})})]})]})]})};function dh(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var eC={exports:{}};/*! ExcelJS 19-10-2023 */(function(t,r){(function(s){t.exports=s()})(function(){return function s(n,c,o){function a(i,u){if(!c[i]){if(!n[i]){var f=typeof dh=="function"&&dh;if(!u&&f)return f(i,!0);if(d)return d(i,!0);var h=new Error("Cannot find module '"+i+"'");throw h.code="MODULE_NOT_FOUND",h}var m=c[i]={exports:{}};n[i][0].call(m.exports,function(p){return a(n[i][1][p]||p)},m,m.exports,s,n,c,o)}return c[i].exports}for(var d=typeof dh=="function"&&dh,l=0;l<o.length;l++)a(o[l]);return a}({1:[function(s,n,c){const o=s("fs"),a=s("fast-csv"),d=s("dayjs/plugin/customParseFormat"),l=s("dayjs/plugin/utc"),i=s("dayjs").extend(d).extend(l),u=s("../utils/stream-buf"),{fs:{exists:f}}=s("../utils/utils"),h={true:!0,false:!1,"#N/A":{error:"#N/A"},"#REF!":{error:"#REF!"},"#NAME?":{error:"#NAME?"},"#DIV/0!":{error:"#DIV/0!"},"#NULL!":{error:"#NULL!"},"#VALUE!":{error:"#VALUE!"},"#NUM!":{error:"#NUM!"}};n.exports=class{constructor(m){this.workbook=m,this.worksheet=null}async readFile(m,p){if(p=p||{},!await f(m))throw new Error("File not found: "+m);const x=o.createReadStream(m),g=await this.read(x,p);return x.close(),g}read(m,p){return p=p||{},new Promise((x,g)=>{const v=this.workbook.addWorksheet(p.sheetName),y=p.dateFormats||["YYYY-MM-DD[T]HH:mm:ssZ","YYYY-MM-DD[T]HH:mm:ss","MM-DD-YYYY","YYYY-MM-DD"],b=p.map||function(T){if(T==="")return null;const M=Number(T);if(!Number.isNaN(M)&&M!==1/0)return M;const U=y.reduce((P,B)=>{if(P)return P;const q=i(T,B,!0);return q.isValid()?q:null},null);if(U)return new Date(U.valueOf());const L=h[T];return L!==void 0?L:T},C=a.parse(p.parserOptions).on("data",T=>{v.addRow(T.map(b))}).on("end",()=>{C.emit("worksheet",v)});C.on("worksheet",x).on("error",g),m.pipe(C)})}createInputStream(){throw new Error("`CSV#createInputStream` is deprecated. You should use `CSV#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}write(m,p){return new Promise((x,g)=>{p=p||{};const v=this.workbook.getWorksheet(p.sheetName||p.sheetId),y=a.format(p.formatterOptions);m.on("finish",()=>{x()}),y.on("error",g),y.pipe(m);const{dateFormat:b,dateUTC:C}=p,T=p.map||(L=>{if(L){if(L.text||L.hyperlink)return L.hyperlink||L.text||"";if(L.formula||L.result)return L.result||"";if(L instanceof Date)return b?C?i.utc(L).format(b):i(L).format(b):C?i.utc(L).format():i(L).format();if(L.error)return L.error;if(typeof L=="object")return JSON.stringify(L)}return L}),M=p.includeEmptyRows===void 0||p.includeEmptyRows;let U=1;v&&v.eachRow((L,P)=>{if(M)for(;U++<P-1;)y.write([]);const{values:B}=L;B.shift(),y.write(B.map(T)),U=P}),y.end()})}writeFile(m,p){const x={encoding:(p=p||{}).encoding||"utf8"},g=o.createWriteStream(m,x);return this.write(g,p)}async writeBuffer(m){const p=new u;return await this.write(p,m),p.read()}}},{"../utils/stream-buf":24,"../utils/utils":27,dayjs:391,"dayjs/plugin/customParseFormat":392,"dayjs/plugin/utc":393,"fast-csv":424,fs:216}],2:[function(s,n,c){const o=s("../utils/col-cache");class a{constructor(l,i){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(this.worksheet=l,i)if(typeof i=="string"){const f=o.decodeAddress(i);this.nativeCol=f.col+u,this.nativeColOff=0,this.nativeRow=f.row+u,this.nativeRowOff=0}else i.nativeCol!==void 0?(this.nativeCol=i.nativeCol||0,this.nativeColOff=i.nativeColOff||0,this.nativeRow=i.nativeRow||0,this.nativeRowOff=i.nativeRowOff||0):i.col!==void 0?(this.col=i.col+u,this.row=i.row+u):(this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0);else this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0}static asInstance(l){return l instanceof a||l==null?l:new a(l)}get col(){return this.nativeCol+Math.min(this.colWidth-1,this.nativeColOff)/this.colWidth}set col(l){this.nativeCol=Math.floor(l),this.nativeColOff=Math.floor((l-this.nativeCol)*this.colWidth)}get row(){return this.nativeRow+Math.min(this.rowHeight-1,this.nativeRowOff)/this.rowHeight}set row(l){this.nativeRow=Math.floor(l),this.nativeRowOff=Math.floor((l-this.nativeRow)*this.rowHeight)}get colWidth(){return this.worksheet&&this.worksheet.getColumn(this.nativeCol+1)&&this.worksheet.getColumn(this.nativeCol+1).isCustomWidth?Math.floor(1e4*this.worksheet.getColumn(this.nativeCol+1).width):64e4}get rowHeight(){return this.worksheet&&this.worksheet.getRow(this.nativeRow+1)&&this.worksheet.getRow(this.nativeRow+1).height?Math.floor(1e4*this.worksheet.getRow(this.nativeRow+1).height):18e4}get model(){return{nativeCol:this.nativeCol,nativeColOff:this.nativeColOff,nativeRow:this.nativeRow,nativeRowOff:this.nativeRowOff}}set model(l){this.nativeCol=l.nativeCol,this.nativeColOff=l.nativeColOff,this.nativeRow=l.nativeRow,this.nativeRowOff=l.nativeRowOff}}n.exports=a},{"../utils/col-cache":19}],3:[function(s,n,c){const o=s("../utils/col-cache"),a=s("../utils/under-dash"),d=s("./enums"),{slideFormula:l}=s("../utils/shared-formula"),i=s("./note");class u{constructor(m,p,x){if(!m||!p)throw new Error("A Cell needs a Row");this._row=m,this._column=p,o.validateAddress(x),this._address=x,this._value=f.create(u.Types.Null,this),this.style=this._mergeStyle(m.style,p.style,{}),this._mergeCount=0}get worksheet(){return this._row.worksheet}get workbook(){return this._row.worksheet.workbook}destroy(){delete this.style,delete this._value,delete this._row,delete this._column,delete this._address}get numFmt(){return this.style.numFmt}set numFmt(m){this.style.numFmt=m}get font(){return this.style.font}set font(m){this.style.font=m}get alignment(){return this.style.alignment}set alignment(m){this.style.alignment=m}get border(){return this.style.border}set border(m){this.style.border=m}get fill(){return this.style.fill}set fill(m){this.style.fill=m}get protection(){return this.style.protection}set protection(m){this.style.protection=m}_mergeStyle(m,p,x){const g=m&&m.numFmt||p&&p.numFmt;g&&(x.numFmt=g);const v=m&&m.font||p&&p.font;v&&(x.font=v);const y=m&&m.alignment||p&&p.alignment;y&&(x.alignment=y);const b=m&&m.border||p&&p.border;b&&(x.border=b);const C=m&&m.fill||p&&p.fill;C&&(x.fill=C);const T=m&&m.protection||p&&p.protection;return T&&(x.protection=T),x}get address(){return this._address}get row(){return this._row.number}get col(){return this._column.number}get $col$row(){return`$${this._column.letter}$${this.row}`}get type(){return this._value.type}get effectiveType(){return this._value.effectiveType}toCsvString(){return this._value.toCsvString()}addMergeRef(){this._mergeCount++}releaseMergeRef(){this._mergeCount--}get isMerged(){return this._mergeCount>0||this.type===u.Types.Merge}merge(m,p){this._value.release(),this._value=f.create(u.Types.Merge,this,m),p||(this.style=m.style)}unmerge(){this.type===u.Types.Merge&&(this._value.release(),this._value=f.create(u.Types.Null,this),this.style=this._mergeStyle(this._row.style,this._column.style,{}))}isMergedTo(m){return this._value.type===u.Types.Merge&&this._value.isMergedTo(m)}get master(){return this.type===u.Types.Merge?this._value.master:this}get isHyperlink(){return this._value.type===u.Types.Hyperlink}get hyperlink(){return this._value.hyperlink}get value(){return this._value.value}set value(m){this.type!==u.Types.Merge?(this._value.release(),this._value=f.create(f.getType(m),this,m)):this._value.master.value=m}get note(){return this._comment&&this._comment.note}set note(m){this._comment=new i(m)}get text(){return this._value.toString()}get html(){return a.escapeHtml(this.text)}toString(){return this.text}_upgradeToHyperlink(m){this.type===u.Types.String&&(this._value=f.create(u.Types.Hyperlink,this,{text:this._value.value,hyperlink:m}))}get formula(){return this._value.formula}get result(){return this._value.result}get formulaType(){return this._value.formulaType}get fullAddress(){const{worksheet:m}=this._row;return{sheetName:m.name,address:this.address,row:this.row,col:this.col}}get name(){return this.names[0]}set name(m){this.names=[m]}get names(){return this.workbook.definedNames.getNamesEx(this.fullAddress)}set names(m){const{definedNames:p}=this.workbook;p.removeAllNames(this.fullAddress),m.forEach(x=>{p.addEx(this.fullAddress,x)})}addName(m){this.workbook.definedNames.addEx(this.fullAddress,m)}removeName(m){this.workbook.definedNames.removeEx(this.fullAddress,m)}removeAllNames(){this.workbook.definedNames.removeAllNames(this.fullAddress)}get _dataValidations(){return this.worksheet.dataValidations}get dataValidation(){return this._dataValidations.find(this.address)}set dataValidation(m){this._dataValidations.add(this.address,m)}get model(){const{model:m}=this._value;return m.style=this.style,this._comment&&(m.comment=this._comment.model),m}set model(m){if(this._value.release(),this._value=f.create(m.type,this),this._value.model=m,m.comment)switch(m.comment.type){case"note":this._comment=i.fromModel(m.comment)}m.style?this.style=m.style:this.style={}}}u.Types=d.ValueType;const f={getType:h=>h==null?u.Types.Null:h instanceof String||typeof h=="string"?u.Types.String:typeof h=="number"?u.Types.Number:typeof h=="boolean"?u.Types.Boolean:h instanceof Date?u.Types.Date:h.text&&h.hyperlink?u.Types.Hyperlink:h.formula||h.sharedFormula?u.Types.Formula:h.richText?u.Types.RichText:h.sharedString?u.Types.SharedString:h.error?u.Types.Error:u.Types.JSON,types:[{t:u.Types.Null,f:class{constructor(h){this.model={address:h.address,type:u.Types.Null}}get value(){return null}set value(h){}get type(){return u.Types.Null}get effectiveType(){return u.Types.Null}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return""}release(){}toString(){return""}}},{t:u.Types.Number,f:class{constructor(h,m){this.model={address:h.address,type:u.Types.Number,value:m}}get value(){return this.model.value}set value(h){this.model.value=h}get type(){return u.Types.Number}get effectiveType(){return u.Types.Number}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return this.model.value.toString()}release(){}toString(){return this.model.value.toString()}}},{t:u.Types.String,f:class{constructor(h,m){this.model={address:h.address,type:u.Types.String,value:m}}get value(){return this.model.value}set value(h){this.model.value=h}get type(){return u.Types.String}get effectiveType(){return u.Types.String}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return`"${this.model.value.replace(/"/g,'""')}"`}release(){}toString(){return this.model.value}}},{t:u.Types.Date,f:class{constructor(h,m){this.model={address:h.address,type:u.Types.Date,value:m}}get value(){return this.model.value}set value(h){this.model.value=h}get type(){return u.Types.Date}get effectiveType(){return u.Types.Date}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return this.model.value.toISOString()}release(){}toString(){return this.model.value.toString()}}},{t:u.Types.Hyperlink,f:class{constructor(h,m){this.model={address:h.address,type:u.Types.Hyperlink,text:m?m.text:void 0,hyperlink:m?m.hyperlink:void 0},m&&m.tooltip&&(this.model.tooltip=m.tooltip)}get value(){const h={text:this.model.text,hyperlink:this.model.hyperlink};return this.model.tooltip&&(h.tooltip=this.model.tooltip),h}set value(h){this.model={text:h.text,hyperlink:h.hyperlink},h.tooltip&&(this.model.tooltip=h.tooltip)}get text(){return this.model.text}set text(h){this.model.text=h}get hyperlink(){return this.model.hyperlink}set hyperlink(h){this.model.hyperlink=h}get type(){return u.Types.Hyperlink}get effectiveType(){return u.Types.Hyperlink}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return this.model.hyperlink}release(){}toString(){return this.model.text}}},{t:u.Types.Formula,f:class{constructor(h,m){this.cell=h,this.model={address:h.address,type:u.Types.Formula,shareType:m?m.shareType:void 0,ref:m?m.ref:void 0,formula:m?m.formula:void 0,sharedFormula:m?m.sharedFormula:void 0,result:m?m.result:void 0}}_copyModel(h){const m={},p=x=>{const g=h[x];g&&(m[x]=g)};return p("formula"),p("result"),p("ref"),p("shareType"),p("sharedFormula"),m}get value(){return this._copyModel(this.model)}set value(h){this.model=this._copyModel(h)}validate(h){switch(f.getType(h)){case u.Types.Null:case u.Types.String:case u.Types.Number:case u.Types.Date:break;case u.Types.Hyperlink:case u.Types.Formula:default:throw new Error("Cannot process that type of result value")}}get dependencies(){return{ranges:this.formula.match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g),cells:this.formula.replace(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g,"").match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}/g)}}get formula(){return this.model.formula||this._getTranslatedFormula()}set formula(h){this.model.formula=h}get formulaType(){return this.model.formula?d.FormulaType.Master:this.model.sharedFormula?d.FormulaType.Shared:d.FormulaType.None}get result(){return this.model.result}set result(h){this.model.result=h}get type(){return u.Types.Formula}get effectiveType(){const h=this.model.result;return h==null?d.ValueType.Null:h instanceof String||typeof h=="string"?d.ValueType.String:typeof h=="number"?d.ValueType.Number:h instanceof Date?d.ValueType.Date:h.text&&h.hyperlink?d.ValueType.Hyperlink:h.formula?d.ValueType.Formula:d.ValueType.Null}get address(){return this.model.address}set address(h){this.model.address=h}_getTranslatedFormula(){if(!this._translatedFormula&&this.model.sharedFormula){const{worksheet:h}=this.cell,m=h.findCell(this.model.sharedFormula);this._translatedFormula=m&&l(m.formula,m.address,this.model.address)}return this._translatedFormula}toCsvString(){return""+(this.model.result||"")}release(){}toString(){return this.model.result?this.model.result.toString():""}}},{t:u.Types.Merge,f:class{constructor(h,m){this.model={address:h.address,type:u.Types.Merge,master:m?m.address:void 0},this._master=m,m&&m.addMergeRef()}get value(){return this._master.value}set value(h){h instanceof u?(this._master&&this._master.releaseMergeRef(),h.addMergeRef(),this._master=h):this._master.value=h}isMergedTo(h){return h===this._master}get master(){return this._master}get type(){return u.Types.Merge}get effectiveType(){return this._master.effectiveType}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return""}release(){this._master.releaseMergeRef()}toString(){return this.value.toString()}}},{t:u.Types.JSON,f:class{constructor(h,m){this.model={address:h.address,type:u.Types.String,value:JSON.stringify(m),rawValue:m}}get value(){return this.model.rawValue}set value(h){this.model.rawValue=h,this.model.value=JSON.stringify(h)}get type(){return u.Types.String}get effectiveType(){return u.Types.String}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return this.model.value}release(){}toString(){return this.model.value}}},{t:u.Types.SharedString,f:class{constructor(h,m){this.model={address:h.address,type:u.Types.SharedString,value:m}}get value(){return this.model.value}set value(h){this.model.value=h}get type(){return u.Types.SharedString}get effectiveType(){return u.Types.SharedString}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return this.model.value.toString()}release(){}toString(){return this.model.value.toString()}}},{t:u.Types.RichText,f:class{constructor(h,m){this.model={address:h.address,type:u.Types.String,value:m}}get value(){return this.model.value}set value(h){this.model.value=h}toString(){return this.model.value.richText.map(h=>h.text).join("")}get type(){return u.Types.RichText}get effectiveType(){return u.Types.RichText}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return`"${this.text.replace(/"/g,'""')}"`}release(){}}},{t:u.Types.Boolean,f:class{constructor(h,m){this.model={address:h.address,type:u.Types.Boolean,value:m}}get value(){return this.model.value}set value(h){this.model.value=h}get type(){return u.Types.Boolean}get effectiveType(){return u.Types.Boolean}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return this.model.value?1:0}release(){}toString(){return this.model.value.toString()}}},{t:u.Types.Error,f:class{constructor(h,m){this.model={address:h.address,type:u.Types.Error,value:m}}get value(){return this.model.value}set value(h){this.model.value=h}get type(){return u.Types.Error}get effectiveType(){return u.Types.Error}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return this.toString()}release(){}toString(){return this.model.value.error.toString()}}}].reduce((h,m)=>(h[m.t]=m.f,h),[]),create(h,m,p){const x=this.types[h];if(!x)throw new Error("Could not create Value of type "+h);return new x(m,p)}};n.exports=u},{"../utils/col-cache":19,"../utils/shared-formula":23,"../utils/under-dash":26,"./enums":7,"./note":9}],4:[function(s,n,c){const o=s("../utils/under-dash"),a=s("./enums"),d=s("../utils/col-cache");class l{constructor(u,f,h){this._worksheet=u,this._number=f,h!==!1&&(this.defn=h)}get number(){return this._number}get worksheet(){return this._worksheet}get letter(){return d.n2l(this._number)}get isCustomWidth(){return this.width!==void 0&&this.width!==9}get defn(){return{header:this._header,key:this.key,width:this.width,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel}}set defn(u){u?(this.key=u.key,this.width=u.width!==void 0?u.width:9,this.outlineLevel=u.outlineLevel,u.style?this.style=u.style:this.style={},this.header=u.header,this._hidden=!!u.hidden):(delete this._header,delete this._key,delete this.width,this.style={},this.outlineLevel=0)}get headers(){return this._header&&this._header instanceof Array?this._header:[this._header]}get header(){return this._header}set header(u){u!==void 0?(this._header=u,this.headers.forEach((f,h)=>{this._worksheet.getCell(h+1,this.number).value=f})):this._header=void 0}get key(){return this._key}set key(u){(this._key&&this._worksheet.getColumnKey(this._key))===this&&this._worksheet.deleteColumnKey(this._key),this._key=u,u&&this._worksheet.setColumnKey(this._key,this)}get hidden(){return!!this._hidden}set hidden(u){this._hidden=u}get outlineLevel(){return this._outlineLevel||0}set outlineLevel(u){this._outlineLevel=u}get collapsed(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelCol)}toString(){return JSON.stringify({key:this.key,width:this.width,headers:this.headers.length?this.headers:void 0})}equivalentTo(u){return this.width===u.width&&this.hidden===u.hidden&&this.outlineLevel===u.outlineLevel&&o.isEqual(this.style,u.style)}get isDefault(){if(this.isCustomWidth||this.hidden||this.outlineLevel)return!1;const u=this.style;return!u||!(u.font||u.numFmt||u.alignment||u.border||u.fill||u.protection)}get headerCount(){return this.headers.length}eachCell(u,f){const h=this.number;f||(f=u,u=null),this._worksheet.eachRow(u,(m,p)=>{f(m.getCell(h),p)})}get values(){const u=[];return this.eachCell((f,h)=>{f&&f.type!==a.ValueType.Null&&(u[h]=f.value)}),u}set values(u){if(!u)return;const f=this.number;let h=0;u.hasOwnProperty("0")&&(h=1),u.forEach((m,p)=>{this._worksheet.getCell(p+h,f).value=m})}_applyStyle(u,f){return this.style[u]=f,this.eachCell(h=>{h[u]=f}),f}get numFmt(){return this.style.numFmt}set numFmt(u){this._applyStyle("numFmt",u)}get font(){return this.style.font}set font(u){this._applyStyle("font",u)}get alignment(){return this.style.alignment}set alignment(u){this._applyStyle("alignment",u)}get protection(){return this.style.protection}set protection(u){this._applyStyle("protection",u)}get border(){return this.style.border}set border(u){this._applyStyle("border",u)}get fill(){return this.style.fill}set fill(u){this._applyStyle("fill",u)}static toModel(u){const f=[];let h=null;return u&&u.forEach((m,p)=>{m.isDefault?h&&(h=null):h&&m.equivalentTo(h)?h.max=p+1:(h={min:p+1,max:p+1,width:m.width!==void 0?m.width:9,style:m.style,isCustomWidth:m.isCustomWidth,hidden:m.hidden,outlineLevel:m.outlineLevel,collapsed:m.collapsed},f.push(h))}),f.length?f:void 0}static fromModel(u,f){const h=[];let m=1,p=0;for(f=(f=f||[]).sort(function(x,g){return x.min-g.min});p<f.length;){const x=f[p++];for(;m<x.min;)h.push(new l(u,m++));for(;m<=x.max;)h.push(new l(u,m++,x))}return h.length?h:null}}n.exports=l},{"../utils/col-cache":19,"../utils/under-dash":26,"./enums":7}],5:[function(s,n,c){n.exports=class{constructor(o){this.model=o||{}}add(o,a){return this.model[o]=a}find(o){return this.model[o]}remove(o){this.model[o]=void 0}}},{}],6:[function(s,n,c){const o=s("../utils/under-dash"),a=s("../utils/col-cache"),d=s("../utils/cell-matrix"),l=s("./range"),i=/[$](\w+)[$](\d+)(:[$](\w+)[$](\d+))?/;n.exports=class{constructor(){this.matrixMap={}}getMatrix(u){return this.matrixMap[u]||(this.matrixMap[u]=new d)}add(u,f){const h=a.decodeEx(u);this.addEx(h,f)}addEx(u,f){const h=this.getMatrix(f);if(u.top)for(let m=u.left;m<=u.right;m++)for(let p=u.top;p<=u.bottom;p++){const x={sheetName:u.sheetName,address:a.n2l(m)+p,row:p,col:m};h.addCellEx(x)}else h.addCellEx(u)}remove(u,f){const h=a.decodeEx(u);this.removeEx(h,f)}removeEx(u,f){this.getMatrix(f).removeCellEx(u)}removeAllNames(u){o.each(this.matrixMap,f=>{f.removeCellEx(u)})}forEach(u){o.each(this.matrixMap,(f,h)=>{f.forEach(m=>{u(h,m)})})}getNames(u){return this.getNamesEx(a.decodeEx(u))}getNamesEx(u){return o.map(this.matrixMap,(f,h)=>f.findCellEx(u)&&h).filter(Boolean)}_explore(u,f){f.mark=!1;const{sheetName:h}=f,m=new l(f.row,f.col,f.row,f.col,h);let p,x;function g(y,b){const C=u.findCellAt(h,y,f.col);return!(!C||!C.mark)&&(m[b]=y,C.mark=!1,!0)}for(x=f.row-1;g(x,"top");x--);for(x=f.row+1;g(x,"bottom");x++);function v(y,b){const C=[];for(x=m.top;x<=m.bottom;x++){const T=u.findCellAt(h,x,y);if(!T||!T.mark)return!1;C.push(T)}m[b]=y;for(let T=0;T<C.length;T++)C[T].mark=!1;return!0}for(p=f.col-1;v(p,"left");p--);for(p=f.col+1;v(p,"right");p++);return m}getRanges(u,f){return(f=f||this.matrixMap[u])?(f.forEach(h=>{h.mark=!0}),{name:u,ranges:f.map(h=>h.mark&&this._explore(f,h)).filter(Boolean).map(h=>h.$shortRange)}):{name:u,ranges:[]}}normaliseMatrix(u,f){u.forEachInSheet(f,(h,m,p)=>{h&&(h.row===m&&h.col===p||(h.row=m,h.col=p,h.address=a.n2l(p)+m))})}spliceRows(u,f,h,m){o.each(this.matrixMap,p=>{p.spliceRows(u,f,h,m),this.normaliseMatrix(p,u)})}spliceColumns(u,f,h,m){o.each(this.matrixMap,p=>{p.spliceColumns(u,f,h,m),this.normaliseMatrix(p,u)})}get model(){return o.map(this.matrixMap,(u,f)=>this.getRanges(f,u)).filter(u=>u.ranges.length)}set model(u){const f=this.matrixMap={};u.forEach(h=>{const m=f[h.name]=new d;h.ranges.forEach(p=>{i.test(p.split("!").pop()||"")&&m.addCell(p)})})}}},{"../utils/cell-matrix":18,"../utils/col-cache":19,"../utils/under-dash":26,"./range":10}],7:[function(s,n,c){n.exports={ValueType:{Null:0,Merge:1,Number:2,String:3,Date:4,Hyperlink:5,Formula:6,SharedString:7,RichText:8,Boolean:9,Error:10},FormulaType:{None:0,Master:1,Shared:2},RelationshipType:{None:0,OfficeDocument:1,Worksheet:2,CalcChain:3,SharedStrings:4,Styles:5,Theme:6,Hyperlink:7},DocumentType:{Xlsx:1},ReadingOrder:{LeftToRight:1,RightToLeft:2},ErrorValue:{NotApplicable:"#N/A",Ref:"#REF!",Name:"#NAME?",DivZero:"#DIV/0!",Null:"#NULL!",Value:"#VALUE!",Num:"#NUM!"}}},{}],8:[function(s,n,c){const o=s("../utils/col-cache"),a=s("./anchor");n.exports=class{constructor(d,l){this.worksheet=d,this.model=l}get model(){switch(this.type){case"background":return{type:this.type,imageId:this.imageId};case"image":return{type:this.type,imageId:this.imageId,hyperlinks:this.range.hyperlinks,range:{tl:this.range.tl.model,br:this.range.br&&this.range.br.model,ext:this.range.ext,editAs:this.range.editAs}};default:throw new Error("Invalid Image Type")}}set model(d){let{type:l,imageId:i,range:u,hyperlinks:f}=d;if(this.type=l,this.imageId=i,l==="image")if(typeof u=="string"){const h=o.decode(u);this.range={tl:new a(this.worksheet,{col:h.left,row:h.top},-1),br:new a(this.worksheet,{col:h.right,row:h.bottom},0),editAs:"oneCell"}}else this.range={tl:new a(this.worksheet,u.tl,0),br:u.br&&new a(this.worksheet,u.br,0),ext:u.ext,editAs:u.editAs,hyperlinks:f||u.hyperlinks}}}},{"../utils/col-cache":19,"./anchor":2}],9:[function(s,n,c){const o=s("../utils/under-dash");class a{constructor(l){this.note=l}get model(){let l=null;switch(typeof this.note){case"string":l={type:"note",note:{texts:[{text:this.note}]}};break;default:l={type:"note",note:this.note}}return o.deepMerge({},a.DEFAULT_CONFIGS,l)}set model(l){const{note:i}=l,{texts:u}=i;u.length===1&&Object.keys(u[0]).length===1?this.note=u[0].text:this.note=i}static fromModel(l){const i=new a;return i.model=l,i}}a.DEFAULT_CONFIGS={note:{margins:{insetmode:"auto",inset:[.13,.13,.25,.25]},protection:{locked:"True",lockText:"True"},editAs:"absolute"}},n.exports=a},{"../utils/under-dash":26}],10:[function(s,n,c){const o=s("../utils/col-cache");class a{constructor(){this.decode(arguments)}setTLBR(l,i,u,f,h){if(arguments.length<4){const m=o.decodeAddress(l),p=o.decodeAddress(i);this.model={top:Math.min(m.row,p.row),left:Math.min(m.col,p.col),bottom:Math.max(m.row,p.row),right:Math.max(m.col,p.col),sheetName:u},this.setTLBR(m.row,m.col,p.row,p.col,h)}else this.model={top:Math.min(l,u),left:Math.min(i,f),bottom:Math.max(l,u),right:Math.max(i,f),sheetName:h}}decode(l){switch(l.length){case 5:this.setTLBR(l[0],l[1],l[2],l[3],l[4]);break;case 4:this.setTLBR(l[0],l[1],l[2],l[3]);break;case 3:this.setTLBR(l[0],l[1],l[2]);break;case 2:this.setTLBR(l[0],l[1]);break;case 1:{const i=l[0];if(i instanceof a)this.model={top:i.model.top,left:i.model.left,bottom:i.model.bottom,right:i.model.right,sheetName:i.sheetName};else if(i instanceof Array)this.decode(i);else if(i.top&&i.left&&i.bottom&&i.right)this.model={top:i.top,left:i.left,bottom:i.bottom,right:i.right,sheetName:i.sheetName};else{const u=o.decodeEx(i);u.top?this.model={top:u.top,left:u.left,bottom:u.bottom,right:u.right,sheetName:u.sheetName}:this.model={top:u.row,left:u.col,bottom:u.row,right:u.col,sheetName:u.sheetName}}break}case 0:this.model={top:0,left:0,bottom:0,right:0};break;default:throw new Error("Invalid number of arguments to _getDimensions() - "+l.length)}}get top(){return this.model.top||1}set top(l){this.model.top=l}get left(){return this.model.left||1}set left(l){this.model.left=l}get bottom(){return this.model.bottom||1}set bottom(l){this.model.bottom=l}get right(){return this.model.right||1}set right(l){this.model.right=l}get sheetName(){return this.model.sheetName}set sheetName(l){this.model.sheetName=l}get _serialisedSheetName(){const{sheetName:l}=this.model;return l?/^[a-zA-Z0-9]*$/.test(l)?l+"!":`'${l}'!`:""}expand(l,i,u,f){(!this.model.top||l<this.top)&&(this.top=l),(!this.model.left||i<this.left)&&(this.left=i),(!this.model.bottom||u>this.bottom)&&(this.bottom=u),(!this.model.right||f>this.right)&&(this.right=f)}expandRow(l){if(l){const{dimensions:i,number:u}=l;i&&this.expand(u,i.min,u,i.max)}}expandToAddress(l){const i=o.decodeEx(l);this.expand(i.row,i.col,i.row,i.col)}get tl(){return o.n2l(this.left)+this.top}get $t$l(){return`$${o.n2l(this.left)}$${this.top}`}get br(){return o.n2l(this.right)+this.bottom}get $b$r(){return`$${o.n2l(this.right)}$${this.bottom}`}get range(){return`${this._serialisedSheetName+this.tl}:${this.br}`}get $range(){return`${this._serialisedSheetName+this.$t$l}:${this.$b$r}`}get shortRange(){return this.count>1?this.range:this._serialisedSheetName+this.tl}get $shortRange(){return this.count>1?this.$range:this._serialisedSheetName+this.$t$l}get count(){return(1+this.bottom-this.top)*(1+this.right-this.left)}toString(){return this.range}intersects(l){return(!l.sheetName||!this.sheetName||l.sheetName===this.sheetName)&&!(l.bottom<this.top)&&!(l.top>this.bottom)&&!(l.right<this.left)&&!(l.left>this.right)}contains(l){const i=o.decodeEx(l);return this.containsEx(i)}containsEx(l){return(!l.sheetName||!this.sheetName||l.sheetName===this.sheetName)&&l.row>=this.top&&l.row<=this.bottom&&l.col>=this.left&&l.col<=this.right}forEachAddress(l){for(let i=this.left;i<=this.right;i++)for(let u=this.top;u<=this.bottom;u++)l(o.encodeAddress(u,i),u,i)}}n.exports=a},{"../utils/col-cache":19}],11:[function(s,n,c){const o=s("../utils/under-dash"),a=s("./enums"),d=s("../utils/col-cache"),l=s("./cell");n.exports=class{constructor(i,u){this._worksheet=i,this._number=u,this._cells=[],this.style={},this.outlineLevel=0}get number(){return this._number}get worksheet(){return this._worksheet}commit(){this._worksheet._commitRow(this)}destroy(){delete this._worksheet,delete this._cells,delete this.style}findCell(i){return this._cells[i-1]}getCellEx(i){let u=this._cells[i.col-1];if(!u){const f=this._worksheet.getColumn(i.col);u=new l(this,f,i.address),this._cells[i.col-1]=u}return u}getCell(i){if(typeof i=="string"){const u=this._worksheet.getColumnKey(i);i=u?u.number:d.l2n(i)}return this._cells[i-1]||this.getCellEx({address:d.encodeAddress(this._number,i),row:this._number,col:i})}splice(i,u){const f=i+u;for(var h=arguments.length,m=new Array(h>2?h-2:0),p=2;p<h;p++)m[p-2]=arguments[p];const x=m.length-u,g=this._cells.length;let v,y,b;if(x<0)for(v=i+m.length;v<=g;v++)b=this._cells[v-1],y=this._cells[v-x-1],y?(b=this.getCell(v),b.value=y.value,b.style=y.style,b._comment=y._comment):b&&(b.value=null,b.style={},b._comment=void 0);else if(x>0)for(v=g;v>=f;v--)y=this._cells[v-1],y?(b=this.getCell(v+x),b.value=y.value,b.style=y.style,b._comment=y._comment):this._cells[v+x-1]=void 0;for(v=0;v<m.length;v++)b=this.getCell(i+v),b.value=m[v],b.style={},b._comment=void 0}eachCell(i,u){if(u||(u=i,i=null),i&&i.includeEmpty){const f=this._cells.length;for(let h=1;h<=f;h++)u(this.getCell(h),h)}else this._cells.forEach((f,h)=>{f&&f.type!==a.ValueType.Null&&u(f,h+1)})}addPageBreak(i,u){const f=this._worksheet,h=Math.max(0,i-1)||0,m=Math.max(0,u-1)||16838,p={id:this._number,max:m,man:1};h&&(p.min=h),f.rowBreaks.push(p)}get values(){const i=[];return this._cells.forEach(u=>{u&&u.type!==a.ValueType.Null&&(i[u.col]=u.value)}),i}set values(i){if(this._cells=[],i)if(i instanceof Array){let u=0;i.hasOwnProperty("0")&&(u=1),i.forEach((f,h)=>{f!==void 0&&(this.getCellEx({address:d.encodeAddress(this._number,h+u),row:this._number,col:h+u}).value=f)})}else this._worksheet.eachColumnKey((u,f)=>{i[f]!==void 0&&(this.getCellEx({address:d.encodeAddress(this._number,u.number),row:this._number,col:u.number}).value=i[f])})}get hasValues(){return o.some(this._cells,i=>i&&i.type!==a.ValueType.Null)}get cellCount(){return this._cells.length}get actualCellCount(){let i=0;return this.eachCell(()=>{i++}),i}get dimensions(){let i=0,u=0;return this._cells.forEach(f=>{f&&f.type!==a.ValueType.Null&&((!i||i>f.col)&&(i=f.col),u<f.col&&(u=f.col))}),i>0?{min:i,max:u}:null}_applyStyle(i,u){return this.style[i]=u,this._cells.forEach(f=>{f&&(f[i]=u)}),u}get numFmt(){return this.style.numFmt}set numFmt(i){this._applyStyle("numFmt",i)}get font(){return this.style.font}set font(i){this._applyStyle("font",i)}get alignment(){return this.style.alignment}set alignment(i){this._applyStyle("alignment",i)}get protection(){return this.style.protection}set protection(i){this._applyStyle("protection",i)}get border(){return this.style.border}set border(i){this._applyStyle("border",i)}get fill(){return this.style.fill}set fill(i){this._applyStyle("fill",i)}get hidden(){return!!this._hidden}set hidden(i){this._hidden=i}get outlineLevel(){return this._outlineLevel||0}set outlineLevel(i){this._outlineLevel=i}get collapsed(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelRow)}get model(){const i=[];let u=0,f=0;return this._cells.forEach(h=>{if(h){const m=h.model;m&&((!u||u>h.col)&&(u=h.col),f<h.col&&(f=h.col),i.push(m))}}),this.height||i.length?{cells:i,number:this.number,min:u,max:f,height:this.height,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel,collapsed:this.collapsed}:null}set model(i){if(i.number!==this._number)throw new Error("Invalid row number in model");let u;this._cells=[],i.cells.forEach(f=>{switch(f.type){case l.Types.Merge:break;default:{let h;if(f.address)h=d.decodeAddress(f.address);else if(u){const{row:m}=u,p=u.col+1;h={row:m,col:p,address:d.encodeAddress(m,p),$col$row:`$${d.n2l(p)}$${m}`}}u=h,this.getCellEx(h).model=f;break}}}),i.height?this.height=i.height:delete this.height,this.hidden=i.hidden,this.outlineLevel=i.outlineLevel||0,this.style=i.style&&JSON.parse(JSON.stringify(i.style))||{}}}},{"../utils/col-cache":19,"../utils/under-dash":26,"./cell":3,"./enums":7}],12:[function(s,n,c){const o=s("../utils/col-cache");class a{constructor(l,i,u){this.table=l,this.column=i,this.index=u}_set(l,i){this.table.cacheState(),this.column[l]=i}get name(){return this.column.name}set name(l){this._set("name",l)}get filterButton(){return this.column.filterButton}set filterButton(l){this.column.filterButton=l}get style(){return this.column.style}set style(l){this.column.style=l}get totalsRowLabel(){return this.column.totalsRowLabel}set totalsRowLabel(l){this._set("totalsRowLabel",l)}get totalsRowFunction(){return this.column.totalsRowFunction}set totalsRowFunction(l){this._set("totalsRowFunction",l)}get totalsRowResult(){return this.column.totalsRowResult}set totalsRowResult(l){this._set("totalsRowResult",l)}get totalsRowFormula(){return this.column.totalsRowFormula}set totalsRowFormula(l){this._set("totalsRowFormula",l)}}n.exports=class{constructor(d,l){this.worksheet=d,l&&(this.table=l,this.validate(),this.store())}getFormula(d){switch(d.totalsRowFunction){case"none":return null;case"average":return`SUBTOTAL(101,${this.table.name}[${d.name}])`;case"countNums":return`SUBTOTAL(102,${this.table.name}[${d.name}])`;case"count":return`SUBTOTAL(103,${this.table.name}[${d.name}])`;case"max":return`SUBTOTAL(104,${this.table.name}[${d.name}])`;case"min":return`SUBTOTAL(105,${this.table.name}[${d.name}])`;case"stdDev":return`SUBTOTAL(106,${this.table.name}[${d.name}])`;case"var":return`SUBTOTAL(107,${this.table.name}[${d.name}])`;case"sum":return`SUBTOTAL(109,${this.table.name}[${d.name}])`;case"custom":return d.totalsRowFormula;default:throw new Error("Invalid Totals Row Function: "+d.totalsRowFunction)}}get width(){return this.table.columns.length}get height(){return this.table.rows.length}get filterHeight(){return this.height+(this.table.headerRow?1:0)}get tableHeight(){return this.filterHeight+(this.table.totalsRow?1:0)}validate(){const{table:d}=this,l=(x,g,v)=>{x[g]===void 0&&(x[g]=v)};l(d,"headerRow",!0),l(d,"totalsRow",!1),l(d,"style",{}),l(d.style,"theme","TableStyleMedium2"),l(d.style,"showFirstColumn",!1),l(d.style,"showLastColumn",!1),l(d.style,"showRowStripes",!1),l(d.style,"showColumnStripes",!1);const i=(x,g)=>{if(!x)throw new Error(g)};i(d.ref,"Table must have ref"),i(d.columns,"Table must have column definitions"),i(d.rows,"Table must have row definitions"),d.tl=o.decodeAddress(d.ref);const{row:u,col:f}=d.tl;i(u>0,"Table must be on valid row"),i(f>0,"Table must be on valid col");const{width:h,filterHeight:m,tableHeight:p}=this;d.autoFilterRef=o.encode(u,f,u+m-1,f+h-1),d.tableRef=o.encode(u,f,u+p-1,f+h-1),d.columns.forEach((x,g)=>{i(x.name,`Column ${g} must have a name`),g===0?l(x,"totalsRowLabel","Total"):(l(x,"totalsRowFunction","none"),x.totalsRowFormula=this.getFormula(x))})}store(){const d=(m,p)=>{p&&Object.keys(p).forEach(x=>{m[x]=p[x]})},{worksheet:l,table:i}=this,{row:u,col:f}=i.tl;let h=0;if(i.headerRow){const m=l.getRow(u+h++);i.columns.forEach((p,x)=>{const{style:g,name:v}=p,y=m.getCell(f+x);y.value=v,d(y,g)})}if(i.rows.forEach(m=>{const p=l.getRow(u+h++);m.forEach((x,g)=>{const v=p.getCell(f+g);v.value=x,d(v,i.columns[g].style)})}),i.totalsRow){const m=l.getRow(u+h++);i.columns.forEach((p,x)=>{const g=m.getCell(f+x);if(x===0)g.value=p.totalsRowLabel;else{const v=this.getFormula(p);g.value=v?{formula:p.totalsRowFormula,result:p.totalsRowResult}:null}d(g,p.style)})}}load(d){const{table:l}=this,{row:i,col:u}=l.tl;let f=0;if(l.headerRow){const h=d.getRow(i+f++);l.columns.forEach((m,p)=>{h.getCell(u+p).value=m.name})}if(l.rows.forEach(h=>{const m=d.getRow(i+f++);h.forEach((p,x)=>{m.getCell(u+x).value=p})}),l.totalsRow){const h=d.getRow(i+f++);l.columns.forEach((m,p)=>{const x=h.getCell(u+p);p===0?x.value=m.totalsRowLabel:this.getFormula(m)&&(x.value={formula:m.totalsRowFormula,result:m.totalsRowResult})})}}get model(){return this.table}set model(d){this.table=d}cacheState(){this._cache||(this._cache={ref:this.ref,width:this.width,tableHeight:this.tableHeight})}commit(){if(!this._cache)return;this.validate();const d=o.decodeAddress(this._cache.ref);if(this.ref!==this._cache.ref)for(let l=0;l<this._cache.tableHeight;l++){const i=this.worksheet.getRow(d.row+l);for(let u=0;u<this._cache.width;u++)i.getCell(d.col+u).value=null}else{for(let l=this.tableHeight;l<this._cache.tableHeight;l++){const i=this.worksheet.getRow(d.row+l);for(let u=0;u<this._cache.width;u++)i.getCell(d.col+u).value=null}for(let l=0;l<this.tableHeight;l++){const i=this.worksheet.getRow(d.row+l);for(let u=this.width;u<this._cache.width;u++)i.getCell(d.col+u).value=null}}this.store()}addRow(d,l){this.cacheState(),l===void 0?this.table.rows.push(d):this.table.rows.splice(l,0,d)}removeRows(d){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cacheState(),this.table.rows.splice(d,l)}getColumn(d){const l=this.table.columns[d];return new a(this,l,d)}addColumn(d,l,i){this.cacheState(),i===void 0?(this.table.columns.push(d),this.table.rows.forEach((u,f)=>{u.push(l[f])})):(this.table.columns.splice(i,0,d),this.table.rows.forEach((u,f)=>{u.splice(i,0,l[f])}))}removeColumns(d){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cacheState(),this.table.columns.splice(d,l),this.table.rows.forEach(i=>{i.splice(d,l)})}_assign(d,l,i){this.cacheState(),d[l]=i}get ref(){return this.table.ref}set ref(d){this._assign(this.table,"ref",d)}get name(){return this.table.name}set name(d){this.table.name=d}get displayName(){return this.table.displyName||this.table.name}set displayNamename(d){this.table.displayName=d}get headerRow(){return this.table.headerRow}set headerRow(d){this._assign(this.table,"headerRow",d)}get totalsRow(){return this.table.totalsRow}set totalsRow(d){this._assign(this.table,"totalsRow",d)}get theme(){return this.table.style.name}set theme(d){this.table.style.name=d}get showFirstColumn(){return this.table.style.showFirstColumn}set showFirstColumn(d){this.table.style.showFirstColumn=d}get showLastColumn(){return this.table.style.showLastColumn}set showLastColumn(d){this.table.style.showLastColumn=d}get showRowStripes(){return this.table.style.showRowStripes}set showRowStripes(d){this.table.style.showRowStripes=d}get showColumnStripes(){return this.table.style.showColumnStripes}set showColumnStripes(d){this.table.style.showColumnStripes=d}}},{"../utils/col-cache":19}],13:[function(s,n,c){const o=s("./worksheet"),a=s("./defined-names"),d=s("../xlsx/xlsx"),l=s("../csv/csv");n.exports=class{constructor(){this.category="",this.company="",this.created=new Date,this.description="",this.keywords="",this.manager="",this.modified=this.created,this.properties={},this.calcProperties={},this._worksheets=[],this.subject="",this.title="",this.views=[],this.media=[],this._definedNames=new a}get xlsx(){return this._xlsx||(this._xlsx=new d(this)),this._xlsx}get csv(){return this._csv||(this._csv=new l(this)),this._csv}get nextId(){for(let i=1;i<this._worksheets.length;i++)if(!this._worksheets[i])return i;return this._worksheets.length||1}addWorksheet(i,u){const f=this.nextId;u&&(typeof u=="string"?(console.trace('tabColor argument is now deprecated. Please use workbook.addWorksheet(name, {properties: { tabColor: { argb: "rbg value" } }'),u={properties:{tabColor:{argb:u}}}):(u.argb||u.theme||u.indexed)&&(console.trace("tabColor argument is now deprecated. Please use workbook.addWorksheet(name, {properties: { tabColor: { ... } }"),u={properties:{tabColor:u}}));const h=this._worksheets.reduce((x,g)=>(g&&g.orderNo)>x?g.orderNo:x,0),m=Object.assign({},u,{id:f,name:i,orderNo:h+1,workbook:this}),p=new o(m);return this._worksheets[f]=p,p}removeWorksheetEx(i){delete this._worksheets[i.id]}removeWorksheet(i){const u=this.getWorksheet(i);u&&u.destroy()}getWorksheet(i){return i===void 0?this._worksheets.find(Boolean):typeof i=="number"?this._worksheets[i]:typeof i=="string"?this._worksheets.find(u=>u&&u.name===i):void 0}get worksheets(){return this._worksheets.slice(1).sort((i,u)=>i.orderNo-u.orderNo).filter(Boolean)}eachSheet(i){this.worksheets.forEach(u=>{i(u,u.id)})}get definedNames(){return this._definedNames}clearThemes(){this._themes=void 0}addImage(i){const u=this.media.length;return this.media.push(Object.assign({},i,{type:"image"})),u}getImage(i){return this.media[i]}get model(){return{creator:this.creator||"Unknown",lastModifiedBy:this.lastModifiedBy||"Unknown",lastPrinted:this.lastPrinted,created:this.created,modified:this.modified,properties:this.properties,worksheets:this.worksheets.map(i=>i.model),sheets:this.worksheets.map(i=>i.model).filter(Boolean),definedNames:this._definedNames.model,views:this.views,company:this.company,manager:this.manager,title:this.title,subject:this.subject,keywords:this.keywords,category:this.category,description:this.description,language:this.language,revision:this.revision,contentStatus:this.contentStatus,themes:this._themes,media:this.media,calcProperties:this.calcProperties}}set model(i){this.creator=i.creator,this.lastModifiedBy=i.lastModifiedBy,this.lastPrinted=i.lastPrinted,this.created=i.created,this.modified=i.modified,this.company=i.company,this.manager=i.manager,this.title=i.title,this.subject=i.subject,this.keywords=i.keywords,this.category=i.category,this.description=i.description,this.language=i.language,this.revision=i.revision,this.contentStatus=i.contentStatus,this.properties=i.properties,this.calcProperties=i.calcProperties,this._worksheets=[],i.worksheets.forEach(u=>{const{id:f,name:h,state:m}=u,p=i.sheets&&i.sheets.findIndex(x=>x.id===f);(this._worksheets[f]=new o({id:f,name:h,orderNo:p,state:m,workbook:this})).model=u}),this._definedNames.model=i.definedNames,this.views=i.views,this._themes=i.themes,this.media=i.media||[]}}},{"../csv/csv":1,"../xlsx/xlsx":144,"./defined-names":6,"./worksheet":14}],14:[function(s,n,c){const o=s("../utils/under-dash"),a=s("../utils/col-cache"),d=s("./range"),l=s("./row"),i=s("./column"),u=s("./enums"),f=s("./image"),h=s("./table"),m=s("./data-validations"),p=s("../utils/encryptor"),{copyStyle:x}=s("../utils/copy-style");n.exports=class{constructor(g){g=g||{},this._workbook=g.workbook,this.id=g.id,this.orderNo=g.orderNo,this.name=g.name,this.state=g.state||"visible",this._rows=[],this._columns=null,this._keys={},this._merges={},this.rowBreaks=[],this.properties=Object.assign({},{defaultRowHeight:15,dyDescent:55,outlineLevelCol:0,outlineLevelRow:0},g.properties),this.pageSetup=Object.assign({},{margins:{left:.7,right:.7,top:.75,bottom:.75,header:.3,footer:.3},orientation:"portrait",horizontalDpi:4294967295,verticalDpi:4294967295,fitToPage:!(!g.pageSetup||!g.pageSetup.fitToWidth&&!g.pageSetup.fitToHeight||g.pageSetup.scale),pageOrder:"downThenOver",blackAndWhite:!1,draft:!1,cellComments:"None",errors:"displayed",scale:100,fitToWidth:1,fitToHeight:1,paperSize:void 0,showRowColHeaders:!1,showGridLines:!1,firstPageNumber:void 0,horizontalCentered:!1,verticalCentered:!1,rowBreaks:null,colBreaks:null},g.pageSetup),this.headerFooter=Object.assign({},{differentFirst:!1,differentOddEven:!1,oddHeader:null,oddFooter:null,evenHeader:null,evenFooter:null,firstHeader:null,firstFooter:null},g.headerFooter),this.dataValidations=new m,this.views=g.views||[],this.autoFilter=g.autoFilter||null,this._media=[],this.sheetProtection=null,this.tables={},this.conditionalFormattings=[]}get name(){return this._name}set name(g){if(g===void 0&&(g="sheet"+this.id),this._name!==g){if(typeof g!="string")throw new Error("The name has to be a string.");if(g==="")throw new Error("The name can't be empty.");if(g==="History")throw new Error('The name "History" is protected. Please use a different name.');if(/[*?:/\\[\]]/.test(g))throw new Error(`Worksheet name ${g} cannot include any of the following characters: * ? : \\ / [ ]`);if(/(^')|('$)/.test(g))throw new Error("The first or last character of worksheet name cannot be a single quotation mark: "+g);if(g&&g.length>31&&(console.warn(`Worksheet name ${g} exceeds 31 chars. This will be truncated`),g=g.substring(0,31)),this._workbook._worksheets.find(v=>v&&v.name.toLowerCase()===g.toLowerCase()))throw new Error("Worksheet name already exists: "+g);this._name=g}}get workbook(){return this._workbook}destroy(){this._workbook.removeWorksheetEx(this)}get dimensions(){const g=new d;return this._rows.forEach(v=>{if(v){const y=v.dimensions;y&&g.expand(v.number,y.min,v.number,y.max)}}),g}get columns(){return this._columns}set columns(g){this._headerRowCount=g.reduce((b,C)=>{const T=(C.header?1:C.headers&&C.headers.length)||0;return Math.max(b,T)},0);let v=1;const y=this._columns=[];g.forEach(b=>{const C=new i(this,v++,!1);y.push(C),C.defn=b})}getColumnKey(g){return this._keys[g]}setColumnKey(g,v){this._keys[g]=v}deleteColumnKey(g){delete this._keys[g]}eachColumnKey(g){o.each(this._keys,g)}getColumn(g){if(typeof g=="string"){const v=this._keys[g];if(v)return v;g=a.l2n(g)}if(this._columns||(this._columns=[]),g>this._columns.length){let v=this._columns.length+1;for(;v<=g;)this._columns.push(new i(this,v++))}return this._columns[g-1]}spliceColumns(g,v){const y=this._rows.length;for(var b=arguments.length,C=new Array(b>2?b-2:0),T=2;T<b;T++)C[T-2]=arguments[T];if(C.length>0)for(let P=0;P<y;P++){const B=[g,v];C.forEach(z=>{B.push(z[P]||null)});const q=this.getRow(P+1);q.splice.apply(q,B)}else this._rows.forEach(P=>{P&&P.splice(g,v)});const M=C.length-v,U=g+v,L=this._columns.length;if(M<0)for(let P=g+C.length;P<=L;P++)this.getColumn(P).defn=this.getColumn(P-M).defn;else if(M>0)for(let P=L;P>=U;P--)this.getColumn(P+M).defn=this.getColumn(P).defn;for(let P=g;P<g+C.length;P++)this.getColumn(P).defn=null;this.workbook.definedNames.spliceColumns(this.name,g,v,C.length)}get lastColumn(){return this.getColumn(this.columnCount)}get columnCount(){let g=0;return this.eachRow(v=>{g=Math.max(g,v.cellCount)}),g}get actualColumnCount(){const g=[];let v=0;return this.eachRow(y=>{y.eachCell(b=>{let{col:C}=b;g[C]||(g[C]=!0,v++)})}),v}_commitRow(){}get _lastRowNumber(){const g=this._rows;let v=g.length;for(;v>0&&g[v-1]===void 0;)v--;return v}get _nextRow(){return this._lastRowNumber+1}get lastRow(){if(this._rows.length)return this._rows[this._rows.length-1]}findRow(g){return this._rows[g-1]}findRows(g,v){return this._rows.slice(g-1,g-1+v)}get rowCount(){return this._lastRowNumber}get actualRowCount(){let g=0;return this.eachRow(()=>{g++}),g}getRow(g){let v=this._rows[g-1];return v||(v=this._rows[g-1]=new l(this,g)),v}getRows(g,v){if(v<1)return;const y=[];for(let b=g;b<g+v;b++)y.push(this.getRow(b));return y}addRow(g){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";const y=this._nextRow,b=this.getRow(y);return b.values=g,this._setStyleOption(y,v[0]==="i"?v:"n"),b}addRows(g){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";const y=[];return g.forEach(b=>{y.push(this.addRow(b,v))}),y}insertRow(g,v){let y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"n";return this.spliceRows(g,0,v),this._setStyleOption(g,y),this.getRow(g)}insertRows(g,v){let y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"n";if(this.spliceRows(g,0,...v),y!=="n")for(let b=0;b<v.length;b++)y[0]==="o"&&this.findRow(v.length+g+b)!==void 0?this._copyStyle(v.length+g+b,g+b,y[1]==="+"):y[0]==="i"&&this.findRow(g-1)!==void 0&&this._copyStyle(g-1,g+b,y[1]==="+");return this.getRows(g,v.length)}_setStyleOption(g){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";v[0]==="o"&&this.findRow(g+1)!==void 0?this._copyStyle(g+1,g,v[1]==="+"):v[0]==="i"&&this.findRow(g-1)!==void 0&&this._copyStyle(g-1,g,v[1]==="+")}_copyStyle(g,v){let y=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const b=this.getRow(g),C=this.getRow(v);C.style=x(b.style),b.eachCell({includeEmpty:y},(T,M)=>{C.getCell(M).style=x(T.style)}),C.height=b.height}duplicateRow(g,v){let y=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const b=this._rows[g-1],C=new Array(v).fill(b.values);this.spliceRows(g+1,y?0:v,...C);for(let T=0;T<v;T++){const M=this._rows[g+T];M.style=b.style,M.height=b.height,b.eachCell({includeEmpty:!0},(U,L)=>{M.getCell(L).style=U.style})}}spliceRows(g,v){const y=g+v;for(var b=arguments.length,C=new Array(b>2?b-2:0),T=2;T<b;T++)C[T-2]=arguments[T];const M=C.length,U=M-v,L=this._rows.length;let P,B;if(U<0)for(g===L&&(this._rows[L-1]=void 0),P=y;P<=L;P++)if(B=this._rows[P-1],B){const q=this.getRow(P+U);q.values=B.values,q.style=B.style,q.height=B.height,B.eachCell({includeEmpty:!0},(z,k)=>{q.getCell(k).style=z.style}),this._rows[P-1]=void 0}else this._rows[P+U-1]=void 0;else if(U>0)for(P=L;P>=y;P--)if(B=this._rows[P-1],B){const q=this.getRow(P+U);q.values=B.values,q.style=B.style,q.height=B.height,B.eachCell({includeEmpty:!0},(z,k)=>{if(q.getCell(k).style=z.style,z._value.constructor.name==="MergeValue"){const R=this.getRow(z._row._number+M).getCell(k),S=z._value._master,w=this.getRow(S._row._number+M).getCell(S._column._number);R.merge(w)}})}else this._rows[P+U-1]=void 0;for(P=0;P<M;P++){const q=this.getRow(g+P);q.style={},q.values=C[P]}this.workbook.definedNames.spliceRows(this.name,g,v,M)}eachRow(g,v){if(v||(v=g,g=void 0),g&&g.includeEmpty){const y=this._rows.length;for(let b=1;b<=y;b++)v(this.getRow(b),b)}else this._rows.forEach(y=>{y&&y.hasValues&&v(y,y.number)})}getSheetValues(){const g=[];return this._rows.forEach(v=>{v&&(g[v.number]=v.values)}),g}findCell(g,v){const y=a.getAddress(g,v),b=this._rows[y.row-1];return b?b.findCell(y.col):void 0}getCell(g,v){const y=a.getAddress(g,v);return this.getRow(y.row).getCellEx(y)}mergeCells(){for(var g=arguments.length,v=new Array(g),y=0;y<g;y++)v[y]=arguments[y];const b=new d(v);this._mergeCellsInternal(b)}mergeCellsWithoutStyle(){for(var g=arguments.length,v=new Array(g),y=0;y<g;y++)v[y]=arguments[y];const b=new d(v);this._mergeCellsInternal(b,!0)}_mergeCellsInternal(g,v){o.each(this._merges,b=>{if(b.intersects(g))throw new Error("Cannot merge already merged cells")});const y=this.getCell(g.top,g.left);for(let b=g.top;b<=g.bottom;b++)for(let C=g.left;C<=g.right;C++)(b>g.top||C>g.left)&&this.getCell(b,C).merge(y,v);this._merges[y.address]=g}_unMergeMaster(g){const v=this._merges[g.address];if(v){for(let y=v.top;y<=v.bottom;y++)for(let b=v.left;b<=v.right;b++)this.getCell(y,b).unmerge();delete this._merges[g.address]}}get hasMerges(){return o.some(this._merges,Boolean)}unMergeCells(){for(var g=arguments.length,v=new Array(g),y=0;y<g;y++)v[y]=arguments[y];const b=new d(v);for(let C=b.top;C<=b.bottom;C++)for(let T=b.left;T<=b.right;T++){const M=this.findCell(C,T);M&&(M.type===u.ValueType.Merge?this._unMergeMaster(M.master):this._merges[M.address]&&this._unMergeMaster(M))}}fillFormula(g,v,y){let b=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"shared";const C=a.decode(g),{top:T,left:M,bottom:U,right:L}=C,P=L-M+1,B=a.encodeAddress(T,M),q=b==="shared";let z;z=typeof y=="function"?y:Array.isArray(y)?Array.isArray(y[0])?(R,S)=>y[R-T][S-M]:(R,S)=>y[(R-T)*P+(S-M)]:()=>{};let k=!0;for(let R=T;R<=U;R++)for(let S=M;S<=L;S++)k?(this.getCell(R,S).value={shareType:b,formula:v,ref:g,result:z(R,S)},k=!1):this.getCell(R,S).value=q?{sharedFormula:B,result:z(R,S)}:z(R,S)}addImage(g,v){const y={type:"image",imageId:g,range:v};this._media.push(new f(this,y))}getImages(){return this._media.filter(g=>g.type==="image")}addBackgroundImage(g){const v={type:"background",imageId:g};this._media.push(new f(this,v))}getBackgroundImageId(){const g=this._media.find(v=>v.type==="background");return g&&g.imageId}protect(g,v){return new Promise(y=>{this.sheetProtection={sheet:!0},v&&"spinCount"in v&&(v.spinCount=Number.isFinite(v.spinCount)?Math.round(Math.max(0,v.spinCount)):1e5),g&&(this.sheetProtection.algorithmName="SHA-512",this.sheetProtection.saltValue=p.randomBytes(16).toString("base64"),this.sheetProtection.spinCount=v&&"spinCount"in v?v.spinCount:1e5,this.sheetProtection.hashValue=p.convertPasswordToHash(g,"SHA512",this.sheetProtection.saltValue,this.sheetProtection.spinCount)),v&&(this.sheetProtection=Object.assign(this.sheetProtection,v),!g&&"spinCount"in v&&delete this.sheetProtection.spinCount),y()})}unprotect(){this.sheetProtection=null}addTable(g){const v=new h(this,g);return this.tables[g.name]=v,v}getTable(g){return this.tables[g]}removeTable(g){delete this.tables[g]}getTables(){return Object.values(this.tables)}addConditionalFormatting(g){this.conditionalFormattings.push(g)}removeConditionalFormatting(g){typeof g=="number"?this.conditionalFormattings.splice(g,1):this.conditionalFormattings=g instanceof Function?this.conditionalFormattings.filter(g):[]}get tabColor(){return console.trace("worksheet.tabColor property is now deprecated. Please use worksheet.properties.tabColor"),this.properties.tabColor}set tabColor(g){console.trace("worksheet.tabColor property is now deprecated. Please use worksheet.properties.tabColor"),this.properties.tabColor=g}get model(){const g={id:this.id,name:this.name,dataValidations:this.dataValidations.model,properties:this.properties,state:this.state,pageSetup:this.pageSetup,headerFooter:this.headerFooter,rowBreaks:this.rowBreaks,views:this.views,autoFilter:this.autoFilter,media:this._media.map(b=>b.model),sheetProtection:this.sheetProtection,tables:Object.values(this.tables).map(b=>b.model),conditionalFormattings:this.conditionalFormattings};g.cols=i.toModel(this.columns);const v=g.rows=[],y=g.dimensions=new d;return this._rows.forEach(b=>{const C=b&&b.model;C&&(y.expand(C.number,C.min,C.number,C.max),v.push(C))}),g.merges=[],o.each(this._merges,b=>{g.merges.push(b.range)}),g}_parseRows(g){this._rows=[],g.rows.forEach(v=>{const y=new l(this,v.number);this._rows[y.number-1]=y,y.model=v})}_parseMergeCells(g){o.each(g.mergeCells,v=>{this.mergeCellsWithoutStyle(v)})}set model(g){this.name=g.name,this._columns=i.fromModel(this,g.cols),this._parseRows(g),this._parseMergeCells(g),this.dataValidations=new m(g.dataValidations),this.properties=g.properties,this.pageSetup=g.pageSetup,this.headerFooter=g.headerFooter,this.views=g.views,this.autoFilter=g.autoFilter,this._media=g.media.map(v=>new f(this,v)),this.sheetProtection=g.sheetProtection,this.tables=g.tables.reduce((v,y)=>{const b=new h;return b.model=y,v[y.name]=b,v},{}),this.conditionalFormattings=g.conditionalFormattings}}},{"../utils/col-cache":19,"../utils/copy-style":20,"../utils/encryptor":21,"../utils/under-dash":26,"./column":4,"./data-validations":5,"./enums":7,"./image":8,"./range":10,"./row":11,"./table":12}],15:[function(s,n,c){s("core-js/modules/es.promise"),s("core-js/modules/es.promise.finally"),s("core-js/modules/es.object.assign"),s("core-js/modules/es.object.keys"),s("core-js/modules/es.object.values"),s("core-js/modules/es.symbol"),s("core-js/modules/es.symbol.async-iterator"),s("core-js/modules/es.array.iterator"),s("core-js/modules/es.array.includes"),s("core-js/modules/es.array.find-index"),s("core-js/modules/es.array.find"),s("core-js/modules/es.string.from-code-point"),s("core-js/modules/es.string.includes"),s("core-js/modules/es.number.is-nan"),s("regenerator-runtime/runtime");const o={Workbook:s("./doc/workbook")},a=s("./doc/enums");Object.keys(a).forEach(d=>{o[d]=a[d]}),n.exports=o},{"./doc/enums":7,"./doc/workbook":13,"core-js/modules/es.array.find":359,"core-js/modules/es.array.find-index":358,"core-js/modules/es.array.includes":360,"core-js/modules/es.array.iterator":361,"core-js/modules/es.number.is-nan":363,"core-js/modules/es.object.assign":364,"core-js/modules/es.object.keys":366,"core-js/modules/es.object.values":367,"core-js/modules/es.promise":372,"core-js/modules/es.promise.finally":371,"core-js/modules/es.string.from-code-point":376,"core-js/modules/es.string.includes":377,"core-js/modules/es.symbol":381,"core-js/modules/es.symbol.async-iterator":378,"regenerator-runtime/runtime":492}],16:[function(s,n,c){const o=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");c.bufferToString=function(a){return typeof a=="string"?a:o?o.decode(a):a.toString()}},{}],17:[function(s,n,c){const o=typeof TextEncoder>"u"?null:new TextEncoder("utf-8"),{Buffer:a}=s("buffer");c.stringToBuffer=function(d){return typeof d!="string"?d:o?a.from(o.encode(d).buffer):a.from(d)}},{buffer:220}],18:[function(s,n,c){const o=s("./under-dash"),a=s("./col-cache");n.exports=class{constructor(d){this.template=d,this.sheets={}}addCell(d){this.addCellEx(a.decodeEx(d))}getCell(d){return this.findCellEx(a.decodeEx(d),!0)}findCell(d){return this.findCellEx(a.decodeEx(d),!1)}findCellAt(d,l,i){const u=this.sheets[d],f=u&&u[l];return f&&f[i]}addCellEx(d){if(d.top)for(let l=d.top;l<=d.bottom;l++)for(let i=d.left;i<=d.right;i++)this.getCellAt(d.sheetName,l,i);else this.findCellEx(d,!0)}getCellEx(d){return this.findCellEx(d,!0)}findCellEx(d,l){const i=this.findSheet(d,l),u=this.findSheetRow(i,d,l);return this.findRowCell(u,d,l)}getCellAt(d,l,i){const u=this.sheets[d]||(this.sheets[d]=[]),f=u[l]||(u[l]=[]);return f[i]||(f[i]={sheetName:d,address:a.n2l(i)+l,row:l,col:i})}removeCellEx(d){const l=this.findSheet(d);if(!l)return;const i=this.findSheetRow(l,d);i&&delete i[d.col]}forEachInSheet(d,l){const i=this.sheets[d];i&&i.forEach((u,f)=>{u&&u.forEach((h,m)=>{h&&l(h,f,m)})})}forEach(d){o.each(this.sheets,(l,i)=>{this.forEachInSheet(i,d)})}map(d){const l=[];return this.forEach(i=>{l.push(d(i))}),l}findSheet(d,l){const i=d.sheetName;return this.sheets[i]?this.sheets[i]:l?this.sheets[i]=[]:void 0}findSheetRow(d,l,i){const{row:u}=l;return d&&d[u]?d[u]:i?d[u]=[]:void 0}findRowCell(d,l,i){const{col:u}=l;return d&&d[u]?d[u]:i?d[u]=this.template?Object.assign(l,JSON.parse(JSON.stringify(this.template))):l:void 0}spliceRows(d,l,i,u){const f=this.sheets[d];if(f){const h=[];for(let m=0;m<u;m++)h.push([]);f.splice(l,i,...h)}}spliceColumns(d,l,i,u){const f=this.sheets[d];if(f){const h=[];for(let m=0;m<u;m++)h.push(null);o.each(f,m=>{m.splice(l,i,...h)})}}}},{"./col-cache":19,"./under-dash":26}],19:[function(s,n,c){const o=/^[A-Z]+\d+$/,a={_dictionary:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],_l2nFill:0,_l2n:{},_n2l:[],_level:d=>d<=26?1:d<=676?2:3,_fill(d){let l,i,u,f,h,m=1;if(d>=4)throw new Error("Out of bounds. Excel supports columns from 1 to 16384");if(this._l2nFill<1&&d>=1){for(;m<=26;)l=this._dictionary[m-1],this._n2l[m]=l,this._l2n[l]=m,m++;this._l2nFill=1}if(this._l2nFill<2&&d>=2){for(m=27;m<=702;)i=m-27,u=i%26,f=Math.floor(i/26),l=this._dictionary[f]+this._dictionary[u],this._n2l[m]=l,this._l2n[l]=m,m++;this._l2nFill=2}if(this._l2nFill<3&&d>=3){for(m=703;m<=16384;)i=m-703,u=i%26,f=Math.floor(i/26)%26,h=Math.floor(i/676),l=this._dictionary[h]+this._dictionary[f]+this._dictionary[u],this._n2l[m]=l,this._l2n[l]=m,m++;this._l2nFill=3}},l2n(d){if(this._l2n[d]||this._fill(d.length),!this._l2n[d])throw new Error("Out of bounds. Invalid column letter: "+d);return this._l2n[d]},n2l(d){if(d<1||d>16384)throw new Error(d+" is out of bounds. Excel supports columns from 1 to 16384");return this._n2l[d]||this._fill(this._level(d)),this._n2l[d]},_hash:{},validateAddress(d){if(!o.test(d))throw new Error("Invalid Address: "+d);return!0},decodeAddress(d){const l=d.length<5&&this._hash[d];if(l)return l;let i=!1,u="",f=0,h=!1,m="",p=0;for(let g,v=0;v<d.length;v++)if(g=d.charCodeAt(v),!h&&g>=65&&g<=90)i=!0,u+=d[v],f=26*f+g-64;else if(g>=48&&g<=57)h=!0,m+=d[v],p=10*p+g-48;else if(h&&i&&g!==36)break;if(i){if(f>16384)throw new Error("Out of bounds. Invalid column letter: "+u)}else f=void 0;h||(p=void 0);const x={address:d=u+m,col:f,row:p,$col$row:`$${u}$${m}`};return f<=100&&p<=100&&(this._hash[d]=x,this._hash[x.$col$row]=x),x},getAddress(d,l){if(l){const i=this.n2l(l)+d;return this.decodeAddress(i)}return this.decodeAddress(d)},decode(d){const l=d.split(":");if(l.length===2){const i=this.decodeAddress(l[0]),u=this.decodeAddress(l[1]),f={top:Math.min(i.row,u.row),left:Math.min(i.col,u.col),bottom:Math.max(i.row,u.row),right:Math.max(i.col,u.col)};return f.tl=this.n2l(f.left)+f.top,f.br=this.n2l(f.right)+f.bottom,f.dimensions=`${f.tl}:${f.br}`,f}return this.decodeAddress(d)},decodeEx(d){const l=d.match(/(?:(?:(?:'((?:[^']|'')*)')|([^'^ !]*))!)?(.*)/),i=l[1]||l[2],u=l[3],f=u.split(":");if(f.length>1){let m=this.decodeAddress(f[0]),p=this.decodeAddress(f[1]);const x=Math.min(m.row,p.row),g=Math.min(m.col,p.col),v=Math.max(m.row,p.row),y=Math.max(m.col,p.col);return m=this.n2l(g)+x,p=this.n2l(y)+v,{top:x,left:g,bottom:v,right:y,sheetName:i,tl:{address:m,col:g,row:x,$col$row:`$${this.n2l(g)}$${x}`,sheetName:i},br:{address:p,col:y,row:v,$col$row:`$${this.n2l(y)}$${v}`,sheetName:i},dimensions:`${m}:${p}`}}if(u.startsWith("#"))return i?{sheetName:i,error:u}:{error:u};const h=this.decodeAddress(u);return i?{sheetName:i,...h}:h},encodeAddress:(d,l)=>a.n2l(l)+d,encode(){switch(arguments.length){case 2:return a.encodeAddress(arguments[0],arguments[1]);case 4:return`${a.encodeAddress(arguments[0],arguments[1])}:${a.encodeAddress(arguments[2],arguments[3])}`;default:throw new Error("Can only encode with 2 or 4 arguments")}},inRange(d,l){const[i,u,,f,h]=d,[m,p]=l;return m>=i&&m<=f&&p>=u&&p<=h}};n.exports=a},{}],20:[function(s,n,c){const o=(d,l)=>({...d,...l.reduce((i,u)=>(d[u]&&(i[u]={...d[u]}),i),{})}),a=function(d,l,i){let u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];d[i]&&(l[i]=o(d[i],u))};c.copyStyle=d=>{if(!d)return d;if(l=d,Object.keys(l).length===0)return{};var l;const i={...d};return a(d,i,"font",["color"]),a(d,i,"alignment"),a(d,i,"protection"),d.border&&(a(d,i,"border"),a(d.border,i.border,"top",["color"]),a(d.border,i.border,"left",["color"]),a(d.border,i.border,"bottom",["color"]),a(d.border,i.border,"right",["color"]),a(d.border,i.border,"diagonal",["color"])),d.fill&&(a(d,i,"fill",["fgColor","bgColor","center"]),d.fill.stops&&(i.fill.stops=d.fill.stops.map(u=>o(u,["color"])))),i}},{}],21:[function(s,n,c){(function(o){(function(){const a=s("crypto"),d={hash(l){const i=a.createHash(l);for(var u=arguments.length,f=new Array(u>1?u-1:0),h=1;h<u;h++)f[h-1]=arguments[h];return i.update(o.concat(f)),i.digest()},convertPasswordToHash(l,i,u,f){if(i=i.toLowerCase(),a.getHashes().indexOf(i)<0)throw new Error(`Hash algorithm '${i}' not supported!`);const h=o.from(l,"utf16le");let m=this.hash(i,o.from(u,"base64"),h);for(let p=0;p<f;p++){const x=o.alloc(4);x.writeUInt32LE(p,0),m=this.hash(i,m,x)}return m.toString("base64")},randomBytes:l=>a.randomBytes(l)};n.exports=d}).call(this)}).call(this,s("buffer").Buffer)},{buffer:220,crypto:390}],22:[function(s,n,c){const{SaxesParser:o}=s("saxes"),{PassThrough:a}=s("readable-stream"),{bufferToString:d}=s("./browser-buffer-decode");n.exports=async function*(l){l.pipe&&!l[Symbol.asyncIterator]&&(l=l.pipe(new a));const i=new o;let u;i.on("error",h=>{u=h});let f=[];i.on("opentag",h=>f.push({eventType:"opentag",value:h})),i.on("text",h=>f.push({eventType:"text",value:h})),i.on("closetag",h=>f.push({eventType:"closetag",value:h}));for await(const h of l){if(i.write(d(h)),u)throw u;yield f,f=[]}}},{"./browser-buffer-decode":16,"readable-stream":491,saxes:496}],23:[function(s,n,c){const o=s("./col-cache"),a=/(([a-z_\-0-9]*)!)?([a-z0-9_$]{2,})([(])?/gi,d=/^([$])?([a-z]+)([$])?([1-9][0-9]*)$/i;n.exports={slideFormula:function(l,i,u){const f=o.decode(i),h=o.decode(u);return l.replace(a,(m,p,x,g,v)=>{if(v)return m;const y=d.exec(g);if(y){const b=y[1],C=y[2].toUpperCase(),T=y[3],M=y[4];if(C.length>3||C.length===3&&C>"XFD")return m;let U=o.l2n(C),L=parseInt(M,10);return b||(U+=h.col-f.col),T||(L+=h.row-f.row),(p||"")+(b||"")+o.n2l(U)+(T||"")+L}return m})}}},{"./col-cache":19}],24:[function(s,n,c){(function(o,a){(function(){const d=s("readable-stream"),l=s("./utils"),i=s("./string-buf");class u{constructor(g,v){this._data=g,this._encoding=v}get length(){return this.toBuffer().length}copy(g,v,y,b){return this.toBuffer().copy(g,v,y,b)}toBuffer(){return this._buffer||(this._buffer=a.from(this._data,this._encoding)),this._buffer}}class f{constructor(g){this._data=g}get length(){return this._data.length}copy(g,v,y,b){return this._data._buf.copy(g,v,y,b)}toBuffer(){return this._data.toBuffer()}}class h{constructor(g){this._data=g}get length(){return this._data.length}copy(g,v,y,b){this._data.copy(g,v,y,b)}toBuffer(){return this._data}}class m{constructor(g){this.size=g,this.buffer=a.alloc(g),this.iRead=0,this.iWrite=0}toBuffer(){if(this.iRead===0&&this.iWrite===this.size)return this.buffer;const g=a.alloc(this.iWrite-this.iRead);return this.buffer.copy(g,0,this.iRead,this.iWrite),g}get length(){return this.iWrite-this.iRead}get eod(){return this.iRead===this.iWrite}get full(){return this.iWrite===this.size}read(g){let v;return g===0?null:g===void 0||g>=this.length?(v=this.toBuffer(),this.iRead=this.iWrite,v):(v=a.alloc(g),this.buffer.copy(v,0,this.iRead,g),this.iRead+=g,v)}write(g,v,y){const b=Math.min(y,this.size-this.iWrite);return g.copy(this.buffer,this.iWrite,v,v+b),this.iWrite+=b,b}}const p=function(x){x=x||{},this.bufSize=x.bufSize||1048576,this.buffers=[],this.batch=x.batch||!1,this.corked=!1,this.inPos=0,this.outPos=0,this.pipes=[],this.paused=!1,this.encoding=null};l.inherits(p,d.Duplex,{toBuffer(){switch(this.buffers.length){case 0:return null;case 1:return this.buffers[0].toBuffer();default:return a.concat(this.buffers.map(x=>x.toBuffer()))}},_getWritableBuffer(){if(this.buffers.length){const g=this.buffers[this.buffers.length-1];if(!g.full)return g}const x=new m(this.bufSize);return this.buffers.push(x),x},async _pipe(x){await Promise.all(this.pipes.map(function(g){return new Promise(v=>{g.write(x.toBuffer(),()=>{v()})})}))},_writeToBuffers(x){let g=0;const v=x.length;for(;g<v;)g+=this._getWritableBuffer().write(x,g,v-g)},async write(x,g,v){let y;if(g instanceof Function&&(v=g,g="utf8"),v=v||l.nop,x instanceof i)y=new f(x);else if(x instanceof a)y=new h(x);else{if(!(typeof x=="string"||x instanceof String||x instanceof ArrayBuffer))throw new Error("Chunk must be one of type String, Buffer or StringBuf.");y=new u(x,g)}if(this.pipes.length)if(this.batch)for(this._writeToBuffers(y);!this.corked&&this.buffers.length>1;)this._pipe(this.buffers.shift());else this.corked?(this._writeToBuffers(y),o.nextTick(v)):(await this._pipe(y),v());else this.paused||this.emit("data",y.toBuffer()),this._writeToBuffers(y),this.emit("readable");return!0},cork(){this.corked=!0},_flush(){if(this.pipes.length)for(;this.buffers.length;)this._pipe(this.buffers.shift())},uncork(){this.corked=!1,this._flush()},end(x,g,v){const y=b=>{b?v(b):(this._flush(),this.pipes.forEach(C=>{C.end()}),this.emit("finish"))};x?this.write(x,g,y):y()},read(x){let g;if(x){for(g=[];x&&this.buffers.length&&!this.buffers[0].eod;){const v=this.buffers[0],y=v.read(x);x-=y.length,g.push(y),v.eod&&v.full&&this.buffers.shift()}return a.concat(g)}return g=this.buffers.map(v=>v.toBuffer()).filter(Boolean),this.buffers=[],a.concat(g)},setEncoding(x){this.encoding=x},pause(){this.paused=!0},resume(){this.paused=!1},isPaused(){return!!this.paused},pipe(x){this.pipes.push(x),!this.paused&&this.buffers.length&&this.end()},unpipe(x){this.pipes=this.pipes.filter(g=>g!==x)},unshift(){throw new Error("Not Implemented")},wrap(){throw new Error("Not Implemented")}}),n.exports=p}).call(this)}).call(this,s("_process"),s("buffer").Buffer)},{"./string-buf":25,"./utils":27,_process:467,buffer:220,"readable-stream":491}],25:[function(s,n,c){(function(o){(function(){n.exports=class{constructor(a){this._buf=o.alloc(a&&a.size||16384),this._encoding=a&&a.encoding||"utf8",this._inPos=0,this._buffer=void 0}get length(){return this._inPos}get capacity(){return this._buf.length}get buffer(){return this._buf}toBuffer(){return this._buffer||(this._buffer=o.alloc(this.length),this._buf.copy(this._buffer,0,0,this.length)),this._buffer}reset(a){a=a||0,this._buffer=void 0,this._inPos=a}_grow(a){let d=2*this._buf.length;for(;d<a;)d*=2;const l=o.alloc(d);this._buf.copy(l,0),this._buf=l}addText(a){this._buffer=void 0;let d=this._inPos+this._buf.write(a,this._inPos,this._encoding);for(;d>=this._buf.length-4;)this._grow(this._inPos+a.length),d=this._inPos+this._buf.write(a,this._inPos,this._encoding);this._inPos=d}addStringBuf(a){a.length&&(this._buffer=void 0,this.length+a.length>this.capacity&&this._grow(this.length+a.length),a._buf.copy(this._buf,this._inPos,0,a.length),this._inPos+=a.length)}}}).call(this)}).call(this,s("buffer").Buffer)},{buffer:220}],26:[function(s,n,c){const{toString:o}=Object.prototype,a=/["&<>]/,d={each:function(l,i){l&&(Array.isArray(l)?l.forEach(i):Object.keys(l).forEach(u=>{i(l[u],u)}))},some:function(l,i){return!!l&&(Array.isArray(l)?l.some(i):Object.keys(l).some(u=>i(l[u],u)))},every:function(l,i){return!l||(Array.isArray(l)?l.every(i):Object.keys(l).every(u=>i(l[u],u)))},map:function(l,i){return l?Array.isArray(l)?l.map(i):Object.keys(l).map(u=>i(l[u],u)):[]},keyBy:(l,i)=>l.reduce((u,f)=>(u[f[i]]=f,u),{}),isEqual:function(l,i){const u=typeof l,f=typeof i,h=Array.isArray(l),m=Array.isArray(i);let p;if(u!==f)return!1;switch(typeof l){case"object":if(h||m)return!(!h||!m)&&l.length===i.length&&l.every((x,g)=>{const v=i[g];return d.isEqual(x,v)});if(l===null||i===null)return l===i;if(p=Object.keys(l),Object.keys(i).length!==p.length)return!1;for(const x of p)if(!i.hasOwnProperty(x))return!1;return d.every(l,(x,g)=>{const v=i[g];return d.isEqual(x,v)});default:return l===i}},escapeHtml(l){const i=a.exec(l);if(!i)return l;let u="",f="",h=0,m=i.index;for(;m<l.length;m++){switch(l.charAt(m)){case'"':f="&quot;";break;case"&":f="&amp;";break;case"'":f="&apos;";break;case"<":f="&lt;";break;case">":f="&gt;";break;default:continue}h!==m&&(u+=l.substring(h,m)),h=m+1,u+=f}return h!==m?u+l.substring(h,m):u},strcmp:(l,i)=>l<i?-1:l>i?1:0,isUndefined:l=>o.call(l)==="[object Undefined]",isObject:l=>o.call(l)==="[object Object]",deepMerge(){const l=arguments[0]||{},{length:i}=arguments;let u,f,h;function m(p,x){u=l[x],h=Array.isArray(p),d.isObject(p)||h?(h?(h=!1,f=u&&Array.isArray(u)?u:[]):f=u&&d.isObject(u)?u:{},l[x]=d.deepMerge(f,p)):d.isUndefined(p)||(l[x]=p)}for(let p=0;p<i;p++)d.each(arguments[p],m);return l}};n.exports=d},{}],27:[function(s,n,c){(function(o,a){(function(){const d=s("fs"),l=/[<>&'"\x7F\x00-\x08\x0B-\x0C\x0E-\x1F]/,i={nop(){},promiseImmediate:u=>new Promise(f=>{o.setImmediate?a(()=>{f(u)}):setTimeout(()=>{f(u)},1)}),inherits:function(u,f,h,m){u.super_=f,m||(m=h,h=null),h&&Object.keys(h).forEach(x=>{Object.defineProperty(u,x,Object.getOwnPropertyDescriptor(h,x))});const p={constructor:{value:u,enumerable:!1,writable:!1,configurable:!0}};m&&Object.keys(m).forEach(x=>{p[x]=Object.getOwnPropertyDescriptor(m,x)}),u.prototype=Object.create(f.prototype,p)},dateToExcel:(u,f)=>25569+u.getTime()/864e5-(f?1462:0),excelToDate(u,f){const h=Math.round(24*(u-25569+(f?1462:0))*3600*1e3);return new Date(h)},parsePath(u){const f=u.lastIndexOf("/");return{path:u.substring(0,f),name:u.substring(f+1)}},getRelsPath(u){const f=i.parsePath(u);return`${f.path}/_rels/${f.name}.rels`},xmlEncode(u){const f=l.exec(u);if(!f)return u;let h="",m="",p=0,x=f.index;for(;x<u.length;x++){const g=u.charCodeAt(x);switch(g){case 34:m="&quot;";break;case 38:m="&amp;";break;case 39:m="&apos;";break;case 60:m="&lt;";break;case 62:m="&gt;";break;case 127:m="";break;default:if(g<=31&&(g<=8||g>=11&&g!==13)){m="";break}continue}p!==x&&(h+=u.substring(p,x)),p=x+1,m&&(h+=m)}return p!==x?h+u.substring(p,x):h},xmlDecode:u=>u.replace(/&([a-z]*);/g,f=>{switch(f){case"&lt;":return"<";case"&gt;":return">";case"&amp;":return"&";case"&apos;":return"'";case"&quot;":return'"';default:return f}}),validInt(u){const f=parseInt(u,10);return Number.isNaN(f)?0:f},isDateFmt(u){return u?(u=(u=u.replace(/\[[^\]]*]/g,"")).replace(/"[^"]*"/g,"")).match(/[ymdhMsb]+/)!==null:!1},fs:{exists:u=>new Promise(f=>{d.access(u,d.constants.F_OK,h=>{f(!h)})})},toIsoDateString:u=>u.toIsoString().subsstr(0,10),parseBoolean:u=>u===!0||u==="true"||u===1||u==="1"};n.exports=i}).call(this)}).call(this,typeof _s<"u"?_s:typeof self<"u"?self:typeof window<"u"?window:{},s("timers").setImmediate)},{fs:216,timers:523}],28:[function(s,n,c){const o=s("./under-dash"),a=s("./utils");function d(u,f,h){u.push(` ${f}="${a.xmlEncode(h.toString())}"`)}function l(u,f){if(f){const h=[];o.each(f,(m,p)=>{m!==void 0&&d(h,p,m)}),u.push(h.join(""))}}class i{constructor(){this._xml=[],this._stack=[],this._rollbacks=[]}get tos(){return this._stack.length?this._stack[this._stack.length-1]:void 0}get cursor(){return this._xml.length}openXml(f){const h=this._xml;h.push("<?xml"),l(h,f),h.push(`?>
`)}openNode(f,h){const m=this.tos,p=this._xml;m&&this.open&&p.push(">"),this._stack.push(f),p.push("<"),p.push(f),l(p,h),this.leaf=!0,this.open=!0}addAttribute(f,h){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");h!==void 0&&d(this._xml,f,h)}addAttributes(f){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");l(this._xml,f)}writeText(f){const h=this._xml;this.open&&(h.push(">"),this.open=!1),this.leaf=!1,h.push(a.xmlEncode(f.toString()))}writeXml(f){this.open&&(this._xml.push(">"),this.open=!1),this.leaf=!1,this._xml.push(f)}closeNode(){const f=this._stack.pop(),h=this._xml;this.leaf?h.push("/>"):(h.push("</"),h.push(f),h.push(">")),this.open=!1,this.leaf=!1}leafNode(f,h,m){this.openNode(f,h),m!==void 0&&this.writeText(m),this.closeNode()}closeAll(){for(;this._stack.length;)this.closeNode()}addRollback(){return this._rollbacks.push({xml:this._xml.length,stack:this._stack.length,leaf:this.leaf,open:this.open}),this.cursor}commit(){this._rollbacks.pop()}rollback(){const f=this._rollbacks.pop();this._xml.length>f.xml&&this._xml.splice(f.xml,this._xml.length-f.xml),this._stack.length>f.stack&&this._stack.splice(f.stack,this._stack.length-f.stack),this.leaf=f.leaf,this.open=f.open}get xml(){return this.closeAll(),this._xml.join("")}}i.StdDocAttributes={version:"1.0",encoding:"UTF-8",standalone:"yes"},n.exports=i},{"./under-dash":26,"./utils":27}],29:[function(s,n,c){(function(o){(function(){const a=s("events"),d=s("jszip"),l=s("./stream-buf"),{stringToBuffer:i}=s("./browser-buffer-encode");class u extends a.EventEmitter{constructor(h){super(),this.options=Object.assign({type:"nodebuffer",compression:"DEFLATE"},h),this.zip=new d,this.stream=new l}append(h,m){m.hasOwnProperty("base64")&&m.base64?this.zip.file(m.name,h,{base64:!0}):(o.browser&&typeof h=="string"&&(h=i(h)),this.zip.file(m.name,h))}async finalize(){const h=await this.zip.generateAsync(this.options);this.stream.end(h),this.emit("finish")}read(h){return this.stream.read(h)}setEncoding(h){return this.stream.setEncoding(h)}pause(){return this.stream.pause()}resume(){return this.stream.resume()}isPaused(){return this.stream.isPaused()}pipe(h,m){return this.stream.pipe(h,m)}unpipe(h){return this.stream.unpipe(h)}unshift(h){return this.stream.unshift(h)}wrap(h){return this.stream.wrap(h)}}n.exports={ZipWriter:u}}).call(this)}).call(this,s("_process"))},{"./browser-buffer-encode":17,"./stream-buf":24,_process:467,events:422,jszip:441}],30:[function(s,n,c){n.exports={0:{f:"General"},1:{f:"0"},2:{f:"0.00"},3:{f:"#,##0"},4:{f:"#,##0.00"},9:{f:"0%"},10:{f:"0.00%"},11:{f:"0.00E+00"},12:{f:"# ?/?"},13:{f:"# ??/??"},14:{f:"mm-dd-yy"},15:{f:"d-mmm-yy"},16:{f:"d-mmm"},17:{f:"mmm-yy"},18:{f:"h:mm AM/PM"},19:{f:"h:mm:ss AM/PM"},20:{f:"h:mm"},21:{f:"h:mm:ss"},22:{f:'m/d/yy "h":mm'},27:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},28:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},29:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},30:{"zh-tw":"m/d/yy ","zh-cn":"m-d-yy","ja-jp":"m/d/yy","ko-kr":"mm-dd-yy"},31:{"zh-tw":'yyyy""m""d""',"zh-cn":'yyyy""m""d""',"ja-jp":'yyyy""m""d""',"ko-kr":'yyyy"" mm"" dd""'},32:{"zh-tw":'hh""mm""',"zh-cn":'h""mm""',"ja-jp":'h""mm""',"ko-kr":'h"" mm""'},33:{"zh-tw":'hh""mm""ss""',"zh-cn":'h""mm""ss""',"ja-jp":'h""mm""ss""',"ko-kr":'h"" mm"" ss""'},34:{"zh-tw":'/ hh""mm""',"zh-cn":'/ h""mm""',"ja-jp":'yyyy""m""',"ko-kr":"yyyy-mm-dd"},35:{"zh-tw":'/ hh""mm""ss""',"zh-cn":'/ h""mm""ss""',"ja-jp":'m""d""',"ko-kr":"yyyy-mm-dd"},36:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},37:{f:"#,##0 ;(#,##0)"},38:{f:"#,##0 ;[Red](#,##0)"},39:{f:"#,##0.00 ;(#,##0.00)"},40:{f:"#,##0.00 ;[Red](#,##0.00)"},45:{f:"mm:ss"},46:{f:"[h]:mm:ss"},47:{f:"mmss.0"},48:{f:"##0.0E+0"},49:{f:"@"},50:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},51:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},52:{"zh-tw":'/ hh""mm""',"zh-cn":'yyyy""m""',"ja-jp":'yyyy""m""',"ko-kr":"yyyy-mm-dd"},53:{"zh-tw":'/ hh""mm""ss""',"zh-cn":'m""d""',"ja-jp":'m""d""',"ko-kr":"yyyy-mm-dd"},54:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},55:{"zh-tw":'/ hh""mm""',"zh-cn":'/ h""mm""',"ja-jp":'yyyy""m""',"ko-kr":"yyyy-mm-dd"},56:{"zh-tw":'/ hh""mm""ss""',"zh-cn":'/ h""mm""ss""',"ja-jp":'m""d""',"ko-kr":"yyyy-mm-dd"},57:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},58:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},59:{"th-th":"t0"},60:{"th-th":"t0.00"},61:{"th-th":"t#,##0"},62:{"th-th":"t#,##0.00"},67:{"th-th":"t0%"},68:{"th-th":"t0.00%"},69:{"th-th":"t# ?/?"},70:{"th-th":"t# ??/??"},81:{"th-th":"d/m/bb"}}},{}],31:[function(s,n,c){n.exports={OfficeDocument:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Worksheet:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",CalcChain:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/calcChain",SharedStrings:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Styles:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Theme:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Hyperlink:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",Image:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",CoreProperties:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",ExtenderProperties:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",Comments:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",VmlDrawing:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",Table:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/table"}},{}],32:[function(s,n,c){const o=s("../../utils/parse-sax"),a=s("../../utils/xml-stream");class d{prepare(){}render(){}parseOpen(i){}parseText(i){}parseClose(i){}reconcile(i,u){}reset(){this.model=null,this.map&&Object.values(this.map).forEach(i=>{i instanceof d?i.reset():i.xform&&i.xform.reset()})}mergeModel(i){this.model=Object.assign(this.model||{},i)}async parse(i){for await(const u of i)for(const{eventType:f,value:h}of u)if(f==="opentag")this.parseOpen(h);else if(f==="text")this.parseText(h);else if(f==="closetag"&&!this.parseClose(h.name))return this.model;return this.model}async parseStream(i){return this.parse(o(i))}get xml(){return this.toXml(this.model)}toXml(i){const u=new a;return this.render(u,i),u.xml}static toAttribute(i,u){let f=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(i===void 0){if(f)return u}else if(f||i!==u)return i.toString()}static toStringAttribute(i,u){let f=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return d.toAttribute(i,u,f)}static toStringValue(i,u){return i===void 0?u:i}static toBoolAttribute(i,u){let f=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(i===void 0){if(f)return u}else if(f||i!==u)return i?"1":"0"}static toBoolValue(i,u){return i===void 0?u:i==="1"}static toIntAttribute(i,u){let f=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return d.toAttribute(i,u,f)}static toIntValue(i,u){return i===void 0?u:parseInt(i,10)}static toFloatAttribute(i,u){let f=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return d.toAttribute(i,u,f)}static toFloatValue(i,u){return i===void 0?u:parseFloat(i)}}n.exports=d},{"../../utils/parse-sax":22,"../../utils/xml-stream":28}],33:[function(s,n,c){const o=s("../base-xform"),a=s("../../../utils/col-cache");function d(i){try{return a.decodeEx(i),!0}catch{return!1}}function l(i){const u=[];let f=!1,h="";return i.split(",").forEach(m=>{if(!m)return;const p=(m.match(/'/g)||[]).length;if(!p)return void(f?h+=m+",":d(m)&&u.push(m));const x=p%2==0;!f&&x&&d(m)?u.push(m):f&&!x?(f=!1,d(h+m)&&u.push(h+m),h=""):(f=!0,h+=m+",")}),u}n.exports=class extends o{render(i,u){i.openNode("definedName",{name:u.name,localSheetId:u.localSheetId}),i.writeText(u.ranges.join(",")),i.closeNode()}parseOpen(i){switch(i.name){case"definedName":return this._parsedName=i.attributes.name,this._parsedLocalSheetId=i.attributes.localSheetId,this._parsedText=[],!0;default:return!1}}parseText(i){this._parsedText.push(i)}parseClose(){return this.model={name:this._parsedName,ranges:l(this._parsedText.join(""))},this._parsedLocalSheetId!==void 0&&(this.model.localSheetId=parseInt(this._parsedLocalSheetId,10)),!1}}},{"../../../utils/col-cache":19,"../base-xform":32}],34:[function(s,n,c){const o=s("../../../utils/utils"),a=s("../base-xform");n.exports=class extends a{render(d,l){d.leafNode("sheet",{sheetId:l.id,name:l.name,state:l.state,"r:id":l.rId})}parseOpen(d){return d.name==="sheet"&&(this.model={name:o.xmlDecode(d.attributes.name),id:parseInt(d.attributes.sheetId,10),state:d.attributes.state,rId:d.attributes["r:id"]},!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/utils":27,"../base-xform":32}],35:[function(s,n,c){const o=s("../base-xform");n.exports=class extends o{render(a,d){a.leafNode("calcPr",{calcId:171027,fullCalcOnLoad:d.fullCalcOnLoad?1:void 0})}parseOpen(a){return a.name==="calcPr"&&(this.model={},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],36:[function(s,n,c){const o=s("../base-xform");n.exports=class extends o{render(a,d){a.leafNode("workbookPr",{date1904:d.date1904?1:void 0,defaultThemeVersion:164011,filterPrivacy:1})}parseOpen(a){return a.name==="workbookPr"&&(this.model={date1904:a.attributes.date1904==="1"},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],37:[function(s,n,c){const o=s("../base-xform");n.exports=class extends o{render(a,d){const l={xWindow:d.x||0,yWindow:d.y||0,windowWidth:d.width||12e3,windowHeight:d.height||24e3,firstSheet:d.firstSheet,activeTab:d.activeTab};d.visibility&&d.visibility!=="visible"&&(l.visibility=d.visibility),a.leafNode("workbookView",l)}parseOpen(a){if(a.name==="workbookView"){const d=this.model={},l=function(u,f,h){const m=f!==void 0?d[u]=f:h;m!==void 0&&(d[u]=m)},i=function(u,f,h){const m=f!==void 0?d[u]=parseInt(f,10):h;m!==void 0&&(d[u]=m)};return i("x",a.attributes.xWindow,0),i("y",a.attributes.yWindow,0),i("width",a.attributes.windowWidth,25e3),i("height",a.attributes.windowHeight,1e4),l("visibility",a.attributes.visibility,"visible"),i("activeTab",a.attributes.activeTab,void 0),i("firstSheet",a.attributes.firstSheet,void 0),!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],38:[function(s,n,c){const o=s("../../../utils/under-dash"),a=s("../../../utils/col-cache"),d=s("../../../utils/xml-stream"),l=s("../base-xform"),i=s("../static-xform"),u=s("../list-xform"),f=s("./defined-name-xform"),h=s("./sheet-xform"),m=s("./workbook-view-xform"),p=s("./workbook-properties-xform"),x=s("./workbook-calc-properties-xform");class g extends l{constructor(){super(),this.map={fileVersion:g.STATIC_XFORMS.fileVersion,workbookPr:new p,bookViews:new u({tag:"bookViews",count:!1,childXform:new m}),sheets:new u({tag:"sheets",count:!1,childXform:new h}),definedNames:new u({tag:"definedNames",count:!1,childXform:new f}),calcPr:new x}}prepare(y){y.sheets=y.worksheets;const b=[];let C=0;y.sheets.forEach(T=>{if(T.pageSetup&&T.pageSetup.printArea&&T.pageSetup.printArea.split("&&").forEach(M=>{const U=M.split(":"),L={name:"_xlnm.Print_Area",ranges:[`'${T.name}'!$${U[0]}:$${U[1]}`],localSheetId:C};b.push(L)}),T.pageSetup&&(T.pageSetup.printTitlesRow||T.pageSetup.printTitlesColumn)){const M=[];if(T.pageSetup.printTitlesColumn){const L=T.pageSetup.printTitlesColumn.split(":");M.push(`'${T.name}'!$${L[0]}:$${L[1]}`)}if(T.pageSetup.printTitlesRow){const L=T.pageSetup.printTitlesRow.split(":");M.push(`'${T.name}'!$${L[0]}:$${L[1]}`)}const U={name:"_xlnm.Print_Titles",ranges:M,localSheetId:C};b.push(U)}C++}),b.length&&(y.definedNames=y.definedNames.concat(b)),(y.media||[]).forEach((T,M)=>{T.name=T.type+(M+1)})}render(y,b){y.openXml(d.StdDocAttributes),y.openNode("workbook",g.WORKBOOK_ATTRIBUTES),this.map.fileVersion.render(y),this.map.workbookPr.render(y,b.properties),this.map.bookViews.render(y,b.views),this.map.sheets.render(y,b.sheets),this.map.definedNames.render(y,b.definedNames),this.map.calcPr.render(y,b.calcProperties),y.closeNode()}parseOpen(y){if(this.parser)return this.parser.parseOpen(y),!0;switch(y.name){case"workbook":return!0;default:return this.parser=this.map[y.name],this.parser&&this.parser.parseOpen(y),!0}}parseText(y){this.parser&&this.parser.parseText(y)}parseClose(y){if(this.parser)return this.parser.parseClose(y)||(this.parser=void 0),!0;switch(y){case"workbook":return this.model={sheets:this.map.sheets.model,properties:this.map.workbookPr.model||{},views:this.map.bookViews.model,calcProperties:{}},this.map.definedNames.model&&(this.model.definedNames=this.map.definedNames.model),!1;default:return!0}}reconcile(y){const b=(y.workbookRels||[]).reduce((L,P)=>(L[P.Id]=P,L),{}),C=[];let T,M=0;(y.sheets||[]).forEach(L=>{const P=b[L.rId];P&&(T=y.worksheetHash["xl/"+P.Target.replace(/^(\s|\/xl\/)+/,"")],T&&(T.name=L.name,T.id=L.id,T.state=L.state,C[M++]=T))});const U=[];o.each(y.definedNames,L=>{if(L.name==="_xlnm.Print_Area"){if(T=C[L.localSheetId],T){T.pageSetup||(T.pageSetup={});const P=a.decodeEx(L.ranges[0]);T.pageSetup.printArea=T.pageSetup.printArea?`${T.pageSetup.printArea}&&${P.dimensions}`:P.dimensions}}else if(L.name==="_xlnm.Print_Titles"){if(T=C[L.localSheetId],T){T.pageSetup||(T.pageSetup={});const P=L.ranges.join(","),B=/\$/g,q=/\$\d+:\$\d+/,z=P.match(q);if(z&&z.length){const S=z[0];T.pageSetup.printTitlesRow=S.replace(B,"")}const k=/\$[A-Z]+:\$[A-Z]+/,R=P.match(k);if(R&&R.length){const S=R[0];T.pageSetup.printTitlesColumn=S.replace(B,"")}}}else U.push(L)}),y.definedNames=U,y.media.forEach((L,P)=>{L.index=P})}}g.WORKBOOK_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x15","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},g.STATIC_XFORMS={fileVersion:new i({tag:"fileVersion",$:{appName:"xl",lastEdited:5,lowestEdited:5,rupBuild:9303}})},n.exports=g},{"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"../static-xform":120,"./defined-name-xform":33,"./sheet-xform":34,"./workbook-calc-properties-xform":35,"./workbook-properties-xform":36,"./workbook-view-xform":37}],39:[function(s,n,c){const o=s("../strings/rich-text-xform"),a=s("../../../utils/utils"),d=s("../base-xform"),l=n.exports=function(i){this.model=i};a.inherits(l,d,{get tag(){return"r"},get richTextXform(){return this._richTextXform||(this._richTextXform=new o),this._richTextXform},render(i,u){u=u||this.model,i.openNode("comment",{ref:u.ref,authorId:0}),i.openNode("text"),u&&u.note&&u.note.texts&&u.note.texts.forEach(f=>{this.richTextXform.render(i,f)}),i.closeNode(),i.closeNode()},parseOpen(i){if(this.parser)return this.parser.parseOpen(i),!0;switch(i.name){case"comment":return this.model={type:"note",note:{texts:[]},...i.attributes},!0;case"r":return this.parser=this.richTextXform,this.parser.parseOpen(i),!0;default:return!1}},parseText(i){this.parser&&this.parser.parseText(i)},parseClose(i){switch(i){case"comment":return!1;case"r":return this.model.note.texts.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(i),!0}}})},{"../../../utils/utils":27,"../base-xform":32,"../strings/rich-text-xform":122}],40:[function(s,n,c){const o=s("../../../utils/xml-stream"),a=s("../../../utils/utils"),d=s("../base-xform"),l=s("./comment-xform"),i=n.exports=function(){this.map={comment:new l}};a.inherits(i,d,{COMMENTS_ATTRIBUTES:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},{render(u,f){f=f||this.model,u.openXml(o.StdDocAttributes),u.openNode("comments",i.COMMENTS_ATTRIBUTES),u.openNode("authors"),u.leafNode("author",null,"Author"),u.closeNode(),u.openNode("commentList"),f.comments.forEach(h=>{this.map.comment.render(u,h)}),u.closeNode(),u.closeNode()},parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"commentList":return this.model={comments:[]},!0;case"comment":return this.parser=this.map.comment,this.parser.parseOpen(u),!0;default:return!1}},parseText(u){this.parser&&this.parser.parseText(u)},parseClose(u){switch(u){case"commentList":return!1;case"comment":return this.model.comments.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(u),!0}}})},{"../../../utils/utils":27,"../../../utils/xml-stream":28,"../base-xform":32,"./comment-xform":39}],41:[function(s,n,c){const o=s("../../base-xform");n.exports=class extends o{constructor(a){super(),this._model=a}get tag(){return this._model&&this._model.tag}render(a,d,l){(d===l[2]||this.tag==="x:SizeWithCells"&&d===l[1])&&a.leafNode(this.tag)}parseOpen(a){switch(a.name){case this.tag:return this.model={},this.model[this.tag]=!0,!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../base-xform":32}],42:[function(s,n,c){const o=s("../../base-xform");n.exports=class extends o{constructor(a){super(),this._model=a}get tag(){return this._model&&this._model.tag}render(a,d){a.leafNode(this.tag,null,d)}parseOpen(a){switch(a.name){case this.tag:return this.text="",!0;default:return!1}}parseText(a){this.text=a}parseClose(){return!1}}},{"../../base-xform":32}],43:[function(s,n,c){const o=s("../base-xform");n.exports=class extends o{get tag(){return"x:Anchor"}getAnchorRect(a){const d=Math.floor(a.left),l=Math.floor(68*(a.left-d)),i=Math.floor(a.top),u=Math.floor(18*(a.top-i)),f=Math.floor(a.right),h=Math.floor(68*(a.right-f)),m=Math.floor(a.bottom);return[d,l,i,u,f,h,m,Math.floor(18*(a.bottom-m))]}getDefaultRect(a){const d=a.col,l=Math.max(a.row-2,0);return[d,6,l,14,d+2,2,l+4,16]}render(a,d){const l=d.anchor?this.getAnchorRect(d.anchor):this.getDefaultRect(d.refAddress);a.leafNode("x:Anchor",null,l.join(", "))}parseOpen(a){switch(a.name){case this.tag:return this.text="",!0;default:return!1}}parseText(a){this.text=a}parseClose(){return!1}}},{"../base-xform":32}],44:[function(s,n,c){const o=s("../base-xform"),a=s("./vml-anchor-xform"),d=s("./style/vml-protection-xform"),l=s("./style/vml-position-xform"),i=["twoCells","oneCells","absolute"];n.exports=class extends o{constructor(){super(),this.map={"x:Anchor":new a,"x:Locked":new d({tag:"x:Locked"}),"x:LockText":new d({tag:"x:LockText"}),"x:SizeWithCells":new l({tag:"x:SizeWithCells"}),"x:MoveWithCells":new l({tag:"x:MoveWithCells"})}}get tag(){return"x:ClientData"}render(u,f){const{protection:h,editAs:m}=f.note;u.openNode(this.tag,{ObjectType:"Note"}),this.map["x:MoveWithCells"].render(u,m,i),this.map["x:SizeWithCells"].render(u,m,i),this.map["x:Anchor"].render(u,f),this.map["x:Locked"].render(u,h.locked),u.leafNode("x:AutoFill",null,"False"),this.map["x:LockText"].render(u,h.lockText),u.leafNode("x:Row",null,f.refAddress.row-1),u.leafNode("x:Column",null,f.refAddress.col-1),u.closeNode()}parseOpen(u){switch(u.name){case this.tag:this.reset(),this.model={anchor:[],protection:{},editAs:""};break;default:this.parser=this.map[u.name],this.parser&&this.parser.parseOpen(u)}return!0}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.parser=void 0),!0;switch(u){case this.tag:return this.normalizeModel(),!1;default:return!0}}normalizeModel(){const u=Object.assign({},this.map["x:MoveWithCells"].model,this.map["x:SizeWithCells"].model),f=Object.keys(u).length;this.model.editAs=i[f],this.model.anchor=this.map["x:Anchor"].text,this.model.protection.locked=this.map["x:Locked"].text,this.model.protection.lockText=this.map["x:LockText"].text}}},{"../base-xform":32,"./style/vml-position-xform":41,"./style/vml-protection-xform":42,"./vml-anchor-xform":43}],45:[function(s,n,c){const o=s("../../../utils/xml-stream"),a=s("../base-xform"),d=s("./vml-shape-xform");class l extends a{constructor(){super(),this.map={"v:shape":new d}}get tag(){return"xml"}render(u,f){u.openXml(o.StdDocAttributes),u.openNode(this.tag,l.DRAWING_ATTRIBUTES),u.openNode("o:shapelayout",{"v:ext":"edit"}),u.leafNode("o:idmap",{"v:ext":"edit",data:1}),u.closeNode(),u.openNode("v:shapetype",{id:"_x0000_t202",coordsize:"21600,21600","o:spt":202,path:"m,l,21600r21600,l21600,xe"}),u.leafNode("v:stroke",{joinstyle:"miter"}),u.leafNode("v:path",{gradientshapeok:"t","o:connecttype":"rect"}),u.closeNode(),f.comments.forEach((h,m)=>{this.map["v:shape"].render(u,h,m)}),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case this.tag:this.reset(),this.model={comments:[]};break;default:this.parser=this.map[u.name],this.parser&&this.parser.parseOpen(u)}return!0}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.model.comments.push(this.parser.model),this.parser=void 0),!0;switch(u){case this.tag:return!1;default:return!0}}reconcile(u,f){u.anchors.forEach(h=>{h.br?this.map["xdr:twoCellAnchor"].reconcile(h,f):this.map["xdr:oneCellAnchor"].reconcile(h,f)})}}l.DRAWING_ATTRIBUTES={"xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:x":"urn:schemas-microsoft-com:office:excel"},n.exports=l},{"../../../utils/xml-stream":28,"../base-xform":32,"./vml-shape-xform":46}],46:[function(s,n,c){const o=s("../base-xform"),a=s("./vml-textbox-xform"),d=s("./vml-client-data-xform");class l extends o{constructor(){super(),this.map={"v:textbox":new a,"x:ClientData":new d}}get tag(){return"v:shape"}render(u,f,h){u.openNode("v:shape",l.V_SHAPE_ATTRIBUTES(f,h)),u.leafNode("v:fill",{color2:"infoBackground [80]"}),u.leafNode("v:shadow",{color:"none [81]",obscured:"t"}),u.leafNode("v:path",{"o:connecttype":"none"}),this.map["v:textbox"].render(u,f),this.map["x:ClientData"].render(u,f),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case this.tag:this.reset(),this.model={margins:{insetmode:u.attributes["o:insetmode"]},anchor:"",editAs:"",protection:{}};break;default:this.parser=this.map[u.name],this.parser&&this.parser.parseOpen(u)}return!0}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.parser=void 0),!0;switch(u){case this.tag:return this.model.margins.inset=this.map["v:textbox"].model&&this.map["v:textbox"].model.inset,this.model.protection=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.protection,this.model.anchor=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.anchor,this.model.editAs=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.editAs,!1;default:return!0}}}l.V_SHAPE_ATTRIBUTES=(i,u)=>({id:"_x0000_s"+(1025+u),type:"#_x0000_t202",style:"position:absolute; margin-left:105.3pt;margin-top:10.5pt;width:97.8pt;height:59.1pt;z-index:1;visibility:hidden",fillcolor:"infoBackground [80]",strokecolor:"none [81]","o:insetmode":i.note.margins&&i.note.margins.insetmode}),n.exports=l},{"../base-xform":32,"./vml-client-data-xform":44,"./vml-textbox-xform":47}],47:[function(s,n,c){const o=s("../base-xform");n.exports=class extends o{get tag(){return"v:textbox"}conversionUnit(a,d,l){return`${parseFloat(a)*d.toFixed(2)}${l}`}reverseConversionUnit(a){return(a||"").split(",").map(d=>Number(parseFloat(this.conversionUnit(parseFloat(d),.1,"")).toFixed(2)))}render(a,d){const l={style:"mso-direction-alt:auto"};if(d&&d.note){let{inset:i}=d.note&&d.note.margins;Array.isArray(i)&&(i=i.map(u=>this.conversionUnit(u,10,"mm")).join(",")),i&&(l.inset=i)}a.openNode("v:textbox",l),a.leafNode("div",{style:"text-align:left"}),a.closeNode()}parseOpen(a){switch(a.name){case this.tag:return this.model={inset:this.reverseConversionUnit(a.attributes.inset)},!0;default:return!0}}parseText(){}parseClose(a){switch(a){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],48:[function(s,n,c){const o=s("./base-xform");n.exports=class extends o{createNewModel(a){return{}}parseOpen(a){return this.parser=this.parser||this.map[a.name],this.parser?(this.parser.parseOpen(a),!0):a.name===this.tag&&(this.model=this.createNewModel(a),!0)}parseText(a){this.parser&&this.parser.parseText(a)}onParserClose(a,d){this.model[a]=d.model}parseClose(a){return this.parser?(this.parser.parseClose(a)||(this.onParserClose(a,this.parser),this.parser=void 0),!0):a!==this.tag}}},{"./base-xform":32}],49:[function(s,n,c){const o=s("../base-xform");n.exports=class extends o{render(a,d){a.openNode("HeadingPairs"),a.openNode("vt:vector",{size:2,baseType:"variant"}),a.openNode("vt:variant"),a.leafNode("vt:lpstr",void 0,"Worksheets"),a.closeNode(),a.openNode("vt:variant"),a.leafNode("vt:i4",void 0,d.length),a.closeNode(),a.closeNode(),a.closeNode()}parseOpen(a){return a.name==="HeadingPairs"}parseText(){}parseClose(a){return a!=="HeadingPairs"}}},{"../base-xform":32}],50:[function(s,n,c){const o=s("../base-xform");n.exports=class extends o{render(a,d){a.openNode("TitlesOfParts"),a.openNode("vt:vector",{size:d.length,baseType:"lpstr"}),d.forEach(l=>{a.leafNode("vt:lpstr",void 0,l.name)}),a.closeNode(),a.closeNode()}parseOpen(a){return a.name==="TitlesOfParts"}parseText(){}parseClose(a){return a!=="TitlesOfParts"}}},{"../base-xform":32}],51:[function(s,n,c){const o=s("../../../utils/xml-stream"),a=s("../base-xform"),d=s("../simple/string-xform"),l=s("./app-heading-pairs-xform"),i=s("./app-titles-of-parts-xform");class u extends a{constructor(){super(),this.map={Company:new d({tag:"Company"}),Manager:new d({tag:"Manager"}),HeadingPairs:new l,TitleOfParts:new i}}render(h,m){h.openXml(o.StdDocAttributes),h.openNode("Properties",u.PROPERTY_ATTRIBUTES),h.leafNode("Application",void 0,"Microsoft Excel"),h.leafNode("DocSecurity",void 0,"0"),h.leafNode("ScaleCrop",void 0,"false"),this.map.HeadingPairs.render(h,m.worksheets),this.map.TitleOfParts.render(h,m.worksheets),this.map.Company.render(h,m.company||""),this.map.Manager.render(h,m.manager),h.leafNode("LinksUpToDate",void 0,"false"),h.leafNode("SharedDoc",void 0,"false"),h.leafNode("HyperlinksChanged",void 0,"false"),h.leafNode("AppVersion",void 0,"16.0300"),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case"Properties":return!0;default:return this.parser=this.map[h.name],!!this.parser&&(this.parser.parseOpen(h),!0)}}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){if(this.parser)return this.parser.parseClose(h)||(this.parser=void 0),!0;switch(h){case"Properties":return this.model={worksheets:this.map.TitleOfParts.model,company:this.map.Company.model,manager:this.map.Manager.model},!1;default:return!0}}}u.DateFormat=function(f){return f.toISOString().replace(/[.]\d{3,6}/,"")},u.DateAttrs={"xsi:type":"dcterms:W3CDTF"},u.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties","xmlns:vt":"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"},n.exports=u},{"../../../utils/xml-stream":28,"../base-xform":32,"../simple/string-xform":119,"./app-heading-pairs-xform":49,"./app-titles-of-parts-xform":50}],52:[function(s,n,c){const o=s("../../../utils/xml-stream"),a=s("../base-xform");class d extends a{render(i,u){i.openXml(o.StdDocAttributes),i.openNode("Types",d.PROPERTY_ATTRIBUTES);const f={};(u.media||[]).forEach(h=>{if(h.type==="image"){const m=h.extension;f[m]||(f[m]=!0,i.leafNode("Default",{Extension:m,ContentType:"image/"+m}))}}),i.leafNode("Default",{Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"}),i.leafNode("Default",{Extension:"xml",ContentType:"application/xml"}),i.leafNode("Override",{PartName:"/xl/workbook.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"}),u.worksheets.forEach(h=>{const m=`/xl/worksheets/sheet${h.id}.xml`;i.leafNode("Override",{PartName:m,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"})}),i.leafNode("Override",{PartName:"/xl/theme/theme1.xml",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml"}),i.leafNode("Override",{PartName:"/xl/styles.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"}),u.sharedStrings&&u.sharedStrings.count&&i.leafNode("Override",{PartName:"/xl/sharedStrings.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"}),u.tables&&u.tables.forEach(h=>{i.leafNode("Override",{PartName:"/xl/tables/"+h.target,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml"})}),u.drawings&&u.drawings.forEach(h=>{i.leafNode("Override",{PartName:`/xl/drawings/${h.name}.xml`,ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml"})}),u.commentRefs&&(i.leafNode("Default",{Extension:"vml",ContentType:"application/vnd.openxmlformats-officedocument.vmlDrawing"}),u.commentRefs.forEach(h=>{let{commentName:m}=h;i.leafNode("Override",{PartName:`/xl/${m}.xml`,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml"})})),i.leafNode("Override",{PartName:"/docProps/core.xml",ContentType:"application/vnd.openxmlformats-package.core-properties+xml"}),i.leafNode("Override",{PartName:"/docProps/app.xml",ContentType:"application/vnd.openxmlformats-officedocument.extended-properties+xml"}),i.closeNode()}parseOpen(){return!1}parseText(){}parseClose(){return!1}}d.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"},n.exports=d},{"../../../utils/xml-stream":28,"../base-xform":32}],53:[function(s,n,c){const o=s("../../../utils/xml-stream"),a=s("../base-xform"),d=s("../simple/date-xform"),l=s("../simple/string-xform"),i=s("../simple/integer-xform");class u extends a{constructor(){super(),this.map={"dc:creator":new l({tag:"dc:creator"}),"dc:title":new l({tag:"dc:title"}),"dc:subject":new l({tag:"dc:subject"}),"dc:description":new l({tag:"dc:description"}),"dc:identifier":new l({tag:"dc:identifier"}),"dc:language":new l({tag:"dc:language"}),"cp:keywords":new l({tag:"cp:keywords"}),"cp:category":new l({tag:"cp:category"}),"cp:lastModifiedBy":new l({tag:"cp:lastModifiedBy"}),"cp:lastPrinted":new d({tag:"cp:lastPrinted",format:u.DateFormat}),"cp:revision":new i({tag:"cp:revision"}),"cp:version":new l({tag:"cp:version"}),"cp:contentStatus":new l({tag:"cp:contentStatus"}),"cp:contentType":new l({tag:"cp:contentType"}),"dcterms:created":new d({tag:"dcterms:created",attrs:u.DateAttrs,format:u.DateFormat}),"dcterms:modified":new d({tag:"dcterms:modified",attrs:u.DateAttrs,format:u.DateFormat})}}render(h,m){h.openXml(o.StdDocAttributes),h.openNode("cp:coreProperties",u.CORE_PROPERTY_ATTRIBUTES),this.map["dc:creator"].render(h,m.creator),this.map["dc:title"].render(h,m.title),this.map["dc:subject"].render(h,m.subject),this.map["dc:description"].render(h,m.description),this.map["dc:identifier"].render(h,m.identifier),this.map["dc:language"].render(h,m.language),this.map["cp:keywords"].render(h,m.keywords),this.map["cp:category"].render(h,m.category),this.map["cp:lastModifiedBy"].render(h,m.lastModifiedBy),this.map["cp:lastPrinted"].render(h,m.lastPrinted),this.map["cp:revision"].render(h,m.revision),this.map["cp:version"].render(h,m.version),this.map["cp:contentStatus"].render(h,m.contentStatus),this.map["cp:contentType"].render(h,m.contentType),this.map["dcterms:created"].render(h,m.created),this.map["dcterms:modified"].render(h,m.modified),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case"cp:coreProperties":case"coreProperties":return!0;default:if(this.parser=this.map[h.name],this.parser)return this.parser.parseOpen(h),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(h))}}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){if(this.parser)return this.parser.parseClose(h)||(this.parser=void 0),!0;switch(h){case"cp:coreProperties":case"coreProperties":return this.model={creator:this.map["dc:creator"].model,title:this.map["dc:title"].model,subject:this.map["dc:subject"].model,description:this.map["dc:description"].model,identifier:this.map["dc:identifier"].model,language:this.map["dc:language"].model,keywords:this.map["cp:keywords"].model,category:this.map["cp:category"].model,lastModifiedBy:this.map["cp:lastModifiedBy"].model,lastPrinted:this.map["cp:lastPrinted"].model,revision:this.map["cp:revision"].model,contentStatus:this.map["cp:contentStatus"].model,contentType:this.map["cp:contentType"].model,created:this.map["dcterms:created"].model,modified:this.map["dcterms:modified"].model},!1;default:throw new Error("Unexpected xml node in parseClose: "+h)}}}u.DateFormat=function(f){return f.toISOString().replace(/[.]\d{3}/,"")},u.DateAttrs={"xsi:type":"dcterms:W3CDTF"},u.CORE_PROPERTY_ATTRIBUTES={"xmlns:cp":"http://schemas.openxmlformats.org/package/2006/metadata/core-properties","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:dcterms":"http://purl.org/dc/terms/","xmlns:dcmitype":"http://purl.org/dc/dcmitype/","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance"},n.exports=u},{"../../../utils/xml-stream":28,"../base-xform":32,"../simple/date-xform":117,"../simple/integer-xform":118,"../simple/string-xform":119}],54:[function(s,n,c){const o=s("../base-xform");n.exports=class extends o{render(a,d){a.leafNode("Relationship",d)}parseOpen(a){switch(a.name){case"Relationship":return this.model=a.attributes,!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],55:[function(s,n,c){const o=s("../../../utils/xml-stream"),a=s("../base-xform"),d=s("./relationship-xform");class l extends a{constructor(){super(),this.map={Relationship:new d}}render(u,f){f=f||this._values,u.openXml(o.StdDocAttributes),u.openNode("Relationships",l.RELATIONSHIPS_ATTRIBUTES),f.forEach(h=>{this.map.Relationship.render(u,h)}),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"Relationships":return this.model=[],!0;default:if(this.parser=this.map[u.name],this.parser)return this.parser.parseOpen(u),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(u))}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.model.push(this.parser.model),this.parser=void 0),!0;switch(u){case"Relationships":return!1;default:throw new Error("Unexpected xml node in parseClose: "+u)}}}l.RELATIONSHIPS_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"},n.exports=l},{"../../../utils/xml-stream":28,"../base-xform":32,"./relationship-xform":54}],56:[function(s,n,c){const o=s("../base-xform");n.exports=class extends o{parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case this.tag:this.reset(),this.model={range:{editAs:a.attributes.editAs||"oneCell"}};break;default:this.parser=this.map[a.name],this.parser&&this.parser.parseOpen(a)}return!0}parseText(a){this.parser&&this.parser.parseText(a)}reconcilePicture(a,d){if(a&&a.rId){const l=d.rels[a.rId].Target.match(/.*\/media\/(.+[.][a-zA-Z]{3,4})/);if(l){const i=l[1],u=d.mediaIndex[i];return d.media[u]}}}}},{"../base-xform":32}],57:[function(s,n,c){const o=s("../base-xform"),a=s("./blip-xform");n.exports=class extends o{constructor(){super(),this.map={"a:blip":new a}}get tag(){return"xdr:blipFill"}render(d,l){d.openNode(this.tag),this.map["a:blip"].render(d,l),d.openNode("a:stretch"),d.leafNode("a:fillRect"),d.closeNode(),d.closeNode()}parseOpen(d){if(this.parser)return this.parser.parseOpen(d),!0;switch(d.name){case this.tag:this.reset();break;default:this.parser=this.map[d.name],this.parser&&this.parser.parseOpen(d)}return!0}parseText(){}parseClose(d){if(this.parser)return this.parser.parseClose(d)||(this.parser=void 0),!0;switch(d){case this.tag:return this.model=this.map["a:blip"].model,!1;default:return!0}}}},{"../base-xform":32,"./blip-xform":58}],58:[function(s,n,c){const o=s("../base-xform");n.exports=class extends o{get tag(){return"a:blip"}render(a,d){a.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:embed":d.rId,cstate:"print"})}parseOpen(a){switch(a.name){case this.tag:return this.model={rId:a.attributes["r:embed"]},!0;default:return!0}}parseText(){}parseClose(a){switch(a){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],59:[function(s,n,c){const o=s("../base-xform");n.exports=class extends o{get tag(){return"xdr:cNvPicPr"}render(a){a.openNode(this.tag),a.leafNode("a:picLocks",{noChangeAspect:"1"}),a.closeNode()}parseOpen(a){switch(a.name){case this.tag:default:return!0}}parseText(){}parseClose(a){switch(a){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],60:[function(s,n,c){const o=s("../base-xform"),a=s("./hlink-click-xform"),d=s("./ext-lst-xform");n.exports=class extends o{constructor(){super(),this.map={"a:hlinkClick":new a,"a:extLst":new d}}get tag(){return"xdr:cNvPr"}render(l,i){l.openNode(this.tag,{id:i.index,name:"Picture "+i.index}),this.map["a:hlinkClick"].render(l,i),this.map["a:extLst"].render(l,i),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case this.tag:this.reset();break;default:this.parser=this.map[l.name],this.parser&&this.parser.parseOpen(l)}return!0}parseText(){}parseClose(l){if(this.parser)return this.parser.parseClose(l)||(this.parser=void 0),!0;switch(l){case this.tag:return this.model=this.map["a:hlinkClick"].model,!1;default:return!0}}}},{"../base-xform":32,"./ext-lst-xform":63,"./hlink-click-xform":65}],61:[function(s,n,c){const o=s("../base-xform"),a=s("../simple/integer-xform");n.exports=class extends o{constructor(d){super(),this.tag=d.tag,this.map={"xdr:col":new a({tag:"xdr:col",zero:!0}),"xdr:colOff":new a({tag:"xdr:colOff",zero:!0}),"xdr:row":new a({tag:"xdr:row",zero:!0}),"xdr:rowOff":new a({tag:"xdr:rowOff",zero:!0})}}render(d,l){d.openNode(this.tag),this.map["xdr:col"].render(d,l.nativeCol),this.map["xdr:colOff"].render(d,l.nativeColOff),this.map["xdr:row"].render(d,l.nativeRow),this.map["xdr:rowOff"].render(d,l.nativeRowOff),d.closeNode()}parseOpen(d){if(this.parser)return this.parser.parseOpen(d),!0;switch(d.name){case this.tag:this.reset();break;default:this.parser=this.map[d.name],this.parser&&this.parser.parseOpen(d)}return!0}parseText(d){this.parser&&this.parser.parseText(d)}parseClose(d){if(this.parser)return this.parser.parseClose(d)||(this.parser=void 0),!0;switch(d){case this.tag:return this.model={nativeCol:this.map["xdr:col"].model,nativeColOff:this.map["xdr:colOff"].model,nativeRow:this.map["xdr:row"].model,nativeRowOff:this.map["xdr:rowOff"].model},!1;default:return!0}}}},{"../base-xform":32,"../simple/integer-xform":118}],62:[function(s,n,c){const o=s("../../../utils/col-cache"),a=s("../../../utils/xml-stream"),d=s("../base-xform"),l=s("./two-cell-anchor-xform"),i=s("./one-cell-anchor-xform");class u extends d{constructor(){super(),this.map={"xdr:twoCellAnchor":new l,"xdr:oneCellAnchor":new i}}prepare(h){h.anchors.forEach((m,p)=>{m.anchorType=function(x){return(typeof x.range=="string"?o.decode(x.range):x.range).br?"xdr:twoCellAnchor":"xdr:oneCellAnchor"}(m),this.map[m.anchorType].prepare(m,{index:p})})}get tag(){return"xdr:wsDr"}render(h,m){h.openXml(a.StdDocAttributes),h.openNode(this.tag,u.DRAWING_ATTRIBUTES),m.anchors.forEach(p=>{this.map[p.anchorType].render(h,p)}),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case this.tag:this.reset(),this.model={anchors:[]};break;default:this.parser=this.map[h.name],this.parser&&this.parser.parseOpen(h)}return!0}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){if(this.parser)return this.parser.parseClose(h)||(this.model.anchors.push(this.parser.model),this.parser=void 0),!0;switch(h){case this.tag:return!1;default:return!0}}reconcile(h,m){h.anchors.forEach(p=>{p.br?this.map["xdr:twoCellAnchor"].reconcile(p,m):this.map["xdr:oneCellAnchor"].reconcile(p,m)})}}u.DRAWING_ATTRIBUTES={"xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing","xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main"},n.exports=u},{"../../../utils/col-cache":19,"../../../utils/xml-stream":28,"../base-xform":32,"./one-cell-anchor-xform":67,"./two-cell-anchor-xform":70}],63:[function(s,n,c){const o=s("../base-xform");n.exports=class extends o{get tag(){return"a:extLst"}render(a){a.openNode(this.tag),a.openNode("a:ext",{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}),a.leafNode("a16:creationId",{"xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main",id:"{00000000-0008-0000-0000-000002000000}"}),a.closeNode(),a.closeNode()}parseOpen(a){switch(a.name){case this.tag:default:return!0}}parseText(){}parseClose(a){switch(a){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],64:[function(s,n,c){const o=s("../base-xform");n.exports=class extends o{constructor(a){super(),this.tag=a.tag,this.map={}}render(a,d){a.openNode(this.tag);const l=Math.floor(9525*d.width),i=Math.floor(9525*d.height);a.addAttribute("cx",l),a.addAttribute("cy",i),a.closeNode()}parseOpen(a){return a.name===this.tag&&(this.model={width:parseInt(a.attributes.cx||"0",10)/9525,height:parseInt(a.attributes.cy||"0",10)/9525},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],65:[function(s,n,c){const o=s("../base-xform");n.exports=class extends o{get tag(){return"a:hlinkClick"}render(a,d){d.hyperlinks&&d.hyperlinks.rId&&a.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:id":d.hyperlinks.rId,tooltip:d.hyperlinks.tooltip})}parseOpen(a){switch(a.name){case this.tag:return this.model={hyperlinks:{rId:a.attributes["r:id"],tooltip:a.attributes.tooltip}},!0;default:return!0}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],66:[function(s,n,c){const o=s("../base-xform"),a=s("./c-nv-pr-xform"),d=s("./c-nv-pic-pr-xform");n.exports=class extends o{constructor(){super(),this.map={"xdr:cNvPr":new a,"xdr:cNvPicPr":new d}}get tag(){return"xdr:nvPicPr"}render(l,i){l.openNode(this.tag),this.map["xdr:cNvPr"].render(l,i),this.map["xdr:cNvPicPr"].render(l,i),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case this.tag:this.reset();break;default:this.parser=this.map[l.name],this.parser&&this.parser.parseOpen(l)}return!0}parseText(){}parseClose(l){if(this.parser)return this.parser.parseClose(l)||(this.parser=void 0),!0;switch(l){case this.tag:return this.model=this.map["xdr:cNvPr"].model,!1;default:return!0}}}},{"../base-xform":32,"./c-nv-pic-pr-xform":59,"./c-nv-pr-xform":60}],67:[function(s,n,c){const o=s("./base-cell-anchor-xform"),a=s("../static-xform"),d=s("./cell-position-xform"),l=s("./ext-xform"),i=s("./pic-xform");n.exports=class extends o{constructor(){super(),this.map={"xdr:from":new d({tag:"xdr:from"}),"xdr:ext":new l({tag:"xdr:ext"}),"xdr:pic":new i,"xdr:clientData":new a({tag:"xdr:clientData"})}}get tag(){return"xdr:oneCellAnchor"}prepare(u,f){this.map["xdr:pic"].prepare(u.picture,f)}render(u,f){u.openNode(this.tag,{editAs:f.range.editAs||"oneCell"}),this.map["xdr:from"].render(u,f.range.tl),this.map["xdr:ext"].render(u,f.range.ext),this.map["xdr:pic"].render(u,f.picture),this.map["xdr:clientData"].render(u,{}),u.closeNode()}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.parser=void 0),!0;switch(u){case this.tag:return this.model.range.tl=this.map["xdr:from"].model,this.model.range.ext=this.map["xdr:ext"].model,this.model.picture=this.map["xdr:pic"].model,!1;default:return!0}}reconcile(u,f){u.medium=this.reconcilePicture(u.picture,f)}}},{"../static-xform":120,"./base-cell-anchor-xform":56,"./cell-position-xform":61,"./ext-xform":64,"./pic-xform":68}],68:[function(s,n,c){const o=s("../base-xform"),a=s("../static-xform"),d=s("./blip-fill-xform"),l=s("./nv-pic-pr-xform"),i=s("./sp-pr");n.exports=class extends o{constructor(){super(),this.map={"xdr:nvPicPr":new l,"xdr:blipFill":new d,"xdr:spPr":new a(i)}}get tag(){return"xdr:pic"}prepare(u,f){u.index=f.index+1}render(u,f){u.openNode(this.tag),this.map["xdr:nvPicPr"].render(u,f),this.map["xdr:blipFill"].render(u,f),this.map["xdr:spPr"].render(u,f),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case this.tag:this.reset();break;default:this.parser=this.map[u.name],this.parser&&this.parser.parseOpen(u)}return!0}parseText(){}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.mergeModel(this.parser.model),this.parser=void 0),!0;switch(u){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"../static-xform":120,"./blip-fill-xform":57,"./nv-pic-pr-xform":66,"./sp-pr":69}],69:[function(s,n,c){n.exports={tag:"xdr:spPr",c:[{tag:"a:xfrm",c:[{tag:"a:off",$:{x:"0",y:"0"}},{tag:"a:ext",$:{cx:"0",cy:"0"}}]},{tag:"a:prstGeom",$:{prst:"rect"},c:[{tag:"a:avLst"}]}]}},{}],70:[function(s,n,c){const o=s("./base-cell-anchor-xform"),a=s("../static-xform"),d=s("./cell-position-xform"),l=s("./pic-xform");n.exports=class extends o{constructor(){super(),this.map={"xdr:from":new d({tag:"xdr:from"}),"xdr:to":new d({tag:"xdr:to"}),"xdr:pic":new l,"xdr:clientData":new a({tag:"xdr:clientData"})}}get tag(){return"xdr:twoCellAnchor"}prepare(i,u){this.map["xdr:pic"].prepare(i.picture,u)}render(i,u){i.openNode(this.tag,{editAs:u.range.editAs||"oneCell"}),this.map["xdr:from"].render(i,u.range.tl),this.map["xdr:to"].render(i,u.range.br),this.map["xdr:pic"].render(i,u.picture),this.map["xdr:clientData"].render(i,{}),i.closeNode()}parseClose(i){if(this.parser)return this.parser.parseClose(i)||(this.parser=void 0),!0;switch(i){case this.tag:return this.model.range.tl=this.map["xdr:from"].model,this.model.range.br=this.map["xdr:to"].model,this.model.picture=this.map["xdr:pic"].model,!1;default:return!0}}reconcile(i,u){i.medium=this.reconcilePicture(i.picture,u)}}},{"../static-xform":120,"./base-cell-anchor-xform":56,"./cell-position-xform":61,"./pic-xform":68}],71:[function(s,n,c){const o=s("./base-xform");n.exports=class extends o{constructor(a){super(),this.tag=a.tag,this.always=!!a.always,this.count=a.count,this.empty=a.empty,this.$count=a.$count||"count",this.$=a.$,this.childXform=a.childXform,this.maxItems=a.maxItems}prepare(a,d){const{childXform:l}=this;a&&a.forEach((i,u)=>{d.index=u,l.prepare(i,d)})}render(a,d){if(this.always||d&&d.length){a.openNode(this.tag,this.$),this.count&&a.addAttribute(this.$count,d&&d.length||0);const{childXform:l}=this;(d||[]).forEach((i,u)=>{l.render(a,i,u)}),a.closeNode()}else this.empty&&a.leafNode(this.tag)}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case this.tag:return this.model=[],!0;default:return!!this.childXform.parseOpen(a)&&(this.parser=this.childXform,!0)}}parseText(a){this.parser&&this.parser.parseText(a)}parseClose(a){if(this.parser){if(!this.parser.parseClose(a)&&(this.model.push(this.parser.model),this.parser=void 0,this.maxItems&&this.model.length>this.maxItems))throw new Error(`Max ${this.childXform.tag} count (${this.maxItems}) exceeded`);return!0}return!1}reconcile(a,d){if(a){const{childXform:l}=this;a.forEach(i=>{l.reconcile(i,d)})}}}},{"./base-xform":32}],72:[function(s,n,c){const o=s("../../../utils/col-cache"),a=s("../base-xform");n.exports=class extends a{get tag(){return"autoFilter"}render(d,l){if(l)if(typeof l=="string")d.leafNode("autoFilter",{ref:l});else{const i=function(h){return typeof h=="string"?h:o.getAddress(h.row,h.column).address},u=i(l.from),f=i(l.to);u&&f&&d.leafNode("autoFilter",{ref:`${u}:${f}`})}}parseOpen(d){d.name==="autoFilter"&&(this.model=d.attributes.ref)}}},{"../../../utils/col-cache":19,"../base-xform":32}],73:[function(s,n,c){const o=s("../../../utils/utils"),a=s("../base-xform"),d=s("../../../doc/range"),l=s("../../../doc/enums"),i=s("../strings/rich-text-xform");function u(f){if(f==null)return l.ValueType.Null;if(f instanceof String||typeof f=="string")return l.ValueType.String;if(typeof f=="number")return l.ValueType.Number;if(typeof f=="boolean")return l.ValueType.Boolean;if(f instanceof Date)return l.ValueType.Date;if(f.text&&f.hyperlink)return l.ValueType.Hyperlink;if(f.formula)return l.ValueType.Formula;if(f.error)return l.ValueType.Error;throw new Error("I could not understand type of value")}n.exports=class extends a{constructor(){super(),this.richTextXForm=new i}get tag(){return"c"}prepare(f,h){const m=h.styles.addStyleModel(f.style||{},function(p){switch(p.type){case l.ValueType.Formula:return u(p.result);default:return p.type}}(f));switch(m&&(f.styleId=m),f.comment&&h.comments.push({...f.comment,ref:f.address}),f.type){case l.ValueType.String:case l.ValueType.RichText:h.sharedStrings&&(f.ssId=h.sharedStrings.add(f.value));break;case l.ValueType.Date:h.date1904&&(f.date1904=!0);break;case l.ValueType.Hyperlink:h.sharedStrings&&f.text!==void 0&&f.text!==null&&(f.ssId=h.sharedStrings.add(f.text)),h.hyperlinks.push({address:f.address,target:f.hyperlink,tooltip:f.tooltip});break;case l.ValueType.Merge:h.merges.add(f);break;case l.ValueType.Formula:if(h.date1904&&(f.date1904=!0),f.shareType==="shared"&&(f.si=h.siFormulae++),f.formula)h.formulae[f.address]=f;else if(f.sharedFormula){const p=h.formulae[f.sharedFormula];if(!p)throw new Error("Shared Formula master must exist above and or left of clone for cell "+f.address);p.si===void 0?(p.shareType="shared",p.si=h.siFormulae++,p.range=new d(p.address,f.address)):p.range&&p.range.expandToAddress(f.address),f.si=p.si}}}renderFormula(f,h){let m=null;switch(h.shareType){case"shared":m={t:"shared",ref:h.ref||h.range.range,si:h.si};break;case"array":m={t:"array",ref:h.ref};break;default:h.si!==void 0&&(m={t:"shared",si:h.si})}switch(u(h.result)){case l.ValueType.Null:f.leafNode("f",m,h.formula);break;case l.ValueType.String:f.addAttribute("t","str"),f.leafNode("f",m,h.formula),f.leafNode("v",null,h.result);break;case l.ValueType.Number:f.leafNode("f",m,h.formula),f.leafNode("v",null,h.result);break;case l.ValueType.Boolean:f.addAttribute("t","b"),f.leafNode("f",m,h.formula),f.leafNode("v",null,h.result?1:0);break;case l.ValueType.Error:f.addAttribute("t","e"),f.leafNode("f",m,h.formula),f.leafNode("v",null,h.result.error);break;case l.ValueType.Date:f.leafNode("f",m,h.formula),f.leafNode("v",null,o.dateToExcel(h.result,h.date1904));break;default:throw new Error("I could not understand type of value")}}render(f,h){if(h.type!==l.ValueType.Null||h.styleId){switch(f.openNode("c"),f.addAttribute("r",h.address),h.styleId&&f.addAttribute("s",h.styleId),h.type){case l.ValueType.Null:break;case l.ValueType.Number:f.leafNode("v",null,h.value);break;case l.ValueType.Boolean:f.addAttribute("t","b"),f.leafNode("v",null,h.value?"1":"0");break;case l.ValueType.Error:f.addAttribute("t","e"),f.leafNode("v",null,h.value.error);break;case l.ValueType.String:case l.ValueType.RichText:h.ssId!==void 0?(f.addAttribute("t","s"),f.leafNode("v",null,h.ssId)):h.value&&h.value.richText?(f.addAttribute("t","inlineStr"),f.openNode("is"),h.value.richText.forEach(m=>{this.richTextXForm.render(f,m)}),f.closeNode("is")):(f.addAttribute("t","str"),f.leafNode("v",null,h.value));break;case l.ValueType.Date:f.leafNode("v",null,o.dateToExcel(h.value,h.date1904));break;case l.ValueType.Hyperlink:h.ssId!==void 0?(f.addAttribute("t","s"),f.leafNode("v",null,h.ssId)):(f.addAttribute("t","str"),f.leafNode("v",null,h.text));break;case l.ValueType.Formula:this.renderFormula(f,h);break;case l.ValueType.Merge:}f.closeNode()}}parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;switch(f.name){case"c":return this.model={address:f.attributes.r},this.t=f.attributes.t,f.attributes.s&&(this.model.styleId=parseInt(f.attributes.s,10)),!0;case"f":return this.currentNode="f",this.model.si=f.attributes.si,this.model.shareType=f.attributes.t,this.model.ref=f.attributes.ref,!0;case"v":return this.currentNode="v",!0;case"t":return this.currentNode="t",!0;case"r":return this.parser=this.richTextXForm,this.parser.parseOpen(f),!0;default:return!1}}parseText(f){if(this.parser)this.parser.parseText(f);else switch(this.currentNode){case"f":this.model.formula=this.model.formula?this.model.formula+f:f;break;case"v":case"t":this.model.value&&this.model.value.richText?this.model.value.richText.text=this.model.value.richText.text?this.model.value.richText.text+f:f:this.model.value=this.model.value?this.model.value+f:f}}parseClose(f){switch(f){case"c":{const{model:h}=this;if(h.formula||h.shareType)h.type=l.ValueType.Formula,h.value&&(this.t==="str"?h.result=o.xmlDecode(h.value):this.t==="b"?h.result=parseInt(h.value,10)!==0:this.t==="e"?h.result={error:h.value}:h.result=parseFloat(h.value),h.value=void 0);else if(h.value!==void 0)switch(this.t){case"s":h.type=l.ValueType.String,h.value=parseInt(h.value,10);break;case"str":h.type=l.ValueType.String,h.value=o.xmlDecode(h.value);break;case"inlineStr":h.type=l.ValueType.String;break;case"b":h.type=l.ValueType.Boolean,h.value=parseInt(h.value,10)!==0;break;case"e":h.type=l.ValueType.Error,h.value={error:h.value};break;default:h.type=l.ValueType.Number,h.value=parseFloat(h.value)}else h.styleId?h.type=l.ValueType.Null:h.type=l.ValueType.Merge;return!1}case"f":case"v":case"is":return this.currentNode=void 0,!0;case"t":return this.parser?(this.parser.parseClose(f),!0):(this.currentNode=void 0,!0);case"r":return this.model.value=this.model.value||{},this.model.value.richText=this.model.value.richText||[],this.model.value.richText.push(this.parser.model),this.parser=void 0,this.currentNode=void 0,!0;default:return!!this.parser&&(this.parser.parseClose(f),!0)}}reconcile(f,h){const m=f.styleId&&h.styles&&h.styles.getStyleModel(f.styleId);switch(m&&(f.style=m),f.styleId!==void 0&&(f.styleId=void 0),f.type){case l.ValueType.String:typeof f.value=="number"&&h.sharedStrings&&(f.value=h.sharedStrings.getString(f.value)),f.value.richText&&(f.type=l.ValueType.RichText);break;case l.ValueType.Number:m&&o.isDateFmt(m.numFmt)&&(f.type=l.ValueType.Date,f.value=o.excelToDate(f.value,h.date1904));break;case l.ValueType.Formula:f.result!==void 0&&m&&o.isDateFmt(m.numFmt)&&(f.result=o.excelToDate(f.result,h.date1904)),f.shareType==="shared"&&(f.ref?h.formulae[f.si]=f.address:(f.sharedFormula=h.formulae[f.si],delete f.shareType),delete f.si)}const p=h.hyperlinkMap[f.address];p&&(f.type===l.ValueType.Formula?(f.text=f.result,f.result=void 0):(f.text=f.value,f.value=void 0),f.type=l.ValueType.Hyperlink,f.hyperlink=p);const x=h.commentsMap&&h.commentsMap[f.address];x&&(f.comment=x)}}},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/utils":27,"../base-xform":32,"../strings/rich-text-xform":122}],74:[function(s,n,c){const o=s("../../base-xform");n.exports=class extends o{get tag(){return"x14:cfIcon"}render(a,d){a.leafNode(this.tag,{iconSet:d.iconSet,iconId:d.iconId})}parseOpen(a){let{attributes:d}=a;this.model={iconSet:d.iconSet,iconId:o.toIntValue(d.iconId)}}parseClose(a){return a!==this.tag}}},{"../../base-xform":32}],75:[function(s,n,c){const{v4:o}=s("uuid"),a=s("../../base-xform"),d=s("../../composite-xform"),l=s("./databar-ext-xform"),i=s("./icon-set-ext-xform"),u={"3Triangles":!0,"3Stars":!0,"5Boxes":!0};class f extends d{constructor(){super(),this.map={"x14:dataBar":this.databarXform=new l,"x14:iconSet":this.iconSetXform=new i}}get tag(){return"x14:cfRule"}static isExt(m){return m.type==="dataBar"?l.isExt(m):!(m.type!=="iconSet"||!m.custom&&!u[m.iconSet])}prepare(m){f.isExt(m)&&(m.x14Id=`{${o()}}`.toUpperCase())}render(m,p){if(f.isExt(p))switch(p.type){case"dataBar":this.renderDataBar(m,p);break;case"iconSet":this.renderIconSet(m,p)}}renderDataBar(m,p){m.openNode(this.tag,{type:"dataBar",id:p.x14Id}),this.databarXform.render(m,p),m.closeNode()}renderIconSet(m,p){m.openNode(this.tag,{type:"iconSet",priority:p.priority,id:p.x14Id||`{${o()}}`}),this.iconSetXform.render(m,p),m.closeNode()}createNewModel(m){let{attributes:p}=m;return{type:p.type,x14Id:p.id,priority:a.toIntValue(p.priority)}}onParserClose(m,p){Object.assign(this.model,p.model)}}n.exports=f},{"../../base-xform":32,"../../composite-xform":48,"./databar-ext-xform":79,"./icon-set-ext-xform":81,uuid:528}],76:[function(s,n,c){const o=s("../../composite-xform"),a=s("./f-ext-xform");n.exports=class extends o{constructor(){super(),this.map={"xm:f":this.fExtXform=new a}}get tag(){return"x14:cfvo"}render(d,l){d.openNode(this.tag,{type:l.type}),l.value!==void 0&&this.fExtXform.render(d,l.value),d.closeNode()}createNewModel(d){return{type:d.attributes.type}}onParserClose(d,l){switch(d){case"xm:f":this.model.value=l.model?parseFloat(l.model):0}}}},{"../../composite-xform":48,"./f-ext-xform":80}],77:[function(s,n,c){const o=s("../../composite-xform"),a=s("./sqref-ext-xform"),d=s("./cf-rule-ext-xform");n.exports=class extends o{constructor(){super(),this.map={"xm:sqref":this.sqRef=new a,"x14:cfRule":this.cfRule=new d}}get tag(){return"x14:conditionalFormatting"}prepare(l,i){l.rules.forEach(u=>{this.cfRule.prepare(u,i)})}render(l,i){i.rules.some(d.isExt)&&(l.openNode(this.tag,{"xmlns:xm":"http://schemas.microsoft.com/office/excel/2006/main"}),i.rules.filter(d.isExt).forEach(u=>this.cfRule.render(l,u)),this.sqRef.render(l,i.ref),l.closeNode())}createNewModel(){return{rules:[]}}onParserClose(l,i){switch(l){case"xm:sqref":this.model.ref=i.model;break;case"x14:cfRule":this.model.rules.push(i.model)}}}},{"../../composite-xform":48,"./cf-rule-ext-xform":75,"./sqref-ext-xform":82}],78:[function(s,n,c){const o=s("../../composite-xform"),a=s("./cf-rule-ext-xform"),d=s("./conditional-formatting-ext-xform");n.exports=class extends o{constructor(){super(),this.map={"x14:conditionalFormatting":this.cfXform=new d}}get tag(){return"x14:conditionalFormattings"}hasContent(l){return l.hasExtContent===void 0&&(l.hasExtContent=l.some(i=>i.rules.some(a.isExt))),l.hasExtContent}prepare(l,i){l.forEach(u=>{this.cfXform.prepare(u,i)})}render(l,i){this.hasContent(i)&&(l.openNode(this.tag),i.forEach(u=>this.cfXform.render(l,u)),l.closeNode())}createNewModel(){return[]}onParserClose(l,i){this.model.push(i.model)}}},{"../../composite-xform":48,"./cf-rule-ext-xform":75,"./conditional-formatting-ext-xform":77}],79:[function(s,n,c){const o=s("../../base-xform"),a=s("../../composite-xform"),d=s("../../style/color-xform"),l=s("./cfvo-ext-xform");n.exports=class extends a{constructor(){super(),this.map={"x14:cfvo":this.cfvoXform=new l,"x14:borderColor":this.borderColorXform=new d("x14:borderColor"),"x14:negativeBorderColor":this.negativeBorderColorXform=new d("x14:negativeBorderColor"),"x14:negativeFillColor":this.negativeFillColorXform=new d("x14:negativeFillColor"),"x14:axisColor":this.axisColorXform=new d("x14:axisColor")}}static isExt(i){return!i.gradient}get tag(){return"x14:dataBar"}render(i,u){i.openNode(this.tag,{minLength:o.toIntAttribute(u.minLength,0,!0),maxLength:o.toIntAttribute(u.maxLength,100,!0),border:o.toBoolAttribute(u.border,!1),gradient:o.toBoolAttribute(u.gradient,!0),negativeBarColorSameAsPositive:o.toBoolAttribute(u.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:o.toBoolAttribute(u.negativeBarBorderColorSameAsPositive,!0),axisPosition:o.toAttribute(u.axisPosition,"auto"),direction:o.toAttribute(u.direction,"leftToRight")}),u.cfvo.forEach(f=>{this.cfvoXform.render(i,f)}),this.borderColorXform.render(i,u.borderColor),this.negativeBorderColorXform.render(i,u.negativeBorderColor),this.negativeFillColorXform.render(i,u.negativeFillColor),this.axisColorXform.render(i,u.axisColor),i.closeNode()}createNewModel(i){let{attributes:u}=i;return{cfvo:[],minLength:o.toIntValue(u.minLength,0),maxLength:o.toIntValue(u.maxLength,100),border:o.toBoolValue(u.border,!1),gradient:o.toBoolValue(u.gradient,!0),negativeBarColorSameAsPositive:o.toBoolValue(u.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:o.toBoolValue(u.negativeBarBorderColorSameAsPositive,!0),axisPosition:o.toStringValue(u.axisPosition,"auto"),direction:o.toStringValue(u.direction,"leftToRight")}}onParserClose(i,u){const[,f]=i.split(":");switch(f){case"cfvo":this.model.cfvo.push(u.model);break;default:this.model[f]=u.model}}}},{"../../base-xform":32,"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-ext-xform":76}],80:[function(s,n,c){const o=s("../../base-xform");n.exports=class extends o{get tag(){return"xm:f"}render(a,d){a.leafNode(this.tag,null,d)}parseOpen(){this.model=""}parseText(a){this.model+=a}parseClose(a){return a!==this.tag}}},{"../../base-xform":32}],81:[function(s,n,c){const o=s("../../base-xform"),a=s("../../composite-xform"),d=s("./cfvo-ext-xform"),l=s("./cf-icon-ext-xform");n.exports=class extends a{constructor(){super(),this.map={"x14:cfvo":this.cfvoXform=new d,"x14:cfIcon":this.cfIconXform=new l}}get tag(){return"x14:iconSet"}render(i,u){i.openNode(this.tag,{iconSet:o.toStringAttribute(u.iconSet),reverse:o.toBoolAttribute(u.reverse,!1),showValue:o.toBoolAttribute(u.showValue,!0),custom:o.toBoolAttribute(u.icons,!1)}),u.cfvo.forEach(f=>{this.cfvoXform.render(i,f)}),u.icons&&u.icons.forEach((f,h)=>{f.iconId=h,this.cfIconXform.render(i,f)}),i.closeNode()}createNewModel(i){let{attributes:u}=i;return{cfvo:[],iconSet:o.toStringValue(u.iconSet,"3TrafficLights"),reverse:o.toBoolValue(u.reverse,!1),showValue:o.toBoolValue(u.showValue,!0)}}onParserClose(i,u){const[,f]=i.split(":");switch(f){case"cfvo":this.model.cfvo.push(u.model);break;case"cfIcon":this.model.icons||(this.model.icons=[]),this.model.icons.push(u.model);break;default:this.model[f]=u.model}}}},{"../../base-xform":32,"../../composite-xform":48,"./cf-icon-ext-xform":74,"./cfvo-ext-xform":76}],82:[function(s,n,c){const o=s("../../base-xform");n.exports=class extends o{get tag(){return"xm:sqref"}render(a,d){a.leafNode(this.tag,null,d)}parseOpen(){this.model=""}parseText(a){this.model+=a}parseClose(a){return a!==this.tag}}},{"../../base-xform":32}],83:[function(s,n,c){const o=s("../../base-xform"),a=s("../../composite-xform"),d=s("../../../../doc/range"),l=s("./databar-xform"),i=s("./ext-lst-ref-xform"),u=s("./formula-xform"),f=s("./color-scale-xform"),h=s("./icon-set-xform"),m={"3Triangles":!0,"3Stars":!0,"5Boxes":!0},p=g=>{const{type:v,operator:y}=g;switch(v){case"containsText":case"containsBlanks":case"notContainsBlanks":case"containsErrors":case"notContainsErrors":return{type:"containsText",operator:v};default:return{type:v,operator:y}}};class x extends a{constructor(){super(),this.map={dataBar:this.databarXform=new l,extLst:this.extLstRefXform=new i,formula:this.formulaXform=new u,colorScale:this.colorScaleXform=new f,iconSet:this.iconSetXform=new h}}get tag(){return"cfRule"}static isPrimitive(v){return v.type!=="iconSet"||!v.custom&&!m[v.iconSet]}render(v,y){switch(y.type){case"expression":this.renderExpression(v,y);break;case"cellIs":this.renderCellIs(v,y);break;case"top10":this.renderTop10(v,y);break;case"aboveAverage":this.renderAboveAverage(v,y);break;case"dataBar":this.renderDataBar(v,y);break;case"colorScale":this.renderColorScale(v,y);break;case"iconSet":this.renderIconSet(v,y);break;case"containsText":this.renderText(v,y);break;case"timePeriod":this.renderTimePeriod(v,y)}}renderExpression(v,y){v.openNode(this.tag,{type:"expression",dxfId:y.dxfId,priority:y.priority}),this.formulaXform.render(v,y.formulae[0]),v.closeNode()}renderCellIs(v,y){v.openNode(this.tag,{type:"cellIs",dxfId:y.dxfId,priority:y.priority,operator:y.operator}),y.formulae.forEach(b=>{this.formulaXform.render(v,b)}),v.closeNode()}renderTop10(v,y){v.leafNode(this.tag,{type:"top10",dxfId:y.dxfId,priority:y.priority,percent:o.toBoolAttribute(y.percent,!1),bottom:o.toBoolAttribute(y.bottom,!1),rank:o.toIntValue(y.rank,10,!0)})}renderAboveAverage(v,y){v.leafNode(this.tag,{type:"aboveAverage",dxfId:y.dxfId,priority:y.priority,aboveAverage:o.toBoolAttribute(y.aboveAverage,!0)})}renderDataBar(v,y){v.openNode(this.tag,{type:"dataBar",priority:y.priority}),this.databarXform.render(v,y),this.extLstRefXform.render(v,y),v.closeNode()}renderColorScale(v,y){v.openNode(this.tag,{type:"colorScale",priority:y.priority}),this.colorScaleXform.render(v,y),v.closeNode()}renderIconSet(v,y){x.isPrimitive(y)&&(v.openNode(this.tag,{type:"iconSet",priority:y.priority}),this.iconSetXform.render(v,y),v.closeNode())}renderText(v,y){v.openNode(this.tag,{type:y.operator,dxfId:y.dxfId,priority:y.priority,operator:o.toStringAttribute(y.operator,"containsText")});const b=(C=>{if(C.formulae&&C.formulae[0])return C.formulae[0];const T=new d(C.ref),{tl:M}=T;switch(C.operator){case"containsText":return`NOT(ISERROR(SEARCH("${C.text}",${M})))`;case"containsBlanks":return`LEN(TRIM(${M}))=0`;case"notContainsBlanks":return`LEN(TRIM(${M}))>0`;case"containsErrors":return`ISERROR(${M})`;case"notContainsErrors":return`NOT(ISERROR(${M}))`;default:return}})(y);b&&this.formulaXform.render(v,b),v.closeNode()}renderTimePeriod(v,y){v.openNode(this.tag,{type:"timePeriod",dxfId:y.dxfId,priority:y.priority,timePeriod:y.timePeriod});const b=(C=>{if(C.formulae&&C.formulae[0])return C.formulae[0];const T=new d(C.ref),{tl:M}=T;switch(C.timePeriod){case"thisWeek":return`AND(TODAY()-ROUNDDOWN(${M},0)<=WEEKDAY(TODAY())-1,ROUNDDOWN(${M},0)-TODAY()<=7-WEEKDAY(TODAY()))`;case"lastWeek":return`AND(TODAY()-ROUNDDOWN(${M},0)>=(WEEKDAY(TODAY())),TODAY()-ROUNDDOWN(${M},0)<(WEEKDAY(TODAY())+7))`;case"nextWeek":return`AND(ROUNDDOWN(${M},0)-TODAY()>(7-WEEKDAY(TODAY())),ROUNDDOWN(${M},0)-TODAY()<(15-WEEKDAY(TODAY())))`;case"yesterday":return`FLOOR(${M},1)=TODAY()-1`;case"today":return`FLOOR(${M},1)=TODAY()`;case"tomorrow":return`FLOOR(${M},1)=TODAY()+1`;case"last7Days":return`AND(TODAY()-FLOOR(${M},1)<=6,FLOOR(${M},1)<=TODAY())`;case"lastMonth":return`AND(MONTH(${M})=MONTH(EDATE(TODAY(),0-1)),YEAR(${M})=YEAR(EDATE(TODAY(),0-1)))`;case"thisMonth":return`AND(MONTH(${M})=MONTH(TODAY()),YEAR(${M})=YEAR(TODAY()))`;case"nextMonth":return`AND(MONTH(${M})=MONTH(EDATE(TODAY(),0+1)),YEAR(${M})=YEAR(EDATE(TODAY(),0+1)))`;default:return}})(y);b&&this.formulaXform.render(v,b),v.closeNode()}createNewModel(v){let{attributes:y}=v;return{...p(y),dxfId:o.toIntValue(y.dxfId),priority:o.toIntValue(y.priority),timePeriod:y.timePeriod,percent:o.toBoolValue(y.percent),bottom:o.toBoolValue(y.bottom),rank:o.toIntValue(y.rank),aboveAverage:o.toBoolValue(y.aboveAverage)}}onParserClose(v,y){switch(v){case"dataBar":case"extLst":case"colorScale":case"iconSet":Object.assign(this.model,y.model);break;case"formula":this.model.formulae=this.model.formulae||[],this.model.formulae.push(y.model)}}}n.exports=x},{"../../../../doc/range":10,"../../base-xform":32,"../../composite-xform":48,"./color-scale-xform":85,"./databar-xform":88,"./ext-lst-ref-xform":89,"./formula-xform":90,"./icon-set-xform":91}],84:[function(s,n,c){const o=s("../../base-xform");n.exports=class extends o{get tag(){return"cfvo"}render(a,d){a.leafNode(this.tag,{type:d.type,val:d.value})}parseOpen(a){this.model={type:a.attributes.type,value:o.toFloatValue(a.attributes.val)}}parseClose(a){return a!==this.tag}}},{"../../base-xform":32}],85:[function(s,n,c){const o=s("../../composite-xform"),a=s("../../style/color-xform"),d=s("./cfvo-xform");n.exports=class extends o{constructor(){super(),this.map={cfvo:this.cfvoXform=new d,color:this.colorXform=new a}}get tag(){return"colorScale"}render(l,i){l.openNode(this.tag),i.cfvo.forEach(u=>{this.cfvoXform.render(l,u)}),i.color.forEach(u=>{this.colorXform.render(l,u)}),l.closeNode()}createNewModel(l){return{cfvo:[],color:[]}}onParserClose(l,i){this.model[l].push(i.model)}}},{"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-xform":84}],86:[function(s,n,c){const o=s("../../composite-xform"),a=s("./cf-rule-xform");n.exports=class extends o{constructor(){super(),this.map={cfRule:new a}}get tag(){return"conditionalFormatting"}render(d,l){l.rules.some(a.isPrimitive)&&(d.openNode(this.tag,{sqref:l.ref}),l.rules.forEach(i=>{a.isPrimitive(i)&&(i.ref=l.ref,this.map.cfRule.render(d,i))}),d.closeNode())}createNewModel(d){let{attributes:l}=d;return{ref:l.sqref,rules:[]}}onParserClose(d,l){this.model.rules.push(l.model)}}},{"../../composite-xform":48,"./cf-rule-xform":83}],87:[function(s,n,c){const o=s("../../base-xform"),a=s("./conditional-formatting-xform");n.exports=class extends o{constructor(){super(),this.cfXform=new a}get tag(){return"conditionalFormatting"}reset(){this.model=[]}prepare(d,l){let i=d.reduce((u,f)=>Math.max(u,...f.rules.map(h=>h.priority||0)),1);d.forEach(u=>{u.rules.forEach(f=>{f.priority||(f.priority=i++),f.style&&(f.dxfId=l.styles.addDxfStyle(f.style))})})}render(d,l){l.forEach(i=>{this.cfXform.render(d,i)})}parseOpen(d){if(this.parser)return this.parser.parseOpen(d),!0;switch(d.name){case"conditionalFormatting":return this.parser=this.cfXform,this.parser.parseOpen(d),!0;default:return!1}}parseText(d){this.parser&&this.parser.parseText(d)}parseClose(d){return!!this.parser&&(!!this.parser.parseClose(d)||(this.model.push(this.parser.model),this.parser=void 0,!1))}reconcile(d,l){d.forEach(i=>{i.rules.forEach(u=>{u.dxfId!==void 0&&(u.style=l.styles.getDxfStyle(u.dxfId),delete u.dxfId)})})}}},{"../../base-xform":32,"./conditional-formatting-xform":86}],88:[function(s,n,c){const o=s("../../composite-xform"),a=s("../../style/color-xform"),d=s("./cfvo-xform");n.exports=class extends o{constructor(){super(),this.map={cfvo:this.cfvoXform=new d,color:this.colorXform=new a}}get tag(){return"dataBar"}render(l,i){l.openNode(this.tag),i.cfvo.forEach(u=>{this.cfvoXform.render(l,u)}),this.colorXform.render(l,i.color),l.closeNode()}createNewModel(){return{cfvo:[]}}onParserClose(l,i){switch(l){case"cfvo":this.model.cfvo.push(i.model);break;case"color":this.model.color=i.model}}}},{"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-xform":84}],89:[function(s,n,c){const o=s("../../base-xform"),a=s("../../composite-xform");class d extends o{get tag(){return"x14:id"}render(u,f){u.leafNode(this.tag,null,f)}parseOpen(){this.model=""}parseText(u){this.model+=u}parseClose(u){return u!==this.tag}}class l extends a{constructor(){super(),this.map={"x14:id":this.idXform=new d}}get tag(){return"ext"}render(u,f){u.openNode(this.tag,{uri:"{B025F937-C7B1-47D3-B67F-A62EFF666E3E}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.idXform.render(u,f.x14Id),u.closeNode()}createNewModel(){return{}}onParserClose(u,f){this.model.x14Id=f.model}}n.exports=class extends a{constructor(){super(),this.map={ext:new l}}get tag(){return"extLst"}render(i,u){i.openNode(this.tag),this.map.ext.render(i,u),i.closeNode()}createNewModel(){return{}}onParserClose(i,u){Object.assign(this.model,u.model)}}},{"../../base-xform":32,"../../composite-xform":48}],90:[function(s,n,c){const o=s("../../base-xform");n.exports=class extends o{get tag(){return"formula"}render(a,d){a.leafNode(this.tag,null,d)}parseOpen(){this.model=""}parseText(a){this.model+=a}parseClose(a){return a!==this.tag}}},{"../../base-xform":32}],91:[function(s,n,c){const o=s("../../base-xform"),a=s("../../composite-xform"),d=s("./cfvo-xform");n.exports=class extends a{constructor(){super(),this.map={cfvo:this.cfvoXform=new d}}get tag(){return"iconSet"}render(l,i){l.openNode(this.tag,{iconSet:o.toStringAttribute(i.iconSet,"3TrafficLights"),reverse:o.toBoolAttribute(i.reverse,!1),showValue:o.toBoolAttribute(i.showValue,!0)}),i.cfvo.forEach(u=>{this.cfvoXform.render(l,u)}),l.closeNode()}createNewModel(l){let{attributes:i}=l;return{iconSet:o.toStringValue(i.iconSet,"3TrafficLights"),reverse:o.toBoolValue(i.reverse),showValue:o.toBoolValue(i.showValue),cfvo:[]}}onParserClose(l,i){this.model[l].push(i.model)}}},{"../../base-xform":32,"../../composite-xform":48,"./cfvo-xform":84}],92:[function(s,n,c){const o=s("../../../utils/utils"),a=s("../base-xform");n.exports=class extends a{get tag(){return"col"}prepare(d,l){const i=l.styles.addStyleModel(d.style||{});i&&(d.styleId=i)}render(d,l){d.openNode("col"),d.addAttribute("min",l.min),d.addAttribute("max",l.max),l.width&&d.addAttribute("width",l.width),l.styleId&&d.addAttribute("style",l.styleId),l.hidden&&d.addAttribute("hidden","1"),l.bestFit&&d.addAttribute("bestFit","1"),l.outlineLevel&&d.addAttribute("outlineLevel",l.outlineLevel),l.collapsed&&d.addAttribute("collapsed","1"),d.addAttribute("customWidth","1"),d.closeNode()}parseOpen(d){if(d.name==="col"){const l=this.model={min:parseInt(d.attributes.min||"0",10),max:parseInt(d.attributes.max||"0",10),width:d.attributes.width===void 0?void 0:parseFloat(d.attributes.width||"0")};return d.attributes.style&&(l.styleId=parseInt(d.attributes.style,10)),o.parseBoolean(d.attributes.hidden)&&(l.hidden=!0),o.parseBoolean(d.attributes.bestFit)&&(l.bestFit=!0),d.attributes.outlineLevel&&(l.outlineLevel=parseInt(d.attributes.outlineLevel,10)),o.parseBoolean(d.attributes.collapsed)&&(l.collapsed=!0),!0}return!1}parseText(){}parseClose(){return!1}reconcile(d,l){d.styleId&&(d.style=l.styles.getStyleModel(d.styleId))}}},{"../../../utils/utils":27,"../base-xform":32}],93:[function(s,n,c){const o=s("../../../utils/under-dash"),a=s("../../../utils/utils"),d=s("../../../utils/col-cache"),l=s("../base-xform"),i=s("../../../doc/range");function u(h,m,p,x){const g=m[p];g!==void 0?h[p]=g:x!==void 0&&(h[p]=x)}function f(h,m,p,x){const g=m[p];g!==void 0?h[p]=a.parseBoolean(g):x!==void 0&&(h[p]=x)}n.exports=class extends l{get tag(){return"dataValidations"}render(h,m){const p=function(x){const g=o.map(x,(b,C)=>({address:C,dataValidation:b,marked:!1})).sort((b,C)=>o.strcmp(b.address,C.address)),v=o.keyBy(g,"address"),y=(b,C,T)=>{for(let M=0;M<C;M++){const U=d.encodeAddress(b.row+M,T);if(!x[U]||!o.isEqual(x[b.address],x[U]))return!1}return!0};return g.map(b=>{if(!b.marked){const C=d.decodeEx(b.address);if(C.dimensions)return v[C.dimensions].marked=!0,{...b.dataValidation,sqref:b.address};let T=1,M=d.encodeAddress(C.row+T,C.col);for(;x[M]&&o.isEqual(b.dataValidation,x[M]);)T++,M=d.encodeAddress(C.row+T,C.col);let U=1;for(;y(C,T,C.col+U);)U++;for(let L=0;L<T;L++)for(let P=0;P<U;P++)M=d.encodeAddress(C.row+L,C.col+P),v[M].marked=!0;if(T>1||U>1){const L=C.row+(T-1),P=C.col+(U-1);return{...b.dataValidation,sqref:`${b.address}:${d.encodeAddress(L,P)}`}}return{...b.dataValidation,sqref:b.address}}return null}).filter(Boolean)}(m);p.length&&(h.openNode("dataValidations",{count:p.length}),p.forEach(x=>{h.openNode("dataValidation"),x.type!=="any"&&(h.addAttribute("type",x.type),x.operator&&x.type!=="list"&&x.operator!=="between"&&h.addAttribute("operator",x.operator),x.allowBlank&&h.addAttribute("allowBlank","1")),x.showInputMessage&&h.addAttribute("showInputMessage","1"),x.promptTitle&&h.addAttribute("promptTitle",x.promptTitle),x.prompt&&h.addAttribute("prompt",x.prompt),x.showErrorMessage&&h.addAttribute("showErrorMessage","1"),x.errorStyle&&h.addAttribute("errorStyle",x.errorStyle),x.errorTitle&&h.addAttribute("errorTitle",x.errorTitle),x.error&&h.addAttribute("error",x.error),h.addAttribute("sqref",x.sqref),(x.formulae||[]).forEach((g,v)=>{h.openNode("formula"+(v+1)),x.type==="date"?h.writeText(a.dateToExcel(new Date(g))):h.writeText(g),h.closeNode()}),h.closeNode()}),h.closeNode())}parseOpen(h){switch(h.name){case"dataValidations":return this.model={},!0;case"dataValidation":{this._address=h.attributes.sqref;const m={type:h.attributes.type||"any",formulae:[]};switch(h.attributes.type&&f(m,h.attributes,"allowBlank"),f(m,h.attributes,"showInputMessage"),f(m,h.attributes,"showErrorMessage"),m.type){case"any":case"list":case"custom":break;default:u(m,h.attributes,"operator","between")}return u(m,h.attributes,"promptTitle"),u(m,h.attributes,"prompt"),u(m,h.attributes,"errorStyle"),u(m,h.attributes,"errorTitle"),u(m,h.attributes,"error"),this._dataValidation=m,!0}case"formula1":case"formula2":return this._formula=[],!0;default:return!1}}parseText(h){this._formula&&this._formula.push(h)}parseClose(h){switch(h){case"dataValidations":return!1;case"dataValidation":return this._dataValidation.formulae&&this._dataValidation.formulae.length||(delete this._dataValidation.formulae,delete this._dataValidation.operator),(this._address.split(/\s+/g)||[]).forEach(m=>{m.includes(":")?new i(m).forEachAddress(p=>{this.model[p]=this._dataValidation}):this.model[m]=this._dataValidation}),!0;case"formula1":case"formula2":{let m=this._formula.join("");switch(this._dataValidation.type){case"whole":case"textLength":m=parseInt(m,10);break;case"decimal":m=parseFloat(m);break;case"date":m=a.excelToDate(parseFloat(m))}return this._dataValidation.formulae.push(m),this._formula=void 0,!0}default:return!0}}}},{"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/utils":27,"../base-xform":32}],94:[function(s,n,c){const o=s("../base-xform");n.exports=class extends o{get tag(){return"dimension"}render(a,d){d&&a.leafNode("dimension",{ref:d})}parseOpen(a){return a.name==="dimension"&&(this.model=a.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],95:[function(s,n,c){const o=s("../base-xform");n.exports=class extends o{get tag(){return"drawing"}render(a,d){d&&a.leafNode(this.tag,{"r:id":d.rId})}parseOpen(a){switch(a.name){case this.tag:return this.model={rId:a.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],96:[function(s,n,c){const o=s("../composite-xform"),a=s("./cf-ext/conditional-formattings-ext-xform");class d extends o{constructor(){super(),this.map={"x14:conditionalFormattings":this.conditionalFormattings=new a}}get tag(){return"ext"}hasContent(i){return this.conditionalFormattings.hasContent(i.conditionalFormattings)}prepare(i,u){this.conditionalFormattings.prepare(i.conditionalFormattings,u)}render(i,u){i.openNode("ext",{uri:"{78C0D931-6437-407d-A8EE-F0AAD7539E65}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.conditionalFormattings.render(i,u.conditionalFormattings),i.closeNode()}createNewModel(){return{}}onParserClose(i,u){this.model[i]=u.model}}n.exports=class extends o{constructor(){super(),this.map={ext:this.ext=new d}}get tag(){return"extLst"}prepare(l,i){this.ext.prepare(l,i)}hasContent(l){return this.ext.hasContent(l)}render(l,i){this.hasContent(i)&&(l.openNode("extLst"),this.ext.render(l,i),l.closeNode())}createNewModel(){return{}}onParserClose(l,i){Object.assign(this.model,i.model)}}},{"../composite-xform":48,"./cf-ext/conditional-formattings-ext-xform":78}],97:[function(s,n,c){const o=s("../base-xform");n.exports=class extends o{get tag(){return"headerFooter"}render(a,d){if(d){a.addRollback();let l=!1;a.openNode("headerFooter"),d.differentFirst&&(a.addAttribute("differentFirst","1"),l=!0),d.differentOddEven&&(a.addAttribute("differentOddEven","1"),l=!0),d.oddHeader&&typeof d.oddHeader=="string"&&(a.leafNode("oddHeader",null,d.oddHeader),l=!0),d.oddFooter&&typeof d.oddFooter=="string"&&(a.leafNode("oddFooter",null,d.oddFooter),l=!0),d.evenHeader&&typeof d.evenHeader=="string"&&(a.leafNode("evenHeader",null,d.evenHeader),l=!0),d.evenFooter&&typeof d.evenFooter=="string"&&(a.leafNode("evenFooter",null,d.evenFooter),l=!0),d.firstHeader&&typeof d.firstHeader=="string"&&(a.leafNode("firstHeader",null,d.firstHeader),l=!0),d.firstFooter&&typeof d.firstFooter=="string"&&(a.leafNode("firstFooter",null,d.firstFooter),l=!0),l?(a.closeNode(),a.commit()):a.rollback()}}parseOpen(a){switch(a.name){case"headerFooter":return this.model={},a.attributes.differentFirst&&(this.model.differentFirst=parseInt(a.attributes.differentFirst,0)===1),a.attributes.differentOddEven&&(this.model.differentOddEven=parseInt(a.attributes.differentOddEven,0)===1),!0;case"oddHeader":return this.currentNode="oddHeader",!0;case"oddFooter":return this.currentNode="oddFooter",!0;case"evenHeader":return this.currentNode="evenHeader",!0;case"evenFooter":return this.currentNode="evenFooter",!0;case"firstHeader":return this.currentNode="firstHeader",!0;case"firstFooter":return this.currentNode="firstFooter",!0;default:return!1}}parseText(a){switch(this.currentNode){case"oddHeader":this.model.oddHeader=a;break;case"oddFooter":this.model.oddFooter=a;break;case"evenHeader":this.model.evenHeader=a;break;case"evenFooter":this.model.evenFooter=a;break;case"firstHeader":this.model.firstHeader=a;break;case"firstFooter":this.model.firstFooter=a}}parseClose(){switch(this.currentNode){case"oddHeader":case"oddFooter":case"evenHeader":case"evenFooter":case"firstHeader":case"firstFooter":return this.currentNode=void 0,!0;default:return!1}}}},{"../base-xform":32}],98:[function(s,n,c){const o=s("../base-xform");n.exports=class extends o{get tag(){return"hyperlink"}render(a,d){this.isInternalLink(d)?a.leafNode("hyperlink",{ref:d.address,"r:id":d.rId,tooltip:d.tooltip,location:d.target}):a.leafNode("hyperlink",{ref:d.address,"r:id":d.rId,tooltip:d.tooltip})}parseOpen(a){return a.name==="hyperlink"&&(this.model={address:a.attributes.ref,rId:a.attributes["r:id"],tooltip:a.attributes.tooltip},a.attributes.location&&(this.model.target=a.attributes.location),!0)}parseText(){}parseClose(){return!1}isInternalLink(a){return a.target&&/^[^!]+![a-zA-Z]+[\d]+$/.test(a.target)}}},{"../base-xform":32}],99:[function(s,n,c){const o=s("../base-xform");n.exports=class extends o{get tag(){return"mergeCell"}render(a,d){a.leafNode("mergeCell",{ref:d})}parseOpen(a){return a.name==="mergeCell"&&(this.model=a.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],100:[function(s,n,c){const o=s("../../../utils/under-dash"),a=s("../../../doc/range"),d=s("../../../utils/col-cache"),l=s("../../../doc/enums");n.exports=class{constructor(){this.merges={}}add(i){if(this.merges[i.master])this.merges[i.master].expandToAddress(i.address);else{const u=`${i.master}:${i.address}`;this.merges[i.master]=new a(u)}}get mergeCells(){return o.map(this.merges,i=>i.range)}reconcile(i,u){o.each(i,f=>{const h=d.decode(f);for(let m=h.top;m<=h.bottom;m++){const p=u[m-1];for(let x=h.left;x<=h.right;x++){const g=p.cells[x-1];g?g.type===l.ValueType.Merge&&(g.master=h.tl):p.cells[x]={type:l.ValueType.Null,address:d.encodeAddress(m,x)}}}})}getMasterAddress(i){const u=this.hash[i];return u&&u.tl}}},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":26}],101:[function(s,n,c){const o=s("../base-xform"),a=d=>d!==void 0;n.exports=class extends o{get tag(){return"outlinePr"}render(d,l){return!(!l||!a(l.summaryBelow)&&!a(l.summaryRight))&&(d.leafNode(this.tag,{summaryBelow:a(l.summaryBelow)?Number(l.summaryBelow):void 0,summaryRight:a(l.summaryRight)?Number(l.summaryRight):void 0}),!0)}parseOpen(d){return d.name===this.tag&&(this.model={summaryBelow:a(d.attributes.summaryBelow)?!!Number(d.attributes.summaryBelow):void 0,summaryRight:a(d.attributes.summaryRight)?!!Number(d.attributes.summaryRight):void 0},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],102:[function(s,n,c){const o=s("../base-xform");n.exports=class extends o{get tag(){return"brk"}render(a,d){a.leafNode("brk",d)}parseOpen(a){return a.name==="brk"&&(this.model=a.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],103:[function(s,n,c){const o=s("../../../utils/under-dash"),a=s("../base-xform");n.exports=class extends a{get tag(){return"pageMargins"}render(d,l){if(l){const i={left:l.left,right:l.right,top:l.top,bottom:l.bottom,header:l.header,footer:l.footer};o.some(i,u=>u!==void 0)&&d.leafNode(this.tag,i)}}parseOpen(d){switch(d.name){case this.tag:return this.model={left:parseFloat(d.attributes.left||.7),right:parseFloat(d.attributes.right||.7),top:parseFloat(d.attributes.top||.75),bottom:parseFloat(d.attributes.bottom||.75),header:parseFloat(d.attributes.header||.3),footer:parseFloat(d.attributes.footer||.3)},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],104:[function(s,n,c){const o=s("../base-xform");n.exports=class extends o{get tag(){return"pageSetUpPr"}render(a,d){return!(!d||!d.fitToPage)&&(a.leafNode(this.tag,{fitToPage:d.fitToPage?"1":void 0}),!0)}parseOpen(a){return a.name===this.tag&&(this.model={fitToPage:a.attributes.fitToPage==="1"},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],105:[function(s,n,c){const o=s("../../../utils/under-dash"),a=s("../base-xform");function d(f){return f?"1":void 0}function l(f){switch(f){case"overThenDown":return f;default:return}}function i(f){switch(f){case"atEnd":case"asDisplyed":return f;default:return}}function u(f){switch(f){case"dash":case"blank":case"NA":return f;default:return}}n.exports=class extends a{get tag(){return"pageSetup"}render(f,h){if(h){const m={paperSize:h.paperSize,orientation:h.orientation,horizontalDpi:h.horizontalDpi,verticalDpi:h.verticalDpi,pageOrder:l(h.pageOrder),blackAndWhite:d(h.blackAndWhite),draft:d(h.draft),cellComments:i(h.cellComments),errors:u(h.errors),scale:h.scale,fitToWidth:h.fitToWidth,fitToHeight:h.fitToHeight,firstPageNumber:h.firstPageNumber,useFirstPageNumber:d(h.firstPageNumber),usePrinterDefaults:d(h.usePrinterDefaults),copies:h.copies};o.some(m,p=>p!==void 0)&&f.leafNode(this.tag,m)}}parseOpen(f){switch(f.name){case this.tag:return this.model={paperSize:(h=f.attributes.paperSize,h!==void 0?parseInt(h,10):void 0),orientation:f.attributes.orientation||"portrait",horizontalDpi:parseInt(f.attributes.horizontalDpi||"4294967295",10),verticalDpi:parseInt(f.attributes.verticalDpi||"4294967295",10),pageOrder:f.attributes.pageOrder||"downThenOver",blackAndWhite:f.attributes.blackAndWhite==="1",draft:f.attributes.draft==="1",cellComments:f.attributes.cellComments||"None",errors:f.attributes.errors||"displayed",scale:parseInt(f.attributes.scale||"100",10),fitToWidth:parseInt(f.attributes.fitToWidth||"1",10),fitToHeight:parseInt(f.attributes.fitToHeight||"1",10),firstPageNumber:parseInt(f.attributes.firstPageNumber||"1",10),useFirstPageNumber:f.attributes.useFirstPageNumber==="1",usePrinterDefaults:f.attributes.usePrinterDefaults==="1",copies:parseInt(f.attributes.copies||"1",10)},!0;default:return!1}var h}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],106:[function(s,n,c){const o=s("../base-xform");n.exports=class extends o{get tag(){return"picture"}render(a,d){d&&a.leafNode(this.tag,{"r:id":d.rId})}parseOpen(a){switch(a.name){case this.tag:return this.model={rId:a.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],107:[function(s,n,c){const o=s("../../../utils/under-dash"),a=s("../base-xform");function d(l){return l?"1":void 0}n.exports=class extends a{get tag(){return"printOptions"}render(l,i){if(i){const u={headings:d(i.showRowColHeaders),gridLines:d(i.showGridLines),horizontalCentered:d(i.horizontalCentered),verticalCentered:d(i.verticalCentered)};o.some(u,f=>f!==void 0)&&l.leafNode(this.tag,u)}}parseOpen(l){switch(l.name){case this.tag:return this.model={showRowColHeaders:l.attributes.headings==="1",showGridLines:l.attributes.gridLines==="1",horizontalCentered:l.attributes.horizontalCentered==="1",verticalCentered:l.attributes.verticalCentered==="1"},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],108:[function(s,n,c){const o=s("./page-breaks-xform"),a=s("../list-xform");n.exports=class extends a{constructor(){super({tag:"rowBreaks",count:!0,childXform:new o})}render(d,l){if(l&&l.length){d.openNode(this.tag,this.$),this.count&&(d.addAttribute(this.$count,l.length),d.addAttribute("manualBreakCount",l.length));const{childXform:i}=this;l.forEach(u=>{i.render(d,u)}),d.closeNode()}else this.empty&&d.leafNode(this.tag)}}},{"../list-xform":71,"./page-breaks-xform":102}],109:[function(s,n,c){const o=s("../base-xform"),a=s("../../../utils/utils"),d=s("./cell-xform");n.exports=class extends o{constructor(l){super(),this.maxItems=l&&l.maxItems,this.map={c:new d}}get tag(){return"row"}prepare(l,i){const u=i.styles.addStyleModel(l.style);u&&(l.styleId=u);const f=this.map.c;l.cells.forEach(h=>{f.prepare(h,i)})}render(l,i,u){l.openNode("row"),l.addAttribute("r",i.number),i.height&&(l.addAttribute("ht",i.height),l.addAttribute("customHeight","1")),i.hidden&&l.addAttribute("hidden","1"),i.min>0&&i.max>0&&i.min<=i.max&&l.addAttribute("spans",`${i.min}:${i.max}`),i.styleId&&(l.addAttribute("s",i.styleId),l.addAttribute("customFormat","1")),l.addAttribute("x14ac:dyDescent","0.25"),i.outlineLevel&&l.addAttribute("outlineLevel",i.outlineLevel),i.collapsed&&l.addAttribute("collapsed","1");const f=this.map.c;i.cells.forEach(h=>{f.render(l,h,u)}),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;if(l.name==="row"){this.numRowsSeen+=1;const i=l.attributes.spans?l.attributes.spans.split(":").map(f=>parseInt(f,10)):[void 0,void 0],u=this.model={number:parseInt(l.attributes.r,10),min:i[0],max:i[1],cells:[]};return l.attributes.s&&(u.styleId=parseInt(l.attributes.s,10)),a.parseBoolean(l.attributes.hidden)&&(u.hidden=!0),a.parseBoolean(l.attributes.bestFit)&&(u.bestFit=!0),l.attributes.ht&&(u.height=parseFloat(l.attributes.ht)),l.attributes.outlineLevel&&(u.outlineLevel=parseInt(l.attributes.outlineLevel,10)),a.parseBoolean(l.attributes.collapsed)&&(u.collapsed=!0),!0}return this.parser=this.map[l.name],!!this.parser&&(this.parser.parseOpen(l),!0)}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){if(this.parser){if(!this.parser.parseClose(l)){if(this.model.cells.push(this.parser.model),this.maxItems&&this.model.cells.length>this.maxItems)throw new Error(`Max column count (${this.maxItems}) exceeded`);this.parser=void 0}return!0}return!1}reconcile(l,i){l.style=l.styleId?i.styles.getStyleModel(l.styleId):{},l.styleId!==void 0&&(l.styleId=void 0);const u=this.map.c;l.cells.forEach(f=>{u.reconcile(f,i)})}}},{"../../../utils/utils":27,"../base-xform":32,"./cell-xform":73}],110:[function(s,n,c){const o=s("../../../utils/under-dash"),a=s("../base-xform");n.exports=class extends a{get tag(){return"sheetFormatPr"}render(d,l){if(l){const i={defaultRowHeight:l.defaultRowHeight,outlineLevelRow:l.outlineLevelRow,outlineLevelCol:l.outlineLevelCol,"x14ac:dyDescent":l.dyDescent};l.defaultColWidth&&(i.defaultColWidth=l.defaultColWidth),l.defaultRowHeight&&l.defaultRowHeight===15||(i.customHeight="1"),o.some(i,u=>u!==void 0)&&d.leafNode("sheetFormatPr",i)}}parseOpen(d){return d.name==="sheetFormatPr"&&(this.model={defaultRowHeight:parseFloat(d.attributes.defaultRowHeight||"0"),dyDescent:parseFloat(d.attributes["x14ac:dyDescent"]||"0"),outlineLevelRow:parseInt(d.attributes.outlineLevelRow||"0",10),outlineLevelCol:parseInt(d.attributes.outlineLevelCol||"0",10)},d.attributes.defaultColWidth&&(this.model.defaultColWidth=parseFloat(d.attributes.defaultColWidth)),!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],111:[function(s,n,c){const o=s("../base-xform"),a=s("../style/color-xform"),d=s("./page-setup-properties-xform"),l=s("./outline-properties-xform");n.exports=class extends o{constructor(){super(),this.map={tabColor:new a("tabColor"),pageSetUpPr:new d,outlinePr:new l}}get tag(){return"sheetPr"}render(i,u){if(u){i.addRollback(),i.openNode("sheetPr");let f=!1;f=this.map.tabColor.render(i,u.tabColor)||f,f=this.map.pageSetUpPr.render(i,u.pageSetup)||f,f=this.map.outlinePr.render(i,u.outlineProperties)||f,f?(i.closeNode(),i.commit()):i.rollback()}}parseOpen(i){return this.parser?(this.parser.parseOpen(i),!0):i.name===this.tag?(this.reset(),!0):!!this.map[i.name]&&(this.parser=this.map[i.name],this.parser.parseOpen(i),!0)}parseText(i){return!!this.parser&&(this.parser.parseText(i),!0)}parseClose(i){return this.parser?(this.parser.parseClose(i)||(this.parser=void 0),!0):(this.map.tabColor.model||this.map.pageSetUpPr.model||this.map.outlinePr.model?(this.model={},this.map.tabColor.model&&(this.model.tabColor=this.map.tabColor.model),this.map.pageSetUpPr.model&&(this.model.pageSetup=this.map.pageSetUpPr.model),this.map.outlinePr.model&&(this.model.outlineProperties=this.map.outlinePr.model)):this.model=null,!1)}}},{"../base-xform":32,"../style/color-xform":128,"./outline-properties-xform":101,"./page-setup-properties-xform":104}],112:[function(s,n,c){const o=s("../../../utils/under-dash"),a=s("../base-xform");function d(i,u){return i?u:void 0}function l(i,u){return i===u||void 0}n.exports=class extends a{get tag(){return"sheetProtection"}render(i,u){if(u){const f={sheet:d(u.sheet,"1"),selectLockedCells:u.selectLockedCells===!1?"1":void 0,selectUnlockedCells:u.selectUnlockedCells===!1?"1":void 0,formatCells:d(u.formatCells,"0"),formatColumns:d(u.formatColumns,"0"),formatRows:d(u.formatRows,"0"),insertColumns:d(u.insertColumns,"0"),insertRows:d(u.insertRows,"0"),insertHyperlinks:d(u.insertHyperlinks,"0"),deleteColumns:d(u.deleteColumns,"0"),deleteRows:d(u.deleteRows,"0"),sort:d(u.sort,"0"),autoFilter:d(u.autoFilter,"0"),pivotTables:d(u.pivotTables,"0")};u.sheet&&(f.algorithmName=u.algorithmName,f.hashValue=u.hashValue,f.saltValue=u.saltValue,f.spinCount=u.spinCount,f.objects=d(u.objects===!1,"1"),f.scenarios=d(u.scenarios===!1,"1")),o.some(f,h=>h!==void 0)&&i.leafNode(this.tag,f)}}parseOpen(i){switch(i.name){case this.tag:return this.model={sheet:l(i.attributes.sheet,"1"),objects:i.attributes.objects!=="1"&&void 0,scenarios:i.attributes.scenarios!=="1"&&void 0,selectLockedCells:i.attributes.selectLockedCells!=="1"&&void 0,selectUnlockedCells:i.attributes.selectUnlockedCells!=="1"&&void 0,formatCells:l(i.attributes.formatCells,"0"),formatColumns:l(i.attributes.formatColumns,"0"),formatRows:l(i.attributes.formatRows,"0"),insertColumns:l(i.attributes.insertColumns,"0"),insertRows:l(i.attributes.insertRows,"0"),insertHyperlinks:l(i.attributes.insertHyperlinks,"0"),deleteColumns:l(i.attributes.deleteColumns,"0"),deleteRows:l(i.attributes.deleteRows,"0"),sort:l(i.attributes.sort,"0"),autoFilter:l(i.attributes.autoFilter,"0"),pivotTables:l(i.attributes.pivotTables,"0")},i.attributes.algorithmName&&(this.model.algorithmName=i.attributes.algorithmName,this.model.hashValue=i.attributes.hashValue,this.model.saltValue=i.attributes.saltValue,this.model.spinCount=parseInt(i.attributes.spinCount,10)),!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],113:[function(s,n,c){const o=s("../../../utils/col-cache"),a=s("../base-xform"),d={frozen:"frozen",frozenSplit:"frozen",split:"split"};n.exports=class extends a{get tag(){return"sheetView"}prepare(l){switch(l.state){case"frozen":case"split":break;default:l.state="normal"}}render(l,i){l.openNode("sheetView",{workbookViewId:i.workbookViewId||0});const u=function(x,g,v){v&&l.addAttribute(x,g)};let f,h,m,p;switch(u("rightToLeft","1",i.rightToLeft===!0),u("tabSelected","1",i.tabSelected),u("showRuler","0",i.showRuler===!1),u("showRowColHeaders","0",i.showRowColHeaders===!1),u("showGridLines","0",i.showGridLines===!1),u("zoomScale",i.zoomScale,i.zoomScale),u("zoomScaleNormal",i.zoomScaleNormal,i.zoomScaleNormal),u("view",i.style,i.style),i.state){case"frozen":h=i.xSplit||0,m=i.ySplit||0,f=i.topLeftCell||o.getAddress(m+1,h+1).address,p=(i.xSplit&&i.ySplit?"bottomRight":i.xSplit&&"topRight")||"bottomLeft",l.leafNode("pane",{xSplit:i.xSplit||void 0,ySplit:i.ySplit||void 0,topLeftCell:f,activePane:p,state:"frozen"}),l.leafNode("selection",{pane:p,activeCell:i.activeCell,sqref:i.activeCell});break;case"split":i.activePane==="topLeft"&&(i.activePane=void 0),l.leafNode("pane",{xSplit:i.xSplit||void 0,ySplit:i.ySplit||void 0,topLeftCell:i.topLeftCell,activePane:i.activePane}),l.leafNode("selection",{pane:i.activePane,activeCell:i.activeCell,sqref:i.activeCell});break;case"normal":i.activeCell&&l.leafNode("selection",{activeCell:i.activeCell,sqref:i.activeCell})}l.closeNode()}parseOpen(l){switch(l.name){case"sheetView":return this.sheetView={workbookViewId:parseInt(l.attributes.workbookViewId,10),rightToLeft:l.attributes.rightToLeft==="1",tabSelected:l.attributes.tabSelected==="1",showRuler:l.attributes.showRuler!=="0",showRowColHeaders:l.attributes.showRowColHeaders!=="0",showGridLines:l.attributes.showGridLines!=="0",zoomScale:parseInt(l.attributes.zoomScale||"100",10),zoomScaleNormal:parseInt(l.attributes.zoomScaleNormal||"100",10),style:l.attributes.view},this.pane=void 0,this.selections={},!0;case"pane":return this.pane={xSplit:parseInt(l.attributes.xSplit||"0",10),ySplit:parseInt(l.attributes.ySplit||"0",10),topLeftCell:l.attributes.topLeftCell,activePane:l.attributes.activePane||"topLeft",state:l.attributes.state},!0;case"selection":{const i=l.attributes.pane||"topLeft";return this.selections[i]={pane:i,activeCell:l.attributes.activeCell},!0}default:return!1}}parseText(){}parseClose(l){let i,u;switch(l){case"sheetView":return this.sheetView&&this.pane?(i=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:d[this.pane.state]||"split",xSplit:this.pane.xSplit,ySplit:this.pane.ySplit,topLeftCell:this.pane.topLeftCell,showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},this.model.state==="split"&&(i.activePane=this.pane.activePane),u=this.selections[this.pane.activePane],u&&u.activeCell&&(i.activeCell=u.activeCell),this.sheetView.style&&(i.style=this.sheetView.style)):(i=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:"normal",showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},u=this.selections.topLeft,u&&u.activeCell&&(i.activeCell=u.activeCell),this.sheetView.style&&(i.style=this.sheetView.style)),!1;default:return!0}}reconcile(){}}},{"../../../utils/col-cache":19,"../base-xform":32}],114:[function(s,n,c){const o=s("../base-xform");n.exports=class extends o{get tag(){return"tablePart"}render(a,d){d&&a.leafNode(this.tag,{"r:id":d.rId})}parseOpen(a){switch(a.name){case this.tag:return this.model={rId:a.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],115:[function(s,n,c){const o=s("../../../utils/under-dash"),a=s("../../../utils/col-cache"),d=s("../../../utils/xml-stream"),l=s("../../rel-type"),i=s("./merges"),u=s("../base-xform"),f=s("../list-xform"),h=s("./row-xform"),m=s("./col-xform"),p=s("./dimension-xform"),x=s("./hyperlink-xform"),g=s("./merge-cell-xform"),v=s("./data-validations-xform"),y=s("./sheet-properties-xform"),b=s("./sheet-format-properties-xform"),C=s("./sheet-view-xform"),T=s("./sheet-protection-xform"),M=s("./page-margins-xform"),U=s("./page-setup-xform"),L=s("./print-options-xform"),P=s("./auto-filter-xform"),B=s("./picture-xform"),q=s("./drawing-xform"),z=s("./table-part-xform"),k=s("./row-breaks-xform"),R=s("./header-footer-xform"),S=s("./cf/conditional-formattings-xform"),w=s("./ext-lst-xform"),_=(N,E)=>{if(!E||!E.length)return N;if(!N||!N.length)return E;const I={},D={};return N.forEach(V=>{I[V.ref]=V,V.rules.forEach(H=>{const{x14Id:G}=H;G&&(D[G]=H)})}),E.forEach(V=>{V.rules.forEach(H=>{const G=D[H.x14Id];G?(($,Y)=>{Object.keys(Y).forEach(F=>{const O=$[F],W=Y[F];O===void 0&&W!==void 0&&($[F]=W)})})(G,H):I[V.ref]?I[V.ref].rules.push(H):N.push({ref:V.ref,rules:[H]})})}),N};class j extends u{constructor(E){super();const{maxRows:I,maxCols:D,ignoreNodes:V}=E||{};this.ignoreNodes=V||[],this.map={sheetPr:new y,dimension:new p,sheetViews:new f({tag:"sheetViews",count:!1,childXform:new C}),sheetFormatPr:new b,cols:new f({tag:"cols",count:!1,childXform:new m}),sheetData:new f({tag:"sheetData",count:!1,empty:!0,childXform:new h({maxItems:D}),maxItems:I}),autoFilter:new P,mergeCells:new f({tag:"mergeCells",count:!0,childXform:new g}),rowBreaks:new k,hyperlinks:new f({tag:"hyperlinks",count:!1,childXform:new x}),pageMargins:new M,dataValidations:new v,pageSetup:new U,headerFooter:new R,printOptions:new L,picture:new B,drawing:new q,sheetProtection:new T,tableParts:new f({tag:"tableParts",count:!0,childXform:new z}),conditionalFormatting:new S,extLst:new w}}prepare(E,I){I.merges=new i,E.hyperlinks=I.hyperlinks=[],E.comments=I.comments=[],I.formulae={},I.siFormulae=0,this.map.cols.prepare(E.cols,I),this.map.sheetData.prepare(E.rows,I),this.map.conditionalFormatting.prepare(E.conditionalFormattings,I),E.mergeCells=I.merges.mergeCells;const D=E.rels=[];function V($){return"rId"+($.length+1)}if(E.hyperlinks.forEach($=>{const Y=V(D);$.rId=Y,D.push({Id:Y,Type:l.Hyperlink,Target:$.target,TargetMode:"External"})}),E.comments.length>0){const $={Id:V(D),Type:l.Comments,Target:`../comments${E.id}.xml`};D.push($);const Y={Id:V(D),Type:l.VmlDrawing,Target:`../drawings/vmlDrawing${E.id}.vml`};D.push(Y),E.comments.forEach(F=>{F.refAddress=a.decodeAddress(F.ref)}),I.commentRefs.push({commentName:"comments"+E.id,vmlDrawing:"vmlDrawing"+E.id})}const H=[];let G;E.media.forEach($=>{if($.type==="background"){const Y=V(D);G=I.media[$.imageId],D.push({Id:Y,Type:l.Image,Target:`../media/${G.name}.${G.extension}`}),E.background={rId:Y},E.image=I.media[$.imageId]}else if($.type==="image"){let{drawing:Y}=E;G=I.media[$.imageId],Y||(Y=E.drawing={rId:V(D),name:"drawing"+ ++I.drawingsCount,anchors:[],rels:[]},I.drawings.push(Y),D.push({Id:Y.rId,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:`../drawings/${Y.name}.xml`}));let F=this.preImageId===$.imageId?H[$.imageId]:H[Y.rels.length];F||(F=V(Y.rels),H[Y.rels.length]=F,Y.rels.push({Id:F,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:`../media/${G.name}.${G.extension}`}));const O={picture:{rId:F},range:$.range};if($.hyperlinks&&$.hyperlinks.hyperlink){const W=V(Y.rels);H[Y.rels.length]=W,O.picture.hyperlinks={tooltip:$.hyperlinks.tooltip,rId:W},Y.rels.push({Id:W,Type:l.Hyperlink,Target:$.hyperlinks.hyperlink,TargetMode:"External"})}this.preImageId=$.imageId,Y.anchors.push(O)}}),E.tables.forEach($=>{const Y=V(D);$.rId=Y,D.push({Id:Y,Type:l.Table,Target:"../tables/"+$.target}),$.columns.forEach(F=>{const{style:O}=F;O&&(F.dxfId=I.styles.addDxfStyle(O))})}),this.map.extLst.prepare(E,I)}render(E,I){E.openXml(d.StdDocAttributes),E.openNode("worksheet",j.WORKSHEET_ATTRIBUTES);const D=I.properties?{defaultRowHeight:I.properties.defaultRowHeight,dyDescent:I.properties.dyDescent,outlineLevelCol:I.properties.outlineLevelCol,outlineLevelRow:I.properties.outlineLevelRow}:void 0;I.properties&&I.properties.defaultColWidth&&(D.defaultColWidth=I.properties.defaultColWidth);const V={outlineProperties:I.properties&&I.properties.outlineProperties,tabColor:I.properties&&I.properties.tabColor,pageSetup:I.pageSetup&&I.pageSetup.fitToPage?{fitToPage:I.pageSetup.fitToPage}:void 0},H=I.pageSetup&&I.pageSetup.margins,G={showRowColHeaders:I.pageSetup&&I.pageSetup.showRowColHeaders,showGridLines:I.pageSetup&&I.pageSetup.showGridLines,horizontalCentered:I.pageSetup&&I.pageSetup.horizontalCentered,verticalCentered:I.pageSetup&&I.pageSetup.verticalCentered},$=I.sheetProtection;this.map.sheetPr.render(E,V),this.map.dimension.render(E,I.dimensions),this.map.sheetViews.render(E,I.views),this.map.sheetFormatPr.render(E,D),this.map.cols.render(E,I.cols),this.map.sheetData.render(E,I.rows),this.map.sheetProtection.render(E,$),this.map.autoFilter.render(E,I.autoFilter),this.map.mergeCells.render(E,I.mergeCells),this.map.conditionalFormatting.render(E,I.conditionalFormattings),this.map.dataValidations.render(E,I.dataValidations),this.map.hyperlinks.render(E,I.hyperlinks),this.map.printOptions.render(E,G),this.map.pageMargins.render(E,H),this.map.pageSetup.render(E,I.pageSetup),this.map.headerFooter.render(E,I.headerFooter),this.map.rowBreaks.render(E,I.rowBreaks),this.map.drawing.render(E,I.drawing),this.map.picture.render(E,I.background),this.map.tableParts.render(E,I.tables),this.map.extLst.render(E,I),I.rels&&I.rels.forEach(Y=>{Y.Type===l.VmlDrawing&&E.leafNode("legacyDrawing",{"r:id":Y.Id})}),E.closeNode()}parseOpen(E){return this.parser?(this.parser.parseOpen(E),!0):E.name==="worksheet"?(o.each(this.map,I=>{I.reset()}),!0):(this.map[E.name]&&!this.ignoreNodes.includes(E.name)&&(this.parser=this.map[E.name],this.parser.parseOpen(E)),!0)}parseText(E){this.parser&&this.parser.parseText(E)}parseClose(E){if(this.parser)return this.parser.parseClose(E)||(this.parser=void 0),!0;switch(E){case"worksheet":{const I=this.map.sheetFormatPr.model||{};this.map.sheetPr.model&&this.map.sheetPr.model.tabColor&&(I.tabColor=this.map.sheetPr.model.tabColor),this.map.sheetPr.model&&this.map.sheetPr.model.outlineProperties&&(I.outlineProperties=this.map.sheetPr.model.outlineProperties);const D={fitToPage:this.map.sheetPr.model&&this.map.sheetPr.model.pageSetup&&this.map.sheetPr.model.pageSetup.fitToPage||!1,margins:this.map.pageMargins.model},V=Object.assign(D,this.map.pageSetup.model,this.map.printOptions.model),H=_(this.map.conditionalFormatting.model,this.map.extLst.model&&this.map.extLst.model["x14:conditionalFormattings"]);return this.model={dimensions:this.map.dimension.model,cols:this.map.cols.model,rows:this.map.sheetData.model,mergeCells:this.map.mergeCells.model,hyperlinks:this.map.hyperlinks.model,dataValidations:this.map.dataValidations.model,properties:I,views:this.map.sheetViews.model,pageSetup:V,headerFooter:this.map.headerFooter.model,background:this.map.picture.model,drawing:this.map.drawing.model,tables:this.map.tableParts.model,conditionalFormattings:H},this.map.autoFilter.model&&(this.model.autoFilter=this.map.autoFilter.model),this.map.sheetProtection.model&&(this.model.sheetProtection=this.map.sheetProtection.model),!1}default:return!0}}reconcile(E,I){const D=(E.relationships||[]).reduce((H,G)=>{if(H[G.Id]=G,G.Type===l.Comments&&(E.comments=I.comments[G.Target].comments),G.Type===l.VmlDrawing&&E.comments&&E.comments.length){const $=I.vmlDrawings[G.Target].comments;E.comments.forEach((Y,F)=>{Y.note=Object.assign({},Y.note,$[F])})}return H},{});if(I.commentsMap=(E.comments||[]).reduce((H,G)=>(G.ref&&(H[G.ref]=G),H),{}),I.hyperlinkMap=(E.hyperlinks||[]).reduce((H,G)=>(G.rId&&(H[G.address]=D[G.rId].Target),H),{}),I.formulae={},E.rows=E.rows&&E.rows.filter(Boolean)||[],E.rows.forEach(H=>{H.cells=H.cells&&H.cells.filter(Boolean)||[]}),this.map.cols.reconcile(E.cols,I),this.map.sheetData.reconcile(E.rows,I),this.map.conditionalFormatting.reconcile(E.conditionalFormattings,I),E.media=[],E.drawing){const H=D[E.drawing.rId].Target.match(/\/drawings\/([a-zA-Z0-9]+)[.][a-zA-Z]{3,4}$/);if(H){const G=H[1];I.drawings[G].anchors.forEach($=>{if($.medium){const Y={type:"image",imageId:$.medium.index,range:$.range,hyperlinks:$.picture.hyperlinks};E.media.push(Y)}})}}const V=E.background&&D[E.background.rId];if(V){const H=V.Target.split("/media/")[1],G=I.mediaIndex&&I.mediaIndex[H];G!==void 0&&E.media.push({type:"background",imageId:G})}E.tables=(E.tables||[]).map(H=>{const G=D[H.rId];return I.tables[G.Target]}),delete E.relationships,delete E.hyperlinks,delete E.comments}}j.WORKSHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"},n.exports=j},{"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/xml-stream":28,"../../rel-type":31,"../base-xform":32,"../list-xform":71,"./auto-filter-xform":72,"./cf/conditional-formattings-xform":87,"./col-xform":92,"./data-validations-xform":93,"./dimension-xform":94,"./drawing-xform":95,"./ext-lst-xform":96,"./header-footer-xform":97,"./hyperlink-xform":98,"./merge-cell-xform":99,"./merges":100,"./page-margins-xform":103,"./page-setup-xform":105,"./picture-xform":106,"./print-options-xform":107,"./row-breaks-xform":108,"./row-xform":109,"./sheet-format-properties-xform":110,"./sheet-properties-xform":111,"./sheet-protection-xform":112,"./sheet-view-xform":113,"./table-part-xform":114}],116:[function(s,n,c){const o=s("../base-xform");n.exports=class extends o{constructor(a){super(),this.tag=a.tag,this.attr=a.attr}render(a,d){d&&(a.openNode(this.tag),a.closeNode())}parseOpen(a){a.name===this.tag&&(this.model=!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],117:[function(s,n,c){const o=s("../base-xform");n.exports=class extends o{constructor(a){super(),this.tag=a.tag,this.attr=a.attr,this.attrs=a.attrs,this._format=a.format||function(d){try{return Number.isNaN(d.getTime())?"":d.toISOString()}catch{return""}},this._parse=a.parse||function(d){return new Date(d)}}render(a,d){d&&(a.openNode(this.tag),this.attrs&&a.addAttributes(this.attrs),this.attr?a.addAttribute(this.attr,this._format(d)):a.writeText(this._format(d)),a.closeNode())}parseOpen(a){a.name===this.tag&&(this.attr?this.model=this._parse(a.attributes[this.attr]):this.text=[])}parseText(a){this.attr||this.text.push(a)}parseClose(){return this.attr||(this.model=this._parse(this.text.join(""))),!1}}},{"../base-xform":32}],118:[function(s,n,c){const o=s("../base-xform");n.exports=class extends o{constructor(a){super(),this.tag=a.tag,this.attr=a.attr,this.attrs=a.attrs,this.zero=a.zero}render(a,d){(d||this.zero)&&(a.openNode(this.tag),this.attrs&&a.addAttributes(this.attrs),this.attr?a.addAttribute(this.attr,d):a.writeText(d),a.closeNode())}parseOpen(a){return a.name===this.tag&&(this.attr?this.model=parseInt(a.attributes[this.attr],10):this.text=[],!0)}parseText(a){this.attr||this.text.push(a)}parseClose(){return this.attr||(this.model=parseInt(this.text.join("")||0,10)),!1}}},{"../base-xform":32}],119:[function(s,n,c){const o=s("../base-xform");n.exports=class extends o{constructor(a){super(),this.tag=a.tag,this.attr=a.attr,this.attrs=a.attrs}render(a,d){d!==void 0&&(a.openNode(this.tag),this.attrs&&a.addAttributes(this.attrs),this.attr?a.addAttribute(this.attr,d):a.writeText(d),a.closeNode())}parseOpen(a){a.name===this.tag&&(this.attr?this.model=a.attributes[this.attr]:this.text=[])}parseText(a){this.attr||this.text.push(a)}parseClose(){return this.attr||(this.model=this.text.join("")),!1}}},{"../base-xform":32}],120:[function(s,n,c){const o=s("./base-xform"),a=s("../../utils/xml-stream");n.exports=class extends o{constructor(d){super(),this._model=d}render(d){if(!this._xml){const l=new a;(function i(u,f){u.openNode(f.tag,f.$),f.c&&f.c.forEach(h=>{i(u,h)}),f.t&&u.writeText(f.t),u.closeNode()})(l,this._model),this._xml=l.xml}d.writeXml(this._xml)}parseOpen(){return!0}parseText(){}parseClose(d){switch(d){case this._model.tag:return!1;default:return!0}}}},{"../../utils/xml-stream":28,"./base-xform":32}],121:[function(s,n,c){const o=s("./text-xform"),a=s("./rich-text-xform"),d=s("../base-xform");n.exports=class extends d{constructor(){super(),this.map={r:new a,t:new o}}get tag(){return"rPh"}render(l,i){if(l.openNode(this.tag,{sb:i.sb||0,eb:i.eb||0}),i&&i.hasOwnProperty("richText")&&i.richText){const{r:u}=this.map;i.richText.forEach(f=>{u.render(l,f)})}else i&&this.map.t.render(l,i.text);l.closeNode()}parseOpen(l){const{name:i}=l;return this.parser?(this.parser.parseOpen(l),!0):i===this.tag?(this.model={sb:parseInt(l.attributes.sb,10),eb:parseInt(l.attributes.eb,10)},!0):(this.parser=this.map[i],!!this.parser&&(this.parser.parseOpen(l),!0))}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){if(this.parser){if(!this.parser.parseClose(l)){switch(l){case"r":{let i=this.model.richText;i||(i=this.model.richText=[]),i.push(this.parser.model);break}case"t":this.model.text=this.parser.model}this.parser=void 0}return!0}switch(l){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"./rich-text-xform":122,"./text-xform":125}],122:[function(s,n,c){const o=s("./text-xform"),a=s("../style/font-xform"),d=s("../base-xform");class l extends d{constructor(u){super(),this.model=u}get tag(){return"r"}get textXform(){return this._textXform||(this._textXform=new o)}get fontXform(){return this._fontXform||(this._fontXform=new a(l.FONT_OPTIONS))}render(u,f){f=f||this.model,u.openNode("r"),f.font&&this.fontXform.render(u,f.font),this.textXform.render(u,f.text),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"r":return this.model={},!0;case"t":return this.parser=this.textXform,this.parser.parseOpen(u),!0;case"rPr":return this.parser=this.fontXform,this.parser.parseOpen(u),!0;default:return!1}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){switch(u){case"r":return!1;case"t":return this.model.text=this.parser.model,this.parser=void 0,!0;case"rPr":return this.model.font=this.parser.model,this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(u),!0}}}l.FONT_OPTIONS={tagName:"rPr",fontNameTag:"rFont"},n.exports=l},{"../base-xform":32,"../style/font-xform":131,"./text-xform":125}],123:[function(s,n,c){const o=s("./text-xform"),a=s("./rich-text-xform"),d=s("./phonetic-text-xform"),l=s("../base-xform");n.exports=class extends l{constructor(i){super(),this.model=i,this.map={r:new a,t:new o,rPh:new d}}get tag(){return"si"}render(i,u){i.openNode(this.tag),u&&u.hasOwnProperty("richText")&&u.richText?u.richText.length?u.richText.forEach(f=>{this.map.r.render(i,f)}):this.map.t.render(i,""):u!=null&&this.map.t.render(i,u),i.closeNode()}parseOpen(i){const{name:u}=i;return this.parser?(this.parser.parseOpen(i),!0):u===this.tag?(this.model={},!0):(this.parser=this.map[u],!!this.parser&&(this.parser.parseOpen(i),!0))}parseText(i){this.parser&&this.parser.parseText(i)}parseClose(i){if(this.parser){if(!this.parser.parseClose(i)){switch(i){case"r":{let u=this.model.richText;u||(u=this.model.richText=[]),u.push(this.parser.model);break}case"t":this.model=this.parser.model}this.parser=void 0}return!0}switch(i){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"./phonetic-text-xform":121,"./rich-text-xform":122,"./text-xform":125}],124:[function(s,n,c){const o=s("../../../utils/xml-stream"),a=s("../base-xform"),d=s("./shared-string-xform");n.exports=class extends a{constructor(l){super(),this.model=l||{values:[],count:0},this.hash=Object.create(null),this.rich=Object.create(null)}get sharedStringXform(){return this._sharedStringXform||(this._sharedStringXform=new d)}get values(){return this.model.values}get uniqueCount(){return this.model.values.length}get count(){return this.model.count}getString(l){return this.model.values[l]}add(l){return l.richText?this.addRichText(l):this.addText(l)}addText(l){let i=this.hash[l];return i===void 0&&(i=this.hash[l]=this.model.values.length,this.model.values.push(l)),this.model.count++,i}addRichText(l){const i=this.sharedStringXform.toXml(l);let u=this.rich[i];return u===void 0&&(u=this.rich[i]=this.model.values.length,this.model.values.push(l)),this.model.count++,u}render(l,i){i=i||this._values,l.openXml(o.StdDocAttributes),l.openNode("sst",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:i.count,uniqueCount:i.values.length});const u=this.sharedStringXform;i.values.forEach(f=>{u.render(l,f)}),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case"sst":return!0;case"si":return this.parser=this.sharedStringXform,this.parser.parseOpen(l),!0;default:throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(l))}}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){if(this.parser)return this.parser.parseClose(l)||(this.model.values.push(this.parser.model),this.model.count++,this.parser=void 0),!0;switch(l){case"sst":return!1;default:throw new Error("Unexpected xml node in parseClose: "+l)}}}},{"../../../utils/xml-stream":28,"../base-xform":32,"./shared-string-xform":123}],125:[function(s,n,c){const o=s("../base-xform");n.exports=class extends o{get tag(){return"t"}render(a,d){a.openNode("t"),/^\s|\n|\s$/.test(d)&&a.addAttribute("xml:space","preserve"),a.writeText(d),a.closeNode()}get model(){return this._text.join("").replace(/_x([0-9A-F]{4})_/g,(a,d)=>String.fromCharCode(parseInt(d,16)))}parseOpen(a){switch(a.name){case"t":return this._text=[],!0;default:return!1}}parseText(a){this._text.push(a)}parseClose(){return!1}}},{"../base-xform":32}],126:[function(s,n,c){const o=s("../../../doc/enums"),a=s("../../../utils/utils"),d=s("../base-xform"),l={horizontalValues:["left","center","right","fill","centerContinuous","distributed","justify"].reduce((u,f)=>(u[f]=!0,u),{}),horizontal(u){return this.horizontalValues[u]?u:void 0},verticalValues:["top","middle","bottom","distributed","justify"].reduce((u,f)=>(u[f]=!0,u),{}),vertical(u){return u==="middle"?"center":this.verticalValues[u]?u:void 0},wrapText:u=>!!u||void 0,shrinkToFit:u=>!!u||void 0,textRotation(u){switch(u){case"vertical":return u;default:return(u=a.validInt(u))>=-90&&u<=90?u:void 0}},indent:u=>(u=a.validInt(u),Math.max(0,u)),readingOrder(u){switch(u){case"ltr":return o.ReadingOrder.LeftToRight;case"rtl":return o.ReadingOrder.RightToLeft;default:return}}},i={toXml(u){if(u=l.textRotation(u)){if(u==="vertical")return 255;const f=Math.round(u);if(f>=0&&f<=90)return f;if(f<0&&f>=-90)return 90-f}},toModel(u){const f=a.validInt(u);if(f!==void 0){if(f===255)return"vertical";if(f>=0&&f<=90)return f;if(f>90&&f<=180)return 90-f}}};n.exports=class extends d{get tag(){return"alignment"}render(u,f){u.addRollback(),u.openNode("alignment");let h=!1;function m(p,x){x&&(u.addAttribute(p,x),h=!0)}m("horizontal",l.horizontal(f.horizontal)),m("vertical",l.vertical(f.vertical)),m("wrapText",!!l.wrapText(f.wrapText)&&"1"),m("shrinkToFit",!!l.shrinkToFit(f.shrinkToFit)&&"1"),m("indent",l.indent(f.indent)),m("textRotation",i.toXml(f.textRotation)),m("readingOrder",l.readingOrder(f.readingOrder)),u.closeNode(),h?u.commit():u.rollback()}parseOpen(u){const f={};let h=!1;function m(p,x,g){p&&(f[x]=g,h=!0)}m(u.attributes.horizontal,"horizontal",u.attributes.horizontal),m(u.attributes.vertical,"vertical",u.attributes.vertical==="center"?"middle":u.attributes.vertical),m(u.attributes.wrapText,"wrapText",a.parseBoolean(u.attributes.wrapText)),m(u.attributes.shrinkToFit,"shrinkToFit",a.parseBoolean(u.attributes.shrinkToFit)),m(u.attributes.indent,"indent",parseInt(u.attributes.indent,10)),m(u.attributes.textRotation,"textRotation",i.toModel(u.attributes.textRotation)),m(u.attributes.readingOrder,"readingOrder",u.attributes.readingOrder==="2"?"rtl":"ltr"),this.model=h?f:null}parseText(){}parseClose(){return!1}}},{"../../../doc/enums":7,"../../../utils/utils":27,"../base-xform":32}],127:[function(s,n,c){const o=s("../base-xform"),a=s("../../../utils/utils"),d=s("./color-xform");class l extends o{constructor(u){super(),this.name=u,this.map={color:new d}}get tag(){return this.name}render(u,f,h){const m=f&&f.color||h||this.defaultColor;u.openNode(this.name),f&&f.style&&(u.addAttribute("style",f.style),m&&this.map.color.render(u,m)),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case this.name:{const{style:f}=u.attributes;return this.model=f?{style:f}:void 0,!0}case"color":return this.parser=this.map.color,this.parser.parseOpen(u),!0;default:return!1}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){return this.parser?(this.parser.parseClose(u)||(this.parser=void 0),!0):(u===this.name&&this.map.color.model&&(this.model||(this.model={}),this.model.color=this.map.color.model),!1)}validStyle(u){return l.validStyleValues[u]}}l.validStyleValues=["thin","dashed","dotted","dashDot","hair","dashDotDot","slantDashDot","mediumDashed","mediumDashDotDot","mediumDashDot","medium","double","thick"].reduce((i,u)=>(i[u]=!0,i),{}),n.exports=class extends o{constructor(){super(),this.map={top:new l("top"),left:new l("left"),bottom:new l("bottom"),right:new l("right"),diagonal:new l("diagonal")}}render(i,u){const{color:f}=u;function h(m,p){m&&!m.color&&u.color&&(m={...m,color:u.color}),p.render(i,m,f)}i.openNode("border"),u.diagonal&&u.diagonal.style&&(u.diagonal.up&&i.addAttribute("diagonalUp","1"),u.diagonal.down&&i.addAttribute("diagonalDown","1")),h(u.left,this.map.left),h(u.right,this.map.right),h(u.top,this.map.top),h(u.bottom,this.map.bottom),h(u.diagonal,this.map.diagonal),i.closeNode()}parseOpen(i){if(this.parser)return this.parser.parseOpen(i),!0;switch(i.name){case"border":return this.reset(),this.diagonalUp=a.parseBoolean(i.attributes.diagonalUp),this.diagonalDown=a.parseBoolean(i.attributes.diagonalDown),!0;default:return this.parser=this.map[i.name],!!this.parser&&(this.parser.parseOpen(i),!0)}}parseText(i){this.parser&&this.parser.parseText(i)}parseClose(i){if(this.parser)return this.parser.parseClose(i)||(this.parser=void 0),!0;if(i==="border"){const u=this.model={},f=function(h,m,p){m&&(p&&Object.assign(m,p),u[h]=m)};f("left",this.map.left.model),f("right",this.map.right.model),f("top",this.map.top.model),f("bottom",this.map.bottom.model),f("diagonal",this.map.diagonal.model,{up:this.diagonalUp,down:this.diagonalDown})}return!1}}},{"../../../utils/utils":27,"../base-xform":32,"./color-xform":128}],128:[function(s,n,c){const o=s("../base-xform");n.exports=class extends o{constructor(a){super(),this.name=a||"color"}get tag(){return this.name}render(a,d){return!!d&&(a.openNode(this.name),d.argb?a.addAttribute("rgb",d.argb):d.theme!==void 0?(a.addAttribute("theme",d.theme),d.tint!==void 0&&a.addAttribute("tint",d.tint)):d.indexed!==void 0?a.addAttribute("indexed",d.indexed):a.addAttribute("auto","1"),a.closeNode(),!0)}parseOpen(a){return a.name===this.name&&(a.attributes.rgb?this.model={argb:a.attributes.rgb}:a.attributes.theme?(this.model={theme:parseInt(a.attributes.theme,10)},a.attributes.tint&&(this.model.tint=parseFloat(a.attributes.tint))):a.attributes.indexed?this.model={indexed:parseInt(a.attributes.indexed,10)}:this.model=void 0,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],129:[function(s,n,c){const o=s("../base-xform"),a=s("./alignment-xform"),d=s("./border-xform"),l=s("./fill-xform"),i=s("./font-xform"),u=s("./numfmt-xform"),f=s("./protection-xform");n.exports=class extends o{constructor(){super(),this.map={alignment:new a,border:new d,fill:new l,font:new i,numFmt:new u,protection:new f}}get tag(){return"dxf"}render(h,m){if(h.openNode(this.tag),m.font&&this.map.font.render(h,m.font),m.numFmt&&m.numFmtId){const p={id:m.numFmtId,formatCode:m.numFmt};this.map.numFmt.render(h,p)}m.fill&&this.map.fill.render(h,m.fill),m.alignment&&this.map.alignment.render(h,m.alignment),m.border&&this.map.border.render(h,m.border),m.protection&&this.map.protection.render(h,m.protection),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case this.tag:return this.reset(),!0;default:return this.parser=this.map[h.name],this.parser&&this.parser.parseOpen(h),!0}}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){return this.parser?(this.parser.parseClose(h)||(this.parser=void 0),!0):h!==this.tag||(this.model={alignment:this.map.alignment.model,border:this.map.border.model,fill:this.map.fill.model,font:this.map.font.model,numFmt:this.map.numFmt.model,protection:this.map.protection.model},!1)}}},{"../base-xform":32,"./alignment-xform":126,"./border-xform":127,"./fill-xform":130,"./font-xform":131,"./numfmt-xform":132,"./protection-xform":133}],130:[function(s,n,c){const o=s("../base-xform"),a=s("./color-xform");class d extends o{constructor(){super(),this.map={color:new a}}get tag(){return"stop"}render(h,m){h.openNode("stop"),h.addAttribute("position",m.position),this.map.color.render(h,m.color),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case"stop":return this.model={position:parseFloat(h.attributes.position)},!0;case"color":return this.parser=this.map.color,this.parser.parseOpen(h),!0;default:return!1}}parseText(){}parseClose(h){return!!this.parser&&(this.parser.parseClose(h)||(this.model.color=this.parser.model,this.parser=void 0),!0)}}class l extends o{constructor(){super(),this.map={fgColor:new a("fgColor"),bgColor:new a("bgColor")}}get name(){return"pattern"}get tag(){return"patternFill"}render(h,m){h.openNode("patternFill"),h.addAttribute("patternType",m.pattern),m.fgColor&&this.map.fgColor.render(h,m.fgColor),m.bgColor&&this.map.bgColor.render(h,m.bgColor),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case"patternFill":return this.model={type:"pattern",pattern:h.attributes.patternType},!0;default:return this.parser=this.map[h.name],!!this.parser&&(this.parser.parseOpen(h),!0)}}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){return!!this.parser&&(this.parser.parseClose(h)||(this.parser.model&&(this.model[h]=this.parser.model),this.parser=void 0),!0)}}class i extends o{constructor(){super(),this.map={stop:new d}}get name(){return"gradient"}get tag(){return"gradientFill"}render(h,m){switch(h.openNode("gradientFill"),m.gradient){case"angle":h.addAttribute("degree",m.degree);break;case"path":h.addAttribute("type","path"),m.center.left&&(h.addAttribute("left",m.center.left),m.center.right===void 0&&h.addAttribute("right",m.center.left)),m.center.right&&h.addAttribute("right",m.center.right),m.center.top&&(h.addAttribute("top",m.center.top),m.center.bottom===void 0&&h.addAttribute("bottom",m.center.top)),m.center.bottom&&h.addAttribute("bottom",m.center.bottom)}const p=this.map.stop;m.stops.forEach(x=>{p.render(h,x)}),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case"gradientFill":{const m=this.model={stops:[]};return h.attributes.degree?(m.gradient="angle",m.degree=parseInt(h.attributes.degree,10)):h.attributes.type==="path"&&(m.gradient="path",m.center={left:h.attributes.left?parseFloat(h.attributes.left):0,top:h.attributes.top?parseFloat(h.attributes.top):0},h.attributes.right!==h.attributes.left&&(m.center.right=h.attributes.right?parseFloat(h.attributes.right):0),h.attributes.bottom!==h.attributes.top&&(m.center.bottom=h.attributes.bottom?parseFloat(h.attributes.bottom):0)),!0}case"stop":return this.parser=this.map.stop,this.parser.parseOpen(h),!0;default:return!1}}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){return!!this.parser&&(this.parser.parseClose(h)||(this.model.stops.push(this.parser.model),this.parser=void 0),!0)}}class u extends o{constructor(){super(),this.map={patternFill:new l,gradientFill:new i}}get tag(){return"fill"}render(h,m){switch(h.addRollback(),h.openNode("fill"),m.type){case"pattern":this.map.patternFill.render(h,m);break;case"gradient":this.map.gradientFill.render(h,m);break;default:return void h.rollback()}h.closeNode(),h.commit()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case"fill":return this.model={},!0;default:return this.parser=this.map[h.name],!!this.parser&&(this.parser.parseOpen(h),!0)}}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){return!!this.parser&&(this.parser.parseClose(h)||(this.model=this.parser.model,this.model.type=this.parser.name,this.parser=void 0),!0)}validStyle(h){return u.validPatternValues[h]}}u.validPatternValues=["none","solid","darkVertical","darkGray","mediumGray","lightGray","gray125","gray0625","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","lightGrid"].reduce((f,h)=>(f[h]=!0,f),{}),u.StopXform=d,u.PatternFillXform=l,u.GradientFillXform=i,n.exports=u},{"../base-xform":32,"./color-xform":128}],131:[function(s,n,c){const o=s("./color-xform"),a=s("../simple/boolean-xform"),d=s("../simple/integer-xform"),l=s("../simple/string-xform"),i=s("./underline-xform"),u=s("../../../utils/under-dash"),f=s("../base-xform");class h extends f{constructor(p){super(),this.options=p||h.OPTIONS,this.map={b:{prop:"bold",xform:new a({tag:"b",attr:"val"})},i:{prop:"italic",xform:new a({tag:"i",attr:"val"})},u:{prop:"underline",xform:new i},charset:{prop:"charset",xform:new d({tag:"charset",attr:"val"})},color:{prop:"color",xform:new o},condense:{prop:"condense",xform:new a({tag:"condense",attr:"val"})},extend:{prop:"extend",xform:new a({tag:"extend",attr:"val"})},family:{prop:"family",xform:new d({tag:"family",attr:"val"})},outline:{prop:"outline",xform:new a({tag:"outline",attr:"val"})},vertAlign:{prop:"vertAlign",xform:new l({tag:"vertAlign",attr:"val"})},scheme:{prop:"scheme",xform:new l({tag:"scheme",attr:"val"})},shadow:{prop:"shadow",xform:new a({tag:"shadow",attr:"val"})},strike:{prop:"strike",xform:new a({tag:"strike",attr:"val"})},sz:{prop:"size",xform:new d({tag:"sz",attr:"val"})}},this.map[this.options.fontNameTag]={prop:"name",xform:new l({tag:this.options.fontNameTag,attr:"val"})}}get tag(){return this.options.tagName}render(p,x){const{map:g}=this;p.openNode(this.options.tagName),u.each(this.map,(v,y)=>{g[y].xform.render(p,x[v.prop])}),p.closeNode()}parseOpen(p){if(this.parser)return this.parser.parseOpen(p),!0;if(this.map[p.name])return this.parser=this.map[p.name].xform,this.parser.parseOpen(p);switch(p.name){case this.options.tagName:return this.model={},!0;default:return!1}}parseText(p){this.parser&&this.parser.parseText(p)}parseClose(p){if(this.parser&&!this.parser.parseClose(p)){const x=this.map[p];return this.parser.model&&(this.model[x.prop]=this.parser.model),this.parser=void 0,!0}switch(p){case this.options.tagName:return!1;default:return!0}}}h.OPTIONS={tagName:"font",fontNameTag:"name"},n.exports=h},{"../../../utils/under-dash":26,"../base-xform":32,"../simple/boolean-xform":116,"../simple/integer-xform":118,"../simple/string-xform":119,"./color-xform":128,"./underline-xform":136}],132:[function(s,n,c){const o=s("../../../utils/under-dash"),a=s("../../defaultnumformats"),d=s("../base-xform"),l=function(){const u={};return o.each(a,(f,h)=>{f.f&&(u[f.f]=parseInt(h,10))}),u}();class i extends d{constructor(f,h){super(),this.id=f,this.formatCode=h}get tag(){return"numFmt"}render(f,h){f.leafNode("numFmt",{numFmtId:h.id,formatCode:h.formatCode})}parseOpen(f){switch(f.name){case"numFmt":return this.model={id:parseInt(f.attributes.numFmtId,10),formatCode:f.attributes.formatCode.replace(/[\\](.)/g,"$1")},!0;default:return!1}}parseText(){}parseClose(){return!1}}i.getDefaultFmtId=function(u){return l[u]},i.getDefaultFmtCode=function(u){return a[u]&&a[u].f},n.exports=i},{"../../../utils/under-dash":26,"../../defaultnumformats":30,"../base-xform":32}],133:[function(s,n,c){const o=s("../base-xform"),a={boolean:(d,l)=>d===void 0?l:d};n.exports=class extends o{get tag(){return"protection"}render(d,l){d.addRollback(),d.openNode("protection");let i=!1;function u(f,h){h!==void 0&&(d.addAttribute(f,h),i=!0)}u("locked",a.boolean(l.locked,!0)?void 0:"0"),u("hidden",a.boolean(l.hidden,!1)?"1":void 0),d.closeNode(),i?d.commit():d.rollback()}parseOpen(d){const l={locked:d.attributes.locked!=="0",hidden:d.attributes.hidden==="1"},i=!l.locked||l.hidden;this.model=i?l:null}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],134:[function(s,n,c){const o=s("../base-xform"),a=s("./alignment-xform"),d=s("./protection-xform");n.exports=class extends o{constructor(l){super(),this.xfId=!(!l||!l.xfId),this.map={alignment:new a,protection:new d}}get tag(){return"xf"}render(l,i){l.openNode("xf",{numFmtId:i.numFmtId||0,fontId:i.fontId||0,fillId:i.fillId||0,borderId:i.borderId||0}),this.xfId&&l.addAttribute("xfId",i.xfId||0),i.numFmtId&&l.addAttribute("applyNumberFormat","1"),i.fontId&&l.addAttribute("applyFont","1"),i.fillId&&l.addAttribute("applyFill","1"),i.borderId&&l.addAttribute("applyBorder","1"),i.alignment&&l.addAttribute("applyAlignment","1"),i.protection&&l.addAttribute("applyProtection","1"),i.alignment&&this.map.alignment.render(l,i.alignment),i.protection&&this.map.protection.render(l,i.protection),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case"xf":return this.model={numFmtId:parseInt(l.attributes.numFmtId,10),fontId:parseInt(l.attributes.fontId,10),fillId:parseInt(l.attributes.fillId,10),borderId:parseInt(l.attributes.borderId,10)},this.xfId&&(this.model.xfId=parseInt(l.attributes.xfId,10)),!0;case"alignment":return this.parser=this.map.alignment,this.parser.parseOpen(l),!0;case"protection":return this.parser=this.map.protection,this.parser.parseOpen(l),!0;default:return!1}}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){return this.parser?(this.parser.parseClose(l)||(this.map.protection===this.parser?this.model.protection=this.parser.model:this.model.alignment=this.parser.model,this.parser=void 0),!0):l!=="xf"}}},{"../base-xform":32,"./alignment-xform":126,"./protection-xform":133}],135:[function(s,n,c){const o=s("../../../doc/enums"),a=s("../../../utils/xml-stream"),d=s("../base-xform"),l=s("../static-xform"),i=s("../list-xform"),u=s("./font-xform"),f=s("./fill-xform"),h=s("./border-xform"),m=s("./numfmt-xform"),p=s("./style-xform"),x=s("./dxf-xform");class g extends d{constructor(y){super(),this.map={numFmts:new i({tag:"numFmts",count:!0,childXform:new m}),fonts:new i({tag:"fonts",count:!0,childXform:new u,$:{"x14ac:knownFonts":1}}),fills:new i({tag:"fills",count:!0,childXform:new f}),borders:new i({tag:"borders",count:!0,childXform:new h}),cellStyleXfs:new i({tag:"cellStyleXfs",count:!0,childXform:new p}),cellXfs:new i({tag:"cellXfs",count:!0,childXform:new p({xfId:!0})}),dxfs:new i({tag:"dxfs",always:!0,count:!0,childXform:new x}),numFmt:new m,font:new u,fill:new f,border:new h,style:new p({xfId:!0}),cellStyles:g.STATIC_XFORMS.cellStyles,tableStyles:g.STATIC_XFORMS.tableStyles,extLst:g.STATIC_XFORMS.extLst},y&&this.init()}initIndex(){this.index={style:{},numFmt:{},numFmtNextId:164,font:{},border:{},fill:{}}}init(){this.model={styles:[],numFmts:[],fonts:[],borders:[],fills:[],dxfs:[]},this.initIndex(),this._addBorder({}),this._addStyle({numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}),this._addFill({type:"pattern",pattern:"none"}),this._addFill({type:"pattern",pattern:"gray125"}),this.weakMap=new WeakMap}render(y,b){b=b||this.model,y.openXml(a.StdDocAttributes),y.openNode("styleSheet",g.STYLESHEET_ATTRIBUTES),this.index?(b.numFmts&&b.numFmts.length&&(y.openNode("numFmts",{count:b.numFmts.length}),b.numFmts.forEach(C=>{y.writeXml(C)}),y.closeNode()),b.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),y.openNode("fonts",{count:b.fonts.length,"x14ac:knownFonts":1}),b.fonts.forEach(C=>{y.writeXml(C)}),y.closeNode(),y.openNode("fills",{count:b.fills.length}),b.fills.forEach(C=>{y.writeXml(C)}),y.closeNode(),y.openNode("borders",{count:b.borders.length}),b.borders.forEach(C=>{y.writeXml(C)}),y.closeNode(),this.map.cellStyleXfs.render(y,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),y.openNode("cellXfs",{count:b.styles.length}),b.styles.forEach(C=>{y.writeXml(C)}),y.closeNode()):(this.map.numFmts.render(y,b.numFmts),this.map.fonts.render(y,b.fonts),this.map.fills.render(y,b.fills),this.map.borders.render(y,b.borders),this.map.cellStyleXfs.render(y,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),this.map.cellXfs.render(y,b.styles)),g.STATIC_XFORMS.cellStyles.render(y),this.map.dxfs.render(y,b.dxfs),g.STATIC_XFORMS.tableStyles.render(y),g.STATIC_XFORMS.extLst.render(y),y.closeNode()}parseOpen(y){if(this.parser)return this.parser.parseOpen(y),!0;switch(y.name){case"styleSheet":return this.initIndex(),!0;default:return this.parser=this.map[y.name],this.parser&&this.parser.parseOpen(y),!0}}parseText(y){this.parser&&this.parser.parseText(y)}parseClose(y){if(this.parser)return this.parser.parseClose(y)||(this.parser=void 0),!0;switch(y){case"styleSheet":{this.model={};const b=(C,T)=>{T.model&&T.model.length&&(this.model[C]=T.model)};if(b("numFmts",this.map.numFmts),b("fonts",this.map.fonts),b("fills",this.map.fills),b("borders",this.map.borders),b("styles",this.map.cellXfs),b("dxfs",this.map.dxfs),this.index={model:[],numFmt:[]},this.model.numFmts){const C=this.index.numFmt;this.model.numFmts.forEach(T=>{C[T.id]=T.formatCode})}return!1}default:return!0}}addStyleModel(y,b){if(!y)return 0;if(this.model.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),this.weakMap&&this.weakMap.has(y))return this.weakMap.get(y);const C={};if(b=b||o.ValueType.Number,y.numFmt)C.numFmtId=this._addNumFmtStr(y.numFmt);else switch(b){case o.ValueType.Number:C.numFmtId=this._addNumFmtStr("General");break;case o.ValueType.Date:C.numFmtId=this._addNumFmtStr("mm-dd-yy")}y.font&&(C.fontId=this._addFont(y.font)),y.border&&(C.borderId=this._addBorder(y.border)),y.fill&&(C.fillId=this._addFill(y.fill)),y.alignment&&(C.alignment=y.alignment),y.protection&&(C.protection=y.protection);const T=this._addStyle(C);return this.weakMap&&this.weakMap.set(y,T),T}getStyleModel(y){const b=this.model.styles[y];if(!b)return null;let C=this.index.model[y];if(C)return C;if(C=this.index.model[y]={},b.numFmtId){const M=this.index.numFmt[b.numFmtId]||m.getDefaultFmtCode(b.numFmtId);M&&(C.numFmt=M)}function T(M,U,L){if(L||L===0){const P=U[L];P&&(C[M]=P)}}return T("font",this.model.fonts,b.fontId),T("border",this.model.borders,b.borderId),T("fill",this.model.fills,b.fillId),b.alignment&&(C.alignment=b.alignment),b.protection&&(C.protection=b.protection),C}addDxfStyle(y){return y.numFmt&&(y.numFmtId=this._addNumFmtStr(y.numFmt)),this.model.dxfs.push(y),this.model.dxfs.length-1}getDxfStyle(y){return this.model.dxfs[y]}_addStyle(y){const b=this.map.style.toXml(y);let C=this.index.style[b];return C===void 0&&(C=this.index.style[b]=this.model.styles.length,this.model.styles.push(b)),C}_addNumFmtStr(y){let b=m.getDefaultFmtId(y);if(b!==void 0||(b=this.index.numFmt[y],b!==void 0))return b;b=this.index.numFmt[y]=164+this.model.numFmts.length;const C=this.map.numFmt.toXml({id:b,formatCode:y});return this.model.numFmts.push(C),b}_addFont(y){const b=this.map.font.toXml(y);let C=this.index.font[b];return C===void 0&&(C=this.index.font[b]=this.model.fonts.length,this.model.fonts.push(b)),C}_addBorder(y){const b=this.map.border.toXml(y);let C=this.index.border[b];return C===void 0&&(C=this.index.border[b]=this.model.borders.length,this.model.borders.push(b)),C}_addFill(y){const b=this.map.fill.toXml(y);let C=this.index.fill[b];return C===void 0&&(C=this.index.fill[b]=this.model.fills.length,this.model.fills.push(b)),C}}g.STYLESHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac x16r2","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main"},g.STATIC_XFORMS={cellStyles:new l({tag:"cellStyles",$:{count:1},c:[{tag:"cellStyle",$:{name:"Normal",xfId:0,builtinId:0}}]}),dxfs:new l({tag:"dxfs",$:{count:0}}),tableStyles:new l({tag:"tableStyles",$:{count:0,defaultTableStyle:"TableStyleMedium2",defaultPivotStyle:"PivotStyleLight16"}}),extLst:new l({tag:"extLst",c:[{tag:"ext",$:{uri:"{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"},c:[{tag:"x14:slicerStyles",$:{defaultSlicerStyle:"SlicerStyleLight1"}}]},{tag:"ext",$:{uri:"{9260A510-F301-46a8-8635-F512D64BE5F5}","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},c:[{tag:"x15:timelineStyles",$:{defaultTimelineStyle:"TimeSlicerStyleLight1"}}]}]})},g.Mock=class extends g{constructor(){super(),this.model={styles:[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}],numFmts:[],fonts:[{size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}],borders:[{}],fills:[{type:"pattern",pattern:"none"},{type:"pattern",pattern:"gray125"}]}}parseStream(v){return v.autodrain(),Promise.resolve()}addStyleModel(v,y){switch(y){case o.ValueType.Date:return this.dateStyleId;default:return 0}}get dateStyleId(){if(!this._dateStyleId){const v={numFmtId:m.getDefaultFmtId("mm-dd-yy")};this._dateStyleId=this.model.styles.length,this.model.styles.push(v)}return this._dateStyleId}getStyleModel(){return{}}},n.exports=g},{"../../../doc/enums":7,"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"../static-xform":120,"./border-xform":127,"./dxf-xform":129,"./fill-xform":130,"./font-xform":131,"./numfmt-xform":132,"./style-xform":134}],136:[function(s,n,c){const o=s("../base-xform");class a extends o{constructor(l){super(),this.model=l}get tag(){return"u"}render(l,i){if((i=i||this.model)===!0)l.leafNode("u");else{const u=a.Attributes[i];u&&l.leafNode("u",u)}}parseOpen(l){l.name==="u"&&(this.model=l.attributes.val||!0)}parseText(){}parseClose(){return!1}}a.Attributes={single:{},double:{val:"double"},singleAccounting:{val:"singleAccounting"},doubleAccounting:{val:"doubleAccounting"}},n.exports=a},{"../base-xform":32}],137:[function(s,n,c){const o=s("../base-xform"),a=s("./filter-column-xform");n.exports=class extends o{constructor(){super(),this.map={filterColumn:new a}}get tag(){return"autoFilter"}prepare(d){d.columns.forEach((l,i)=>{this.map.filterColumn.prepare(l,{index:i})})}render(d,l){return d.openNode(this.tag,{ref:l.autoFilterRef}),l.columns.forEach(i=>{this.map.filterColumn.render(d,i)}),d.closeNode(),!0}parseOpen(d){if(this.parser)return this.parser.parseOpen(d),!0;switch(d.name){case this.tag:return this.model={autoFilterRef:d.attributes.ref,columns:[]},!0;default:if(this.parser=this.map[d.name],this.parser)return this.parseOpen(d),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(d))}}parseText(d){this.parser&&this.parser.parseText(d)}parseClose(d){if(this.parser)return this.parser.parseClose(d)||(this.model.columns.push(this.parser.model),this.parser=void 0),!0;switch(d){case this.tag:return!1;default:throw new Error("Unexpected xml node in parseClose: "+d)}}}},{"../base-xform":32,"./filter-column-xform":139}],138:[function(s,n,c){const o=s("../base-xform");n.exports=class extends o{get tag(){return"customFilter"}render(a,d){a.leafNode(this.tag,{val:d.val,operator:d.operator})}parseOpen(a){return a.name===this.tag&&(this.model={val:a.attributes.val,operator:a.attributes.operator},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],139:[function(s,n,c){const o=s("../base-xform"),a=s("../list-xform"),d=s("./custom-filter-xform"),l=s("./filter-xform");n.exports=class extends o{constructor(){super(),this.map={customFilters:new a({tag:"customFilters",count:!1,empty:!0,childXform:new d}),filters:new a({tag:"filters",count:!1,empty:!0,childXform:new l})}}get tag(){return"filterColumn"}prepare(i,u){i.colId=u.index.toString()}render(i,u){return u.customFilters?(i.openNode(this.tag,{colId:u.colId,hiddenButton:u.filterButton?"0":"1"}),this.map.customFilters.render(i,u.customFilters),i.closeNode(),!0):(i.leafNode(this.tag,{colId:u.colId,hiddenButton:u.filterButton?"0":"1"}),!0)}parseOpen(i){if(this.parser)return this.parser.parseOpen(i),!0;const{attributes:u}=i;switch(i.name){case this.tag:return this.model={filterButton:u.hiddenButton==="0"},!0;default:if(this.parser=this.map[i.name],this.parser)return this.parseOpen(i),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(i))}}parseText(){}parseClose(i){if(this.parser)return this.parser.parseClose(i)||(this.parser=void 0),!0;switch(i){case this.tag:return this.model.customFilters=this.map.customFilters.model,!1;default:return!0}}}},{"../base-xform":32,"../list-xform":71,"./custom-filter-xform":138,"./filter-xform":140}],140:[function(s,n,c){const o=s("../base-xform");n.exports=class extends o{get tag(){return"filter"}render(a,d){a.leafNode(this.tag,{val:d.val})}parseOpen(a){return a.name===this.tag&&(this.model={val:a.attributes.val},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],141:[function(s,n,c){const o=s("../base-xform");n.exports=class extends o{get tag(){return"tableColumn"}prepare(a,d){a.id=d.index+1}render(a,d){return a.leafNode(this.tag,{id:d.id.toString(),name:d.name,totalsRowLabel:d.totalsRowLabel,totalsRowFunction:d.totalsRowFunction,dxfId:d.dxfId}),!0}parseOpen(a){if(a.name===this.tag){const{attributes:d}=a;return this.model={name:d.name,totalsRowLabel:d.totalsRowLabel,totalsRowFunction:d.totalsRowFunction,dxfId:d.dxfId},!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],142:[function(s,n,c){const o=s("../base-xform");n.exports=class extends o{get tag(){return"tableStyleInfo"}render(a,d){return a.leafNode(this.tag,{name:d.theme?d.theme:void 0,showFirstColumn:d.showFirstColumn?"1":"0",showLastColumn:d.showLastColumn?"1":"0",showRowStripes:d.showRowStripes?"1":"0",showColumnStripes:d.showColumnStripes?"1":"0"}),!0}parseOpen(a){if(a.name===this.tag){const{attributes:d}=a;return this.model={theme:d.name?d.name:null,showFirstColumn:d.showFirstColumn==="1",showLastColumn:d.showLastColumn==="1",showRowStripes:d.showRowStripes==="1",showColumnStripes:d.showColumnStripes==="1"},!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],143:[function(s,n,c){const o=s("../../../utils/xml-stream"),a=s("../base-xform"),d=s("../list-xform"),l=s("./auto-filter-xform"),i=s("./table-column-xform"),u=s("./table-style-info-xform");class f extends a{constructor(){super(),this.map={autoFilter:new l,tableColumns:new d({tag:"tableColumns",count:!0,empty:!0,childXform:new i}),tableStyleInfo:new u}}prepare(m,p){this.map.autoFilter.prepare(m),this.map.tableColumns.prepare(m.columns,p)}get tag(){return"table"}render(m,p){m.openXml(o.StdDocAttributes),m.openNode(this.tag,{...f.TABLE_ATTRIBUTES,id:p.id,name:p.name,displayName:p.displayName||p.name,ref:p.tableRef,totalsRowCount:p.totalsRow?"1":void 0,totalsRowShown:p.totalsRow?void 0:"1",headerRowCount:p.headerRow?"1":"0"}),this.map.autoFilter.render(m,p),this.map.tableColumns.render(m,p.columns),this.map.tableStyleInfo.render(m,p.style),m.closeNode()}parseOpen(m){if(this.parser)return this.parser.parseOpen(m),!0;const{name:p,attributes:x}=m;switch(p){case this.tag:this.reset(),this.model={name:x.name,displayName:x.displayName||x.name,tableRef:x.ref,totalsRow:x.totalsRowCount==="1",headerRow:x.headerRowCount==="1"};break;default:this.parser=this.map[m.name],this.parser&&this.parser.parseOpen(m)}return!0}parseText(m){this.parser&&this.parser.parseText(m)}parseClose(m){if(this.parser)return this.parser.parseClose(m)||(this.parser=void 0),!0;switch(m){case this.tag:return this.model.columns=this.map.tableColumns.model,this.map.autoFilter.model&&(this.model.autoFilterRef=this.map.autoFilter.model.autoFilterRef,this.map.autoFilter.model.columns.forEach((p,x)=>{this.model.columns[x].filterButton=p.filterButton})),this.model.style=this.map.tableStyleInfo.model,!1;default:return!0}}reconcile(m,p){m.columns.forEach(x=>{x.dxfId!==void 0&&(x.style=p.styles.getDxfStyle(x.dxfId))})}}f.TABLE_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"xr xr3","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision","xmlns:xr3":"http://schemas.microsoft.com/office/spreadsheetml/2016/revision3"},n.exports=f},{"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"./auto-filter-xform":137,"./table-column-xform":141,"./table-style-info-xform":142}],144:[function(s,n,c){(function(o,a){(function(){const d=s("fs"),l=s("jszip"),{PassThrough:i}=s("readable-stream"),u=s("../utils/zip-stream"),f=s("../utils/stream-buf"),h=s("../utils/utils"),m=s("../utils/xml-stream"),{bufferToString:p}=s("../utils/browser-buffer-decode"),x=s("./xform/style/styles-xform"),g=s("./xform/core/core-xform"),v=s("./xform/strings/shared-strings-xform"),y=s("./xform/core/relationships-xform"),b=s("./xform/core/content-types-xform"),C=s("./xform/core/app-xform"),T=s("./xform/book/workbook-xform"),M=s("./xform/sheet/worksheet-xform"),U=s("./xform/drawing/drawing-xform"),L=s("./xform/table/table-xform"),P=s("./xform/comment/comments-xform"),B=s("./xform/comment/vml-notes-xform"),q=s("./xml/theme1");class z{constructor(R){this.workbook=R}async readFile(R,S){if(!await h.fs.exists(R))throw new Error("File not found: "+R);const w=d.createReadStream(R);try{const _=await this.read(w,S);return w.close(),_}catch(_){throw w.close(),_}}parseRels(R){return new y().parseStream(R)}parseWorkbook(R){return new T().parseStream(R)}parseSharedStrings(R){return new v().parseStream(R)}reconcile(R,S){const w=new T,_=new M(S),j=new U,N=new L;w.reconcile(R);const E={media:R.media,mediaIndex:R.mediaIndex};Object.keys(R.drawings).forEach(V=>{const H=R.drawings[V],G=R.drawingRels[V];G&&(E.rels=G.reduce(($,Y)=>($[Y.Id]=Y,$),{}),(H.anchors||[]).forEach($=>{const Y=$.picture&&$.picture.hyperlinks;Y&&E.rels[Y.rId]&&(Y.hyperlink=E.rels[Y.rId].Target,delete Y.rId)}),j.reconcile(H,E))});const I={styles:R.styles};Object.values(R.tables).forEach(V=>{N.reconcile(V,I)});const D={styles:R.styles,sharedStrings:R.sharedStrings,media:R.media,mediaIndex:R.mediaIndex,date1904:R.properties&&R.properties.date1904,drawings:R.drawings,comments:R.comments,tables:R.tables,vmlDrawings:R.vmlDrawings};R.worksheets.forEach(V=>{V.relationships=R.worksheetRels[V.sheetNo],_.reconcile(V,D)}),delete R.worksheetHash,delete R.worksheetRels,delete R.globalRels,delete R.sharedStrings,delete R.workbookRels,delete R.sheetDefs,delete R.styles,delete R.mediaIndex,delete R.drawings,delete R.drawingRels,delete R.vmlDrawings}async _processWorksheetEntry(R,S,w,_,j){const N=new M(_),E=await N.parseStream(R);E.sheetNo=w,S.worksheetHash[j]=E,S.worksheets.push(E)}async _processCommentEntry(R,S,w){const _=new P,j=await _.parseStream(R);S.comments[`../${w}.xml`]=j}async _processTableEntry(R,S,w){const _=new L,j=await _.parseStream(R);S.tables[`../tables/${w}.xml`]=j}async _processWorksheetRelsEntry(R,S,w){const _=new y,j=await _.parseStream(R);S.worksheetRels[w]=j}async _processMediaEntry(R,S,w){const _=w.lastIndexOf(".");if(_>=1){const j=w.substr(_+1),N=w.substr(0,_);await new Promise((E,I)=>{const D=new f;D.on("finish",()=>{S.mediaIndex[w]=S.media.length,S.mediaIndex[N]=S.media.length;const V={type:"image",name:N,extension:j,buffer:D.toBuffer()};S.media.push(V),E()}),R.on("error",V=>{I(V)}),R.pipe(D)})}}async _processDrawingEntry(R,S,w){const _=new U,j=await _.parseStream(R);S.drawings[w]=j}async _processDrawingRelsEntry(R,S,w){const _=new y,j=await _.parseStream(R);S.drawingRels[w]=j}async _processVmlDrawingEntry(R,S,w){const _=new B,j=await _.parseStream(R);S.vmlDrawings[`../drawings/${w}.vml`]=j}async _processThemeEntry(R,S,w){await new Promise((_,j)=>{const N=new f;R.on("error",j),N.on("error",j),N.on("finish",()=>{S.themes[w]=N.read().toString(),_()}),R.pipe(N)})}createInputStream(){throw new Error("`XLSX#createInputStream` is deprecated. You should use `XLSX#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}async read(R,S){!R[Symbol.asyncIterator]&&R.pipe&&(R=R.pipe(new i));const w=[];for await(const _ of R)w.push(_);return this.load(a.concat(w),S)}async load(R,S){let w;w=S&&S.base64?a.from(R.toString(),"base64"):R;const _={worksheets:[],worksheetHash:{},worksheetRels:[],themes:{},media:[],mediaIndex:{},drawings:{},drawingRels:{},comments:{},tables:{},vmlDrawings:{}},j=await l.loadAsync(w);for(const N of Object.values(j.files))if(!N.dir){let E,I=N.name;if(I[0]==="/"&&(I=I.substr(1)),I.match(/xl\/media\//)||I.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/))E=new i,E.write(await N.async("nodebuffer"));else{let D;E=new i({writableObjectMode:!0,readableObjectMode:!0}),D=o.browser?p(await N.async("nodebuffer")):await N.async("string");const V=16384;for(let H=0;H<D.length;H+=V)E.write(D.substring(H,H+V))}switch(E.end(),I){case"_rels/.rels":_.globalRels=await this.parseRels(E);break;case"xl/workbook.xml":{const D=await this.parseWorkbook(E);_.sheets=D.sheets,_.definedNames=D.definedNames,_.views=D.views,_.properties=D.properties,_.calcProperties=D.calcProperties;break}case"xl/_rels/workbook.xml.rels":_.workbookRels=await this.parseRels(E);break;case"xl/sharedStrings.xml":_.sharedStrings=new v,await _.sharedStrings.parseStream(E);break;case"xl/styles.xml":_.styles=new x,await _.styles.parseStream(E);break;case"docProps/app.xml":{const D=new C,V=await D.parseStream(E);_.company=V.company,_.manager=V.manager;break}case"docProps/core.xml":{const D=new g,V=await D.parseStream(E);Object.assign(_,V);break}default:{let D=I.match(/xl\/worksheets\/sheet(\d+)[.]xml/);if(D){await this._processWorksheetEntry(E,_,D[1],S,I);break}if(D=I.match(/xl\/worksheets\/_rels\/sheet(\d+)[.]xml.rels/),D){await this._processWorksheetRelsEntry(E,_,D[1]);break}if(D=I.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/),D){await this._processThemeEntry(E,_,D[1]);break}if(D=I.match(/xl\/media\/([a-zA-Z0-9]+[.][a-zA-Z0-9]{3,4})$/),D){await this._processMediaEntry(E,_,D[1]);break}if(D=I.match(/xl\/drawings\/([a-zA-Z0-9]+)[.]xml/),D){await this._processDrawingEntry(E,_,D[1]);break}if(D=I.match(/xl\/(comments\d+)[.]xml/),D){await this._processCommentEntry(E,_,D[1]);break}if(D=I.match(/xl\/tables\/(table\d+)[.]xml/),D){await this._processTableEntry(E,_,D[1]);break}if(D=I.match(/xl\/drawings\/_rels\/([a-zA-Z0-9]+)[.]xml[.]rels/),D){await this._processDrawingRelsEntry(E,_,D[1]);break}if(D=I.match(/xl\/drawings\/(vmlDrawing\d+)[.]vml/),D){await this._processVmlDrawingEntry(E,_,D[1]);break}}}}return this.reconcile(_,S),this.workbook.model=_,this.workbook}async addMedia(R,S){await Promise.all(S.media.map(async w=>{if(w.type==="image"){const _=`xl/media/${w.name}.${w.extension}`;if(w.filename){const j=await function(N,E){return new Promise((I,D)=>{d.readFile(N,E,(V,H)=>{V?D(V):I(H)})})}(w.filename);return R.append(j,{name:_})}if(w.buffer)return R.append(w.buffer,{name:_});if(w.base64){const j=w.base64,N=j.substring(j.indexOf(",")+1);return R.append(N,{name:_,base64:!0})}}throw new Error("Unsupported media")}))}addDrawings(R,S){const w=new U,_=new y;S.worksheets.forEach(j=>{const{drawing:N}=j;if(N){w.prepare(N,{});let E=w.toXml(N);R.append(E,{name:`xl/drawings/${N.name}.xml`}),E=_.toXml(N.rels),R.append(E,{name:`xl/drawings/_rels/${N.name}.xml.rels`})}})}addTables(R,S){const w=new L;S.worksheets.forEach(_=>{const{tables:j}=_;j.forEach(N=>{w.prepare(N,{});const E=w.toXml(N);R.append(E,{name:"xl/tables/"+N.target})})})}async addContentTypes(R,S){const w=new b().toXml(S);R.append(w,{name:"[Content_Types].xml"})}async addApp(R,S){const w=new C().toXml(S);R.append(w,{name:"docProps/app.xml"})}async addCore(R,S){const w=new g;R.append(w.toXml(S),{name:"docProps/core.xml"})}async addThemes(R,S){const w=S.themes||{theme1:q};Object.keys(w).forEach(_=>{const j=w[_],N=`xl/theme/${_}.xml`;R.append(j,{name:N})})}async addOfficeRels(R){const S=new y().toXml([{Id:"rId1",Type:z.RelType.OfficeDocument,Target:"xl/workbook.xml"},{Id:"rId2",Type:z.RelType.CoreProperties,Target:"docProps/core.xml"},{Id:"rId3",Type:z.RelType.ExtenderProperties,Target:"docProps/app.xml"}]);R.append(S,{name:"_rels/.rels"})}async addWorkbookRels(R,S){let w=1;const _=[{Id:"rId"+w++,Type:z.RelType.Styles,Target:"styles.xml"},{Id:"rId"+w++,Type:z.RelType.Theme,Target:"theme/theme1.xml"}];S.sharedStrings.count&&_.push({Id:"rId"+w++,Type:z.RelType.SharedStrings,Target:"sharedStrings.xml"}),S.worksheets.forEach(N=>{N.rId="rId"+w++,_.push({Id:N.rId,Type:z.RelType.Worksheet,Target:`worksheets/sheet${N.id}.xml`})});const j=new y().toXml(_);R.append(j,{name:"xl/_rels/workbook.xml.rels"})}async addSharedStrings(R,S){S.sharedStrings&&S.sharedStrings.count&&R.append(S.sharedStrings.xml,{name:"xl/sharedStrings.xml"})}async addStyles(R,S){const{xml:w}=S.styles;w&&R.append(w,{name:"xl/styles.xml"})}async addWorkbook(R,S){const w=new T;R.append(w.toXml(S),{name:"xl/workbook.xml"})}async addWorksheets(R,S){const w=new M,_=new y,j=new P,N=new B;S.worksheets.forEach(E=>{let I=new m;w.render(I,E),R.append(I.xml,{name:`xl/worksheets/sheet${E.id}.xml`}),E.rels&&E.rels.length&&(I=new m,_.render(I,E.rels),R.append(I.xml,{name:`xl/worksheets/_rels/sheet${E.id}.xml.rels`})),E.comments.length>0&&(I=new m,j.render(I,E),R.append(I.xml,{name:`xl/comments${E.id}.xml`}),I=new m,N.render(I,E),R.append(I.xml,{name:`xl/drawings/vmlDrawing${E.id}.vml`}))})}_finalize(R){return new Promise((S,w)=>{R.on("finish",()=>{S(this)}),R.on("error",w),R.finalize()})}prepareModel(R,S){R.creator=R.creator||"ExcelJS",R.lastModifiedBy=R.lastModifiedBy||"ExcelJS",R.created=R.created||new Date,R.modified=R.modified||new Date,R.useSharedStrings=S.useSharedStrings===void 0||S.useSharedStrings,R.useStyles=S.useStyles===void 0||S.useStyles,R.sharedStrings=new v,R.styles=R.useStyles?new x(!0):new x.Mock;const w=new T,_=new M;w.prepare(R);const j={sharedStrings:R.sharedStrings,styles:R.styles,date1904:R.properties.date1904,drawingsCount:0,media:R.media};j.drawings=R.drawings=[],j.commentRefs=R.commentRefs=[];let N=0;R.tables=[],R.worksheets.forEach(E=>{E.tables.forEach(I=>{N++,I.target=`table${N}.xml`,I.id=N,R.tables.push(I)}),_.prepare(E,j)})}async write(R,S){S=S||{};const{model:w}=this.workbook,_=new u.ZipWriter(S.zip);return _.pipe(R),this.prepareModel(w,S),await this.addContentTypes(_,w),await this.addOfficeRels(_,w),await this.addWorkbookRels(_,w),await this.addWorksheets(_,w),await this.addSharedStrings(_,w),await this.addDrawings(_,w),await this.addTables(_,w),await Promise.all([this.addThemes(_,w),this.addStyles(_,w)]),await this.addMedia(_,w),await Promise.all([this.addApp(_,w),this.addCore(_,w)]),await this.addWorkbook(_,w),this._finalize(_)}writeFile(R,S){const w=d.createWriteStream(R);return new Promise((_,j)=>{w.on("finish",()=>{_()}),w.on("error",N=>{j(N)}),this.write(w,S).then(()=>{w.end()}).catch(N=>{j(N)})})}async writeBuffer(R){const S=new f;return await this.write(S,R),S.read()}}z.RelType=s("./rel-type"),n.exports=z}).call(this)}).call(this,s("_process"),s("buffer").Buffer)},{"../utils/browser-buffer-decode":16,"../utils/stream-buf":24,"../utils/utils":27,"../utils/xml-stream":28,"../utils/zip-stream":29,"./rel-type":31,"./xform/book/workbook-xform":38,"./xform/comment/comments-xform":40,"./xform/comment/vml-notes-xform":45,"./xform/core/app-xform":51,"./xform/core/content-types-xform":52,"./xform/core/core-xform":53,"./xform/core/relationships-xform":55,"./xform/drawing/drawing-xform":62,"./xform/sheet/worksheet-xform":115,"./xform/strings/shared-strings-xform":124,"./xform/style/styles-xform":135,"./xform/table/table-xform":143,"./xml/theme1":145,_process:467,buffer:220,fs:216,jszip:441,"readable-stream":491}],145:[function(s,n,c){n.exports=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme"> <a:themeElements> <a:clrScheme name="Office"> <a:dk1> <a:sysClr val="windowText" lastClr="000000"/> </a:dk1> <a:lt1> <a:sysClr val="window" lastClr="FFFFFF"/> </a:lt1> <a:dk2> <a:srgbClr val="1F497D"/> </a:dk2> <a:lt2> <a:srgbClr val="EEECE1"/> </a:lt2> <a:accent1> <a:srgbClr val="4F81BD"/> </a:accent1> <a:accent2> <a:srgbClr val="C0504D"/> </a:accent2> <a:accent3> <a:srgbClr val="9BBB59"/> </a:accent3> <a:accent4> <a:srgbClr val="8064A2"/> </a:accent4> <a:accent5> <a:srgbClr val="4BACC6"/> </a:accent5> <a:accent6> <a:srgbClr val="F79646"/> </a:accent6> <a:hlink> <a:srgbClr val="0000FF"/> </a:hlink> <a:folHlink> <a:srgbClr val="800080"/> </a:folHlink> </a:clrScheme> <a:fontScheme name="Office"> <a:majorFont> <a:latin typeface="Cambria"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface=" "/> <a:font script="Hang" typeface=" "/> <a:font script="Hans" typeface=""/> <a:font script="Hant" typeface=""/> <a:font script="Arab" typeface="Times New Roman"/> <a:font script="Hebr" typeface="Times New Roman"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="MoolBoran"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Times New Roman"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:majorFont> <a:minorFont> <a:latin typeface="Calibri"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface=" "/> <a:font script="Hang" typeface=" "/> <a:font script="Hans" typeface=""/> <a:font script="Hant" typeface=""/> <a:font script="Arab" typeface="Arial"/> <a:font script="Hebr" typeface="Arial"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="DaunPenh"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Arial"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:minorFont> </a:fontScheme> <a:fmtScheme name="Office"> <a:fillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="35000"> <a:schemeClr val="phClr"> <a:tint val="37000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="15000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="1"/> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="100000"/> <a:shade val="100000"/> <a:satMod val="130000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:shade val="100000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="0"/> </a:gradFill> </a:fillStyleLst> <a:lnStyleLst> <a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"> <a:shade val="95000"/> <a:satMod val="105000"/> </a:schemeClr> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> </a:lnStyleLst> <a:effectStyleLst> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="38000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> <a:scene3d> <a:camera prst="orthographicFront"> <a:rot lat="0" lon="0" rev="0"/> </a:camera> <a:lightRig rig="threePt" dir="t"> <a:rot lat="0" lon="0" rev="1200000"/> </a:lightRig> </a:scene3d> <a:sp3d> <a:bevelT w="63500" h="25400"/> </a:sp3d> </a:effectStyle> </a:effectStyleLst> <a:bgFillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="40000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="40000"> <a:schemeClr val="phClr"> <a:tint val="45000"/> <a:shade val="99000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="20000"/> <a:satMod val="255000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="-80000" r="50000" b="180000"/> </a:path> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="80000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="30000"/> <a:satMod val="200000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="50000" r="50000" b="50000"/> </a:path> </a:gradFill> </a:bgFillStyleLst> </a:fmtScheme> </a:themeElements> <a:objectDefaults> <a:spDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="1"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="3"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="2"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="lt1"/> </a:fontRef> </a:style> </a:spDef> <a:lnDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="2"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="0"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="1"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="tx1"/> </a:fontRef> </a:style> </a:lnDef> </a:objectDefaults> <a:extraClrSchemeLst/> </a:theme>`},{}],146:[function(s,n,c){(function(o){(function(){Object.defineProperty(c,"__esModule",{value:!0}),c.CsvFormatterStream=void 0;const a=s("stream"),d=s("./formatter");class l extends a.Transform{constructor(u){super({writableObjectMode:u.objectMode}),this.hasWrittenBOM=!1,this.formatterOptions=u,this.rowFormatter=new d.RowFormatter(u),this.hasWrittenBOM=!u.writeBOM}transform(u){return this.rowFormatter.rowTransform=u,this}_transform(u,f,h){let m=!1;try{this.hasWrittenBOM||(this.push(this.formatterOptions.BOM),this.hasWrittenBOM=!0),this.rowFormatter.format(u,(p,x)=>p?(m=!0,h(p)):(x&&x.forEach(g=>{this.push(o.from(g,"utf8"))}),m=!0,h()))}catch(p){if(m)throw p;h(p)}}_flush(u){this.rowFormatter.finish((f,h)=>f?u(f):(h&&h.forEach(m=>{this.push(o.from(m,"utf8"))}),u()))}}c.CsvFormatterStream=l}).call(this)}).call(this,s("buffer").Buffer)},{"./formatter":150,buffer:220,stream:505}],147:[function(s,n,c){Object.defineProperty(c,"__esModule",{value:!0}),c.FormatterOptions=void 0,c.FormatterOptions=class{constructor(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var a;this.objectMode=!0,this.delimiter=",",this.rowDelimiter=`
`,this.quote='"',this.escape=this.quote,this.quoteColumns=!1,this.quoteHeaders=this.quoteColumns,this.headers=null,this.includeEndRowDelimiter=!1,this.writeBOM=!1,this.BOM="\uFEFF",this.alwaysWriteHeaders=!1,Object.assign(this,o||{}),(o==null?void 0:o.quoteHeaders)===void 0&&(this.quoteHeaders=this.quoteColumns),(o==null?void 0:o.quote)===!0?this.quote='"':(o==null?void 0:o.quote)===!1&&(this.quote=""),typeof(o==null?void 0:o.escape)!="string"&&(this.escape=this.quote),this.shouldWriteHeaders=!!this.headers&&((a=o.writeHeaders)===null||a===void 0||a),this.headers=Array.isArray(this.headers)?this.headers:null,this.escapedQuote=`${this.escape}${this.quote}`}}},{}],148:[function(s,n,c){var o=function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(c,"__esModule",{value:!0}),c.FieldFormatter=void 0;const a=o(s("lodash.isboolean")),d=o(s("lodash.isnil")),l=o(s("lodash.escaperegexp"));c.FieldFormatter=class{constructor(i){this._headers=null,this.formatterOptions=i,i.headers!==null&&(this.headers=i.headers),this.REPLACE_REGEXP=new RegExp(i.quote,"g");const u=`[${i.delimiter}${l.default(i.rowDelimiter)}|\r|
]`;this.ESCAPE_REGEXP=new RegExp(u)}set headers(i){this._headers=i}shouldQuote(i,u){const f=u?this.formatterOptions.quoteHeaders:this.formatterOptions.quoteColumns;return a.default(f)?f:Array.isArray(f)?f[i]:this._headers!==null&&f[this._headers[i]]}format(i,u,f){const h=(""+(d.default(i)?"":i)).replace(/\0/g,""),{formatterOptions:m}=this;return m.quote!==""&&h.indexOf(m.quote)!==-1?this.quoteField(h.replace(this.REPLACE_REGEXP,m.escapedQuote)):h.search(this.ESCAPE_REGEXP)!==-1||this.shouldQuote(u,f)?this.quoteField(h):h}quoteField(i){const{quote:u}=this.formatterOptions;return`${u}${i}${u}`}}},{"lodash.escaperegexp":442,"lodash.isboolean":444,"lodash.isnil":447}],149:[function(s,n,c){var o=function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(c,"__esModule",{value:!0}),c.RowFormatter=void 0;const a=o(s("lodash.isfunction")),d=o(s("lodash.isequal")),l=s("./FieldFormatter"),i=s("../types");class u{constructor(h){this.rowCount=0,this.formatterOptions=h,this.fieldFormatter=new l.FieldFormatter(h),this.headers=h.headers,this.shouldWriteHeaders=h.shouldWriteHeaders,this.hasWrittenHeaders=!1,this.headers!==null&&(this.fieldFormatter.headers=this.headers),h.transform&&(this.rowTransform=h.transform)}static isRowHashArray(h){return!!Array.isArray(h)&&Array.isArray(h[0])&&h[0].length===2}static isRowArray(h){return Array.isArray(h)&&!this.isRowHashArray(h)}static gatherHeaders(h){return u.isRowHashArray(h)?h.map(m=>m[0]):Array.isArray(h)?h:Object.keys(h)}static createTransform(h){return i.isSyncTransform(h)?(m,p)=>{let x=null;try{x=h(m)}catch(g){return p(g)}return p(null,x)}:(m,p)=>{h(m,p)}}set rowTransform(h){if(!a.default(h))throw new TypeError("The transform should be a function");this._rowTransform=u.createTransform(h)}format(h,m){this.callTransformer(h,(p,x)=>{if(p)return m(p);if(!h)return m(null);const g=[];if(x){const{shouldFormatColumns:v,headers:y}=this.checkHeaders(x);if(this.shouldWriteHeaders&&y&&!this.hasWrittenHeaders&&(g.push(this.formatColumns(y,!0)),this.hasWrittenHeaders=!0),v){const b=this.gatherColumns(x);g.push(this.formatColumns(b,!1))}}return m(null,g)})}finish(h){const m=[];if(this.formatterOptions.alwaysWriteHeaders&&this.rowCount===0){if(!this.headers)return h(new Error("`alwaysWriteHeaders` option is set to true but `headers` option not provided."));m.push(this.formatColumns(this.headers,!0))}return this.formatterOptions.includeEndRowDelimiter&&m.push(this.formatterOptions.rowDelimiter),h(null,m)}checkHeaders(h){if(this.headers)return{shouldFormatColumns:!0,headers:this.headers};const m=u.gatherHeaders(h);return this.headers=m,this.fieldFormatter.headers=m,this.shouldWriteHeaders?{shouldFormatColumns:!d.default(m,h),headers:m}:{shouldFormatColumns:!0,headers:null}}gatherColumns(h){if(this.headers===null)throw new Error("Headers is currently null");return Array.isArray(h)?u.isRowHashArray(h)?this.headers.map((m,p)=>{const x=h[p];return x?x[1]:""}):u.isRowArray(h)&&!this.shouldWriteHeaders?h:this.headers.map((m,p)=>h[p]):this.headers.map(m=>h[m])}callTransformer(h,m){return this._rowTransform?this._rowTransform(h,m):m(null,h)}formatColumns(h,m){const p=h.map((g,v)=>this.fieldFormatter.format(g,v,m)).join(this.formatterOptions.delimiter),{rowCount:x}=this;return this.rowCount+=1,x?[this.formatterOptions.rowDelimiter,p].join(""):p}}c.RowFormatter=u},{"../types":152,"./FieldFormatter":148,"lodash.isequal":445,"lodash.isfunction":446}],150:[function(s,n,c){Object.defineProperty(c,"__esModule",{value:!0}),c.FieldFormatter=c.RowFormatter=void 0;var o=s("./RowFormatter");Object.defineProperty(c,"RowFormatter",{enumerable:!0,get:function(){return o.RowFormatter}});var a=s("./FieldFormatter");Object.defineProperty(c,"FieldFormatter",{enumerable:!0,get:function(){return a.FieldFormatter}})},{"./FieldFormatter":148,"./RowFormatter":149}],151:[function(s,n,c){(function(o){(function(){var a=Object.create?function(v,y,b,C){C===void 0&&(C=b),Object.defineProperty(v,C,{enumerable:!0,get:function(){return y[b]}})}:function(v,y,b,C){C===void 0&&(C=b),v[C]=y[b]},d=Object.create?function(v,y){Object.defineProperty(v,"default",{enumerable:!0,value:y})}:function(v,y){v.default=y},l=function(v){if(v&&v.__esModule)return v;var y={};if(v!=null)for(var b in v)b!=="default"&&Object.prototype.hasOwnProperty.call(v,b)&&a(y,v,b);return d(y,v),y},i=function(v,y){for(var b in v)b==="default"||Object.prototype.hasOwnProperty.call(y,b)||a(y,v,b)};Object.defineProperty(c,"__esModule",{value:!0}),c.writeToPath=c.writeToString=c.writeToBuffer=c.writeToStream=c.write=c.format=c.FormatterOptions=c.CsvFormatterStream=void 0;const u=s("util"),f=s("stream"),h=l(s("fs")),m=s("./FormatterOptions"),p=s("./CsvFormatterStream");i(s("./types"),c);var x=s("./CsvFormatterStream");Object.defineProperty(c,"CsvFormatterStream",{enumerable:!0,get:function(){return x.CsvFormatterStream}});var g=s("./FormatterOptions");Object.defineProperty(c,"FormatterOptions",{enumerable:!0,get:function(){return g.FormatterOptions}}),c.format=v=>new p.CsvFormatterStream(new m.FormatterOptions(v)),c.write=(v,y)=>{const b=c.format(y),C=u.promisify((T,M)=>{b.write(T,void 0,M)});return v.reduce((T,M)=>T.then(()=>C(M)),Promise.resolve()).then(()=>b.end()).catch(T=>{b.emit("error",T)}),b},c.writeToStream=(v,y,b)=>c.write(y,b).pipe(v),c.writeToBuffer=function(v){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const b=[],C=new f.Writable({write(T,M,U){b.push(T),U()}});return new Promise((T,M)=>{C.on("error",M).on("finish",()=>T(o.concat(b))),c.write(v,y).pipe(C)})},c.writeToString=(v,y)=>c.writeToBuffer(v,y).then(b=>b.toString()),c.writeToPath=(v,y,b)=>{const C=h.createWriteStream(v,{encoding:"utf8"});return c.write(y,b).pipe(C)}}).call(this)}).call(this,s("buffer").Buffer)},{"./CsvFormatterStream":146,"./FormatterOptions":147,"./types":152,buffer:220,fs:216,stream:505,util:527}],152:[function(s,n,c){Object.defineProperty(c,"__esModule",{value:!0}),c.isSyncTransform=void 0,c.isSyncTransform=o=>o.length===1},{}],153:[function(s,n,c){(function(o){(function(){Object.defineProperty(c,"__esModule",{value:!0}),c.CsvParserStream=void 0;const a=s("string_decoder"),d=s("stream"),l=s("./transforms"),i=s("./parser");class u extends d.Transform{constructor(h){super({objectMode:h.objectMode}),this.lines="",this.rowCount=0,this.parsedRowCount=0,this.parsedLineCount=0,this.endEmitted=!1,this.headersEmitted=!1,this.parserOptions=h,this.parser=new i.Parser(h),this.headerTransformer=new l.HeaderTransformer(h),this.decoder=new a.StringDecoder(h.encoding),this.rowTransformerValidator=new l.RowTransformerValidator}get hasHitRowLimit(){return this.parserOptions.limitRows&&this.rowCount>=this.parserOptions.maxRows}get shouldEmitRows(){return this.parsedRowCount>this.parserOptions.skipRows}get shouldSkipLine(){return this.parsedLineCount<=this.parserOptions.skipLines}transform(h){return this.rowTransformerValidator.rowTransform=h,this}validate(h){return this.rowTransformerValidator.rowValidator=h,this}emit(h){if(h==="end")return this.endEmitted||(this.endEmitted=!0,super.emit("end",this.rowCount)),!1;for(var m=arguments.length,p=new Array(m>1?m-1:0),x=1;x<m;x++)p[x-1]=arguments[x];return super.emit(h,...p)}_transform(h,m,p){if(this.hasHitRowLimit)return p();const x=u.wrapDoneCallback(p);try{const{lines:g}=this,v=g+this.decoder.write(h),y=this.parse(v,!0);return this.processRows(y,x)}catch(g){return x(g)}}_flush(h){const m=u.wrapDoneCallback(h);if(this.hasHitRowLimit)return m();try{const p=this.lines+this.decoder.end(),x=this.parse(p,!1);return this.processRows(x,m)}catch(p){return m(p)}}parse(h,m){if(!h)return[];const{line:p,rows:x}=this.parser.parse(h,m);return this.lines=p,x}processRows(h,m){const p=h.length,x=g=>{const v=C=>C?m(C):g%100!=0?x(g+1):void o(()=>x(g+1));if(this.checkAndEmitHeaders(),g>=p||this.hasHitRowLimit)return m();if(this.parsedLineCount+=1,this.shouldSkipLine)return v();const y=h[g];this.rowCount+=1,this.parsedRowCount+=1;const b=this.rowCount;return this.transformRow(y,(C,T)=>{if(C)return this.rowCount-=1,v(C);if(!T)return v(new Error("expected transform result"));if(T.isValid){if(T.row)return this.pushRow(T.row,v)}else this.emit("data-invalid",T.row,b,T.reason);return v()})};x(0)}transformRow(h,m){try{this.headerTransformer.transform(h,(p,x)=>p?m(p):x?x.isValid?x.row?this.shouldEmitRows?this.rowTransformerValidator.transformAndValidate(x.row,m):this.skipRow(m):(this.rowCount-=1,this.parsedRowCount-=1,m(null,{row:null,isValid:!0})):this.shouldEmitRows?m(null,{isValid:!1,row:h}):this.skipRow(m):m(new Error("Expected result from header transform")))}catch(p){m(p)}}checkAndEmitHeaders(){!this.headersEmitted&&this.headerTransformer.headers&&(this.headersEmitted=!0,this.emit("headers",this.headerTransformer.headers))}skipRow(h){return this.rowCount-=1,h(null,{row:null,isValid:!0})}pushRow(h,m){try{this.parserOptions.objectMode?this.push(h):this.push(JSON.stringify(h)),m()}catch(p){m(p)}}static wrapDoneCallback(h){let m=!1;return function(p){if(p){if(m)throw p;return m=!0,void h(p)}for(var x=arguments.length,g=new Array(x>1?x-1:0),v=1;v<x;v++)g[v-1]=arguments[v];h(...g)}}}c.CsvParserStream=u}).call(this)}).call(this,s("timers").setImmediate)},{"./parser":165,"./transforms":168,stream:505,string_decoder:218,timers:523}],154:[function(s,n,c){var o=function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(c,"__esModule",{value:!0}),c.ParserOptions=void 0;const a=o(s("lodash.escaperegexp")),d=o(s("lodash.isnil"));c.ParserOptions=class{constructor(l){var i;if(this.objectMode=!0,this.delimiter=",",this.ignoreEmpty=!1,this.quote='"',this.escape=null,this.escapeChar=this.quote,this.comment=null,this.supportsComments=!1,this.ltrim=!1,this.rtrim=!1,this.trim=!1,this.headers=null,this.renameHeaders=!1,this.strictColumnHandling=!1,this.discardUnmappedColumns=!1,this.carriageReturn="\r",this.encoding="utf8",this.limitRows=!1,this.maxRows=0,this.skipLines=0,this.skipRows=0,Object.assign(this,l||{}),this.delimiter.length>1)throw new Error("delimiter option must be one character long");this.escapedDelimiter=a.default(this.delimiter),this.escapeChar=(i=this.escape)!==null&&i!==void 0?i:this.quote,this.supportsComments=!d.default(this.comment),this.NEXT_TOKEN_REGEXP=new RegExp(`([^\\s]|\\r\\n|\\n|\\r|${this.escapedDelimiter})`),this.maxRows>0&&(this.limitRows=!0)}}},{"lodash.escaperegexp":442,"lodash.isnil":447}],155:[function(s,n,c){var o=Object.create?function(x,g,v,y){y===void 0&&(y=v),Object.defineProperty(x,y,{enumerable:!0,get:function(){return g[v]}})}:function(x,g,v,y){y===void 0&&(y=v),x[y]=g[v]},a=Object.create?function(x,g){Object.defineProperty(x,"default",{enumerable:!0,value:g})}:function(x,g){x.default=g},d=function(x){if(x&&x.__esModule)return x;var g={};if(x!=null)for(var v in x)v!=="default"&&Object.prototype.hasOwnProperty.call(x,v)&&o(g,x,v);return a(g,x),g},l=function(x,g){for(var v in x)v==="default"||Object.prototype.hasOwnProperty.call(g,v)||o(g,x,v)};Object.defineProperty(c,"__esModule",{value:!0}),c.parseString=c.parseFile=c.parseStream=c.parse=c.ParserOptions=c.CsvParserStream=void 0;const i=d(s("fs")),u=s("stream"),f=s("./ParserOptions"),h=s("./CsvParserStream");l(s("./types"),c);var m=s("./CsvParserStream");Object.defineProperty(c,"CsvParserStream",{enumerable:!0,get:function(){return m.CsvParserStream}});var p=s("./ParserOptions");Object.defineProperty(c,"ParserOptions",{enumerable:!0,get:function(){return p.ParserOptions}}),c.parse=x=>new h.CsvParserStream(new f.ParserOptions(x)),c.parseStream=(x,g)=>x.pipe(new h.CsvParserStream(new f.ParserOptions(g))),c.parseFile=function(x){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return i.createReadStream(x).pipe(new h.CsvParserStream(new f.ParserOptions(g)))},c.parseString=(x,g)=>{const v=new u.Readable;return v.push(x),v.push(null),v.pipe(new h.CsvParserStream(new f.ParserOptions(g)))}},{"./CsvParserStream":153,"./ParserOptions":154,"./types":169,fs:216,stream:505}],156:[function(s,n,c){Object.defineProperty(c,"__esModule",{value:!0}),c.Parser=void 0;const o=s("./Scanner"),a=s("./RowParser"),d=s("./Token");class l{constructor(u){this.parserOptions=u,this.rowParser=new a.RowParser(this.parserOptions)}static removeBOM(u){return u&&u.charCodeAt(0)===65279?u.slice(1):u}parse(u,f){const h=new o.Scanner({line:l.removeBOM(u),parserOptions:this.parserOptions,hasMoreData:f});return this.parserOptions.supportsComments?this.parseWithComments(h):this.parseWithoutComments(h)}parseWithoutComments(u){const f=[];let h=!0;for(;h;)h=this.parseRow(u,f);return{line:u.line,rows:f}}parseWithComments(u){const{parserOptions:f}=this,h=[];for(let m=u.nextCharacterToken;m!==null;m=u.nextCharacterToken)if(d.Token.isTokenComment(m,f)){if(u.advancePastLine()===null)return{line:u.lineFromCursor,rows:h};if(!u.hasMoreCharacters)return{line:u.lineFromCursor,rows:h};u.truncateToCursor()}else if(!this.parseRow(u,h))break;return{line:u.line,rows:h}}parseRow(u,f){if(!u.nextNonSpaceToken)return!1;const h=this.rowParser.parse(u);return h!==null&&(this.parserOptions.ignoreEmpty&&a.RowParser.isEmptyRow(h)||f.push(h),!0)}}c.Parser=l},{"./RowParser":157,"./Scanner":158,"./Token":159}],157:[function(s,n,c){Object.defineProperty(c,"__esModule",{value:!0}),c.RowParser=void 0;const o=s("./column"),a=s("./Token");c.RowParser=class{constructor(d){this.parserOptions=d,this.columnParser=new o.ColumnParser(d)}static isEmptyRow(d){return d.join("").replace(/\s+/g,"")===""}parse(d){const{parserOptions:l}=this,{hasMoreData:i}=d,u=d,f=[];let h=this.getStartToken(u,f);for(;h;){if(a.Token.isTokenRowDelimiter(h))return u.advancePastToken(h),!u.hasMoreCharacters&&a.Token.isTokenCarriageReturn(h,l)&&i?null:(u.truncateToCursor(),f);if(!this.shouldSkipColumnParse(u,h,f)){const m=this.columnParser.parse(u);if(m===null)return null;f.push(m)}h=u.nextNonSpaceToken}return i?null:(u.truncateToCursor(),f)}getStartToken(d,l){const i=d.nextNonSpaceToken;return i!==null&&a.Token.isTokenDelimiter(i,this.parserOptions)?(l.push(""),d.nextNonSpaceToken):i}shouldSkipColumnParse(d,l,i){const{parserOptions:u}=this;if(a.Token.isTokenDelimiter(l,u)){d.advancePastToken(l);const f=d.nextCharacterToken;if(!d.hasMoreCharacters||f!==null&&a.Token.isTokenRowDelimiter(f)||f!==null&&a.Token.isTokenDelimiter(f,u))return i.push(""),!0}return!1}}},{"./Token":159,"./column":164}],158:[function(s,n,c){Object.defineProperty(c,"__esModule",{value:!0}),c.Scanner=void 0;const o=s("./Token"),a=/((?:\r\n)|\n|\r)/;c.Scanner=class{constructor(d){this.cursor=0,this.line=d.line,this.lineLength=this.line.length,this.parserOptions=d.parserOptions,this.hasMoreData=d.hasMoreData,this.cursor=d.cursor||0}get hasMoreCharacters(){return this.lineLength>this.cursor}get nextNonSpaceToken(){const{lineFromCursor:d}=this,l=this.parserOptions.NEXT_TOKEN_REGEXP;if(d.search(l)===-1)return null;const i=l.exec(d);if(i==null)return null;const u=i[1],f=this.cursor+(i.index||0);return new o.Token({token:u,startCursor:f,endCursor:f+u.length-1})}get nextCharacterToken(){const{cursor:d,lineLength:l}=this;return l<=d?null:new o.Token({token:this.line[d],startCursor:d,endCursor:d})}get lineFromCursor(){return this.line.substr(this.cursor)}advancePastLine(){const d=a.exec(this.lineFromCursor);return d?(this.cursor+=(d.index||0)+d[0].length,this):this.hasMoreData?null:(this.cursor=this.lineLength,this)}advanceTo(d){return this.cursor=d,this}advanceToToken(d){return this.cursor=d.startCursor,this}advancePastToken(d){return this.cursor=d.endCursor+1,this}truncateToCursor(){return this.line=this.lineFromCursor,this.lineLength=this.line.length,this.cursor=0,this}}},{"./Token":159}],159:[function(s,n,c){Object.defineProperty(c,"__esModule",{value:!0}),c.Token=void 0,c.Token=class{constructor(o){this.token=o.token,this.startCursor=o.startCursor,this.endCursor=o.endCursor}static isTokenRowDelimiter(o){const a=o.token;return a==="\r"||a===`
`||a===`\r
`}static isTokenCarriageReturn(o,a){return o.token===a.carriageReturn}static isTokenComment(o,a){return a.supportsComments&&!!o&&o.token===a.comment}static isTokenEscapeCharacter(o,a){return o.token===a.escapeChar}static isTokenQuote(o,a){return o.token===a.quote}static isTokenDelimiter(o,a){return o.token===a.delimiter}}},{}],160:[function(s,n,c){Object.defineProperty(c,"__esModule",{value:!0}),c.ColumnFormatter=void 0,c.ColumnFormatter=class{constructor(o){o.trim?this.format=a=>a.trim():o.ltrim?this.format=a=>a.trimLeft():o.rtrim?this.format=a=>a.trimRight():this.format=a=>a}}},{}],161:[function(s,n,c){Object.defineProperty(c,"__esModule",{value:!0}),c.ColumnParser=void 0;const o=s("./NonQuotedColumnParser"),a=s("./QuotedColumnParser"),d=s("../Token");c.ColumnParser=class{constructor(l){this.parserOptions=l,this.quotedColumnParser=new a.QuotedColumnParser(l),this.nonQuotedColumnParser=new o.NonQuotedColumnParser(l)}parse(l){const{nextNonSpaceToken:i}=l;return i!==null&&d.Token.isTokenQuote(i,this.parserOptions)?(l.advanceToToken(i),this.quotedColumnParser.parse(l)):this.nonQuotedColumnParser.parse(l)}}},{"../Token":159,"./NonQuotedColumnParser":162,"./QuotedColumnParser":163}],162:[function(s,n,c){Object.defineProperty(c,"__esModule",{value:!0}),c.NonQuotedColumnParser=void 0;const o=s("./ColumnFormatter"),a=s("../Token");c.NonQuotedColumnParser=class{constructor(d){this.parserOptions=d,this.columnFormatter=new o.ColumnFormatter(d)}parse(d){if(!d.hasMoreCharacters)return null;const{parserOptions:l}=this,i=[];let u=d.nextCharacterToken;for(;u&&!a.Token.isTokenDelimiter(u,l)&&!a.Token.isTokenRowDelimiter(u);u=d.nextCharacterToken)i.push(u.token),d.advancePastToken(u);return this.columnFormatter.format(i.join(""))}}},{"../Token":159,"./ColumnFormatter":160}],163:[function(s,n,c){Object.defineProperty(c,"__esModule",{value:!0}),c.QuotedColumnParser=void 0;const o=s("./ColumnFormatter"),a=s("../Token");c.QuotedColumnParser=class{constructor(d){this.parserOptions=d,this.columnFormatter=new o.ColumnFormatter(d)}parse(d){if(!d.hasMoreCharacters)return null;const l=d.cursor,{foundClosingQuote:i,col:u}=this.gatherDataBetweenQuotes(d);if(!i){if(d.advanceTo(l),!d.hasMoreData)throw new Error(`Parse Error: missing closing: '${this.parserOptions.quote||""}' in line: at '${d.lineFromCursor.replace(/[\r\n]/g,"\\n'")}'`);return null}return this.checkForMalformedColumn(d),u}gatherDataBetweenQuotes(d){const{parserOptions:l}=this;let i=!1,u=!1;const f=[];let h=d.nextCharacterToken;for(;!u&&h!==null;h=d.nextCharacterToken){const m=a.Token.isTokenQuote(h,l);if(!i&&m)i=!0;else if(i)if(a.Token.isTokenEscapeCharacter(h,l)){d.advancePastToken(h);const p=d.nextCharacterToken;p!==null&&(a.Token.isTokenQuote(p,l)||a.Token.isTokenEscapeCharacter(p,l))?(f.push(p.token),h=p):m?u=!0:f.push(h.token)}else m?u=!0:f.push(h.token);d.advancePastToken(h)}return{col:this.columnFormatter.format(f.join("")),foundClosingQuote:u}}checkForMalformedColumn(d){const{parserOptions:l}=this,{nextNonSpaceToken:i}=d;if(i){const u=a.Token.isTokenDelimiter(i,l),f=a.Token.isTokenRowDelimiter(i);if(!u&&!f){const h=d.lineFromCursor.substr(0,10).replace(/[\r\n]/g,"\\n'");throw new Error(`Parse Error: expected: '${l.escapedDelimiter}' OR new line got: '${i.token}'. at '${h}`)}d.advanceToToken(i)}else d.hasMoreData||d.advancePastLine()}}},{"../Token":159,"./ColumnFormatter":160}],164:[function(s,n,c){Object.defineProperty(c,"__esModule",{value:!0}),c.ColumnFormatter=c.QuotedColumnParser=c.NonQuotedColumnParser=c.ColumnParser=void 0;var o=s("./ColumnParser");Object.defineProperty(c,"ColumnParser",{enumerable:!0,get:function(){return o.ColumnParser}});var a=s("./NonQuotedColumnParser");Object.defineProperty(c,"NonQuotedColumnParser",{enumerable:!0,get:function(){return a.NonQuotedColumnParser}});var d=s("./QuotedColumnParser");Object.defineProperty(c,"QuotedColumnParser",{enumerable:!0,get:function(){return d.QuotedColumnParser}});var l=s("./ColumnFormatter");Object.defineProperty(c,"ColumnFormatter",{enumerable:!0,get:function(){return l.ColumnFormatter}})},{"./ColumnFormatter":160,"./ColumnParser":161,"./NonQuotedColumnParser":162,"./QuotedColumnParser":163}],165:[function(s,n,c){Object.defineProperty(c,"__esModule",{value:!0}),c.QuotedColumnParser=c.NonQuotedColumnParser=c.ColumnParser=c.Token=c.Scanner=c.RowParser=c.Parser=void 0;var o=s("./Parser");Object.defineProperty(c,"Parser",{enumerable:!0,get:function(){return o.Parser}});var a=s("./RowParser");Object.defineProperty(c,"RowParser",{enumerable:!0,get:function(){return a.RowParser}});var d=s("./Scanner");Object.defineProperty(c,"Scanner",{enumerable:!0,get:function(){return d.Scanner}});var l=s("./Token");Object.defineProperty(c,"Token",{enumerable:!0,get:function(){return l.Token}});var i=s("./column");Object.defineProperty(c,"ColumnParser",{enumerable:!0,get:function(){return i.ColumnParser}}),Object.defineProperty(c,"NonQuotedColumnParser",{enumerable:!0,get:function(){return i.NonQuotedColumnParser}}),Object.defineProperty(c,"QuotedColumnParser",{enumerable:!0,get:function(){return i.QuotedColumnParser}})},{"./Parser":156,"./RowParser":157,"./Scanner":158,"./Token":159,"./column":164}],166:[function(s,n,c){var o=function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(c,"__esModule",{value:!0}),c.HeaderTransformer=void 0;const a=o(s("lodash.isundefined")),d=o(s("lodash.isfunction")),l=o(s("lodash.uniq")),i=o(s("lodash.groupby"));c.HeaderTransformer=class{constructor(u){this.headers=null,this.receivedHeaders=!1,this.shouldUseFirstRow=!1,this.processedFirstRow=!1,this.headersLength=0,this.parserOptions=u,u.headers===!0?this.shouldUseFirstRow=!0:Array.isArray(u.headers)?this.setHeaders(u.headers):d.default(u.headers)&&(this.headersTransform=u.headers)}transform(u,f){return this.shouldMapRow(u)?f(null,this.processRow(u)):f(null,{row:null,isValid:!0})}shouldMapRow(u){const{parserOptions:f}=this;if(!this.headersTransform&&f.renameHeaders&&!this.processedFirstRow){if(!this.receivedHeaders)throw new Error("Error renaming headers: new headers must be provided in an array");return this.processedFirstRow=!0,!1}if(!this.receivedHeaders&&Array.isArray(u)){if(this.headersTransform)this.setHeaders(this.headersTransform(u));else{if(!this.shouldUseFirstRow)return!0;this.setHeaders(u)}return!1}return!0}processRow(u){if(!this.headers)return{row:u,isValid:!0};const{parserOptions:f}=this;if(!f.discardUnmappedColumns&&u.length>this.headersLength){if(!f.strictColumnHandling)throw new Error(`Unexpected Error: column header mismatch expected: ${this.headersLength} columns got: ${u.length}`);return{row:u,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${u.length}`}}return f.strictColumnHandling&&u.length<this.headersLength?{row:u,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${u.length}`}:{row:this.mapHeaders(u),isValid:!0}}mapHeaders(u){const f={},{headers:h,headersLength:m}=this;for(let p=0;p<m;p+=1){const x=h[p];if(!a.default(x)){const g=u[p];a.default(g)?f[x]="":f[x]=g}}return f}setHeaders(u){var f;const h=u.filter(m=>!!m);if(l.default(h).length!==h.length){const m=i.default(h),p=Object.keys(m).filter(x=>m[x].length>1);throw new Error("Duplicate headers found "+JSON.stringify(p))}this.headers=u,this.receivedHeaders=!0,this.headersLength=((f=this.headers)===null||f===void 0?void 0:f.length)||0}}},{"lodash.groupby":443,"lodash.isfunction":446,"lodash.isundefined":448,"lodash.uniq":449}],167:[function(s,n,c){var o=function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(c,"__esModule",{value:!0}),c.RowTransformerValidator=void 0;const a=o(s("lodash.isfunction")),d=s("../types");class l{constructor(){this._rowTransform=null,this._rowValidator=null}static createTransform(u){return d.isSyncTransform(u)?(f,h)=>{let m=null;try{m=u(f)}catch(p){return h(p)}return h(null,m)}:u}static createValidator(u){return d.isSyncValidate(u)?(f,h)=>{h(null,{row:f,isValid:u(f)})}:(f,h)=>{u(f,(m,p,x)=>m?h(m):h(null,p?{row:f,isValid:p,reason:x}:{row:f,isValid:!1,reason:x}))}}set rowTransform(u){if(!a.default(u))throw new TypeError("The transform should be a function");this._rowTransform=l.createTransform(u)}set rowValidator(u){if(!a.default(u))throw new TypeError("The validate should be a function");this._rowValidator=l.createValidator(u)}transformAndValidate(u,f){return this.callTransformer(u,(h,m)=>h?f(h):m?this.callValidator(m,(p,x)=>p?f(p):x&&!x.isValid?f(null,{row:m,isValid:!1,reason:x.reason}):f(null,{row:m,isValid:!0})):f(null,{row:null,isValid:!0}))}callTransformer(u,f){return this._rowTransform?this._rowTransform(u,f):f(null,u)}callValidator(u,f){return this._rowValidator?this._rowValidator(u,f):f(null,{row:u,isValid:!0})}}c.RowTransformerValidator=l},{"../types":169,"lodash.isfunction":446}],168:[function(s,n,c){Object.defineProperty(c,"__esModule",{value:!0}),c.HeaderTransformer=c.RowTransformerValidator=void 0;var o=s("./RowTransformerValidator");Object.defineProperty(c,"RowTransformerValidator",{enumerable:!0,get:function(){return o.RowTransformerValidator}});var a=s("./HeaderTransformer");Object.defineProperty(c,"HeaderTransformer",{enumerable:!0,get:function(){return a.HeaderTransformer}})},{"./HeaderTransformer":166,"./RowTransformerValidator":167}],169:[function(s,n,c){Object.defineProperty(c,"__esModule",{value:!0}),c.isSyncValidate=c.isSyncTransform=void 0,c.isSyncTransform=o=>o.length===1,c.isSyncValidate=o=>o.length===1},{}],170:[function(s,n,c){const o=c;o.bignum=s("bn.js"),o.define=s("./asn1/api").define,o.base=s("./asn1/base"),o.constants=s("./asn1/constants"),o.decoders=s("./asn1/decoders"),o.encoders=s("./asn1/encoders")},{"./asn1/api":171,"./asn1/base":173,"./asn1/constants":177,"./asn1/decoders":179,"./asn1/encoders":182,"bn.js":184}],171:[function(s,n,c){const o=s("./encoders"),a=s("./decoders"),d=s("inherits");function l(i,u){this.name=i,this.body=u,this.decoders={},this.encoders={}}c.define=function(i,u){return new l(i,u)},l.prototype._createNamed=function(i){const u=this.name;function f(h){this._initNamed(h,u)}return d(f,i),f.prototype._initNamed=function(h,m){i.call(this,h,m)},new f(this)},l.prototype._getDecoder=function(i){return i=i||"der",this.decoders.hasOwnProperty(i)||(this.decoders[i]=this._createNamed(a[i])),this.decoders[i]},l.prototype.decode=function(i,u,f){return this._getDecoder(u).decode(i,f)},l.prototype._getEncoder=function(i){return i=i||"der",this.encoders.hasOwnProperty(i)||(this.encoders[i]=this._createNamed(o[i])),this.encoders[i]},l.prototype.encode=function(i,u,f){return this._getEncoder(u).encode(i,f)}},{"./decoders":179,"./encoders":182,inherits:440}],172:[function(s,n,c){const o=s("inherits"),a=s("../base/reporter").Reporter,d=s("safer-buffer").Buffer;function l(u,f){a.call(this,f),d.isBuffer(u)?(this.base=u,this.offset=0,this.length=u.length):this.error("Input not Buffer")}function i(u,f){if(Array.isArray(u))this.length=0,this.value=u.map(function(h){return i.isEncoderBuffer(h)||(h=new i(h,f)),this.length+=h.length,h},this);else if(typeof u=="number"){if(!(0<=u&&u<=255))return f.error("non-byte EncoderBuffer value");this.value=u,this.length=1}else if(typeof u=="string")this.value=u,this.length=d.byteLength(u);else{if(!d.isBuffer(u))return f.error("Unsupported type: "+typeof u);this.value=u,this.length=u.length}}o(l,a),c.DecoderBuffer=l,l.isDecoderBuffer=function(u){return u instanceof l?!0:typeof u=="object"&&d.isBuffer(u.base)&&u.constructor.name==="DecoderBuffer"&&typeof u.offset=="number"&&typeof u.length=="number"&&typeof u.save=="function"&&typeof u.restore=="function"&&typeof u.isEmpty=="function"&&typeof u.readUInt8=="function"&&typeof u.skip=="function"&&typeof u.raw=="function"},l.prototype.save=function(){return{offset:this.offset,reporter:a.prototype.save.call(this)}},l.prototype.restore=function(u){const f=new l(this.base);return f.offset=u.offset,f.length=this.offset,this.offset=u.offset,a.prototype.restore.call(this,u.reporter),f},l.prototype.isEmpty=function(){return this.offset===this.length},l.prototype.readUInt8=function(u){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(u||"DecoderBuffer overrun")},l.prototype.skip=function(u,f){if(!(this.offset+u<=this.length))return this.error(f||"DecoderBuffer overrun");const h=new l(this.base);return h._reporterState=this._reporterState,h.offset=this.offset,h.length=this.offset+u,this.offset+=u,h},l.prototype.raw=function(u){return this.base.slice(u?u.offset:this.offset,this.length)},c.EncoderBuffer=i,i.isEncoderBuffer=function(u){return u instanceof i?!0:typeof u=="object"&&u.constructor.name==="EncoderBuffer"&&typeof u.length=="number"&&typeof u.join=="function"},i.prototype.join=function(u,f){return u||(u=d.alloc(this.length)),f||(f=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(h){h.join(u,f),f+=h.length}):(typeof this.value=="number"?u[f]=this.value:typeof this.value=="string"?u.write(this.value,f):d.isBuffer(this.value)&&this.value.copy(u,f),f+=this.length)),u}},{"../base/reporter":175,inherits:440,"safer-buffer":495}],173:[function(s,n,c){const o=c;o.Reporter=s("./reporter").Reporter,o.DecoderBuffer=s("./buffer").DecoderBuffer,o.EncoderBuffer=s("./buffer").EncoderBuffer,o.Node=s("./node")},{"./buffer":172,"./node":174,"./reporter":175}],174:[function(s,n,c){const o=s("../base/reporter").Reporter,a=s("../base/buffer").EncoderBuffer,d=s("../base/buffer").DecoderBuffer,l=s("minimalistic-assert"),i=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],u=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(i);function f(m,p,x){const g={};this._baseState=g,g.name=x,g.enc=m,g.parent=p||null,g.children=null,g.tag=null,g.args=null,g.reverseArgs=null,g.choice=null,g.optional=!1,g.any=!1,g.obj=!1,g.use=null,g.useDecoder=null,g.key=null,g.default=null,g.explicit=null,g.implicit=null,g.contains=null,g.parent||(g.children=[],this._wrap())}n.exports=f;const h=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];f.prototype.clone=function(){const m=this._baseState,p={};h.forEach(function(g){p[g]=m[g]});const x=new this.constructor(p.parent);return x._baseState=p,x},f.prototype._wrap=function(){const m=this._baseState;u.forEach(function(p){this[p]=function(){const x=new this.constructor(this);return m.children.push(x),x[p].apply(x,arguments)}},this)},f.prototype._init=function(m){const p=this._baseState;l(p.parent===null),m.call(this),p.children=p.children.filter(function(x){return x._baseState.parent===this},this),l.equal(p.children.length,1,"Root node can have only one child")},f.prototype._useArgs=function(m){const p=this._baseState,x=m.filter(function(g){return g instanceof this.constructor},this);m=m.filter(function(g){return!(g instanceof this.constructor)},this),x.length!==0&&(l(p.children===null),p.children=x,x.forEach(function(g){g._baseState.parent=this},this)),m.length!==0&&(l(p.args===null),p.args=m,p.reverseArgs=m.map(function(g){if(typeof g!="object"||g.constructor!==Object)return g;const v={};return Object.keys(g).forEach(function(y){y==(0|y)&&(y|=0);const b=g[y];v[b]=y}),v}))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach(function(m){f.prototype[m]=function(){const p=this._baseState;throw new Error(m+" not implemented for encoding: "+p.enc)}}),i.forEach(function(m){f.prototype[m]=function(){const p=this._baseState,x=Array.prototype.slice.call(arguments);return l(p.tag===null),p.tag=m,this._useArgs(x),this}}),f.prototype.use=function(m){l(m);const p=this._baseState;return l(p.use===null),p.use=m,this},f.prototype.optional=function(){return this._baseState.optional=!0,this},f.prototype.def=function(m){const p=this._baseState;return l(p.default===null),p.default=m,p.optional=!0,this},f.prototype.explicit=function(m){const p=this._baseState;return l(p.explicit===null&&p.implicit===null),p.explicit=m,this},f.prototype.implicit=function(m){const p=this._baseState;return l(p.explicit===null&&p.implicit===null),p.implicit=m,this},f.prototype.obj=function(){const m=this._baseState,p=Array.prototype.slice.call(arguments);return m.obj=!0,p.length!==0&&this._useArgs(p),this},f.prototype.key=function(m){const p=this._baseState;return l(p.key===null),p.key=m,this},f.prototype.any=function(){return this._baseState.any=!0,this},f.prototype.choice=function(m){const p=this._baseState;return l(p.choice===null),p.choice=m,this._useArgs(Object.keys(m).map(function(x){return m[x]})),this},f.prototype.contains=function(m){const p=this._baseState;return l(p.use===null),p.contains=m,this},f.prototype._decode=function(m,p){const x=this._baseState;if(x.parent===null)return m.wrapResult(x.children[0]._decode(m,p));let g,v=x.default,y=!0,b=null;if(x.key!==null&&(b=m.enterKey(x.key)),x.optional){let C=null;if(x.explicit!==null?C=x.explicit:x.implicit!==null?C=x.implicit:x.tag!==null&&(C=x.tag),C!==null||x.any){if(y=this._peekTag(m,C,x.any),m.isError(y))return y}else{const T=m.save();try{x.choice===null?this._decodeGeneric(x.tag,m,p):this._decodeChoice(m,p),y=!0}catch{y=!1}m.restore(T)}}if(x.obj&&y&&(g=m.enterObject()),y){if(x.explicit!==null){const T=this._decodeTag(m,x.explicit);if(m.isError(T))return T;m=T}const C=m.offset;if(x.use===null&&x.choice===null){let T;x.any&&(T=m.save());const M=this._decodeTag(m,x.implicit!==null?x.implicit:x.tag,x.any);if(m.isError(M))return M;x.any?v=m.raw(T):m=M}if(p&&p.track&&x.tag!==null&&p.track(m.path(),C,m.length,"tagged"),p&&p.track&&x.tag!==null&&p.track(m.path(),m.offset,m.length,"content"),x.any||(v=x.choice===null?this._decodeGeneric(x.tag,m,p):this._decodeChoice(m,p)),m.isError(v))return v;if(x.any||x.choice!==null||x.children===null||x.children.forEach(function(T){T._decode(m,p)}),x.contains&&(x.tag==="octstr"||x.tag==="bitstr")){const T=new d(v);v=this._getUse(x.contains,m._reporterState.obj)._decode(T,p)}}return x.obj&&y&&(v=m.leaveObject(g)),x.key===null||v===null&&y!==!0?b!==null&&m.exitKey(b):m.leaveKey(b,x.key,v),v},f.prototype._decodeGeneric=function(m,p,x){const g=this._baseState;return m==="seq"||m==="set"?null:m==="seqof"||m==="setof"?this._decodeList(p,m,g.args[0],x):/str$/.test(m)?this._decodeStr(p,m,x):m==="objid"&&g.args?this._decodeObjid(p,g.args[0],g.args[1],x):m==="objid"?this._decodeObjid(p,null,null,x):m==="gentime"||m==="utctime"?this._decodeTime(p,m,x):m==="null_"?this._decodeNull(p,x):m==="bool"?this._decodeBool(p,x):m==="objDesc"?this._decodeStr(p,m,x):m==="int"||m==="enum"?this._decodeInt(p,g.args&&g.args[0],x):g.use!==null?this._getUse(g.use,p._reporterState.obj)._decode(p,x):p.error("unknown tag: "+m)},f.prototype._getUse=function(m,p){const x=this._baseState;return x.useDecoder=this._use(m,p),l(x.useDecoder._baseState.parent===null),x.useDecoder=x.useDecoder._baseState.children[0],x.implicit!==x.useDecoder._baseState.implicit&&(x.useDecoder=x.useDecoder.clone(),x.useDecoder._baseState.implicit=x.implicit),x.useDecoder},f.prototype._decodeChoice=function(m,p){const x=this._baseState;let g=null,v=!1;return Object.keys(x.choice).some(function(y){const b=m.save(),C=x.choice[y];try{const T=C._decode(m,p);if(m.isError(T))return!1;g={type:y,value:T},v=!0}catch{return m.restore(b),!1}return!0},this),v?g:m.error("Choice not matched")},f.prototype._createEncoderBuffer=function(m){return new a(m,this.reporter)},f.prototype._encode=function(m,p,x){const g=this._baseState;if(g.default!==null&&g.default===m)return;const v=this._encodeValue(m,p,x);return v===void 0||this._skipDefault(v,p,x)?void 0:v},f.prototype._encodeValue=function(m,p,x){const g=this._baseState;if(g.parent===null)return g.children[0]._encode(m,p||new o);let v=null;if(this.reporter=p,g.optional&&m===void 0){if(g.default===null)return;m=g.default}let y=null,b=!1;if(g.any)v=this._createEncoderBuffer(m);else if(g.choice)v=this._encodeChoice(m,p);else if(g.contains)y=this._getUse(g.contains,x)._encode(m,p),b=!0;else if(g.children)y=g.children.map(function(C){if(C._baseState.tag==="null_")return C._encode(null,p,m);if(C._baseState.key===null)return p.error("Child should have a key");const T=p.enterKey(C._baseState.key);if(typeof m!="object")return p.error("Child expected, but input is not object");const M=C._encode(m[C._baseState.key],p,m);return p.leaveKey(T),M},this).filter(function(C){return C}),y=this._createEncoderBuffer(y);else if(g.tag==="seqof"||g.tag==="setof"){if(!g.args||g.args.length!==1)return p.error("Too many args for : "+g.tag);if(!Array.isArray(m))return p.error("seqof/setof, but data is not Array");const C=this.clone();C._baseState.implicit=null,y=this._createEncoderBuffer(m.map(function(T){const M=this._baseState;return this._getUse(M.args[0],m)._encode(T,p)},C))}else g.use!==null?v=this._getUse(g.use,x)._encode(m,p):(y=this._encodePrimitive(g.tag,m),b=!0);if(!g.any&&g.choice===null){const C=g.implicit!==null?g.implicit:g.tag,T=g.implicit===null?"universal":"context";C===null?g.use===null&&p.error("Tag could be omitted only for .use()"):g.use===null&&(v=this._encodeComposite(C,b,T,y))}return g.explicit!==null&&(v=this._encodeComposite(g.explicit,!1,"context",v)),v},f.prototype._encodeChoice=function(m,p){const x=this._baseState,g=x.choice[m.type];return g||l(!1,m.type+" not found in "+JSON.stringify(Object.keys(x.choice))),g._encode(m.value,p)},f.prototype._encodePrimitive=function(m,p){const x=this._baseState;if(/str$/.test(m))return this._encodeStr(p,m);if(m==="objid"&&x.args)return this._encodeObjid(p,x.reverseArgs[0],x.args[1]);if(m==="objid")return this._encodeObjid(p,null,null);if(m==="gentime"||m==="utctime")return this._encodeTime(p,m);if(m==="null_")return this._encodeNull();if(m==="int"||m==="enum")return this._encodeInt(p,x.args&&x.reverseArgs[0]);if(m==="bool")return this._encodeBool(p);if(m==="objDesc")return this._encodeStr(p,m);throw new Error("Unsupported tag: "+m)},f.prototype._isNumstr=function(m){return/^[0-9 ]*$/.test(m)},f.prototype._isPrintstr=function(m){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(m)}},{"../base/buffer":172,"../base/reporter":175,"minimalistic-assert":453}],175:[function(s,n,c){const o=s("inherits");function a(l){this._reporterState={obj:null,path:[],options:l||{},errors:[]}}function d(l,i){this.path=l,this.rethrow(i)}c.Reporter=a,a.prototype.isError=function(l){return l instanceof d},a.prototype.save=function(){const l=this._reporterState;return{obj:l.obj,pathLen:l.path.length}},a.prototype.restore=function(l){const i=this._reporterState;i.obj=l.obj,i.path=i.path.slice(0,l.pathLen)},a.prototype.enterKey=function(l){return this._reporterState.path.push(l)},a.prototype.exitKey=function(l){const i=this._reporterState;i.path=i.path.slice(0,l-1)},a.prototype.leaveKey=function(l,i,u){const f=this._reporterState;this.exitKey(l),f.obj!==null&&(f.obj[i]=u)},a.prototype.path=function(){return this._reporterState.path.join("/")},a.prototype.enterObject=function(){const l=this._reporterState,i=l.obj;return l.obj={},i},a.prototype.leaveObject=function(l){const i=this._reporterState,u=i.obj;return i.obj=l,u},a.prototype.error=function(l){let i;const u=this._reporterState,f=l instanceof d;if(i=f?l:new d(u.path.map(function(h){return"["+JSON.stringify(h)+"]"}).join(""),l.message||l,l.stack),!u.options.partial)throw i;return f||u.errors.push(i),i},a.prototype.wrapResult=function(l){const i=this._reporterState;return i.options.partial?{result:this.isError(l)?null:l,errors:i.errors}:l},o(d,Error),d.prototype.rethrow=function(l){if(this.message=l+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,d),!this.stack)try{throw new Error(this.message)}catch(i){this.stack=i.stack}return this}},{inherits:440}],176:[function(s,n,c){function o(a){const d={};return Object.keys(a).forEach(function(l){(0|l)==l&&(l|=0);const i=a[l];d[i]=l}),d}c.tagClass={0:"universal",1:"application",2:"context",3:"private"},c.tagClassByName=o(c.tagClass),c.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},c.tagByName=o(c.tag)},{}],177:[function(s,n,c){const o=c;o._reverse=function(a){const d={};return Object.keys(a).forEach(function(l){(0|l)==l&&(l|=0);const i=a[l];d[i]=l}),d},o.der=s("./der")},{"./der":176}],178:[function(s,n,c){const o=s("inherits"),a=s("bn.js"),d=s("../base/buffer").DecoderBuffer,l=s("../base/node"),i=s("../constants/der");function u(p){this.enc="der",this.name=p.name,this.entity=p,this.tree=new f,this.tree._init(p.body)}function f(p){l.call(this,"der",p)}function h(p,x){let g=p.readUInt8(x);if(p.isError(g))return g;const v=i.tagClass[g>>6],y=(32&g)==0;if((31&g)==31){let b=g;for(g=0;(128&b)==128;){if(b=p.readUInt8(x),p.isError(b))return b;g<<=7,g|=127&b}}else g&=31;return{cls:v,primitive:y,tag:g,tagStr:i.tag[g]}}function m(p,x,g){let v=p.readUInt8(g);if(p.isError(v))return v;if(!x&&v===128)return null;if(!(128&v))return v;const y=127&v;if(y>4)return p.error("length octect is too long");v=0;for(let b=0;b<y;b++){v<<=8;const C=p.readUInt8(g);if(p.isError(C))return C;v|=C}return v}n.exports=u,u.prototype.decode=function(p,x){return d.isDecoderBuffer(p)||(p=new d(p,x)),this.tree._decode(p,x)},o(f,l),f.prototype._peekTag=function(p,x,g){if(p.isEmpty())return!1;const v=p.save(),y=h(p,'Failed to peek tag: "'+x+'"');return p.isError(y)?y:(p.restore(v),y.tag===x||y.tagStr===x||y.tagStr+"of"===x||g)},f.prototype._decodeTag=function(p,x,g){const v=h(p,'Failed to decode tag of "'+x+'"');if(p.isError(v))return v;let y=m(p,v.primitive,'Failed to get length of "'+x+'"');if(p.isError(y))return y;if(!g&&v.tag!==x&&v.tagStr!==x&&v.tagStr+"of"!==x)return p.error('Failed to match tag: "'+x+'"');if(v.primitive||y!==null)return p.skip(y,'Failed to match body of: "'+x+'"');const b=p.save(),C=this._skipUntilEnd(p,'Failed to skip indefinite length body: "'+this.tag+'"');return p.isError(C)?C:(y=p.offset-b.offset,p.restore(b),p.skip(y,'Failed to match body of: "'+x+'"'))},f.prototype._skipUntilEnd=function(p,x){for(;;){const g=h(p,x);if(p.isError(g))return g;const v=m(p,g.primitive,x);if(p.isError(v))return v;let y;if(y=g.primitive||v!==null?p.skip(v):this._skipUntilEnd(p,x),p.isError(y))return y;if(g.tagStr==="end")break}},f.prototype._decodeList=function(p,x,g,v){const y=[];for(;!p.isEmpty();){const b=this._peekTag(p,"end");if(p.isError(b))return b;const C=g.decode(p,"der",v);if(p.isError(C)&&b)break;y.push(C)}return y},f.prototype._decodeStr=function(p,x){if(x==="bitstr"){const g=p.readUInt8();return p.isError(g)?g:{unused:g,data:p.raw()}}if(x==="bmpstr"){const g=p.raw();if(g.length%2==1)return p.error("Decoding of string type: bmpstr length mismatch");let v="";for(let y=0;y<g.length/2;y++)v+=String.fromCharCode(g.readUInt16BE(2*y));return v}if(x==="numstr"){const g=p.raw().toString("ascii");return this._isNumstr(g)?g:p.error("Decoding of string type: numstr unsupported characters")}if(x==="octstr"||x==="objDesc")return p.raw();if(x==="printstr"){const g=p.raw().toString("ascii");return this._isPrintstr(g)?g:p.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(x)?p.raw().toString():p.error("Decoding of string type: "+x+" unsupported")},f.prototype._decodeObjid=function(p,x,g){let v;const y=[];let b=0,C=0;for(;!p.isEmpty();)C=p.readUInt8(),b<<=7,b|=127&C,!(128&C)&&(y.push(b),b=0);128&C&&y.push(b);const T=y[0]/40|0,M=y[0]%40;if(v=g?y:[T,M].concat(y.slice(1)),x){let U=x[v.join(" ")];U===void 0&&(U=x[v.join(".")]),U!==void 0&&(v=U)}return v},f.prototype._decodeTime=function(p,x){const g=p.raw().toString();let v,y,b,C,T,M;if(x==="gentime")v=0|g.slice(0,4),y=0|g.slice(4,6),b=0|g.slice(6,8),C=0|g.slice(8,10),T=0|g.slice(10,12),M=0|g.slice(12,14);else{if(x!=="utctime")return p.error("Decoding "+x+" time is not supported yet");v=0|g.slice(0,2),y=0|g.slice(2,4),b=0|g.slice(4,6),C=0|g.slice(6,8),T=0|g.slice(8,10),M=0|g.slice(10,12),v=v<70?2e3+v:1900+v}return Date.UTC(v,y-1,b,C,T,M,0)},f.prototype._decodeNull=function(){return null},f.prototype._decodeBool=function(p){const x=p.readUInt8();return p.isError(x)?x:x!==0},f.prototype._decodeInt=function(p,x){const g=p.raw();let v=new a(g);return x&&(v=x[v.toString(10)]||v),v},f.prototype._use=function(p,x){return typeof p=="function"&&(p=p(x)),p._getDecoder("der").tree}},{"../base/buffer":172,"../base/node":174,"../constants/der":176,"bn.js":184,inherits:440}],179:[function(s,n,c){const o=c;o.der=s("./der"),o.pem=s("./pem")},{"./der":178,"./pem":180}],180:[function(s,n,c){const o=s("inherits"),a=s("safer-buffer").Buffer,d=s("./der");function l(i){d.call(this,i),this.enc="pem"}o(l,d),n.exports=l,l.prototype.decode=function(i,u){const f=i.toString().split(/[\r\n]+/g),h=u.label.toUpperCase(),m=/^-----(BEGIN|END) ([^-]+)-----$/;let p=-1,x=-1;for(let y=0;y<f.length;y++){const b=f[y].match(m);if(b!==null&&b[2]===h){if(p!==-1){if(b[1]!=="END")break;x=y;break}if(b[1]!=="BEGIN")break;p=y}}if(p===-1||x===-1)throw new Error("PEM section not found for: "+h);const g=f.slice(p+1,x).join("");g.replace(/[^a-z0-9+/=]+/gi,"");const v=a.from(g,"base64");return d.prototype.decode.call(this,v,u)}},{"./der":178,inherits:440,"safer-buffer":495}],181:[function(s,n,c){const o=s("inherits"),a=s("safer-buffer").Buffer,d=s("../base/node"),l=s("../constants/der");function i(h){this.enc="der",this.name=h.name,this.entity=h,this.tree=new u,this.tree._init(h.body)}function u(h){d.call(this,"der",h)}function f(h){return h<10?"0"+h:h}n.exports=i,i.prototype.encode=function(h,m){return this.tree._encode(h,m).join()},o(u,d),u.prototype._encodeComposite=function(h,m,p,x){const g=function(b,C,T,M){let U;if(b==="seqof"?b="seq":b==="setof"&&(b="set"),l.tagByName.hasOwnProperty(b))U=l.tagByName[b];else{if(typeof b!="number"||(0|b)!==b)return M.error("Unknown tag: "+b);U=b}return U>=31?M.error("Multi-octet tag encoding unsupported"):(C||(U|=32),U|=l.tagClassByName[T||"universal"]<<6,U)}(h,m,p,this.reporter);if(x.length<128){const b=a.alloc(2);return b[0]=g,b[1]=x.length,this._createEncoderBuffer([b,x])}let v=1;for(let b=x.length;b>=256;b>>=8)v++;const y=a.alloc(2+v);y[0]=g,y[1]=128|v;for(let b=1+v,C=x.length;C>0;b--,C>>=8)y[b]=255&C;return this._createEncoderBuffer([y,x])},u.prototype._encodeStr=function(h,m){if(m==="bitstr")return this._createEncoderBuffer([0|h.unused,h.data]);if(m==="bmpstr"){const p=a.alloc(2*h.length);for(let x=0;x<h.length;x++)p.writeUInt16BE(h.charCodeAt(x),2*x);return this._createEncoderBuffer(p)}return m==="numstr"?this._isNumstr(h)?this._createEncoderBuffer(h):this.reporter.error("Encoding of string type: numstr supports only digits and space"):m==="printstr"?this._isPrintstr(h)?this._createEncoderBuffer(h):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(m)||m==="objDesc"?this._createEncoderBuffer(h):this.reporter.error("Encoding of string type: "+m+" unsupported")},u.prototype._encodeObjid=function(h,m,p){if(typeof h=="string"){if(!m)return this.reporter.error("string objid given, but no values map found");if(!m.hasOwnProperty(h))return this.reporter.error("objid not found in values map");h=m[h].split(/[\s.]+/g);for(let y=0;y<h.length;y++)h[y]|=0}else if(Array.isArray(h)){h=h.slice();for(let y=0;y<h.length;y++)h[y]|=0}if(!Array.isArray(h))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(h));if(!p){if(h[1]>=40)return this.reporter.error("Second objid identifier OOB");h.splice(0,2,40*h[0]+h[1])}let x=0;for(let y=0;y<h.length;y++){let b=h[y];for(x++;b>=128;b>>=7)x++}const g=a.alloc(x);let v=g.length-1;for(let y=h.length-1;y>=0;y--){let b=h[y];for(g[v--]=127&b;(b>>=7)>0;)g[v--]=128|127&b}return this._createEncoderBuffer(g)},u.prototype._encodeTime=function(h,m){let p;const x=new Date(h);return m==="gentime"?p=[f(x.getUTCFullYear()),f(x.getUTCMonth()+1),f(x.getUTCDate()),f(x.getUTCHours()),f(x.getUTCMinutes()),f(x.getUTCSeconds()),"Z"].join(""):m==="utctime"?p=[f(x.getUTCFullYear()%100),f(x.getUTCMonth()+1),f(x.getUTCDate()),f(x.getUTCHours()),f(x.getUTCMinutes()),f(x.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+m+" time is not supported yet"),this._encodeStr(p,"octstr")},u.prototype._encodeNull=function(){return this._createEncoderBuffer("")},u.prototype._encodeInt=function(h,m){if(typeof h=="string"){if(!m)return this.reporter.error("String int or enum given, but no values map");if(!m.hasOwnProperty(h))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(h));h=m[h]}if(typeof h!="number"&&!a.isBuffer(h)){const g=h.toArray();!h.sign&&128&g[0]&&g.unshift(0),h=a.from(g)}if(a.isBuffer(h)){let g=h.length;h.length===0&&g++;const v=a.alloc(g);return h.copy(v),h.length===0&&(v[0]=0),this._createEncoderBuffer(v)}if(h<128)return this._createEncoderBuffer(h);if(h<256)return this._createEncoderBuffer([0,h]);let p=1;for(let g=h;g>=256;g>>=8)p++;const x=new Array(p);for(let g=x.length-1;g>=0;g--)x[g]=255&h,h>>=8;return 128&x[0]&&x.unshift(0),this._createEncoderBuffer(a.from(x))},u.prototype._encodeBool=function(h){return this._createEncoderBuffer(h?255:0)},u.prototype._use=function(h,m){return typeof h=="function"&&(h=h(m)),h._getEncoder("der").tree},u.prototype._skipDefault=function(h,m,p){const x=this._baseState;let g;if(x.default===null)return!1;const v=h.join();if(x.defaultBuffer===void 0&&(x.defaultBuffer=this._encodeValue(x.default,m,p).join()),v.length!==x.defaultBuffer.length)return!1;for(g=0;g<v.length;g++)if(v[g]!==x.defaultBuffer[g])return!1;return!0}},{"../base/node":174,"../constants/der":176,inherits:440,"safer-buffer":495}],182:[function(s,n,c){const o=c;o.der=s("./der"),o.pem=s("./pem")},{"./der":181,"./pem":183}],183:[function(s,n,c){const o=s("inherits"),a=s("./der");function d(l){a.call(this,l),this.enc="pem"}o(d,a),n.exports=d,d.prototype.encode=function(l,i){const u=a.prototype.encode.call(this,l).toString("base64"),f=["-----BEGIN "+i.label+"-----"];for(let h=0;h<u.length;h+=64)f.push(u.slice(h,h+64));return f.push("-----END "+i.label+"-----"),f.join(`
`)}},{"./der":181,inherits:440}],184:[function(s,n,c){(function(o,a){function d(k,R){if(!k)throw new Error(R||"Assertion failed")}function l(k,R){k.super_=R;var S=function(){};S.prototype=R.prototype,k.prototype=new S,k.prototype.constructor=k}function i(k,R,S){if(i.isBN(k))return k;this.negative=0,this.words=null,this.length=0,this.red=null,k!==null&&(R!=="le"&&R!=="be"||(S=R,R=10),this._init(k||0,R||10,S||"be"))}var u;typeof o=="object"?o.exports=i:(void 0).BN=i,i.BN=i,i.wordSize=26;try{u=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:s("buffer").Buffer}catch{}function f(k,R){var S=k.charCodeAt(R);return S>=65&&S<=70?S-55:S>=97&&S<=102?S-87:S-48&15}function h(k,R,S){var w=f(k,S);return S-1>=R&&(w|=f(k,S-1)<<4),w}function m(k,R,S,w){for(var _=0,j=Math.min(k.length,S),N=R;N<j;N++){var E=k.charCodeAt(N)-48;_*=w,_+=E>=49?E-49+10:E>=17?E-17+10:E}return _}i.isBN=function(k){return k instanceof i||k!==null&&typeof k=="object"&&k.constructor.wordSize===i.wordSize&&Array.isArray(k.words)},i.max=function(k,R){return k.cmp(R)>0?k:R},i.min=function(k,R){return k.cmp(R)<0?k:R},i.prototype._init=function(k,R,S){if(typeof k=="number")return this._initNumber(k,R,S);if(typeof k=="object")return this._initArray(k,R,S);R==="hex"&&(R=16),d(R===(0|R)&&R>=2&&R<=36);var w=0;(k=k.toString().replace(/\s+/g,""))[0]==="-"&&(w++,this.negative=1),w<k.length&&(R===16?this._parseHex(k,w,S):(this._parseBase(k,R,w),S==="le"&&this._initArray(this.toArray(),R,S)))},i.prototype._initNumber=function(k,R,S){k<0&&(this.negative=1,k=-k),k<67108864?(this.words=[67108863&k],this.length=1):k<4503599627370496?(this.words=[67108863&k,k/67108864&67108863],this.length=2):(d(k<9007199254740992),this.words=[67108863&k,k/67108864&67108863,1],this.length=3),S==="le"&&this._initArray(this.toArray(),R,S)},i.prototype._initArray=function(k,R,S){if(d(typeof k.length=="number"),k.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(k.length/3),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var _,j,N=0;if(S==="be")for(w=k.length-1,_=0;w>=0;w-=3)j=k[w]|k[w-1]<<8|k[w-2]<<16,this.words[_]|=j<<N&67108863,this.words[_+1]=j>>>26-N&67108863,(N+=24)>=26&&(N-=26,_++);else if(S==="le")for(w=0,_=0;w<k.length;w+=3)j=k[w]|k[w+1]<<8|k[w+2]<<16,this.words[_]|=j<<N&67108863,this.words[_+1]=j>>>26-N&67108863,(N+=24)>=26&&(N-=26,_++);return this.strip()},i.prototype._parseHex=function(k,R,S){this.length=Math.ceil((k.length-R)/6),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var _,j=0,N=0;if(S==="be")for(w=k.length-1;w>=R;w-=2)_=h(k,R,w)<<j,this.words[N]|=67108863&_,j>=18?(j-=18,N+=1,this.words[N]|=_>>>26):j+=8;else for(w=(k.length-R)%2==0?R+1:R;w<k.length;w+=2)_=h(k,R,w)<<j,this.words[N]|=67108863&_,j>=18?(j-=18,N+=1,this.words[N]|=_>>>26):j+=8;this.strip()},i.prototype._parseBase=function(k,R,S){this.words=[0],this.length=1;for(var w=0,_=1;_<=67108863;_*=R)w++;w--,_=_/R|0;for(var j=k.length-S,N=j%w,E=Math.min(j,j-N)+S,I=0,D=S;D<E;D+=w)I=m(k,D,D+w,R),this.imuln(_),this.words[0]+I<67108864?this.words[0]+=I:this._iaddn(I);if(N!==0){var V=1;for(I=m(k,D,k.length,R),D=0;D<N;D++)V*=R;this.imuln(V),this.words[0]+I<67108864?this.words[0]+=I:this._iaddn(I)}this.strip()},i.prototype.copy=function(k){k.words=new Array(this.length);for(var R=0;R<this.length;R++)k.words[R]=this.words[R];k.length=this.length,k.negative=this.negative,k.red=this.red},i.prototype.clone=function(){var k=new i(null);return this.copy(k),k},i.prototype._expand=function(k){for(;this.length<k;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var p=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],g=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function v(k,R,S){S.negative=R.negative^k.negative;var w=k.length+R.length|0;S.length=w,w=w-1|0;var _=0|k.words[0],j=0|R.words[0],N=_*j,E=67108863&N,I=N/67108864|0;S.words[0]=E;for(var D=1;D<w;D++){for(var V=I>>>26,H=67108863&I,G=Math.min(D,R.length-1),$=Math.max(0,D-k.length+1);$<=G;$++){var Y=D-$|0;V+=(N=(_=0|k.words[Y])*(j=0|R.words[$])+H)/67108864|0,H=67108863&N}S.words[D]=0|H,I=0|V}return I!==0?S.words[D]=0|I:S.length--,S.strip()}i.prototype.toString=function(k,R){var S;if(R=0|R||1,(k=k||10)===16||k==="hex"){S="";for(var w=0,_=0,j=0;j<this.length;j++){var N=this.words[j],E=(16777215&(N<<w|_)).toString(16);S=(_=N>>>24-w&16777215)!==0||j!==this.length-1?p[6-E.length]+E+S:E+S,(w+=2)>=26&&(w-=26,j--)}for(_!==0&&(S=_.toString(16)+S);S.length%R!=0;)S="0"+S;return this.negative!==0&&(S="-"+S),S}if(k===(0|k)&&k>=2&&k<=36){var I=x[k],D=g[k];S="";var V=this.clone();for(V.negative=0;!V.isZero();){var H=V.modn(D).toString(k);S=(V=V.idivn(D)).isZero()?H+S:p[I-H.length]+H+S}for(this.isZero()&&(S="0"+S);S.length%R!=0;)S="0"+S;return this.negative!==0&&(S="-"+S),S}d(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var k=this.words[0];return this.length===2?k+=67108864*this.words[1]:this.length===3&&this.words[2]===1?k+=4503599627370496+67108864*this.words[1]:this.length>2&&d(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-k:k},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(k,R){return d(u!==void 0),this.toArrayLike(u,k,R)},i.prototype.toArray=function(k,R){return this.toArrayLike(Array,k,R)},i.prototype.toArrayLike=function(k,R,S){var w=this.byteLength(),_=S||Math.max(1,w);d(w<=_,"byte array longer than desired length"),d(_>0,"Requested array length <= 0"),this.strip();var j,N,E=R==="le",I=new k(_),D=this.clone();if(E){for(N=0;!D.isZero();N++)j=D.andln(255),D.iushrn(8),I[N]=j;for(;N<_;N++)I[N]=0}else{for(N=0;N<_-w;N++)I[N]=0;for(N=0;!D.isZero();N++)j=D.andln(255),D.iushrn(8),I[_-N-1]=j}return I},Math.clz32?i.prototype._countBits=function(k){return 32-Math.clz32(k)}:i.prototype._countBits=function(k){var R=k,S=0;return R>=4096&&(S+=13,R>>>=13),R>=64&&(S+=7,R>>>=7),R>=8&&(S+=4,R>>>=4),R>=2&&(S+=2,R>>>=2),S+R},i.prototype._zeroBits=function(k){if(k===0)return 26;var R=k,S=0;return!(8191&R)&&(S+=13,R>>>=13),!(127&R)&&(S+=7,R>>>=7),!(15&R)&&(S+=4,R>>>=4),!(3&R)&&(S+=2,R>>>=2),!(1&R)&&S++,S},i.prototype.bitLength=function(){var k=this.words[this.length-1],R=this._countBits(k);return 26*(this.length-1)+R},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var k=0,R=0;R<this.length;R++){var S=this._zeroBits(this.words[R]);if(k+=S,S!==26)break}return k},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(k){return this.negative!==0?this.abs().inotn(k).iaddn(1):this.clone()},i.prototype.fromTwos=function(k){return this.testn(k-1)?this.notn(k).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(k){for(;this.length<k.length;)this.words[this.length++]=0;for(var R=0;R<k.length;R++)this.words[R]=this.words[R]|k.words[R];return this.strip()},i.prototype.ior=function(k){return d((this.negative|k.negative)==0),this.iuor(k)},i.prototype.or=function(k){return this.length>k.length?this.clone().ior(k):k.clone().ior(this)},i.prototype.uor=function(k){return this.length>k.length?this.clone().iuor(k):k.clone().iuor(this)},i.prototype.iuand=function(k){var R;R=this.length>k.length?k:this;for(var S=0;S<R.length;S++)this.words[S]=this.words[S]&k.words[S];return this.length=R.length,this.strip()},i.prototype.iand=function(k){return d((this.negative|k.negative)==0),this.iuand(k)},i.prototype.and=function(k){return this.length>k.length?this.clone().iand(k):k.clone().iand(this)},i.prototype.uand=function(k){return this.length>k.length?this.clone().iuand(k):k.clone().iuand(this)},i.prototype.iuxor=function(k){var R,S;this.length>k.length?(R=this,S=k):(R=k,S=this);for(var w=0;w<S.length;w++)this.words[w]=R.words[w]^S.words[w];if(this!==R)for(;w<R.length;w++)this.words[w]=R.words[w];return this.length=R.length,this.strip()},i.prototype.ixor=function(k){return d((this.negative|k.negative)==0),this.iuxor(k)},i.prototype.xor=function(k){return this.length>k.length?this.clone().ixor(k):k.clone().ixor(this)},i.prototype.uxor=function(k){return this.length>k.length?this.clone().iuxor(k):k.clone().iuxor(this)},i.prototype.inotn=function(k){d(typeof k=="number"&&k>=0);var R=0|Math.ceil(k/26),S=k%26;this._expand(R),S>0&&R--;for(var w=0;w<R;w++)this.words[w]=67108863&~this.words[w];return S>0&&(this.words[w]=~this.words[w]&67108863>>26-S),this.strip()},i.prototype.notn=function(k){return this.clone().inotn(k)},i.prototype.setn=function(k,R){d(typeof k=="number"&&k>=0);var S=k/26|0,w=k%26;return this._expand(S+1),this.words[S]=R?this.words[S]|1<<w:this.words[S]&~(1<<w),this.strip()},i.prototype.iadd=function(k){var R,S,w;if(this.negative!==0&&k.negative===0)return this.negative=0,R=this.isub(k),this.negative^=1,this._normSign();if(this.negative===0&&k.negative!==0)return k.negative=0,R=this.isub(k),k.negative=1,R._normSign();this.length>k.length?(S=this,w=k):(S=k,w=this);for(var _=0,j=0;j<w.length;j++)R=(0|S.words[j])+(0|w.words[j])+_,this.words[j]=67108863&R,_=R>>>26;for(;_!==0&&j<S.length;j++)R=(0|S.words[j])+_,this.words[j]=67108863&R,_=R>>>26;if(this.length=S.length,_!==0)this.words[this.length]=_,this.length++;else if(S!==this)for(;j<S.length;j++)this.words[j]=S.words[j];return this},i.prototype.add=function(k){var R;return k.negative!==0&&this.negative===0?(k.negative=0,R=this.sub(k),k.negative^=1,R):k.negative===0&&this.negative!==0?(this.negative=0,R=k.sub(this),this.negative=1,R):this.length>k.length?this.clone().iadd(k):k.clone().iadd(this)},i.prototype.isub=function(k){if(k.negative!==0){k.negative=0;var R=this.iadd(k);return k.negative=1,R._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(k),this.negative=1,this._normSign();var S,w,_=this.cmp(k);if(_===0)return this.negative=0,this.length=1,this.words[0]=0,this;_>0?(S=this,w=k):(S=k,w=this);for(var j=0,N=0;N<w.length;N++)j=(R=(0|S.words[N])-(0|w.words[N])+j)>>26,this.words[N]=67108863&R;for(;j!==0&&N<S.length;N++)j=(R=(0|S.words[N])+j)>>26,this.words[N]=67108863&R;if(j===0&&N<S.length&&S!==this)for(;N<S.length;N++)this.words[N]=S.words[N];return this.length=Math.max(this.length,N),S!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(k){return this.clone().isub(k)};var y=function(k,R,S){var w,_,j,N=k.words,E=R.words,I=S.words,D=0,V=0|N[0],H=8191&V,G=V>>>13,$=0|N[1],Y=8191&$,F=$>>>13,O=0|N[2],W=8191&O,K=O>>>13,Q=0|N[3],X=8191&Q,te=Q>>>13,de=0|N[4],xe=8191&de,ne=de>>>13,ge=0|N[5],be=8191&ge,Ie=ge>>>13,Ce=0|N[6],Oe=8191&Ce,Ee=Ce>>>13,pe=0|N[7],Ae=8191&pe,st=pe>>>13,qe=0|N[8],ie=8191&qe,ae=qe>>>13,we=0|N[9],ve=8191&we,He=we>>>13,$e=0|E[0],ue=8191&$e,oe=$e>>>13,_e=0|E[1],Me=8191&_e,ze=_e>>>13,Xe=0|E[2],Ve=8191&Xe,ot=Xe>>>13,xt=0|E[3],ft=8191&xt,at=xt>>>13,Be=0|E[4],Ue=8191&Be,re=Be>>>13,ye=0|E[5],ke=8191&ye,Fe=ye>>>13,Ke=0|E[6],Qe=8191&Ke,he=Ke>>>13,je=0|E[7],Ne=8191&je,tt=je>>>13,jt=0|E[8],dt=8191&jt,kt=jt>>>13,gt=0|E[9],wt=8191&gt,Pt=gt>>>13;S.negative=k.negative^R.negative,S.length=19;var bt=(D+(w=Math.imul(H,ue))|0)+((8191&(_=(_=Math.imul(H,oe))+Math.imul(G,ue)|0))<<13)|0;D=((j=Math.imul(G,oe))+(_>>>13)|0)+(bt>>>26)|0,bt&=67108863,w=Math.imul(Y,ue),_=(_=Math.imul(Y,oe))+Math.imul(F,ue)|0,j=Math.imul(F,oe);var yt=(D+(w=w+Math.imul(H,Me)|0)|0)+((8191&(_=(_=_+Math.imul(H,ze)|0)+Math.imul(G,Me)|0))<<13)|0;D=((j=j+Math.imul(G,ze)|0)+(_>>>13)|0)+(yt>>>26)|0,yt&=67108863,w=Math.imul(W,ue),_=(_=Math.imul(W,oe))+Math.imul(K,ue)|0,j=Math.imul(K,oe),w=w+Math.imul(Y,Me)|0,_=(_=_+Math.imul(Y,ze)|0)+Math.imul(F,Me)|0,j=j+Math.imul(F,ze)|0;var Ge=(D+(w=w+Math.imul(H,Ve)|0)|0)+((8191&(_=(_=_+Math.imul(H,ot)|0)+Math.imul(G,Ve)|0))<<13)|0;D=((j=j+Math.imul(G,ot)|0)+(_>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,w=Math.imul(X,ue),_=(_=Math.imul(X,oe))+Math.imul(te,ue)|0,j=Math.imul(te,oe),w=w+Math.imul(W,Me)|0,_=(_=_+Math.imul(W,ze)|0)+Math.imul(K,Me)|0,j=j+Math.imul(K,ze)|0,w=w+Math.imul(Y,Ve)|0,_=(_=_+Math.imul(Y,ot)|0)+Math.imul(F,Ve)|0,j=j+Math.imul(F,ot)|0;var J=(D+(w=w+Math.imul(H,ft)|0)|0)+((8191&(_=(_=_+Math.imul(H,at)|0)+Math.imul(G,ft)|0))<<13)|0;D=((j=j+Math.imul(G,at)|0)+(_>>>13)|0)+(J>>>26)|0,J&=67108863,w=Math.imul(xe,ue),_=(_=Math.imul(xe,oe))+Math.imul(ne,ue)|0,j=Math.imul(ne,oe),w=w+Math.imul(X,Me)|0,_=(_=_+Math.imul(X,ze)|0)+Math.imul(te,Me)|0,j=j+Math.imul(te,ze)|0,w=w+Math.imul(W,Ve)|0,_=(_=_+Math.imul(W,ot)|0)+Math.imul(K,Ve)|0,j=j+Math.imul(K,ot)|0,w=w+Math.imul(Y,ft)|0,_=(_=_+Math.imul(Y,at)|0)+Math.imul(F,ft)|0,j=j+Math.imul(F,at)|0;var ce=(D+(w=w+Math.imul(H,Ue)|0)|0)+((8191&(_=(_=_+Math.imul(H,re)|0)+Math.imul(G,Ue)|0))<<13)|0;D=((j=j+Math.imul(G,re)|0)+(_>>>13)|0)+(ce>>>26)|0,ce&=67108863,w=Math.imul(be,ue),_=(_=Math.imul(be,oe))+Math.imul(Ie,ue)|0,j=Math.imul(Ie,oe),w=w+Math.imul(xe,Me)|0,_=(_=_+Math.imul(xe,ze)|0)+Math.imul(ne,Me)|0,j=j+Math.imul(ne,ze)|0,w=w+Math.imul(X,Ve)|0,_=(_=_+Math.imul(X,ot)|0)+Math.imul(te,Ve)|0,j=j+Math.imul(te,ot)|0,w=w+Math.imul(W,ft)|0,_=(_=_+Math.imul(W,at)|0)+Math.imul(K,ft)|0,j=j+Math.imul(K,at)|0,w=w+Math.imul(Y,Ue)|0,_=(_=_+Math.imul(Y,re)|0)+Math.imul(F,Ue)|0,j=j+Math.imul(F,re)|0;var Je=(D+(w=w+Math.imul(H,ke)|0)|0)+((8191&(_=(_=_+Math.imul(H,Fe)|0)+Math.imul(G,ke)|0))<<13)|0;D=((j=j+Math.imul(G,Fe)|0)+(_>>>13)|0)+(Je>>>26)|0,Je&=67108863,w=Math.imul(Oe,ue),_=(_=Math.imul(Oe,oe))+Math.imul(Ee,ue)|0,j=Math.imul(Ee,oe),w=w+Math.imul(be,Me)|0,_=(_=_+Math.imul(be,ze)|0)+Math.imul(Ie,Me)|0,j=j+Math.imul(Ie,ze)|0,w=w+Math.imul(xe,Ve)|0,_=(_=_+Math.imul(xe,ot)|0)+Math.imul(ne,Ve)|0,j=j+Math.imul(ne,ot)|0,w=w+Math.imul(X,ft)|0,_=(_=_+Math.imul(X,at)|0)+Math.imul(te,ft)|0,j=j+Math.imul(te,at)|0,w=w+Math.imul(W,Ue)|0,_=(_=_+Math.imul(W,re)|0)+Math.imul(K,Ue)|0,j=j+Math.imul(K,re)|0,w=w+Math.imul(Y,ke)|0,_=(_=_+Math.imul(Y,Fe)|0)+Math.imul(F,ke)|0,j=j+Math.imul(F,Fe)|0;var ht=(D+(w=w+Math.imul(H,Qe)|0)|0)+((8191&(_=(_=_+Math.imul(H,he)|0)+Math.imul(G,Qe)|0))<<13)|0;D=((j=j+Math.imul(G,he)|0)+(_>>>13)|0)+(ht>>>26)|0,ht&=67108863,w=Math.imul(Ae,ue),_=(_=Math.imul(Ae,oe))+Math.imul(st,ue)|0,j=Math.imul(st,oe),w=w+Math.imul(Oe,Me)|0,_=(_=_+Math.imul(Oe,ze)|0)+Math.imul(Ee,Me)|0,j=j+Math.imul(Ee,ze)|0,w=w+Math.imul(be,Ve)|0,_=(_=_+Math.imul(be,ot)|0)+Math.imul(Ie,Ve)|0,j=j+Math.imul(Ie,ot)|0,w=w+Math.imul(xe,ft)|0,_=(_=_+Math.imul(xe,at)|0)+Math.imul(ne,ft)|0,j=j+Math.imul(ne,at)|0,w=w+Math.imul(X,Ue)|0,_=(_=_+Math.imul(X,re)|0)+Math.imul(te,Ue)|0,j=j+Math.imul(te,re)|0,w=w+Math.imul(W,ke)|0,_=(_=_+Math.imul(W,Fe)|0)+Math.imul(K,ke)|0,j=j+Math.imul(K,Fe)|0,w=w+Math.imul(Y,Qe)|0,_=(_=_+Math.imul(Y,he)|0)+Math.imul(F,Qe)|0,j=j+Math.imul(F,he)|0;var le=(D+(w=w+Math.imul(H,Ne)|0)|0)+((8191&(_=(_=_+Math.imul(H,tt)|0)+Math.imul(G,Ne)|0))<<13)|0;D=((j=j+Math.imul(G,tt)|0)+(_>>>13)|0)+(le>>>26)|0,le&=67108863,w=Math.imul(ie,ue),_=(_=Math.imul(ie,oe))+Math.imul(ae,ue)|0,j=Math.imul(ae,oe),w=w+Math.imul(Ae,Me)|0,_=(_=_+Math.imul(Ae,ze)|0)+Math.imul(st,Me)|0,j=j+Math.imul(st,ze)|0,w=w+Math.imul(Oe,Ve)|0,_=(_=_+Math.imul(Oe,ot)|0)+Math.imul(Ee,Ve)|0,j=j+Math.imul(Ee,ot)|0,w=w+Math.imul(be,ft)|0,_=(_=_+Math.imul(be,at)|0)+Math.imul(Ie,ft)|0,j=j+Math.imul(Ie,at)|0,w=w+Math.imul(xe,Ue)|0,_=(_=_+Math.imul(xe,re)|0)+Math.imul(ne,Ue)|0,j=j+Math.imul(ne,re)|0,w=w+Math.imul(X,ke)|0,_=(_=_+Math.imul(X,Fe)|0)+Math.imul(te,ke)|0,j=j+Math.imul(te,Fe)|0,w=w+Math.imul(W,Qe)|0,_=(_=_+Math.imul(W,he)|0)+Math.imul(K,Qe)|0,j=j+Math.imul(K,he)|0,w=w+Math.imul(Y,Ne)|0,_=(_=_+Math.imul(Y,tt)|0)+Math.imul(F,Ne)|0,j=j+Math.imul(F,tt)|0;var Le=(D+(w=w+Math.imul(H,dt)|0)|0)+((8191&(_=(_=_+Math.imul(H,kt)|0)+Math.imul(G,dt)|0))<<13)|0;D=((j=j+Math.imul(G,kt)|0)+(_>>>13)|0)+(Le>>>26)|0,Le&=67108863,w=Math.imul(ve,ue),_=(_=Math.imul(ve,oe))+Math.imul(He,ue)|0,j=Math.imul(He,oe),w=w+Math.imul(ie,Me)|0,_=(_=_+Math.imul(ie,ze)|0)+Math.imul(ae,Me)|0,j=j+Math.imul(ae,ze)|0,w=w+Math.imul(Ae,Ve)|0,_=(_=_+Math.imul(Ae,ot)|0)+Math.imul(st,Ve)|0,j=j+Math.imul(st,ot)|0,w=w+Math.imul(Oe,ft)|0,_=(_=_+Math.imul(Oe,at)|0)+Math.imul(Ee,ft)|0,j=j+Math.imul(Ee,at)|0,w=w+Math.imul(be,Ue)|0,_=(_=_+Math.imul(be,re)|0)+Math.imul(Ie,Ue)|0,j=j+Math.imul(Ie,re)|0,w=w+Math.imul(xe,ke)|0,_=(_=_+Math.imul(xe,Fe)|0)+Math.imul(ne,ke)|0,j=j+Math.imul(ne,Fe)|0,w=w+Math.imul(X,Qe)|0,_=(_=_+Math.imul(X,he)|0)+Math.imul(te,Qe)|0,j=j+Math.imul(te,he)|0,w=w+Math.imul(W,Ne)|0,_=(_=_+Math.imul(W,tt)|0)+Math.imul(K,Ne)|0,j=j+Math.imul(K,tt)|0,w=w+Math.imul(Y,dt)|0,_=(_=_+Math.imul(Y,kt)|0)+Math.imul(F,dt)|0,j=j+Math.imul(F,kt)|0;var rt=(D+(w=w+Math.imul(H,wt)|0)|0)+((8191&(_=(_=_+Math.imul(H,Pt)|0)+Math.imul(G,wt)|0))<<13)|0;D=((j=j+Math.imul(G,Pt)|0)+(_>>>13)|0)+(rt>>>26)|0,rt&=67108863,w=Math.imul(ve,Me),_=(_=Math.imul(ve,ze))+Math.imul(He,Me)|0,j=Math.imul(He,ze),w=w+Math.imul(ie,Ve)|0,_=(_=_+Math.imul(ie,ot)|0)+Math.imul(ae,Ve)|0,j=j+Math.imul(ae,ot)|0,w=w+Math.imul(Ae,ft)|0,_=(_=_+Math.imul(Ae,at)|0)+Math.imul(st,ft)|0,j=j+Math.imul(st,at)|0,w=w+Math.imul(Oe,Ue)|0,_=(_=_+Math.imul(Oe,re)|0)+Math.imul(Ee,Ue)|0,j=j+Math.imul(Ee,re)|0,w=w+Math.imul(be,ke)|0,_=(_=_+Math.imul(be,Fe)|0)+Math.imul(Ie,ke)|0,j=j+Math.imul(Ie,Fe)|0,w=w+Math.imul(xe,Qe)|0,_=(_=_+Math.imul(xe,he)|0)+Math.imul(ne,Qe)|0,j=j+Math.imul(ne,he)|0,w=w+Math.imul(X,Ne)|0,_=(_=_+Math.imul(X,tt)|0)+Math.imul(te,Ne)|0,j=j+Math.imul(te,tt)|0,w=w+Math.imul(W,dt)|0,_=(_=_+Math.imul(W,kt)|0)+Math.imul(K,dt)|0,j=j+Math.imul(K,kt)|0;var pt=(D+(w=w+Math.imul(Y,wt)|0)|0)+((8191&(_=(_=_+Math.imul(Y,Pt)|0)+Math.imul(F,wt)|0))<<13)|0;D=((j=j+Math.imul(F,Pt)|0)+(_>>>13)|0)+(pt>>>26)|0,pt&=67108863,w=Math.imul(ve,Ve),_=(_=Math.imul(ve,ot))+Math.imul(He,Ve)|0,j=Math.imul(He,ot),w=w+Math.imul(ie,ft)|0,_=(_=_+Math.imul(ie,at)|0)+Math.imul(ae,ft)|0,j=j+Math.imul(ae,at)|0,w=w+Math.imul(Ae,Ue)|0,_=(_=_+Math.imul(Ae,re)|0)+Math.imul(st,Ue)|0,j=j+Math.imul(st,re)|0,w=w+Math.imul(Oe,ke)|0,_=(_=_+Math.imul(Oe,Fe)|0)+Math.imul(Ee,ke)|0,j=j+Math.imul(Ee,Fe)|0,w=w+Math.imul(be,Qe)|0,_=(_=_+Math.imul(be,he)|0)+Math.imul(Ie,Qe)|0,j=j+Math.imul(Ie,he)|0,w=w+Math.imul(xe,Ne)|0,_=(_=_+Math.imul(xe,tt)|0)+Math.imul(ne,Ne)|0,j=j+Math.imul(ne,tt)|0,w=w+Math.imul(X,dt)|0,_=(_=_+Math.imul(X,kt)|0)+Math.imul(te,dt)|0,j=j+Math.imul(te,kt)|0;var Tt=(D+(w=w+Math.imul(W,wt)|0)|0)+((8191&(_=(_=_+Math.imul(W,Pt)|0)+Math.imul(K,wt)|0))<<13)|0;D=((j=j+Math.imul(K,Pt)|0)+(_>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,w=Math.imul(ve,ft),_=(_=Math.imul(ve,at))+Math.imul(He,ft)|0,j=Math.imul(He,at),w=w+Math.imul(ie,Ue)|0,_=(_=_+Math.imul(ie,re)|0)+Math.imul(ae,Ue)|0,j=j+Math.imul(ae,re)|0,w=w+Math.imul(Ae,ke)|0,_=(_=_+Math.imul(Ae,Fe)|0)+Math.imul(st,ke)|0,j=j+Math.imul(st,Fe)|0,w=w+Math.imul(Oe,Qe)|0,_=(_=_+Math.imul(Oe,he)|0)+Math.imul(Ee,Qe)|0,j=j+Math.imul(Ee,he)|0,w=w+Math.imul(be,Ne)|0,_=(_=_+Math.imul(be,tt)|0)+Math.imul(Ie,Ne)|0,j=j+Math.imul(Ie,tt)|0,w=w+Math.imul(xe,dt)|0,_=(_=_+Math.imul(xe,kt)|0)+Math.imul(ne,dt)|0,j=j+Math.imul(ne,kt)|0;var vt=(D+(w=w+Math.imul(X,wt)|0)|0)+((8191&(_=(_=_+Math.imul(X,Pt)|0)+Math.imul(te,wt)|0))<<13)|0;D=((j=j+Math.imul(te,Pt)|0)+(_>>>13)|0)+(vt>>>26)|0,vt&=67108863,w=Math.imul(ve,Ue),_=(_=Math.imul(ve,re))+Math.imul(He,Ue)|0,j=Math.imul(He,re),w=w+Math.imul(ie,ke)|0,_=(_=_+Math.imul(ie,Fe)|0)+Math.imul(ae,ke)|0,j=j+Math.imul(ae,Fe)|0,w=w+Math.imul(Ae,Qe)|0,_=(_=_+Math.imul(Ae,he)|0)+Math.imul(st,Qe)|0,j=j+Math.imul(st,he)|0,w=w+Math.imul(Oe,Ne)|0,_=(_=_+Math.imul(Oe,tt)|0)+Math.imul(Ee,Ne)|0,j=j+Math.imul(Ee,tt)|0,w=w+Math.imul(be,dt)|0,_=(_=_+Math.imul(be,kt)|0)+Math.imul(Ie,dt)|0,j=j+Math.imul(Ie,kt)|0;var _t=(D+(w=w+Math.imul(xe,wt)|0)|0)+((8191&(_=(_=_+Math.imul(xe,Pt)|0)+Math.imul(ne,wt)|0))<<13)|0;D=((j=j+Math.imul(ne,Pt)|0)+(_>>>13)|0)+(_t>>>26)|0,_t&=67108863,w=Math.imul(ve,ke),_=(_=Math.imul(ve,Fe))+Math.imul(He,ke)|0,j=Math.imul(He,Fe),w=w+Math.imul(ie,Qe)|0,_=(_=_+Math.imul(ie,he)|0)+Math.imul(ae,Qe)|0,j=j+Math.imul(ae,he)|0,w=w+Math.imul(Ae,Ne)|0,_=(_=_+Math.imul(Ae,tt)|0)+Math.imul(st,Ne)|0,j=j+Math.imul(st,tt)|0,w=w+Math.imul(Oe,dt)|0,_=(_=_+Math.imul(Oe,kt)|0)+Math.imul(Ee,dt)|0,j=j+Math.imul(Ee,kt)|0;var Bt=(D+(w=w+Math.imul(be,wt)|0)|0)+((8191&(_=(_=_+Math.imul(be,Pt)|0)+Math.imul(Ie,wt)|0))<<13)|0;D=((j=j+Math.imul(Ie,Pt)|0)+(_>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,w=Math.imul(ve,Qe),_=(_=Math.imul(ve,he))+Math.imul(He,Qe)|0,j=Math.imul(He,he),w=w+Math.imul(ie,Ne)|0,_=(_=_+Math.imul(ie,tt)|0)+Math.imul(ae,Ne)|0,j=j+Math.imul(ae,tt)|0,w=w+Math.imul(Ae,dt)|0,_=(_=_+Math.imul(Ae,kt)|0)+Math.imul(st,dt)|0,j=j+Math.imul(st,kt)|0;var Qt=(D+(w=w+Math.imul(Oe,wt)|0)|0)+((8191&(_=(_=_+Math.imul(Oe,Pt)|0)+Math.imul(Ee,wt)|0))<<13)|0;D=((j=j+Math.imul(Ee,Pt)|0)+(_>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,w=Math.imul(ve,Ne),_=(_=Math.imul(ve,tt))+Math.imul(He,Ne)|0,j=Math.imul(He,tt),w=w+Math.imul(ie,dt)|0,_=(_=_+Math.imul(ie,kt)|0)+Math.imul(ae,dt)|0,j=j+Math.imul(ae,kt)|0;var Gt=(D+(w=w+Math.imul(Ae,wt)|0)|0)+((8191&(_=(_=_+Math.imul(Ae,Pt)|0)+Math.imul(st,wt)|0))<<13)|0;D=((j=j+Math.imul(st,Pt)|0)+(_>>>13)|0)+(Gt>>>26)|0,Gt&=67108863,w=Math.imul(ve,dt),_=(_=Math.imul(ve,kt))+Math.imul(He,dt)|0,j=Math.imul(He,kt);var Ut=(D+(w=w+Math.imul(ie,wt)|0)|0)+((8191&(_=(_=_+Math.imul(ie,Pt)|0)+Math.imul(ae,wt)|0))<<13)|0;D=((j=j+Math.imul(ae,Pt)|0)+(_>>>13)|0)+(Ut>>>26)|0,Ut&=67108863;var gs=(D+(w=Math.imul(ve,wt))|0)+((8191&(_=(_=Math.imul(ve,Pt))+Math.imul(He,wt)|0))<<13)|0;return D=((j=Math.imul(He,Pt))+(_>>>13)|0)+(gs>>>26)|0,gs&=67108863,I[0]=bt,I[1]=yt,I[2]=Ge,I[3]=J,I[4]=ce,I[5]=Je,I[6]=ht,I[7]=le,I[8]=Le,I[9]=rt,I[10]=pt,I[11]=Tt,I[12]=vt,I[13]=_t,I[14]=Bt,I[15]=Qt,I[16]=Gt,I[17]=Ut,I[18]=gs,D!==0&&(I[19]=D,S.length++),S};function b(k,R,S){return new C().mulp(k,R,S)}function C(k,R){this.x=k,this.y=R}Math.imul||(y=v),i.prototype.mulTo=function(k,R){var S=this.length+k.length;return this.length===10&&k.length===10?y(this,k,R):S<63?v(this,k,R):S<1024?function(w,_,j){j.negative=_.negative^w.negative,j.length=w.length+_.length;for(var N=0,E=0,I=0;I<j.length-1;I++){var D=E;E=0;for(var V=67108863&N,H=Math.min(I,_.length-1),G=Math.max(0,I-w.length+1);G<=H;G++){var $=I-G,Y=(0|w.words[$])*(0|_.words[G]),F=67108863&Y;V=67108863&(F=F+V|0),E+=(D=(D=D+(Y/67108864|0)|0)+(F>>>26)|0)>>>26,D&=67108863}j.words[I]=V,N=D,D=E}return N!==0?j.words[I]=N:j.length--,j.strip()}(this,k,R):b(this,k,R)},C.prototype.makeRBT=function(k){for(var R=new Array(k),S=i.prototype._countBits(k)-1,w=0;w<k;w++)R[w]=this.revBin(w,S,k);return R},C.prototype.revBin=function(k,R,S){if(k===0||k===S-1)return k;for(var w=0,_=0;_<R;_++)w|=(1&k)<<R-_-1,k>>=1;return w},C.prototype.permute=function(k,R,S,w,_,j){for(var N=0;N<j;N++)w[N]=R[k[N]],_[N]=S[k[N]]},C.prototype.transform=function(k,R,S,w,_,j){this.permute(j,k,R,S,w,_);for(var N=1;N<_;N<<=1)for(var E=N<<1,I=Math.cos(2*Math.PI/E),D=Math.sin(2*Math.PI/E),V=0;V<_;V+=E)for(var H=I,G=D,$=0;$<N;$++){var Y=S[V+$],F=w[V+$],O=S[V+$+N],W=w[V+$+N],K=H*O-G*W;W=H*W+G*O,O=K,S[V+$]=Y+O,w[V+$]=F+W,S[V+$+N]=Y-O,w[V+$+N]=F-W,$!==E&&(K=I*H-D*G,G=I*G+D*H,H=K)}},C.prototype.guessLen13b=function(k,R){var S=1|Math.max(R,k),w=1&S,_=0;for(S=S/2|0;S;S>>>=1)_++;return 1<<_+1+w},C.prototype.conjugate=function(k,R,S){if(!(S<=1))for(var w=0;w<S/2;w++){var _=k[w];k[w]=k[S-w-1],k[S-w-1]=_,_=R[w],R[w]=-R[S-w-1],R[S-w-1]=-_}},C.prototype.normalize13b=function(k,R){for(var S=0,w=0;w<R/2;w++){var _=8192*Math.round(k[2*w+1]/R)+Math.round(k[2*w]/R)+S;k[w]=67108863&_,S=_<67108864?0:_/67108864|0}return k},C.prototype.convert13b=function(k,R,S,w){for(var _=0,j=0;j<R;j++)_+=0|k[j],S[2*j]=8191&_,_>>>=13,S[2*j+1]=8191&_,_>>>=13;for(j=2*R;j<w;++j)S[j]=0;d(_===0),d((-8192&_)==0)},C.prototype.stub=function(k){for(var R=new Array(k),S=0;S<k;S++)R[S]=0;return R},C.prototype.mulp=function(k,R,S){var w=2*this.guessLen13b(k.length,R.length),_=this.makeRBT(w),j=this.stub(w),N=new Array(w),E=new Array(w),I=new Array(w),D=new Array(w),V=new Array(w),H=new Array(w),G=S.words;G.length=w,this.convert13b(k.words,k.length,N,w),this.convert13b(R.words,R.length,D,w),this.transform(N,j,E,I,w,_),this.transform(D,j,V,H,w,_);for(var $=0;$<w;$++){var Y=E[$]*V[$]-I[$]*H[$];I[$]=E[$]*H[$]+I[$]*V[$],E[$]=Y}return this.conjugate(E,I,w),this.transform(E,I,G,j,w,_),this.conjugate(G,j,w),this.normalize13b(G,w),S.negative=k.negative^R.negative,S.length=k.length+R.length,S.strip()},i.prototype.mul=function(k){var R=new i(null);return R.words=new Array(this.length+k.length),this.mulTo(k,R)},i.prototype.mulf=function(k){var R=new i(null);return R.words=new Array(this.length+k.length),b(this,k,R)},i.prototype.imul=function(k){return this.clone().mulTo(k,this)},i.prototype.imuln=function(k){d(typeof k=="number"),d(k<67108864);for(var R=0,S=0;S<this.length;S++){var w=(0|this.words[S])*k,_=(67108863&w)+(67108863&R);R>>=26,R+=w/67108864|0,R+=_>>>26,this.words[S]=67108863&_}return R!==0&&(this.words[S]=R,this.length++),this},i.prototype.muln=function(k){return this.clone().imuln(k)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(k){var R=function(j){for(var N=new Array(j.bitLength()),E=0;E<N.length;E++){var I=E/26|0,D=E%26;N[E]=(j.words[I]&1<<D)>>>D}return N}(k);if(R.length===0)return new i(1);for(var S=this,w=0;w<R.length&&R[w]===0;w++,S=S.sqr());if(++w<R.length)for(var _=S.sqr();w<R.length;w++,_=_.sqr())R[w]!==0&&(S=S.mul(_));return S},i.prototype.iushln=function(k){d(typeof k=="number"&&k>=0);var R,S=k%26,w=(k-S)/26,_=67108863>>>26-S<<26-S;if(S!==0){var j=0;for(R=0;R<this.length;R++){var N=this.words[R]&_,E=(0|this.words[R])-N<<S;this.words[R]=E|j,j=N>>>26-S}j&&(this.words[R]=j,this.length++)}if(w!==0){for(R=this.length-1;R>=0;R--)this.words[R+w]=this.words[R];for(R=0;R<w;R++)this.words[R]=0;this.length+=w}return this.strip()},i.prototype.ishln=function(k){return d(this.negative===0),this.iushln(k)},i.prototype.iushrn=function(k,R,S){var w;d(typeof k=="number"&&k>=0),w=R?(R-R%26)/26:0;var _=k%26,j=Math.min((k-_)/26,this.length),N=67108863^67108863>>>_<<_,E=S;if(w-=j,w=Math.max(0,w),E){for(var I=0;I<j;I++)E.words[I]=this.words[I];E.length=j}if(j!==0)if(this.length>j)for(this.length-=j,I=0;I<this.length;I++)this.words[I]=this.words[I+j];else this.words[0]=0,this.length=1;var D=0;for(I=this.length-1;I>=0&&(D!==0||I>=w);I--){var V=0|this.words[I];this.words[I]=D<<26-_|V>>>_,D=V&N}return E&&D!==0&&(E.words[E.length++]=D),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(k,R,S){return d(this.negative===0),this.iushrn(k,R,S)},i.prototype.shln=function(k){return this.clone().ishln(k)},i.prototype.ushln=function(k){return this.clone().iushln(k)},i.prototype.shrn=function(k){return this.clone().ishrn(k)},i.prototype.ushrn=function(k){return this.clone().iushrn(k)},i.prototype.testn=function(k){d(typeof k=="number"&&k>=0);var R=k%26,S=(k-R)/26,w=1<<R;return!(this.length<=S)&&!!(this.words[S]&w)},i.prototype.imaskn=function(k){d(typeof k=="number"&&k>=0);var R=k%26,S=(k-R)/26;if(d(this.negative===0,"imaskn works only with positive numbers"),this.length<=S)return this;if(R!==0&&S++,this.length=Math.min(S,this.length),R!==0){var w=67108863^67108863>>>R<<R;this.words[this.length-1]&=w}return this.strip()},i.prototype.maskn=function(k){return this.clone().imaskn(k)},i.prototype.iaddn=function(k){return d(typeof k=="number"),d(k<67108864),k<0?this.isubn(-k):this.negative!==0?this.length===1&&(0|this.words[0])<k?(this.words[0]=k-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(k),this.negative=1,this):this._iaddn(k)},i.prototype._iaddn=function(k){this.words[0]+=k;for(var R=0;R<this.length&&this.words[R]>=67108864;R++)this.words[R]-=67108864,R===this.length-1?this.words[R+1]=1:this.words[R+1]++;return this.length=Math.max(this.length,R+1),this},i.prototype.isubn=function(k){if(d(typeof k=="number"),d(k<67108864),k<0)return this.iaddn(-k);if(this.negative!==0)return this.negative=0,this.iaddn(k),this.negative=1,this;if(this.words[0]-=k,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var R=0;R<this.length&&this.words[R]<0;R++)this.words[R]+=67108864,this.words[R+1]-=1;return this.strip()},i.prototype.addn=function(k){return this.clone().iaddn(k)},i.prototype.subn=function(k){return this.clone().isubn(k)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(k,R,S){var w,_,j=k.length+S;this._expand(j);var N=0;for(w=0;w<k.length;w++){_=(0|this.words[w+S])+N;var E=(0|k.words[w])*R;N=((_-=67108863&E)>>26)-(E/67108864|0),this.words[w+S]=67108863&_}for(;w<this.length-S;w++)N=(_=(0|this.words[w+S])+N)>>26,this.words[w+S]=67108863&_;if(N===0)return this.strip();for(d(N===-1),N=0,w=0;w<this.length;w++)N=(_=-(0|this.words[w])+N)>>26,this.words[w]=67108863&_;return this.negative=1,this.strip()},i.prototype._wordDiv=function(k,R){var S=(this.length,k.length),w=this.clone(),_=k,j=0|_.words[_.length-1];(S=26-this._countBits(j))!==0&&(_=_.ushln(S),w.iushln(S),j=0|_.words[_.length-1]);var N,E=w.length-_.length;if(R!=="mod"){(N=new i(null)).length=E+1,N.words=new Array(N.length);for(var I=0;I<N.length;I++)N.words[I]=0}var D=w.clone()._ishlnsubmul(_,1,E);D.negative===0&&(w=D,N&&(N.words[E]=1));for(var V=E-1;V>=0;V--){var H=67108864*(0|w.words[_.length+V])+(0|w.words[_.length+V-1]);for(H=Math.min(H/j|0,67108863),w._ishlnsubmul(_,H,V);w.negative!==0;)H--,w.negative=0,w._ishlnsubmul(_,1,V),w.isZero()||(w.negative^=1);N&&(N.words[V]=H)}return N&&N.strip(),w.strip(),R!=="div"&&S!==0&&w.iushrn(S),{div:N||null,mod:w}},i.prototype.divmod=function(k,R,S){return d(!k.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:this.negative!==0&&k.negative===0?(j=this.neg().divmod(k,R),R!=="mod"&&(w=j.div.neg()),R!=="div"&&(_=j.mod.neg(),S&&_.negative!==0&&_.iadd(k)),{div:w,mod:_}):this.negative===0&&k.negative!==0?(j=this.divmod(k.neg(),R),R!=="mod"&&(w=j.div.neg()),{div:w,mod:j.mod}):this.negative&k.negative?(j=this.neg().divmod(k.neg(),R),R!=="div"&&(_=j.mod.neg(),S&&_.negative!==0&&_.isub(k)),{div:j.div,mod:_}):k.length>this.length||this.cmp(k)<0?{div:new i(0),mod:this}:k.length===1?R==="div"?{div:this.divn(k.words[0]),mod:null}:R==="mod"?{div:null,mod:new i(this.modn(k.words[0]))}:{div:this.divn(k.words[0]),mod:new i(this.modn(k.words[0]))}:this._wordDiv(k,R);var w,_,j},i.prototype.div=function(k){return this.divmod(k,"div",!1).div},i.prototype.mod=function(k){return this.divmod(k,"mod",!1).mod},i.prototype.umod=function(k){return this.divmod(k,"mod",!0).mod},i.prototype.divRound=function(k){var R=this.divmod(k);if(R.mod.isZero())return R.div;var S=R.div.negative!==0?R.mod.isub(k):R.mod,w=k.ushrn(1),_=k.andln(1),j=S.cmp(w);return j<0||_===1&&j===0?R.div:R.div.negative!==0?R.div.isubn(1):R.div.iaddn(1)},i.prototype.modn=function(k){d(k<=67108863);for(var R=(1<<26)%k,S=0,w=this.length-1;w>=0;w--)S=(R*S+(0|this.words[w]))%k;return S},i.prototype.idivn=function(k){d(k<=67108863);for(var R=0,S=this.length-1;S>=0;S--){var w=(0|this.words[S])+67108864*R;this.words[S]=w/k|0,R=w%k}return this.strip()},i.prototype.divn=function(k){return this.clone().idivn(k)},i.prototype.egcd=function(k){d(k.negative===0),d(!k.isZero());var R=this,S=k.clone();R=R.negative!==0?R.umod(k):R.clone();for(var w=new i(1),_=new i(0),j=new i(0),N=new i(1),E=0;R.isEven()&&S.isEven();)R.iushrn(1),S.iushrn(1),++E;for(var I=S.clone(),D=R.clone();!R.isZero();){for(var V=0,H=1;!(R.words[0]&H)&&V<26;++V,H<<=1);if(V>0)for(R.iushrn(V);V-- >0;)(w.isOdd()||_.isOdd())&&(w.iadd(I),_.isub(D)),w.iushrn(1),_.iushrn(1);for(var G=0,$=1;!(S.words[0]&$)&&G<26;++G,$<<=1);if(G>0)for(S.iushrn(G);G-- >0;)(j.isOdd()||N.isOdd())&&(j.iadd(I),N.isub(D)),j.iushrn(1),N.iushrn(1);R.cmp(S)>=0?(R.isub(S),w.isub(j),_.isub(N)):(S.isub(R),j.isub(w),N.isub(_))}return{a:j,b:N,gcd:S.iushln(E)}},i.prototype._invmp=function(k){d(k.negative===0),d(!k.isZero());var R=this,S=k.clone();R=R.negative!==0?R.umod(k):R.clone();for(var w,_=new i(1),j=new i(0),N=S.clone();R.cmpn(1)>0&&S.cmpn(1)>0;){for(var E=0,I=1;!(R.words[0]&I)&&E<26;++E,I<<=1);if(E>0)for(R.iushrn(E);E-- >0;)_.isOdd()&&_.iadd(N),_.iushrn(1);for(var D=0,V=1;!(S.words[0]&V)&&D<26;++D,V<<=1);if(D>0)for(S.iushrn(D);D-- >0;)j.isOdd()&&j.iadd(N),j.iushrn(1);R.cmp(S)>=0?(R.isub(S),_.isub(j)):(S.isub(R),j.isub(_))}return(w=R.cmpn(1)===0?_:j).cmpn(0)<0&&w.iadd(k),w},i.prototype.gcd=function(k){if(this.isZero())return k.abs();if(k.isZero())return this.abs();var R=this.clone(),S=k.clone();R.negative=0,S.negative=0;for(var w=0;R.isEven()&&S.isEven();w++)R.iushrn(1),S.iushrn(1);for(;;){for(;R.isEven();)R.iushrn(1);for(;S.isEven();)S.iushrn(1);var _=R.cmp(S);if(_<0){var j=R;R=S,S=j}else if(_===0||S.cmpn(1)===0)break;R.isub(S)}return S.iushln(w)},i.prototype.invm=function(k){return this.egcd(k).a.umod(k)},i.prototype.isEven=function(){return(1&this.words[0])==0},i.prototype.isOdd=function(){return(1&this.words[0])==1},i.prototype.andln=function(k){return this.words[0]&k},i.prototype.bincn=function(k){d(typeof k=="number");var R=k%26,S=(k-R)/26,w=1<<R;if(this.length<=S)return this._expand(S+1),this.words[S]|=w,this;for(var _=w,j=S;_!==0&&j<this.length;j++){var N=0|this.words[j];_=(N+=_)>>>26,N&=67108863,this.words[j]=N}return _!==0&&(this.words[j]=_,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(k){var R,S=k<0;if(this.negative!==0&&!S)return-1;if(this.negative===0&&S)return 1;if(this.strip(),this.length>1)R=1;else{S&&(k=-k),d(k<=67108863,"Number is too big");var w=0|this.words[0];R=w===k?0:w<k?-1:1}return this.negative!==0?0|-R:R},i.prototype.cmp=function(k){if(this.negative!==0&&k.negative===0)return-1;if(this.negative===0&&k.negative!==0)return 1;var R=this.ucmp(k);return this.negative!==0?0|-R:R},i.prototype.ucmp=function(k){if(this.length>k.length)return 1;if(this.length<k.length)return-1;for(var R=0,S=this.length-1;S>=0;S--){var w=0|this.words[S],_=0|k.words[S];if(w!==_){w<_?R=-1:w>_&&(R=1);break}}return R},i.prototype.gtn=function(k){return this.cmpn(k)===1},i.prototype.gt=function(k){return this.cmp(k)===1},i.prototype.gten=function(k){return this.cmpn(k)>=0},i.prototype.gte=function(k){return this.cmp(k)>=0},i.prototype.ltn=function(k){return this.cmpn(k)===-1},i.prototype.lt=function(k){return this.cmp(k)===-1},i.prototype.lten=function(k){return this.cmpn(k)<=0},i.prototype.lte=function(k){return this.cmp(k)<=0},i.prototype.eqn=function(k){return this.cmpn(k)===0},i.prototype.eq=function(k){return this.cmp(k)===0},i.red=function(k){return new q(k)},i.prototype.toRed=function(k){return d(!this.red,"Already a number in reduction context"),d(this.negative===0,"red works only with positives"),k.convertTo(this)._forceRed(k)},i.prototype.fromRed=function(){return d(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(k){return this.red=k,this},i.prototype.forceRed=function(k){return d(!this.red,"Already a number in reduction context"),this._forceRed(k)},i.prototype.redAdd=function(k){return d(this.red,"redAdd works only with red numbers"),this.red.add(this,k)},i.prototype.redIAdd=function(k){return d(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,k)},i.prototype.redSub=function(k){return d(this.red,"redSub works only with red numbers"),this.red.sub(this,k)},i.prototype.redISub=function(k){return d(this.red,"redISub works only with red numbers"),this.red.isub(this,k)},i.prototype.redShl=function(k){return d(this.red,"redShl works only with red numbers"),this.red.shl(this,k)},i.prototype.redMul=function(k){return d(this.red,"redMul works only with red numbers"),this.red._verify2(this,k),this.red.mul(this,k)},i.prototype.redIMul=function(k){return d(this.red,"redMul works only with red numbers"),this.red._verify2(this,k),this.red.imul(this,k)},i.prototype.redSqr=function(){return d(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return d(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return d(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return d(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return d(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(k){return d(this.red&&!k.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,k)};var T={k256:null,p224:null,p192:null,p25519:null};function M(k,R){this.name=k,this.p=new i(R,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function U(){M.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function L(){M.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function P(){M.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function B(){M.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function q(k){if(typeof k=="string"){var R=i._prime(k);this.m=R.p,this.prime=R}else d(k.gtn(1),"modulus must be greater than 1"),this.m=k,this.prime=null}function z(k){q.call(this,k),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}M.prototype._tmp=function(){var k=new i(null);return k.words=new Array(Math.ceil(this.n/13)),k},M.prototype.ireduce=function(k){var R,S=k;do this.split(S,this.tmp),R=(S=(S=this.imulK(S)).iadd(this.tmp)).bitLength();while(R>this.n);var w=R<this.n?-1:S.ucmp(this.p);return w===0?(S.words[0]=0,S.length=1):w>0?S.isub(this.p):S.strip!==void 0?S.strip():S._strip(),S},M.prototype.split=function(k,R){k.iushrn(this.n,0,R)},M.prototype.imulK=function(k){return k.imul(this.k)},l(U,M),U.prototype.split=function(k,R){for(var S=Math.min(k.length,9),w=0;w<S;w++)R.words[w]=k.words[w];if(R.length=S,k.length<=9)return k.words[0]=0,void(k.length=1);var _=k.words[9];for(R.words[R.length++]=4194303&_,w=10;w<k.length;w++){var j=0|k.words[w];k.words[w-10]=(4194303&j)<<4|_>>>22,_=j}_>>>=22,k.words[w-10]=_,_===0&&k.length>10?k.length-=10:k.length-=9},U.prototype.imulK=function(k){k.words[k.length]=0,k.words[k.length+1]=0,k.length+=2;for(var R=0,S=0;S<k.length;S++){var w=0|k.words[S];R+=977*w,k.words[S]=67108863&R,R=64*w+(R/67108864|0)}return k.words[k.length-1]===0&&(k.length--,k.words[k.length-1]===0&&k.length--),k},l(L,M),l(P,M),l(B,M),B.prototype.imulK=function(k){for(var R=0,S=0;S<k.length;S++){var w=19*(0|k.words[S])+R,_=67108863&w;w>>>=26,k.words[S]=_,R=w}return R!==0&&(k.words[k.length++]=R),k},i._prime=function(k){if(T[k])return T[k];var R;if(k==="k256")R=new U;else if(k==="p224")R=new L;else if(k==="p192")R=new P;else{if(k!=="p25519")throw new Error("Unknown prime "+k);R=new B}return T[k]=R,R},q.prototype._verify1=function(k){d(k.negative===0,"red works only with positives"),d(k.red,"red works only with red numbers")},q.prototype._verify2=function(k,R){d((k.negative|R.negative)==0,"red works only with positives"),d(k.red&&k.red===R.red,"red works only with red numbers")},q.prototype.imod=function(k){return this.prime?this.prime.ireduce(k)._forceRed(this):k.umod(this.m)._forceRed(this)},q.prototype.neg=function(k){return k.isZero()?k.clone():this.m.sub(k)._forceRed(this)},q.prototype.add=function(k,R){this._verify2(k,R);var S=k.add(R);return S.cmp(this.m)>=0&&S.isub(this.m),S._forceRed(this)},q.prototype.iadd=function(k,R){this._verify2(k,R);var S=k.iadd(R);return S.cmp(this.m)>=0&&S.isub(this.m),S},q.prototype.sub=function(k,R){this._verify2(k,R);var S=k.sub(R);return S.cmpn(0)<0&&S.iadd(this.m),S._forceRed(this)},q.prototype.isub=function(k,R){this._verify2(k,R);var S=k.isub(R);return S.cmpn(0)<0&&S.iadd(this.m),S},q.prototype.shl=function(k,R){return this._verify1(k),this.imod(k.ushln(R))},q.prototype.imul=function(k,R){return this._verify2(k,R),this.imod(k.imul(R))},q.prototype.mul=function(k,R){return this._verify2(k,R),this.imod(k.mul(R))},q.prototype.isqr=function(k){return this.imul(k,k.clone())},q.prototype.sqr=function(k){return this.mul(k,k)},q.prototype.sqrt=function(k){if(k.isZero())return k.clone();var R=this.m.andln(3);if(d(R%2==1),R===3){var S=this.m.add(new i(1)).iushrn(2);return this.pow(k,S)}for(var w=this.m.subn(1),_=0;!w.isZero()&&w.andln(1)===0;)_++,w.iushrn(1);d(!w.isZero());var j=new i(1).toRed(this),N=j.redNeg(),E=this.m.subn(1).iushrn(1),I=this.m.bitLength();for(I=new i(2*I*I).toRed(this);this.pow(I,E).cmp(N)!==0;)I.redIAdd(N);for(var D=this.pow(I,w),V=this.pow(k,w.addn(1).iushrn(1)),H=this.pow(k,w),G=_;H.cmp(j)!==0;){for(var $=H,Y=0;$.cmp(j)!==0;Y++)$=$.redSqr();d(Y<G);var F=this.pow(D,new i(1).iushln(G-Y-1));V=V.redMul(F),D=F.redSqr(),H=H.redMul(D),G=Y}return V},q.prototype.invm=function(k){var R=k._invmp(this.m);return R.negative!==0?(R.negative=0,this.imod(R).redNeg()):this.imod(R)},q.prototype.pow=function(k,R){if(R.isZero())return new i(1).toRed(this);if(R.cmpn(1)===0)return k.clone();var S=new Array(16);S[0]=new i(1).toRed(this),S[1]=k;for(var w=2;w<S.length;w++)S[w]=this.mul(S[w-1],k);var _=S[0],j=0,N=0,E=R.bitLength()%26;for(E===0&&(E=26),w=R.length-1;w>=0;w--){for(var I=R.words[w],D=E-1;D>=0;D--){var V=I>>D&1;_!==S[0]&&(_=this.sqr(_)),V!==0||j!==0?(j<<=1,j|=V,(++N===4||w===0&&D===0)&&(_=this.mul(_,S[j]),N=0,j=0)):N=0}E=26}return _},q.prototype.convertTo=function(k){var R=k.umod(this.m);return R===k?R.clone():R},q.prototype.convertFrom=function(k){var R=k.clone();return R.red=null,R},i.mont=function(k){return new z(k)},l(z,q),z.prototype.convertTo=function(k){return this.imod(k.ushln(this.shift))},z.prototype.convertFrom=function(k){var R=this.imod(k.mul(this.rinv));return R.red=null,R},z.prototype.imul=function(k,R){if(k.isZero()||R.isZero())return k.words[0]=0,k.length=1,k;var S=k.imul(R),w=S.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),_=S.isub(w).iushrn(this.shift),j=_;return _.cmp(this.m)>=0?j=_.isub(this.m):_.cmpn(0)<0&&(j=_.iadd(this.m)),j._forceRed(this)},z.prototype.mul=function(k,R){if(k.isZero()||R.isZero())return new i(0)._forceRed(this);var S=k.mul(R),w=S.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),_=S.isub(w).iushrn(this.shift),j=_;return _.cmp(this.m)>=0?j=_.isub(this.m):_.cmpn(0)<0&&(j=_.iadd(this.m)),j._forceRed(this)},z.prototype.invm=function(k){return this.imod(k._invmp(this.m).mul(this.r2))._forceRed(this)}})(n===void 0||n)},{buffer:188}],185:[function(s,n,c){c.byteLength=function(m){var p=f(m),x=p[0],g=p[1];return 3*(x+g)/4-g},c.toByteArray=function(m){var p,x,g=f(m),v=g[0],y=g[1],b=new d(function(M,U,L){return 3*(U+L)/4-L}(0,v,y)),C=0,T=y>0?v-4:v;for(x=0;x<T;x+=4)p=a[m.charCodeAt(x)]<<18|a[m.charCodeAt(x+1)]<<12|a[m.charCodeAt(x+2)]<<6|a[m.charCodeAt(x+3)],b[C++]=p>>16&255,b[C++]=p>>8&255,b[C++]=255&p;return y===2&&(p=a[m.charCodeAt(x)]<<2|a[m.charCodeAt(x+1)]>>4,b[C++]=255&p),y===1&&(p=a[m.charCodeAt(x)]<<10|a[m.charCodeAt(x+1)]<<4|a[m.charCodeAt(x+2)]>>2,b[C++]=p>>8&255,b[C++]=255&p),b},c.fromByteArray=function(m){for(var p,x=m.length,g=x%3,v=[],y=0,b=x-g;y<b;y+=16383)v.push(h(m,y,y+16383>b?b:y+16383));return g===1?(p=m[x-1],v.push(o[p>>2]+o[p<<4&63]+"==")):g===2&&(p=(m[x-2]<<8)+m[x-1],v.push(o[p>>10]+o[p>>4&63]+o[p<<2&63]+"=")),v.join("")};for(var o=[],a=[],d=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,u=l.length;i<u;++i)o[i]=l[i],a[l.charCodeAt(i)]=i;function f(m){var p=m.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var x=m.indexOf("=");return x===-1&&(x=p),[x,x===p?0:4-x%4]}function h(m,p,x){for(var g,v,y=[],b=p;b<x;b+=3)g=(m[b]<<16&16711680)+(m[b+1]<<8&65280)+(255&m[b+2]),y.push(o[(v=g)>>18&63]+o[v>>12&63]+o[v>>6&63]+o[63&v]);return y.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},{}],186:[function(s,n,c){(function(o,a){function d(S,w){if(!S)throw new Error(w||"Assertion failed")}function l(S,w){S.super_=w;var _=function(){};_.prototype=w.prototype,S.prototype=new _,S.prototype.constructor=S}function i(S,w,_){if(i.isBN(S))return S;this.negative=0,this.words=null,this.length=0,this.red=null,S!==null&&(w!=="le"&&w!=="be"||(_=w,w=10),this._init(S||0,w||10,_||"be"))}var u;typeof o=="object"?o.exports=i:(void 0).BN=i,i.BN=i,i.wordSize=26;try{u=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:s("buffer").Buffer}catch{}function f(S,w){var _=S.charCodeAt(w);return _>=48&&_<=57?_-48:_>=65&&_<=70?_-55:_>=97&&_<=102?_-87:void d(!1,"Invalid character in "+S)}function h(S,w,_){var j=f(S,_);return _-1>=w&&(j|=f(S,_-1)<<4),j}function m(S,w,_,j){for(var N=0,E=0,I=Math.min(S.length,_),D=w;D<I;D++){var V=S.charCodeAt(D)-48;N*=j,E=V>=49?V-49+10:V>=17?V-17+10:V,d(V>=0&&E<j,"Invalid character"),N+=E}return N}function p(S,w){S.words=w.words,S.length=w.length,S.negative=w.negative,S.red=w.red}if(i.isBN=function(S){return S instanceof i||S!==null&&typeof S=="object"&&S.constructor.wordSize===i.wordSize&&Array.isArray(S.words)},i.max=function(S,w){return S.cmp(w)>0?S:w},i.min=function(S,w){return S.cmp(w)<0?S:w},i.prototype._init=function(S,w,_){if(typeof S=="number")return this._initNumber(S,w,_);if(typeof S=="object")return this._initArray(S,w,_);w==="hex"&&(w=16),d(w===(0|w)&&w>=2&&w<=36);var j=0;(S=S.toString().replace(/\s+/g,""))[0]==="-"&&(j++,this.negative=1),j<S.length&&(w===16?this._parseHex(S,j,_):(this._parseBase(S,w,j),_==="le"&&this._initArray(this.toArray(),w,_)))},i.prototype._initNumber=function(S,w,_){S<0&&(this.negative=1,S=-S),S<67108864?(this.words=[67108863&S],this.length=1):S<4503599627370496?(this.words=[67108863&S,S/67108864&67108863],this.length=2):(d(S<9007199254740992),this.words=[67108863&S,S/67108864&67108863,1],this.length=3),_==="le"&&this._initArray(this.toArray(),w,_)},i.prototype._initArray=function(S,w,_){if(d(typeof S.length=="number"),S.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(S.length/3),this.words=new Array(this.length);for(var j=0;j<this.length;j++)this.words[j]=0;var N,E,I=0;if(_==="be")for(j=S.length-1,N=0;j>=0;j-=3)E=S[j]|S[j-1]<<8|S[j-2]<<16,this.words[N]|=E<<I&67108863,this.words[N+1]=E>>>26-I&67108863,(I+=24)>=26&&(I-=26,N++);else if(_==="le")for(j=0,N=0;j<S.length;j+=3)E=S[j]|S[j+1]<<8|S[j+2]<<16,this.words[N]|=E<<I&67108863,this.words[N+1]=E>>>26-I&67108863,(I+=24)>=26&&(I-=26,N++);return this._strip()},i.prototype._parseHex=function(S,w,_){this.length=Math.ceil((S.length-w)/6),this.words=new Array(this.length);for(var j=0;j<this.length;j++)this.words[j]=0;var N,E=0,I=0;if(_==="be")for(j=S.length-1;j>=w;j-=2)N=h(S,w,j)<<E,this.words[I]|=67108863&N,E>=18?(E-=18,I+=1,this.words[I]|=N>>>26):E+=8;else for(j=(S.length-w)%2==0?w+1:w;j<S.length;j+=2)N=h(S,w,j)<<E,this.words[I]|=67108863&N,E>=18?(E-=18,I+=1,this.words[I]|=N>>>26):E+=8;this._strip()},i.prototype._parseBase=function(S,w,_){this.words=[0],this.length=1;for(var j=0,N=1;N<=67108863;N*=w)j++;j--,N=N/w|0;for(var E=S.length-_,I=E%j,D=Math.min(E,E-I)+_,V=0,H=_;H<D;H+=j)V=m(S,H,H+j,w),this.imuln(N),this.words[0]+V<67108864?this.words[0]+=V:this._iaddn(V);if(I!==0){var G=1;for(V=m(S,H,S.length,w),H=0;H<I;H++)G*=w;this.imuln(G),this.words[0]+V<67108864?this.words[0]+=V:this._iaddn(V)}this._strip()},i.prototype.copy=function(S){S.words=new Array(this.length);for(var w=0;w<this.length;w++)S.words[w]=this.words[w];S.length=this.length,S.negative=this.negative,S.red=this.red},i.prototype._move=function(S){p(S,this)},i.prototype.clone=function(){var S=new i(null);return this.copy(S),S},i.prototype._expand=function(S){for(;this.length<S;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=x}catch{i.prototype.inspect=x}else i.prototype.inspect=x;function x(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],v=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(S,w){var _;if(w=0|w||1,(S=S||10)===16||S==="hex"){_="";for(var j=0,N=0,E=0;E<this.length;E++){var I=this.words[E],D=(16777215&(I<<j|N)).toString(16);N=I>>>24-j&16777215,(j+=2)>=26&&(j-=26,E--),_=N!==0||E!==this.length-1?g[6-D.length]+D+_:D+_}for(N!==0&&(_=N.toString(16)+_);_.length%w!=0;)_="0"+_;return this.negative!==0&&(_="-"+_),_}if(S===(0|S)&&S>=2&&S<=36){var V=v[S],H=y[S];_="";var G=this.clone();for(G.negative=0;!G.isZero();){var $=G.modrn(H).toString(S);_=(G=G.idivn(H)).isZero()?$+_:g[V-$.length]+$+_}for(this.isZero()&&(_="0"+_);_.length%w!=0;)_="0"+_;return this.negative!==0&&(_="-"+_),_}d(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var S=this.words[0];return this.length===2?S+=67108864*this.words[1]:this.length===3&&this.words[2]===1?S+=4503599627370496+67108864*this.words[1]:this.length>2&&d(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-S:S},i.prototype.toJSON=function(){return this.toString(16,2)},u&&(i.prototype.toBuffer=function(S,w){return this.toArrayLike(u,S,w)}),i.prototype.toArray=function(S,w){return this.toArrayLike(Array,S,w)};function b(S,w,_){_.negative=w.negative^S.negative;var j=S.length+w.length|0;_.length=j,j=j-1|0;var N=0|S.words[0],E=0|w.words[0],I=N*E,D=67108863&I,V=I/67108864|0;_.words[0]=D;for(var H=1;H<j;H++){for(var G=V>>>26,$=67108863&V,Y=Math.min(H,w.length-1),F=Math.max(0,H-S.length+1);F<=Y;F++){var O=H-F|0;G+=(I=(N=0|S.words[O])*(E=0|w.words[F])+$)/67108864|0,$=67108863&I}_.words[H]=0|$,V=0|G}return V!==0?_.words[H]=0|V:_.length--,_._strip()}i.prototype.toArrayLike=function(S,w,_){this._strip();var j=this.byteLength(),N=_||Math.max(1,j);d(j<=N,"byte array longer than desired length"),d(N>0,"Requested array length <= 0");var E=function(I,D){return I.allocUnsafe?I.allocUnsafe(D):new I(D)}(S,N);return this["_toArrayLike"+(w==="le"?"LE":"BE")](E,j),E},i.prototype._toArrayLikeLE=function(S,w){for(var _=0,j=0,N=0,E=0;N<this.length;N++){var I=this.words[N]<<E|j;S[_++]=255&I,_<S.length&&(S[_++]=I>>8&255),_<S.length&&(S[_++]=I>>16&255),E===6?(_<S.length&&(S[_++]=I>>24&255),j=0,E=0):(j=I>>>24,E+=2)}if(_<S.length)for(S[_++]=j;_<S.length;)S[_++]=0},i.prototype._toArrayLikeBE=function(S,w){for(var _=S.length-1,j=0,N=0,E=0;N<this.length;N++){var I=this.words[N]<<E|j;S[_--]=255&I,_>=0&&(S[_--]=I>>8&255),_>=0&&(S[_--]=I>>16&255),E===6?(_>=0&&(S[_--]=I>>24&255),j=0,E=0):(j=I>>>24,E+=2)}if(_>=0)for(S[_--]=j;_>=0;)S[_--]=0},Math.clz32?i.prototype._countBits=function(S){return 32-Math.clz32(S)}:i.prototype._countBits=function(S){var w=S,_=0;return w>=4096&&(_+=13,w>>>=13),w>=64&&(_+=7,w>>>=7),w>=8&&(_+=4,w>>>=4),w>=2&&(_+=2,w>>>=2),_+w},i.prototype._zeroBits=function(S){if(S===0)return 26;var w=S,_=0;return!(8191&w)&&(_+=13,w>>>=13),!(127&w)&&(_+=7,w>>>=7),!(15&w)&&(_+=4,w>>>=4),!(3&w)&&(_+=2,w>>>=2),!(1&w)&&_++,_},i.prototype.bitLength=function(){var S=this.words[this.length-1],w=this._countBits(S);return 26*(this.length-1)+w},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var S=0,w=0;w<this.length;w++){var _=this._zeroBits(this.words[w]);if(S+=_,_!==26)break}return S},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(S){return this.negative!==0?this.abs().inotn(S).iaddn(1):this.clone()},i.prototype.fromTwos=function(S){return this.testn(S-1)?this.notn(S).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(S){for(;this.length<S.length;)this.words[this.length++]=0;for(var w=0;w<S.length;w++)this.words[w]=this.words[w]|S.words[w];return this._strip()},i.prototype.ior=function(S){return d((this.negative|S.negative)==0),this.iuor(S)},i.prototype.or=function(S){return this.length>S.length?this.clone().ior(S):S.clone().ior(this)},i.prototype.uor=function(S){return this.length>S.length?this.clone().iuor(S):S.clone().iuor(this)},i.prototype.iuand=function(S){var w;w=this.length>S.length?S:this;for(var _=0;_<w.length;_++)this.words[_]=this.words[_]&S.words[_];return this.length=w.length,this._strip()},i.prototype.iand=function(S){return d((this.negative|S.negative)==0),this.iuand(S)},i.prototype.and=function(S){return this.length>S.length?this.clone().iand(S):S.clone().iand(this)},i.prototype.uand=function(S){return this.length>S.length?this.clone().iuand(S):S.clone().iuand(this)},i.prototype.iuxor=function(S){var w,_;this.length>S.length?(w=this,_=S):(w=S,_=this);for(var j=0;j<_.length;j++)this.words[j]=w.words[j]^_.words[j];if(this!==w)for(;j<w.length;j++)this.words[j]=w.words[j];return this.length=w.length,this._strip()},i.prototype.ixor=function(S){return d((this.negative|S.negative)==0),this.iuxor(S)},i.prototype.xor=function(S){return this.length>S.length?this.clone().ixor(S):S.clone().ixor(this)},i.prototype.uxor=function(S){return this.length>S.length?this.clone().iuxor(S):S.clone().iuxor(this)},i.prototype.inotn=function(S){d(typeof S=="number"&&S>=0);var w=0|Math.ceil(S/26),_=S%26;this._expand(w),_>0&&w--;for(var j=0;j<w;j++)this.words[j]=67108863&~this.words[j];return _>0&&(this.words[j]=~this.words[j]&67108863>>26-_),this._strip()},i.prototype.notn=function(S){return this.clone().inotn(S)},i.prototype.setn=function(S,w){d(typeof S=="number"&&S>=0);var _=S/26|0,j=S%26;return this._expand(_+1),this.words[_]=w?this.words[_]|1<<j:this.words[_]&~(1<<j),this._strip()},i.prototype.iadd=function(S){var w,_,j;if(this.negative!==0&&S.negative===0)return this.negative=0,w=this.isub(S),this.negative^=1,this._normSign();if(this.negative===0&&S.negative!==0)return S.negative=0,w=this.isub(S),S.negative=1,w._normSign();this.length>S.length?(_=this,j=S):(_=S,j=this);for(var N=0,E=0;E<j.length;E++)w=(0|_.words[E])+(0|j.words[E])+N,this.words[E]=67108863&w,N=w>>>26;for(;N!==0&&E<_.length;E++)w=(0|_.words[E])+N,this.words[E]=67108863&w,N=w>>>26;if(this.length=_.length,N!==0)this.words[this.length]=N,this.length++;else if(_!==this)for(;E<_.length;E++)this.words[E]=_.words[E];return this},i.prototype.add=function(S){var w;return S.negative!==0&&this.negative===0?(S.negative=0,w=this.sub(S),S.negative^=1,w):S.negative===0&&this.negative!==0?(this.negative=0,w=S.sub(this),this.negative=1,w):this.length>S.length?this.clone().iadd(S):S.clone().iadd(this)},i.prototype.isub=function(S){if(S.negative!==0){S.negative=0;var w=this.iadd(S);return S.negative=1,w._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(S),this.negative=1,this._normSign();var _,j,N=this.cmp(S);if(N===0)return this.negative=0,this.length=1,this.words[0]=0,this;N>0?(_=this,j=S):(_=S,j=this);for(var E=0,I=0;I<j.length;I++)E=(w=(0|_.words[I])-(0|j.words[I])+E)>>26,this.words[I]=67108863&w;for(;E!==0&&I<_.length;I++)E=(w=(0|_.words[I])+E)>>26,this.words[I]=67108863&w;if(E===0&&I<_.length&&_!==this)for(;I<_.length;I++)this.words[I]=_.words[I];return this.length=Math.max(this.length,I),_!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(S){return this.clone().isub(S)};var C=function(S,w,_){var j,N,E,I=S.words,D=w.words,V=_.words,H=0,G=0|I[0],$=8191&G,Y=G>>>13,F=0|I[1],O=8191&F,W=F>>>13,K=0|I[2],Q=8191&K,X=K>>>13,te=0|I[3],de=8191&te,xe=te>>>13,ne=0|I[4],ge=8191&ne,be=ne>>>13,Ie=0|I[5],Ce=8191&Ie,Oe=Ie>>>13,Ee=0|I[6],pe=8191&Ee,Ae=Ee>>>13,st=0|I[7],qe=8191&st,ie=st>>>13,ae=0|I[8],we=8191&ae,ve=ae>>>13,He=0|I[9],$e=8191&He,ue=He>>>13,oe=0|D[0],_e=8191&oe,Me=oe>>>13,ze=0|D[1],Xe=8191&ze,Ve=ze>>>13,ot=0|D[2],xt=8191&ot,ft=ot>>>13,at=0|D[3],Be=8191&at,Ue=at>>>13,re=0|D[4],ye=8191&re,ke=re>>>13,Fe=0|D[5],Ke=8191&Fe,Qe=Fe>>>13,he=0|D[6],je=8191&he,Ne=he>>>13,tt=0|D[7],jt=8191&tt,dt=tt>>>13,kt=0|D[8],gt=8191&kt,wt=kt>>>13,Pt=0|D[9],bt=8191&Pt,yt=Pt>>>13;_.negative=S.negative^w.negative,_.length=19;var Ge=(H+(j=Math.imul($,_e))|0)+((8191&(N=(N=Math.imul($,Me))+Math.imul(Y,_e)|0))<<13)|0;H=((E=Math.imul(Y,Me))+(N>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,j=Math.imul(O,_e),N=(N=Math.imul(O,Me))+Math.imul(W,_e)|0,E=Math.imul(W,Me);var J=(H+(j=j+Math.imul($,Xe)|0)|0)+((8191&(N=(N=N+Math.imul($,Ve)|0)+Math.imul(Y,Xe)|0))<<13)|0;H=((E=E+Math.imul(Y,Ve)|0)+(N>>>13)|0)+(J>>>26)|0,J&=67108863,j=Math.imul(Q,_e),N=(N=Math.imul(Q,Me))+Math.imul(X,_e)|0,E=Math.imul(X,Me),j=j+Math.imul(O,Xe)|0,N=(N=N+Math.imul(O,Ve)|0)+Math.imul(W,Xe)|0,E=E+Math.imul(W,Ve)|0;var ce=(H+(j=j+Math.imul($,xt)|0)|0)+((8191&(N=(N=N+Math.imul($,ft)|0)+Math.imul(Y,xt)|0))<<13)|0;H=((E=E+Math.imul(Y,ft)|0)+(N>>>13)|0)+(ce>>>26)|0,ce&=67108863,j=Math.imul(de,_e),N=(N=Math.imul(de,Me))+Math.imul(xe,_e)|0,E=Math.imul(xe,Me),j=j+Math.imul(Q,Xe)|0,N=(N=N+Math.imul(Q,Ve)|0)+Math.imul(X,Xe)|0,E=E+Math.imul(X,Ve)|0,j=j+Math.imul(O,xt)|0,N=(N=N+Math.imul(O,ft)|0)+Math.imul(W,xt)|0,E=E+Math.imul(W,ft)|0;var Je=(H+(j=j+Math.imul($,Be)|0)|0)+((8191&(N=(N=N+Math.imul($,Ue)|0)+Math.imul(Y,Be)|0))<<13)|0;H=((E=E+Math.imul(Y,Ue)|0)+(N>>>13)|0)+(Je>>>26)|0,Je&=67108863,j=Math.imul(ge,_e),N=(N=Math.imul(ge,Me))+Math.imul(be,_e)|0,E=Math.imul(be,Me),j=j+Math.imul(de,Xe)|0,N=(N=N+Math.imul(de,Ve)|0)+Math.imul(xe,Xe)|0,E=E+Math.imul(xe,Ve)|0,j=j+Math.imul(Q,xt)|0,N=(N=N+Math.imul(Q,ft)|0)+Math.imul(X,xt)|0,E=E+Math.imul(X,ft)|0,j=j+Math.imul(O,Be)|0,N=(N=N+Math.imul(O,Ue)|0)+Math.imul(W,Be)|0,E=E+Math.imul(W,Ue)|0;var ht=(H+(j=j+Math.imul($,ye)|0)|0)+((8191&(N=(N=N+Math.imul($,ke)|0)+Math.imul(Y,ye)|0))<<13)|0;H=((E=E+Math.imul(Y,ke)|0)+(N>>>13)|0)+(ht>>>26)|0,ht&=67108863,j=Math.imul(Ce,_e),N=(N=Math.imul(Ce,Me))+Math.imul(Oe,_e)|0,E=Math.imul(Oe,Me),j=j+Math.imul(ge,Xe)|0,N=(N=N+Math.imul(ge,Ve)|0)+Math.imul(be,Xe)|0,E=E+Math.imul(be,Ve)|0,j=j+Math.imul(de,xt)|0,N=(N=N+Math.imul(de,ft)|0)+Math.imul(xe,xt)|0,E=E+Math.imul(xe,ft)|0,j=j+Math.imul(Q,Be)|0,N=(N=N+Math.imul(Q,Ue)|0)+Math.imul(X,Be)|0,E=E+Math.imul(X,Ue)|0,j=j+Math.imul(O,ye)|0,N=(N=N+Math.imul(O,ke)|0)+Math.imul(W,ye)|0,E=E+Math.imul(W,ke)|0;var le=(H+(j=j+Math.imul($,Ke)|0)|0)+((8191&(N=(N=N+Math.imul($,Qe)|0)+Math.imul(Y,Ke)|0))<<13)|0;H=((E=E+Math.imul(Y,Qe)|0)+(N>>>13)|0)+(le>>>26)|0,le&=67108863,j=Math.imul(pe,_e),N=(N=Math.imul(pe,Me))+Math.imul(Ae,_e)|0,E=Math.imul(Ae,Me),j=j+Math.imul(Ce,Xe)|0,N=(N=N+Math.imul(Ce,Ve)|0)+Math.imul(Oe,Xe)|0,E=E+Math.imul(Oe,Ve)|0,j=j+Math.imul(ge,xt)|0,N=(N=N+Math.imul(ge,ft)|0)+Math.imul(be,xt)|0,E=E+Math.imul(be,ft)|0,j=j+Math.imul(de,Be)|0,N=(N=N+Math.imul(de,Ue)|0)+Math.imul(xe,Be)|0,E=E+Math.imul(xe,Ue)|0,j=j+Math.imul(Q,ye)|0,N=(N=N+Math.imul(Q,ke)|0)+Math.imul(X,ye)|0,E=E+Math.imul(X,ke)|0,j=j+Math.imul(O,Ke)|0,N=(N=N+Math.imul(O,Qe)|0)+Math.imul(W,Ke)|0,E=E+Math.imul(W,Qe)|0;var Le=(H+(j=j+Math.imul($,je)|0)|0)+((8191&(N=(N=N+Math.imul($,Ne)|0)+Math.imul(Y,je)|0))<<13)|0;H=((E=E+Math.imul(Y,Ne)|0)+(N>>>13)|0)+(Le>>>26)|0,Le&=67108863,j=Math.imul(qe,_e),N=(N=Math.imul(qe,Me))+Math.imul(ie,_e)|0,E=Math.imul(ie,Me),j=j+Math.imul(pe,Xe)|0,N=(N=N+Math.imul(pe,Ve)|0)+Math.imul(Ae,Xe)|0,E=E+Math.imul(Ae,Ve)|0,j=j+Math.imul(Ce,xt)|0,N=(N=N+Math.imul(Ce,ft)|0)+Math.imul(Oe,xt)|0,E=E+Math.imul(Oe,ft)|0,j=j+Math.imul(ge,Be)|0,N=(N=N+Math.imul(ge,Ue)|0)+Math.imul(be,Be)|0,E=E+Math.imul(be,Ue)|0,j=j+Math.imul(de,ye)|0,N=(N=N+Math.imul(de,ke)|0)+Math.imul(xe,ye)|0,E=E+Math.imul(xe,ke)|0,j=j+Math.imul(Q,Ke)|0,N=(N=N+Math.imul(Q,Qe)|0)+Math.imul(X,Ke)|0,E=E+Math.imul(X,Qe)|0,j=j+Math.imul(O,je)|0,N=(N=N+Math.imul(O,Ne)|0)+Math.imul(W,je)|0,E=E+Math.imul(W,Ne)|0;var rt=(H+(j=j+Math.imul($,jt)|0)|0)+((8191&(N=(N=N+Math.imul($,dt)|0)+Math.imul(Y,jt)|0))<<13)|0;H=((E=E+Math.imul(Y,dt)|0)+(N>>>13)|0)+(rt>>>26)|0,rt&=67108863,j=Math.imul(we,_e),N=(N=Math.imul(we,Me))+Math.imul(ve,_e)|0,E=Math.imul(ve,Me),j=j+Math.imul(qe,Xe)|0,N=(N=N+Math.imul(qe,Ve)|0)+Math.imul(ie,Xe)|0,E=E+Math.imul(ie,Ve)|0,j=j+Math.imul(pe,xt)|0,N=(N=N+Math.imul(pe,ft)|0)+Math.imul(Ae,xt)|0,E=E+Math.imul(Ae,ft)|0,j=j+Math.imul(Ce,Be)|0,N=(N=N+Math.imul(Ce,Ue)|0)+Math.imul(Oe,Be)|0,E=E+Math.imul(Oe,Ue)|0,j=j+Math.imul(ge,ye)|0,N=(N=N+Math.imul(ge,ke)|0)+Math.imul(be,ye)|0,E=E+Math.imul(be,ke)|0,j=j+Math.imul(de,Ke)|0,N=(N=N+Math.imul(de,Qe)|0)+Math.imul(xe,Ke)|0,E=E+Math.imul(xe,Qe)|0,j=j+Math.imul(Q,je)|0,N=(N=N+Math.imul(Q,Ne)|0)+Math.imul(X,je)|0,E=E+Math.imul(X,Ne)|0,j=j+Math.imul(O,jt)|0,N=(N=N+Math.imul(O,dt)|0)+Math.imul(W,jt)|0,E=E+Math.imul(W,dt)|0;var pt=(H+(j=j+Math.imul($,gt)|0)|0)+((8191&(N=(N=N+Math.imul($,wt)|0)+Math.imul(Y,gt)|0))<<13)|0;H=((E=E+Math.imul(Y,wt)|0)+(N>>>13)|0)+(pt>>>26)|0,pt&=67108863,j=Math.imul($e,_e),N=(N=Math.imul($e,Me))+Math.imul(ue,_e)|0,E=Math.imul(ue,Me),j=j+Math.imul(we,Xe)|0,N=(N=N+Math.imul(we,Ve)|0)+Math.imul(ve,Xe)|0,E=E+Math.imul(ve,Ve)|0,j=j+Math.imul(qe,xt)|0,N=(N=N+Math.imul(qe,ft)|0)+Math.imul(ie,xt)|0,E=E+Math.imul(ie,ft)|0,j=j+Math.imul(pe,Be)|0,N=(N=N+Math.imul(pe,Ue)|0)+Math.imul(Ae,Be)|0,E=E+Math.imul(Ae,Ue)|0,j=j+Math.imul(Ce,ye)|0,N=(N=N+Math.imul(Ce,ke)|0)+Math.imul(Oe,ye)|0,E=E+Math.imul(Oe,ke)|0,j=j+Math.imul(ge,Ke)|0,N=(N=N+Math.imul(ge,Qe)|0)+Math.imul(be,Ke)|0,E=E+Math.imul(be,Qe)|0,j=j+Math.imul(de,je)|0,N=(N=N+Math.imul(de,Ne)|0)+Math.imul(xe,je)|0,E=E+Math.imul(xe,Ne)|0,j=j+Math.imul(Q,jt)|0,N=(N=N+Math.imul(Q,dt)|0)+Math.imul(X,jt)|0,E=E+Math.imul(X,dt)|0,j=j+Math.imul(O,gt)|0,N=(N=N+Math.imul(O,wt)|0)+Math.imul(W,gt)|0,E=E+Math.imul(W,wt)|0;var Tt=(H+(j=j+Math.imul($,bt)|0)|0)+((8191&(N=(N=N+Math.imul($,yt)|0)+Math.imul(Y,bt)|0))<<13)|0;H=((E=E+Math.imul(Y,yt)|0)+(N>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,j=Math.imul($e,Xe),N=(N=Math.imul($e,Ve))+Math.imul(ue,Xe)|0,E=Math.imul(ue,Ve),j=j+Math.imul(we,xt)|0,N=(N=N+Math.imul(we,ft)|0)+Math.imul(ve,xt)|0,E=E+Math.imul(ve,ft)|0,j=j+Math.imul(qe,Be)|0,N=(N=N+Math.imul(qe,Ue)|0)+Math.imul(ie,Be)|0,E=E+Math.imul(ie,Ue)|0,j=j+Math.imul(pe,ye)|0,N=(N=N+Math.imul(pe,ke)|0)+Math.imul(Ae,ye)|0,E=E+Math.imul(Ae,ke)|0,j=j+Math.imul(Ce,Ke)|0,N=(N=N+Math.imul(Ce,Qe)|0)+Math.imul(Oe,Ke)|0,E=E+Math.imul(Oe,Qe)|0,j=j+Math.imul(ge,je)|0,N=(N=N+Math.imul(ge,Ne)|0)+Math.imul(be,je)|0,E=E+Math.imul(be,Ne)|0,j=j+Math.imul(de,jt)|0,N=(N=N+Math.imul(de,dt)|0)+Math.imul(xe,jt)|0,E=E+Math.imul(xe,dt)|0,j=j+Math.imul(Q,gt)|0,N=(N=N+Math.imul(Q,wt)|0)+Math.imul(X,gt)|0,E=E+Math.imul(X,wt)|0;var vt=(H+(j=j+Math.imul(O,bt)|0)|0)+((8191&(N=(N=N+Math.imul(O,yt)|0)+Math.imul(W,bt)|0))<<13)|0;H=((E=E+Math.imul(W,yt)|0)+(N>>>13)|0)+(vt>>>26)|0,vt&=67108863,j=Math.imul($e,xt),N=(N=Math.imul($e,ft))+Math.imul(ue,xt)|0,E=Math.imul(ue,ft),j=j+Math.imul(we,Be)|0,N=(N=N+Math.imul(we,Ue)|0)+Math.imul(ve,Be)|0,E=E+Math.imul(ve,Ue)|0,j=j+Math.imul(qe,ye)|0,N=(N=N+Math.imul(qe,ke)|0)+Math.imul(ie,ye)|0,E=E+Math.imul(ie,ke)|0,j=j+Math.imul(pe,Ke)|0,N=(N=N+Math.imul(pe,Qe)|0)+Math.imul(Ae,Ke)|0,E=E+Math.imul(Ae,Qe)|0,j=j+Math.imul(Ce,je)|0,N=(N=N+Math.imul(Ce,Ne)|0)+Math.imul(Oe,je)|0,E=E+Math.imul(Oe,Ne)|0,j=j+Math.imul(ge,jt)|0,N=(N=N+Math.imul(ge,dt)|0)+Math.imul(be,jt)|0,E=E+Math.imul(be,dt)|0,j=j+Math.imul(de,gt)|0,N=(N=N+Math.imul(de,wt)|0)+Math.imul(xe,gt)|0,E=E+Math.imul(xe,wt)|0;var _t=(H+(j=j+Math.imul(Q,bt)|0)|0)+((8191&(N=(N=N+Math.imul(Q,yt)|0)+Math.imul(X,bt)|0))<<13)|0;H=((E=E+Math.imul(X,yt)|0)+(N>>>13)|0)+(_t>>>26)|0,_t&=67108863,j=Math.imul($e,Be),N=(N=Math.imul($e,Ue))+Math.imul(ue,Be)|0,E=Math.imul(ue,Ue),j=j+Math.imul(we,ye)|0,N=(N=N+Math.imul(we,ke)|0)+Math.imul(ve,ye)|0,E=E+Math.imul(ve,ke)|0,j=j+Math.imul(qe,Ke)|0,N=(N=N+Math.imul(qe,Qe)|0)+Math.imul(ie,Ke)|0,E=E+Math.imul(ie,Qe)|0,j=j+Math.imul(pe,je)|0,N=(N=N+Math.imul(pe,Ne)|0)+Math.imul(Ae,je)|0,E=E+Math.imul(Ae,Ne)|0,j=j+Math.imul(Ce,jt)|0,N=(N=N+Math.imul(Ce,dt)|0)+Math.imul(Oe,jt)|0,E=E+Math.imul(Oe,dt)|0,j=j+Math.imul(ge,gt)|0,N=(N=N+Math.imul(ge,wt)|0)+Math.imul(be,gt)|0,E=E+Math.imul(be,wt)|0;var Bt=(H+(j=j+Math.imul(de,bt)|0)|0)+((8191&(N=(N=N+Math.imul(de,yt)|0)+Math.imul(xe,bt)|0))<<13)|0;H=((E=E+Math.imul(xe,yt)|0)+(N>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,j=Math.imul($e,ye),N=(N=Math.imul($e,ke))+Math.imul(ue,ye)|0,E=Math.imul(ue,ke),j=j+Math.imul(we,Ke)|0,N=(N=N+Math.imul(we,Qe)|0)+Math.imul(ve,Ke)|0,E=E+Math.imul(ve,Qe)|0,j=j+Math.imul(qe,je)|0,N=(N=N+Math.imul(qe,Ne)|0)+Math.imul(ie,je)|0,E=E+Math.imul(ie,Ne)|0,j=j+Math.imul(pe,jt)|0,N=(N=N+Math.imul(pe,dt)|0)+Math.imul(Ae,jt)|0,E=E+Math.imul(Ae,dt)|0,j=j+Math.imul(Ce,gt)|0,N=(N=N+Math.imul(Ce,wt)|0)+Math.imul(Oe,gt)|0,E=E+Math.imul(Oe,wt)|0;var Qt=(H+(j=j+Math.imul(ge,bt)|0)|0)+((8191&(N=(N=N+Math.imul(ge,yt)|0)+Math.imul(be,bt)|0))<<13)|0;H=((E=E+Math.imul(be,yt)|0)+(N>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,j=Math.imul($e,Ke),N=(N=Math.imul($e,Qe))+Math.imul(ue,Ke)|0,E=Math.imul(ue,Qe),j=j+Math.imul(we,je)|0,N=(N=N+Math.imul(we,Ne)|0)+Math.imul(ve,je)|0,E=E+Math.imul(ve,Ne)|0,j=j+Math.imul(qe,jt)|0,N=(N=N+Math.imul(qe,dt)|0)+Math.imul(ie,jt)|0,E=E+Math.imul(ie,dt)|0,j=j+Math.imul(pe,gt)|0,N=(N=N+Math.imul(pe,wt)|0)+Math.imul(Ae,gt)|0,E=E+Math.imul(Ae,wt)|0;var Gt=(H+(j=j+Math.imul(Ce,bt)|0)|0)+((8191&(N=(N=N+Math.imul(Ce,yt)|0)+Math.imul(Oe,bt)|0))<<13)|0;H=((E=E+Math.imul(Oe,yt)|0)+(N>>>13)|0)+(Gt>>>26)|0,Gt&=67108863,j=Math.imul($e,je),N=(N=Math.imul($e,Ne))+Math.imul(ue,je)|0,E=Math.imul(ue,Ne),j=j+Math.imul(we,jt)|0,N=(N=N+Math.imul(we,dt)|0)+Math.imul(ve,jt)|0,E=E+Math.imul(ve,dt)|0,j=j+Math.imul(qe,gt)|0,N=(N=N+Math.imul(qe,wt)|0)+Math.imul(ie,gt)|0,E=E+Math.imul(ie,wt)|0;var Ut=(H+(j=j+Math.imul(pe,bt)|0)|0)+((8191&(N=(N=N+Math.imul(pe,yt)|0)+Math.imul(Ae,bt)|0))<<13)|0;H=((E=E+Math.imul(Ae,yt)|0)+(N>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,j=Math.imul($e,jt),N=(N=Math.imul($e,dt))+Math.imul(ue,jt)|0,E=Math.imul(ue,dt),j=j+Math.imul(we,gt)|0,N=(N=N+Math.imul(we,wt)|0)+Math.imul(ve,gt)|0,E=E+Math.imul(ve,wt)|0;var gs=(H+(j=j+Math.imul(qe,bt)|0)|0)+((8191&(N=(N=N+Math.imul(qe,yt)|0)+Math.imul(ie,bt)|0))<<13)|0;H=((E=E+Math.imul(ie,yt)|0)+(N>>>13)|0)+(gs>>>26)|0,gs&=67108863,j=Math.imul($e,gt),N=(N=Math.imul($e,wt))+Math.imul(ue,gt)|0,E=Math.imul(ue,wt);var ds=(H+(j=j+Math.imul(we,bt)|0)|0)+((8191&(N=(N=N+Math.imul(we,yt)|0)+Math.imul(ve,bt)|0))<<13)|0;H=((E=E+Math.imul(ve,yt)|0)+(N>>>13)|0)+(ds>>>26)|0,ds&=67108863;var cs=(H+(j=Math.imul($e,bt))|0)+((8191&(N=(N=Math.imul($e,yt))+Math.imul(ue,bt)|0))<<13)|0;return H=((E=Math.imul(ue,yt))+(N>>>13)|0)+(cs>>>26)|0,cs&=67108863,V[0]=Ge,V[1]=J,V[2]=ce,V[3]=Je,V[4]=ht,V[5]=le,V[6]=Le,V[7]=rt,V[8]=pt,V[9]=Tt,V[10]=vt,V[11]=_t,V[12]=Bt,V[13]=Qt,V[14]=Gt,V[15]=Ut,V[16]=gs,V[17]=ds,V[18]=cs,H!==0&&(V[19]=H,_.length++),_};function T(S,w,_){_.negative=w.negative^S.negative,_.length=S.length+w.length;for(var j=0,N=0,E=0;E<_.length-1;E++){var I=N;N=0;for(var D=67108863&j,V=Math.min(E,w.length-1),H=Math.max(0,E-S.length+1);H<=V;H++){var G=E-H,$=(0|S.words[G])*(0|w.words[H]),Y=67108863&$;D=67108863&(Y=Y+D|0),N+=(I=(I=I+($/67108864|0)|0)+(Y>>>26)|0)>>>26,I&=67108863}_.words[E]=D,j=I,I=N}return j!==0?_.words[E]=j:_.length--,_._strip()}function M(S,w,_){return T(S,w,_)}Math.imul||(C=b),i.prototype.mulTo=function(S,w){var _=this.length+S.length;return this.length===10&&S.length===10?C(this,S,w):_<63?b(this,S,w):_<1024?T(this,S,w):M(this,S,w)},i.prototype.mul=function(S){var w=new i(null);return w.words=new Array(this.length+S.length),this.mulTo(S,w)},i.prototype.mulf=function(S){var w=new i(null);return w.words=new Array(this.length+S.length),M(this,S,w)},i.prototype.imul=function(S){return this.clone().mulTo(S,this)},i.prototype.imuln=function(S){var w=S<0;w&&(S=-S),d(typeof S=="number"),d(S<67108864);for(var _=0,j=0;j<this.length;j++){var N=(0|this.words[j])*S,E=(67108863&N)+(67108863&_);_>>=26,_+=N/67108864|0,_+=E>>>26,this.words[j]=67108863&E}return _!==0&&(this.words[j]=_,this.length++),w?this.ineg():this},i.prototype.muln=function(S){return this.clone().imuln(S)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(S){var w=function(E){for(var I=new Array(E.bitLength()),D=0;D<I.length;D++){var V=D/26|0,H=D%26;I[D]=E.words[V]>>>H&1}return I}(S);if(w.length===0)return new i(1);for(var _=this,j=0;j<w.length&&w[j]===0;j++,_=_.sqr());if(++j<w.length)for(var N=_.sqr();j<w.length;j++,N=N.sqr())w[j]!==0&&(_=_.mul(N));return _},i.prototype.iushln=function(S){d(typeof S=="number"&&S>=0);var w,_=S%26,j=(S-_)/26,N=67108863>>>26-_<<26-_;if(_!==0){var E=0;for(w=0;w<this.length;w++){var I=this.words[w]&N,D=(0|this.words[w])-I<<_;this.words[w]=D|E,E=I>>>26-_}E&&(this.words[w]=E,this.length++)}if(j!==0){for(w=this.length-1;w>=0;w--)this.words[w+j]=this.words[w];for(w=0;w<j;w++)this.words[w]=0;this.length+=j}return this._strip()},i.prototype.ishln=function(S){return d(this.negative===0),this.iushln(S)},i.prototype.iushrn=function(S,w,_){var j;d(typeof S=="number"&&S>=0),j=w?(w-w%26)/26:0;var N=S%26,E=Math.min((S-N)/26,this.length),I=67108863^67108863>>>N<<N,D=_;if(j-=E,j=Math.max(0,j),D){for(var V=0;V<E;V++)D.words[V]=this.words[V];D.length=E}if(E!==0)if(this.length>E)for(this.length-=E,V=0;V<this.length;V++)this.words[V]=this.words[V+E];else this.words[0]=0,this.length=1;var H=0;for(V=this.length-1;V>=0&&(H!==0||V>=j);V--){var G=0|this.words[V];this.words[V]=H<<26-N|G>>>N,H=G&I}return D&&H!==0&&(D.words[D.length++]=H),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(S,w,_){return d(this.negative===0),this.iushrn(S,w,_)},i.prototype.shln=function(S){return this.clone().ishln(S)},i.prototype.ushln=function(S){return this.clone().iushln(S)},i.prototype.shrn=function(S){return this.clone().ishrn(S)},i.prototype.ushrn=function(S){return this.clone().iushrn(S)},i.prototype.testn=function(S){d(typeof S=="number"&&S>=0);var w=S%26,_=(S-w)/26,j=1<<w;return!(this.length<=_)&&!!(this.words[_]&j)},i.prototype.imaskn=function(S){d(typeof S=="number"&&S>=0);var w=S%26,_=(S-w)/26;if(d(this.negative===0,"imaskn works only with positive numbers"),this.length<=_)return this;if(w!==0&&_++,this.length=Math.min(_,this.length),w!==0){var j=67108863^67108863>>>w<<w;this.words[this.length-1]&=j}return this._strip()},i.prototype.maskn=function(S){return this.clone().imaskn(S)},i.prototype.iaddn=function(S){return d(typeof S=="number"),d(S<67108864),S<0?this.isubn(-S):this.negative!==0?this.length===1&&(0|this.words[0])<=S?(this.words[0]=S-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(S),this.negative=1,this):this._iaddn(S)},i.prototype._iaddn=function(S){this.words[0]+=S;for(var w=0;w<this.length&&this.words[w]>=67108864;w++)this.words[w]-=67108864,w===this.length-1?this.words[w+1]=1:this.words[w+1]++;return this.length=Math.max(this.length,w+1),this},i.prototype.isubn=function(S){if(d(typeof S=="number"),d(S<67108864),S<0)return this.iaddn(-S);if(this.negative!==0)return this.negative=0,this.iaddn(S),this.negative=1,this;if(this.words[0]-=S,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var w=0;w<this.length&&this.words[w]<0;w++)this.words[w]+=67108864,this.words[w+1]-=1;return this._strip()},i.prototype.addn=function(S){return this.clone().iaddn(S)},i.prototype.subn=function(S){return this.clone().isubn(S)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(S,w,_){var j,N,E=S.length+_;this._expand(E);var I=0;for(j=0;j<S.length;j++){N=(0|this.words[j+_])+I;var D=(0|S.words[j])*w;I=((N-=67108863&D)>>26)-(D/67108864|0),this.words[j+_]=67108863&N}for(;j<this.length-_;j++)I=(N=(0|this.words[j+_])+I)>>26,this.words[j+_]=67108863&N;if(I===0)return this._strip();for(d(I===-1),I=0,j=0;j<this.length;j++)I=(N=-(0|this.words[j])+I)>>26,this.words[j]=67108863&N;return this.negative=1,this._strip()},i.prototype._wordDiv=function(S,w){var _=(this.length,S.length),j=this.clone(),N=S,E=0|N.words[N.length-1];(_=26-this._countBits(E))!==0&&(N=N.ushln(_),j.iushln(_),E=0|N.words[N.length-1]);var I,D=j.length-N.length;if(w!=="mod"){(I=new i(null)).length=D+1,I.words=new Array(I.length);for(var V=0;V<I.length;V++)I.words[V]=0}var H=j.clone()._ishlnsubmul(N,1,D);H.negative===0&&(j=H,I&&(I.words[D]=1));for(var G=D-1;G>=0;G--){var $=67108864*(0|j.words[N.length+G])+(0|j.words[N.length+G-1]);for($=Math.min($/E|0,67108863),j._ishlnsubmul(N,$,G);j.negative!==0;)$--,j.negative=0,j._ishlnsubmul(N,1,G),j.isZero()||(j.negative^=1);I&&(I.words[G]=$)}return I&&I._strip(),j._strip(),w!=="div"&&_!==0&&j.iushrn(_),{div:I||null,mod:j}},i.prototype.divmod=function(S,w,_){return d(!S.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:this.negative!==0&&S.negative===0?(E=this.neg().divmod(S,w),w!=="mod"&&(j=E.div.neg()),w!=="div"&&(N=E.mod.neg(),_&&N.negative!==0&&N.iadd(S)),{div:j,mod:N}):this.negative===0&&S.negative!==0?(E=this.divmod(S.neg(),w),w!=="mod"&&(j=E.div.neg()),{div:j,mod:E.mod}):this.negative&S.negative?(E=this.neg().divmod(S.neg(),w),w!=="div"&&(N=E.mod.neg(),_&&N.negative!==0&&N.isub(S)),{div:E.div,mod:N}):S.length>this.length||this.cmp(S)<0?{div:new i(0),mod:this}:S.length===1?w==="div"?{div:this.divn(S.words[0]),mod:null}:w==="mod"?{div:null,mod:new i(this.modrn(S.words[0]))}:{div:this.divn(S.words[0]),mod:new i(this.modrn(S.words[0]))}:this._wordDiv(S,w);var j,N,E},i.prototype.div=function(S){return this.divmod(S,"div",!1).div},i.prototype.mod=function(S){return this.divmod(S,"mod",!1).mod},i.prototype.umod=function(S){return this.divmod(S,"mod",!0).mod},i.prototype.divRound=function(S){var w=this.divmod(S);if(w.mod.isZero())return w.div;var _=w.div.negative!==0?w.mod.isub(S):w.mod,j=S.ushrn(1),N=S.andln(1),E=_.cmp(j);return E<0||N===1&&E===0?w.div:w.div.negative!==0?w.div.isubn(1):w.div.iaddn(1)},i.prototype.modrn=function(S){var w=S<0;w&&(S=-S),d(S<=67108863);for(var _=(1<<26)%S,j=0,N=this.length-1;N>=0;N--)j=(_*j+(0|this.words[N]))%S;return w?-j:j},i.prototype.modn=function(S){return this.modrn(S)},i.prototype.idivn=function(S){var w=S<0;w&&(S=-S),d(S<=67108863);for(var _=0,j=this.length-1;j>=0;j--){var N=(0|this.words[j])+67108864*_;this.words[j]=N/S|0,_=N%S}return this._strip(),w?this.ineg():this},i.prototype.divn=function(S){return this.clone().idivn(S)},i.prototype.egcd=function(S){d(S.negative===0),d(!S.isZero());var w=this,_=S.clone();w=w.negative!==0?w.umod(S):w.clone();for(var j=new i(1),N=new i(0),E=new i(0),I=new i(1),D=0;w.isEven()&&_.isEven();)w.iushrn(1),_.iushrn(1),++D;for(var V=_.clone(),H=w.clone();!w.isZero();){for(var G=0,$=1;!(w.words[0]&$)&&G<26;++G,$<<=1);if(G>0)for(w.iushrn(G);G-- >0;)(j.isOdd()||N.isOdd())&&(j.iadd(V),N.isub(H)),j.iushrn(1),N.iushrn(1);for(var Y=0,F=1;!(_.words[0]&F)&&Y<26;++Y,F<<=1);if(Y>0)for(_.iushrn(Y);Y-- >0;)(E.isOdd()||I.isOdd())&&(E.iadd(V),I.isub(H)),E.iushrn(1),I.iushrn(1);w.cmp(_)>=0?(w.isub(_),j.isub(E),N.isub(I)):(_.isub(w),E.isub(j),I.isub(N))}return{a:E,b:I,gcd:_.iushln(D)}},i.prototype._invmp=function(S){d(S.negative===0),d(!S.isZero());var w=this,_=S.clone();w=w.negative!==0?w.umod(S):w.clone();for(var j,N=new i(1),E=new i(0),I=_.clone();w.cmpn(1)>0&&_.cmpn(1)>0;){for(var D=0,V=1;!(w.words[0]&V)&&D<26;++D,V<<=1);if(D>0)for(w.iushrn(D);D-- >0;)N.isOdd()&&N.iadd(I),N.iushrn(1);for(var H=0,G=1;!(_.words[0]&G)&&H<26;++H,G<<=1);if(H>0)for(_.iushrn(H);H-- >0;)E.isOdd()&&E.iadd(I),E.iushrn(1);w.cmp(_)>=0?(w.isub(_),N.isub(E)):(_.isub(w),E.isub(N))}return(j=w.cmpn(1)===0?N:E).cmpn(0)<0&&j.iadd(S),j},i.prototype.gcd=function(S){if(this.isZero())return S.abs();if(S.isZero())return this.abs();var w=this.clone(),_=S.clone();w.negative=0,_.negative=0;for(var j=0;w.isEven()&&_.isEven();j++)w.iushrn(1),_.iushrn(1);for(;;){for(;w.isEven();)w.iushrn(1);for(;_.isEven();)_.iushrn(1);var N=w.cmp(_);if(N<0){var E=w;w=_,_=E}else if(N===0||_.cmpn(1)===0)break;w.isub(_)}return _.iushln(j)},i.prototype.invm=function(S){return this.egcd(S).a.umod(S)},i.prototype.isEven=function(){return(1&this.words[0])==0},i.prototype.isOdd=function(){return(1&this.words[0])==1},i.prototype.andln=function(S){return this.words[0]&S},i.prototype.bincn=function(S){d(typeof S=="number");var w=S%26,_=(S-w)/26,j=1<<w;if(this.length<=_)return this._expand(_+1),this.words[_]|=j,this;for(var N=j,E=_;N!==0&&E<this.length;E++){var I=0|this.words[E];N=(I+=N)>>>26,I&=67108863,this.words[E]=I}return N!==0&&(this.words[E]=N,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(S){var w,_=S<0;if(this.negative!==0&&!_)return-1;if(this.negative===0&&_)return 1;if(this._strip(),this.length>1)w=1;else{_&&(S=-S),d(S<=67108863,"Number is too big");var j=0|this.words[0];w=j===S?0:j<S?-1:1}return this.negative!==0?0|-w:w},i.prototype.cmp=function(S){if(this.negative!==0&&S.negative===0)return-1;if(this.negative===0&&S.negative!==0)return 1;var w=this.ucmp(S);return this.negative!==0?0|-w:w},i.prototype.ucmp=function(S){if(this.length>S.length)return 1;if(this.length<S.length)return-1;for(var w=0,_=this.length-1;_>=0;_--){var j=0|this.words[_],N=0|S.words[_];if(j!==N){j<N?w=-1:j>N&&(w=1);break}}return w},i.prototype.gtn=function(S){return this.cmpn(S)===1},i.prototype.gt=function(S){return this.cmp(S)===1},i.prototype.gten=function(S){return this.cmpn(S)>=0},i.prototype.gte=function(S){return this.cmp(S)>=0},i.prototype.ltn=function(S){return this.cmpn(S)===-1},i.prototype.lt=function(S){return this.cmp(S)===-1},i.prototype.lten=function(S){return this.cmpn(S)<=0},i.prototype.lte=function(S){return this.cmp(S)<=0},i.prototype.eqn=function(S){return this.cmpn(S)===0},i.prototype.eq=function(S){return this.cmp(S)===0},i.red=function(S){return new k(S)},i.prototype.toRed=function(S){return d(!this.red,"Already a number in reduction context"),d(this.negative===0,"red works only with positives"),S.convertTo(this)._forceRed(S)},i.prototype.fromRed=function(){return d(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(S){return this.red=S,this},i.prototype.forceRed=function(S){return d(!this.red,"Already a number in reduction context"),this._forceRed(S)},i.prototype.redAdd=function(S){return d(this.red,"redAdd works only with red numbers"),this.red.add(this,S)},i.prototype.redIAdd=function(S){return d(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,S)},i.prototype.redSub=function(S){return d(this.red,"redSub works only with red numbers"),this.red.sub(this,S)},i.prototype.redISub=function(S){return d(this.red,"redISub works only with red numbers"),this.red.isub(this,S)},i.prototype.redShl=function(S){return d(this.red,"redShl works only with red numbers"),this.red.shl(this,S)},i.prototype.redMul=function(S){return d(this.red,"redMul works only with red numbers"),this.red._verify2(this,S),this.red.mul(this,S)},i.prototype.redIMul=function(S){return d(this.red,"redMul works only with red numbers"),this.red._verify2(this,S),this.red.imul(this,S)},i.prototype.redSqr=function(){return d(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return d(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return d(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return d(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return d(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(S){return d(this.red&&!S.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,S)};var U={k256:null,p224:null,p192:null,p25519:null};function L(S,w){this.name=S,this.p=new i(w,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function P(){L.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function B(){L.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function q(){L.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function z(){L.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function k(S){if(typeof S=="string"){var w=i._prime(S);this.m=w.p,this.prime=w}else d(S.gtn(1),"modulus must be greater than 1"),this.m=S,this.prime=null}function R(S){k.call(this,S),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}L.prototype._tmp=function(){var S=new i(null);return S.words=new Array(Math.ceil(this.n/13)),S},L.prototype.ireduce=function(S){var w,_=S;do this.split(_,this.tmp),w=(_=(_=this.imulK(_)).iadd(this.tmp)).bitLength();while(w>this.n);var j=w<this.n?-1:_.ucmp(this.p);return j===0?(_.words[0]=0,_.length=1):j>0?_.isub(this.p):_.strip!==void 0?_.strip():_._strip(),_},L.prototype.split=function(S,w){S.iushrn(this.n,0,w)},L.prototype.imulK=function(S){return S.imul(this.k)},l(P,L),P.prototype.split=function(S,w){for(var _=Math.min(S.length,9),j=0;j<_;j++)w.words[j]=S.words[j];if(w.length=_,S.length<=9)return S.words[0]=0,void(S.length=1);var N=S.words[9];for(w.words[w.length++]=4194303&N,j=10;j<S.length;j++){var E=0|S.words[j];S.words[j-10]=(4194303&E)<<4|N>>>22,N=E}N>>>=22,S.words[j-10]=N,N===0&&S.length>10?S.length-=10:S.length-=9},P.prototype.imulK=function(S){S.words[S.length]=0,S.words[S.length+1]=0,S.length+=2;for(var w=0,_=0;_<S.length;_++){var j=0|S.words[_];w+=977*j,S.words[_]=67108863&w,w=64*j+(w/67108864|0)}return S.words[S.length-1]===0&&(S.length--,S.words[S.length-1]===0&&S.length--),S},l(B,L),l(q,L),l(z,L),z.prototype.imulK=function(S){for(var w=0,_=0;_<S.length;_++){var j=19*(0|S.words[_])+w,N=67108863&j;j>>>=26,S.words[_]=N,w=j}return w!==0&&(S.words[S.length++]=w),S},i._prime=function(S){if(U[S])return U[S];var w;if(S==="k256")w=new P;else if(S==="p224")w=new B;else if(S==="p192")w=new q;else{if(S!=="p25519")throw new Error("Unknown prime "+S);w=new z}return U[S]=w,w},k.prototype._verify1=function(S){d(S.negative===0,"red works only with positives"),d(S.red,"red works only with red numbers")},k.prototype._verify2=function(S,w){d((S.negative|w.negative)==0,"red works only with positives"),d(S.red&&S.red===w.red,"red works only with red numbers")},k.prototype.imod=function(S){return this.prime?this.prime.ireduce(S)._forceRed(this):(p(S,S.umod(this.m)._forceRed(this)),S)},k.prototype.neg=function(S){return S.isZero()?S.clone():this.m.sub(S)._forceRed(this)},k.prototype.add=function(S,w){this._verify2(S,w);var _=S.add(w);return _.cmp(this.m)>=0&&_.isub(this.m),_._forceRed(this)},k.prototype.iadd=function(S,w){this._verify2(S,w);var _=S.iadd(w);return _.cmp(this.m)>=0&&_.isub(this.m),_},k.prototype.sub=function(S,w){this._verify2(S,w);var _=S.sub(w);return _.cmpn(0)<0&&_.iadd(this.m),_._forceRed(this)},k.prototype.isub=function(S,w){this._verify2(S,w);var _=S.isub(w);return _.cmpn(0)<0&&_.iadd(this.m),_},k.prototype.shl=function(S,w){return this._verify1(S),this.imod(S.ushln(w))},k.prototype.imul=function(S,w){return this._verify2(S,w),this.imod(S.imul(w))},k.prototype.mul=function(S,w){return this._verify2(S,w),this.imod(S.mul(w))},k.prototype.isqr=function(S){return this.imul(S,S.clone())},k.prototype.sqr=function(S){return this.mul(S,S)},k.prototype.sqrt=function(S){if(S.isZero())return S.clone();var w=this.m.andln(3);if(d(w%2==1),w===3){var _=this.m.add(new i(1)).iushrn(2);return this.pow(S,_)}for(var j=this.m.subn(1),N=0;!j.isZero()&&j.andln(1)===0;)N++,j.iushrn(1);d(!j.isZero());var E=new i(1).toRed(this),I=E.redNeg(),D=this.m.subn(1).iushrn(1),V=this.m.bitLength();for(V=new i(2*V*V).toRed(this);this.pow(V,D).cmp(I)!==0;)V.redIAdd(I);for(var H=this.pow(V,j),G=this.pow(S,j.addn(1).iushrn(1)),$=this.pow(S,j),Y=N;$.cmp(E)!==0;){for(var F=$,O=0;F.cmp(E)!==0;O++)F=F.redSqr();d(O<Y);var W=this.pow(H,new i(1).iushln(Y-O-1));G=G.redMul(W),H=W.redSqr(),$=$.redMul(H),Y=O}return G},k.prototype.invm=function(S){var w=S._invmp(this.m);return w.negative!==0?(w.negative=0,this.imod(w).redNeg()):this.imod(w)},k.prototype.pow=function(S,w){if(w.isZero())return new i(1).toRed(this);if(w.cmpn(1)===0)return S.clone();var _=new Array(16);_[0]=new i(1).toRed(this),_[1]=S;for(var j=2;j<_.length;j++)_[j]=this.mul(_[j-1],S);var N=_[0],E=0,I=0,D=w.bitLength()%26;for(D===0&&(D=26),j=w.length-1;j>=0;j--){for(var V=w.words[j],H=D-1;H>=0;H--){var G=V>>H&1;N!==_[0]&&(N=this.sqr(N)),G!==0||E!==0?(E<<=1,E|=G,(++I===4||j===0&&H===0)&&(N=this.mul(N,_[E]),I=0,E=0)):I=0}D=26}return N},k.prototype.convertTo=function(S){var w=S.umod(this.m);return w===S?w.clone():w},k.prototype.convertFrom=function(S){var w=S.clone();return w.red=null,w},i.mont=function(S){return new R(S)},l(R,k),R.prototype.convertTo=function(S){return this.imod(S.ushln(this.shift))},R.prototype.convertFrom=function(S){var w=this.imod(S.mul(this.rinv));return w.red=null,w},R.prototype.imul=function(S,w){if(S.isZero()||w.isZero())return S.words[0]=0,S.length=1,S;var _=S.imul(w),j=_.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),N=_.isub(j).iushrn(this.shift),E=N;return N.cmp(this.m)>=0?E=N.isub(this.m):N.cmpn(0)<0&&(E=N.iadd(this.m)),E._forceRed(this)},R.prototype.mul=function(S,w){if(S.isZero()||w.isZero())return new i(0)._forceRed(this);var _=S.mul(w),j=_.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),N=_.isub(j).iushrn(this.shift),E=N;return N.cmp(this.m)>=0?E=N.isub(this.m):N.cmpn(0)<0&&(E=N.iadd(this.m)),E._forceRed(this)},R.prototype.invm=function(S){return this.imod(S._invmp(this.m).mul(this.r2))._forceRed(this)}})(n===void 0||n)},{buffer:188}],187:[function(s,n,c){var o;function a(l){this.rand=l}if(n.exports=function(l){return o||(o=new a(null)),o.generate(l)},n.exports.Rand=a,a.prototype.generate=function(l){return this._rand(l)},a.prototype._rand=function(l){if(this.rand.getBytes)return this.rand.getBytes(l);for(var i=new Uint8Array(l),u=0;u<i.length;u++)i[u]=this.rand.getByte();return i},typeof self=="object")self.crypto&&self.crypto.getRandomValues?a.prototype._rand=function(l){var i=new Uint8Array(l);return self.crypto.getRandomValues(i),i}:self.msCrypto&&self.msCrypto.getRandomValues?a.prototype._rand=function(l){var i=new Uint8Array(l);return self.msCrypto.getRandomValues(i),i}:typeof window=="object"&&(a.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var d=s("crypto");if(typeof d.randomBytes!="function")throw new Error("Not supported");a.prototype._rand=function(l){return d.randomBytes(l)}}catch{}},{crypto:188}],188:[function(s,n,c){},{}],189:[function(s,n,c){var o=s("safe-buffer").Buffer;function a(h){o.isBuffer(h)||(h=o.from(h));for(var m=h.length/4|0,p=new Array(m),x=0;x<m;x++)p[x]=h.readUInt32BE(4*x);return p}function d(h){for(;0<h.length;h++)h[0]=0}function l(h,m,p,x,g){for(var v,y,b,C,T=p[0],M=p[1],U=p[2],L=p[3],P=h[0]^m[0],B=h[1]^m[1],q=h[2]^m[2],z=h[3]^m[3],k=4,R=1;R<g;R++)v=T[P>>>24]^M[B>>>16&255]^U[q>>>8&255]^L[255&z]^m[k++],y=T[B>>>24]^M[q>>>16&255]^U[z>>>8&255]^L[255&P]^m[k++],b=T[q>>>24]^M[z>>>16&255]^U[P>>>8&255]^L[255&B]^m[k++],C=T[z>>>24]^M[P>>>16&255]^U[B>>>8&255]^L[255&q]^m[k++],P=v,B=y,q=b,z=C;return v=(x[P>>>24]<<24|x[B>>>16&255]<<16|x[q>>>8&255]<<8|x[255&z])^m[k++],y=(x[B>>>24]<<24|x[q>>>16&255]<<16|x[z>>>8&255]<<8|x[255&P])^m[k++],b=(x[q>>>24]<<24|x[z>>>16&255]<<16|x[P>>>8&255]<<8|x[255&B])^m[k++],C=(x[z>>>24]<<24|x[P>>>16&255]<<16|x[B>>>8&255]<<8|x[255&q])^m[k++],[v>>>=0,y>>>=0,b>>>=0,C>>>=0]}var i=[0,1,2,4,8,16,32,64,128,27,54],u=function(){for(var h=new Array(256),m=0;m<256;m++)h[m]=m<128?m<<1:m<<1^283;for(var p=[],x=[],g=[[],[],[],[]],v=[[],[],[],[]],y=0,b=0,C=0;C<256;++C){var T=b^b<<1^b<<2^b<<3^b<<4;T=T>>>8^255&T^99,p[y]=T,x[T]=y;var M=h[y],U=h[M],L=h[U],P=257*h[T]^16843008*T;g[0][y]=P<<24|P>>>8,g[1][y]=P<<16|P>>>16,g[2][y]=P<<8|P>>>24,g[3][y]=P,P=16843009*L^65537*U^257*M^16843008*y,v[0][T]=P<<24|P>>>8,v[1][T]=P<<16|P>>>16,v[2][T]=P<<8|P>>>24,v[3][T]=P,y===0?y=b=1:(y=M^h[h[h[L^M]]],b^=h[h[b]])}return{SBOX:p,INV_SBOX:x,SUB_MIX:g,INV_SUB_MIX:v}}();function f(h){this._key=a(h),this._reset()}f.blockSize=16,f.keySize=32,f.prototype.blockSize=f.blockSize,f.prototype.keySize=f.keySize,f.prototype._reset=function(){for(var h=this._key,m=h.length,p=m+6,x=4*(p+1),g=[],v=0;v<m;v++)g[v]=h[v];for(v=m;v<x;v++){var y=g[v-1];v%m==0?(y=y<<8|y>>>24,y=u.SBOX[y>>>24]<<24|u.SBOX[y>>>16&255]<<16|u.SBOX[y>>>8&255]<<8|u.SBOX[255&y],y^=i[v/m|0]<<24):m>6&&v%m==4&&(y=u.SBOX[y>>>24]<<24|u.SBOX[y>>>16&255]<<16|u.SBOX[y>>>8&255]<<8|u.SBOX[255&y]),g[v]=g[v-m]^y}for(var b=[],C=0;C<x;C++){var T=x-C,M=g[T-(C%4?0:4)];b[C]=C<4||T<=4?M:u.INV_SUB_MIX[0][u.SBOX[M>>>24]]^u.INV_SUB_MIX[1][u.SBOX[M>>>16&255]]^u.INV_SUB_MIX[2][u.SBOX[M>>>8&255]]^u.INV_SUB_MIX[3][u.SBOX[255&M]]}this._nRounds=p,this._keySchedule=g,this._invKeySchedule=b},f.prototype.encryptBlockRaw=function(h){return l(h=a(h),this._keySchedule,u.SUB_MIX,u.SBOX,this._nRounds)},f.prototype.encryptBlock=function(h){var m=this.encryptBlockRaw(h),p=o.allocUnsafe(16);return p.writeUInt32BE(m[0],0),p.writeUInt32BE(m[1],4),p.writeUInt32BE(m[2],8),p.writeUInt32BE(m[3],12),p},f.prototype.decryptBlock=function(h){var m=(h=a(h))[1];h[1]=h[3],h[3]=m;var p=l(h,this._invKeySchedule,u.INV_SUB_MIX,u.INV_SBOX,this._nRounds),x=o.allocUnsafe(16);return x.writeUInt32BE(p[0],0),x.writeUInt32BE(p[3],4),x.writeUInt32BE(p[2],8),x.writeUInt32BE(p[1],12),x},f.prototype.scrub=function(){d(this._keySchedule),d(this._invKeySchedule),d(this._key)},n.exports.AES=f},{"safe-buffer":494}],190:[function(s,n,c){var o=s("./aes"),a=s("safe-buffer").Buffer,d=s("cipher-base"),l=s("inherits"),i=s("./ghash"),u=s("buffer-xor"),f=s("./incr32");function h(m,p,x,g){d.call(this);var v=a.alloc(4,0);this._cipher=new o.AES(p);var y=this._cipher.encryptBlock(v);this._ghash=new i(y),x=function(b,C,T){if(C.length===12)return b._finID=a.concat([C,a.from([0,0,0,1])]),a.concat([C,a.from([0,0,0,2])]);var M=new i(T),U=C.length,L=U%16;M.update(C),L&&(L=16-L,M.update(a.alloc(L,0))),M.update(a.alloc(8,0));var P=8*U,B=a.alloc(8);B.writeUIntBE(P,0,8),M.update(B),b._finID=M.state;var q=a.from(b._finID);return f(q),q}(this,x,y),this._prev=a.from(x),this._cache=a.allocUnsafe(0),this._secCache=a.allocUnsafe(0),this._decrypt=g,this._alen=0,this._len=0,this._mode=m,this._authTag=null,this._called=!1}l(h,d),h.prototype._update=function(m){if(!this._called&&this._alen){var p=16-this._alen%16;p<16&&(p=a.alloc(p,0),this._ghash.update(p))}this._called=!0;var x=this._mode.encrypt(this,m);return this._decrypt?this._ghash.update(m):this._ghash.update(x),this._len+=m.length,x},h.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var m=u(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(p,x){var g=0;p.length!==x.length&&g++;for(var v=Math.min(p.length,x.length),y=0;y<v;++y)g+=p[y]^x[y];return g}(m,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=m,this._cipher.scrub()},h.prototype.getAuthTag=function(){if(this._decrypt||!a.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},h.prototype.setAuthTag=function(m){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=m},h.prototype.setAAD=function(m){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(m),this._alen+=m.length},n.exports=h},{"./aes":189,"./ghash":194,"./incr32":195,"buffer-xor":219,"cipher-base":221,inherits:440,"safe-buffer":494}],191:[function(s,n,c){var o=s("./encrypter"),a=s("./decrypter"),d=s("./modes/list.json");c.createCipher=c.Cipher=o.createCipher,c.createCipheriv=c.Cipheriv=o.createCipheriv,c.createDecipher=c.Decipher=a.createDecipher,c.createDecipheriv=c.Decipheriv=a.createDecipheriv,c.listCiphers=c.getCiphers=function(){return Object.keys(d)}},{"./decrypter":192,"./encrypter":193,"./modes/list.json":203}],192:[function(s,n,c){var o=s("./authCipher"),a=s("safe-buffer").Buffer,d=s("./modes"),l=s("./streamCipher"),i=s("cipher-base"),u=s("./aes"),f=s("evp_bytestokey");function h(x,g,v){i.call(this),this._cache=new m,this._last=void 0,this._cipher=new u.AES(g),this._prev=a.from(v),this._mode=x,this._autopadding=!0}function m(){this.cache=a.allocUnsafe(0)}function p(x,g,v){var y=d[x.toLowerCase()];if(!y)throw new TypeError("invalid suite type");if(typeof v=="string"&&(v=a.from(v)),y.mode!=="GCM"&&v.length!==y.iv)throw new TypeError("invalid iv length "+v.length);if(typeof g=="string"&&(g=a.from(g)),g.length!==y.key/8)throw new TypeError("invalid key length "+g.length);return y.type==="stream"?new l(y.module,g,v,!0):y.type==="auth"?new o(y.module,g,v,!0):new h(y.module,g,v)}s("inherits")(h,i),h.prototype._update=function(x){var g,v;this._cache.add(x);for(var y=[];g=this._cache.get(this._autopadding);)v=this._mode.decrypt(this,g),y.push(v);return a.concat(y)},h.prototype._final=function(){var x=this._cache.flush();if(this._autopadding)return function(g){var v=g[15];if(v<1||v>16)throw new Error("unable to decrypt data");for(var y=-1;++y<v;)if(g[y+(16-v)]!==v)throw new Error("unable to decrypt data");if(v!==16)return g.slice(0,16-v)}(this._mode.decrypt(this,x));if(x)throw new Error("data not multiple of block length")},h.prototype.setAutoPadding=function(x){return this._autopadding=!!x,this},m.prototype.add=function(x){this.cache=a.concat([this.cache,x])},m.prototype.get=function(x){var g;if(x){if(this.cache.length>16)return g=this.cache.slice(0,16),this.cache=this.cache.slice(16),g}else if(this.cache.length>=16)return g=this.cache.slice(0,16),this.cache=this.cache.slice(16),g;return null},m.prototype.flush=function(){if(this.cache.length)return this.cache},c.createDecipher=function(x,g){var v=d[x.toLowerCase()];if(!v)throw new TypeError("invalid suite type");var y=f(g,!1,v.key,v.iv);return p(x,y.key,y.iv)},c.createDecipheriv=p},{"./aes":189,"./authCipher":190,"./modes":202,"./streamCipher":205,"cipher-base":221,evp_bytestokey:423,inherits:440,"safe-buffer":494}],193:[function(s,n,c){var o=s("./modes"),a=s("./authCipher"),d=s("safe-buffer").Buffer,l=s("./streamCipher"),i=s("cipher-base"),u=s("./aes"),f=s("evp_bytestokey");function h(g,v,y){i.call(this),this._cache=new p,this._cipher=new u.AES(v),this._prev=d.from(y),this._mode=g,this._autopadding=!0}s("inherits")(h,i),h.prototype._update=function(g){var v,y;this._cache.add(g);for(var b=[];v=this._cache.get();)y=this._mode.encrypt(this,v),b.push(y);return d.concat(b)};var m=d.alloc(16,16);function p(){this.cache=d.allocUnsafe(0)}function x(g,v,y){var b=o[g.toLowerCase()];if(!b)throw new TypeError("invalid suite type");if(typeof v=="string"&&(v=d.from(v)),v.length!==b.key/8)throw new TypeError("invalid key length "+v.length);if(typeof y=="string"&&(y=d.from(y)),b.mode!=="GCM"&&y.length!==b.iv)throw new TypeError("invalid iv length "+y.length);return b.type==="stream"?new l(b.module,v,y):b.type==="auth"?new a(b.module,v,y):new h(b.module,v,y)}h.prototype._final=function(){var g=this._cache.flush();if(this._autopadding)return g=this._mode.encrypt(this,g),this._cipher.scrub(),g;if(!g.equals(m))throw this._cipher.scrub(),new Error("data not multiple of block length")},h.prototype.setAutoPadding=function(g){return this._autopadding=!!g,this},p.prototype.add=function(g){this.cache=d.concat([this.cache,g])},p.prototype.get=function(){if(this.cache.length>15){var g=this.cache.slice(0,16);return this.cache=this.cache.slice(16),g}return null},p.prototype.flush=function(){for(var g=16-this.cache.length,v=d.allocUnsafe(g),y=-1;++y<g;)v.writeUInt8(g,y);return d.concat([this.cache,v])},c.createCipheriv=x,c.createCipher=function(g,v){var y=o[g.toLowerCase()];if(!y)throw new TypeError("invalid suite type");var b=f(v,!1,y.key,y.iv);return x(g,b.key,b.iv)}},{"./aes":189,"./authCipher":190,"./modes":202,"./streamCipher":205,"cipher-base":221,evp_bytestokey:423,inherits:440,"safe-buffer":494}],194:[function(s,n,c){var o=s("safe-buffer").Buffer,a=o.alloc(16,0);function d(i){var u=o.allocUnsafe(16);return u.writeUInt32BE(i[0]>>>0,0),u.writeUInt32BE(i[1]>>>0,4),u.writeUInt32BE(i[2]>>>0,8),u.writeUInt32BE(i[3]>>>0,12),u}function l(i){this.h=i,this.state=o.alloc(16,0),this.cache=o.allocUnsafe(0)}l.prototype.ghash=function(i){for(var u=-1;++u<i.length;)this.state[u]^=i[u];this._multiply()},l.prototype._multiply=function(){for(var i,u,f,h=[(i=this.h).readUInt32BE(0),i.readUInt32BE(4),i.readUInt32BE(8),i.readUInt32BE(12)],m=[0,0,0,0],p=-1;++p<128;){for(this.state[~~(p/8)]&1<<7-p%8&&(m[0]^=h[0],m[1]^=h[1],m[2]^=h[2],m[3]^=h[3]),f=(1&h[3])!=0,u=3;u>0;u--)h[u]=h[u]>>>1|(1&h[u-1])<<31;h[0]=h[0]>>>1,f&&(h[0]=h[0]^225<<24)}this.state=d(m)},l.prototype.update=function(i){var u;for(this.cache=o.concat([this.cache,i]);this.cache.length>=16;)u=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(u)},l.prototype.final=function(i,u){return this.cache.length&&this.ghash(o.concat([this.cache,a],16)),this.ghash(d([0,i,0,u])),this.state},n.exports=l},{"safe-buffer":494}],195:[function(s,n,c){n.exports=function(o){for(var a,d=o.length;d--;){if((a=o.readUInt8(d))!==255){a++,o.writeUInt8(a,d);break}o.writeUInt8(0,d)}}},{}],196:[function(s,n,c){var o=s("buffer-xor");c.encrypt=function(a,d){var l=o(d,a._prev);return a._prev=a._cipher.encryptBlock(l),a._prev},c.decrypt=function(a,d){var l=a._prev;a._prev=d;var i=a._cipher.decryptBlock(d);return o(i,l)}},{"buffer-xor":219}],197:[function(s,n,c){var o=s("safe-buffer").Buffer,a=s("buffer-xor");function d(l,i,u){var f=i.length,h=a(i,l._cache);return l._cache=l._cache.slice(f),l._prev=o.concat([l._prev,u?i:h]),h}c.encrypt=function(l,i,u){for(var f,h=o.allocUnsafe(0);i.length;){if(l._cache.length===0&&(l._cache=l._cipher.encryptBlock(l._prev),l._prev=o.allocUnsafe(0)),!(l._cache.length<=i.length)){h=o.concat([h,d(l,i,u)]);break}f=l._cache.length,h=o.concat([h,d(l,i.slice(0,f),u)]),i=i.slice(f)}return h}},{"buffer-xor":219,"safe-buffer":494}],198:[function(s,n,c){var o=s("safe-buffer").Buffer;function a(l,i,u){for(var f,h,m=-1,p=0;++m<8;)f=i&1<<7-m?128:0,p+=(128&(h=l._cipher.encryptBlock(l._prev)[0]^f))>>m%8,l._prev=d(l._prev,u?f:h);return p}function d(l,i){var u=l.length,f=-1,h=o.allocUnsafe(l.length);for(l=o.concat([l,o.from([i])]);++f<u;)h[f]=l[f]<<1|l[f+1]>>7;return h}c.encrypt=function(l,i,u){for(var f=i.length,h=o.allocUnsafe(f),m=-1;++m<f;)h[m]=a(l,i[m],u);return h}},{"safe-buffer":494}],199:[function(s,n,c){var o=s("safe-buffer").Buffer;function a(d,l,i){var u=d._cipher.encryptBlock(d._prev)[0]^l;return d._prev=o.concat([d._prev.slice(1),o.from([i?l:u])]),u}c.encrypt=function(d,l,i){for(var u=l.length,f=o.allocUnsafe(u),h=-1;++h<u;)f[h]=a(d,l[h],i);return f}},{"safe-buffer":494}],200:[function(s,n,c){var o=s("buffer-xor"),a=s("safe-buffer").Buffer,d=s("../incr32");function l(i){var u=i._cipher.encryptBlockRaw(i._prev);return d(i._prev),u}c.encrypt=function(i,u){var f=Math.ceil(u.length/16),h=i._cache.length;i._cache=a.concat([i._cache,a.allocUnsafe(16*f)]);for(var m=0;m<f;m++){var p=l(i),x=h+16*m;i._cache.writeUInt32BE(p[0],x+0),i._cache.writeUInt32BE(p[1],x+4),i._cache.writeUInt32BE(p[2],x+8),i._cache.writeUInt32BE(p[3],x+12)}var g=i._cache.slice(0,u.length);return i._cache=i._cache.slice(u.length),o(u,g)}},{"../incr32":195,"buffer-xor":219,"safe-buffer":494}],201:[function(s,n,c){c.encrypt=function(o,a){return o._cipher.encryptBlock(a)},c.decrypt=function(o,a){return o._cipher.decryptBlock(a)}},{}],202:[function(s,n,c){var o={ECB:s("./ecb"),CBC:s("./cbc"),CFB:s("./cfb"),CFB8:s("./cfb8"),CFB1:s("./cfb1"),OFB:s("./ofb"),CTR:s("./ctr"),GCM:s("./ctr")},a=s("./list.json");for(var d in a)a[d].module=o[a[d].mode];n.exports=a},{"./cbc":196,"./cfb":197,"./cfb1":198,"./cfb8":199,"./ctr":200,"./ecb":201,"./list.json":203,"./ofb":204}],203:[function(s,n,c){n.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},{}],204:[function(s,n,c){(function(o){(function(){var a=s("buffer-xor");function d(l){return l._prev=l._cipher.encryptBlock(l._prev),l._prev}c.encrypt=function(l,i){for(;l._cache.length<i.length;)l._cache=o.concat([l._cache,d(l)]);var u=l._cache.slice(0,i.length);return l._cache=l._cache.slice(i.length),a(i,u)}}).call(this)}).call(this,s("buffer").Buffer)},{buffer:220,"buffer-xor":219}],205:[function(s,n,c){var o=s("./aes"),a=s("safe-buffer").Buffer,d=s("cipher-base");function l(i,u,f,h){d.call(this),this._cipher=new o.AES(u),this._prev=a.from(f),this._cache=a.allocUnsafe(0),this._secCache=a.allocUnsafe(0),this._decrypt=h,this._mode=i}s("inherits")(l,d),l.prototype._update=function(i){return this._mode.encrypt(this,i,this._decrypt)},l.prototype._final=function(){this._cipher.scrub()},n.exports=l},{"./aes":189,"cipher-base":221,inherits:440,"safe-buffer":494}],206:[function(s,n,c){var o=s("browserify-des"),a=s("browserify-aes/browser"),d=s("browserify-aes/modes"),l=s("browserify-des/modes"),i=s("evp_bytestokey");function u(h,m,p){if(h=h.toLowerCase(),d[h])return a.createCipheriv(h,m,p);if(l[h])return new o({key:m,iv:p,mode:h});throw new TypeError("invalid suite type")}function f(h,m,p){if(h=h.toLowerCase(),d[h])return a.createDecipheriv(h,m,p);if(l[h])return new o({key:m,iv:p,mode:h,decrypt:!0});throw new TypeError("invalid suite type")}c.createCipher=c.Cipher=function(h,m){var p,x;if(h=h.toLowerCase(),d[h])p=d[h].key,x=d[h].iv;else{if(!l[h])throw new TypeError("invalid suite type");p=8*l[h].key,x=l[h].iv}var g=i(m,!1,p,x);return u(h,g.key,g.iv)},c.createCipheriv=c.Cipheriv=u,c.createDecipher=c.Decipher=function(h,m){var p,x;if(h=h.toLowerCase(),d[h])p=d[h].key,x=d[h].iv;else{if(!l[h])throw new TypeError("invalid suite type");p=8*l[h].key,x=l[h].iv}var g=i(m,!1,p,x);return f(h,g.key,g.iv)},c.createDecipheriv=c.Decipheriv=f,c.listCiphers=c.getCiphers=function(){return Object.keys(l).concat(a.getCiphers())}},{"browserify-aes/browser":191,"browserify-aes/modes":202,"browserify-des":207,"browserify-des/modes":208,evp_bytestokey:423}],207:[function(s,n,c){var o=s("cipher-base"),a=s("des.js"),d=s("inherits"),l=s("safe-buffer").Buffer,i={"des-ede3-cbc":a.CBC.instantiate(a.EDE),"des-ede3":a.EDE,"des-ede-cbc":a.CBC.instantiate(a.EDE),"des-ede":a.EDE,"des-cbc":a.CBC.instantiate(a.DES),"des-ecb":a.DES};function u(f){o.call(this);var h,m=f.mode.toLowerCase(),p=i[m];h=f.decrypt?"decrypt":"encrypt";var x=f.key;l.isBuffer(x)||(x=l.from(x)),m!=="des-ede"&&m!=="des-ede-cbc"||(x=l.concat([x,x.slice(0,8)]));var g=f.iv;l.isBuffer(g)||(g=l.from(g)),this._des=p.create({key:x,iv:g,type:h})}i.des=i["des-cbc"],i.des3=i["des-ede3-cbc"],n.exports=u,d(u,o),u.prototype._update=function(f){return l.from(this._des.update(f))},u.prototype._final=function(){return l.from(this._des.final())}},{"cipher-base":221,"des.js":394,inherits:440,"safe-buffer":494}],208:[function(s,n,c){c["des-ecb"]={key:8,iv:0},c["des-cbc"]=c.des={key:8,iv:8},c["des-ede3-cbc"]=c.des3={key:24,iv:8},c["des-ede3"]={key:24,iv:0},c["des-ede-cbc"]={key:16,iv:8},c["des-ede"]={key:16,iv:0}},{}],209:[function(s,n,c){(function(o){(function(){var a=s("bn.js"),d=s("randombytes");function l(u){var f,h=u.modulus.byteLength();do f=new a(d(h));while(f.cmp(u.modulus)>=0||!f.umod(u.prime1)||!f.umod(u.prime2));return f}function i(u,f){var h=function(U){var L=l(U);return{blinder:L.toRed(a.mont(U.modulus)).redPow(new a(U.publicExponent)).fromRed(),unblinder:L.invm(U.modulus)}}(f),m=f.modulus.byteLength(),p=new a(u).mul(h.blinder).umod(f.modulus),x=p.toRed(a.mont(f.prime1)),g=p.toRed(a.mont(f.prime2)),v=f.coefficient,y=f.prime1,b=f.prime2,C=x.redPow(f.exponent1).fromRed(),T=g.redPow(f.exponent2).fromRed(),M=C.isub(T).imul(v).umod(y).imul(b);return T.iadd(M).imul(h.unblinder).umod(f.modulus).toArrayLike(o,"be",m)}i.getr=l,n.exports=i}).call(this)}).call(this,s("buffer").Buffer)},{"bn.js":186,buffer:220,randombytes:475}],210:[function(s,n,c){n.exports=s("./browser/algorithms.json")},{"./browser/algorithms.json":211}],211:[function(s,n,c){n.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}},{}],212:[function(s,n,c){n.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}},{}],213:[function(s,n,c){var o=s("safe-buffer").Buffer,a=s("create-hash"),d=s("readable-stream"),l=s("inherits"),i=s("./sign"),u=s("./verify"),f=s("./algorithms.json");function h(g){d.Writable.call(this);var v=f[g];if(!v)throw new Error("Unknown message digest");this._hashType=v.hash,this._hash=a(v.hash),this._tag=v.id,this._signType=v.sign}function m(g){d.Writable.call(this);var v=f[g];if(!v)throw new Error("Unknown message digest");this._hash=a(v.hash),this._tag=v.id,this._signType=v.sign}function p(g){return new h(g)}function x(g){return new m(g)}Object.keys(f).forEach(function(g){f[g].id=o.from(f[g].id,"hex"),f[g.toLowerCase()]=f[g]}),l(h,d.Writable),h.prototype._write=function(g,v,y){this._hash.update(g),y()},h.prototype.update=function(g,v){return typeof g=="string"&&(g=o.from(g,v)),this._hash.update(g),this},h.prototype.sign=function(g,v){this.end();var y=this._hash.digest(),b=i(y,g,this._hashType,this._signType,this._tag);return v?b.toString(v):b},l(m,d.Writable),m.prototype._write=function(g,v,y){this._hash.update(g),y()},m.prototype.update=function(g,v){return typeof g=="string"&&(g=o.from(g,v)),this._hash.update(g),this},m.prototype.verify=function(g,v,y){typeof v=="string"&&(v=o.from(v,y)),this.end();var b=this._hash.digest();return u(v,b,g,this._signType,this._tag)},n.exports={Sign:p,Verify:x,createSign:p,createVerify:x}},{"./algorithms.json":211,"./sign":214,"./verify":215,"create-hash":386,inherits:440,"readable-stream":491,"safe-buffer":494}],214:[function(s,n,c){var o=s("safe-buffer").Buffer,a=s("create-hmac"),d=s("browserify-rsa"),l=s("elliptic").ec,i=s("bn.js"),u=s("parse-asn1"),f=s("./curves.json");function h(g,v,y,b){if((g=o.from(g.toArray())).length<v.byteLength()){var C=o.alloc(v.byteLength()-g.length);g=o.concat([C,g])}var T=y.length,M=function(P,B){P=(P=m(P,B)).mod(B);var q=o.from(P.toArray());if(q.length<B.byteLength()){var z=o.alloc(B.byteLength()-q.length);q=o.concat([z,q])}return q}(y,v),U=o.alloc(T);U.fill(1);var L=o.alloc(T);return L=a(b,L).update(U).update(o.from([0])).update(g).update(M).digest(),U=a(b,L).update(U).digest(),{k:L=a(b,L).update(U).update(o.from([1])).update(g).update(M).digest(),v:U=a(b,L).update(U).digest()}}function m(g,v){var y=new i(g),b=(g.length<<3)-v.bitLength();return b>0&&y.ishrn(b),y}function p(g,v,y){var b,C;do{for(b=o.alloc(0);8*b.length<g.bitLength();)v.v=a(y,v.k).update(v.v).digest(),b=o.concat([b,v.v]);C=m(b,g),v.k=a(y,v.k).update(v.v).update(o.from([0])).digest(),v.v=a(y,v.k).update(v.v).digest()}while(C.cmp(g)!==-1);return C}function x(g,v,y,b){return g.toRed(i.mont(y)).redPow(v).fromRed().mod(b)}n.exports=function(g,v,y,b,C){var T=u(v);if(T.curve){if(b!=="ecdsa"&&b!=="ecdsa/rsa")throw new Error("wrong private key type");return function(P,B){var q=f[B.curve.join(".")];if(!q)throw new Error("unknown curve "+B.curve.join("."));var z=new l(q).keyFromPrivate(B.privateKey).sign(P);return o.from(z.toDER())}(g,T)}if(T.type==="dsa"){if(b!=="dsa")throw new Error("wrong private key type");return function(P,B,q){for(var z,k=B.params.priv_key,R=B.params.p,S=B.params.q,w=B.params.g,_=new i(0),j=m(P,S).mod(S),N=!1,E=h(k,S,P,q);N===!1;)z=p(S,E,q),_=x(w,z,R,S),(N=z.invm(S).imul(j.add(k.mul(_))).mod(S)).cmpn(0)===0&&(N=!1,_=new i(0));return function(I,D){I=I.toArray(),D=D.toArray(),128&I[0]&&(I=[0].concat(I)),128&D[0]&&(D=[0].concat(D));var V=[48,I.length+D.length+4,2,I.length];return V=V.concat(I,[2,D.length],D),o.from(V)}(_,N)}(g,T,y)}if(b!=="rsa"&&b!=="ecdsa/rsa")throw new Error("wrong private key type");g=o.concat([C,g]);for(var M=T.modulus.byteLength(),U=[0,1];g.length+U.length+1<M;)U.push(255);U.push(0);for(var L=-1;++L<g.length;)U.push(g[L]);return d(U,T)},n.exports.getKey=h,n.exports.makeKey=p},{"./curves.json":212,"bn.js":186,"browserify-rsa":209,"create-hmac":388,elliptic:405,"parse-asn1":459,"safe-buffer":494}],215:[function(s,n,c){var o=s("safe-buffer").Buffer,a=s("bn.js"),d=s("elliptic").ec,l=s("parse-asn1"),i=s("./curves.json");function u(f,h){if(f.cmpn(0)<=0)throw new Error("invalid sig");if(f.cmp(h)>=h)throw new Error("invalid sig")}n.exports=function(f,h,m,p,x){var g=l(m);if(g.type==="ec"){if(p!=="ecdsa"&&p!=="ecdsa/rsa")throw new Error("wrong public key type");return function(U,L,P){var B=i[P.data.algorithm.curve.join(".")];if(!B)throw new Error("unknown curve "+P.data.algorithm.curve.join("."));var q=new d(B),z=P.data.subjectPrivateKey.data;return q.verify(L,U,z)}(f,h,g)}if(g.type==="dsa"){if(p!=="dsa")throw new Error("wrong public key type");return function(U,L,P){var B=P.data.p,q=P.data.q,z=P.data.g,k=P.data.pub_key,R=l.signature.decode(U,"der"),S=R.s,w=R.r;u(S,q),u(w,q);var _=a.mont(B),j=S.invm(q);return z.toRed(_).redPow(new a(L).mul(j).mod(q)).fromRed().mul(k.toRed(_).redPow(w.mul(j).mod(q)).fromRed()).mod(B).mod(q).cmp(w)===0}(f,h,g)}if(p!=="rsa"&&p!=="ecdsa/rsa")throw new Error("wrong public key type");h=o.concat([x,h]);for(var v=g.modulus.byteLength(),y=[1],b=0;h.length+y.length+2<v;)y.push(255),b++;y.push(0);for(var C=-1;++C<h.length;)y.push(h[C]);y=o.from(y);var T=a.mont(g.modulus);f=(f=new a(f).toRed(T)).redPow(new a(g.publicExponent)),f=o.from(f.fromRed().toArray());var M=b<8?1:0;for(v=Math.min(f.length,y.length),f.length!==y.length&&(M=1),C=-1;++C<v;)M|=f[C]^y[C];return M===0}},{"./curves.json":212,"bn.js":186,elliptic:405,"parse-asn1":459,"safe-buffer":494}],216:[function(s,n,c){},{}],217:[function(s,n,c){var o=s("buffer"),a=o.Buffer;function d(i,u){for(var f in i)u[f]=i[f]}function l(i,u,f){return a(i,u,f)}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?n.exports=o:(d(o,c),c.Buffer=l),d(a,l),l.from=function(i,u,f){if(typeof i=="number")throw new TypeError("Argument must not be a number");return a(i,u,f)},l.alloc=function(i,u,f){if(typeof i!="number")throw new TypeError("Argument must be a number");var h=a(i);return u!==void 0?typeof f=="string"?h.fill(u,f):h.fill(u):h.fill(0),h},l.allocUnsafe=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return a(i)},l.allocUnsafeSlow=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return o.SlowBuffer(i)}},{buffer:220}],218:[function(s,n,c){var o=s("safe-buffer").Buffer,a=o.isEncoding||function(g){switch((g=""+g)&&g.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function d(g){var v;switch(this.encoding=function(y){var b=function(C){if(!C)return"utf8";for(var T;;)switch(C){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return C;default:if(T)return;C=(""+C).toLowerCase(),T=!0}}(y);if(typeof b!="string"&&(o.isEncoding===a||!a(y)))throw new Error("Unknown encoding: "+y);return b||y}(g),this.encoding){case"utf16le":this.text=u,this.end=f,v=4;break;case"utf8":this.fillLast=i,v=4;break;case"base64":this.text=h,this.end=m,v=3;break;default:return this.write=p,void(this.end=x)}this.lastNeed=0,this.lastTotal=0,this.lastChar=o.allocUnsafe(v)}function l(g){return g<=127?0:g>>5==6?2:g>>4==14?3:g>>3==30?4:g>>6==2?-1:-2}function i(g){var v=this.lastTotal-this.lastNeed,y=function(b,C,T){if((192&C[0])!=128)return b.lastNeed=0,"";if(b.lastNeed>1&&C.length>1){if((192&C[1])!=128)return b.lastNeed=1,"";if(b.lastNeed>2&&C.length>2&&(192&C[2])!=128)return b.lastNeed=2,""}}(this,g);return y!==void 0?y:this.lastNeed<=g.length?(g.copy(this.lastChar,v,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(g.copy(this.lastChar,v,0,g.length),void(this.lastNeed-=g.length))}function u(g,v){if((g.length-v)%2==0){var y=g.toString("utf16le",v);if(y){var b=y.charCodeAt(y.length-1);if(b>=55296&&b<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1],y.slice(0,-1)}return y}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=g[g.length-1],g.toString("utf16le",v,g.length-1)}function f(g){var v=g&&g.length?this.write(g):"";if(this.lastNeed){var y=this.lastTotal-this.lastNeed;return v+this.lastChar.toString("utf16le",0,y)}return v}function h(g,v){var y=(g.length-v)%3;return y===0?g.toString("base64",v):(this.lastNeed=3-y,this.lastTotal=3,y===1?this.lastChar[0]=g[g.length-1]:(this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1]),g.toString("base64",v,g.length-y))}function m(g){var v=g&&g.length?this.write(g):"";return this.lastNeed?v+this.lastChar.toString("base64",0,3-this.lastNeed):v}function p(g){return g.toString(this.encoding)}function x(g){return g&&g.length?this.write(g):""}c.StringDecoder=d,d.prototype.write=function(g){if(g.length===0)return"";var v,y;if(this.lastNeed){if((v=this.fillLast(g))===void 0)return"";y=this.lastNeed,this.lastNeed=0}else y=0;return y<g.length?v?v+this.text(g,y):this.text(g,y):v||""},d.prototype.end=function(g){var v=g&&g.length?this.write(g):"";return this.lastNeed?v+"":v},d.prototype.text=function(g,v){var y=function(C,T,M){var U=T.length-1;if(U<M)return 0;var L=l(T[U]);return L>=0?(L>0&&(C.lastNeed=L-1),L):--U<M||L===-2?0:(L=l(T[U]))>=0?(L>0&&(C.lastNeed=L-2),L):--U<M||L===-2?0:(L=l(T[U]))>=0?(L>0&&(L===2?L=0:C.lastNeed=L-3),L):0}(this,g,v);if(!this.lastNeed)return g.toString("utf8",v);this.lastTotal=y;var b=g.length-(y-this.lastNeed);return g.copy(this.lastChar,0,b),g.toString("utf8",v,b)},d.prototype.fillLast=function(g){if(this.lastNeed<=g.length)return g.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);g.copy(this.lastChar,this.lastTotal-this.lastNeed,0,g.length),this.lastNeed-=g.length}},{"safe-buffer":217}],219:[function(s,n,c){(function(o){(function(){n.exports=function(a,d){for(var l=Math.min(a.length,d.length),i=new o(l),u=0;u<l;++u)i[u]=a[u]^d[u];return i}}).call(this)}).call(this,s("buffer").Buffer)},{buffer:220}],220:[function(s,n,c){(function(o){(function(){var a=s("base64-js"),d=s("ieee754");c.Buffer=i,c.SlowBuffer=function(F){return+F!=F&&(F=0),i.alloc(+F)},c.INSPECT_MAX_BYTES=50;function l(F){if(F>2147483647)throw new RangeError('The value "'+F+'" is invalid for option "size"');var O=new Uint8Array(F);return O.__proto__=i.prototype,O}function i(F,O,W){if(typeof F=="number"){if(typeof O=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(F)}return u(F,O,W)}function u(F,O,W){if(typeof F=="string")return function(X,te){if(typeof te=="string"&&te!==""||(te="utf8"),!i.isEncoding(te))throw new TypeError("Unknown encoding: "+te);var de=0|x(X,te),xe=l(de),ne=xe.write(X,te);return ne!==de&&(xe=xe.slice(0,ne)),xe}(F,O);if(ArrayBuffer.isView(F))return m(F);if(F==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof F);if($(F,ArrayBuffer)||F&&$(F.buffer,ArrayBuffer))return function(X,te,de){if(te<0||X.byteLength<te)throw new RangeError('"offset" is outside of buffer bounds');if(X.byteLength<te+(de||0))throw new RangeError('"length" is outside of buffer bounds');var xe;return xe=te===void 0&&de===void 0?new Uint8Array(X):de===void 0?new Uint8Array(X,te):new Uint8Array(X,te,de),xe.__proto__=i.prototype,xe}(F,O,W);if(typeof F=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var K=F.valueOf&&F.valueOf();if(K!=null&&K!==F)return i.from(K,O,W);var Q=function(X){if(i.isBuffer(X)){var te=0|p(X.length),de=l(te);return de.length===0||X.copy(de,0,0,te),de}if(X.length!==void 0)return typeof X.length!="number"||Y(X.length)?l(0):m(X);if(X.type==="Buffer"&&Array.isArray(X.data))return m(X.data)}(F);if(Q)return Q;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof F[Symbol.toPrimitive]=="function")return i.from(F[Symbol.toPrimitive]("string"),O,W);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof F)}function f(F){if(typeof F!="number")throw new TypeError('"size" argument must be of type number');if(F<0)throw new RangeError('The value "'+F+'" is invalid for option "size"')}function h(F){return f(F),l(F<0?0:0|p(F))}function m(F){for(var O=F.length<0?0:0|p(F.length),W=l(O),K=0;K<O;K+=1)W[K]=255&F[K];return W}function p(F){if(F>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647 .toString(16)+" bytes");return 0|F}function x(F,O){if(i.isBuffer(F))return F.length;if(ArrayBuffer.isView(F)||$(F,ArrayBuffer))return F.byteLength;if(typeof F!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof F);var W=F.length,K=arguments.length>2&&arguments[2]===!0;if(!K&&W===0)return 0;for(var Q=!1;;)switch(O){case"ascii":case"latin1":case"binary":return W;case"utf8":case"utf-8":return V(F).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*W;case"hex":return W>>>1;case"base64":return H(F).length;default:if(Q)return K?-1:V(F).length;O=(""+O).toLowerCase(),Q=!0}}function g(F,O,W){var K=!1;if((O===void 0||O<0)&&(O=0),O>this.length||((W===void 0||W>this.length)&&(W=this.length),W<=0)||(W>>>=0)<=(O>>>=0))return"";for(F||(F="utf8");;)switch(F){case"hex":return R(this,O,W);case"utf8":case"utf-8":return q(this,O,W);case"ascii":return z(this,O,W);case"latin1":case"binary":return k(this,O,W);case"base64":return B(this,O,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,O,W);default:if(K)throw new TypeError("Unknown encoding: "+F);F=(F+"").toLowerCase(),K=!0}}function v(F,O,W){var K=F[O];F[O]=F[W],F[W]=K}function y(F,O,W,K,Q){if(F.length===0)return-1;if(typeof W=="string"?(K=W,W=0):W>2147483647?W=2147483647:W<-2147483648&&(W=-2147483648),Y(W=+W)&&(W=Q?0:F.length-1),W<0&&(W=F.length+W),W>=F.length){if(Q)return-1;W=F.length-1}else if(W<0){if(!Q)return-1;W=0}if(typeof O=="string"&&(O=i.from(O,K)),i.isBuffer(O))return O.length===0?-1:b(F,O,W,K,Q);if(typeof O=="number")return O&=255,typeof Uint8Array.prototype.indexOf=="function"?Q?Uint8Array.prototype.indexOf.call(F,O,W):Uint8Array.prototype.lastIndexOf.call(F,O,W):b(F,[O],W,K,Q);throw new TypeError("val must be string, number or Buffer")}function b(F,O,W,K,Q){var X,te=1,de=F.length,xe=O.length;if(K!==void 0&&((K=String(K).toLowerCase())==="ucs2"||K==="ucs-2"||K==="utf16le"||K==="utf-16le")){if(F.length<2||O.length<2)return-1;te=2,de/=2,xe/=2,W/=2}function ne(Ce,Oe){return te===1?Ce[Oe]:Ce.readUInt16BE(Oe*te)}if(Q){var ge=-1;for(X=W;X<de;X++)if(ne(F,X)===ne(O,ge===-1?0:X-ge)){if(ge===-1&&(ge=X),X-ge+1===xe)return ge*te}else ge!==-1&&(X-=X-ge),ge=-1}else for(W+xe>de&&(W=de-xe),X=W;X>=0;X--){for(var be=!0,Ie=0;Ie<xe;Ie++)if(ne(F,X+Ie)!==ne(O,Ie)){be=!1;break}if(be)return X}return-1}function C(F,O,W,K){W=Number(W)||0;var Q=F.length-W;K?(K=Number(K))>Q&&(K=Q):K=Q;var X=O.length;K>X/2&&(K=X/2);for(var te=0;te<K;++te){var de=parseInt(O.substr(2*te,2),16);if(Y(de))return te;F[W+te]=de}return te}function T(F,O,W,K){return G(V(O,F.length-W),F,W,K)}function M(F,O,W,K){return G(function(Q){for(var X=[],te=0;te<Q.length;++te)X.push(255&Q.charCodeAt(te));return X}(O),F,W,K)}function U(F,O,W,K){return M(F,O,W,K)}function L(F,O,W,K){return G(H(O),F,W,K)}function P(F,O,W,K){return G(function(Q,X){for(var te,de,xe,ne=[],ge=0;ge<Q.length&&!((X-=2)<0);++ge)te=Q.charCodeAt(ge),de=te>>8,xe=te%256,ne.push(xe),ne.push(de);return ne}(O,F.length-W),F,W,K)}function B(F,O,W){return O===0&&W===F.length?a.fromByteArray(F):a.fromByteArray(F.slice(O,W))}function q(F,O,W){W=Math.min(F.length,W);for(var K=[],Q=O;Q<W;){var X,te,de,xe,ne=F[Q],ge=null,be=ne>239?4:ne>223?3:ne>191?2:1;if(Q+be<=W)switch(be){case 1:ne<128&&(ge=ne);break;case 2:(192&(X=F[Q+1]))==128&&(xe=(31&ne)<<6|63&X)>127&&(ge=xe);break;case 3:X=F[Q+1],te=F[Q+2],(192&X)==128&&(192&te)==128&&(xe=(15&ne)<<12|(63&X)<<6|63&te)>2047&&(xe<55296||xe>57343)&&(ge=xe);break;case 4:X=F[Q+1],te=F[Q+2],de=F[Q+3],(192&X)==128&&(192&te)==128&&(192&de)==128&&(xe=(15&ne)<<18|(63&X)<<12|(63&te)<<6|63&de)>65535&&xe<1114112&&(ge=xe)}ge===null?(ge=65533,be=1):ge>65535&&(ge-=65536,K.push(ge>>>10&1023|55296),ge=56320|1023&ge),K.push(ge),Q+=be}return function(Ie){var Ce=Ie.length;if(Ce<=4096)return String.fromCharCode.apply(String,Ie);for(var Oe="",Ee=0;Ee<Ce;)Oe+=String.fromCharCode.apply(String,Ie.slice(Ee,Ee+=4096));return Oe}(K)}c.kMaxLength=2147483647,i.TYPED_ARRAY_SUPPORT=function(){try{var F=new Uint8Array(1);return F.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},F.foo()===42}catch{return!1}}(),i.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),i.poolSize=8192,i.from=function(F,O,W){return u(F,O,W)},i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,i.alloc=function(F,O,W){return function(K,Q,X){return f(K),K<=0?l(K):Q!==void 0?typeof X=="string"?l(K).fill(Q,X):l(K).fill(Q):l(K)}(F,O,W)},i.allocUnsafe=function(F){return h(F)},i.allocUnsafeSlow=function(F){return h(F)},i.isBuffer=function(F){return F!=null&&F._isBuffer===!0&&F!==i.prototype},i.compare=function(F,O){if($(F,Uint8Array)&&(F=i.from(F,F.offset,F.byteLength)),$(O,Uint8Array)&&(O=i.from(O,O.offset,O.byteLength)),!i.isBuffer(F)||!i.isBuffer(O))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(F===O)return 0;for(var W=F.length,K=O.length,Q=0,X=Math.min(W,K);Q<X;++Q)if(F[Q]!==O[Q]){W=F[Q],K=O[Q];break}return W<K?-1:K<W?1:0},i.isEncoding=function(F){switch(String(F).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(F,O){if(!Array.isArray(F))throw new TypeError('"list" argument must be an Array of Buffers');if(F.length===0)return i.alloc(0);var W;if(O===void 0)for(O=0,W=0;W<F.length;++W)O+=F[W].length;var K=i.allocUnsafe(O),Q=0;for(W=0;W<F.length;++W){var X=F[W];if($(X,Uint8Array)&&(X=i.from(X)),!i.isBuffer(X))throw new TypeError('"list" argument must be an Array of Buffers');X.copy(K,Q),Q+=X.length}return K},i.byteLength=x,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var F=this.length;if(F%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var O=0;O<F;O+=2)v(this,O,O+1);return this},i.prototype.swap32=function(){var F=this.length;if(F%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var O=0;O<F;O+=4)v(this,O,O+3),v(this,O+1,O+2);return this},i.prototype.swap64=function(){var F=this.length;if(F%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var O=0;O<F;O+=8)v(this,O,O+7),v(this,O+1,O+6),v(this,O+2,O+5),v(this,O+3,O+4);return this},i.prototype.toString=function(){var F=this.length;return F===0?"":arguments.length===0?q(this,0,F):g.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(F){if(!i.isBuffer(F))throw new TypeError("Argument must be a Buffer");return this===F||i.compare(this,F)===0},i.prototype.inspect=function(){var F="",O=c.INSPECT_MAX_BYTES;return F=this.toString("hex",0,O).replace(/(.{2})/g,"$1 ").trim(),this.length>O&&(F+=" ... "),"<Buffer "+F+">"},i.prototype.compare=function(F,O,W,K,Q){if($(F,Uint8Array)&&(F=i.from(F,F.offset,F.byteLength)),!i.isBuffer(F))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof F);if(O===void 0&&(O=0),W===void 0&&(W=F?F.length:0),K===void 0&&(K=0),Q===void 0&&(Q=this.length),O<0||W>F.length||K<0||Q>this.length)throw new RangeError("out of range index");if(K>=Q&&O>=W)return 0;if(K>=Q)return-1;if(O>=W)return 1;if(this===F)return 0;for(var X=(Q>>>=0)-(K>>>=0),te=(W>>>=0)-(O>>>=0),de=Math.min(X,te),xe=this.slice(K,Q),ne=F.slice(O,W),ge=0;ge<de;++ge)if(xe[ge]!==ne[ge]){X=xe[ge],te=ne[ge];break}return X<te?-1:te<X?1:0},i.prototype.includes=function(F,O,W){return this.indexOf(F,O,W)!==-1},i.prototype.indexOf=function(F,O,W){return y(this,F,O,W,!0)},i.prototype.lastIndexOf=function(F,O,W){return y(this,F,O,W,!1)},i.prototype.write=function(F,O,W,K){if(O===void 0)K="utf8",W=this.length,O=0;else if(W===void 0&&typeof O=="string")K=O,W=this.length,O=0;else{if(!isFinite(O))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");O>>>=0,isFinite(W)?(W>>>=0,K===void 0&&(K="utf8")):(K=W,W=void 0)}var Q=this.length-O;if((W===void 0||W>Q)&&(W=Q),F.length>0&&(W<0||O<0)||O>this.length)throw new RangeError("Attempt to write outside buffer bounds");K||(K="utf8");for(var X=!1;;)switch(K){case"hex":return C(this,F,O,W);case"utf8":case"utf-8":return T(this,F,O,W);case"ascii":return M(this,F,O,W);case"latin1":case"binary":return U(this,F,O,W);case"base64":return L(this,F,O,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,F,O,W);default:if(X)throw new TypeError("Unknown encoding: "+K);K=(""+K).toLowerCase(),X=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function z(F,O,W){var K="";W=Math.min(F.length,W);for(var Q=O;Q<W;++Q)K+=String.fromCharCode(127&F[Q]);return K}function k(F,O,W){var K="";W=Math.min(F.length,W);for(var Q=O;Q<W;++Q)K+=String.fromCharCode(F[Q]);return K}function R(F,O,W){var K=F.length;(!O||O<0)&&(O=0),(!W||W<0||W>K)&&(W=K);for(var Q="",X=O;X<W;++X)Q+=D(F[X]);return Q}function S(F,O,W){for(var K=F.slice(O,W),Q="",X=0;X<K.length;X+=2)Q+=String.fromCharCode(K[X]+256*K[X+1]);return Q}function w(F,O,W){if(F%1!=0||F<0)throw new RangeError("offset is not uint");if(F+O>W)throw new RangeError("Trying to access beyond buffer length")}function _(F,O,W,K,Q,X){if(!i.isBuffer(F))throw new TypeError('"buffer" argument must be a Buffer instance');if(O>Q||O<X)throw new RangeError('"value" argument is out of bounds');if(W+K>F.length)throw new RangeError("Index out of range")}function j(F,O,W,K,Q,X){if(W+K>F.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("Index out of range")}function N(F,O,W,K,Q){return O=+O,W>>>=0,Q||j(F,0,W,4),d.write(F,O,W,K,23,4),W+4}function E(F,O,W,K,Q){return O=+O,W>>>=0,Q||j(F,0,W,8),d.write(F,O,W,K,52,8),W+8}i.prototype.slice=function(F,O){var W=this.length;(F=~~F)<0?(F+=W)<0&&(F=0):F>W&&(F=W),(O=O===void 0?W:~~O)<0?(O+=W)<0&&(O=0):O>W&&(O=W),O<F&&(O=F);var K=this.subarray(F,O);return K.__proto__=i.prototype,K},i.prototype.readUIntLE=function(F,O,W){F>>>=0,O>>>=0,W||w(F,O,this.length);for(var K=this[F],Q=1,X=0;++X<O&&(Q*=256);)K+=this[F+X]*Q;return K},i.prototype.readUIntBE=function(F,O,W){F>>>=0,O>>>=0,W||w(F,O,this.length);for(var K=this[F+--O],Q=1;O>0&&(Q*=256);)K+=this[F+--O]*Q;return K},i.prototype.readUInt8=function(F,O){return F>>>=0,O||w(F,1,this.length),this[F]},i.prototype.readUInt16LE=function(F,O){return F>>>=0,O||w(F,2,this.length),this[F]|this[F+1]<<8},i.prototype.readUInt16BE=function(F,O){return F>>>=0,O||w(F,2,this.length),this[F]<<8|this[F+1]},i.prototype.readUInt32LE=function(F,O){return F>>>=0,O||w(F,4,this.length),(this[F]|this[F+1]<<8|this[F+2]<<16)+16777216*this[F+3]},i.prototype.readUInt32BE=function(F,O){return F>>>=0,O||w(F,4,this.length),16777216*this[F]+(this[F+1]<<16|this[F+2]<<8|this[F+3])},i.prototype.readIntLE=function(F,O,W){F>>>=0,O>>>=0,W||w(F,O,this.length);for(var K=this[F],Q=1,X=0;++X<O&&(Q*=256);)K+=this[F+X]*Q;return K>=(Q*=128)&&(K-=Math.pow(2,8*O)),K},i.prototype.readIntBE=function(F,O,W){F>>>=0,O>>>=0,W||w(F,O,this.length);for(var K=O,Q=1,X=this[F+--K];K>0&&(Q*=256);)X+=this[F+--K]*Q;return X>=(Q*=128)&&(X-=Math.pow(2,8*O)),X},i.prototype.readInt8=function(F,O){return F>>>=0,O||w(F,1,this.length),128&this[F]?-1*(255-this[F]+1):this[F]},i.prototype.readInt16LE=function(F,O){F>>>=0,O||w(F,2,this.length);var W=this[F]|this[F+1]<<8;return 32768&W?4294901760|W:W},i.prototype.readInt16BE=function(F,O){F>>>=0,O||w(F,2,this.length);var W=this[F+1]|this[F]<<8;return 32768&W?4294901760|W:W},i.prototype.readInt32LE=function(F,O){return F>>>=0,O||w(F,4,this.length),this[F]|this[F+1]<<8|this[F+2]<<16|this[F+3]<<24},i.prototype.readInt32BE=function(F,O){return F>>>=0,O||w(F,4,this.length),this[F]<<24|this[F+1]<<16|this[F+2]<<8|this[F+3]},i.prototype.readFloatLE=function(F,O){return F>>>=0,O||w(F,4,this.length),d.read(this,F,!0,23,4)},i.prototype.readFloatBE=function(F,O){return F>>>=0,O||w(F,4,this.length),d.read(this,F,!1,23,4)},i.prototype.readDoubleLE=function(F,O){return F>>>=0,O||w(F,8,this.length),d.read(this,F,!0,52,8)},i.prototype.readDoubleBE=function(F,O){return F>>>=0,O||w(F,8,this.length),d.read(this,F,!1,52,8)},i.prototype.writeUIntLE=function(F,O,W,K){F=+F,O>>>=0,W>>>=0,K||_(this,F,O,W,Math.pow(2,8*W)-1,0);var Q=1,X=0;for(this[O]=255&F;++X<W&&(Q*=256);)this[O+X]=F/Q&255;return O+W},i.prototype.writeUIntBE=function(F,O,W,K){F=+F,O>>>=0,W>>>=0,K||_(this,F,O,W,Math.pow(2,8*W)-1,0);var Q=W-1,X=1;for(this[O+Q]=255&F;--Q>=0&&(X*=256);)this[O+Q]=F/X&255;return O+W},i.prototype.writeUInt8=function(F,O,W){return F=+F,O>>>=0,W||_(this,F,O,1,255,0),this[O]=255&F,O+1},i.prototype.writeUInt16LE=function(F,O,W){return F=+F,O>>>=0,W||_(this,F,O,2,65535,0),this[O]=255&F,this[O+1]=F>>>8,O+2},i.prototype.writeUInt16BE=function(F,O,W){return F=+F,O>>>=0,W||_(this,F,O,2,65535,0),this[O]=F>>>8,this[O+1]=255&F,O+2},i.prototype.writeUInt32LE=function(F,O,W){return F=+F,O>>>=0,W||_(this,F,O,4,4294967295,0),this[O+3]=F>>>24,this[O+2]=F>>>16,this[O+1]=F>>>8,this[O]=255&F,O+4},i.prototype.writeUInt32BE=function(F,O,W){return F=+F,O>>>=0,W||_(this,F,O,4,4294967295,0),this[O]=F>>>24,this[O+1]=F>>>16,this[O+2]=F>>>8,this[O+3]=255&F,O+4},i.prototype.writeIntLE=function(F,O,W,K){if(F=+F,O>>>=0,!K){var Q=Math.pow(2,8*W-1);_(this,F,O,W,Q-1,-Q)}var X=0,te=1,de=0;for(this[O]=255&F;++X<W&&(te*=256);)F<0&&de===0&&this[O+X-1]!==0&&(de=1),this[O+X]=(F/te>>0)-de&255;return O+W},i.prototype.writeIntBE=function(F,O,W,K){if(F=+F,O>>>=0,!K){var Q=Math.pow(2,8*W-1);_(this,F,O,W,Q-1,-Q)}var X=W-1,te=1,de=0;for(this[O+X]=255&F;--X>=0&&(te*=256);)F<0&&de===0&&this[O+X+1]!==0&&(de=1),this[O+X]=(F/te>>0)-de&255;return O+W},i.prototype.writeInt8=function(F,O,W){return F=+F,O>>>=0,W||_(this,F,O,1,127,-128),F<0&&(F=255+F+1),this[O]=255&F,O+1},i.prototype.writeInt16LE=function(F,O,W){return F=+F,O>>>=0,W||_(this,F,O,2,32767,-32768),this[O]=255&F,this[O+1]=F>>>8,O+2},i.prototype.writeInt16BE=function(F,O,W){return F=+F,O>>>=0,W||_(this,F,O,2,32767,-32768),this[O]=F>>>8,this[O+1]=255&F,O+2},i.prototype.writeInt32LE=function(F,O,W){return F=+F,O>>>=0,W||_(this,F,O,4,2147483647,-2147483648),this[O]=255&F,this[O+1]=F>>>8,this[O+2]=F>>>16,this[O+3]=F>>>24,O+4},i.prototype.writeInt32BE=function(F,O,W){return F=+F,O>>>=0,W||_(this,F,O,4,2147483647,-2147483648),F<0&&(F=4294967295+F+1),this[O]=F>>>24,this[O+1]=F>>>16,this[O+2]=F>>>8,this[O+3]=255&F,O+4},i.prototype.writeFloatLE=function(F,O,W){return N(this,F,O,!0,W)},i.prototype.writeFloatBE=function(F,O,W){return N(this,F,O,!1,W)},i.prototype.writeDoubleLE=function(F,O,W){return E(this,F,O,!0,W)},i.prototype.writeDoubleBE=function(F,O,W){return E(this,F,O,!1,W)},i.prototype.copy=function(F,O,W,K){if(!i.isBuffer(F))throw new TypeError("argument should be a Buffer");if(W||(W=0),K||K===0||(K=this.length),O>=F.length&&(O=F.length),O||(O=0),K>0&&K<W&&(K=W),K===W||F.length===0||this.length===0)return 0;if(O<0)throw new RangeError("targetStart out of bounds");if(W<0||W>=this.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("sourceEnd out of bounds");K>this.length&&(K=this.length),F.length-O<K-W&&(K=F.length-O+W);var Q=K-W;if(this===F&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(O,W,K);else if(this===F&&W<O&&O<K)for(var X=Q-1;X>=0;--X)F[X+O]=this[X+W];else Uint8Array.prototype.set.call(F,this.subarray(W,K),O);return Q},i.prototype.fill=function(F,O,W,K){if(typeof F=="string"){if(typeof O=="string"?(K=O,O=0,W=this.length):typeof W=="string"&&(K=W,W=this.length),K!==void 0&&typeof K!="string")throw new TypeError("encoding must be a string");if(typeof K=="string"&&!i.isEncoding(K))throw new TypeError("Unknown encoding: "+K);if(F.length===1){var Q=F.charCodeAt(0);(K==="utf8"&&Q<128||K==="latin1")&&(F=Q)}}else typeof F=="number"&&(F&=255);if(O<0||this.length<O||this.length<W)throw new RangeError("Out of range index");if(W<=O)return this;var X;if(O>>>=0,W=W===void 0?this.length:W>>>0,F||(F=0),typeof F=="number")for(X=O;X<W;++X)this[X]=F;else{var te=i.isBuffer(F)?F:i.from(F,K),de=te.length;if(de===0)throw new TypeError('The value "'+F+'" is invalid for argument "value"');for(X=0;X<W-O;++X)this[X+O]=te[X%de]}return this};var I=/[^+/0-9A-Za-z-_]/g;function D(F){return F<16?"0"+F.toString(16):F.toString(16)}function V(F,O){var W;O=O||1/0;for(var K=F.length,Q=null,X=[],te=0;te<K;++te){if((W=F.charCodeAt(te))>55295&&W<57344){if(!Q){if(W>56319){(O-=3)>-1&&X.push(239,191,189);continue}if(te+1===K){(O-=3)>-1&&X.push(239,191,189);continue}Q=W;continue}if(W<56320){(O-=3)>-1&&X.push(239,191,189),Q=W;continue}W=65536+(Q-55296<<10|W-56320)}else Q&&(O-=3)>-1&&X.push(239,191,189);if(Q=null,W<128){if((O-=1)<0)break;X.push(W)}else if(W<2048){if((O-=2)<0)break;X.push(W>>6|192,63&W|128)}else if(W<65536){if((O-=3)<0)break;X.push(W>>12|224,W>>6&63|128,63&W|128)}else{if(!(W<1114112))throw new Error("Invalid code point");if((O-=4)<0)break;X.push(W>>18|240,W>>12&63|128,W>>6&63|128,63&W|128)}}return X}function H(F){return a.toByteArray(function(O){if((O=(O=O.split("=")[0]).trim().replace(I,"")).length<2)return"";for(;O.length%4!=0;)O+="=";return O}(F))}function G(F,O,W,K){for(var Q=0;Q<K&&!(Q+W>=O.length||Q>=F.length);++Q)O[Q+W]=F[Q];return Q}function $(F,O){return F instanceof O||F!=null&&F.constructor!=null&&F.constructor.name!=null&&F.constructor.name===O.name}function Y(F){return F!=F}}).call(this)}).call(this,s("buffer").Buffer)},{"base64-js":185,buffer:220,ieee754:439}],221:[function(s,n,c){var o=s("safe-buffer").Buffer,a=s("stream").Transform,d=s("string_decoder").StringDecoder;function l(i){a.call(this),this.hashMode=typeof i=="string",this.hashMode?this[i]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}s("inherits")(l,a),l.prototype.update=function(i,u,f){typeof i=="string"&&(i=o.from(i,u));var h=this._update(i);return this.hashMode?this:(f&&(h=this._toString(h,f)),h)},l.prototype.setAutoPadding=function(){},l.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},l.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},l.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},l.prototype._transform=function(i,u,f){var h;try{this.hashMode?this._update(i):this.push(this._update(i))}catch(m){h=m}finally{f(h)}},l.prototype._flush=function(i){var u;try{this.push(this.__final())}catch(f){u=f}i(u)},l.prototype._finalOrDigest=function(i){var u=this.__final()||o.alloc(0);return i&&(u=this._toString(u,i,!0)),u},l.prototype._toString=function(i,u,f){if(this._decoder||(this._decoder=new d(u),this._encoding=u),this._encoding!==u)throw new Error("can't switch encodings");var h=this._decoder.write(i);return f&&(h+=this._decoder.end()),h},n.exports=l},{inherits:440,"safe-buffer":494,stream:505,string_decoder:218}],222:[function(s,n,c){var o=s("../internals/is-callable"),a=s("../internals/try-to-string"),d=TypeError;n.exports=function(l){if(o(l))return l;throw new d(a(l)+" is not a function")}},{"../internals/is-callable":285,"../internals/try-to-string":349}],223:[function(s,n,c){var o=s("../internals/is-constructor"),a=s("../internals/try-to-string"),d=TypeError;n.exports=function(l){if(o(l))return l;throw new d(a(l)+" is not a constructor")}},{"../internals/is-constructor":286,"../internals/try-to-string":349}],224:[function(s,n,c){var o=s("../internals/is-callable"),a=String,d=TypeError;n.exports=function(l){if(typeof l=="object"||o(l))return l;throw new d("Can't set "+a(l)+" as a prototype")}},{"../internals/is-callable":285}],225:[function(s,n,c){var o=s("../internals/well-known-symbol"),a=s("../internals/object-create"),d=s("../internals/object-define-property").f,l=o("unscopables"),i=Array.prototype;i[l]===void 0&&d(i,l,{configurable:!0,value:a(null)}),n.exports=function(u){i[l][u]=!0}},{"../internals/object-create":306,"../internals/object-define-property":308,"../internals/well-known-symbol":357}],226:[function(s,n,c){var o=s("../internals/object-is-prototype-of"),a=TypeError;n.exports=function(d,l){if(o(l,d))return d;throw new a("Incorrect invocation")}},{"../internals/object-is-prototype-of":314}],227:[function(s,n,c){var o=s("../internals/is-object"),a=String,d=TypeError;n.exports=function(l){if(o(l))return l;throw new d(a(l)+" is not an object")}},{"../internals/is-object":289}],228:[function(s,n,c){var o=s("../internals/to-indexed-object"),a=s("../internals/to-absolute-index"),d=s("../internals/length-of-array-like"),l=function(i){return function(u,f,h){var m,p=o(u),x=d(p),g=a(h,x);if(i&&f!=f){for(;x>g;)if((m=p[g++])!=m)return!0}else for(;x>g;g++)if((i||g in p)&&p[g]===f)return i||g||0;return!i&&-1}};n.exports={includes:l(!0),indexOf:l(!1)}},{"../internals/length-of-array-like":299,"../internals/to-absolute-index":340,"../internals/to-indexed-object":341}],229:[function(s,n,c){var o=s("../internals/function-bind-context"),a=s("../internals/function-uncurry-this"),d=s("../internals/indexed-object"),l=s("../internals/to-object"),i=s("../internals/length-of-array-like"),u=s("../internals/array-species-create"),f=a([].push),h=function(m){var p=m===1,x=m===2,g=m===3,v=m===4,y=m===6,b=m===7,C=m===5||y;return function(T,M,U,L){for(var P,B,q=l(T),z=d(q),k=o(M,U),R=i(z),S=0,w=L||u,_=p?w(T,R):x||b?w(T,0):void 0;R>S;S++)if((C||S in z)&&(B=k(P=z[S],S,q),m))if(p)_[S]=B;else if(B)switch(m){case 3:return!0;case 5:return P;case 6:return S;case 2:f(_,P)}else switch(m){case 4:return!1;case 7:f(_,P)}return y?-1:g||v?v:_}};n.exports={forEach:h(0),map:h(1),filter:h(2),some:h(3),every:h(4),find:h(5),findIndex:h(6),filterReject:h(7)}},{"../internals/array-species-create":233,"../internals/function-bind-context":262,"../internals/function-uncurry-this":268,"../internals/indexed-object":280,"../internals/length-of-array-like":299,"../internals/to-object":344}],230:[function(s,n,c){var o=s("../internals/to-absolute-index"),a=s("../internals/length-of-array-like"),d=s("../internals/create-property"),l=Array,i=Math.max;n.exports=function(u,f,h){for(var m=a(u),p=o(f,m),x=o(h===void 0?m:h,m),g=l(i(x-p,0)),v=0;p<x;p++,v++)d(g,v,u[p]);return g.length=v,g}},{"../internals/create-property":243,"../internals/length-of-array-like":299,"../internals/to-absolute-index":340}],231:[function(s,n,c){var o=s("../internals/function-uncurry-this");n.exports=o([].slice)},{"../internals/function-uncurry-this":268}],232:[function(s,n,c){var o=s("../internals/is-array"),a=s("../internals/is-constructor"),d=s("../internals/is-object"),l=s("../internals/well-known-symbol")("species"),i=Array;n.exports=function(u){var f;return o(u)&&(f=u.constructor,(a(f)&&(f===i||o(f.prototype))||d(f)&&(f=f[l])===null)&&(f=void 0)),f===void 0?i:f}},{"../internals/is-array":284,"../internals/is-constructor":286,"../internals/is-object":289,"../internals/well-known-symbol":357}],233:[function(s,n,c){var o=s("../internals/array-species-constructor");n.exports=function(a,d){return new(o(a))(d===0?0:d)}},{"../internals/array-species-constructor":232}],234:[function(s,n,c){var o=s("../internals/well-known-symbol")("iterator"),a=!1;try{var d=0,l={next:function(){return{done:!!d++}},return:function(){a=!0}};l[o]=function(){return this},Array.from(l,function(){throw 2})}catch{}n.exports=function(i,u){try{if(!u&&!a)return!1}catch{return!1}var f=!1;try{var h={};h[o]=function(){return{next:function(){return{done:f=!0}}}},i(h)}catch{}return f}},{"../internals/well-known-symbol":357}],235:[function(s,n,c){var o=s("../internals/function-uncurry-this"),a=o({}.toString),d=o("".slice);n.exports=function(l){return d(a(l),8,-1)}},{"../internals/function-uncurry-this":268}],236:[function(s,n,c){var o=s("../internals/to-string-tag-support"),a=s("../internals/is-callable"),d=s("../internals/classof-raw"),l=s("../internals/well-known-symbol")("toStringTag"),i=Object,u=d(function(){return arguments}())==="Arguments";n.exports=o?d:function(f){var h,m,p;return f===void 0?"Undefined":f===null?"Null":typeof(m=function(x,g){try{return x[g]}catch{}}(h=i(f),l))=="string"?m:u?d(h):(p=d(h))==="Object"&&a(h.callee)?"Arguments":p}},{"../internals/classof-raw":235,"../internals/is-callable":285,"../internals/to-string-tag-support":347,"../internals/well-known-symbol":357}],237:[function(s,n,c){var o=s("../internals/has-own-property"),a=s("../internals/own-keys"),d=s("../internals/object-get-own-property-descriptor"),l=s("../internals/object-define-property");n.exports=function(i,u,f){for(var h=a(u),m=l.f,p=d.f,x=0;x<h.length;x++){var g=h[x];o(i,g)||f&&o(f,g)||m(i,g,p(u,g))}}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/object-get-own-property-descriptor":309,"../internals/own-keys":321}],238:[function(s,n,c){var o=s("../internals/well-known-symbol")("match");n.exports=function(a){var d=/./;try{"/./"[a](d)}catch{try{return d[o]=!1,"/./"[a](d)}catch{}}return!1}},{"../internals/well-known-symbol":357}],239:[function(s,n,c){var o=s("../internals/fails");n.exports=!o(function(){function a(){}return a.prototype.constructor=null,Object.getPrototypeOf(new a)!==a.prototype})},{"../internals/fails":260}],240:[function(s,n,c){n.exports=function(o,a){return{value:o,done:a}}},{}],241:[function(s,n,c){var o=s("../internals/descriptors"),a=s("../internals/object-define-property"),d=s("../internals/create-property-descriptor");n.exports=o?function(l,i,u){return a.f(l,i,d(1,u))}:function(l,i,u){return l[i]=u,l}},{"../internals/create-property-descriptor":242,"../internals/descriptors":247,"../internals/object-define-property":308}],242:[function(s,n,c){n.exports=function(o,a){return{enumerable:!(1&o),configurable:!(2&o),writable:!(4&o),value:a}}},{}],243:[function(s,n,c){var o=s("../internals/to-property-key"),a=s("../internals/object-define-property"),d=s("../internals/create-property-descriptor");n.exports=function(l,i,u){var f=o(i);f in l?a.f(l,f,d(0,u)):l[f]=u}},{"../internals/create-property-descriptor":242,"../internals/object-define-property":308,"../internals/to-property-key":346}],244:[function(s,n,c){var o=s("../internals/make-built-in"),a=s("../internals/object-define-property");n.exports=function(d,l,i){return i.get&&o(i.get,l,{getter:!0}),i.set&&o(i.set,l,{setter:!0}),a.f(d,l,i)}},{"../internals/make-built-in":300,"../internals/object-define-property":308}],245:[function(s,n,c){var o=s("../internals/is-callable"),a=s("../internals/object-define-property"),d=s("../internals/make-built-in"),l=s("../internals/define-global-property");n.exports=function(i,u,f,h){h||(h={});var m=h.enumerable,p=h.name!==void 0?h.name:u;if(o(f)&&d(f,p,h),h.global)m?i[u]=f:l(u,f);else{try{h.unsafe?i[u]&&(m=!0):delete i[u]}catch{}m?i[u]=f:a.f(i,u,{value:f,enumerable:!1,configurable:!h.nonConfigurable,writable:!h.nonWritable})}return i}},{"../internals/define-global-property":246,"../internals/is-callable":285,"../internals/make-built-in":300,"../internals/object-define-property":308}],246:[function(s,n,c){var o=s("../internals/global"),a=Object.defineProperty;n.exports=function(d,l){try{a(o,d,{value:l,configurable:!0,writable:!0})}catch{o[d]=l}return l}},{"../internals/global":274}],247:[function(s,n,c){var o=s("../internals/fails");n.exports=!o(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})},{"../internals/fails":260}],248:[function(s,n,c){var o=typeof document=="object"&&document.all,a=o===void 0&&o!==void 0;n.exports={all:o,IS_HTMLDDA:a}},{}],249:[function(s,n,c){var o=s("../internals/global"),a=s("../internals/is-object"),d=o.document,l=a(d)&&a(d.createElement);n.exports=function(i){return l?d.createElement(i):{}}},{"../internals/global":274,"../internals/is-object":289}],250:[function(s,n,c){var o=s("../internals/engine-is-deno"),a=s("../internals/engine-is-node");n.exports=!o&&!a&&typeof window=="object"&&typeof document=="object"},{"../internals/engine-is-deno":251,"../internals/engine-is-node":254}],251:[function(s,n,c){n.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},{}],252:[function(s,n,c){var o=s("../internals/engine-user-agent");n.exports=/ipad|iphone|ipod/i.test(o)&&typeof Pebble<"u"},{"../internals/engine-user-agent":256}],253:[function(s,n,c){var o=s("../internals/engine-user-agent");n.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(o)},{"../internals/engine-user-agent":256}],254:[function(s,n,c){var o=s("../internals/global"),a=s("../internals/classof-raw");n.exports=a(o.process)==="process"},{"../internals/classof-raw":235,"../internals/global":274}],255:[function(s,n,c){var o=s("../internals/engine-user-agent");n.exports=/web0s(?!.*chrome)/i.test(o)},{"../internals/engine-user-agent":256}],256:[function(s,n,c){n.exports=typeof navigator<"u"&&String(navigator.userAgent)||""},{}],257:[function(s,n,c){var o,a,d=s("../internals/global"),l=s("../internals/engine-user-agent"),i=d.process,u=d.Deno,f=i&&i.versions||u&&u.version,h=f&&f.v8;h&&(a=(o=h.split("."))[0]>0&&o[0]<4?1:+(o[0]+o[1])),!a&&l&&(!(o=l.match(/Edge\/(\d+)/))||o[1]>=74)&&(o=l.match(/Chrome\/(\d+)/))&&(a=+o[1]),n.exports=a},{"../internals/engine-user-agent":256,"../internals/global":274}],258:[function(s,n,c){n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],259:[function(s,n,c){var o=s("../internals/global"),a=s("../internals/object-get-own-property-descriptor").f,d=s("../internals/create-non-enumerable-property"),l=s("../internals/define-built-in"),i=s("../internals/define-global-property"),u=s("../internals/copy-constructor-properties"),f=s("../internals/is-forced");n.exports=function(h,m){var p,x,g,v,y,b=h.target,C=h.global,T=h.stat;if(p=C?o:T?o[b]||i(b,{}):(o[b]||{}).prototype)for(x in m){if(v=m[x],g=h.dontCallGetSet?(y=a(p,x))&&y.value:p[x],!f(C?x:b+(T?".":"#")+x,h.forced)&&g!==void 0){if(typeof v==typeof g)continue;u(v,g)}(h.sham||g&&g.sham)&&d(v,"sham",!0),l(p,x,v,h)}}},{"../internals/copy-constructor-properties":237,"../internals/create-non-enumerable-property":241,"../internals/define-built-in":245,"../internals/define-global-property":246,"../internals/global":274,"../internals/is-forced":287,"../internals/object-get-own-property-descriptor":309}],260:[function(s,n,c){n.exports=function(o){try{return!!o()}catch{return!0}}},{}],261:[function(s,n,c){var o=s("../internals/function-bind-native"),a=Function.prototype,d=a.apply,l=a.call;n.exports=typeof Reflect=="object"&&Reflect.apply||(o?l.bind(d):function(){return l.apply(d,arguments)})},{"../internals/function-bind-native":263}],262:[function(s,n,c){var o=s("../internals/function-uncurry-this-clause"),a=s("../internals/a-callable"),d=s("../internals/function-bind-native"),l=o(o.bind);n.exports=function(i,u){return a(i),u===void 0?i:d?l(i,u):function(){return i.apply(u,arguments)}}},{"../internals/a-callable":222,"../internals/function-bind-native":263,"../internals/function-uncurry-this-clause":267}],263:[function(s,n,c){var o=s("../internals/fails");n.exports=!o(function(){var a=(function(){}).bind();return typeof a!="function"||a.hasOwnProperty("prototype")})},{"../internals/fails":260}],264:[function(s,n,c){var o=s("../internals/function-bind-native"),a=Function.prototype.call;n.exports=o?a.bind(a):function(){return a.apply(a,arguments)}},{"../internals/function-bind-native":263}],265:[function(s,n,c){var o=s("../internals/descriptors"),a=s("../internals/has-own-property"),d=Function.prototype,l=o&&Object.getOwnPropertyDescriptor,i=a(d,"name"),u=i&&(function(){}).name==="something",f=i&&(!o||o&&l(d,"name").configurable);n.exports={EXISTS:i,PROPER:u,CONFIGURABLE:f}},{"../internals/descriptors":247,"../internals/has-own-property":275}],266:[function(s,n,c){var o=s("../internals/function-uncurry-this"),a=s("../internals/a-callable");n.exports=function(d,l,i){try{return o(a(Object.getOwnPropertyDescriptor(d,l)[i]))}catch{}}},{"../internals/a-callable":222,"../internals/function-uncurry-this":268}],267:[function(s,n,c){var o=s("../internals/classof-raw"),a=s("../internals/function-uncurry-this");n.exports=function(d){if(o(d)==="Function")return a(d)}},{"../internals/classof-raw":235,"../internals/function-uncurry-this":268}],268:[function(s,n,c){var o=s("../internals/function-bind-native"),a=Function.prototype,d=a.call,l=o&&a.bind.bind(d,d);n.exports=o?l:function(i){return function(){return d.apply(i,arguments)}}},{"../internals/function-bind-native":263}],269:[function(s,n,c){var o=s("../internals/global"),a=s("../internals/is-callable"),d=function(l){return a(l)?l:void 0};n.exports=function(l,i){return arguments.length<2?d(o[l]):o[l]&&o[l][i]}},{"../internals/global":274,"../internals/is-callable":285}],270:[function(s,n,c){var o=s("../internals/classof"),a=s("../internals/get-method"),d=s("../internals/is-null-or-undefined"),l=s("../internals/iterators"),i=s("../internals/well-known-symbol")("iterator");n.exports=function(u){if(!d(u))return a(u,i)||a(u,"@@iterator")||l[o(u)]}},{"../internals/classof":236,"../internals/get-method":273,"../internals/is-null-or-undefined":288,"../internals/iterators":298,"../internals/well-known-symbol":357}],271:[function(s,n,c){var o=s("../internals/function-call"),a=s("../internals/a-callable"),d=s("../internals/an-object"),l=s("../internals/try-to-string"),i=s("../internals/get-iterator-method"),u=TypeError;n.exports=function(f,h){var m=arguments.length<2?i(f):h;if(a(m))return d(o(m,f));throw new u(l(f)+" is not iterable")}},{"../internals/a-callable":222,"../internals/an-object":227,"../internals/function-call":264,"../internals/get-iterator-method":270,"../internals/try-to-string":349}],272:[function(s,n,c){var o=s("../internals/function-uncurry-this"),a=s("../internals/is-array"),d=s("../internals/is-callable"),l=s("../internals/classof-raw"),i=s("../internals/to-string"),u=o([].push);n.exports=function(f){if(d(f))return f;if(a(f)){for(var h=f.length,m=[],p=0;p<h;p++){var x=f[p];typeof x=="string"?u(m,x):typeof x!="number"&&l(x)!=="Number"&&l(x)!=="String"||u(m,i(x))}var g=m.length,v=!0;return function(y,b){if(v)return v=!1,b;if(a(this))return b;for(var C=0;C<g;C++)if(m[C]===y)return b}}}},{"../internals/classof-raw":235,"../internals/function-uncurry-this":268,"../internals/is-array":284,"../internals/is-callable":285,"../internals/to-string":348}],273:[function(s,n,c){var o=s("../internals/a-callable"),a=s("../internals/is-null-or-undefined");n.exports=function(d,l){var i=d[l];return a(i)?void 0:o(i)}},{"../internals/a-callable":222,"../internals/is-null-or-undefined":288}],274:[function(s,n,c){(function(o){(function(){var a=function(d){return d&&d.Math===Math&&d};n.exports=a(typeof globalThis=="object"&&globalThis)||a(typeof window=="object"&&window)||a(typeof self=="object"&&self)||a(typeof o=="object"&&o)||function(){return this}()||this||Function("return this")()}).call(this)}).call(this,typeof _s<"u"?_s:typeof self<"u"?self:typeof window<"u"?window:{})},{}],275:[function(s,n,c){var o=s("../internals/function-uncurry-this"),a=s("../internals/to-object"),d=o({}.hasOwnProperty);n.exports=Object.hasOwn||function(l,i){return d(a(l),i)}},{"../internals/function-uncurry-this":268,"../internals/to-object":344}],276:[function(s,n,c){n.exports={}},{}],277:[function(s,n,c){n.exports=function(o,a){try{arguments.length===1?console.error(o):console.error(o,a)}catch{}}},{}],278:[function(s,n,c){var o=s("../internals/get-built-in");n.exports=o("document","documentElement")},{"../internals/get-built-in":269}],279:[function(s,n,c){var o=s("../internals/descriptors"),a=s("../internals/fails"),d=s("../internals/document-create-element");n.exports=!o&&!a(function(){return Object.defineProperty(d("div"),"a",{get:function(){return 7}}).a!==7})},{"../internals/descriptors":247,"../internals/document-create-element":249,"../internals/fails":260}],280:[function(s,n,c){var o=s("../internals/function-uncurry-this"),a=s("../internals/fails"),d=s("../internals/classof-raw"),l=Object,i=o("".split);n.exports=a(function(){return!l("z").propertyIsEnumerable(0)})?function(u){return d(u)==="String"?i(u,""):l(u)}:l},{"../internals/classof-raw":235,"../internals/fails":260,"../internals/function-uncurry-this":268}],281:[function(s,n,c){var o=s("../internals/function-uncurry-this"),a=s("../internals/is-callable"),d=s("../internals/shared-store"),l=o(Function.toString);a(d.inspectSource)||(d.inspectSource=function(i){return l(i)}),n.exports=d.inspectSource},{"../internals/function-uncurry-this":268,"../internals/is-callable":285,"../internals/shared-store":333}],282:[function(s,n,c){var o,a,d,l=s("../internals/weak-map-basic-detection"),i=s("../internals/global"),u=s("../internals/is-object"),f=s("../internals/create-non-enumerable-property"),h=s("../internals/has-own-property"),m=s("../internals/shared-store"),p=s("../internals/shared-key"),x=s("../internals/hidden-keys"),g=i.TypeError,v=i.WeakMap;if(l||m.state){var y=m.state||(m.state=new v);y.get=y.get,y.has=y.has,y.set=y.set,o=function(C,T){if(y.has(C))throw new g("Object already initialized");return T.facade=C,y.set(C,T),T},a=function(C){return y.get(C)||{}},d=function(C){return y.has(C)}}else{var b=p("state");x[b]=!0,o=function(C,T){if(h(C,b))throw new g("Object already initialized");return T.facade=C,f(C,b,T),T},a=function(C){return h(C,b)?C[b]:{}},d=function(C){return h(C,b)}}n.exports={set:o,get:a,has:d,enforce:function(C){return d(C)?a(C):o(C,{})},getterFor:function(C){return function(T){var M;if(!u(T)||(M=a(T)).type!==C)throw new g("Incompatible receiver, "+C+" required");return M}}}},{"../internals/create-non-enumerable-property":241,"../internals/global":274,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/is-object":289,"../internals/shared-key":332,"../internals/shared-store":333,"../internals/weak-map-basic-detection":354}],283:[function(s,n,c){var o=s("../internals/well-known-symbol"),a=s("../internals/iterators"),d=o("iterator"),l=Array.prototype;n.exports=function(i){return i!==void 0&&(a.Array===i||l[d]===i)}},{"../internals/iterators":298,"../internals/well-known-symbol":357}],284:[function(s,n,c){var o=s("../internals/classof-raw");n.exports=Array.isArray||function(a){return o(a)==="Array"}},{"../internals/classof-raw":235}],285:[function(s,n,c){var o=s("../internals/document-all"),a=o.all;n.exports=o.IS_HTMLDDA?function(d){return typeof d=="function"||d===a}:function(d){return typeof d=="function"}},{"../internals/document-all":248}],286:[function(s,n,c){var o=s("../internals/function-uncurry-this"),a=s("../internals/fails"),d=s("../internals/is-callable"),l=s("../internals/classof"),i=s("../internals/get-built-in"),u=s("../internals/inspect-source"),f=function(){},h=[],m=i("Reflect","construct"),p=/^\s*(?:class|function)\b/,x=o(p.exec),g=!p.test(f),v=function(b){if(!d(b))return!1;try{return m(f,h,b),!0}catch{return!1}},y=function(b){if(!d(b))return!1;switch(l(b)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return g||!!x(p,u(b))}catch{return!0}};y.sham=!0,n.exports=!m||a(function(){var b;return v(v.call)||!v(Object)||!v(function(){b=!0})||b})?y:v},{"../internals/classof":236,"../internals/fails":260,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/inspect-source":281,"../internals/is-callable":285}],287:[function(s,n,c){var o=s("../internals/fails"),a=s("../internals/is-callable"),d=/#|\.prototype\./,l=function(m,p){var x=u[i(m)];return x===h||x!==f&&(a(p)?o(p):!!p)},i=l.normalize=function(m){return String(m).replace(d,".").toLowerCase()},u=l.data={},f=l.NATIVE="N",h=l.POLYFILL="P";n.exports=l},{"../internals/fails":260,"../internals/is-callable":285}],288:[function(s,n,c){n.exports=function(o){return o==null}},{}],289:[function(s,n,c){var o=s("../internals/is-callable"),a=s("../internals/document-all"),d=a.all;n.exports=a.IS_HTMLDDA?function(l){return typeof l=="object"?l!==null:o(l)||l===d}:function(l){return typeof l=="object"?l!==null:o(l)}},{"../internals/document-all":248,"../internals/is-callable":285}],290:[function(s,n,c){n.exports=!1},{}],291:[function(s,n,c){var o=s("../internals/is-object"),a=s("../internals/classof-raw"),d=s("../internals/well-known-symbol")("match");n.exports=function(l){var i;return o(l)&&((i=l[d])!==void 0?!!i:a(l)==="RegExp")}},{"../internals/classof-raw":235,"../internals/is-object":289,"../internals/well-known-symbol":357}],292:[function(s,n,c){var o=s("../internals/get-built-in"),a=s("../internals/is-callable"),d=s("../internals/object-is-prototype-of"),l=s("../internals/use-symbol-as-uid"),i=Object;n.exports=l?function(u){return typeof u=="symbol"}:function(u){var f=o("Symbol");return a(f)&&d(f.prototype,i(u))}},{"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/object-is-prototype-of":314,"../internals/use-symbol-as-uid":351}],293:[function(s,n,c){var o=s("../internals/function-bind-context"),a=s("../internals/function-call"),d=s("../internals/an-object"),l=s("../internals/try-to-string"),i=s("../internals/is-array-iterator-method"),u=s("../internals/length-of-array-like"),f=s("../internals/object-is-prototype-of"),h=s("../internals/get-iterator"),m=s("../internals/get-iterator-method"),p=s("../internals/iterator-close"),x=TypeError,g=function(y,b){this.stopped=y,this.result=b},v=g.prototype;n.exports=function(y,b,C){var T,M,U,L,P,B,q,z=C&&C.that,k=!(!C||!C.AS_ENTRIES),R=!(!C||!C.IS_RECORD),S=!(!C||!C.IS_ITERATOR),w=!(!C||!C.INTERRUPTED),_=o(b,z),j=function(E){return T&&p(T,"normal",E),new g(!0,E)},N=function(E){return k?(d(E),w?_(E[0],E[1],j):_(E[0],E[1])):w?_(E,j):_(E)};if(R)T=y.iterator;else if(S)T=y;else{if(!(M=m(y)))throw new x(l(y)+" is not iterable");if(i(M)){for(U=0,L=u(y);L>U;U++)if((P=N(y[U]))&&f(v,P))return P;return new g(!1)}T=h(y,M)}for(B=R?y.next:T.next;!(q=a(B,T)).done;){try{P=N(q.value)}catch(E){p(T,"throw",E)}if(typeof P=="object"&&P&&f(v,P))return P}return new g(!1)}},{"../internals/an-object":227,"../internals/function-bind-context":262,"../internals/function-call":264,"../internals/get-iterator":271,"../internals/get-iterator-method":270,"../internals/is-array-iterator-method":283,"../internals/iterator-close":294,"../internals/length-of-array-like":299,"../internals/object-is-prototype-of":314,"../internals/try-to-string":349}],294:[function(s,n,c){var o=s("../internals/function-call"),a=s("../internals/an-object"),d=s("../internals/get-method");n.exports=function(l,i,u){var f,h;a(l);try{if(!(f=d(l,"return"))){if(i==="throw")throw u;return u}f=o(f,l)}catch(m){h=!0,f=m}if(i==="throw")throw u;if(h)throw f;return a(f),u}},{"../internals/an-object":227,"../internals/function-call":264,"../internals/get-method":273}],295:[function(s,n,c){var o=s("../internals/iterators-core").IteratorPrototype,a=s("../internals/object-create"),d=s("../internals/create-property-descriptor"),l=s("../internals/set-to-string-tag"),i=s("../internals/iterators"),u=function(){return this};n.exports=function(f,h,m,p){var x=h+" Iterator";return f.prototype=a(o,{next:d(+!p,m)}),l(f,x,!1,!0),i[x]=u,f}},{"../internals/create-property-descriptor":242,"../internals/iterators":298,"../internals/iterators-core":297,"../internals/object-create":306,"../internals/set-to-string-tag":331}],296:[function(s,n,c){var o=s("../internals/export"),a=s("../internals/function-call"),d=s("../internals/is-pure"),l=s("../internals/function-name"),i=s("../internals/is-callable"),u=s("../internals/iterator-create-constructor"),f=s("../internals/object-get-prototype-of"),h=s("../internals/object-set-prototype-of"),m=s("../internals/set-to-string-tag"),p=s("../internals/create-non-enumerable-property"),x=s("../internals/define-built-in"),g=s("../internals/well-known-symbol"),v=s("../internals/iterators"),y=s("../internals/iterators-core"),b=l.PROPER,C=l.CONFIGURABLE,T=y.IteratorPrototype,M=y.BUGGY_SAFARI_ITERATORS,U=g("iterator"),L=function(){return this};n.exports=function(P,B,q,z,k,R,S){u(q,B,z);var w,_,j,N=function($){if($===k&&H)return H;if(!M&&$&&$ in D)return D[$];switch($){case"keys":case"values":case"entries":return function(){return new q(this,$)}}return function(){return new q(this)}},E=B+" Iterator",I=!1,D=P.prototype,V=D[U]||D["@@iterator"]||k&&D[k],H=!M&&V||N(k),G=B==="Array"&&D.entries||V;if(G&&(w=f(G.call(new P)))!==Object.prototype&&w.next&&(d||f(w)===T||(h?h(w,T):i(w[U])||x(w,U,L)),m(w,E,!0,!0),d&&(v[E]=L)),b&&k==="values"&&V&&V.name!=="values"&&(!d&&C?p(D,"name","values"):(I=!0,H=function(){return a(V,this)})),k)if(_={values:N("values"),keys:R?H:N("keys"),entries:N("entries")},S)for(j in _)(M||I||!(j in D))&&x(D,j,_[j]);else o({target:B,proto:!0,forced:M||I},_);return d&&!S||D[U]===H||x(D,U,H,{name:k}),v[B]=H,_}},{"../internals/create-non-enumerable-property":241,"../internals/define-built-in":245,"../internals/export":259,"../internals/function-call":264,"../internals/function-name":265,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/iterator-create-constructor":295,"../internals/iterators":298,"../internals/iterators-core":297,"../internals/object-get-prototype-of":313,"../internals/object-set-prototype-of":318,"../internals/set-to-string-tag":331,"../internals/well-known-symbol":357}],297:[function(s,n,c){var o,a,d,l=s("../internals/fails"),i=s("../internals/is-callable"),u=s("../internals/is-object"),f=s("../internals/object-create"),h=s("../internals/object-get-prototype-of"),m=s("../internals/define-built-in"),p=s("../internals/well-known-symbol"),x=s("../internals/is-pure"),g=p("iterator"),v=!1;[].keys&&("next"in(d=[].keys())?(a=h(h(d)))!==Object.prototype&&(o=a):v=!0),!u(o)||l(function(){var y={};return o[g].call(y)!==y})?o={}:x&&(o=f(o)),i(o[g])||m(o,g,function(){return this}),n.exports={IteratorPrototype:o,BUGGY_SAFARI_ITERATORS:v}},{"../internals/define-built-in":245,"../internals/fails":260,"../internals/is-callable":285,"../internals/is-object":289,"../internals/is-pure":290,"../internals/object-create":306,"../internals/object-get-prototype-of":313,"../internals/well-known-symbol":357}],298:[function(s,n,c){arguments[4][276][0].apply(c,arguments)},{dup:276}],299:[function(s,n,c){var o=s("../internals/to-length");n.exports=function(a){return o(a.length)}},{"../internals/to-length":343}],300:[function(s,n,c){var o=s("../internals/function-uncurry-this"),a=s("../internals/fails"),d=s("../internals/is-callable"),l=s("../internals/has-own-property"),i=s("../internals/descriptors"),u=s("../internals/function-name").CONFIGURABLE,f=s("../internals/inspect-source"),h=s("../internals/internal-state"),m=h.enforce,p=h.get,x=String,g=Object.defineProperty,v=o("".slice),y=o("".replace),b=o([].join),C=i&&!a(function(){return g(function(){},"length",{value:8}).length!==8}),T=String(String).split("String"),M=n.exports=function(U,L,P){v(x(L),0,7)==="Symbol("&&(L="["+y(x(L),/^Symbol\(([^)]*)\)/,"$1")+"]"),P&&P.getter&&(L="get "+L),P&&P.setter&&(L="set "+L),(!l(U,"name")||u&&U.name!==L)&&(i?g(U,"name",{value:L,configurable:!0}):U.name=L),C&&P&&l(P,"arity")&&U.length!==P.arity&&g(U,"length",{value:P.arity});try{P&&l(P,"constructor")&&P.constructor?i&&g(U,"prototype",{writable:!1}):U.prototype&&(U.prototype=void 0)}catch{}var B=m(U);return l(B,"source")||(B.source=b(T,typeof L=="string"?L:"")),U};Function.prototype.toString=M(function(){return d(this)&&p(this).source||f(this)},"toString")},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-name":265,"../internals/function-uncurry-this":268,"../internals/has-own-property":275,"../internals/inspect-source":281,"../internals/internal-state":282,"../internals/is-callable":285}],301:[function(s,n,c){var o=Math.ceil,a=Math.floor;n.exports=Math.trunc||function(d){var l=+d;return(l>0?a:o)(l)}},{}],302:[function(s,n,c){var o,a,d,l,i,u=s("../internals/global"),f=s("../internals/function-bind-context"),h=s("../internals/object-get-own-property-descriptor").f,m=s("../internals/task").set,p=s("../internals/queue"),x=s("../internals/engine-is-ios"),g=s("../internals/engine-is-ios-pebble"),v=s("../internals/engine-is-webos-webkit"),y=s("../internals/engine-is-node"),b=u.MutationObserver||u.WebKitMutationObserver,C=u.document,T=u.process,M=u.Promise,U=h(u,"queueMicrotask"),L=U&&U.value;if(!L){var P=new p,B=function(){var q,z;for(y&&(q=T.domain)&&q.exit();z=P.get();)try{z()}catch(k){throw P.head&&o(),k}q&&q.enter()};x||y||v||!b||!C?!g&&M&&M.resolve?((l=M.resolve(void 0)).constructor=M,i=f(l.then,l),o=function(){i(B)}):y?o=function(){T.nextTick(B)}:(m=f(m,u),o=function(){m(B)}):(a=!0,d=C.createTextNode(""),new b(B).observe(d,{characterData:!0}),o=function(){d.data=a=!a}),L=function(q){P.head||o(),P.add(q)}}n.exports=L},{"../internals/engine-is-ios":253,"../internals/engine-is-ios-pebble":252,"../internals/engine-is-node":254,"../internals/engine-is-webos-webkit":255,"../internals/function-bind-context":262,"../internals/global":274,"../internals/object-get-own-property-descriptor":309,"../internals/queue":328,"../internals/task":339}],303:[function(s,n,c){var o=s("../internals/a-callable"),a=TypeError,d=function(l){var i,u;this.promise=new l(function(f,h){if(i!==void 0||u!==void 0)throw new a("Bad Promise constructor");i=f,u=h}),this.resolve=o(i),this.reject=o(u)};n.exports.f=function(l){return new d(l)}},{"../internals/a-callable":222}],304:[function(s,n,c){var o=s("../internals/is-regexp"),a=TypeError;n.exports=function(d){if(o(d))throw new a("The method doesn't accept regular expressions");return d}},{"../internals/is-regexp":291}],305:[function(s,n,c){var o=s("../internals/descriptors"),a=s("../internals/function-uncurry-this"),d=s("../internals/function-call"),l=s("../internals/fails"),i=s("../internals/object-keys"),u=s("../internals/object-get-own-property-symbols"),f=s("../internals/object-property-is-enumerable"),h=s("../internals/to-object"),m=s("../internals/indexed-object"),p=Object.assign,x=Object.defineProperty,g=a([].concat);n.exports=!p||l(function(){if(o&&p({b:1},p(x({},"a",{enumerable:!0,get:function(){x(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var v={},y={},b=Symbol("assign detection");return v[b]=7,"abcdefghijklmnopqrst".split("").forEach(function(C){y[C]=C}),p({},v)[b]!==7||i(p({},y)).join("")!=="abcdefghijklmnopqrst"})?function(v,y){for(var b=h(v),C=arguments.length,T=1,M=u.f,U=f.f;C>T;)for(var L,P=m(arguments[T++]),B=M?g(i(P),M(P)):i(P),q=B.length,z=0;q>z;)L=B[z++],o&&!d(U,P,L)||(b[L]=P[L]);return b}:p},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/indexed-object":280,"../internals/object-get-own-property-symbols":312,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/to-object":344}],306:[function(s,n,c){var o,a=s("../internals/an-object"),d=s("../internals/object-define-properties"),l=s("../internals/enum-bug-keys"),i=s("../internals/hidden-keys"),u=s("../internals/html"),f=s("../internals/document-create-element"),h=s("../internals/shared-key"),m=h("IE_PROTO"),p=function(){},x=function(y){return"<script>"+y+"<\/script>"},g=function(y){y.write(x("")),y.close();var b=y.parentWindow.Object;return y=null,b},v=function(){try{o=new ActiveXObject("htmlfile")}catch{}var y,b;v=typeof document<"u"?document.domain&&o?g(o):((b=f("iframe")).style.display="none",u.appendChild(b),b.src="javascript:",(y=b.contentWindow.document).open(),y.write(x("document.F=Object")),y.close(),y.F):g(o);for(var C=l.length;C--;)delete v.prototype[l[C]];return v()};i[m]=!0,n.exports=Object.create||function(y,b){var C;return y!==null?(p.prototype=a(y),C=new p,p.prototype=null,C[m]=y):C=v(),b===void 0?C:d.f(C,b)}},{"../internals/an-object":227,"../internals/document-create-element":249,"../internals/enum-bug-keys":258,"../internals/hidden-keys":276,"../internals/html":278,"../internals/object-define-properties":307,"../internals/shared-key":332}],307:[function(s,n,c){var o=s("../internals/descriptors"),a=s("../internals/v8-prototype-define-bug"),d=s("../internals/object-define-property"),l=s("../internals/an-object"),i=s("../internals/to-indexed-object"),u=s("../internals/object-keys");c.f=o&&!a?Object.defineProperties:function(f,h){l(f);for(var m,p=i(h),x=u(h),g=x.length,v=0;g>v;)d.f(f,m=x[v++],p[m]);return f}},{"../internals/an-object":227,"../internals/descriptors":247,"../internals/object-define-property":308,"../internals/object-keys":316,"../internals/to-indexed-object":341,"../internals/v8-prototype-define-bug":352}],308:[function(s,n,c){var o=s("../internals/descriptors"),a=s("../internals/ie8-dom-define"),d=s("../internals/v8-prototype-define-bug"),l=s("../internals/an-object"),i=s("../internals/to-property-key"),u=TypeError,f=Object.defineProperty,h=Object.getOwnPropertyDescriptor;c.f=o?d?function(m,p,x){if(l(m),p=i(p),l(x),typeof m=="function"&&p==="prototype"&&"value"in x&&"writable"in x&&!x.writable){var g=h(m,p);g&&g.writable&&(m[p]=x.value,x={configurable:"configurable"in x?x.configurable:g.configurable,enumerable:"enumerable"in x?x.enumerable:g.enumerable,writable:!1})}return f(m,p,x)}:f:function(m,p,x){if(l(m),p=i(p),l(x),a)try{return f(m,p,x)}catch{}if("get"in x||"set"in x)throw new u("Accessors not supported");return"value"in x&&(m[p]=x.value),m}},{"../internals/an-object":227,"../internals/descriptors":247,"../internals/ie8-dom-define":279,"../internals/to-property-key":346,"../internals/v8-prototype-define-bug":352}],309:[function(s,n,c){var o=s("../internals/descriptors"),a=s("../internals/function-call"),d=s("../internals/object-property-is-enumerable"),l=s("../internals/create-property-descriptor"),i=s("../internals/to-indexed-object"),u=s("../internals/to-property-key"),f=s("../internals/has-own-property"),h=s("../internals/ie8-dom-define"),m=Object.getOwnPropertyDescriptor;c.f=o?m:function(p,x){if(p=i(p),x=u(x),h)try{return m(p,x)}catch{}if(f(p,x))return l(!a(d.f,p,x),p[x])}},{"../internals/create-property-descriptor":242,"../internals/descriptors":247,"../internals/function-call":264,"../internals/has-own-property":275,"../internals/ie8-dom-define":279,"../internals/object-property-is-enumerable":317,"../internals/to-indexed-object":341,"../internals/to-property-key":346}],310:[function(s,n,c){var o=s("../internals/classof-raw"),a=s("../internals/to-indexed-object"),d=s("../internals/object-get-own-property-names").f,l=s("../internals/array-slice-simple"),i=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];n.exports.f=function(u){return i&&o(u)==="Window"?function(f){try{return d(f)}catch{return l(i)}}(u):d(a(u))}},{"../internals/array-slice-simple":230,"../internals/classof-raw":235,"../internals/object-get-own-property-names":311,"../internals/to-indexed-object":341}],311:[function(s,n,c){var o=s("../internals/object-keys-internal"),a=s("../internals/enum-bug-keys").concat("length","prototype");c.f=Object.getOwnPropertyNames||function(d){return o(d,a)}},{"../internals/enum-bug-keys":258,"../internals/object-keys-internal":315}],312:[function(s,n,c){c.f=Object.getOwnPropertySymbols},{}],313:[function(s,n,c){var o=s("../internals/has-own-property"),a=s("../internals/is-callable"),d=s("../internals/to-object"),l=s("../internals/shared-key"),i=s("../internals/correct-prototype-getter"),u=l("IE_PROTO"),f=Object,h=f.prototype;n.exports=i?f.getPrototypeOf:function(m){var p=d(m);if(o(p,u))return p[u];var x=p.constructor;return a(x)&&p instanceof x?x.prototype:p instanceof f?h:null}},{"../internals/correct-prototype-getter":239,"../internals/has-own-property":275,"../internals/is-callable":285,"../internals/shared-key":332,"../internals/to-object":344}],314:[function(s,n,c){var o=s("../internals/function-uncurry-this");n.exports=o({}.isPrototypeOf)},{"../internals/function-uncurry-this":268}],315:[function(s,n,c){var o=s("../internals/function-uncurry-this"),a=s("../internals/has-own-property"),d=s("../internals/to-indexed-object"),l=s("../internals/array-includes").indexOf,i=s("../internals/hidden-keys"),u=o([].push);n.exports=function(f,h){var m,p=d(f),x=0,g=[];for(m in p)!a(i,m)&&a(p,m)&&u(g,m);for(;h.length>x;)a(p,m=h[x++])&&(~l(g,m)||u(g,m));return g}},{"../internals/array-includes":228,"../internals/function-uncurry-this":268,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/to-indexed-object":341}],316:[function(s,n,c){var o=s("../internals/object-keys-internal"),a=s("../internals/enum-bug-keys");n.exports=Object.keys||function(d){return o(d,a)}},{"../internals/enum-bug-keys":258,"../internals/object-keys-internal":315}],317:[function(s,n,c){var o={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,d=a&&!o.call({1:2},1);c.f=d?function(l){var i=a(this,l);return!!i&&i.enumerable}:o},{}],318:[function(s,n,c){var o=s("../internals/function-uncurry-this-accessor"),a=s("../internals/an-object"),d=s("../internals/a-possible-prototype");n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var l,i=!1,u={};try{(l=o(Object.prototype,"__proto__","set"))(u,[]),i=u instanceof Array}catch{}return function(f,h){return a(f),d(h),i?l(f,h):f.__proto__=h,f}}():void 0)},{"../internals/a-possible-prototype":224,"../internals/an-object":227,"../internals/function-uncurry-this-accessor":266}],319:[function(s,n,c){var o=s("../internals/descriptors"),a=s("../internals/fails"),d=s("../internals/function-uncurry-this"),l=s("../internals/object-get-prototype-of"),i=s("../internals/object-keys"),u=s("../internals/to-indexed-object"),f=d(s("../internals/object-property-is-enumerable").f),h=d([].push),m=o&&a(function(){var x=Object.create(null);return x[2]=2,!f(x,2)}),p=function(x){return function(g){for(var v,y=u(g),b=i(y),C=m&&l(y)===null,T=b.length,M=0,U=[];T>M;)v=b[M++],o&&!(C?v in y:f(y,v))||h(U,x?[v,y[v]]:y[v]);return U}};n.exports={entries:p(!0),values:p(!1)}},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-uncurry-this":268,"../internals/object-get-prototype-of":313,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/to-indexed-object":341}],320:[function(s,n,c){var o=s("../internals/function-call"),a=s("../internals/is-callable"),d=s("../internals/is-object"),l=TypeError;n.exports=function(i,u){var f,h;if(u==="string"&&a(f=i.toString)&&!d(h=o(f,i))||a(f=i.valueOf)&&!d(h=o(f,i))||u!=="string"&&a(f=i.toString)&&!d(h=o(f,i)))return h;throw new l("Can't convert object to primitive value")}},{"../internals/function-call":264,"../internals/is-callable":285,"../internals/is-object":289}],321:[function(s,n,c){var o=s("../internals/get-built-in"),a=s("../internals/function-uncurry-this"),d=s("../internals/object-get-own-property-names"),l=s("../internals/object-get-own-property-symbols"),i=s("../internals/an-object"),u=a([].concat);n.exports=o("Reflect","ownKeys")||function(f){var h=d.f(i(f)),m=l.f;return m?u(h,m(f)):h}},{"../internals/an-object":227,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/object-get-own-property-names":311,"../internals/object-get-own-property-symbols":312}],322:[function(s,n,c){var o=s("../internals/global");n.exports=o},{"../internals/global":274}],323:[function(s,n,c){n.exports=function(o){try{return{error:!1,value:o()}}catch(a){return{error:!0,value:a}}}},{}],324:[function(s,n,c){var o=s("../internals/global"),a=s("../internals/promise-native-constructor"),d=s("../internals/is-callable"),l=s("../internals/is-forced"),i=s("../internals/inspect-source"),u=s("../internals/well-known-symbol"),f=s("../internals/engine-is-browser"),h=s("../internals/engine-is-deno"),m=s("../internals/is-pure"),p=s("../internals/engine-v8-version"),x=a&&a.prototype,g=u("species"),v=!1,y=d(o.PromiseRejectionEvent),b=l("Promise",function(){var C=i(a),T=C!==String(a);if(!T&&p===66||m&&(!x.catch||!x.finally))return!0;if(!p||p<51||!/native code/.test(C)){var M=new a(function(L){L(1)}),U=function(L){L(function(){},function(){})};if((M.constructor={})[g]=U,!(v=M.then(function(){})instanceof U))return!0}return!T&&(f||h)&&!y});n.exports={CONSTRUCTOR:b,REJECTION_EVENT:y,SUBCLASSING:v}},{"../internals/engine-is-browser":250,"../internals/engine-is-deno":251,"../internals/engine-v8-version":257,"../internals/global":274,"../internals/inspect-source":281,"../internals/is-callable":285,"../internals/is-forced":287,"../internals/is-pure":290,"../internals/promise-native-constructor":325,"../internals/well-known-symbol":357}],325:[function(s,n,c){var o=s("../internals/global");n.exports=o.Promise},{"../internals/global":274}],326:[function(s,n,c){var o=s("../internals/an-object"),a=s("../internals/is-object"),d=s("../internals/new-promise-capability");n.exports=function(l,i){if(o(l),a(i)&&i.constructor===l)return i;var u=d.f(l);return(0,u.resolve)(i),u.promise}},{"../internals/an-object":227,"../internals/is-object":289,"../internals/new-promise-capability":303}],327:[function(s,n,c){var o=s("../internals/promise-native-constructor"),a=s("../internals/check-correctness-of-iteration"),d=s("../internals/promise-constructor-detection").CONSTRUCTOR;n.exports=d||!a(function(l){o.all(l).then(void 0,function(){})})},{"../internals/check-correctness-of-iteration":234,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325}],328:[function(s,n,c){var o=function(){this.head=null,this.tail=null};o.prototype={add:function(a){var d={item:a,next:null},l=this.tail;l?l.next=d:this.head=d,this.tail=d},get:function(){var a=this.head;if(a)return(this.head=a.next)===null&&(this.tail=null),a.item}},n.exports=o},{}],329:[function(s,n,c){var o=s("../internals/is-null-or-undefined"),a=TypeError;n.exports=function(d){if(o(d))throw new a("Can't call method on "+d);return d}},{"../internals/is-null-or-undefined":288}],330:[function(s,n,c){var o=s("../internals/get-built-in"),a=s("../internals/define-built-in-accessor"),d=s("../internals/well-known-symbol"),l=s("../internals/descriptors"),i=d("species");n.exports=function(u){var f=o(u);l&&f&&!f[i]&&a(f,i,{configurable:!0,get:function(){return this}})}},{"../internals/define-built-in-accessor":244,"../internals/descriptors":247,"../internals/get-built-in":269,"../internals/well-known-symbol":357}],331:[function(s,n,c){var o=s("../internals/object-define-property").f,a=s("../internals/has-own-property"),d=s("../internals/well-known-symbol")("toStringTag");n.exports=function(l,i,u){l&&!u&&(l=l.prototype),l&&!a(l,d)&&o(l,d,{configurable:!0,value:i})}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/well-known-symbol":357}],332:[function(s,n,c){var o=s("../internals/shared"),a=s("../internals/uid"),d=o("keys");n.exports=function(l){return d[l]||(d[l]=a(l))}},{"../internals/shared":334,"../internals/uid":350}],333:[function(s,n,c){var o=s("../internals/global"),a=s("../internals/define-global-property"),d=o["__core-js_shared__"]||a("__core-js_shared__",{});n.exports=d},{"../internals/define-global-property":246,"../internals/global":274}],334:[function(s,n,c){var o=s("../internals/is-pure"),a=s("../internals/shared-store");(n.exports=function(d,l){return a[d]||(a[d]=l!==void 0?l:{})})("versions",[]).push({version:"3.33.0",mode:o?"pure":"global",copyright:" 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.0/LICENSE",source:"https://github.com/zloirock/core-js"})},{"../internals/is-pure":290,"../internals/shared-store":333}],335:[function(s,n,c){var o=s("../internals/an-object"),a=s("../internals/a-constructor"),d=s("../internals/is-null-or-undefined"),l=s("../internals/well-known-symbol")("species");n.exports=function(i,u){var f,h=o(i).constructor;return h===void 0||d(f=o(h)[l])?u:a(f)}},{"../internals/a-constructor":223,"../internals/an-object":227,"../internals/is-null-or-undefined":288,"../internals/well-known-symbol":357}],336:[function(s,n,c){var o=s("../internals/engine-v8-version"),a=s("../internals/fails"),d=s("../internals/global").String;n.exports=!!Object.getOwnPropertySymbols&&!a(function(){var l=Symbol("symbol detection");return!d(l)||!(Object(l)instanceof Symbol)||!Symbol.sham&&o&&o<41})},{"../internals/engine-v8-version":257,"../internals/fails":260,"../internals/global":274}],337:[function(s,n,c){var o=s("../internals/function-call"),a=s("../internals/get-built-in"),d=s("../internals/well-known-symbol"),l=s("../internals/define-built-in");n.exports=function(){var i=a("Symbol"),u=i&&i.prototype,f=u&&u.valueOf,h=d("toPrimitive");u&&!u[h]&&l(u,h,function(m){return o(f,this)},{arity:1})}},{"../internals/define-built-in":245,"../internals/function-call":264,"../internals/get-built-in":269,"../internals/well-known-symbol":357}],338:[function(s,n,c){var o=s("../internals/symbol-constructor-detection");n.exports=o&&!!Symbol.for&&!!Symbol.keyFor},{"../internals/symbol-constructor-detection":336}],339:[function(s,n,c){var o,a,d,l,i=s("../internals/global"),u=s("../internals/function-apply"),f=s("../internals/function-bind-context"),h=s("../internals/is-callable"),m=s("../internals/has-own-property"),p=s("../internals/fails"),x=s("../internals/html"),g=s("../internals/array-slice"),v=s("../internals/document-create-element"),y=s("../internals/validate-arguments-length"),b=s("../internals/engine-is-ios"),C=s("../internals/engine-is-node"),T=i.setImmediate,M=i.clearImmediate,U=i.process,L=i.Dispatch,P=i.Function,B=i.MessageChannel,q=i.String,z=0,k={};p(function(){o=i.location});var R=function(j){if(m(k,j)){var N=k[j];delete k[j],N()}},S=function(j){return function(){R(j)}},w=function(j){R(j.data)},_=function(j){i.postMessage(q(j),o.protocol+"//"+o.host)};T&&M||(T=function(j){y(arguments.length,1);var N=h(j)?j:P(j),E=g(arguments,1);return k[++z]=function(){u(N,void 0,E)},a(z),z},M=function(j){delete k[j]},C?a=function(j){U.nextTick(S(j))}:L&&L.now?a=function(j){L.now(S(j))}:B&&!b?(l=(d=new B).port2,d.port1.onmessage=w,a=f(l.postMessage,l)):i.addEventListener&&h(i.postMessage)&&!i.importScripts&&o&&o.protocol!=="file:"&&!p(_)?(a=_,i.addEventListener("message",w,!1)):a="onreadystatechange"in v("script")?function(j){x.appendChild(v("script")).onreadystatechange=function(){x.removeChild(this),R(j)}}:function(j){setTimeout(S(j),0)}),n.exports={set:T,clear:M}},{"../internals/array-slice":231,"../internals/document-create-element":249,"../internals/engine-is-ios":253,"../internals/engine-is-node":254,"../internals/fails":260,"../internals/function-apply":261,"../internals/function-bind-context":262,"../internals/global":274,"../internals/has-own-property":275,"../internals/html":278,"../internals/is-callable":285,"../internals/validate-arguments-length":353}],340:[function(s,n,c){var o=s("../internals/to-integer-or-infinity"),a=Math.max,d=Math.min;n.exports=function(l,i){var u=o(l);return u<0?a(u+i,0):d(u,i)}},{"../internals/to-integer-or-infinity":342}],341:[function(s,n,c){var o=s("../internals/indexed-object"),a=s("../internals/require-object-coercible");n.exports=function(d){return o(a(d))}},{"../internals/indexed-object":280,"../internals/require-object-coercible":329}],342:[function(s,n,c){var o=s("../internals/math-trunc");n.exports=function(a){var d=+a;return d!=d||d===0?0:o(d)}},{"../internals/math-trunc":301}],343:[function(s,n,c){var o=s("../internals/to-integer-or-infinity"),a=Math.min;n.exports=function(d){return d>0?a(o(d),9007199254740991):0}},{"../internals/to-integer-or-infinity":342}],344:[function(s,n,c){var o=s("../internals/require-object-coercible"),a=Object;n.exports=function(d){return a(o(d))}},{"../internals/require-object-coercible":329}],345:[function(s,n,c){var o=s("../internals/function-call"),a=s("../internals/is-object"),d=s("../internals/is-symbol"),l=s("../internals/get-method"),i=s("../internals/ordinary-to-primitive"),u=s("../internals/well-known-symbol"),f=TypeError,h=u("toPrimitive");n.exports=function(m,p){if(!a(m)||d(m))return m;var x,g=l(m,h);if(g){if(p===void 0&&(p="default"),x=o(g,m,p),!a(x)||d(x))return x;throw new f("Can't convert object to primitive value")}return p===void 0&&(p="number"),i(m,p)}},{"../internals/function-call":264,"../internals/get-method":273,"../internals/is-object":289,"../internals/is-symbol":292,"../internals/ordinary-to-primitive":320,"../internals/well-known-symbol":357}],346:[function(s,n,c){var o=s("../internals/to-primitive"),a=s("../internals/is-symbol");n.exports=function(d){var l=o(d,"string");return a(l)?l:l+""}},{"../internals/is-symbol":292,"../internals/to-primitive":345}],347:[function(s,n,c){var o={};o[s("../internals/well-known-symbol")("toStringTag")]="z",n.exports=String(o)==="[object z]"},{"../internals/well-known-symbol":357}],348:[function(s,n,c){var o=s("../internals/classof"),a=String;n.exports=function(d){if(o(d)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return a(d)}},{"../internals/classof":236}],349:[function(s,n,c){var o=String;n.exports=function(a){try{return o(a)}catch{return"Object"}}},{}],350:[function(s,n,c){var o=s("../internals/function-uncurry-this"),a=0,d=Math.random(),l=o(1 .toString);n.exports=function(i){return"Symbol("+(i===void 0?"":i)+")_"+l(++a+d,36)}},{"../internals/function-uncurry-this":268}],351:[function(s,n,c){var o=s("../internals/symbol-constructor-detection");n.exports=o&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/symbol-constructor-detection":336}],352:[function(s,n,c){var o=s("../internals/descriptors"),a=s("../internals/fails");n.exports=o&&a(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})},{"../internals/descriptors":247,"../internals/fails":260}],353:[function(s,n,c){var o=TypeError;n.exports=function(a,d){if(a<d)throw new o("Not enough arguments");return a}},{}],354:[function(s,n,c){var o=s("../internals/global"),a=s("../internals/is-callable"),d=o.WeakMap;n.exports=a(d)&&/native code/.test(String(d))},{"../internals/global":274,"../internals/is-callable":285}],355:[function(s,n,c){var o=s("../internals/path"),a=s("../internals/has-own-property"),d=s("../internals/well-known-symbol-wrapped"),l=s("../internals/object-define-property").f;n.exports=function(i){var u=o.Symbol||(o.Symbol={});a(u,i)||l(u,i,{value:d.f(i)})}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/path":322,"../internals/well-known-symbol-wrapped":356}],356:[function(s,n,c){var o=s("../internals/well-known-symbol");c.f=o},{"../internals/well-known-symbol":357}],357:[function(s,n,c){var o=s("../internals/global"),a=s("../internals/shared"),d=s("../internals/has-own-property"),l=s("../internals/uid"),i=s("../internals/symbol-constructor-detection"),u=s("../internals/use-symbol-as-uid"),f=o.Symbol,h=a("wks"),m=u?f.for||f:f&&f.withoutSetter||l;n.exports=function(p){return d(h,p)||(h[p]=i&&d(f,p)?f[p]:m("Symbol."+p)),h[p]}},{"../internals/global":274,"../internals/has-own-property":275,"../internals/shared":334,"../internals/symbol-constructor-detection":336,"../internals/uid":350,"../internals/use-symbol-as-uid":351}],358:[function(s,n,c){var o=s("../internals/export"),a=s("../internals/array-iteration").findIndex,d=s("../internals/add-to-unscopables"),l=!0;"findIndex"in[]&&Array(1).findIndex(function(){l=!1}),o({target:"Array",proto:!0,forced:l},{findIndex:function(i){return a(this,i,arguments.length>1?arguments[1]:void 0)}}),d("findIndex")},{"../internals/add-to-unscopables":225,"../internals/array-iteration":229,"../internals/export":259}],359:[function(s,n,c){var o=s("../internals/export"),a=s("../internals/array-iteration").find,d=s("../internals/add-to-unscopables"),l=!0;"find"in[]&&Array(1).find(function(){l=!1}),o({target:"Array",proto:!0,forced:l},{find:function(i){return a(this,i,arguments.length>1?arguments[1]:void 0)}}),d("find")},{"../internals/add-to-unscopables":225,"../internals/array-iteration":229,"../internals/export":259}],360:[function(s,n,c){var o=s("../internals/export"),a=s("../internals/array-includes").includes,d=s("../internals/fails"),l=s("../internals/add-to-unscopables");o({target:"Array",proto:!0,forced:d(function(){return!Array(1).includes()})},{includes:function(i){return a(this,i,arguments.length>1?arguments[1]:void 0)}}),l("includes")},{"../internals/add-to-unscopables":225,"../internals/array-includes":228,"../internals/export":259,"../internals/fails":260}],361:[function(s,n,c){var o=s("../internals/to-indexed-object"),a=s("../internals/add-to-unscopables"),d=s("../internals/iterators"),l=s("../internals/internal-state"),i=s("../internals/object-define-property").f,u=s("../internals/iterator-define"),f=s("../internals/create-iter-result-object"),h=s("../internals/is-pure"),m=s("../internals/descriptors"),p=l.set,x=l.getterFor("Array Iterator");n.exports=u(Array,"Array",function(v,y){p(this,{type:"Array Iterator",target:o(v),index:0,kind:y})},function(){var v=x(this),y=v.target,b=v.kind,C=v.index++;if(!y||C>=y.length)return v.target=void 0,f(void 0,!0);switch(b){case"keys":return f(C,!1);case"values":return f(y[C],!1)}return f([C,y[C]],!1)},"values");var g=d.Arguments=d.Array;if(a("keys"),a("values"),a("entries"),!h&&m&&g.name!=="values")try{i(g,"name",{value:"values"})}catch{}},{"../internals/add-to-unscopables":225,"../internals/create-iter-result-object":240,"../internals/descriptors":247,"../internals/internal-state":282,"../internals/is-pure":290,"../internals/iterator-define":296,"../internals/iterators":298,"../internals/object-define-property":308,"../internals/to-indexed-object":341}],362:[function(s,n,c){var o=s("../internals/export"),a=s("../internals/get-built-in"),d=s("../internals/function-apply"),l=s("../internals/function-call"),i=s("../internals/function-uncurry-this"),u=s("../internals/fails"),f=s("../internals/is-callable"),h=s("../internals/is-symbol"),m=s("../internals/array-slice"),p=s("../internals/get-json-replacer-function"),x=s("../internals/symbol-constructor-detection"),g=String,v=a("JSON","stringify"),y=i(/./.exec),b=i("".charAt),C=i("".charCodeAt),T=i("".replace),M=i(1 .toString),U=/[\uD800-\uDFFF]/g,L=/^[\uD800-\uDBFF]$/,P=/^[\uDC00-\uDFFF]$/,B=!x||u(function(){var R=a("Symbol")("stringify detection");return v([R])!=="[null]"||v({a:R})!=="{}"||v(Object(R))!=="{}"}),q=u(function(){return v("\uDF06\uD834")!=='"\\udf06\\ud834"'||v("\uDEAD")!=='"\\udead"'}),z=function(R,S){var w=m(arguments),_=p(S);if(f(_)||R!==void 0&&!h(R))return w[1]=function(j,N){if(f(_)&&(N=l(_,this,g(j),N)),!h(N))return N},d(v,null,w)},k=function(R,S,w){var _=b(w,S-1),j=b(w,S+1);return y(L,R)&&!y(P,j)||y(P,R)&&!y(L,_)?"\\u"+M(C(R,0),16):R};v&&o({target:"JSON",stat:!0,arity:3,forced:B||q},{stringify:function(R,S,w){var _=m(arguments),j=d(B?z:v,null,_);return q&&typeof j=="string"?T(j,U,k):j}})},{"../internals/array-slice":231,"../internals/export":259,"../internals/fails":260,"../internals/function-apply":261,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/get-json-replacer-function":272,"../internals/is-callable":285,"../internals/is-symbol":292,"../internals/symbol-constructor-detection":336}],363:[function(s,n,c){s("../internals/export")({target:"Number",stat:!0},{isNaN:function(o){return o!=o}})},{"../internals/export":259}],364:[function(s,n,c){var o=s("../internals/export"),a=s("../internals/object-assign");o({target:"Object",stat:!0,arity:2,forced:Object.assign!==a},{assign:a})},{"../internals/export":259,"../internals/object-assign":305}],365:[function(s,n,c){var o=s("../internals/export"),a=s("../internals/symbol-constructor-detection"),d=s("../internals/fails"),l=s("../internals/object-get-own-property-symbols"),i=s("../internals/to-object");o({target:"Object",stat:!0,forced:!a||d(function(){l.f(1)})},{getOwnPropertySymbols:function(u){var f=l.f;return f?f(i(u)):[]}})},{"../internals/export":259,"../internals/fails":260,"../internals/object-get-own-property-symbols":312,"../internals/symbol-constructor-detection":336,"../internals/to-object":344}],366:[function(s,n,c){var o=s("../internals/export"),a=s("../internals/to-object"),d=s("../internals/object-keys");o({target:"Object",stat:!0,forced:s("../internals/fails")(function(){d(1)})},{keys:function(l){return d(a(l))}})},{"../internals/export":259,"../internals/fails":260,"../internals/object-keys":316,"../internals/to-object":344}],367:[function(s,n,c){var o=s("../internals/export"),a=s("../internals/object-to-array").values;o({target:"Object",stat:!0},{values:function(d){return a(d)}})},{"../internals/export":259,"../internals/object-to-array":319}],368:[function(s,n,c){var o=s("../internals/export"),a=s("../internals/function-call"),d=s("../internals/a-callable"),l=s("../internals/new-promise-capability"),i=s("../internals/perform"),u=s("../internals/iterate");o({target:"Promise",stat:!0,forced:s("../internals/promise-statics-incorrect-iteration")},{all:function(f){var h=this,m=l.f(h),p=m.resolve,x=m.reject,g=i(function(){var v=d(h.resolve),y=[],b=0,C=1;u(f,function(T){var M=b++,U=!1;C++,a(v,h,T).then(function(L){U||(U=!0,y[M]=L,--C||p(y))},x)}),--C||p(y)});return g.error&&x(g.value),m.promise}})},{"../internals/a-callable":222,"../internals/export":259,"../internals/function-call":264,"../internals/iterate":293,"../internals/new-promise-capability":303,"../internals/perform":323,"../internals/promise-statics-incorrect-iteration":327}],369:[function(s,n,c){var o=s("../internals/export"),a=s("../internals/is-pure"),d=s("../internals/promise-constructor-detection").CONSTRUCTOR,l=s("../internals/promise-native-constructor"),i=s("../internals/get-built-in"),u=s("../internals/is-callable"),f=s("../internals/define-built-in"),h=l&&l.prototype;if(o({target:"Promise",proto:!0,forced:d,real:!0},{catch:function(p){return this.then(void 0,p)}}),!a&&u(l)){var m=i("Promise").prototype.catch;h.catch!==m&&f(h,"catch",m,{unsafe:!0})}},{"../internals/define-built-in":245,"../internals/export":259,"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325}],370:[function(s,n,c){var o,a,d,l=s("../internals/export"),i=s("../internals/is-pure"),u=s("../internals/engine-is-node"),f=s("../internals/global"),h=s("../internals/function-call"),m=s("../internals/define-built-in"),p=s("../internals/object-set-prototype-of"),x=s("../internals/set-to-string-tag"),g=s("../internals/set-species"),v=s("../internals/a-callable"),y=s("../internals/is-callable"),b=s("../internals/is-object"),C=s("../internals/an-instance"),T=s("../internals/species-constructor"),M=s("../internals/task").set,U=s("../internals/microtask"),L=s("../internals/host-report-errors"),P=s("../internals/perform"),B=s("../internals/queue"),q=s("../internals/internal-state"),z=s("../internals/promise-native-constructor"),k=s("../internals/promise-constructor-detection"),R=s("../internals/new-promise-capability"),S=k.CONSTRUCTOR,w=k.REJECTION_EVENT,_=k.SUBCLASSING,j=q.getterFor("Promise"),N=q.set,E=z&&z.prototype,I=z,D=E,V=f.TypeError,H=f.document,G=f.process,$=R.f,Y=$,F=!!(H&&H.createEvent&&f.dispatchEvent),O=function(be){var Ie;return!(!b(be)||!y(Ie=be.then))&&Ie},W=function(be,Ie){var Ce,Oe,Ee,pe=Ie.value,Ae=Ie.state===1,st=Ae?be.ok:be.fail,qe=be.resolve,ie=be.reject,ae=be.domain;try{st?(Ae||(Ie.rejection===2&&de(Ie),Ie.rejection=1),st===!0?Ce=pe:(ae&&ae.enter(),Ce=st(pe),ae&&(ae.exit(),Ee=!0)),Ce===be.promise?ie(new V("Promise-chain cycle")):(Oe=O(Ce))?h(Oe,Ce,qe,ie):qe(Ce)):ie(pe)}catch(we){ae&&!Ee&&ae.exit(),ie(we)}},K=function(be,Ie){be.notified||(be.notified=!0,U(function(){for(var Ce,Oe=be.reactions;Ce=Oe.get();)W(Ce,be);be.notified=!1,Ie&&!be.rejection&&X(be)}))},Q=function(be,Ie,Ce){var Oe,Ee;F?((Oe=H.createEvent("Event")).promise=Ie,Oe.reason=Ce,Oe.initEvent(be,!1,!0),f.dispatchEvent(Oe)):Oe={promise:Ie,reason:Ce},!w&&(Ee=f["on"+be])?Ee(Oe):be==="unhandledrejection"&&L("Unhandled promise rejection",Ce)},X=function(be){h(M,f,function(){var Ie,Ce=be.facade,Oe=be.value;if(te(be)&&(Ie=P(function(){u?G.emit("unhandledRejection",Oe,Ce):Q("unhandledrejection",Ce,Oe)}),be.rejection=u||te(be)?2:1,Ie.error))throw Ie.value})},te=function(be){return be.rejection!==1&&!be.parent},de=function(be){h(M,f,function(){var Ie=be.facade;u?G.emit("rejectionHandled",Ie):Q("rejectionhandled",Ie,be.value)})},xe=function(be,Ie,Ce){return function(Oe){be(Ie,Oe,Ce)}},ne=function(be,Ie,Ce){be.done||(be.done=!0,Ce&&(be=Ce),be.value=Ie,be.state=2,K(be,!0))},ge=function(be,Ie,Ce){if(!be.done){be.done=!0,Ce&&(be=Ce);try{if(be.facade===Ie)throw new V("Promise can't be resolved itself");var Oe=O(Ie);Oe?U(function(){var Ee={done:!1};try{h(Oe,Ie,xe(ge,Ee,be),xe(ne,Ee,be))}catch(pe){ne(Ee,pe,be)}}):(be.value=Ie,be.state=1,K(be,!1))}catch(Ee){ne({done:!1},Ee,be)}}};if(S&&(D=(I=function(be){C(this,D),v(be),h(o,this);var Ie=j(this);try{be(xe(ge,Ie),xe(ne,Ie))}catch(Ce){ne(Ie,Ce)}}).prototype,(o=function(be){N(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new B,rejection:!1,state:0,value:void 0})}).prototype=m(D,"then",function(be,Ie){var Ce=j(this),Oe=$(T(this,I));return Ce.parent=!0,Oe.ok=!y(be)||be,Oe.fail=y(Ie)&&Ie,Oe.domain=u?G.domain:void 0,Ce.state===0?Ce.reactions.add(Oe):U(function(){W(Oe,Ce)}),Oe.promise}),a=function(){var be=new o,Ie=j(be);this.promise=be,this.resolve=xe(ge,Ie),this.reject=xe(ne,Ie)},R.f=$=function(be){return be===I||be===void 0?new a(be):Y(be)},!i&&y(z)&&E!==Object.prototype)){d=E.then,_||m(E,"then",function(be,Ie){var Ce=this;return new I(function(Oe,Ee){h(d,Ce,Oe,Ee)}).then(be,Ie)},{unsafe:!0});try{delete E.constructor}catch{}p&&p(E,D)}l({global:!0,constructor:!0,wrap:!0,forced:S},{Promise:I}),x(I,"Promise",!1,!0),g("Promise")},{"../internals/a-callable":222,"../internals/an-instance":226,"../internals/define-built-in":245,"../internals/engine-is-node":254,"../internals/export":259,"../internals/function-call":264,"../internals/global":274,"../internals/host-report-errors":277,"../internals/internal-state":282,"../internals/is-callable":285,"../internals/is-object":289,"../internals/is-pure":290,"../internals/microtask":302,"../internals/new-promise-capability":303,"../internals/object-set-prototype-of":318,"../internals/perform":323,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325,"../internals/queue":328,"../internals/set-species":330,"../internals/set-to-string-tag":331,"../internals/species-constructor":335,"../internals/task":339}],371:[function(s,n,c){var o=s("../internals/export"),a=s("../internals/is-pure"),d=s("../internals/promise-native-constructor"),l=s("../internals/fails"),i=s("../internals/get-built-in"),u=s("../internals/is-callable"),f=s("../internals/species-constructor"),h=s("../internals/promise-resolve"),m=s("../internals/define-built-in"),p=d&&d.prototype;if(o({target:"Promise",proto:!0,real:!0,forced:!!d&&l(function(){p.finally.call({then:function(){}},function(){})})},{finally:function(g){var v=f(this,i("Promise")),y=u(g);return this.then(y?function(b){return h(v,g()).then(function(){return b})}:g,y?function(b){return h(v,g()).then(function(){throw b})}:g)}}),!a&&u(d)){var x=i("Promise").prototype.finally;p.finally!==x&&m(p,"finally",x,{unsafe:!0})}},{"../internals/define-built-in":245,"../internals/export":259,"../internals/fails":260,"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/promise-native-constructor":325,"../internals/promise-resolve":326,"../internals/species-constructor":335}],372:[function(s,n,c){s("../modules/es.promise.constructor"),s("../modules/es.promise.all"),s("../modules/es.promise.catch"),s("../modules/es.promise.race"),s("../modules/es.promise.reject"),s("../modules/es.promise.resolve")},{"../modules/es.promise.all":368,"../modules/es.promise.catch":369,"../modules/es.promise.constructor":370,"../modules/es.promise.race":373,"../modules/es.promise.reject":374,"../modules/es.promise.resolve":375}],373:[function(s,n,c){var o=s("../internals/export"),a=s("../internals/function-call"),d=s("../internals/a-callable"),l=s("../internals/new-promise-capability"),i=s("../internals/perform"),u=s("../internals/iterate");o({target:"Promise",stat:!0,forced:s("../internals/promise-statics-incorrect-iteration")},{race:function(f){var h=this,m=l.f(h),p=m.reject,x=i(function(){var g=d(h.resolve);u(f,function(v){a(g,h,v).then(m.resolve,p)})});return x.error&&p(x.value),m.promise}})},{"../internals/a-callable":222,"../internals/export":259,"../internals/function-call":264,"../internals/iterate":293,"../internals/new-promise-capability":303,"../internals/perform":323,"../internals/promise-statics-incorrect-iteration":327}],374:[function(s,n,c){var o=s("../internals/export"),a=s("../internals/function-call"),d=s("../internals/new-promise-capability");o({target:"Promise",stat:!0,forced:s("../internals/promise-constructor-detection").CONSTRUCTOR},{reject:function(l){var i=d.f(this);return a(i.reject,void 0,l),i.promise}})},{"../internals/export":259,"../internals/function-call":264,"../internals/new-promise-capability":303,"../internals/promise-constructor-detection":324}],375:[function(s,n,c){var o=s("../internals/export"),a=s("../internals/get-built-in"),d=s("../internals/is-pure"),l=s("../internals/promise-native-constructor"),i=s("../internals/promise-constructor-detection").CONSTRUCTOR,u=s("../internals/promise-resolve"),f=a("Promise"),h=d&&!i;o({target:"Promise",stat:!0,forced:d||i},{resolve:function(m){return u(h&&this===f?l:this,m)}})},{"../internals/export":259,"../internals/get-built-in":269,"../internals/is-pure":290,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325,"../internals/promise-resolve":326}],376:[function(s,n,c){var o=s("../internals/export"),a=s("../internals/function-uncurry-this"),d=s("../internals/to-absolute-index"),l=RangeError,i=String.fromCharCode,u=String.fromCodePoint,f=a([].join);o({target:"String",stat:!0,arity:1,forced:!!u&&u.length!==1},{fromCodePoint:function(h){for(var m,p=[],x=arguments.length,g=0;x>g;){if(m=+arguments[g++],d(m,1114111)!==m)throw new l(m+" is not a valid code point");p[g]=m<65536?i(m):i(55296+((m-=65536)>>10),m%1024+56320)}return f(p,"")}})},{"../internals/export":259,"../internals/function-uncurry-this":268,"../internals/to-absolute-index":340}],377:[function(s,n,c){var o=s("../internals/export"),a=s("../internals/function-uncurry-this"),d=s("../internals/not-a-regexp"),l=s("../internals/require-object-coercible"),i=s("../internals/to-string"),u=s("../internals/correct-is-regexp-logic"),f=a("".indexOf);o({target:"String",proto:!0,forced:!u("includes")},{includes:function(h){return!!~f(i(l(this)),i(d(h)),arguments.length>1?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":238,"../internals/export":259,"../internals/function-uncurry-this":268,"../internals/not-a-regexp":304,"../internals/require-object-coercible":329,"../internals/to-string":348}],378:[function(s,n,c){s("../internals/well-known-symbol-define")("asyncIterator")},{"../internals/well-known-symbol-define":355}],379:[function(s,n,c){var o=s("../internals/export"),a=s("../internals/global"),d=s("../internals/function-call"),l=s("../internals/function-uncurry-this"),i=s("../internals/is-pure"),u=s("../internals/descriptors"),f=s("../internals/symbol-constructor-detection"),h=s("../internals/fails"),m=s("../internals/has-own-property"),p=s("../internals/object-is-prototype-of"),x=s("../internals/an-object"),g=s("../internals/to-indexed-object"),v=s("../internals/to-property-key"),y=s("../internals/to-string"),b=s("../internals/create-property-descriptor"),C=s("../internals/object-create"),T=s("../internals/object-keys"),M=s("../internals/object-get-own-property-names"),U=s("../internals/object-get-own-property-names-external"),L=s("../internals/object-get-own-property-symbols"),P=s("../internals/object-get-own-property-descriptor"),B=s("../internals/object-define-property"),q=s("../internals/object-define-properties"),z=s("../internals/object-property-is-enumerable"),k=s("../internals/define-built-in"),R=s("../internals/define-built-in-accessor"),S=s("../internals/shared"),w=s("../internals/shared-key"),_=s("../internals/hidden-keys"),j=s("../internals/uid"),N=s("../internals/well-known-symbol"),E=s("../internals/well-known-symbol-wrapped"),I=s("../internals/well-known-symbol-define"),D=s("../internals/symbol-define-to-primitive"),V=s("../internals/set-to-string-tag"),H=s("../internals/internal-state"),G=s("../internals/array-iteration").forEach,$=w("hidden"),Y=H.set,F=H.getterFor("Symbol"),O=Object.prototype,W=a.Symbol,K=W&&W.prototype,Q=a.RangeError,X=a.TypeError,te=a.QObject,de=P.f,xe=B.f,ne=U.f,ge=z.f,be=l([].push),Ie=S("symbols"),Ce=S("op-symbols"),Oe=S("wks"),Ee=!te||!te.prototype||!te.prototype.findChild,pe=function($e,ue,oe){var _e=de(O,ue);_e&&delete O[ue],xe($e,ue,oe),_e&&$e!==O&&xe(O,ue,_e)},Ae=u&&h(function(){return C(xe({},"a",{get:function(){return xe(this,"a",{value:7}).a}})).a!==7})?pe:xe,st=function($e,ue){var oe=Ie[$e]=C(K);return Y(oe,{type:"Symbol",tag:$e,description:ue}),u||(oe.description=ue),oe},qe=function($e,ue,oe){$e===O&&qe(Ce,ue,oe),x($e);var _e=v(ue);return x(oe),m(Ie,_e)?(oe.enumerable?(m($e,$)&&$e[$][_e]&&($e[$][_e]=!1),oe=C(oe,{enumerable:b(0,!1)})):(m($e,$)||xe($e,$,b(1,{})),$e[$][_e]=!0),Ae($e,_e,oe)):xe($e,_e,oe)},ie=function($e,ue){x($e);var oe=g(ue),_e=T(oe).concat(He(oe));return G(_e,function(Me){u&&!d(ae,oe,Me)||qe($e,Me,oe[Me])}),$e},ae=function($e){var ue=v($e),oe=d(ge,this,ue);return!(this===O&&m(Ie,ue)&&!m(Ce,ue))&&(!(oe||!m(this,ue)||!m(Ie,ue)||m(this,$)&&this[$][ue])||oe)},we=function($e,ue){var oe=g($e),_e=v(ue);if(oe!==O||!m(Ie,_e)||m(Ce,_e)){var Me=de(oe,_e);return!Me||!m(Ie,_e)||m(oe,$)&&oe[$][_e]||(Me.enumerable=!0),Me}},ve=function($e){var ue=ne(g($e)),oe=[];return G(ue,function(_e){m(Ie,_e)||m(_,_e)||be(oe,_e)}),oe},He=function($e){var ue=$e===O,oe=ne(ue?Ce:g($e)),_e=[];return G(oe,function(Me){!m(Ie,Me)||ue&&!m(O,Me)||be(_e,Ie[Me])}),_e};f||(k(K=(W=function(){if(p(K,this))throw new X("Symbol is not a constructor");var $e=arguments.length&&arguments[0]!==void 0?y(arguments[0]):void 0,ue=j($e),oe=function(_e){this===O&&d(oe,Ce,_e),m(this,$)&&m(this[$],ue)&&(this[$][ue]=!1);var Me=b(1,_e);try{Ae(this,ue,Me)}catch(ze){if(!(ze instanceof Q))throw ze;pe(this,ue,Me)}};return u&&Ee&&Ae(O,ue,{configurable:!0,set:oe}),st(ue,$e)}).prototype,"toString",function(){return F(this).tag}),k(W,"withoutSetter",function($e){return st(j($e),$e)}),z.f=ae,B.f=qe,q.f=ie,P.f=we,M.f=U.f=ve,L.f=He,E.f=function($e){return st(N($e),$e)},u&&(R(K,"description",{configurable:!0,get:function(){return F(this).description}}),i||k(O,"propertyIsEnumerable",ae,{unsafe:!0}))),o({global:!0,constructor:!0,wrap:!0,forced:!f,sham:!f},{Symbol:W}),G(T(Oe),function($e){I($e)}),o({target:"Symbol",stat:!0,forced:!f},{useSetter:function(){Ee=!0},useSimple:function(){Ee=!1}}),o({target:"Object",stat:!0,forced:!f,sham:!u},{create:function($e,ue){return ue===void 0?C($e):ie(C($e),ue)},defineProperty:qe,defineProperties:ie,getOwnPropertyDescriptor:we}),o({target:"Object",stat:!0,forced:!f},{getOwnPropertyNames:ve}),D(),V(W,"Symbol"),_[$]=!0},{"../internals/an-object":227,"../internals/array-iteration":229,"../internals/create-property-descriptor":242,"../internals/define-built-in":245,"../internals/define-built-in-accessor":244,"../internals/descriptors":247,"../internals/export":259,"../internals/fails":260,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/global":274,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/internal-state":282,"../internals/is-pure":290,"../internals/object-create":306,"../internals/object-define-properties":307,"../internals/object-define-property":308,"../internals/object-get-own-property-descriptor":309,"../internals/object-get-own-property-names":311,"../internals/object-get-own-property-names-external":310,"../internals/object-get-own-property-symbols":312,"../internals/object-is-prototype-of":314,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/set-to-string-tag":331,"../internals/shared":334,"../internals/shared-key":332,"../internals/symbol-constructor-detection":336,"../internals/symbol-define-to-primitive":337,"../internals/to-indexed-object":341,"../internals/to-property-key":346,"../internals/to-string":348,"../internals/uid":350,"../internals/well-known-symbol":357,"../internals/well-known-symbol-define":355,"../internals/well-known-symbol-wrapped":356}],380:[function(s,n,c){var o=s("../internals/export"),a=s("../internals/get-built-in"),d=s("../internals/has-own-property"),l=s("../internals/to-string"),i=s("../internals/shared"),u=s("../internals/symbol-registry-detection"),f=i("string-to-symbol-registry"),h=i("symbol-to-string-registry");o({target:"Symbol",stat:!0,forced:!u},{for:function(m){var p=l(m);if(d(f,p))return f[p];var x=a("Symbol")(p);return f[p]=x,h[x]=p,x}})},{"../internals/export":259,"../internals/get-built-in":269,"../internals/has-own-property":275,"../internals/shared":334,"../internals/symbol-registry-detection":338,"../internals/to-string":348}],381:[function(s,n,c){s("../modules/es.symbol.constructor"),s("../modules/es.symbol.for"),s("../modules/es.symbol.key-for"),s("../modules/es.json.stringify"),s("../modules/es.object.get-own-property-symbols")},{"../modules/es.json.stringify":362,"../modules/es.object.get-own-property-symbols":365,"../modules/es.symbol.constructor":379,"../modules/es.symbol.for":380,"../modules/es.symbol.key-for":382}],382:[function(s,n,c){var o=s("../internals/export"),a=s("../internals/has-own-property"),d=s("../internals/is-symbol"),l=s("../internals/try-to-string"),i=s("../internals/shared"),u=s("../internals/symbol-registry-detection"),f=i("symbol-to-string-registry");o({target:"Symbol",stat:!0,forced:!u},{keyFor:function(h){if(!d(h))throw new TypeError(l(h)+" is not a symbol");if(a(f,h))return f[h]}})},{"../internals/export":259,"../internals/has-own-property":275,"../internals/is-symbol":292,"../internals/shared":334,"../internals/symbol-registry-detection":338,"../internals/try-to-string":349}],383:[function(s,n,c){function o(a){return Object.prototype.toString.call(a)}c.isArray=function(a){return Array.isArray?Array.isArray(a):o(a)==="[object Array]"},c.isBoolean=function(a){return typeof a=="boolean"},c.isNull=function(a){return a===null},c.isNullOrUndefined=function(a){return a==null},c.isNumber=function(a){return typeof a=="number"},c.isString=function(a){return typeof a=="string"},c.isSymbol=function(a){return typeof a=="symbol"},c.isUndefined=function(a){return a===void 0},c.isRegExp=function(a){return o(a)==="[object RegExp]"},c.isObject=function(a){return typeof a=="object"&&a!==null},c.isDate=function(a){return o(a)==="[object Date]"},c.isError=function(a){return o(a)==="[object Error]"||a instanceof Error},c.isFunction=function(a){return typeof a=="function"},c.isPrimitive=function(a){return a===null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||typeof a=="symbol"||a===void 0},c.isBuffer=s("buffer").Buffer.isBuffer},{buffer:220}],384:[function(s,n,c){(function(o){(function(){var a=s("elliptic"),d=s("bn.js");n.exports=function(f){return new i(f)};var l={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function i(f){this.curveType=l[f],this.curveType||(this.curveType={name:f}),this.curve=new a.ec(this.curveType.name),this.keys=void 0}function u(f,h,m){Array.isArray(f)||(f=f.toArray());var p=new o(f);if(m&&p.length<m){var x=new o(m-p.length);x.fill(0),p=o.concat([x,p])}return h?p.toString(h):p}l.p224=l.secp224r1,l.p256=l.secp256r1=l.prime256v1,l.p192=l.secp192r1=l.prime192v1,l.p384=l.secp384r1,l.p521=l.secp521r1,i.prototype.generateKeys=function(f,h){return this.keys=this.curve.genKeyPair(),this.getPublicKey(f,h)},i.prototype.computeSecret=function(f,h,m){return h=h||"utf8",o.isBuffer(f)||(f=new o(f,h)),u(this.curve.keyFromPublic(f).getPublic().mul(this.keys.getPrivate()).getX(),m,this.curveType.byteLength)},i.prototype.getPublicKey=function(f,h){var m=this.keys.getPublic(h==="compressed",!0);return h==="hybrid"&&(m[m.length-1]%2?m[0]=7:m[0]=6),u(m,f)},i.prototype.getPrivateKey=function(f){return u(this.keys.getPrivate(),f)},i.prototype.setPublicKey=function(f,h){return h=h||"utf8",o.isBuffer(f)||(f=new o(f,h)),this.keys._importPublic(f),this},i.prototype.setPrivateKey=function(f,h){h=h||"utf8",o.isBuffer(f)||(f=new o(f,h));var m=new d(f);return m=m.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(m),this}}).call(this)}).call(this,s("buffer").Buffer)},{"bn.js":385,buffer:220,elliptic:405}],385:[function(s,n,c){arguments[4][184][0].apply(c,arguments)},{buffer:188,dup:184}],386:[function(s,n,c){var o=s("inherits"),a=s("md5.js"),d=s("ripemd160"),l=s("sha.js"),i=s("cipher-base");function u(f){i.call(this,"digest"),this._hash=f}o(u,i),u.prototype._update=function(f){this._hash.update(f)},u.prototype._final=function(){return this._hash.digest()},n.exports=function(f){return(f=f.toLowerCase())==="md5"?new a:f==="rmd160"||f==="ripemd160"?new d:new u(l(f))}},{"cipher-base":221,inherits:440,"md5.js":450,ripemd160:493,"sha.js":498}],387:[function(s,n,c){var o=s("md5.js");n.exports=function(a){return new o().update(a).digest()}},{"md5.js":450}],388:[function(s,n,c){var o=s("inherits"),a=s("./legacy"),d=s("cipher-base"),l=s("safe-buffer").Buffer,i=s("create-hash/md5"),u=s("ripemd160"),f=s("sha.js"),h=l.alloc(128);function m(p,x){d.call(this,"digest"),typeof x=="string"&&(x=l.from(x));var g=p==="sha512"||p==="sha384"?128:64;this._alg=p,this._key=x,x.length>g?x=(p==="rmd160"?new u:f(p)).update(x).digest():x.length<g&&(x=l.concat([x,h],g));for(var v=this._ipad=l.allocUnsafe(g),y=this._opad=l.allocUnsafe(g),b=0;b<g;b++)v[b]=54^x[b],y[b]=92^x[b];this._hash=p==="rmd160"?new u:f(p),this._hash.update(v)}o(m,d),m.prototype._update=function(p){this._hash.update(p)},m.prototype._final=function(){var p=this._hash.digest();return(this._alg==="rmd160"?new u:f(this._alg)).update(this._opad).update(p).digest()},n.exports=function(p,x){return(p=p.toLowerCase())==="rmd160"||p==="ripemd160"?new m("rmd160",x):p==="md5"?new a(i,x):new m(p,x)}},{"./legacy":389,"cipher-base":221,"create-hash/md5":387,inherits:440,ripemd160:493,"safe-buffer":494,"sha.js":498}],389:[function(s,n,c){var o=s("inherits"),a=s("safe-buffer").Buffer,d=s("cipher-base"),l=a.alloc(128);function i(u,f){d.call(this,"digest"),typeof f=="string"&&(f=a.from(f)),this._alg=u,this._key=f,f.length>64?f=u(f):f.length<64&&(f=a.concat([f,l],64));for(var h=this._ipad=a.allocUnsafe(64),m=this._opad=a.allocUnsafe(64),p=0;p<64;p++)h[p]=54^f[p],m[p]=92^f[p];this._hash=[h]}o(i,d),i.prototype._update=function(u){this._hash.push(u)},i.prototype._final=function(){var u=this._alg(a.concat(this._hash));return this._alg(a.concat([this._opad,u]))},n.exports=i},{"cipher-base":221,inherits:440,"safe-buffer":494}],390:[function(s,n,c){c.randomBytes=c.rng=c.pseudoRandomBytes=c.prng=s("randombytes"),c.createHash=c.Hash=s("create-hash"),c.createHmac=c.Hmac=s("create-hmac");var o=s("browserify-sign/algos"),a=Object.keys(o),d=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(a);c.getHashes=function(){return d};var l=s("pbkdf2");c.pbkdf2=l.pbkdf2,c.pbkdf2Sync=l.pbkdf2Sync;var i=s("browserify-cipher");c.Cipher=i.Cipher,c.createCipher=i.createCipher,c.Cipheriv=i.Cipheriv,c.createCipheriv=i.createCipheriv,c.Decipher=i.Decipher,c.createDecipher=i.createDecipher,c.Decipheriv=i.Decipheriv,c.createDecipheriv=i.createDecipheriv,c.getCiphers=i.getCiphers,c.listCiphers=i.listCiphers;var u=s("diffie-hellman");c.DiffieHellmanGroup=u.DiffieHellmanGroup,c.createDiffieHellmanGroup=u.createDiffieHellmanGroup,c.getDiffieHellman=u.getDiffieHellman,c.createDiffieHellman=u.createDiffieHellman,c.DiffieHellman=u.DiffieHellman;var f=s("browserify-sign");c.createSign=f.createSign,c.Sign=f.Sign,c.createVerify=f.createVerify,c.Verify=f.Verify,c.createECDH=s("create-ecdh");var h=s("public-encrypt");c.publicEncrypt=h.publicEncrypt,c.privateEncrypt=h.privateEncrypt,c.publicDecrypt=h.publicDecrypt,c.privateDecrypt=h.privateDecrypt;var m=s("randomfill");c.randomFill=m.randomFill,c.randomFillSync=m.randomFillSync,c.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},c.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},{"browserify-cipher":206,"browserify-sign":213,"browserify-sign/algos":210,"create-ecdh":384,"create-hash":386,"create-hmac":388,"diffie-hellman":400,pbkdf2:460,"public-encrypt":468,randombytes:475,randomfill:476}],391:[function(s,n,c){(function(o,a){typeof c=="object"&&n!==void 0?n.exports=a():(o=typeof globalThis<"u"?globalThis:o||self).dayjs=a()})(void 0,function(){var o=6e4,a=36e5,d="millisecond",l="second",i="minute",u="hour",f="day",h="week",m="month",p="quarter",x="year",g="date",v="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,b=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,C={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(w){var _=["th","st","nd","rd"],j=w%100;return"["+w+(_[(j-20)%10]||_[j]||_[0])+"]"}},T=function(w,_,j){var N=String(w);return!N||N.length>=_?w:""+Array(_+1-N.length).join(j)+w},M={s:T,z:function(w){var _=-w.utcOffset(),j=Math.abs(_),N=Math.floor(j/60),E=j%60;return(_<=0?"+":"-")+T(N,2,"0")+":"+T(E,2,"0")},m:function w(_,j){if(_.date()<j.date())return-w(j,_);var N=12*(j.year()-_.year())+(j.month()-_.month()),E=_.clone().add(N,m),I=j-E<0,D=_.clone().add(N+(I?-1:1),m);return+(-(N+(j-E)/(I?E-D:D-E))||0)},a:function(w){return w<0?Math.ceil(w)||0:Math.floor(w)},p:function(w){return{M:m,y:x,w:h,d:f,D:g,h:u,m:i,s:l,ms:d,Q:p}[w]||String(w||"").toLowerCase().replace(/s$/,"")},u:function(w){return w===void 0}},U="en",L={};L[U]=C;var P="$isDayjsObject",B=function(w){return w instanceof R||!(!w||!w[P])},q=function w(_,j,N){var E;if(!_)return U;if(typeof _=="string"){var I=_.toLowerCase();L[I]&&(E=I),j&&(L[I]=j,E=I);var D=_.split("-");if(!E&&D.length>1)return w(D[0])}else{var V=_.name;L[V]=_,E=V}return!N&&E&&(U=E),E||!N&&U},z=function(w,_){if(B(w))return w.clone();var j=typeof _=="object"?_:{};return j.date=w,j.args=arguments,new R(j)},k=M;k.l=q,k.i=B,k.w=function(w,_){return z(w,{locale:_.$L,utc:_.$u,x:_.$x,$offset:_.$offset})};var R=function(){function w(j){this.$L=q(j.locale,null,!0),this.parse(j),this.$x=this.$x||j.x||{},this[P]=!0}var _=w.prototype;return _.parse=function(j){this.$d=function(N){var E=N.date,I=N.utc;if(E===null)return new Date(NaN);if(k.u(E))return new Date;if(E instanceof Date)return new Date(E);if(typeof E=="string"&&!/Z$/i.test(E)){var D=E.match(y);if(D){var V=D[2]-1||0,H=(D[7]||"0").substring(0,3);return I?new Date(Date.UTC(D[1],V,D[3]||1,D[4]||0,D[5]||0,D[6]||0,H)):new Date(D[1],V,D[3]||1,D[4]||0,D[5]||0,D[6]||0,H)}}return new Date(E)}(j),this.init()},_.init=function(){var j=this.$d;this.$y=j.getFullYear(),this.$M=j.getMonth(),this.$D=j.getDate(),this.$W=j.getDay(),this.$H=j.getHours(),this.$m=j.getMinutes(),this.$s=j.getSeconds(),this.$ms=j.getMilliseconds()},_.$utils=function(){return k},_.isValid=function(){return this.$d.toString()!==v},_.isSame=function(j,N){var E=z(j);return this.startOf(N)<=E&&E<=this.endOf(N)},_.isAfter=function(j,N){return z(j)<this.startOf(N)},_.isBefore=function(j,N){return this.endOf(N)<z(j)},_.$g=function(j,N,E){return k.u(j)?this[N]:this.set(E,j)},_.unix=function(){return Math.floor(this.valueOf()/1e3)},_.valueOf=function(){return this.$d.getTime()},_.startOf=function(j,N){var E=this,I=!!k.u(N)||N,D=k.p(j),V=function(K,Q){var X=k.w(E.$u?Date.UTC(E.$y,Q,K):new Date(E.$y,Q,K),E);return I?X:X.endOf(f)},H=function(K,Q){return k.w(E.toDate()[K].apply(E.toDate("s"),(I?[0,0,0,0]:[23,59,59,999]).slice(Q)),E)},G=this.$W,$=this.$M,Y=this.$D,F="set"+(this.$u?"UTC":"");switch(D){case x:return I?V(1,0):V(31,11);case m:return I?V(1,$):V(0,$+1);case h:var O=this.$locale().weekStart||0,W=(G<O?G+7:G)-O;return V(I?Y-W:Y+(6-W),$);case f:case g:return H(F+"Hours",0);case u:return H(F+"Minutes",1);case i:return H(F+"Seconds",2);case l:return H(F+"Milliseconds",3);default:return this.clone()}},_.endOf=function(j){return this.startOf(j,!1)},_.$set=function(j,N){var E,I=k.p(j),D="set"+(this.$u?"UTC":""),V=(E={},E[f]=D+"Date",E[g]=D+"Date",E[m]=D+"Month",E[x]=D+"FullYear",E[u]=D+"Hours",E[i]=D+"Minutes",E[l]=D+"Seconds",E[d]=D+"Milliseconds",E)[I],H=I===f?this.$D+(N-this.$W):N;if(I===m||I===x){var G=this.clone().set(g,1);G.$d[V](H),G.init(),this.$d=G.set(g,Math.min(this.$D,G.daysInMonth())).$d}else V&&this.$d[V](H);return this.init(),this},_.set=function(j,N){return this.clone().$set(j,N)},_.get=function(j){return this[k.p(j)]()},_.add=function(j,N){var E,I=this;j=Number(j);var D=k.p(N),V=function($){var Y=z(I);return k.w(Y.date(Y.date()+Math.round($*j)),I)};if(D===m)return this.set(m,this.$M+j);if(D===x)return this.set(x,this.$y+j);if(D===f)return V(1);if(D===h)return V(7);var H=(E={},E[i]=o,E[u]=a,E[l]=1e3,E)[D]||1,G=this.$d.getTime()+j*H;return k.w(G,this)},_.subtract=function(j,N){return this.add(-1*j,N)},_.format=function(j){var N=this,E=this.$locale();if(!this.isValid())return E.invalidDate||v;var I=j||"YYYY-MM-DDTHH:mm:ssZ",D=k.z(this),V=this.$H,H=this.$m,G=this.$M,$=E.weekdays,Y=E.months,F=E.meridiem,O=function(Q,X,te,de){return Q&&(Q[X]||Q(N,I))||te[X].slice(0,de)},W=function(Q){return k.s(V%12||12,Q,"0")},K=F||function(Q,X,te){var de=Q<12?"AM":"PM";return te?de.toLowerCase():de};return I.replace(b,function(Q,X){return X||function(te){switch(te){case"YY":return String(N.$y).slice(-2);case"YYYY":return k.s(N.$y,4,"0");case"M":return G+1;case"MM":return k.s(G+1,2,"0");case"MMM":return O(E.monthsShort,G,Y,3);case"MMMM":return O(Y,G);case"D":return N.$D;case"DD":return k.s(N.$D,2,"0");case"d":return String(N.$W);case"dd":return O(E.weekdaysMin,N.$W,$,2);case"ddd":return O(E.weekdaysShort,N.$W,$,3);case"dddd":return $[N.$W];case"H":return String(V);case"HH":return k.s(V,2,"0");case"h":return W(1);case"hh":return W(2);case"a":return K(V,H,!0);case"A":return K(V,H,!1);case"m":return String(H);case"mm":return k.s(H,2,"0");case"s":return String(N.$s);case"ss":return k.s(N.$s,2,"0");case"SSS":return k.s(N.$ms,3,"0");case"Z":return D}return null}(Q)||D.replace(":","")})},_.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},_.diff=function(j,N,E){var I,D=this,V=k.p(N),H=z(j),G=(H.utcOffset()-this.utcOffset())*o,$=this-H,Y=function(){return k.m(D,H)};switch(V){case x:I=Y()/12;break;case m:I=Y();break;case p:I=Y()/3;break;case h:I=($-G)/6048e5;break;case f:I=($-G)/864e5;break;case u:I=$/a;break;case i:I=$/o;break;case l:I=$/1e3;break;default:I=$}return E?I:k.a(I)},_.daysInMonth=function(){return this.endOf(m).$D},_.$locale=function(){return L[this.$L]},_.locale=function(j,N){if(!j)return this.$L;var E=this.clone(),I=q(j,N,!0);return I&&(E.$L=I),E},_.clone=function(){return k.w(this.$d,this)},_.toDate=function(){return new Date(this.valueOf())},_.toJSON=function(){return this.isValid()?this.toISOString():null},_.toISOString=function(){return this.$d.toISOString()},_.toString=function(){return this.$d.toUTCString()},w}(),S=R.prototype;return z.prototype=S,[["$ms",d],["$s",l],["$m",i],["$H",u],["$W",f],["$M",m],["$y",x],["$D",g]].forEach(function(w){S[w[1]]=function(_){return this.$g(_,w[0],w[1])}}),z.extend=function(w,_){return w.$i||(w(_,R,z),w.$i=!0),z},z.locale=q,z.isDayjs=B,z.unix=function(w){return z(1e3*w)},z.en=L[U],z.Ls=L,z.p={},z})},{}],392:[function(s,n,c){(function(o,a){typeof c=="object"&&n!==void 0?n.exports=a():(o=typeof globalThis<"u"?globalThis:o||self).dayjs_plugin_customParseFormat=a()})(void 0,function(){var o={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},a=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,d=/\d\d/,l=/\d\d?/,i=/\d*[^-_:/,()\s\d]+/,u={},f=function(y){return(y=+y)+(y>68?1900:2e3)},h=function(y){return function(b){this[y]=+b}},m=[/[+-]\d\d:?(\d\d)?|Z/,function(y){(this.zone||(this.zone={})).offset=function(b){if(!b||b==="Z")return 0;var C=b.match(/([+-]|\d\d)/g),T=60*C[1]+(+C[2]||0);return T===0?0:C[0]==="+"?-T:T}(y)}],p=function(y){var b=u[y];return b&&(b.indexOf?b:b.s.concat(b.f))},x=function(y,b){var C,T=u.meridiem;if(T){for(var M=1;M<=24;M+=1)if(y.indexOf(T(M,0,b))>-1){C=M>12;break}}else C=y===(b?"pm":"PM");return C},g={A:[i,function(y){this.afternoon=x(y,!1)}],a:[i,function(y){this.afternoon=x(y,!0)}],S:[/\d/,function(y){this.milliseconds=100*+y}],SS:[d,function(y){this.milliseconds=10*+y}],SSS:[/\d{3}/,function(y){this.milliseconds=+y}],s:[l,h("seconds")],ss:[l,h("seconds")],m:[l,h("minutes")],mm:[l,h("minutes")],H:[l,h("hours")],h:[l,h("hours")],HH:[l,h("hours")],hh:[l,h("hours")],D:[l,h("day")],DD:[d,h("day")],Do:[i,function(y){var b=u.ordinal,C=y.match(/\d+/);if(this.day=C[0],b)for(var T=1;T<=31;T+=1)b(T).replace(/\[|\]/g,"")===y&&(this.day=T)}],M:[l,h("month")],MM:[d,h("month")],MMM:[i,function(y){var b=p("months"),C=(p("monthsShort")||b.map(function(T){return T.slice(0,3)})).indexOf(y)+1;if(C<1)throw new Error;this.month=C%12||C}],MMMM:[i,function(y){var b=p("months").indexOf(y)+1;if(b<1)throw new Error;this.month=b%12||b}],Y:[/[+-]?\d+/,h("year")],YY:[d,function(y){this.year=f(y)}],YYYY:[/\d{4}/,h("year")],Z:m,ZZ:m};function v(y){var b,C;b=y,C=u&&u.formats;for(var T=(y=b.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(z,k,R){var S=R&&R.toUpperCase();return k||C[R]||o[R]||C[S].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(w,_,j){return _||j.slice(1)})})).match(a),M=T.length,U=0;U<M;U+=1){var L=T[U],P=g[L],B=P&&P[0],q=P&&P[1];T[U]=q?{regex:B,parser:q}:L.replace(/^\[|\]$/g,"")}return function(z){for(var k={},R=0,S=0;R<M;R+=1){var w=T[R];if(typeof w=="string")S+=w.length;else{var _=w.regex,j=w.parser,N=z.slice(S),E=_.exec(N)[0];j.call(k,E),z=z.replace(E,"")}}return function(I){var D=I.afternoon;if(D!==void 0){var V=I.hours;D?V<12&&(I.hours+=12):V===12&&(I.hours=0),delete I.afternoon}}(k),k}}return function(y,b,C){C.p.customParseFormat=!0,y&&y.parseTwoDigitYear&&(f=y.parseTwoDigitYear);var T=b.prototype,M=T.parse;T.parse=function(U){var L=U.date,P=U.utc,B=U.args;this.$u=P;var q=B[1];if(typeof q=="string"){var z=B[2]===!0,k=B[3]===!0,R=z||k,S=B[2];k&&(S=B[2]),u=this.$locale(),!z&&S&&(u=C.Ls[S]),this.$d=function(N,E,I){try{if(["x","X"].indexOf(E)>-1)return new Date((E==="X"?1e3:1)*N);var D=v(E)(N),V=D.year,H=D.month,G=D.day,$=D.hours,Y=D.minutes,F=D.seconds,O=D.milliseconds,W=D.zone,K=new Date,Q=G||(V||H?1:K.getDate()),X=V||K.getFullYear(),te=0;V&&!H||(te=H>0?H-1:K.getMonth());var de=$||0,xe=Y||0,ne=F||0,ge=O||0;return W?new Date(Date.UTC(X,te,Q,de,xe,ne,ge+60*W.offset*1e3)):I?new Date(Date.UTC(X,te,Q,de,xe,ne,ge)):new Date(X,te,Q,de,xe,ne,ge)}catch{return new Date("")}}(L,q,P),this.init(),S&&S!==!0&&(this.$L=this.locale(S).$L),R&&L!=this.format(q)&&(this.$d=new Date("")),u={}}else if(q instanceof Array)for(var w=q.length,_=1;_<=w;_+=1){B[1]=q[_-1];var j=C.apply(this,B);if(j.isValid()){this.$d=j.$d,this.$L=j.$L,this.init();break}_===w&&(this.$d=new Date(""))}else M.call(this,U)}}})},{}],393:[function(s,n,c){(function(o,a){typeof c=="object"&&n!==void 0?n.exports=a():(o=typeof globalThis<"u"?globalThis:o||self).dayjs_plugin_utc=a()})(void 0,function(){var o="minute",a=/[+-]\d\d(?::?\d\d)?/g,d=/([+-]|\d\d)/g;return function(l,i,u){var f=i.prototype;u.utc=function(y){var b={date:y,utc:!0,args:arguments};return new i(b)},f.utc=function(y){var b=u(this.toDate(),{locale:this.$L,utc:!0});return y?b.add(this.utcOffset(),o):b},f.local=function(){return u(this.toDate(),{locale:this.$L,utc:!1})};var h=f.parse;f.parse=function(y){y.utc&&(this.$u=!0),this.$utils().u(y.$offset)||(this.$offset=y.$offset),h.call(this,y)};var m=f.init;f.init=function(){if(this.$u){var y=this.$d;this.$y=y.getUTCFullYear(),this.$M=y.getUTCMonth(),this.$D=y.getUTCDate(),this.$W=y.getUTCDay(),this.$H=y.getUTCHours(),this.$m=y.getUTCMinutes(),this.$s=y.getUTCSeconds(),this.$ms=y.getUTCMilliseconds()}else m.call(this)};var p=f.utcOffset;f.utcOffset=function(y,b){var C=this.$utils().u;if(C(y))return this.$u?0:C(this.$offset)?p.call(this):this.$offset;if(typeof y=="string"&&(y=function(L){L===void 0&&(L="");var P=L.match(a);if(!P)return null;var B=(""+P[0]).match(d)||["-",0,0],q=B[0],z=60*+B[1]+ +B[2];return z===0?0:q==="+"?z:-z}(y))===null)return this;var T=Math.abs(y)<=16?60*y:y,M=this;if(b)return M.$offset=T,M.$u=y===0,M;if(y!==0){var U=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(M=this.local().add(T+U,o)).$offset=T,M.$x.$localOffset=U}else M=this.utc();return M};var x=f.format;f.format=function(y){var b=y||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return x.call(this,b)},f.valueOf=function(){var y=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*y},f.isUTC=function(){return!!this.$u},f.toISOString=function(){return this.toDate().toISOString()},f.toString=function(){return this.toDate().toUTCString()};var g=f.toDate;f.toDate=function(y){return y==="s"&&this.$offset?u(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():g.call(this)};var v=f.diff;f.diff=function(y,b,C){if(y&&this.$u===y.$u)return v.call(this,y,b,C);var T=this.local(),M=u(y).local();return v.call(T,M,b,C)}}})},{}],394:[function(s,n,c){c.utils=s("./des/utils"),c.Cipher=s("./des/cipher"),c.DES=s("./des/des"),c.CBC=s("./des/cbc"),c.EDE=s("./des/ede")},{"./des/cbc":395,"./des/cipher":396,"./des/des":397,"./des/ede":398,"./des/utils":399}],395:[function(s,n,c){var o=s("minimalistic-assert"),a=s("inherits"),d={};function l(i){o.equal(i.length,8,"Invalid IV length"),this.iv=new Array(8);for(var u=0;u<this.iv.length;u++)this.iv[u]=i[u]}c.instantiate=function(i){function u(p){i.call(this,p),this._cbcInit()}a(u,i);for(var f=Object.keys(d),h=0;h<f.length;h++){var m=f[h];u.prototype[m]=d[m]}return u.create=function(p){return new u(p)},u},d._cbcInit=function(){var i=new l(this.options.iv);this._cbcState=i},d._update=function(i,u,f,h){var m=this._cbcState,p=this.constructor.super_.prototype,x=m.iv;if(this.type==="encrypt"){for(var g=0;g<this.blockSize;g++)x[g]^=i[u+g];for(p._update.call(this,x,0,f,h),g=0;g<this.blockSize;g++)x[g]=f[h+g]}else{for(p._update.call(this,i,u,f,h),g=0;g<this.blockSize;g++)f[h+g]^=x[g];for(g=0;g<this.blockSize;g++)x[g]=i[u+g]}}},{inherits:440,"minimalistic-assert":453}],396:[function(s,n,c){var o=s("minimalistic-assert");function a(d){this.options=d,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=d.padding!==!1}n.exports=a,a.prototype._init=function(){},a.prototype.update=function(d){return d.length===0?[]:this.type==="decrypt"?this._updateDecrypt(d):this._updateEncrypt(d)},a.prototype._buffer=function(d,l){for(var i=Math.min(this.buffer.length-this.bufferOff,d.length-l),u=0;u<i;u++)this.buffer[this.bufferOff+u]=d[l+u];return this.bufferOff+=i,i},a.prototype._flushBuffer=function(d,l){return this._update(this.buffer,0,d,l),this.bufferOff=0,this.blockSize},a.prototype._updateEncrypt=function(d){var l=0,i=0,u=(this.bufferOff+d.length)/this.blockSize|0,f=new Array(u*this.blockSize);this.bufferOff!==0&&(l+=this._buffer(d,l),this.bufferOff===this.buffer.length&&(i+=this._flushBuffer(f,i)));for(var h=d.length-(d.length-l)%this.blockSize;l<h;l+=this.blockSize)this._update(d,l,f,i),i+=this.blockSize;for(;l<d.length;l++,this.bufferOff++)this.buffer[this.bufferOff]=d[l];return f},a.prototype._updateDecrypt=function(d){for(var l=0,i=0,u=Math.ceil((this.bufferOff+d.length)/this.blockSize)-1,f=new Array(u*this.blockSize);u>0;u--)l+=this._buffer(d,l),i+=this._flushBuffer(f,i);return l+=this._buffer(d,l),f},a.prototype.final=function(d){var l,i;return d&&(l=this.update(d)),i=this.type==="encrypt"?this._finalEncrypt():this._finalDecrypt(),l?l.concat(i):i},a.prototype._pad=function(d,l){if(l===0)return!1;for(;l<d.length;)d[l++]=0;return!0},a.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var d=new Array(this.blockSize);return this._update(this.buffer,0,d,0),d},a.prototype._unpad=function(d){return d},a.prototype._finalDecrypt=function(){o.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var d=new Array(this.blockSize);return this._flushBuffer(d,0),this._unpad(d)}},{"minimalistic-assert":453}],397:[function(s,n,c){var o=s("minimalistic-assert"),a=s("inherits"),d=s("./utils"),l=s("./cipher");function i(){this.tmp=new Array(2),this.keys=null}function u(h){l.call(this,h);var m=new i;this._desState=m,this.deriveKeys(m,h.key)}a(u,l),n.exports=u,u.create=function(h){return new u(h)};var f=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];u.prototype.deriveKeys=function(h,m){h.keys=new Array(32),o.equal(m.length,this.blockSize,"Invalid key length");var p=d.readUInt32BE(m,0),x=d.readUInt32BE(m,4);d.pc1(p,x,h.tmp,0),p=h.tmp[0],x=h.tmp[1];for(var g=0;g<h.keys.length;g+=2){var v=f[g>>>1];p=d.r28shl(p,v),x=d.r28shl(x,v),d.pc2(p,x,h.keys,g)}},u.prototype._update=function(h,m,p,x){var g=this._desState,v=d.readUInt32BE(h,m),y=d.readUInt32BE(h,m+4);d.ip(v,y,g.tmp,0),v=g.tmp[0],y=g.tmp[1],this.type==="encrypt"?this._encrypt(g,v,y,g.tmp,0):this._decrypt(g,v,y,g.tmp,0),v=g.tmp[0],y=g.tmp[1],d.writeUInt32BE(p,v,x),d.writeUInt32BE(p,y,x+4)},u.prototype._pad=function(h,m){if(this.padding===!1)return!1;for(var p=h.length-m,x=m;x<h.length;x++)h[x]=p;return!0},u.prototype._unpad=function(h){if(this.padding===!1)return h;for(var m=h[h.length-1],p=h.length-m;p<h.length;p++)o.equal(h[p],m);return h.slice(0,h.length-m)},u.prototype._encrypt=function(h,m,p,x,g){for(var v=m,y=p,b=0;b<h.keys.length;b+=2){var C=h.keys[b],T=h.keys[b+1];d.expand(y,h.tmp,0),C^=h.tmp[0],T^=h.tmp[1];var M=d.substitute(C,T),U=y;y=(v^d.permute(M))>>>0,v=U}d.rip(y,v,x,g)},u.prototype._decrypt=function(h,m,p,x,g){for(var v=p,y=m,b=h.keys.length-2;b>=0;b-=2){var C=h.keys[b],T=h.keys[b+1];d.expand(v,h.tmp,0),C^=h.tmp[0],T^=h.tmp[1];var M=d.substitute(C,T),U=v;v=(y^d.permute(M))>>>0,y=U}d.rip(v,y,x,g)}},{"./cipher":396,"./utils":399,inherits:440,"minimalistic-assert":453}],398:[function(s,n,c){var o=s("minimalistic-assert"),a=s("inherits"),d=s("./cipher"),l=s("./des");function i(f,h){o.equal(h.length,24,"Invalid key length");var m=h.slice(0,8),p=h.slice(8,16),x=h.slice(16,24);this.ciphers=f==="encrypt"?[l.create({type:"encrypt",key:m}),l.create({type:"decrypt",key:p}),l.create({type:"encrypt",key:x})]:[l.create({type:"decrypt",key:x}),l.create({type:"encrypt",key:p}),l.create({type:"decrypt",key:m})]}function u(f){d.call(this,f);var h=new i(this.type,this.options.key);this._edeState=h}a(u,d),n.exports=u,u.create=function(f){return new u(f)},u.prototype._update=function(f,h,m,p){var x=this._edeState;x.ciphers[0]._update(f,h,m,p),x.ciphers[1]._update(m,p,m,p),x.ciphers[2]._update(m,p,m,p)},u.prototype._pad=l.prototype._pad,u.prototype._unpad=l.prototype._unpad},{"./cipher":396,"./des":397,inherits:440,"minimalistic-assert":453}],399:[function(s,n,c){c.readUInt32BE=function(l,i){return(l[0+i]<<24|l[1+i]<<16|l[2+i]<<8|l[3+i])>>>0},c.writeUInt32BE=function(l,i,u){l[0+u]=i>>>24,l[1+u]=i>>>16&255,l[2+u]=i>>>8&255,l[3+u]=255&i},c.ip=function(l,i,u,f){for(var h=0,m=0,p=6;p>=0;p-=2){for(var x=0;x<=24;x+=8)h<<=1,h|=i>>>x+p&1;for(x=0;x<=24;x+=8)h<<=1,h|=l>>>x+p&1}for(p=6;p>=0;p-=2){for(x=1;x<=25;x+=8)m<<=1,m|=i>>>x+p&1;for(x=1;x<=25;x+=8)m<<=1,m|=l>>>x+p&1}u[f+0]=h>>>0,u[f+1]=m>>>0},c.rip=function(l,i,u,f){for(var h=0,m=0,p=0;p<4;p++)for(var x=24;x>=0;x-=8)h<<=1,h|=i>>>x+p&1,h<<=1,h|=l>>>x+p&1;for(p=4;p<8;p++)for(x=24;x>=0;x-=8)m<<=1,m|=i>>>x+p&1,m<<=1,m|=l>>>x+p&1;u[f+0]=h>>>0,u[f+1]=m>>>0},c.pc1=function(l,i,u,f){for(var h=0,m=0,p=7;p>=5;p--){for(var x=0;x<=24;x+=8)h<<=1,h|=i>>x+p&1;for(x=0;x<=24;x+=8)h<<=1,h|=l>>x+p&1}for(x=0;x<=24;x+=8)h<<=1,h|=i>>x+p&1;for(p=1;p<=3;p++){for(x=0;x<=24;x+=8)m<<=1,m|=i>>x+p&1;for(x=0;x<=24;x+=8)m<<=1,m|=l>>x+p&1}for(x=0;x<=24;x+=8)m<<=1,m|=l>>x+p&1;u[f+0]=h>>>0,u[f+1]=m>>>0},c.r28shl=function(l,i){return l<<i&268435455|l>>>28-i};var o=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];c.pc2=function(l,i,u,f){for(var h=0,m=0,p=o.length>>>1,x=0;x<p;x++)h<<=1,h|=l>>>o[x]&1;for(x=p;x<o.length;x++)m<<=1,m|=i>>>o[x]&1;u[f+0]=h>>>0,u[f+1]=m>>>0},c.expand=function(l,i,u){var f=0,h=0;f=(1&l)<<5|l>>>27;for(var m=23;m>=15;m-=4)f<<=6,f|=l>>>m&63;for(m=11;m>=3;m-=4)h|=l>>>m&63,h<<=6;h|=(31&l)<<1|l>>>31,i[u+0]=f>>>0,i[u+1]=h>>>0};var a=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];c.substitute=function(l,i){for(var u=0,f=0;f<4;f++)u<<=4,u|=a[64*f+(l>>>18-6*f&63)];for(f=0;f<4;f++)u<<=4,u|=a[256+64*f+(i>>>18-6*f&63)];return u>>>0};var d=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];c.permute=function(l){for(var i=0,u=0;u<d.length;u++)i<<=1,i|=l>>>d[u]&1;return i>>>0},c.padSplit=function(l,i,u){for(var f=l.toString(2);f.length<i;)f="0"+f;for(var h=[],m=0;m<i;m+=u)h.push(f.slice(m,m+u));return h.join(" ")}},{}],400:[function(s,n,c){(function(o){(function(){var a=s("./lib/generatePrime"),d=s("./lib/primes.json"),l=s("./lib/dh"),i={binary:!0,hex:!0,base64:!0};c.DiffieHellmanGroup=c.createDiffieHellmanGroup=c.getDiffieHellman=function(u){var f=new o(d[u].prime,"hex"),h=new o(d[u].gen,"hex");return new l(f,h)},c.createDiffieHellman=c.DiffieHellman=function u(f,h,m,p){return o.isBuffer(h)||i[h]===void 0?u(f,"binary",h,m):(h=h||"binary",p=p||"binary",m=m||new o([2]),o.isBuffer(m)||(m=new o(m,p)),typeof f=="number"?new l(a(f,m),m,!0):(o.isBuffer(f)||(f=new o(f,h)),new l(f,m,!0)))}}).call(this)}).call(this,s("buffer").Buffer)},{"./lib/dh":401,"./lib/generatePrime":402,"./lib/primes.json":403,buffer:220}],401:[function(s,n,c){(function(o){(function(){var a=s("bn.js"),d=new(s("miller-rabin")),l=new a(24),i=new a(11),u=new a(10),f=new a(3),h=new a(7),m=s("./generatePrime"),p=s("randombytes");function x(C,T){return T=T||"utf8",o.isBuffer(C)||(C=new o(C,T)),this._pub=new a(C),this}function g(C,T){return T=T||"utf8",o.isBuffer(C)||(C=new o(C,T)),this._priv=new a(C),this}n.exports=y;var v={};function y(C,T,M){this.setGenerator(T),this.__prime=new a(C),this._prime=a.mont(this.__prime),this._primeLen=C.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,M?(this.setPublicKey=x,this.setPrivateKey=g):this._primeCode=8}function b(C,T){var M=new o(C.toArray());return T?M.toString(T):M}Object.defineProperty(y.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=function(C,T){var M=T.toString("hex"),U=[M,C.toString(16)].join("_");if(U in v)return v[U];var L,P=0;if(C.isEven()||!m.simpleSieve||!m.fermatTest(C)||!d.test(C))return P+=1,P+=M==="02"||M==="05"?8:4,v[U]=P,P;switch(d.test(C.shrn(1))||(P+=2),M){case"02":C.mod(l).cmp(i)&&(P+=8);break;case"05":(L=C.mod(u)).cmp(f)&&L.cmp(h)&&(P+=8);break;default:P+=4}return v[U]=P,P}(this.__prime,this.__gen)),this._primeCode}}),y.prototype.generateKeys=function(){return this._priv||(this._priv=new a(p(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},y.prototype.computeSecret=function(C){var T=(C=(C=new a(C)).toRed(this._prime)).redPow(this._priv).fromRed(),M=new o(T.toArray()),U=this.getPrime();if(M.length<U.length){var L=new o(U.length-M.length);L.fill(0),M=o.concat([L,M])}return M},y.prototype.getPublicKey=function(C){return b(this._pub,C)},y.prototype.getPrivateKey=function(C){return b(this._priv,C)},y.prototype.getPrime=function(C){return b(this.__prime,C)},y.prototype.getGenerator=function(C){return b(this._gen,C)},y.prototype.setGenerator=function(C,T){return T=T||"utf8",o.isBuffer(C)||(C=new o(C,T)),this.__gen=C,this._gen=new a(C),this}}).call(this)}).call(this,s("buffer").Buffer)},{"./generatePrime":402,"bn.js":404,buffer:220,"miller-rabin":451,randombytes:475}],402:[function(s,n,c){var o=s("randombytes");n.exports=C,C.simpleSieve=y,C.fermatTest=b;var a=s("bn.js"),d=new a(24),l=new(s("miller-rabin")),i=new a(1),u=new a(2),f=new a(5),h=(new a(16),new a(8),new a(10)),m=new a(3),p=(new a(7),new a(11)),x=new a(4),g=(new a(12),null);function v(){if(g!==null)return g;var T=[];T[0]=2;for(var M=1,U=3;U<1048576;U+=2){for(var L=Math.ceil(Math.sqrt(U)),P=0;P<M&&T[P]<=L&&U%T[P]!=0;P++);M!==P&&T[P]<=L||(T[M++]=U)}return g=T,T}function y(T){for(var M=v(),U=0;U<M.length;U++)if(T.modn(M[U])===0)return T.cmpn(M[U])===0;return!0}function b(T){var M=a.mont(T);return u.toRed(M).redPow(T.subn(1)).fromRed().cmpn(1)===0}function C(T,M){if(T<16)return new a(M===2||M===5?[140,123]:[140,39]);var U,L;for(M=new a(M);;){for(U=new a(o(Math.ceil(T/8)));U.bitLength()>T;)U.ishrn(1);if(U.isEven()&&U.iadd(i),U.testn(1)||U.iadd(u),M.cmp(u)){if(!M.cmp(f))for(;U.mod(h).cmp(m);)U.iadd(x)}else for(;U.mod(d).cmp(p);)U.iadd(x);if(y(L=U.shrn(1))&&y(U)&&b(L)&&b(U)&&l.test(L)&&l.test(U))return U}}},{"bn.js":404,"miller-rabin":451,randombytes:475}],403:[function(s,n,c){n.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},{}],404:[function(s,n,c){arguments[4][184][0].apply(c,arguments)},{buffer:188,dup:184}],405:[function(s,n,c){var o=c;o.version=s("../package.json").version,o.utils=s("./elliptic/utils"),o.rand=s("brorand"),o.curve=s("./elliptic/curve"),o.curves=s("./elliptic/curves"),o.ec=s("./elliptic/ec"),o.eddsa=s("./elliptic/eddsa")},{"../package.json":421,"./elliptic/curve":408,"./elliptic/curves":411,"./elliptic/ec":412,"./elliptic/eddsa":415,"./elliptic/utils":419,brorand:187}],406:[function(s,n,c){var o=s("bn.js"),a=s("../utils"),d=a.getNAF,l=a.getJSF,i=a.assert;function u(h,m){this.type=h,this.p=new o(m.p,16),this.red=m.prime?o.red(m.prime):o.mont(this.p),this.zero=new o(0).toRed(this.red),this.one=new o(1).toRed(this.red),this.two=new o(2).toRed(this.red),this.n=m.n&&new o(m.n,16),this.g=m.g&&this.pointFromJSON(m.g,m.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var p=this.n&&this.p.div(this.n);!p||p.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function f(h,m){this.curve=h,this.type=m,this.precomputed=null}n.exports=u,u.prototype.point=function(){throw new Error("Not implemented")},u.prototype.validate=function(){throw new Error("Not implemented")},u.prototype._fixedNafMul=function(h,m){i(h.precomputed);var p=h._getDoubles(),x=d(m,1,this._bitLength),g=(1<<p.step+1)-(p.step%2==0?2:1);g/=3;var v,y,b=[];for(v=0;v<x.length;v+=p.step){y=0;for(var C=v+p.step-1;C>=v;C--)y=(y<<1)+x[C];b.push(y)}for(var T=this.jpoint(null,null,null),M=this.jpoint(null,null,null),U=g;U>0;U--){for(v=0;v<b.length;v++)(y=b[v])===U?M=M.mixedAdd(p.points[v]):y===-U&&(M=M.mixedAdd(p.points[v].neg()));T=T.add(M)}return T.toP()},u.prototype._wnafMul=function(h,m){var p=4,x=h._getNAFPoints(p);p=x.wnd;for(var g=x.points,v=d(m,p,this._bitLength),y=this.jpoint(null,null,null),b=v.length-1;b>=0;b--){for(var C=0;b>=0&&v[b]===0;b--)C++;if(b>=0&&C++,y=y.dblp(C),b<0)break;var T=v[b];i(T!==0),y=h.type==="affine"?T>0?y.mixedAdd(g[T-1>>1]):y.mixedAdd(g[-T-1>>1].neg()):T>0?y.add(g[T-1>>1]):y.add(g[-T-1>>1].neg())}return h.type==="affine"?y.toP():y},u.prototype._wnafMulAdd=function(h,m,p,x,g){var v,y,b,C=this._wnafT1,T=this._wnafT2,M=this._wnafT3,U=0;for(v=0;v<x;v++){var L=(b=m[v])._getNAFPoints(h);C[v]=L.wnd,T[v]=L.points}for(v=x-1;v>=1;v-=2){var P=v-1,B=v;if(C[P]===1&&C[B]===1){var q=[m[P],null,null,m[B]];m[P].y.cmp(m[B].y)===0?(q[1]=m[P].add(m[B]),q[2]=m[P].toJ().mixedAdd(m[B].neg())):m[P].y.cmp(m[B].y.redNeg())===0?(q[1]=m[P].toJ().mixedAdd(m[B]),q[2]=m[P].add(m[B].neg())):(q[1]=m[P].toJ().mixedAdd(m[B]),q[2]=m[P].toJ().mixedAdd(m[B].neg()));var z=[-3,-1,-5,-7,0,7,5,1,3],k=l(p[P],p[B]);for(U=Math.max(k[0].length,U),M[P]=new Array(U),M[B]=new Array(U),y=0;y<U;y++){var R=0|k[0][y],S=0|k[1][y];M[P][y]=z[3*(R+1)+(S+1)],M[B][y]=0,T[P]=q}}else M[P]=d(p[P],C[P],this._bitLength),M[B]=d(p[B],C[B],this._bitLength),U=Math.max(M[P].length,U),U=Math.max(M[B].length,U)}var w=this.jpoint(null,null,null),_=this._wnafT4;for(v=U;v>=0;v--){for(var j=0;v>=0;){var N=!0;for(y=0;y<x;y++)_[y]=0|M[y][v],_[y]!==0&&(N=!1);if(!N)break;j++,v--}if(v>=0&&j++,w=w.dblp(j),v<0)break;for(y=0;y<x;y++){var E=_[y];E!==0&&(E>0?b=T[y][E-1>>1]:E<0&&(b=T[y][-E-1>>1].neg()),w=b.type==="affine"?w.mixedAdd(b):w.add(b))}}for(v=0;v<x;v++)T[v]=null;return g?w:w.toP()},u.BasePoint=f,f.prototype.eq=function(){throw new Error("Not implemented")},f.prototype.validate=function(){return this.curve.validate(this)},u.prototype.decodePoint=function(h,m){h=a.toArray(h,m);var p=this.p.byteLength();if((h[0]===4||h[0]===6||h[0]===7)&&h.length-1==2*p)return h[0]===6?i(h[h.length-1]%2==0):h[0]===7&&i(h[h.length-1]%2==1),this.point(h.slice(1,1+p),h.slice(1+p,1+2*p));if((h[0]===2||h[0]===3)&&h.length-1===p)return this.pointFromX(h.slice(1,1+p),h[0]===3);throw new Error("Unknown point format")},f.prototype.encodeCompressed=function(h){return this.encode(h,!0)},f.prototype._encode=function(h){var m=this.curve.p.byteLength(),p=this.getX().toArray("be",m);return h?[this.getY().isEven()?2:3].concat(p):[4].concat(p,this.getY().toArray("be",m))},f.prototype.encode=function(h,m){return a.encode(this._encode(m),h)},f.prototype.precompute=function(h){if(this.precomputed)return this;var m={doubles:null,naf:null,beta:null};return m.naf=this._getNAFPoints(8),m.doubles=this._getDoubles(4,h),m.beta=this._getBeta(),this.precomputed=m,this},f.prototype._hasDoubles=function(h){if(!this.precomputed)return!1;var m=this.precomputed.doubles;return!!m&&m.points.length>=Math.ceil((h.bitLength()+1)/m.step)},f.prototype._getDoubles=function(h,m){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var p=[this],x=this,g=0;g<m;g+=h){for(var v=0;v<h;v++)x=x.dbl();p.push(x)}return{step:h,points:p}},f.prototype._getNAFPoints=function(h){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var m=[this],p=(1<<h)-1,x=p===1?null:this.dbl(),g=1;g<p;g++)m[g]=m[g-1].add(x);return{wnd:h,points:m}},f.prototype._getBeta=function(){return null},f.prototype.dblp=function(h){for(var m=this,p=0;p<h;p++)m=m.dbl();return m}},{"../utils":419,"bn.js":420}],407:[function(s,n,c){var o=s("../utils"),a=s("bn.js"),d=s("inherits"),l=s("./base"),i=o.assert;function u(h){this.twisted=(0|h.a)!=1,this.mOneA=this.twisted&&(0|h.a)==-1,this.extended=this.mOneA,l.call(this,"edwards",h),this.a=new a(h.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new a(h.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new a(h.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),i(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(0|h.c)==1}function f(h,m,p,x,g){l.BasePoint.call(this,h,"projective"),m===null&&p===null&&x===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new a(m,16),this.y=new a(p,16),this.z=x?new a(x,16):this.curve.one,this.t=g&&new a(g,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}d(u,l),n.exports=u,u.prototype._mulA=function(h){return this.mOneA?h.redNeg():this.a.redMul(h)},u.prototype._mulC=function(h){return this.oneC?h:this.c.redMul(h)},u.prototype.jpoint=function(h,m,p,x){return this.point(h,m,p,x)},u.prototype.pointFromX=function(h,m){(h=new a(h,16)).red||(h=h.toRed(this.red));var p=h.redSqr(),x=this.c2.redSub(this.a.redMul(p)),g=this.one.redSub(this.c2.redMul(this.d).redMul(p)),v=x.redMul(g.redInvm()),y=v.redSqrt();if(y.redSqr().redSub(v).cmp(this.zero)!==0)throw new Error("invalid point");var b=y.fromRed().isOdd();return(m&&!b||!m&&b)&&(y=y.redNeg()),this.point(h,y)},u.prototype.pointFromY=function(h,m){(h=new a(h,16)).red||(h=h.toRed(this.red));var p=h.redSqr(),x=p.redSub(this.c2),g=p.redMul(this.d).redMul(this.c2).redSub(this.a),v=x.redMul(g.redInvm());if(v.cmp(this.zero)===0){if(m)throw new Error("invalid point");return this.point(this.zero,h)}var y=v.redSqrt();if(y.redSqr().redSub(v).cmp(this.zero)!==0)throw new Error("invalid point");return y.fromRed().isOdd()!==m&&(y=y.redNeg()),this.point(y,h)},u.prototype.validate=function(h){if(h.isInfinity())return!0;h.normalize();var m=h.x.redSqr(),p=h.y.redSqr(),x=m.redMul(this.a).redAdd(p),g=this.c2.redMul(this.one.redAdd(this.d.redMul(m).redMul(p)));return x.cmp(g)===0},d(f,l.BasePoint),u.prototype.pointFromJSON=function(h){return f.fromJSON(this,h)},u.prototype.point=function(h,m,p,x){return new f(this,h,m,p,x)},f.fromJSON=function(h,m){return new f(h,m[0],m[1],m[2])},f.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},f.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},f.prototype._extDbl=function(){var h=this.x.redSqr(),m=this.y.redSqr(),p=this.z.redSqr();p=p.redIAdd(p);var x=this.curve._mulA(h),g=this.x.redAdd(this.y).redSqr().redISub(h).redISub(m),v=x.redAdd(m),y=v.redSub(p),b=x.redSub(m),C=g.redMul(y),T=v.redMul(b),M=g.redMul(b),U=y.redMul(v);return this.curve.point(C,T,U,M)},f.prototype._projDbl=function(){var h,m,p,x,g,v,y=this.x.redAdd(this.y).redSqr(),b=this.x.redSqr(),C=this.y.redSqr();if(this.curve.twisted){var T=(x=this.curve._mulA(b)).redAdd(C);this.zOne?(h=y.redSub(b).redSub(C).redMul(T.redSub(this.curve.two)),m=T.redMul(x.redSub(C)),p=T.redSqr().redSub(T).redSub(T)):(g=this.z.redSqr(),v=T.redSub(g).redISub(g),h=y.redSub(b).redISub(C).redMul(v),m=T.redMul(x.redSub(C)),p=T.redMul(v))}else x=b.redAdd(C),g=this.curve._mulC(this.z).redSqr(),v=x.redSub(g).redSub(g),h=this.curve._mulC(y.redISub(x)).redMul(v),m=this.curve._mulC(x).redMul(b.redISub(C)),p=x.redMul(v);return this.curve.point(h,m,p)},f.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},f.prototype._extAdd=function(h){var m=this.y.redSub(this.x).redMul(h.y.redSub(h.x)),p=this.y.redAdd(this.x).redMul(h.y.redAdd(h.x)),x=this.t.redMul(this.curve.dd).redMul(h.t),g=this.z.redMul(h.z.redAdd(h.z)),v=p.redSub(m),y=g.redSub(x),b=g.redAdd(x),C=p.redAdd(m),T=v.redMul(y),M=b.redMul(C),U=v.redMul(C),L=y.redMul(b);return this.curve.point(T,M,L,U)},f.prototype._projAdd=function(h){var m,p,x=this.z.redMul(h.z),g=x.redSqr(),v=this.x.redMul(h.x),y=this.y.redMul(h.y),b=this.curve.d.redMul(v).redMul(y),C=g.redSub(b),T=g.redAdd(b),M=this.x.redAdd(this.y).redMul(h.x.redAdd(h.y)).redISub(v).redISub(y),U=x.redMul(C).redMul(M);return this.curve.twisted?(m=x.redMul(T).redMul(y.redSub(this.curve._mulA(v))),p=C.redMul(T)):(m=x.redMul(T).redMul(y.redSub(v)),p=this.curve._mulC(C).redMul(T)),this.curve.point(U,m,p)},f.prototype.add=function(h){return this.isInfinity()?h:h.isInfinity()?this:this.curve.extended?this._extAdd(h):this._projAdd(h)},f.prototype.mul=function(h){return this._hasDoubles(h)?this.curve._fixedNafMul(this,h):this.curve._wnafMul(this,h)},f.prototype.mulAdd=function(h,m,p){return this.curve._wnafMulAdd(1,[this,m],[h,p],2,!1)},f.prototype.jmulAdd=function(h,m,p){return this.curve._wnafMulAdd(1,[this,m],[h,p],2,!0)},f.prototype.normalize=function(){if(this.zOne)return this;var h=this.z.redInvm();return this.x=this.x.redMul(h),this.y=this.y.redMul(h),this.t&&(this.t=this.t.redMul(h)),this.z=this.curve.one,this.zOne=!0,this},f.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},f.prototype.getX=function(){return this.normalize(),this.x.fromRed()},f.prototype.getY=function(){return this.normalize(),this.y.fromRed()},f.prototype.eq=function(h){return this===h||this.getX().cmp(h.getX())===0&&this.getY().cmp(h.getY())===0},f.prototype.eqXToP=function(h){var m=h.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(m)===0)return!0;for(var p=h.clone(),x=this.curve.redN.redMul(this.z);;){if(p.iadd(this.curve.n),p.cmp(this.curve.p)>=0)return!1;if(m.redIAdd(x),this.x.cmp(m)===0)return!0}},f.prototype.toP=f.prototype.normalize,f.prototype.mixedAdd=f.prototype.add},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],408:[function(s,n,c){var o=c;o.base=s("./base"),o.short=s("./short"),o.mont=s("./mont"),o.edwards=s("./edwards")},{"./base":406,"./edwards":407,"./mont":409,"./short":410}],409:[function(s,n,c){var o=s("bn.js"),a=s("inherits"),d=s("./base"),l=s("../utils");function i(f){d.call(this,"mont",f),this.a=new o(f.a,16).toRed(this.red),this.b=new o(f.b,16).toRed(this.red),this.i4=new o(4).toRed(this.red).redInvm(),this.two=new o(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function u(f,h,m){d.BasePoint.call(this,f,"projective"),h===null&&m===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new o(h,16),this.z=new o(m,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}a(i,d),n.exports=i,i.prototype.validate=function(f){var h=f.normalize().x,m=h.redSqr(),p=m.redMul(h).redAdd(m.redMul(this.a)).redAdd(h);return p.redSqrt().redSqr().cmp(p)===0},a(u,d.BasePoint),i.prototype.decodePoint=function(f,h){return this.point(l.toArray(f,h),1)},i.prototype.point=function(f,h){return new u(this,f,h)},i.prototype.pointFromJSON=function(f){return u.fromJSON(this,f)},u.prototype.precompute=function(){},u.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},u.fromJSON=function(f,h){return new u(f,h[0],h[1]||f.one)},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return this.z.cmpn(0)===0},u.prototype.dbl=function(){var f=this.x.redAdd(this.z).redSqr(),h=this.x.redSub(this.z).redSqr(),m=f.redSub(h),p=f.redMul(h),x=m.redMul(h.redAdd(this.curve.a24.redMul(m)));return this.curve.point(p,x)},u.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.diffAdd=function(f,h){var m=this.x.redAdd(this.z),p=this.x.redSub(this.z),x=f.x.redAdd(f.z),g=f.x.redSub(f.z).redMul(m),v=x.redMul(p),y=h.z.redMul(g.redAdd(v).redSqr()),b=h.x.redMul(g.redISub(v).redSqr());return this.curve.point(y,b)},u.prototype.mul=function(f){for(var h=f.clone(),m=this,p=this.curve.point(null,null),x=[];h.cmpn(0)!==0;h.iushrn(1))x.push(h.andln(1));for(var g=x.length-1;g>=0;g--)x[g]===0?(m=m.diffAdd(p,this),p=p.dbl()):(p=m.diffAdd(p,this),m=m.dbl());return p},u.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.eq=function(f){return this.getX().cmp(f.getX())===0},u.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},u.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],410:[function(s,n,c){var o=s("../utils"),a=s("bn.js"),d=s("inherits"),l=s("./base"),i=o.assert;function u(m){l.call(this,"short",m),this.a=new a(m.a,16).toRed(this.red),this.b=new a(m.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(m),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function f(m,p,x,g){l.BasePoint.call(this,m,"affine"),p===null&&x===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new a(p,16),this.y=new a(x,16),g&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function h(m,p,x,g){l.BasePoint.call(this,m,"jacobian"),p===null&&x===null&&g===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new a(0)):(this.x=new a(p,16),this.y=new a(x,16),this.z=new a(g,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}d(u,l),n.exports=u,u.prototype._getEndomorphism=function(m){if(this.zeroA&&this.g&&this.n&&this.p.modn(3)===1){var p,x;if(m.beta)p=new a(m.beta,16).toRed(this.red);else{var g=this._getEndoRoots(this.p);p=(p=g[0].cmp(g[1])<0?g[0]:g[1]).toRed(this.red)}if(m.lambda)x=new a(m.lambda,16);else{var v=this._getEndoRoots(this.n);this.g.mul(v[0]).x.cmp(this.g.x.redMul(p))===0?x=v[0]:(x=v[1],i(this.g.mul(x).x.cmp(this.g.x.redMul(p))===0))}return{beta:p,lambda:x,basis:m.basis?m.basis.map(function(y){return{a:new a(y.a,16),b:new a(y.b,16)}}):this._getEndoBasis(x)}}},u.prototype._getEndoRoots=function(m){var p=m===this.p?this.red:a.mont(m),x=new a(2).toRed(p).redInvm(),g=x.redNeg(),v=new a(3).toRed(p).redNeg().redSqrt().redMul(x);return[g.redAdd(v).fromRed(),g.redSub(v).fromRed()]},u.prototype._getEndoBasis=function(m){for(var p,x,g,v,y,b,C,T,M,U=this.n.ushrn(Math.floor(this.n.bitLength()/2)),L=m,P=this.n.clone(),B=new a(1),q=new a(0),z=new a(0),k=new a(1),R=0;L.cmpn(0)!==0;){var S=P.div(L);T=P.sub(S.mul(L)),M=z.sub(S.mul(B));var w=k.sub(S.mul(q));if(!g&&T.cmp(U)<0)p=C.neg(),x=B,g=T.neg(),v=M;else if(g&&++R==2)break;C=T,P=L,L=T,z=B,B=M,k=q,q=w}y=T.neg(),b=M;var _=g.sqr().add(v.sqr());return y.sqr().add(b.sqr()).cmp(_)>=0&&(y=p,b=x),g.negative&&(g=g.neg(),v=v.neg()),y.negative&&(y=y.neg(),b=b.neg()),[{a:g,b:v},{a:y,b}]},u.prototype._endoSplit=function(m){var p=this.endo.basis,x=p[0],g=p[1],v=g.b.mul(m).divRound(this.n),y=x.b.neg().mul(m).divRound(this.n),b=v.mul(x.a),C=y.mul(g.a),T=v.mul(x.b),M=y.mul(g.b);return{k1:m.sub(b).sub(C),k2:T.add(M).neg()}},u.prototype.pointFromX=function(m,p){(m=new a(m,16)).red||(m=m.toRed(this.red));var x=m.redSqr().redMul(m).redIAdd(m.redMul(this.a)).redIAdd(this.b),g=x.redSqrt();if(g.redSqr().redSub(x).cmp(this.zero)!==0)throw new Error("invalid point");var v=g.fromRed().isOdd();return(p&&!v||!p&&v)&&(g=g.redNeg()),this.point(m,g)},u.prototype.validate=function(m){if(m.inf)return!0;var p=m.x,x=m.y,g=this.a.redMul(p),v=p.redSqr().redMul(p).redIAdd(g).redIAdd(this.b);return x.redSqr().redISub(v).cmpn(0)===0},u.prototype._endoWnafMulAdd=function(m,p,x){for(var g=this._endoWnafT1,v=this._endoWnafT2,y=0;y<m.length;y++){var b=this._endoSplit(p[y]),C=m[y],T=C._getBeta();b.k1.negative&&(b.k1.ineg(),C=C.neg(!0)),b.k2.negative&&(b.k2.ineg(),T=T.neg(!0)),g[2*y]=C,g[2*y+1]=T,v[2*y]=b.k1,v[2*y+1]=b.k2}for(var M=this._wnafMulAdd(1,g,v,2*y,x),U=0;U<2*y;U++)g[U]=null,v[U]=null;return M},d(f,l.BasePoint),u.prototype.point=function(m,p,x){return new f(this,m,p,x)},u.prototype.pointFromJSON=function(m,p){return f.fromJSON(this,m,p)},f.prototype._getBeta=function(){if(this.curve.endo){var m=this.precomputed;if(m&&m.beta)return m.beta;var p=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(m){var x=this.curve,g=function(v){return x.point(v.x.redMul(x.endo.beta),v.y)};m.beta=p,p.precomputed={beta:null,naf:m.naf&&{wnd:m.naf.wnd,points:m.naf.points.map(g)},doubles:m.doubles&&{step:m.doubles.step,points:m.doubles.points.map(g)}}}return p}},f.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},f.fromJSON=function(m,p,x){typeof p=="string"&&(p=JSON.parse(p));var g=m.point(p[0],p[1],x);if(!p[2])return g;function v(b){return m.point(b[0],b[1],x)}var y=p[2];return g.precomputed={beta:null,doubles:y.doubles&&{step:y.doubles.step,points:[g].concat(y.doubles.points.map(v))},naf:y.naf&&{wnd:y.naf.wnd,points:[g].concat(y.naf.points.map(v))}},g},f.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},f.prototype.isInfinity=function(){return this.inf},f.prototype.add=function(m){if(this.inf)return m;if(m.inf)return this;if(this.eq(m))return this.dbl();if(this.neg().eq(m))return this.curve.point(null,null);if(this.x.cmp(m.x)===0)return this.curve.point(null,null);var p=this.y.redSub(m.y);p.cmpn(0)!==0&&(p=p.redMul(this.x.redSub(m.x).redInvm()));var x=p.redSqr().redISub(this.x).redISub(m.x),g=p.redMul(this.x.redSub(x)).redISub(this.y);return this.curve.point(x,g)},f.prototype.dbl=function(){if(this.inf)return this;var m=this.y.redAdd(this.y);if(m.cmpn(0)===0)return this.curve.point(null,null);var p=this.curve.a,x=this.x.redSqr(),g=m.redInvm(),v=x.redAdd(x).redIAdd(x).redIAdd(p).redMul(g),y=v.redSqr().redISub(this.x.redAdd(this.x)),b=v.redMul(this.x.redSub(y)).redISub(this.y);return this.curve.point(y,b)},f.prototype.getX=function(){return this.x.fromRed()},f.prototype.getY=function(){return this.y.fromRed()},f.prototype.mul=function(m){return m=new a(m,16),this.isInfinity()?this:this._hasDoubles(m)?this.curve._fixedNafMul(this,m):this.curve.endo?this.curve._endoWnafMulAdd([this],[m]):this.curve._wnafMul(this,m)},f.prototype.mulAdd=function(m,p,x){var g=[this,p],v=[m,x];return this.curve.endo?this.curve._endoWnafMulAdd(g,v):this.curve._wnafMulAdd(1,g,v,2)},f.prototype.jmulAdd=function(m,p,x){var g=[this,p],v=[m,x];return this.curve.endo?this.curve._endoWnafMulAdd(g,v,!0):this.curve._wnafMulAdd(1,g,v,2,!0)},f.prototype.eq=function(m){return this===m||this.inf===m.inf&&(this.inf||this.x.cmp(m.x)===0&&this.y.cmp(m.y)===0)},f.prototype.neg=function(m){if(this.inf)return this;var p=this.curve.point(this.x,this.y.redNeg());if(m&&this.precomputed){var x=this.precomputed,g=function(v){return v.neg()};p.precomputed={naf:x.naf&&{wnd:x.naf.wnd,points:x.naf.points.map(g)},doubles:x.doubles&&{step:x.doubles.step,points:x.doubles.points.map(g)}}}return p},f.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},d(h,l.BasePoint),u.prototype.jpoint=function(m,p,x){return new h(this,m,p,x)},h.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var m=this.z.redInvm(),p=m.redSqr(),x=this.x.redMul(p),g=this.y.redMul(p).redMul(m);return this.curve.point(x,g)},h.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},h.prototype.add=function(m){if(this.isInfinity())return m;if(m.isInfinity())return this;var p=m.z.redSqr(),x=this.z.redSqr(),g=this.x.redMul(p),v=m.x.redMul(x),y=this.y.redMul(p.redMul(m.z)),b=m.y.redMul(x.redMul(this.z)),C=g.redSub(v),T=y.redSub(b);if(C.cmpn(0)===0)return T.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var M=C.redSqr(),U=M.redMul(C),L=g.redMul(M),P=T.redSqr().redIAdd(U).redISub(L).redISub(L),B=T.redMul(L.redISub(P)).redISub(y.redMul(U)),q=this.z.redMul(m.z).redMul(C);return this.curve.jpoint(P,B,q)},h.prototype.mixedAdd=function(m){if(this.isInfinity())return m.toJ();if(m.isInfinity())return this;var p=this.z.redSqr(),x=this.x,g=m.x.redMul(p),v=this.y,y=m.y.redMul(p).redMul(this.z),b=x.redSub(g),C=v.redSub(y);if(b.cmpn(0)===0)return C.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var T=b.redSqr(),M=T.redMul(b),U=x.redMul(T),L=C.redSqr().redIAdd(M).redISub(U).redISub(U),P=C.redMul(U.redISub(L)).redISub(v.redMul(M)),B=this.z.redMul(b);return this.curve.jpoint(L,P,B)},h.prototype.dblp=function(m){if(m===0)return this;if(this.isInfinity())return this;if(!m)return this.dbl();var p;if(this.curve.zeroA||this.curve.threeA){var x=this;for(p=0;p<m;p++)x=x.dbl();return x}var g=this.curve.a,v=this.curve.tinv,y=this.x,b=this.y,C=this.z,T=C.redSqr().redSqr(),M=b.redAdd(b);for(p=0;p<m;p++){var U=y.redSqr(),L=M.redSqr(),P=L.redSqr(),B=U.redAdd(U).redIAdd(U).redIAdd(g.redMul(T)),q=y.redMul(L),z=B.redSqr().redISub(q.redAdd(q)),k=q.redISub(z),R=B.redMul(k);R=R.redIAdd(R).redISub(P);var S=M.redMul(C);p+1<m&&(T=T.redMul(P)),y=z,C=S,M=R}return this.curve.jpoint(y,M.redMul(v),C)},h.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},h.prototype._zeroDbl=function(){var m,p,x;if(this.zOne){var g=this.x.redSqr(),v=this.y.redSqr(),y=v.redSqr(),b=this.x.redAdd(v).redSqr().redISub(g).redISub(y);b=b.redIAdd(b);var C=g.redAdd(g).redIAdd(g),T=C.redSqr().redISub(b).redISub(b),M=y.redIAdd(y);M=(M=M.redIAdd(M)).redIAdd(M),m=T,p=C.redMul(b.redISub(T)).redISub(M),x=this.y.redAdd(this.y)}else{var U=this.x.redSqr(),L=this.y.redSqr(),P=L.redSqr(),B=this.x.redAdd(L).redSqr().redISub(U).redISub(P);B=B.redIAdd(B);var q=U.redAdd(U).redIAdd(U),z=q.redSqr(),k=P.redIAdd(P);k=(k=k.redIAdd(k)).redIAdd(k),m=z.redISub(B).redISub(B),p=q.redMul(B.redISub(m)).redISub(k),x=(x=this.y.redMul(this.z)).redIAdd(x)}return this.curve.jpoint(m,p,x)},h.prototype._threeDbl=function(){var m,p,x;if(this.zOne){var g=this.x.redSqr(),v=this.y.redSqr(),y=v.redSqr(),b=this.x.redAdd(v).redSqr().redISub(g).redISub(y);b=b.redIAdd(b);var C=g.redAdd(g).redIAdd(g).redIAdd(this.curve.a),T=C.redSqr().redISub(b).redISub(b);m=T;var M=y.redIAdd(y);M=(M=M.redIAdd(M)).redIAdd(M),p=C.redMul(b.redISub(T)).redISub(M),x=this.y.redAdd(this.y)}else{var U=this.z.redSqr(),L=this.y.redSqr(),P=this.x.redMul(L),B=this.x.redSub(U).redMul(this.x.redAdd(U));B=B.redAdd(B).redIAdd(B);var q=P.redIAdd(P),z=(q=q.redIAdd(q)).redAdd(q);m=B.redSqr().redISub(z),x=this.y.redAdd(this.z).redSqr().redISub(L).redISub(U);var k=L.redSqr();k=(k=(k=k.redIAdd(k)).redIAdd(k)).redIAdd(k),p=B.redMul(q.redISub(m)).redISub(k)}return this.curve.jpoint(m,p,x)},h.prototype._dbl=function(){var m=this.curve.a,p=this.x,x=this.y,g=this.z,v=g.redSqr().redSqr(),y=p.redSqr(),b=x.redSqr(),C=y.redAdd(y).redIAdd(y).redIAdd(m.redMul(v)),T=p.redAdd(p),M=(T=T.redIAdd(T)).redMul(b),U=C.redSqr().redISub(M.redAdd(M)),L=M.redISub(U),P=b.redSqr();P=(P=(P=P.redIAdd(P)).redIAdd(P)).redIAdd(P);var B=C.redMul(L).redISub(P),q=x.redAdd(x).redMul(g);return this.curve.jpoint(U,B,q)},h.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var m=this.x.redSqr(),p=this.y.redSqr(),x=this.z.redSqr(),g=p.redSqr(),v=m.redAdd(m).redIAdd(m),y=v.redSqr(),b=this.x.redAdd(p).redSqr().redISub(m).redISub(g),C=(b=(b=(b=b.redIAdd(b)).redAdd(b).redIAdd(b)).redISub(y)).redSqr(),T=g.redIAdd(g);T=(T=(T=T.redIAdd(T)).redIAdd(T)).redIAdd(T);var M=v.redIAdd(b).redSqr().redISub(y).redISub(C).redISub(T),U=p.redMul(M);U=(U=U.redIAdd(U)).redIAdd(U);var L=this.x.redMul(C).redISub(U);L=(L=L.redIAdd(L)).redIAdd(L);var P=this.y.redMul(M.redMul(T.redISub(M)).redISub(b.redMul(C)));P=(P=(P=P.redIAdd(P)).redIAdd(P)).redIAdd(P);var B=this.z.redAdd(b).redSqr().redISub(x).redISub(C);return this.curve.jpoint(L,P,B)},h.prototype.mul=function(m,p){return m=new a(m,p),this.curve._wnafMul(this,m)},h.prototype.eq=function(m){if(m.type==="affine")return this.eq(m.toJ());if(this===m)return!0;var p=this.z.redSqr(),x=m.z.redSqr();if(this.x.redMul(x).redISub(m.x.redMul(p)).cmpn(0)!==0)return!1;var g=p.redMul(this.z),v=x.redMul(m.z);return this.y.redMul(v).redISub(m.y.redMul(g)).cmpn(0)===0},h.prototype.eqXToP=function(m){var p=this.z.redSqr(),x=m.toRed(this.curve.red).redMul(p);if(this.x.cmp(x)===0)return!0;for(var g=m.clone(),v=this.curve.redN.redMul(p);;){if(g.iadd(this.curve.n),g.cmp(this.curve.p)>=0)return!1;if(x.redIAdd(v),this.x.cmp(x)===0)return!0}},h.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},h.prototype.isInfinity=function(){return this.z.cmpn(0)===0}},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],411:[function(s,n,c){var o,a=c,d=s("hash.js"),l=s("./curve"),i=s("./utils").assert;function u(h){h.type==="short"?this.curve=new l.short(h):h.type==="edwards"?this.curve=new l.edwards(h):this.curve=new l.mont(h),this.g=this.curve.g,this.n=this.curve.n,this.hash=h.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function f(h,m){Object.defineProperty(a,h,{configurable:!0,enumerable:!0,get:function(){var p=new u(m);return Object.defineProperty(a,h,{configurable:!0,enumerable:!0,value:p}),p}})}a.PresetCurve=u,f("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:d.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),f("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:d.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),f("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:d.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),f("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:d.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),f("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:d.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),f("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:d.sha256,gRed:!1,g:["9"]}),f("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:d.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{o=s("./precomputed/secp256k1")}catch{o=void 0}f("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:d.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})},{"./curve":408,"./precomputed/secp256k1":418,"./utils":419,"hash.js":426}],412:[function(s,n,c){var o=s("bn.js"),a=s("hmac-drbg"),d=s("../utils"),l=s("../curves"),i=s("brorand"),u=d.assert,f=s("./key"),h=s("./signature");function m(p){if(!(this instanceof m))return new m(p);typeof p=="string"&&(u(Object.prototype.hasOwnProperty.call(l,p),"Unknown curve "+p),p=l[p]),p instanceof l.PresetCurve&&(p={curve:p}),this.curve=p.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=p.curve.g,this.g.precompute(p.curve.n.bitLength()+1),this.hash=p.hash||p.curve.hash}n.exports=m,m.prototype.keyPair=function(p){return new f(this,p)},m.prototype.keyFromPrivate=function(p,x){return f.fromPrivate(this,p,x)},m.prototype.keyFromPublic=function(p,x){return f.fromPublic(this,p,x)},m.prototype.genKeyPair=function(p){p||(p={});for(var x=new a({hash:this.hash,pers:p.pers,persEnc:p.persEnc||"utf8",entropy:p.entropy||i(this.hash.hmacStrength),entropyEnc:p.entropy&&p.entropyEnc||"utf8",nonce:this.n.toArray()}),g=this.n.byteLength(),v=this.n.sub(new o(2));;){var y=new o(x.generate(g));if(!(y.cmp(v)>0))return y.iaddn(1),this.keyFromPrivate(y)}},m.prototype._truncateToN=function(p,x){var g=8*p.byteLength()-this.n.bitLength();return g>0&&(p=p.ushrn(g)),!x&&p.cmp(this.n)>=0?p.sub(this.n):p},m.prototype.sign=function(p,x,g,v){typeof g=="object"&&(v=g,g=null),v||(v={}),x=this.keyFromPrivate(x,g),p=this._truncateToN(new o(p,16));for(var y=this.n.byteLength(),b=x.getPrivate().toArray("be",y),C=p.toArray("be",y),T=new a({hash:this.hash,entropy:b,nonce:C,pers:v.pers,persEnc:v.persEnc||"utf8"}),M=this.n.sub(new o(1)),U=0;;U++){var L=v.k?v.k(U):new o(T.generate(this.n.byteLength()));if(!((L=this._truncateToN(L,!0)).cmpn(1)<=0||L.cmp(M)>=0)){var P=this.g.mul(L);if(!P.isInfinity()){var B=P.getX(),q=B.umod(this.n);if(q.cmpn(0)!==0){var z=L.invm(this.n).mul(q.mul(x.getPrivate()).iadd(p));if((z=z.umod(this.n)).cmpn(0)!==0){var k=(P.getY().isOdd()?1:0)|(B.cmp(q)!==0?2:0);return v.canonical&&z.cmp(this.nh)>0&&(z=this.n.sub(z),k^=1),new h({r:q,s:z,recoveryParam:k})}}}}}},m.prototype.verify=function(p,x,g,v){p=this._truncateToN(new o(p,16)),g=this.keyFromPublic(g,v);var y=(x=new h(x,"hex")).r,b=x.s;if(y.cmpn(1)<0||y.cmp(this.n)>=0||b.cmpn(1)<0||b.cmp(this.n)>=0)return!1;var C,T=b.invm(this.n),M=T.mul(p).umod(this.n),U=T.mul(y).umod(this.n);return this.curve._maxwellTrick?!(C=this.g.jmulAdd(M,g.getPublic(),U)).isInfinity()&&C.eqXToP(y):!(C=this.g.mulAdd(M,g.getPublic(),U)).isInfinity()&&C.getX().umod(this.n).cmp(y)===0},m.prototype.recoverPubKey=function(p,x,g,v){u((3&g)===g,"The recovery param is more than two bits"),x=new h(x,v);var y=this.n,b=new o(p),C=x.r,T=x.s,M=1&g,U=g>>1;if(C.cmp(this.curve.p.umod(this.curve.n))>=0&&U)throw new Error("Unable to find sencond key candinate");C=U?this.curve.pointFromX(C.add(this.curve.n),M):this.curve.pointFromX(C,M);var L=x.r.invm(y),P=y.sub(b).mul(L).umod(y),B=T.mul(L).umod(y);return this.g.mulAdd(P,C,B)},m.prototype.getKeyRecoveryParam=function(p,x,g,v){if((x=new h(x,v)).recoveryParam!==null)return x.recoveryParam;for(var y=0;y<4;y++){var b;try{b=this.recoverPubKey(p,x,y)}catch{continue}if(b.eq(g))return y}throw new Error("Unable to find valid recovery factor")}},{"../curves":411,"../utils":419,"./key":413,"./signature":414,"bn.js":420,brorand:187,"hmac-drbg":438}],413:[function(s,n,c){var o=s("bn.js"),a=s("../utils").assert;function d(l,i){this.ec=l,this.priv=null,this.pub=null,i.priv&&this._importPrivate(i.priv,i.privEnc),i.pub&&this._importPublic(i.pub,i.pubEnc)}n.exports=d,d.fromPublic=function(l,i,u){return i instanceof d?i:new d(l,{pub:i,pubEnc:u})},d.fromPrivate=function(l,i,u){return i instanceof d?i:new d(l,{priv:i,privEnc:u})},d.prototype.validate=function(){var l=this.getPublic();return l.isInfinity()?{result:!1,reason:"Invalid public key"}:l.validate()?l.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},d.prototype.getPublic=function(l,i){return typeof l=="string"&&(i=l,l=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),i?this.pub.encode(i,l):this.pub},d.prototype.getPrivate=function(l){return l==="hex"?this.priv.toString(16,2):this.priv},d.prototype._importPrivate=function(l,i){this.priv=new o(l,i||16),this.priv=this.priv.umod(this.ec.curve.n)},d.prototype._importPublic=function(l,i){if(l.x||l.y)return this.ec.curve.type==="mont"?a(l.x,"Need x coordinate"):this.ec.curve.type!=="short"&&this.ec.curve.type!=="edwards"||a(l.x&&l.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(l.x,l.y));this.pub=this.ec.curve.decodePoint(l,i)},d.prototype.derive=function(l){return l.validate()||a(l.validate(),"public point not validated"),l.mul(this.priv).getX()},d.prototype.sign=function(l,i,u){return this.ec.sign(l,this,i,u)},d.prototype.verify=function(l,i){return this.ec.verify(l,i,this)},d.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../utils":419,"bn.js":420}],414:[function(s,n,c){var o=s("bn.js"),a=s("../utils"),d=a.assert;function l(m,p){if(m instanceof l)return m;this._importDER(m,p)||(d(m.r&&m.s,"Signature without r or s"),this.r=new o(m.r,16),this.s=new o(m.s,16),m.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=m.recoveryParam)}function i(){this.place=0}function u(m,p){var x=m[p.place++];if(!(128&x))return x;var g=15&x;if(g===0||g>4)return!1;for(var v=0,y=0,b=p.place;y<g;y++,b++)v<<=8,v|=m[b],v>>>=0;return!(v<=127)&&(p.place=b,v)}function f(m){for(var p=0,x=m.length-1;!m[p]&&!(128&m[p+1])&&p<x;)p++;return p===0?m:m.slice(p)}function h(m,p){if(p<128)m.push(p);else{var x=1+(Math.log(p)/Math.LN2>>>3);for(m.push(128|x);--x;)m.push(p>>>(x<<3)&255);m.push(p)}}n.exports=l,l.prototype._importDER=function(m,p){m=a.toArray(m,p);var x=new i;if(m[x.place++]!==48)return!1;var g=u(m,x);if(g===!1||g+x.place!==m.length||m[x.place++]!==2)return!1;var v=u(m,x);if(v===!1)return!1;var y=m.slice(x.place,v+x.place);if(x.place+=v,m[x.place++]!==2)return!1;var b=u(m,x);if(b===!1||m.length!==b+x.place)return!1;var C=m.slice(x.place,b+x.place);if(y[0]===0){if(!(128&y[1]))return!1;y=y.slice(1)}if(C[0]===0){if(!(128&C[1]))return!1;C=C.slice(1)}return this.r=new o(y),this.s=new o(C),this.recoveryParam=null,!0},l.prototype.toDER=function(m){var p=this.r.toArray(),x=this.s.toArray();for(128&p[0]&&(p=[0].concat(p)),128&x[0]&&(x=[0].concat(x)),p=f(p),x=f(x);!(x[0]||128&x[1]);)x=x.slice(1);var g=[2];h(g,p.length),(g=g.concat(p)).push(2),h(g,x.length);var v=g.concat(x),y=[48];return h(y,v.length),y=y.concat(v),a.encode(y,m)}},{"../utils":419,"bn.js":420}],415:[function(s,n,c){var o=s("hash.js"),a=s("../curves"),d=s("../utils"),l=d.assert,i=d.parseBytes,u=s("./key"),f=s("./signature");function h(m){if(l(m==="ed25519","only tested with ed25519 so far"),!(this instanceof h))return new h(m);m=a[m].curve,this.curve=m,this.g=m.g,this.g.precompute(m.n.bitLength()+1),this.pointClass=m.point().constructor,this.encodingLength=Math.ceil(m.n.bitLength()/8),this.hash=o.sha512}n.exports=h,h.prototype.sign=function(m,p){m=i(m);var x=this.keyFromSecret(p),g=this.hashInt(x.messagePrefix(),m),v=this.g.mul(g),y=this.encodePoint(v),b=this.hashInt(y,x.pubBytes(),m).mul(x.priv()),C=g.add(b).umod(this.curve.n);return this.makeSignature({R:v,S:C,Rencoded:y})},h.prototype.verify=function(m,p,x){m=i(m),p=this.makeSignature(p);var g=this.keyFromPublic(x),v=this.hashInt(p.Rencoded(),g.pubBytes(),m),y=this.g.mul(p.S());return p.R().add(g.pub().mul(v)).eq(y)},h.prototype.hashInt=function(){for(var m=this.hash(),p=0;p<arguments.length;p++)m.update(arguments[p]);return d.intFromLE(m.digest()).umod(this.curve.n)},h.prototype.keyFromPublic=function(m){return u.fromPublic(this,m)},h.prototype.keyFromSecret=function(m){return u.fromSecret(this,m)},h.prototype.makeSignature=function(m){return m instanceof f?m:new f(this,m)},h.prototype.encodePoint=function(m){var p=m.getY().toArray("le",this.encodingLength);return p[this.encodingLength-1]|=m.getX().isOdd()?128:0,p},h.prototype.decodePoint=function(m){var p=(m=d.parseBytes(m)).length-1,x=m.slice(0,p).concat(-129&m[p]),g=(128&m[p])!=0,v=d.intFromLE(x);return this.curve.pointFromY(v,g)},h.prototype.encodeInt=function(m){return m.toArray("le",this.encodingLength)},h.prototype.decodeInt=function(m){return d.intFromLE(m)},h.prototype.isPoint=function(m){return m instanceof this.pointClass}},{"../curves":411,"../utils":419,"./key":416,"./signature":417,"hash.js":426}],416:[function(s,n,c){var o=s("../utils"),a=o.assert,d=o.parseBytes,l=o.cachedProperty;function i(u,f){this.eddsa=u,this._secret=d(f.secret),u.isPoint(f.pub)?this._pub=f.pub:this._pubBytes=d(f.pub)}i.fromPublic=function(u,f){return f instanceof i?f:new i(u,{pub:f})},i.fromSecret=function(u,f){return f instanceof i?f:new i(u,{secret:f})},i.prototype.secret=function(){return this._secret},l(i,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),l(i,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),l(i,"privBytes",function(){var u=this.eddsa,f=this.hash(),h=u.encodingLength-1,m=f.slice(0,u.encodingLength);return m[0]&=248,m[h]&=127,m[h]|=64,m}),l(i,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),l(i,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),l(i,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),i.prototype.sign=function(u){return a(this._secret,"KeyPair can only verify"),this.eddsa.sign(u,this)},i.prototype.verify=function(u,f){return this.eddsa.verify(u,f,this)},i.prototype.getSecret=function(u){return a(this._secret,"KeyPair is public only"),o.encode(this.secret(),u)},i.prototype.getPublic=function(u){return o.encode(this.pubBytes(),u)},n.exports=i},{"../utils":419}],417:[function(s,n,c){var o=s("bn.js"),a=s("../utils"),d=a.assert,l=a.cachedProperty,i=a.parseBytes;function u(f,h){this.eddsa=f,typeof h!="object"&&(h=i(h)),Array.isArray(h)&&(h={R:h.slice(0,f.encodingLength),S:h.slice(f.encodingLength)}),d(h.R&&h.S,"Signature without R or S"),f.isPoint(h.R)&&(this._R=h.R),h.S instanceof o&&(this._S=h.S),this._Rencoded=Array.isArray(h.R)?h.R:h.Rencoded,this._Sencoded=Array.isArray(h.S)?h.S:h.Sencoded}l(u,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),l(u,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),l(u,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),l(u,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),u.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},u.prototype.toHex=function(){return a.encode(this.toBytes(),"hex").toUpperCase()},n.exports=u},{"../utils":419,"bn.js":420}],418:[function(s,n,c){n.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},{}],419:[function(s,n,c){var o=c,a=s("bn.js"),d=s("minimalistic-assert"),l=s("minimalistic-crypto-utils");o.assert=d,o.toArray=l.toArray,o.zero2=l.zero2,o.toHex=l.toHex,o.encode=l.encode,o.getNAF=function(i,u,f){var h=new Array(Math.max(i.bitLength(),f)+1);h.fill(0);for(var m=1<<u+1,p=i.clone(),x=0;x<h.length;x++){var g,v=p.andln(m-1);p.isOdd()?(g=v>(m>>1)-1?(m>>1)-v:v,p.isubn(g)):g=0,h[x]=g,p.iushrn(1)}return h},o.getJSF=function(i,u){var f=[[],[]];i=i.clone(),u=u.clone();for(var h,m=0,p=0;i.cmpn(-m)>0||u.cmpn(-p)>0;){var x,g,v=i.andln(3)+m&3,y=u.andln(3)+p&3;v===3&&(v=-1),y===3&&(y=-1),x=1&v?(h=i.andln(7)+m&7)!==3&&h!==5||y!==2?v:-v:0,f[0].push(x),g=1&y?(h=u.andln(7)+p&7)!==3&&h!==5||v!==2?y:-y:0,f[1].push(g),2*m===x+1&&(m=1-m),2*p===g+1&&(p=1-p),i.iushrn(1),u.iushrn(1)}return f},o.cachedProperty=function(i,u,f){var h="_"+u;i.prototype[u]=function(){return this[h]!==void 0?this[h]:this[h]=f.call(this)}},o.parseBytes=function(i){return typeof i=="string"?o.toArray(i,"hex"):i},o.intFromLE=function(i){return new a(i,"hex","le")}},{"bn.js":420,"minimalistic-assert":453,"minimalistic-crypto-utils":454}],420:[function(s,n,c){arguments[4][184][0].apply(c,arguments)},{buffer:188,dup:184}],421:[function(s,n,c){n.exports={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}},{}],422:[function(s,n,c){var o=Object.create||function(L){var P=function(){};return P.prototype=L,new P},a=Object.keys||function(L){var P=[];for(var B in L)Object.prototype.hasOwnProperty.call(L,B)&&P.push(B);return B},d=Function.prototype.bind||function(L){var P=this;return function(){return P.apply(L,arguments)}};function l(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=o(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}n.exports=l,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._maxListeners=void 0;var i,u=10;try{var f={};Object.defineProperty&&Object.defineProperty(f,"x",{value:0}),i=f.x===0}catch{i=!1}function h(L){return L._maxListeners===void 0?l.defaultMaxListeners:L._maxListeners}function m(L,P,B){if(P)L.call(B);else for(var q=L.length,z=U(L,q),k=0;k<q;++k)z[k].call(B)}function p(L,P,B,q){if(P)L.call(B,q);else for(var z=L.length,k=U(L,z),R=0;R<z;++R)k[R].call(B,q)}function x(L,P,B,q,z){if(P)L.call(B,q,z);else for(var k=L.length,R=U(L,k),S=0;S<k;++S)R[S].call(B,q,z)}function g(L,P,B,q,z,k){if(P)L.call(B,q,z,k);else for(var R=L.length,S=U(L,R),w=0;w<R;++w)S[w].call(B,q,z,k)}function v(L,P,B,q){if(P)L.apply(B,q);else for(var z=L.length,k=U(L,z),R=0;R<z;++R)k[R].apply(B,q)}function y(L,P,B,q){var z,k,R;if(typeof B!="function")throw new TypeError('"listener" argument must be a function');if((k=L._events)?(k.newListener&&(L.emit("newListener",P,B.listener?B.listener:B),k=L._events),R=k[P]):(k=L._events=o(null),L._eventsCount=0),R){if(typeof R=="function"?R=k[P]=q?[B,R]:[R,B]:q?R.unshift(B):R.push(B),!R.warned&&(z=h(L))&&z>0&&R.length>z){R.warned=!0;var S=new Error("Possible EventEmitter memory leak detected. "+R.length+' "'+String(P)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');S.name="MaxListenersExceededWarning",S.emitter=L,S.type=P,S.count=R.length,typeof console=="object"&&console.warn&&console.warn("%s: %s",S.name,S.message)}}else R=k[P]=B,++L._eventsCount;return L}function b(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var L=new Array(arguments.length),P=0;P<L.length;++P)L[P]=arguments[P];this.listener.apply(this.target,L)}}function C(L,P,B){var q={fired:!1,wrapFn:void 0,target:L,type:P,listener:B},z=d.call(b,q);return z.listener=B,q.wrapFn=z,z}function T(L,P,B){var q=L._events;if(!q)return[];var z=q[P];return z?typeof z=="function"?B?[z.listener||z]:[z]:B?function(k){for(var R=new Array(k.length),S=0;S<R.length;++S)R[S]=k[S].listener||k[S];return R}(z):U(z,z.length):[]}function M(L){var P=this._events;if(P){var B=P[L];if(typeof B=="function")return 1;if(B)return B.length}return 0}function U(L,P){for(var B=new Array(P),q=0;q<P;++q)B[q]=L[q];return B}i?Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(L){if(typeof L!="number"||L<0||L!=L)throw new TypeError('"defaultMaxListeners" must be a positive number');u=L}}):l.defaultMaxListeners=u,l.prototype.setMaxListeners=function(L){if(typeof L!="number"||L<0||isNaN(L))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=L,this},l.prototype.getMaxListeners=function(){return h(this)},l.prototype.emit=function(L){var P,B,q,z,k,R,S=L==="error";if(R=this._events)S=S&&R.error==null;else if(!S)return!1;if(S){if(arguments.length>1&&(P=arguments[1]),P instanceof Error)throw P;var w=new Error('Unhandled "error" event. ('+P+")");throw w.context=P,w}if(!(B=R[L]))return!1;var _=typeof B=="function";switch(q=arguments.length){case 1:m(B,_,this);break;case 2:p(B,_,this,arguments[1]);break;case 3:x(B,_,this,arguments[1],arguments[2]);break;case 4:g(B,_,this,arguments[1],arguments[2],arguments[3]);break;default:for(z=new Array(q-1),k=1;k<q;k++)z[k-1]=arguments[k];v(B,_,this,z)}return!0},l.prototype.addListener=function(L,P){return y(this,L,P,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(L,P){return y(this,L,P,!0)},l.prototype.once=function(L,P){if(typeof P!="function")throw new TypeError('"listener" argument must be a function');return this.on(L,C(this,L,P)),this},l.prototype.prependOnceListener=function(L,P){if(typeof P!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(L,C(this,L,P)),this},l.prototype.removeListener=function(L,P){var B,q,z,k,R;if(typeof P!="function")throw new TypeError('"listener" argument must be a function');if(!(q=this._events))return this;if(!(B=q[L]))return this;if(B===P||B.listener===P)--this._eventsCount==0?this._events=o(null):(delete q[L],q.removeListener&&this.emit("removeListener",L,B.listener||P));else if(typeof B!="function"){for(z=-1,k=B.length-1;k>=0;k--)if(B[k]===P||B[k].listener===P){R=B[k].listener,z=k;break}if(z<0)return this;z===0?B.shift():function(S,w){for(var _=w,j=_+1,N=S.length;j<N;_+=1,j+=1)S[_]=S[j];S.pop()}(B,z),B.length===1&&(q[L]=B[0]),q.removeListener&&this.emit("removeListener",L,R||P)}return this},l.prototype.removeAllListeners=function(L){var P,B,q;if(!(B=this._events))return this;if(!B.removeListener)return arguments.length===0?(this._events=o(null),this._eventsCount=0):B[L]&&(--this._eventsCount==0?this._events=o(null):delete B[L]),this;if(arguments.length===0){var z,k=a(B);for(q=0;q<k.length;++q)(z=k[q])!=="removeListener"&&this.removeAllListeners(z);return this.removeAllListeners("removeListener"),this._events=o(null),this._eventsCount=0,this}if(typeof(P=B[L])=="function")this.removeListener(L,P);else if(P)for(q=P.length-1;q>=0;q--)this.removeListener(L,P[q]);return this},l.prototype.listeners=function(L){return T(this,L,!0)},l.prototype.rawListeners=function(L){return T(this,L,!1)},l.listenerCount=function(L,P){return typeof L.listenerCount=="function"?L.listenerCount(P):M.call(L,P)},l.prototype.listenerCount=M,l.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],423:[function(s,n,c){var o=s("safe-buffer").Buffer,a=s("md5.js");n.exports=function(d,l,i,u){if(o.isBuffer(d)||(d=o.from(d,"binary")),l&&(o.isBuffer(l)||(l=o.from(l,"binary")),l.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var f=i/8,h=o.alloc(f),m=o.alloc(u||0),p=o.alloc(0);f>0||u>0;){var x=new a;x.update(p),x.update(d),l&&x.update(l),p=x.digest();var g=0;if(f>0){var v=h.length-f;g=Math.min(f,p.length),p.copy(h,v,0,g),f-=g}if(g<p.length&&u>0){var y=m.length-u,b=Math.min(u,p.length-g);p.copy(m,y,g,g+b),u-=b}}return p.fill(0),{key:h,iv:m}}},{"md5.js":450,"safe-buffer":494}],424:[function(s,n,c){Object.defineProperty(c,"__esModule",{value:!0}),c.CsvParserStream=c.ParserOptions=c.parseFile=c.parseStream=c.parseString=c.parse=c.FormatterOptions=c.CsvFormatterStream=c.writeToPath=c.writeToString=c.writeToBuffer=c.writeToStream=c.write=c.format=void 0;var o=s("@fast-csv/format");Object.defineProperty(c,"format",{enumerable:!0,get:function(){return o.format}}),Object.defineProperty(c,"write",{enumerable:!0,get:function(){return o.write}}),Object.defineProperty(c,"writeToStream",{enumerable:!0,get:function(){return o.writeToStream}}),Object.defineProperty(c,"writeToBuffer",{enumerable:!0,get:function(){return o.writeToBuffer}}),Object.defineProperty(c,"writeToString",{enumerable:!0,get:function(){return o.writeToString}}),Object.defineProperty(c,"writeToPath",{enumerable:!0,get:function(){return o.writeToPath}}),Object.defineProperty(c,"CsvFormatterStream",{enumerable:!0,get:function(){return o.CsvFormatterStream}}),Object.defineProperty(c,"FormatterOptions",{enumerable:!0,get:function(){return o.FormatterOptions}});var a=s("@fast-csv/parse");Object.defineProperty(c,"parse",{enumerable:!0,get:function(){return a.parse}}),Object.defineProperty(c,"parseString",{enumerable:!0,get:function(){return a.parseString}}),Object.defineProperty(c,"parseStream",{enumerable:!0,get:function(){return a.parseStream}}),Object.defineProperty(c,"parseFile",{enumerable:!0,get:function(){return a.parseFile}}),Object.defineProperty(c,"ParserOptions",{enumerable:!0,get:function(){return a.ParserOptions}}),Object.defineProperty(c,"CsvParserStream",{enumerable:!0,get:function(){return a.CsvParserStream}})},{"@fast-csv/format":151,"@fast-csv/parse":155}],425:[function(s,n,c){var o=s("safe-buffer").Buffer,a=s("readable-stream").Transform;function d(l){a.call(this),this._block=o.allocUnsafe(l),this._blockSize=l,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}s("inherits")(d,a),d.prototype._transform=function(l,i,u){var f=null;try{this.update(l,i)}catch(h){f=h}u(f)},d.prototype._flush=function(l){var i=null;try{this.push(this.digest())}catch(u){i=u}l(i)},d.prototype.update=function(l,i){if(function(x,g){if(!o.isBuffer(x)&&typeof x!="string")throw new TypeError(g+" must be a string or a buffer")}(l,"Data"),this._finalized)throw new Error("Digest already called");o.isBuffer(l)||(l=o.from(l,i));for(var u=this._block,f=0;this._blockOffset+l.length-f>=this._blockSize;){for(var h=this._blockOffset;h<this._blockSize;)u[h++]=l[f++];this._update(),this._blockOffset=0}for(;f<l.length;)u[this._blockOffset++]=l[f++];for(var m=0,p=8*l.length;p>0;++m)this._length[m]+=p,(p=this._length[m]/4294967296|0)>0&&(this._length[m]-=4294967296*p);return this},d.prototype._update=function(){throw new Error("_update is not implemented")},d.prototype.digest=function(l){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var i=this._digest();l!==void 0&&(i=i.toString(l)),this._block.fill(0),this._blockOffset=0;for(var u=0;u<4;++u)this._length[u]=0;return i},d.prototype._digest=function(){throw new Error("_digest is not implemented")},n.exports=d},{inherits:440,"readable-stream":491,"safe-buffer":494}],426:[function(s,n,c){var o=c;o.utils=s("./hash/utils"),o.common=s("./hash/common"),o.sha=s("./hash/sha"),o.ripemd=s("./hash/ripemd"),o.hmac=s("./hash/hmac"),o.sha1=o.sha.sha1,o.sha256=o.sha.sha256,o.sha224=o.sha.sha224,o.sha384=o.sha.sha384,o.sha512=o.sha.sha512,o.ripemd160=o.ripemd.ripemd160},{"./hash/common":427,"./hash/hmac":428,"./hash/ripemd":429,"./hash/sha":430,"./hash/utils":437}],427:[function(s,n,c){var o=s("./utils"),a=s("minimalistic-assert");function d(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}c.BlockHash=d,d.prototype.update=function(l,i){if(l=o.toArray(l,i),this.pending?this.pending=this.pending.concat(l):this.pending=l,this.pendingTotal+=l.length,this.pending.length>=this._delta8){var u=(l=this.pending).length%this._delta8;this.pending=l.slice(l.length-u,l.length),this.pending.length===0&&(this.pending=null),l=o.join32(l,0,l.length-u,this.endian);for(var f=0;f<l.length;f+=this._delta32)this._update(l,f,f+this._delta32)}return this},d.prototype.digest=function(l){return this.update(this._pad()),a(this.pending===null),this._digest(l)},d.prototype._pad=function(){var l=this.pendingTotal,i=this._delta8,u=i-(l+this.padLength)%i,f=new Array(u+this.padLength);f[0]=128;for(var h=1;h<u;h++)f[h]=0;if(l<<=3,this.endian==="big"){for(var m=8;m<this.padLength;m++)f[h++]=0;f[h++]=0,f[h++]=0,f[h++]=0,f[h++]=0,f[h++]=l>>>24&255,f[h++]=l>>>16&255,f[h++]=l>>>8&255,f[h++]=255&l}else for(f[h++]=255&l,f[h++]=l>>>8&255,f[h++]=l>>>16&255,f[h++]=l>>>24&255,f[h++]=0,f[h++]=0,f[h++]=0,f[h++]=0,m=8;m<this.padLength;m++)f[h++]=0;return f}},{"./utils":437,"minimalistic-assert":453}],428:[function(s,n,c){var o=s("./utils"),a=s("minimalistic-assert");function d(l,i,u){if(!(this instanceof d))return new d(l,i,u);this.Hash=l,this.blockSize=l.blockSize/8,this.outSize=l.outSize/8,this.inner=null,this.outer=null,this._init(o.toArray(i,u))}n.exports=d,d.prototype._init=function(l){l.length>this.blockSize&&(l=new this.Hash().update(l).digest()),a(l.length<=this.blockSize);for(var i=l.length;i<this.blockSize;i++)l.push(0);for(i=0;i<l.length;i++)l[i]^=54;for(this.inner=new this.Hash().update(l),i=0;i<l.length;i++)l[i]^=106;this.outer=new this.Hash().update(l)},d.prototype.update=function(l,i){return this.inner.update(l,i),this},d.prototype.digest=function(l){return this.outer.update(this.inner.digest()),this.outer.digest(l)}},{"./utils":437,"minimalistic-assert":453}],429:[function(s,n,c){var o=s("./utils"),a=s("./common"),d=o.rotl32,l=o.sum32,i=o.sum32_3,u=o.sum32_4,f=a.BlockHash;function h(){if(!(this instanceof h))return new h;f.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function m(C,T,M,U){return C<=15?T^M^U:C<=31?T&M|~T&U:C<=47?(T|~M)^U:C<=63?T&U|M&~U:T^(M|~U)}function p(C){return C<=15?0:C<=31?1518500249:C<=47?1859775393:C<=63?2400959708:2840853838}function x(C){return C<=15?1352829926:C<=31?1548603684:C<=47?1836072691:C<=63?2053994217:0}o.inherits(h,f),c.ripemd160=h,h.blockSize=512,h.outSize=160,h.hmacStrength=192,h.padLength=64,h.prototype._update=function(C,T){for(var M=this.h[0],U=this.h[1],L=this.h[2],P=this.h[3],B=this.h[4],q=M,z=U,k=L,R=P,S=B,w=0;w<80;w++){var _=l(d(u(M,m(w,U,L,P),C[g[w]+T],p(w)),y[w]),B);M=B,B=P,P=d(L,10),L=U,U=_,_=l(d(u(q,m(79-w,z,k,R),C[v[w]+T],x(w)),b[w]),S),q=S,S=R,R=d(k,10),k=z,z=_}_=i(this.h[1],L,R),this.h[1]=i(this.h[2],P,S),this.h[2]=i(this.h[3],B,q),this.h[3]=i(this.h[4],M,z),this.h[4]=i(this.h[0],U,k),this.h[0]=_},h.prototype._digest=function(C){return C==="hex"?o.toHex32(this.h,"little"):o.split32(this.h,"little")};var g=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],v=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],y=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],b=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"./common":427,"./utils":437}],430:[function(s,n,c){c.sha1=s("./sha/1"),c.sha224=s("./sha/224"),c.sha256=s("./sha/256"),c.sha384=s("./sha/384"),c.sha512=s("./sha/512")},{"./sha/1":431,"./sha/224":432,"./sha/256":433,"./sha/384":434,"./sha/512":435}],431:[function(s,n,c){var o=s("../utils"),a=s("../common"),d=s("./common"),l=o.rotl32,i=o.sum32,u=o.sum32_5,f=d.ft_1,h=a.BlockHash,m=[1518500249,1859775393,2400959708,3395469782];function p(){if(!(this instanceof p))return new p;h.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}o.inherits(p,h),n.exports=p,p.blockSize=512,p.outSize=160,p.hmacStrength=80,p.padLength=64,p.prototype._update=function(x,g){for(var v=this.W,y=0;y<16;y++)v[y]=x[g+y];for(;y<v.length;y++)v[y]=l(v[y-3]^v[y-8]^v[y-14]^v[y-16],1);var b=this.h[0],C=this.h[1],T=this.h[2],M=this.h[3],U=this.h[4];for(y=0;y<v.length;y++){var L=~~(y/20),P=u(l(b,5),f(L,C,T,M),U,v[y],m[L]);U=M,M=T,T=l(C,30),C=b,b=P}this.h[0]=i(this.h[0],b),this.h[1]=i(this.h[1],C),this.h[2]=i(this.h[2],T),this.h[3]=i(this.h[3],M),this.h[4]=i(this.h[4],U)},p.prototype._digest=function(x){return x==="hex"?o.toHex32(this.h,"big"):o.split32(this.h,"big")}},{"../common":427,"../utils":437,"./common":436}],432:[function(s,n,c){var o=s("../utils"),a=s("./256");function d(){if(!(this instanceof d))return new d;a.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}o.inherits(d,a),n.exports=d,d.blockSize=512,d.outSize=224,d.hmacStrength=192,d.padLength=64,d.prototype._digest=function(l){return l==="hex"?o.toHex32(this.h.slice(0,7),"big"):o.split32(this.h.slice(0,7),"big")}},{"../utils":437,"./256":433}],433:[function(s,n,c){var o=s("../utils"),a=s("../common"),d=s("./common"),l=s("minimalistic-assert"),i=o.sum32,u=o.sum32_4,f=o.sum32_5,h=d.ch32,m=d.maj32,p=d.s0_256,x=d.s1_256,g=d.g0_256,v=d.g1_256,y=a.BlockHash,b=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function C(){if(!(this instanceof C))return new C;y.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=b,this.W=new Array(64)}o.inherits(C,y),n.exports=C,C.blockSize=512,C.outSize=256,C.hmacStrength=192,C.padLength=64,C.prototype._update=function(T,M){for(var U=this.W,L=0;L<16;L++)U[L]=T[M+L];for(;L<U.length;L++)U[L]=u(v(U[L-2]),U[L-7],g(U[L-15]),U[L-16]);var P=this.h[0],B=this.h[1],q=this.h[2],z=this.h[3],k=this.h[4],R=this.h[5],S=this.h[6],w=this.h[7];for(l(this.k.length===U.length),L=0;L<U.length;L++){var _=f(w,x(k),h(k,R,S),this.k[L],U[L]),j=i(p(P),m(P,B,q));w=S,S=R,R=k,k=i(z,_),z=q,q=B,B=P,P=i(_,j)}this.h[0]=i(this.h[0],P),this.h[1]=i(this.h[1],B),this.h[2]=i(this.h[2],q),this.h[3]=i(this.h[3],z),this.h[4]=i(this.h[4],k),this.h[5]=i(this.h[5],R),this.h[6]=i(this.h[6],S),this.h[7]=i(this.h[7],w)},C.prototype._digest=function(T){return T==="hex"?o.toHex32(this.h,"big"):o.split32(this.h,"big")}},{"../common":427,"../utils":437,"./common":436,"minimalistic-assert":453}],434:[function(s,n,c){var o=s("../utils"),a=s("./512");function d(){if(!(this instanceof d))return new d;a.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}o.inherits(d,a),n.exports=d,d.blockSize=1024,d.outSize=384,d.hmacStrength=192,d.padLength=128,d.prototype._digest=function(l){return l==="hex"?o.toHex32(this.h.slice(0,12),"big"):o.split32(this.h.slice(0,12),"big")}},{"../utils":437,"./512":435}],435:[function(s,n,c){var o=s("../utils"),a=s("../common"),d=s("minimalistic-assert"),l=o.rotr64_hi,i=o.rotr64_lo,u=o.shr64_hi,f=o.shr64_lo,h=o.sum64,m=o.sum64_hi,p=o.sum64_lo,x=o.sum64_4_hi,g=o.sum64_4_lo,v=o.sum64_5_hi,y=o.sum64_5_lo,b=a.BlockHash,C=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function T(){if(!(this instanceof T))return new T;b.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=C,this.W=new Array(160)}function M(j,N,E,I,D){var V=j&E^~j&D;return V<0&&(V+=4294967296),V}function U(j,N,E,I,D,V){var H=N&I^~N&V;return H<0&&(H+=4294967296),H}function L(j,N,E,I,D){var V=j&E^j&D^E&D;return V<0&&(V+=4294967296),V}function P(j,N,E,I,D,V){var H=N&I^N&V^I&V;return H<0&&(H+=4294967296),H}function B(j,N){var E=l(j,N,28)^l(N,j,2)^l(N,j,7);return E<0&&(E+=4294967296),E}function q(j,N){var E=i(j,N,28)^i(N,j,2)^i(N,j,7);return E<0&&(E+=4294967296),E}function z(j,N){var E=l(j,N,14)^l(j,N,18)^l(N,j,9);return E<0&&(E+=4294967296),E}function k(j,N){var E=i(j,N,14)^i(j,N,18)^i(N,j,9);return E<0&&(E+=4294967296),E}function R(j,N){var E=l(j,N,1)^l(j,N,8)^u(j,N,7);return E<0&&(E+=4294967296),E}function S(j,N){var E=i(j,N,1)^i(j,N,8)^f(j,N,7);return E<0&&(E+=4294967296),E}function w(j,N){var E=l(j,N,19)^l(N,j,29)^u(j,N,6);return E<0&&(E+=4294967296),E}function _(j,N){var E=i(j,N,19)^i(N,j,29)^f(j,N,6);return E<0&&(E+=4294967296),E}o.inherits(T,b),n.exports=T,T.blockSize=1024,T.outSize=512,T.hmacStrength=192,T.padLength=128,T.prototype._prepareBlock=function(j,N){for(var E=this.W,I=0;I<32;I++)E[I]=j[N+I];for(;I<E.length;I+=2){var D=w(E[I-4],E[I-3]),V=_(E[I-4],E[I-3]),H=E[I-14],G=E[I-13],$=R(E[I-30],E[I-29]),Y=S(E[I-30],E[I-29]),F=E[I-32],O=E[I-31];E[I]=x(D,V,H,G,$,Y,F,O),E[I+1]=g(D,V,H,G,$,Y,F,O)}},T.prototype._update=function(j,N){this._prepareBlock(j,N);var E=this.W,I=this.h[0],D=this.h[1],V=this.h[2],H=this.h[3],G=this.h[4],$=this.h[5],Y=this.h[6],F=this.h[7],O=this.h[8],W=this.h[9],K=this.h[10],Q=this.h[11],X=this.h[12],te=this.h[13],de=this.h[14],xe=this.h[15];d(this.k.length===E.length);for(var ne=0;ne<E.length;ne+=2){var ge=de,be=xe,Ie=z(O,W),Ce=k(O,W),Oe=M(O,W,K,Q,X),Ee=U(O,W,K,Q,X,te),pe=this.k[ne],Ae=this.k[ne+1],st=E[ne],qe=E[ne+1],ie=v(ge,be,Ie,Ce,Oe,Ee,pe,Ae,st,qe),ae=y(ge,be,Ie,Ce,Oe,Ee,pe,Ae,st,qe);ge=B(I,D),be=q(I,D),Ie=L(I,D,V,H,G),Ce=P(I,D,V,H,G,$);var we=m(ge,be,Ie,Ce),ve=p(ge,be,Ie,Ce);de=X,xe=te,X=K,te=Q,K=O,Q=W,O=m(Y,F,ie,ae),W=p(F,F,ie,ae),Y=G,F=$,G=V,$=H,V=I,H=D,I=m(ie,ae,we,ve),D=p(ie,ae,we,ve)}h(this.h,0,I,D),h(this.h,2,V,H),h(this.h,4,G,$),h(this.h,6,Y,F),h(this.h,8,O,W),h(this.h,10,K,Q),h(this.h,12,X,te),h(this.h,14,de,xe)},T.prototype._digest=function(j){return j==="hex"?o.toHex32(this.h,"big"):o.split32(this.h,"big")}},{"../common":427,"../utils":437,"minimalistic-assert":453}],436:[function(s,n,c){var o=s("../utils").rotr32;function a(i,u,f){return i&u^~i&f}function d(i,u,f){return i&u^i&f^u&f}function l(i,u,f){return i^u^f}c.ft_1=function(i,u,f,h){return i===0?a(u,f,h):i===1||i===3?l(u,f,h):i===2?d(u,f,h):void 0},c.ch32=a,c.maj32=d,c.p32=l,c.s0_256=function(i){return o(i,2)^o(i,13)^o(i,22)},c.s1_256=function(i){return o(i,6)^o(i,11)^o(i,25)},c.g0_256=function(i){return o(i,7)^o(i,18)^i>>>3},c.g1_256=function(i){return o(i,17)^o(i,19)^i>>>10}},{"../utils":437}],437:[function(s,n,c){var o=s("minimalistic-assert"),a=s("inherits");function d(f,h){return(64512&f.charCodeAt(h))==55296&&!(h<0||h+1>=f.length)&&(64512&f.charCodeAt(h+1))==56320}function l(f){return(f>>>24|f>>>8&65280|f<<8&16711680|(255&f)<<24)>>>0}function i(f){return f.length===1?"0"+f:f}function u(f){return f.length===7?"0"+f:f.length===6?"00"+f:f.length===5?"000"+f:f.length===4?"0000"+f:f.length===3?"00000"+f:f.length===2?"000000"+f:f.length===1?"0000000"+f:f}c.inherits=a,c.toArray=function(f,h){if(Array.isArray(f))return f.slice();if(!f)return[];var m=[];if(typeof f=="string")if(h){if(h==="hex")for((f=f.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(f="0"+f),x=0;x<f.length;x+=2)m.push(parseInt(f[x]+f[x+1],16))}else for(var p=0,x=0;x<f.length;x++){var g=f.charCodeAt(x);g<128?m[p++]=g:g<2048?(m[p++]=g>>6|192,m[p++]=63&g|128):d(f,x)?(g=65536+((1023&g)<<10)+(1023&f.charCodeAt(++x)),m[p++]=g>>18|240,m[p++]=g>>12&63|128,m[p++]=g>>6&63|128,m[p++]=63&g|128):(m[p++]=g>>12|224,m[p++]=g>>6&63|128,m[p++]=63&g|128)}else for(x=0;x<f.length;x++)m[x]=0|f[x];return m},c.toHex=function(f){for(var h="",m=0;m<f.length;m++)h+=i(f[m].toString(16));return h},c.htonl=l,c.toHex32=function(f,h){for(var m="",p=0;p<f.length;p++){var x=f[p];h==="little"&&(x=l(x)),m+=u(x.toString(16))}return m},c.zero2=i,c.zero8=u,c.join32=function(f,h,m,p){var x=m-h;o(x%4==0);for(var g=new Array(x/4),v=0,y=h;v<g.length;v++,y+=4){var b;b=p==="big"?f[y]<<24|f[y+1]<<16|f[y+2]<<8|f[y+3]:f[y+3]<<24|f[y+2]<<16|f[y+1]<<8|f[y],g[v]=b>>>0}return g},c.split32=function(f,h){for(var m=new Array(4*f.length),p=0,x=0;p<f.length;p++,x+=4){var g=f[p];h==="big"?(m[x]=g>>>24,m[x+1]=g>>>16&255,m[x+2]=g>>>8&255,m[x+3]=255&g):(m[x+3]=g>>>24,m[x+2]=g>>>16&255,m[x+1]=g>>>8&255,m[x]=255&g)}return m},c.rotr32=function(f,h){return f>>>h|f<<32-h},c.rotl32=function(f,h){return f<<h|f>>>32-h},c.sum32=function(f,h){return f+h>>>0},c.sum32_3=function(f,h,m){return f+h+m>>>0},c.sum32_4=function(f,h,m,p){return f+h+m+p>>>0},c.sum32_5=function(f,h,m,p,x){return f+h+m+p+x>>>0},c.sum64=function(f,h,m,p){var x=f[h],g=p+f[h+1]>>>0,v=(g<p?1:0)+m+x;f[h]=v>>>0,f[h+1]=g},c.sum64_hi=function(f,h,m,p){return(h+p>>>0<h?1:0)+f+m>>>0},c.sum64_lo=function(f,h,m,p){return h+p>>>0},c.sum64_4_hi=function(f,h,m,p,x,g,v,y){var b=0,C=h;return b+=(C=C+p>>>0)<h?1:0,b+=(C=C+g>>>0)<g?1:0,f+m+x+v+(b+=(C=C+y>>>0)<y?1:0)>>>0},c.sum64_4_lo=function(f,h,m,p,x,g,v,y){return h+p+g+y>>>0},c.sum64_5_hi=function(f,h,m,p,x,g,v,y,b,C){var T=0,M=h;return T+=(M=M+p>>>0)<h?1:0,T+=(M=M+g>>>0)<g?1:0,T+=(M=M+y>>>0)<y?1:0,f+m+x+v+b+(T+=(M=M+C>>>0)<C?1:0)>>>0},c.sum64_5_lo=function(f,h,m,p,x,g,v,y,b,C){return h+p+g+y+C>>>0},c.rotr64_hi=function(f,h,m){return(h<<32-m|f>>>m)>>>0},c.rotr64_lo=function(f,h,m){return(f<<32-m|h>>>m)>>>0},c.shr64_hi=function(f,h,m){return f>>>m},c.shr64_lo=function(f,h,m){return(f<<32-m|h>>>m)>>>0}},{inherits:440,"minimalistic-assert":453}],438:[function(s,n,c){var o=s("hash.js"),a=s("minimalistic-crypto-utils"),d=s("minimalistic-assert");function l(i){if(!(this instanceof l))return new l(i);this.hash=i.hash,this.predResist=!!i.predResist,this.outLen=this.hash.outSize,this.minEntropy=i.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var u=a.toArray(i.entropy,i.entropyEnc||"hex"),f=a.toArray(i.nonce,i.nonceEnc||"hex"),h=a.toArray(i.pers,i.persEnc||"hex");d(u.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(u,f,h)}n.exports=l,l.prototype._init=function(i,u,f){var h=i.concat(u).concat(f);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var m=0;m<this.V.length;m++)this.K[m]=0,this.V[m]=1;this._update(h),this._reseed=1,this.reseedInterval=281474976710656},l.prototype._hmac=function(){return new o.hmac(this.hash,this.K)},l.prototype._update=function(i){var u=this._hmac().update(this.V).update([0]);i&&(u=u.update(i)),this.K=u.digest(),this.V=this._hmac().update(this.V).digest(),i&&(this.K=this._hmac().update(this.V).update([1]).update(i).digest(),this.V=this._hmac().update(this.V).digest())},l.prototype.reseed=function(i,u,f,h){typeof u!="string"&&(h=f,f=u,u=null),i=a.toArray(i,u),f=a.toArray(f,h),d(i.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(i.concat(f||[])),this._reseed=1},l.prototype.generate=function(i,u,f,h){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof u!="string"&&(h=f,f=u,u=null),f&&(f=a.toArray(f,h||"hex"),this._update(f));for(var m=[];m.length<i;)this.V=this._hmac().update(this.V).digest(),m=m.concat(this.V);var p=m.slice(0,i);return this._update(f),this._reseed++,a.encode(p,u)}},{"hash.js":426,"minimalistic-assert":453,"minimalistic-crypto-utils":454}],439:[function(s,n,c){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */c.read=function(o,a,d,l,i){var u,f,h=8*i-l-1,m=(1<<h)-1,p=m>>1,x=-7,g=d?i-1:0,v=d?-1:1,y=o[a+g];for(g+=v,u=y&(1<<-x)-1,y>>=-x,x+=h;x>0;u=256*u+o[a+g],g+=v,x-=8);for(f=u&(1<<-x)-1,u>>=-x,x+=l;x>0;f=256*f+o[a+g],g+=v,x-=8);if(u===0)u=1-p;else{if(u===m)return f?NaN:1/0*(y?-1:1);f+=Math.pow(2,l),u-=p}return(y?-1:1)*f*Math.pow(2,u-l)},c.write=function(o,a,d,l,i,u){var f,h,m,p=8*u-i-1,x=(1<<p)-1,g=x>>1,v=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=l?0:u-1,b=l?1:-1,C=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(h=isNaN(a)?1:0,f=x):(f=Math.floor(Math.log(a)/Math.LN2),a*(m=Math.pow(2,-f))<1&&(f--,m*=2),(a+=f+g>=1?v/m:v*Math.pow(2,1-g))*m>=2&&(f++,m/=2),f+g>=x?(h=0,f=x):f+g>=1?(h=(a*m-1)*Math.pow(2,i),f+=g):(h=a*Math.pow(2,g-1)*Math.pow(2,i),f=0));i>=8;o[d+y]=255&h,y+=b,h/=256,i-=8);for(f=f<<i|h,p+=i;p>0;o[d+y]=255&f,y+=b,f/=256,p-=8);o[d+y-b]|=128*C}},{}],440:[function(s,n,c){typeof Object.create=="function"?n.exports=function(o,a){a&&(o.super_=a,o.prototype=Object.create(a.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}))}:n.exports=function(o,a){if(a){o.super_=a;var d=function(){};d.prototype=a.prototype,o.prototype=new d,o.prototype.constructor=o}}},{}],441:[function(s,n,c){(function(o,a,d,l,i,u,f,h){(function(){/*!

	JSZip v3.10.1 - A JavaScript class for generating and reading zip files
	<http://stuartk.com/jszip>

	(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
	Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

	JSZip uses the library pako released under the MIT license :
	https://github.com/nodeca/pako/blob/main/LICENSE
	*/(function(m){typeof c=="object"&&n!==void 0?n.exports=m():(typeof window<"u"?window:a!==void 0?a:typeof self<"u"?self:this).JSZip=m()})(function(){return function m(p,x,g){function v(C,T){if(!x[C]){if(!p[C]){var M=typeof s=="function"&&s;if(!T&&M)return M(C,!0);if(y)return y(C,!0);var U=new Error("Cannot find module '"+C+"'");throw U.code="MODULE_NOT_FOUND",U}var L=x[C]={exports:{}};p[C][0].call(L.exports,function(P){return v(p[C][1][P]||P)},L,L.exports,m,p,x,g)}return x[C].exports}for(var y=typeof s=="function"&&s,b=0;b<g.length;b++)v(g[b]);return v}({1:[function(m,p,x){var g=m("./utils"),v=m("./support"),y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";x.encode=function(b){for(var C,T,M,U,L,P,B,q=[],z=0,k=b.length,R=k,S=g.getTypeOf(b)!=="string";z<b.length;)R=k-z,M=S?(C=b[z++],T=z<k?b[z++]:0,z<k?b[z++]:0):(C=b.charCodeAt(z++),T=z<k?b.charCodeAt(z++):0,z<k?b.charCodeAt(z++):0),U=C>>2,L=(3&C)<<4|T>>4,P=1<R?(15&T)<<2|M>>6:64,B=2<R?63&M:64,q.push(y.charAt(U)+y.charAt(L)+y.charAt(P)+y.charAt(B));return q.join("")},x.decode=function(b){var C,T,M,U,L,P,B=0,q=0,z="data:";if(b.substr(0,z.length)===z)throw new Error("Invalid base64 input, it looks like a data url.");var k,R=3*(b=b.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(b.charAt(b.length-1)===y.charAt(64)&&R--,b.charAt(b.length-2)===y.charAt(64)&&R--,R%1!=0)throw new Error("Invalid base64 input, bad content length.");for(k=v.uint8array?new Uint8Array(0|R):new Array(0|R);B<b.length;)C=y.indexOf(b.charAt(B++))<<2|(U=y.indexOf(b.charAt(B++)))>>4,T=(15&U)<<4|(L=y.indexOf(b.charAt(B++)))>>2,M=(3&L)<<6|(P=y.indexOf(b.charAt(B++))),k[q++]=C,L!==64&&(k[q++]=T),P!==64&&(k[q++]=M);return k}},{"./support":30,"./utils":32}],2:[function(m,p,x){var g=m("./external"),v=m("./stream/DataWorker"),y=m("./stream/Crc32Probe"),b=m("./stream/DataLengthProbe");function C(T,M,U,L,P){this.compressedSize=T,this.uncompressedSize=M,this.crc32=U,this.compression=L,this.compressedContent=P}C.prototype={getContentWorker:function(){var T=new v(g.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new b("data_length")),M=this;return T.on("end",function(){if(this.streamInfo.data_length!==M.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),T},getCompressedWorker:function(){return new v(g.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},C.createWorkerFrom=function(T,M,U){return T.pipe(new y).pipe(new b("uncompressedSize")).pipe(M.compressWorker(U)).pipe(new b("compressedSize")).withStreamInfo("compression",M)},p.exports=C},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(m,p,x){var g=m("./stream/GenericWorker");x.STORE={magic:"\0\0",compressWorker:function(){return new g("STORE compression")},uncompressWorker:function(){return new g("STORE decompression")}},x.DEFLATE=m("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(m,p,x){var g=m("./utils"),v=function(){for(var y,b=[],C=0;C<256;C++){y=C;for(var T=0;T<8;T++)y=1&y?3988292384^y>>>1:y>>>1;b[C]=y}return b}();p.exports=function(y,b){return y!==void 0&&y.length?g.getTypeOf(y)!=="string"?function(C,T,M,U){var L=v,P=0+M;C^=-1;for(var B=0;B<P;B++)C=C>>>8^L[255&(C^T[B])];return-1^C}(0|b,y,y.length):function(C,T,M,U){var L=v,P=0+M;C^=-1;for(var B=0;B<P;B++)C=C>>>8^L[255&(C^T.charCodeAt(B))];return-1^C}(0|b,y,y.length):0}},{"./utils":32}],5:[function(m,p,x){x.base64=!1,x.binary=!1,x.dir=!1,x.createFolders=!0,x.date=null,x.compression=null,x.compressionOptions=null,x.comment=null,x.unixPermissions=null,x.dosPermissions=null},{}],6:[function(m,p,x){var g;g=typeof Promise<"u"?Promise:m("lie"),p.exports={Promise:g}},{lie:37}],7:[function(m,p,x){var g=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",v=m("pako"),y=m("./utils"),b=m("./stream/GenericWorker"),C=g?"uint8array":"array";function T(M,U){b.call(this,"FlateWorker/"+M),this._pako=null,this._pakoAction=M,this._pakoOptions=U,this.meta={}}x.magic="\b\0",y.inherits(T,b),T.prototype.processChunk=function(M){this.meta=M.meta,this._pako===null&&this._createPako(),this._pako.push(y.transformTo(C,M.data),!1)},T.prototype.flush=function(){b.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},T.prototype.cleanUp=function(){b.prototype.cleanUp.call(this),this._pako=null},T.prototype._createPako=function(){this._pako=new v[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var M=this;this._pako.onData=function(U){M.push({data:U,meta:M.meta})}},x.compressWorker=function(M){return new T("Deflate",M)},x.uncompressWorker=function(){return new T("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(m,p,x){function g(L,P){var B,q="";for(B=0;B<P;B++)q+=String.fromCharCode(255&L),L>>>=8;return q}function v(L,P,B,q,z,k){var R,S,w=L.file,_=L.compression,j=k!==C.utf8encode,N=y.transformTo("string",k(w.name)),E=y.transformTo("string",C.utf8encode(w.name)),I=w.comment,D=y.transformTo("string",k(I)),V=y.transformTo("string",C.utf8encode(I)),H=E.length!==w.name.length,G=V.length!==I.length,$="",Y="",F="",O=w.dir,W=w.date,K={crc32:0,compressedSize:0,uncompressedSize:0};P&&!B||(K.crc32=L.crc32,K.compressedSize=L.compressedSize,K.uncompressedSize=L.uncompressedSize);var Q=0;P&&(Q|=8),j||!H&&!G||(Q|=2048);var X=0,te=0;O&&(X|=16),z==="UNIX"?(te=798,X|=function(xe,ne){var ge=xe;return xe||(ge=ne?16893:33204),(65535&ge)<<16}(w.unixPermissions,O)):(te=20,X|=function(xe){return 63&(xe||0)}(w.dosPermissions)),R=W.getUTCHours(),R<<=6,R|=W.getUTCMinutes(),R<<=5,R|=W.getUTCSeconds()/2,S=W.getUTCFullYear()-1980,S<<=4,S|=W.getUTCMonth()+1,S<<=5,S|=W.getUTCDate(),H&&(Y=g(1,1)+g(T(N),4)+E,$+="up"+g(Y.length,2)+Y),G&&(F=g(1,1)+g(T(D),4)+V,$+="uc"+g(F.length,2)+F);var de="";return de+=`
\0`,de+=g(Q,2),de+=_.magic,de+=g(R,2),de+=g(S,2),de+=g(K.crc32,4),de+=g(K.compressedSize,4),de+=g(K.uncompressedSize,4),de+=g(N.length,2),de+=g($.length,2),{fileRecord:M.LOCAL_FILE_HEADER+de+N+$,dirRecord:M.CENTRAL_FILE_HEADER+g(te,2)+de+g(D.length,2)+"\0\0\0\0"+g(X,4)+g(q,4)+N+$+D}}var y=m("../utils"),b=m("../stream/GenericWorker"),C=m("../utf8"),T=m("../crc32"),M=m("../signature");function U(L,P,B,q){b.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=P,this.zipPlatform=B,this.encodeFileName=q,this.streamFiles=L,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}y.inherits(U,b),U.prototype.push=function(L){var P=L.meta.percent||0,B=this.entriesCount,q=this._sources.length;this.accumulate?this.contentBuffer.push(L):(this.bytesWritten+=L.data.length,b.prototype.push.call(this,{data:L.data,meta:{currentFile:this.currentFile,percent:B?(P+100*(B-q-1))/B:100}}))},U.prototype.openedSource=function(L){this.currentSourceOffset=this.bytesWritten,this.currentFile=L.file.name;var P=this.streamFiles&&!L.file.dir;if(P){var B=v(L,P,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:B.fileRecord,meta:{percent:0}})}else this.accumulate=!0},U.prototype.closedSource=function(L){this.accumulate=!1;var P=this.streamFiles&&!L.file.dir,B=v(L,P,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(B.dirRecord),P)this.push({data:function(q){return M.DATA_DESCRIPTOR+g(q.crc32,4)+g(q.compressedSize,4)+g(q.uncompressedSize,4)}(L),meta:{percent:100}});else for(this.push({data:B.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},U.prototype.flush=function(){for(var L=this.bytesWritten,P=0;P<this.dirRecords.length;P++)this.push({data:this.dirRecords[P],meta:{percent:100}});var B=this.bytesWritten-L,q=function(z,k,R,S,w){var _=y.transformTo("string",w(S));return M.CENTRAL_DIRECTORY_END+"\0\0\0\0"+g(z,2)+g(z,2)+g(k,4)+g(R,4)+g(_.length,2)+_}(this.dirRecords.length,B,L,this.zipComment,this.encodeFileName);this.push({data:q,meta:{percent:100}})},U.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},U.prototype.registerPrevious=function(L){this._sources.push(L);var P=this;return L.on("data",function(B){P.processChunk(B)}),L.on("end",function(){P.closedSource(P.previous.streamInfo),P._sources.length?P.prepareNextSource():P.end()}),L.on("error",function(B){P.error(B)}),this},U.prototype.resume=function(){return!!b.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},U.prototype.error=function(L){var P=this._sources;if(!b.prototype.error.call(this,L))return!1;for(var B=0;B<P.length;B++)try{P[B].error(L)}catch{}return!0},U.prototype.lock=function(){b.prototype.lock.call(this);for(var L=this._sources,P=0;P<L.length;P++)L[P].lock()},p.exports=U},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(m,p,x){var g=m("../compressions"),v=m("./ZipFileWorker");x.generateWorker=function(y,b,C){var T=new v(b.streamFiles,C,b.platform,b.encodeFileName),M=0;try{y.forEach(function(U,L){M++;var P=function(k,R){var S=k||R,w=g[S];if(!w)throw new Error(S+" is not a valid compression method !");return w}(L.options.compression,b.compression),B=L.options.compressionOptions||b.compressionOptions||{},q=L.dir,z=L.date;L._compressWorker(P,B).withStreamInfo("file",{name:U,dir:q,date:z,comment:L.comment||"",unixPermissions:L.unixPermissions,dosPermissions:L.dosPermissions}).pipe(T)}),T.entriesCount=M}catch(U){T.error(U)}return T}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(m,p,x){function g(){if(!(this instanceof g))return new g;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var v=new g;for(var y in this)typeof this[y]!="function"&&(v[y]=this[y]);return v}}(g.prototype=m("./object")).loadAsync=m("./load"),g.support=m("./support"),g.defaults=m("./defaults"),g.version="3.10.1",g.loadAsync=function(v,y){return new g().loadAsync(v,y)},g.external=m("./external"),p.exports=g},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(m,p,x){var g=m("./utils"),v=m("./external"),y=m("./utf8"),b=m("./zipEntries"),C=m("./stream/Crc32Probe"),T=m("./nodejsUtils");function M(U){return new v.Promise(function(L,P){var B=U.decompressed.getContentWorker().pipe(new C);B.on("error",function(q){P(q)}).on("end",function(){B.streamInfo.crc32!==U.decompressed.crc32?P(new Error("Corrupted zip : CRC32 mismatch")):L()}).resume()})}p.exports=function(U,L){var P=this;return L=g.extend(L||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:y.utf8decode}),T.isNode&&T.isStream(U)?v.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):g.prepareContent("the loaded zip file",U,!0,L.optimizedBinaryString,L.base64).then(function(B){var q=new b(L);return q.load(B),q}).then(function(B){var q=[v.Promise.resolve(B)],z=B.files;if(L.checkCRC32)for(var k=0;k<z.length;k++)q.push(M(z[k]));return v.Promise.all(q)}).then(function(B){for(var q=B.shift(),z=q.files,k=0;k<z.length;k++){var R=z[k],S=R.fileNameStr,w=g.resolve(R.fileNameStr);P.file(w,R.decompressed,{binary:!0,optimizedBinaryString:!0,date:R.date,dir:R.dir,comment:R.fileCommentStr.length?R.fileCommentStr:null,unixPermissions:R.unixPermissions,dosPermissions:R.dosPermissions,createFolders:L.createFolders}),R.dir||(P.file(w).unsafeOriginalName=S)}return q.zipComment.length&&(P.comment=q.zipComment),P})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(m,p,x){var g=m("../utils"),v=m("../stream/GenericWorker");function y(b,C){v.call(this,"Nodejs stream input adapter for "+b),this._upstreamEnded=!1,this._bindStream(C)}g.inherits(y,v),y.prototype._bindStream=function(b){var C=this;(this._stream=b).pause(),b.on("data",function(T){C.push({data:T,meta:{percent:0}})}).on("error",function(T){C.isPaused?this.generatedError=T:C.error(T)}).on("end",function(){C.isPaused?C._upstreamEnded=!0:C.end()})},y.prototype.pause=function(){return!!v.prototype.pause.call(this)&&(this._stream.pause(),!0)},y.prototype.resume=function(){return!!v.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},p.exports=y},{"../stream/GenericWorker":28,"../utils":32}],13:[function(m,p,x){var g=m("readable-stream").Readable;function v(y,b,C){g.call(this,b),this._helper=y;var T=this;y.on("data",function(M,U){T.push(M)||T._helper.pause(),C&&C(U)}).on("error",function(M){T.emit("error",M)}).on("end",function(){T.push(null)})}m("../utils").inherits(v,g),v.prototype._read=function(){this._helper.resume()},p.exports=v},{"../utils":32,"readable-stream":16}],14:[function(m,p,x){p.exports={isNode:d!==void 0,newBufferFrom:function(g,v){if(d.from&&d.from!==Uint8Array.from)return d.from(g,v);if(typeof g=="number")throw new Error('The "data" argument must not be a number');return new d(g,v)},allocBuffer:function(g){if(d.alloc)return d.alloc(g);var v=new d(g);return v.fill(0),v},isBuffer:function(g){return d.isBuffer(g)},isStream:function(g){return g&&typeof g.on=="function"&&typeof g.pause=="function"&&typeof g.resume=="function"}}},{}],15:[function(m,p,x){function g(w,_,j){var N,E=y.getTypeOf(_),I=y.extend(j||{},T);I.date=I.date||new Date,I.compression!==null&&(I.compression=I.compression.toUpperCase()),typeof I.unixPermissions=="string"&&(I.unixPermissions=parseInt(I.unixPermissions,8)),I.unixPermissions&&16384&I.unixPermissions&&(I.dir=!0),I.dosPermissions&&16&I.dosPermissions&&(I.dir=!0),I.dir&&(w=z(w)),I.createFolders&&(N=q(w))&&k.call(this,N,!0);var D=E==="string"&&I.binary===!1&&I.base64===!1;j&&j.binary!==void 0||(I.binary=!D),(_ instanceof M&&_.uncompressedSize===0||I.dir||!_||_.length===0)&&(I.base64=!1,I.binary=!0,_="",I.compression="STORE",E="string");var V;V=_ instanceof M||_ instanceof b?_:P.isNode&&P.isStream(_)?new B(w,_):y.prepareContent(w,_,I.binary,I.optimizedBinaryString,I.base64);var H=new U(w,V,I);this.files[w]=H}var v=m("./utf8"),y=m("./utils"),b=m("./stream/GenericWorker"),C=m("./stream/StreamHelper"),T=m("./defaults"),M=m("./compressedObject"),U=m("./zipObject"),L=m("./generate"),P=m("./nodejsUtils"),B=m("./nodejs/NodejsStreamInputAdapter"),q=function(w){w.slice(-1)==="/"&&(w=w.substring(0,w.length-1));var _=w.lastIndexOf("/");return 0<_?w.substring(0,_):""},z=function(w){return w.slice(-1)!=="/"&&(w+="/"),w},k=function(w,_){return _=_!==void 0?_:T.createFolders,w=z(w),this.files[w]||g.call(this,w,null,{dir:!0,createFolders:_}),this.files[w]};function R(w){return Object.prototype.toString.call(w)==="[object RegExp]"}var S={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(w){var _,j,N;for(_ in this.files)N=this.files[_],(j=_.slice(this.root.length,_.length))&&_.slice(0,this.root.length)===this.root&&w(j,N)},filter:function(w){var _=[];return this.forEach(function(j,N){w(j,N)&&_.push(N)}),_},file:function(w,_,j){if(arguments.length!==1)return w=this.root+w,g.call(this,w,_,j),this;if(R(w)){var N=w;return this.filter(function(I,D){return!D.dir&&N.test(I)})}var E=this.files[this.root+w];return E&&!E.dir?E:null},folder:function(w){if(!w)return this;if(R(w))return this.filter(function(E,I){return I.dir&&w.test(E)});var _=this.root+w,j=k.call(this,_),N=this.clone();return N.root=j.name,N},remove:function(w){w=this.root+w;var _=this.files[w];if(_||(w.slice(-1)!=="/"&&(w+="/"),_=this.files[w]),_&&!_.dir)delete this.files[w];else for(var j=this.filter(function(E,I){return I.name.slice(0,w.length)===w}),N=0;N<j.length;N++)delete this.files[j[N].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(w){var _,j={};try{if((j=y.extend(w||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:v.utf8encode})).type=j.type.toLowerCase(),j.compression=j.compression.toUpperCase(),j.type==="binarystring"&&(j.type="string"),!j.type)throw new Error("No output type specified.");y.checkSupport(j.type),j.platform!=="darwin"&&j.platform!=="freebsd"&&j.platform!=="linux"&&j.platform!=="sunos"||(j.platform="UNIX"),j.platform==="win32"&&(j.platform="DOS");var N=j.comment||this.comment||"";_=L.generateWorker(this,j,N)}catch(E){(_=new b("error")).error(E)}return new C(_,j.type||"string",j.mimeType)},generateAsync:function(w,_){return this.generateInternalStream(w).accumulate(_)},generateNodeStream:function(w,_){return(w=w||{}).type||(w.type="nodebuffer"),this.generateInternalStream(w).toNodejsStream(_)}};p.exports=S},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(m,p,x){p.exports=m("stream")},{stream:void 0}],17:[function(m,p,x){var g=m("./DataReader");function v(y){g.call(this,y);for(var b=0;b<this.data.length;b++)y[b]=255&y[b]}m("../utils").inherits(v,g),v.prototype.byteAt=function(y){return this.data[this.zero+y]},v.prototype.lastIndexOfSignature=function(y){for(var b=y.charCodeAt(0),C=y.charCodeAt(1),T=y.charCodeAt(2),M=y.charCodeAt(3),U=this.length-4;0<=U;--U)if(this.data[U]===b&&this.data[U+1]===C&&this.data[U+2]===T&&this.data[U+3]===M)return U-this.zero;return-1},v.prototype.readAndCheckSignature=function(y){var b=y.charCodeAt(0),C=y.charCodeAt(1),T=y.charCodeAt(2),M=y.charCodeAt(3),U=this.readData(4);return b===U[0]&&C===U[1]&&T===U[2]&&M===U[3]},v.prototype.readData=function(y){if(this.checkOffset(y),y===0)return[];var b=this.data.slice(this.zero+this.index,this.zero+this.index+y);return this.index+=y,b},p.exports=v},{"../utils":32,"./DataReader":18}],18:[function(m,p,x){var g=m("../utils");function v(y){this.data=y,this.length=y.length,this.index=0,this.zero=0}v.prototype={checkOffset:function(y){this.checkIndex(this.index+y)},checkIndex:function(y){if(this.length<this.zero+y||y<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+y+"). Corrupted zip ?")},setIndex:function(y){this.checkIndex(y),this.index=y},skip:function(y){this.setIndex(this.index+y)},byteAt:function(){},readInt:function(y){var b,C=0;for(this.checkOffset(y),b=this.index+y-1;b>=this.index;b--)C=(C<<8)+this.byteAt(b);return this.index+=y,C},readString:function(y){return g.transformTo("string",this.readData(y))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var y=this.readInt(4);return new Date(Date.UTC(1980+(y>>25&127),(y>>21&15)-1,y>>16&31,y>>11&31,y>>5&63,(31&y)<<1))}},p.exports=v},{"../utils":32}],19:[function(m,p,x){var g=m("./Uint8ArrayReader");function v(y){g.call(this,y)}m("../utils").inherits(v,g),v.prototype.readData=function(y){this.checkOffset(y);var b=this.data.slice(this.zero+this.index,this.zero+this.index+y);return this.index+=y,b},p.exports=v},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(m,p,x){var g=m("./DataReader");function v(y){g.call(this,y)}m("../utils").inherits(v,g),v.prototype.byteAt=function(y){return this.data.charCodeAt(this.zero+y)},v.prototype.lastIndexOfSignature=function(y){return this.data.lastIndexOf(y)-this.zero},v.prototype.readAndCheckSignature=function(y){return y===this.readData(4)},v.prototype.readData=function(y){this.checkOffset(y);var b=this.data.slice(this.zero+this.index,this.zero+this.index+y);return this.index+=y,b},p.exports=v},{"../utils":32,"./DataReader":18}],21:[function(m,p,x){var g=m("./ArrayReader");function v(y){g.call(this,y)}m("../utils").inherits(v,g),v.prototype.readData=function(y){if(this.checkOffset(y),y===0)return new Uint8Array(0);var b=this.data.subarray(this.zero+this.index,this.zero+this.index+y);return this.index+=y,b},p.exports=v},{"../utils":32,"./ArrayReader":17}],22:[function(m,p,x){var g=m("../utils"),v=m("../support"),y=m("./ArrayReader"),b=m("./StringReader"),C=m("./NodeBufferReader"),T=m("./Uint8ArrayReader");p.exports=function(M){var U=g.getTypeOf(M);return g.checkSupport(U),U!=="string"||v.uint8array?U==="nodebuffer"?new C(M):v.uint8array?new T(g.transformTo("uint8array",M)):new y(g.transformTo("array",M)):new b(M)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(m,p,x){x.LOCAL_FILE_HEADER="PK",x.CENTRAL_FILE_HEADER="PK",x.CENTRAL_DIRECTORY_END="PK",x.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",x.ZIP64_CENTRAL_DIRECTORY_END="PK",x.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(m,p,x){var g=m("./GenericWorker"),v=m("../utils");function y(b){g.call(this,"ConvertWorker to "+b),this.destType=b}v.inherits(y,g),y.prototype.processChunk=function(b){this.push({data:v.transformTo(this.destType,b.data),meta:b.meta})},p.exports=y},{"../utils":32,"./GenericWorker":28}],25:[function(m,p,x){var g=m("./GenericWorker"),v=m("../crc32");function y(){g.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}m("../utils").inherits(y,g),y.prototype.processChunk=function(b){this.streamInfo.crc32=v(b.data,this.streamInfo.crc32||0),this.push(b)},p.exports=y},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(m,p,x){var g=m("../utils"),v=m("./GenericWorker");function y(b){v.call(this,"DataLengthProbe for "+b),this.propName=b,this.withStreamInfo(b,0)}g.inherits(y,v),y.prototype.processChunk=function(b){if(b){var C=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=C+b.data.length}v.prototype.processChunk.call(this,b)},p.exports=y},{"../utils":32,"./GenericWorker":28}],27:[function(m,p,x){var g=m("../utils"),v=m("./GenericWorker");function y(b){v.call(this,"DataWorker");var C=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,b.then(function(T){C.dataIsReady=!0,C.data=T,C.max=T&&T.length||0,C.type=g.getTypeOf(T),C.isPaused||C._tickAndRepeat()},function(T){C.error(T)})}g.inherits(y,v),y.prototype.cleanUp=function(){v.prototype.cleanUp.call(this),this.data=null},y.prototype.resume=function(){return!!v.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,g.delay(this._tickAndRepeat,[],this)),!0)},y.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(g.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},y.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var b=null,C=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":b=this.data.substring(this.index,C);break;case"uint8array":b=this.data.subarray(this.index,C);break;case"array":case"nodebuffer":b=this.data.slice(this.index,C)}return this.index=C,this.push({data:b,meta:{percent:this.max?this.index/this.max*100:0}})},p.exports=y},{"../utils":32,"./GenericWorker":28}],28:[function(m,p,x){function g(v){this.name=v||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}g.prototype={push:function(v){this.emit("data",v)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(v){this.emit("error",v)}return!0},error:function(v){return!this.isFinished&&(this.isPaused?this.generatedError=v:(this.isFinished=!0,this.emit("error",v),this.previous&&this.previous.error(v),this.cleanUp()),!0)},on:function(v,y){return this._listeners[v].push(y),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(v,y){if(this._listeners[v])for(var b=0;b<this._listeners[v].length;b++)this._listeners[v][b].call(this,y)},pipe:function(v){return v.registerPrevious(this)},registerPrevious:function(v){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=v.streamInfo,this.mergeStreamInfo(),this.previous=v;var y=this;return v.on("data",function(b){y.processChunk(b)}),v.on("end",function(){y.end()}),v.on("error",function(b){y.error(b)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var v=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),v=!0),this.previous&&this.previous.resume(),!v},flush:function(){},processChunk:function(v){this.push(v)},withStreamInfo:function(v,y){return this.extraStreamInfo[v]=y,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var v in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,v)&&(this.streamInfo[v]=this.extraStreamInfo[v])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var v="Worker "+this.name;return this.previous?this.previous+" -> "+v:v}},p.exports=g},{}],29:[function(m,p,x){var g=m("../utils"),v=m("./ConvertWorker"),y=m("./GenericWorker"),b=m("../base64"),C=m("../support"),T=m("../external"),M=null;if(C.nodestream)try{M=m("../nodejs/NodejsStreamOutputAdapter")}catch{}function U(L,P,B){var q=P;switch(P){case"blob":case"arraybuffer":q="uint8array";break;case"base64":q="string"}try{this._internalType=q,this._outputType=P,this._mimeType=B,g.checkSupport(q),this._worker=L.pipe(new v(q)),L.lock()}catch(z){this._worker=new y("error"),this._worker.error(z)}}U.prototype={accumulate:function(L){return function(P,B){return new T.Promise(function(q,z){var k=[],R=P._internalType,S=P._outputType,w=P._mimeType;P.on("data",function(_,j){k.push(_),B&&B(j)}).on("error",function(_){k=[],z(_)}).on("end",function(){try{var _=function(j,N,E){switch(j){case"blob":return g.newBlob(g.transformTo("arraybuffer",N),E);case"base64":return b.encode(N);default:return g.transformTo(j,N)}}(S,function(j,N){var E,I=0,D=null,V=0;for(E=0;E<N.length;E++)V+=N[E].length;switch(j){case"string":return N.join("");case"array":return Array.prototype.concat.apply([],N);case"uint8array":for(D=new Uint8Array(V),E=0;E<N.length;E++)D.set(N[E],I),I+=N[E].length;return D;case"nodebuffer":return d.concat(N);default:throw new Error("concat : unsupported type '"+j+"'")}}(R,k),w);q(_)}catch(j){z(j)}k=[]}).resume()})}(this,L)},on:function(L,P){var B=this;return L==="data"?this._worker.on(L,function(q){P.call(B,q.data,q.meta)}):this._worker.on(L,function(){g.delay(P,arguments,B)}),this},resume:function(){return g.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(L){if(g.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new M(this,{objectMode:this._outputType!=="nodebuffer"},L)}},p.exports=U},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(m,p,x){if(x.base64=!0,x.array=!0,x.string=!0,x.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",x.nodebuffer=d!==void 0,x.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")x.blob=!1;else{var g=new ArrayBuffer(0);try{x.blob=new Blob([g],{type:"application/zip"}).size===0}catch{try{var v=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);v.append(g),x.blob=v.getBlob("application/zip").size===0}catch{x.blob=!1}}}try{x.nodestream=!!m("readable-stream").Readable}catch{x.nodestream=!1}},{"readable-stream":16}],31:[function(m,p,x){for(var g=m("./utils"),v=m("./support"),y=m("./nodejsUtils"),b=m("./stream/GenericWorker"),C=new Array(256),T=0;T<256;T++)C[T]=252<=T?6:248<=T?5:240<=T?4:224<=T?3:192<=T?2:1;function M(){b.call(this,"utf-8 decode"),this.leftOver=null}function U(){b.call(this,"utf-8 encode")}C[254]=C[254]=1,x.utf8encode=function(L){return v.nodebuffer?y.newBufferFrom(L,"utf-8"):function(P){var B,q,z,k,R,S=P.length,w=0;for(k=0;k<S;k++)(64512&(q=P.charCodeAt(k)))==55296&&k+1<S&&(64512&(z=P.charCodeAt(k+1)))==56320&&(q=65536+(q-55296<<10)+(z-56320),k++),w+=q<128?1:q<2048?2:q<65536?3:4;for(B=v.uint8array?new Uint8Array(w):new Array(w),k=R=0;R<w;k++)(64512&(q=P.charCodeAt(k)))==55296&&k+1<S&&(64512&(z=P.charCodeAt(k+1)))==56320&&(q=65536+(q-55296<<10)+(z-56320),k++),q<128?B[R++]=q:(q<2048?B[R++]=192|q>>>6:(q<65536?B[R++]=224|q>>>12:(B[R++]=240|q>>>18,B[R++]=128|q>>>12&63),B[R++]=128|q>>>6&63),B[R++]=128|63&q);return B}(L)},x.utf8decode=function(L){return v.nodebuffer?g.transformTo("nodebuffer",L).toString("utf-8"):function(P){var B,q,z,k,R=P.length,S=new Array(2*R);for(B=q=0;B<R;)if((z=P[B++])<128)S[q++]=z;else if(4<(k=C[z]))S[q++]=65533,B+=k-1;else{for(z&=k===2?31:k===3?15:7;1<k&&B<R;)z=z<<6|63&P[B++],k--;1<k?S[q++]=65533:z<65536?S[q++]=z:(z-=65536,S[q++]=55296|z>>10&1023,S[q++]=56320|1023&z)}return S.length!==q&&(S.subarray?S=S.subarray(0,q):S.length=q),g.applyFromCharCode(S)}(L=g.transformTo(v.uint8array?"uint8array":"array",L))},g.inherits(M,b),M.prototype.processChunk=function(L){var P=g.transformTo(v.uint8array?"uint8array":"array",L.data);if(this.leftOver&&this.leftOver.length){if(v.uint8array){var B=P;(P=new Uint8Array(B.length+this.leftOver.length)).set(this.leftOver,0),P.set(B,this.leftOver.length)}else P=this.leftOver.concat(P);this.leftOver=null}var q=function(k,R){var S;for((R=R||k.length)>k.length&&(R=k.length),S=R-1;0<=S&&(192&k[S])==128;)S--;return S<0||S===0?R:S+C[k[S]]>R?S:R}(P),z=P;q!==P.length&&(v.uint8array?(z=P.subarray(0,q),this.leftOver=P.subarray(q,P.length)):(z=P.slice(0,q),this.leftOver=P.slice(q,P.length))),this.push({data:x.utf8decode(z),meta:L.meta})},M.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:x.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},x.Utf8DecodeWorker=M,g.inherits(U,b),U.prototype.processChunk=function(L){this.push({data:x.utf8encode(L.data),meta:L.meta})},x.Utf8EncodeWorker=U},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(m,p,x){var g=m("./support"),v=m("./base64"),y=m("./nodejsUtils"),b=m("./external");function C(B){return B}function T(B,q){for(var z=0;z<B.length;++z)q[z]=255&B.charCodeAt(z);return q}m("setimmediate"),x.newBlob=function(B,q){x.checkSupport("blob");try{return new Blob([B],{type:q})}catch{try{var z=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return z.append(B),z.getBlob(q)}catch{throw new Error("Bug : can't construct the Blob.")}}};var M={stringifyByChunk:function(B,q,z){var k=[],R=0,S=B.length;if(S<=z)return String.fromCharCode.apply(null,B);for(;R<S;)q==="array"||q==="nodebuffer"?k.push(String.fromCharCode.apply(null,B.slice(R,Math.min(R+z,S)))):k.push(String.fromCharCode.apply(null,B.subarray(R,Math.min(R+z,S)))),R+=z;return k.join("")},stringifyByChar:function(B){for(var q="",z=0;z<B.length;z++)q+=String.fromCharCode(B[z]);return q},applyCanBeUsed:{uint8array:function(){try{return g.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return g.nodebuffer&&String.fromCharCode.apply(null,y.allocBuffer(1)).length===1}catch{return!1}}()}};function U(B){var q=65536,z=x.getTypeOf(B),k=!0;if(z==="uint8array"?k=M.applyCanBeUsed.uint8array:z==="nodebuffer"&&(k=M.applyCanBeUsed.nodebuffer),k)for(;1<q;)try{return M.stringifyByChunk(B,z,q)}catch{q=Math.floor(q/2)}return M.stringifyByChar(B)}function L(B,q){for(var z=0;z<B.length;z++)q[z]=B[z];return q}x.applyFromCharCode=U;var P={};P.string={string:C,array:function(B){return T(B,new Array(B.length))},arraybuffer:function(B){return P.string.uint8array(B).buffer},uint8array:function(B){return T(B,new Uint8Array(B.length))},nodebuffer:function(B){return T(B,y.allocBuffer(B.length))}},P.array={string:U,array:C,arraybuffer:function(B){return new Uint8Array(B).buffer},uint8array:function(B){return new Uint8Array(B)},nodebuffer:function(B){return y.newBufferFrom(B)}},P.arraybuffer={string:function(B){return U(new Uint8Array(B))},array:function(B){return L(new Uint8Array(B),new Array(B.byteLength))},arraybuffer:C,uint8array:function(B){return new Uint8Array(B)},nodebuffer:function(B){return y.newBufferFrom(new Uint8Array(B))}},P.uint8array={string:U,array:function(B){return L(B,new Array(B.length))},arraybuffer:function(B){return B.buffer},uint8array:C,nodebuffer:function(B){return y.newBufferFrom(B)}},P.nodebuffer={string:U,array:function(B){return L(B,new Array(B.length))},arraybuffer:function(B){return P.nodebuffer.uint8array(B).buffer},uint8array:function(B){return L(B,new Uint8Array(B.length))},nodebuffer:C},x.transformTo=function(B,q){if(q=q||"",!B)return q;x.checkSupport(B);var z=x.getTypeOf(q);return P[z][B](q)},x.resolve=function(B){for(var q=B.split("/"),z=[],k=0;k<q.length;k++){var R=q[k];R==="."||R===""&&k!==0&&k!==q.length-1||(R===".."?z.pop():z.push(R))}return z.join("/")},x.getTypeOf=function(B){return typeof B=="string"?"string":Object.prototype.toString.call(B)==="[object Array]"?"array":g.nodebuffer&&y.isBuffer(B)?"nodebuffer":g.uint8array&&B instanceof Uint8Array?"uint8array":g.arraybuffer&&B instanceof ArrayBuffer?"arraybuffer":void 0},x.checkSupport=function(B){if(!g[B.toLowerCase()])throw new Error(B+" is not supported by this platform")},x.MAX_VALUE_16BITS=65535,x.MAX_VALUE_32BITS=-1,x.pretty=function(B){var q,z,k="";for(z=0;z<(B||"").length;z++)k+="\\x"+((q=B.charCodeAt(z))<16?"0":"")+q.toString(16).toUpperCase();return k},x.delay=function(B,q,z){h(function(){B.apply(z||null,q||[])})},x.inherits=function(B,q){function z(){}z.prototype=q.prototype,B.prototype=new z},x.extend=function(){var B,q,z={};for(B=0;B<arguments.length;B++)for(q in arguments[B])Object.prototype.hasOwnProperty.call(arguments[B],q)&&z[q]===void 0&&(z[q]=arguments[B][q]);return z},x.prepareContent=function(B,q,z,k,R){return b.Promise.resolve(q).then(function(S){return g.blob&&(S instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(S))!==-1)&&typeof FileReader<"u"?new b.Promise(function(w,_){var j=new FileReader;j.onload=function(N){w(N.target.result)},j.onerror=function(N){_(N.target.error)},j.readAsArrayBuffer(S)}):S}).then(function(S){var w=x.getTypeOf(S);return w?(w==="arraybuffer"?S=x.transformTo("uint8array",S):w==="string"&&(R?S=v.decode(S):z&&k!==!0&&(S=function(_){return T(_,g.uint8array?new Uint8Array(_.length):new Array(_.length))}(S))),S):b.Promise.reject(new Error("Can't read the data of '"+B+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(m,p,x){var g=m("./reader/readerFor"),v=m("./utils"),y=m("./signature"),b=m("./zipEntry"),C=m("./support");function T(M){this.files=[],this.loadOptions=M}T.prototype={checkSignature:function(M){if(!this.reader.readAndCheckSignature(M)){this.reader.index-=4;var U=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+v.pretty(U)+", expected "+v.pretty(M)+")")}},isSignature:function(M,U){var L=this.reader.index;this.reader.setIndex(M);var P=this.reader.readString(4)===U;return this.reader.setIndex(L),P},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var M=this.reader.readData(this.zipCommentLength),U=C.uint8array?"uint8array":"array",L=v.transformTo(U,M);this.zipComment=this.loadOptions.decodeFileName(L)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var M,U,L,P=this.zip64EndOfCentralSize-44;0<P;)M=this.reader.readInt(2),U=this.reader.readInt(4),L=this.reader.readData(U),this.zip64ExtensibleData[M]={id:M,length:U,value:L}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var M,U;for(M=0;M<this.files.length;M++)U=this.files[M],this.reader.setIndex(U.localHeaderOffset),this.checkSignature(y.LOCAL_FILE_HEADER),U.readLocalPart(this.reader),U.handleUTF8(),U.processAttributes()},readCentralDir:function(){var M;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(y.CENTRAL_FILE_HEADER);)(M=new b({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(M);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var M=this.reader.lastIndexOfSignature(y.CENTRAL_DIRECTORY_END);if(M<0)throw this.isSignature(0,y.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(M);var U=M;if(this.checkSignature(y.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===v.MAX_VALUE_16BITS||this.diskWithCentralDirStart===v.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===v.MAX_VALUE_16BITS||this.centralDirRecords===v.MAX_VALUE_16BITS||this.centralDirSize===v.MAX_VALUE_32BITS||this.centralDirOffset===v.MAX_VALUE_32BITS){if(this.zip64=!0,(M=this.reader.lastIndexOfSignature(y.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(M),this.checkSignature(y.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,y.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(y.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(y.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var L=this.centralDirOffset+this.centralDirSize;this.zip64&&(L+=20,L+=12+this.zip64EndOfCentralSize);var P=U-L;if(0<P)this.isSignature(U,y.CENTRAL_FILE_HEADER)||(this.reader.zero=P);else if(P<0)throw new Error("Corrupted zip: missing "+Math.abs(P)+" bytes.")},prepareReader:function(M){this.reader=g(M)},load:function(M){this.prepareReader(M),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},p.exports=T},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(m,p,x){var g=m("./reader/readerFor"),v=m("./utils"),y=m("./compressedObject"),b=m("./crc32"),C=m("./utf8"),T=m("./compressions"),M=m("./support");function U(L,P){this.options=L,this.loadOptions=P}U.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(L){var P,B;if(L.skip(22),this.fileNameLength=L.readInt(2),B=L.readInt(2),this.fileName=L.readData(this.fileNameLength),L.skip(B),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((P=function(q){for(var z in T)if(Object.prototype.hasOwnProperty.call(T,z)&&T[z].magic===q)return T[z];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+v.pretty(this.compressionMethod)+" unknown (inner file : "+v.transformTo("string",this.fileName)+")");this.decompressed=new y(this.compressedSize,this.uncompressedSize,this.crc32,P,L.readData(this.compressedSize))},readCentralPart:function(L){this.versionMadeBy=L.readInt(2),L.skip(2),this.bitFlag=L.readInt(2),this.compressionMethod=L.readString(2),this.date=L.readDate(),this.crc32=L.readInt(4),this.compressedSize=L.readInt(4),this.uncompressedSize=L.readInt(4);var P=L.readInt(2);if(this.extraFieldsLength=L.readInt(2),this.fileCommentLength=L.readInt(2),this.diskNumberStart=L.readInt(2),this.internalFileAttributes=L.readInt(2),this.externalFileAttributes=L.readInt(4),this.localHeaderOffset=L.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");L.skip(P),this.readExtraFields(L),this.parseZIP64ExtraField(L),this.fileComment=L.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var L=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),L==0&&(this.dosPermissions=63&this.externalFileAttributes),L==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var L=g(this.extraFields[1].value);this.uncompressedSize===v.MAX_VALUE_32BITS&&(this.uncompressedSize=L.readInt(8)),this.compressedSize===v.MAX_VALUE_32BITS&&(this.compressedSize=L.readInt(8)),this.localHeaderOffset===v.MAX_VALUE_32BITS&&(this.localHeaderOffset=L.readInt(8)),this.diskNumberStart===v.MAX_VALUE_32BITS&&(this.diskNumberStart=L.readInt(4))}},readExtraFields:function(L){var P,B,q,z=L.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});L.index+4<z;)P=L.readInt(2),B=L.readInt(2),q=L.readData(B),this.extraFields[P]={id:P,length:B,value:q};L.setIndex(z)},handleUTF8:function(){var L=M.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=C.utf8decode(this.fileName),this.fileCommentStr=C.utf8decode(this.fileComment);else{var P=this.findExtraFieldUnicodePath();if(P!==null)this.fileNameStr=P;else{var B=v.transformTo(L,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(B)}var q=this.findExtraFieldUnicodeComment();if(q!==null)this.fileCommentStr=q;else{var z=v.transformTo(L,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(z)}}},findExtraFieldUnicodePath:function(){var L=this.extraFields[28789];if(L){var P=g(L.value);return P.readInt(1)!==1||b(this.fileName)!==P.readInt(4)?null:C.utf8decode(P.readData(L.length-5))}return null},findExtraFieldUnicodeComment:function(){var L=this.extraFields[25461];if(L){var P=g(L.value);return P.readInt(1)!==1||b(this.fileComment)!==P.readInt(4)?null:C.utf8decode(P.readData(L.length-5))}return null}},p.exports=U},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(m,p,x){function g(P,B,q){this.name=P,this.dir=q.dir,this.date=q.date,this.comment=q.comment,this.unixPermissions=q.unixPermissions,this.dosPermissions=q.dosPermissions,this._data=B,this._dataBinary=q.binary,this.options={compression:q.compression,compressionOptions:q.compressionOptions}}var v=m("./stream/StreamHelper"),y=m("./stream/DataWorker"),b=m("./utf8"),C=m("./compressedObject"),T=m("./stream/GenericWorker");g.prototype={internalStream:function(P){var B=null,q="string";try{if(!P)throw new Error("No output type specified.");var z=(q=P.toLowerCase())==="string"||q==="text";q!=="binarystring"&&q!=="text"||(q="string"),B=this._decompressWorker();var k=!this._dataBinary;k&&!z&&(B=B.pipe(new b.Utf8EncodeWorker)),!k&&z&&(B=B.pipe(new b.Utf8DecodeWorker))}catch(R){(B=new T("error")).error(R)}return new v(B,q,"")},async:function(P,B){return this.internalStream(P).accumulate(B)},nodeStream:function(P,B){return this.internalStream(P||"nodebuffer").toNodejsStream(B)},_compressWorker:function(P,B){if(this._data instanceof C&&this._data.compression.magic===P.magic)return this._data.getCompressedWorker();var q=this._decompressWorker();return this._dataBinary||(q=q.pipe(new b.Utf8EncodeWorker)),C.createWorkerFrom(q,P,B)},_decompressWorker:function(){return this._data instanceof C?this._data.getContentWorker():this._data instanceof T?this._data:new y(this._data)}};for(var M=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],U=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},L=0;L<M.length;L++)g.prototype[M[L]]=U;p.exports=g},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(m,p,x){(function(g){var v,y,b=g.MutationObserver||g.WebKitMutationObserver;if(b){var C=0,T=new b(P),M=g.document.createTextNode("");T.observe(M,{characterData:!0}),v=function(){M.data=C=++C%2}}else if(g.setImmediate||g.MessageChannel===void 0)v="document"in g&&"onreadystatechange"in g.document.createElement("script")?function(){var B=g.document.createElement("script");B.onreadystatechange=function(){P(),B.onreadystatechange=null,B.parentNode.removeChild(B),B=null},g.document.documentElement.appendChild(B)}:function(){setTimeout(P,0)};else{var U=new g.MessageChannel;U.port1.onmessage=P,v=function(){U.port2.postMessage(0)}}var L=[];function P(){var B,q;y=!0;for(var z=L.length;z;){for(q=L,L=[],B=-1;++B<z;)q[B]();z=L.length}y=!1}p.exports=function(B){L.push(B)!==1||y||v()}}).call(this,a!==void 0?a:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(m,p,x){var g=m("immediate");function v(){}var y={},b=["REJECTED"],C=["FULFILLED"],T=["PENDING"];function M(z){if(typeof z!="function")throw new TypeError("resolver must be a function");this.state=T,this.queue=[],this.outcome=void 0,z!==v&&B(this,z)}function U(z,k,R){this.promise=z,typeof k=="function"&&(this.onFulfilled=k,this.callFulfilled=this.otherCallFulfilled),typeof R=="function"&&(this.onRejected=R,this.callRejected=this.otherCallRejected)}function L(z,k,R){g(function(){var S;try{S=k(R)}catch(w){return y.reject(z,w)}S===z?y.reject(z,new TypeError("Cannot resolve promise with itself")):y.resolve(z,S)})}function P(z){var k=z&&z.then;if(z&&(typeof z=="object"||typeof z=="function")&&typeof k=="function")return function(){k.apply(z,arguments)}}function B(z,k){var R=!1;function S(j){R||(R=!0,y.reject(z,j))}function w(j){R||(R=!0,y.resolve(z,j))}var _=q(function(){k(w,S)});_.status==="error"&&S(_.value)}function q(z,k){var R={};try{R.value=z(k),R.status="success"}catch(S){R.status="error",R.value=S}return R}(p.exports=M).prototype.finally=function(z){if(typeof z!="function")return this;var k=this.constructor;return this.then(function(R){return k.resolve(z()).then(function(){return R})},function(R){return k.resolve(z()).then(function(){throw R})})},M.prototype.catch=function(z){return this.then(null,z)},M.prototype.then=function(z,k){if(typeof z!="function"&&this.state===C||typeof k!="function"&&this.state===b)return this;var R=new this.constructor(v);return this.state!==T?L(R,this.state===C?z:k,this.outcome):this.queue.push(new U(R,z,k)),R},U.prototype.callFulfilled=function(z){y.resolve(this.promise,z)},U.prototype.otherCallFulfilled=function(z){L(this.promise,this.onFulfilled,z)},U.prototype.callRejected=function(z){y.reject(this.promise,z)},U.prototype.otherCallRejected=function(z){L(this.promise,this.onRejected,z)},y.resolve=function(z,k){var R=q(P,k);if(R.status==="error")return y.reject(z,R.value);var S=R.value;if(S)B(z,S);else{z.state=C,z.outcome=k;for(var w=-1,_=z.queue.length;++w<_;)z.queue[w].callFulfilled(k)}return z},y.reject=function(z,k){z.state=b,z.outcome=k;for(var R=-1,S=z.queue.length;++R<S;)z.queue[R].callRejected(k);return z},M.resolve=function(z){return z instanceof this?z:y.resolve(new this(v),z)},M.reject=function(z){var k=new this(v);return y.reject(k,z)},M.all=function(z){var k=this;if(Object.prototype.toString.call(z)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=z.length,S=!1;if(!R)return this.resolve([]);for(var w=new Array(R),_=0,j=-1,N=new this(v);++j<R;)E(z[j],j);return N;function E(I,D){k.resolve(I).then(function(V){w[D]=V,++_!==R||S||(S=!0,y.resolve(N,w))},function(V){S||(S=!0,y.reject(N,V))})}},M.race=function(z){if(Object.prototype.toString.call(z)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=z.length,R=!1;if(!k)return this.resolve([]);for(var S,w=-1,_=new this(v);++w<k;)S=z[w],this.resolve(S).then(function(j){R||(R=!0,y.resolve(_,j))},function(j){R||(R=!0,y.reject(_,j))});return _}},{immediate:36}],38:[function(m,p,x){var g={};(0,m("./lib/utils/common").assign)(g,m("./lib/deflate"),m("./lib/inflate"),m("./lib/zlib/constants")),p.exports=g},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(m,p,x){var g=m("./zlib/deflate"),v=m("./utils/common"),y=m("./utils/strings"),b=m("./zlib/messages"),C=m("./zlib/zstream"),T=Object.prototype.toString;function M(L){if(!(this instanceof M))return new M(L);this.options=v.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},L||{});var P=this.options;P.raw&&0<P.windowBits?P.windowBits=-P.windowBits:P.gzip&&0<P.windowBits&&P.windowBits<16&&(P.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new C,this.strm.avail_out=0;var B=g.deflateInit2(this.strm,P.level,P.method,P.windowBits,P.memLevel,P.strategy);if(B!==0)throw new Error(b[B]);if(P.header&&g.deflateSetHeader(this.strm,P.header),P.dictionary){var q;if(q=typeof P.dictionary=="string"?y.string2buf(P.dictionary):T.call(P.dictionary)==="[object ArrayBuffer]"?new Uint8Array(P.dictionary):P.dictionary,(B=g.deflateSetDictionary(this.strm,q))!==0)throw new Error(b[B]);this._dict_set=!0}}function U(L,P){var B=new M(P);if(B.push(L,!0),B.err)throw B.msg||b[B.err];return B.result}M.prototype.push=function(L,P){var B,q,z=this.strm,k=this.options.chunkSize;if(this.ended)return!1;q=P===~~P?P:P===!0?4:0,typeof L=="string"?z.input=y.string2buf(L):T.call(L)==="[object ArrayBuffer]"?z.input=new Uint8Array(L):z.input=L,z.next_in=0,z.avail_in=z.input.length;do{if(z.avail_out===0&&(z.output=new v.Buf8(k),z.next_out=0,z.avail_out=k),(B=g.deflate(z,q))!==1&&B!==0)return this.onEnd(B),!(this.ended=!0);z.avail_out!==0&&(z.avail_in!==0||q!==4&&q!==2)||(this.options.to==="string"?this.onData(y.buf2binstring(v.shrinkBuf(z.output,z.next_out))):this.onData(v.shrinkBuf(z.output,z.next_out)))}while((0<z.avail_in||z.avail_out===0)&&B!==1);return q===4?(B=g.deflateEnd(this.strm),this.onEnd(B),this.ended=!0,B===0):q!==2||(this.onEnd(0),!(z.avail_out=0))},M.prototype.onData=function(L){this.chunks.push(L)},M.prototype.onEnd=function(L){L===0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=v.flattenChunks(this.chunks)),this.chunks=[],this.err=L,this.msg=this.strm.msg},x.Deflate=M,x.deflate=U,x.deflateRaw=function(L,P){return(P=P||{}).raw=!0,U(L,P)},x.gzip=function(L,P){return(P=P||{}).gzip=!0,U(L,P)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(m,p,x){var g=m("./zlib/inflate"),v=m("./utils/common"),y=m("./utils/strings"),b=m("./zlib/constants"),C=m("./zlib/messages"),T=m("./zlib/zstream"),M=m("./zlib/gzheader"),U=Object.prototype.toString;function L(B){if(!(this instanceof L))return new L(B);this.options=v.assign({chunkSize:16384,windowBits:0,to:""},B||{});var q=this.options;q.raw&&0<=q.windowBits&&q.windowBits<16&&(q.windowBits=-q.windowBits,q.windowBits===0&&(q.windowBits=-15)),!(0<=q.windowBits&&q.windowBits<16)||B&&B.windowBits||(q.windowBits+=32),15<q.windowBits&&q.windowBits<48&&!(15&q.windowBits)&&(q.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new T,this.strm.avail_out=0;var z=g.inflateInit2(this.strm,q.windowBits);if(z!==b.Z_OK)throw new Error(C[z]);this.header=new M,g.inflateGetHeader(this.strm,this.header)}function P(B,q){var z=new L(q);if(z.push(B,!0),z.err)throw z.msg||C[z.err];return z.result}L.prototype.push=function(B,q){var z,k,R,S,w,_,j=this.strm,N=this.options.chunkSize,E=this.options.dictionary,I=!1;if(this.ended)return!1;k=q===~~q?q:q===!0?b.Z_FINISH:b.Z_NO_FLUSH,typeof B=="string"?j.input=y.binstring2buf(B):U.call(B)==="[object ArrayBuffer]"?j.input=new Uint8Array(B):j.input=B,j.next_in=0,j.avail_in=j.input.length;do{if(j.avail_out===0&&(j.output=new v.Buf8(N),j.next_out=0,j.avail_out=N),(z=g.inflate(j,b.Z_NO_FLUSH))===b.Z_NEED_DICT&&E&&(_=typeof E=="string"?y.string2buf(E):U.call(E)==="[object ArrayBuffer]"?new Uint8Array(E):E,z=g.inflateSetDictionary(this.strm,_)),z===b.Z_BUF_ERROR&&I===!0&&(z=b.Z_OK,I=!1),z!==b.Z_STREAM_END&&z!==b.Z_OK)return this.onEnd(z),!(this.ended=!0);j.next_out&&(j.avail_out!==0&&z!==b.Z_STREAM_END&&(j.avail_in!==0||k!==b.Z_FINISH&&k!==b.Z_SYNC_FLUSH)||(this.options.to==="string"?(R=y.utf8border(j.output,j.next_out),S=j.next_out-R,w=y.buf2string(j.output,R),j.next_out=S,j.avail_out=N-S,S&&v.arraySet(j.output,j.output,R,S,0),this.onData(w)):this.onData(v.shrinkBuf(j.output,j.next_out)))),j.avail_in===0&&j.avail_out===0&&(I=!0)}while((0<j.avail_in||j.avail_out===0)&&z!==b.Z_STREAM_END);return z===b.Z_STREAM_END&&(k=b.Z_FINISH),k===b.Z_FINISH?(z=g.inflateEnd(this.strm),this.onEnd(z),this.ended=!0,z===b.Z_OK):k!==b.Z_SYNC_FLUSH||(this.onEnd(b.Z_OK),!(j.avail_out=0))},L.prototype.onData=function(B){this.chunks.push(B)},L.prototype.onEnd=function(B){B===b.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=v.flattenChunks(this.chunks)),this.chunks=[],this.err=B,this.msg=this.strm.msg},x.Inflate=L,x.inflate=P,x.inflateRaw=function(B,q){return(q=q||{}).raw=!0,P(B,q)},x.ungzip=P},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(m,p,x){var g=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";x.assign=function(b){for(var C=Array.prototype.slice.call(arguments,1);C.length;){var T=C.shift();if(T){if(typeof T!="object")throw new TypeError(T+"must be non-object");for(var M in T)T.hasOwnProperty(M)&&(b[M]=T[M])}}return b},x.shrinkBuf=function(b,C){return b.length===C?b:b.subarray?b.subarray(0,C):(b.length=C,b)};var v={arraySet:function(b,C,T,M,U){if(C.subarray&&b.subarray)b.set(C.subarray(T,T+M),U);else for(var L=0;L<M;L++)b[U+L]=C[T+L]},flattenChunks:function(b){var C,T,M,U,L,P;for(C=M=0,T=b.length;C<T;C++)M+=b[C].length;for(P=new Uint8Array(M),C=U=0,T=b.length;C<T;C++)L=b[C],P.set(L,U),U+=L.length;return P}},y={arraySet:function(b,C,T,M,U){for(var L=0;L<M;L++)b[U+L]=C[T+L]},flattenChunks:function(b){return[].concat.apply([],b)}};x.setTyped=function(b){b?(x.Buf8=Uint8Array,x.Buf16=Uint16Array,x.Buf32=Int32Array,x.assign(x,v)):(x.Buf8=Array,x.Buf16=Array,x.Buf32=Array,x.assign(x,y))},x.setTyped(g)},{}],42:[function(m,p,x){var g=m("./common"),v=!0,y=!0;try{String.fromCharCode.apply(null,[0])}catch{v=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{y=!1}for(var b=new g.Buf8(256),C=0;C<256;C++)b[C]=252<=C?6:248<=C?5:240<=C?4:224<=C?3:192<=C?2:1;function T(M,U){if(U<65537&&(M.subarray&&y||!M.subarray&&v))return String.fromCharCode.apply(null,g.shrinkBuf(M,U));for(var L="",P=0;P<U;P++)L+=String.fromCharCode(M[P]);return L}b[254]=b[254]=1,x.string2buf=function(M){var U,L,P,B,q,z=M.length,k=0;for(B=0;B<z;B++)(64512&(L=M.charCodeAt(B)))==55296&&B+1<z&&(64512&(P=M.charCodeAt(B+1)))==56320&&(L=65536+(L-55296<<10)+(P-56320),B++),k+=L<128?1:L<2048?2:L<65536?3:4;for(U=new g.Buf8(k),B=q=0;q<k;B++)(64512&(L=M.charCodeAt(B)))==55296&&B+1<z&&(64512&(P=M.charCodeAt(B+1)))==56320&&(L=65536+(L-55296<<10)+(P-56320),B++),L<128?U[q++]=L:(L<2048?U[q++]=192|L>>>6:(L<65536?U[q++]=224|L>>>12:(U[q++]=240|L>>>18,U[q++]=128|L>>>12&63),U[q++]=128|L>>>6&63),U[q++]=128|63&L);return U},x.buf2binstring=function(M){return T(M,M.length)},x.binstring2buf=function(M){for(var U=new g.Buf8(M.length),L=0,P=U.length;L<P;L++)U[L]=M.charCodeAt(L);return U},x.buf2string=function(M,U){var L,P,B,q,z=U||M.length,k=new Array(2*z);for(L=P=0;L<z;)if((B=M[L++])<128)k[P++]=B;else if(4<(q=b[B]))k[P++]=65533,L+=q-1;else{for(B&=q===2?31:q===3?15:7;1<q&&L<z;)B=B<<6|63&M[L++],q--;1<q?k[P++]=65533:B<65536?k[P++]=B:(B-=65536,k[P++]=55296|B>>10&1023,k[P++]=56320|1023&B)}return T(k,P)},x.utf8border=function(M,U){var L;for((U=U||M.length)>M.length&&(U=M.length),L=U-1;0<=L&&(192&M[L])==128;)L--;return L<0||L===0?U:L+b[M[L]]>U?L:U}},{"./common":41}],43:[function(m,p,x){p.exports=function(g,v,y,b){for(var C=65535&g|0,T=g>>>16&65535|0,M=0;y!==0;){for(y-=M=2e3<y?2e3:y;T=T+(C=C+v[b++]|0)|0,--M;);C%=65521,T%=65521}return C|T<<16|0}},{}],44:[function(m,p,x){p.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(m,p,x){var g=function(){for(var v,y=[],b=0;b<256;b++){v=b;for(var C=0;C<8;C++)v=1&v?3988292384^v>>>1:v>>>1;y[b]=v}return y}();p.exports=function(v,y,b,C){var T=g,M=C+b;v^=-1;for(var U=C;U<M;U++)v=v>>>8^T[255&(v^y[U])];return-1^v}},{}],46:[function(m,p,x){var g,v=m("../utils/common"),y=m("./trees"),b=m("./adler32"),C=m("./crc32"),T=m("./messages"),M=-2,U=258,L=262,P=113;function B($,Y){return $.msg=T[Y],Y}function q($){return($<<1)-(4<$?9:0)}function z($){for(var Y=$.length;0<=--Y;)$[Y]=0}function k($){var Y=$.state,F=Y.pending;F>$.avail_out&&(F=$.avail_out),F!==0&&(v.arraySet($.output,Y.pending_buf,Y.pending_out,F,$.next_out),$.next_out+=F,Y.pending_out+=F,$.total_out+=F,$.avail_out-=F,Y.pending-=F,Y.pending===0&&(Y.pending_out=0))}function R($,Y){y._tr_flush_block($,0<=$.block_start?$.block_start:-1,$.strstart-$.block_start,Y),$.block_start=$.strstart,k($.strm)}function S($,Y){$.pending_buf[$.pending++]=Y}function w($,Y){$.pending_buf[$.pending++]=Y>>>8&255,$.pending_buf[$.pending++]=255&Y}function _($,Y){var F,O,W=$.max_chain_length,K=$.strstart,Q=$.prev_length,X=$.nice_match,te=$.strstart>$.w_size-L?$.strstart-($.w_size-L):0,de=$.window,xe=$.w_mask,ne=$.prev,ge=$.strstart+U,be=de[K+Q-1],Ie=de[K+Q];$.prev_length>=$.good_match&&(W>>=2),X>$.lookahead&&(X=$.lookahead);do if(de[(F=Y)+Q]===Ie&&de[F+Q-1]===be&&de[F]===de[K]&&de[++F]===de[K+1]){K+=2,F++;do;while(de[++K]===de[++F]&&de[++K]===de[++F]&&de[++K]===de[++F]&&de[++K]===de[++F]&&de[++K]===de[++F]&&de[++K]===de[++F]&&de[++K]===de[++F]&&de[++K]===de[++F]&&K<ge);if(O=U-(ge-K),K=ge-U,Q<O){if($.match_start=Y,X<=(Q=O))break;be=de[K+Q-1],Ie=de[K+Q]}}while((Y=ne[Y&xe])>te&&--W!=0);return Q<=$.lookahead?Q:$.lookahead}function j($){var Y,F,O,W,K,Q,X,te,de,xe,ne=$.w_size;do{if(W=$.window_size-$.lookahead-$.strstart,$.strstart>=ne+(ne-L)){for(v.arraySet($.window,$.window,ne,ne,0),$.match_start-=ne,$.strstart-=ne,$.block_start-=ne,Y=F=$.hash_size;O=$.head[--Y],$.head[Y]=ne<=O?O-ne:0,--F;);for(Y=F=ne;O=$.prev[--Y],$.prev[Y]=ne<=O?O-ne:0,--F;);W+=ne}if($.strm.avail_in===0)break;if(Q=$.strm,X=$.window,te=$.strstart+$.lookahead,xe=void 0,(de=W)<(xe=Q.avail_in)&&(xe=de),F=xe===0?0:(Q.avail_in-=xe,v.arraySet(X,Q.input,Q.next_in,xe,te),Q.state.wrap===1?Q.adler=b(Q.adler,X,xe,te):Q.state.wrap===2&&(Q.adler=C(Q.adler,X,xe,te)),Q.next_in+=xe,Q.total_in+=xe,xe),$.lookahead+=F,$.lookahead+$.insert>=3)for(K=$.strstart-$.insert,$.ins_h=$.window[K],$.ins_h=($.ins_h<<$.hash_shift^$.window[K+1])&$.hash_mask;$.insert&&($.ins_h=($.ins_h<<$.hash_shift^$.window[K+3-1])&$.hash_mask,$.prev[K&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=K,K++,$.insert--,!($.lookahead+$.insert<3)););}while($.lookahead<L&&$.strm.avail_in!==0)}function N($,Y){for(var F,O;;){if($.lookahead<L){if(j($),$.lookahead<L&&Y===0)return 1;if($.lookahead===0)break}if(F=0,$.lookahead>=3&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+3-1])&$.hash_mask,F=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),F!==0&&$.strstart-F<=$.w_size-L&&($.match_length=_($,F)),$.match_length>=3)if(O=y._tr_tally($,$.strstart-$.match_start,$.match_length-3),$.lookahead-=$.match_length,$.match_length<=$.max_lazy_match&&$.lookahead>=3){for($.match_length--;$.strstart++,$.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+3-1])&$.hash_mask,F=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart,--$.match_length!=0;);$.strstart++}else $.strstart+=$.match_length,$.match_length=0,$.ins_h=$.window[$.strstart],$.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+1])&$.hash_mask;else O=y._tr_tally($,0,$.window[$.strstart]),$.lookahead--,$.strstart++;if(O&&(R($,!1),$.strm.avail_out===0))return 1}return $.insert=$.strstart<2?$.strstart:2,Y===4?(R($,!0),$.strm.avail_out===0?3:4):$.last_lit&&(R($,!1),$.strm.avail_out===0)?1:2}function E($,Y){for(var F,O,W;;){if($.lookahead<L){if(j($),$.lookahead<L&&Y===0)return 1;if($.lookahead===0)break}if(F=0,$.lookahead>=3&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+3-1])&$.hash_mask,F=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),$.prev_length=$.match_length,$.prev_match=$.match_start,$.match_length=2,F!==0&&$.prev_length<$.max_lazy_match&&$.strstart-F<=$.w_size-L&&($.match_length=_($,F),$.match_length<=5&&($.strategy===1||$.match_length===3&&4096<$.strstart-$.match_start)&&($.match_length=2)),$.prev_length>=3&&$.match_length<=$.prev_length){for(W=$.strstart+$.lookahead-3,O=y._tr_tally($,$.strstart-1-$.prev_match,$.prev_length-3),$.lookahead-=$.prev_length-1,$.prev_length-=2;++$.strstart<=W&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+3-1])&$.hash_mask,F=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),--$.prev_length!=0;);if($.match_available=0,$.match_length=2,$.strstart++,O&&(R($,!1),$.strm.avail_out===0))return 1}else if($.match_available){if((O=y._tr_tally($,0,$.window[$.strstart-1]))&&R($,!1),$.strstart++,$.lookahead--,$.strm.avail_out===0)return 1}else $.match_available=1,$.strstart++,$.lookahead--}return $.match_available&&(O=y._tr_tally($,0,$.window[$.strstart-1]),$.match_available=0),$.insert=$.strstart<2?$.strstart:2,Y===4?(R($,!0),$.strm.avail_out===0?3:4):$.last_lit&&(R($,!1),$.strm.avail_out===0)?1:2}function I($,Y,F,O,W){this.good_length=$,this.max_lazy=Y,this.nice_length=F,this.max_chain=O,this.func=W}function D(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new v.Buf16(1146),this.dyn_dtree=new v.Buf16(122),this.bl_tree=new v.Buf16(78),z(this.dyn_ltree),z(this.dyn_dtree),z(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new v.Buf16(16),this.heap=new v.Buf16(573),z(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new v.Buf16(573),z(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function V($){var Y;return $&&$.state?($.total_in=$.total_out=0,$.data_type=2,(Y=$.state).pending=0,Y.pending_out=0,Y.wrap<0&&(Y.wrap=-Y.wrap),Y.status=Y.wrap?42:P,$.adler=Y.wrap===2?0:1,Y.last_flush=0,y._tr_init(Y),0):B($,M)}function H($){var Y=V($);return Y===0&&function(F){F.window_size=2*F.w_size,z(F.head),F.max_lazy_match=g[F.level].max_lazy,F.good_match=g[F.level].good_length,F.nice_match=g[F.level].nice_length,F.max_chain_length=g[F.level].max_chain,F.strstart=0,F.block_start=0,F.lookahead=0,F.insert=0,F.match_length=F.prev_length=2,F.match_available=0,F.ins_h=0}($.state),Y}function G($,Y,F,O,W,K){if(!$)return M;var Q=1;if(Y===-1&&(Y=6),O<0?(Q=0,O=-O):15<O&&(Q=2,O-=16),W<1||9<W||F!==8||O<8||15<O||Y<0||9<Y||K<0||4<K)return B($,M);O===8&&(O=9);var X=new D;return($.state=X).strm=$,X.wrap=Q,X.gzhead=null,X.w_bits=O,X.w_size=1<<X.w_bits,X.w_mask=X.w_size-1,X.hash_bits=W+7,X.hash_size=1<<X.hash_bits,X.hash_mask=X.hash_size-1,X.hash_shift=~~((X.hash_bits+3-1)/3),X.window=new v.Buf8(2*X.w_size),X.head=new v.Buf16(X.hash_size),X.prev=new v.Buf16(X.w_size),X.lit_bufsize=1<<W+6,X.pending_buf_size=4*X.lit_bufsize,X.pending_buf=new v.Buf8(X.pending_buf_size),X.d_buf=1*X.lit_bufsize,X.l_buf=3*X.lit_bufsize,X.level=Y,X.strategy=K,X.method=F,H($)}g=[new I(0,0,0,0,function($,Y){var F=65535;for(F>$.pending_buf_size-5&&(F=$.pending_buf_size-5);;){if($.lookahead<=1){if(j($),$.lookahead===0&&Y===0)return 1;if($.lookahead===0)break}$.strstart+=$.lookahead,$.lookahead=0;var O=$.block_start+F;if(($.strstart===0||$.strstart>=O)&&($.lookahead=$.strstart-O,$.strstart=O,R($,!1),$.strm.avail_out===0)||$.strstart-$.block_start>=$.w_size-L&&(R($,!1),$.strm.avail_out===0))return 1}return $.insert=0,Y===4?(R($,!0),$.strm.avail_out===0?3:4):($.strstart>$.block_start&&(R($,!1),$.strm.avail_out),1)}),new I(4,4,8,4,N),new I(4,5,16,8,N),new I(4,6,32,32,N),new I(4,4,16,16,E),new I(8,16,32,32,E),new I(8,16,128,128,E),new I(8,32,128,256,E),new I(32,128,258,1024,E),new I(32,258,258,4096,E)],x.deflateInit=function($,Y){return G($,Y,8,15,8,0)},x.deflateInit2=G,x.deflateReset=H,x.deflateResetKeep=V,x.deflateSetHeader=function($,Y){return $&&$.state?$.state.wrap!==2?M:($.state.gzhead=Y,0):M},x.deflate=function($,Y){var F,O,W,K;if(!$||!$.state||5<Y||Y<0)return $?B($,M):M;if(O=$.state,!$.output||!$.input&&$.avail_in!==0||O.status===666&&Y!==4)return B($,$.avail_out===0?-5:M);if(O.strm=$,F=O.last_flush,O.last_flush=Y,O.status===42)if(O.wrap===2)$.adler=0,S(O,31),S(O,139),S(O,8),O.gzhead?(S(O,(O.gzhead.text?1:0)+(O.gzhead.hcrc?2:0)+(O.gzhead.extra?4:0)+(O.gzhead.name?8:0)+(O.gzhead.comment?16:0)),S(O,255&O.gzhead.time),S(O,O.gzhead.time>>8&255),S(O,O.gzhead.time>>16&255),S(O,O.gzhead.time>>24&255),S(O,O.level===9?2:2<=O.strategy||O.level<2?4:0),S(O,255&O.gzhead.os),O.gzhead.extra&&O.gzhead.extra.length&&(S(O,255&O.gzhead.extra.length),S(O,O.gzhead.extra.length>>8&255)),O.gzhead.hcrc&&($.adler=C($.adler,O.pending_buf,O.pending,0)),O.gzindex=0,O.status=69):(S(O,0),S(O,0),S(O,0),S(O,0),S(O,0),S(O,O.level===9?2:2<=O.strategy||O.level<2?4:0),S(O,3),O.status=P);else{var Q=8+(O.w_bits-8<<4)<<8;Q|=(2<=O.strategy||O.level<2?0:O.level<6?1:O.level===6?2:3)<<6,O.strstart!==0&&(Q|=32),Q+=31-Q%31,O.status=P,w(O,Q),O.strstart!==0&&(w(O,$.adler>>>16),w(O,65535&$.adler)),$.adler=1}if(O.status===69)if(O.gzhead.extra){for(W=O.pending;O.gzindex<(65535&O.gzhead.extra.length)&&(O.pending!==O.pending_buf_size||(O.gzhead.hcrc&&O.pending>W&&($.adler=C($.adler,O.pending_buf,O.pending-W,W)),k($),W=O.pending,O.pending!==O.pending_buf_size));)S(O,255&O.gzhead.extra[O.gzindex]),O.gzindex++;O.gzhead.hcrc&&O.pending>W&&($.adler=C($.adler,O.pending_buf,O.pending-W,W)),O.gzindex===O.gzhead.extra.length&&(O.gzindex=0,O.status=73)}else O.status=73;if(O.status===73)if(O.gzhead.name){W=O.pending;do{if(O.pending===O.pending_buf_size&&(O.gzhead.hcrc&&O.pending>W&&($.adler=C($.adler,O.pending_buf,O.pending-W,W)),k($),W=O.pending,O.pending===O.pending_buf_size)){K=1;break}K=O.gzindex<O.gzhead.name.length?255&O.gzhead.name.charCodeAt(O.gzindex++):0,S(O,K)}while(K!==0);O.gzhead.hcrc&&O.pending>W&&($.adler=C($.adler,O.pending_buf,O.pending-W,W)),K===0&&(O.gzindex=0,O.status=91)}else O.status=91;if(O.status===91)if(O.gzhead.comment){W=O.pending;do{if(O.pending===O.pending_buf_size&&(O.gzhead.hcrc&&O.pending>W&&($.adler=C($.adler,O.pending_buf,O.pending-W,W)),k($),W=O.pending,O.pending===O.pending_buf_size)){K=1;break}K=O.gzindex<O.gzhead.comment.length?255&O.gzhead.comment.charCodeAt(O.gzindex++):0,S(O,K)}while(K!==0);O.gzhead.hcrc&&O.pending>W&&($.adler=C($.adler,O.pending_buf,O.pending-W,W)),K===0&&(O.status=103)}else O.status=103;if(O.status===103&&(O.gzhead.hcrc?(O.pending+2>O.pending_buf_size&&k($),O.pending+2<=O.pending_buf_size&&(S(O,255&$.adler),S(O,$.adler>>8&255),$.adler=0,O.status=P)):O.status=P),O.pending!==0){if(k($),$.avail_out===0)return O.last_flush=-1,0}else if($.avail_in===0&&q(Y)<=q(F)&&Y!==4)return B($,-5);if(O.status===666&&$.avail_in!==0)return B($,-5);if($.avail_in!==0||O.lookahead!==0||Y!==0&&O.status!==666){var X=O.strategy===2?function(te,de){for(var xe;;){if(te.lookahead===0&&(j(te),te.lookahead===0)){if(de===0)return 1;break}if(te.match_length=0,xe=y._tr_tally(te,0,te.window[te.strstart]),te.lookahead--,te.strstart++,xe&&(R(te,!1),te.strm.avail_out===0))return 1}return te.insert=0,de===4?(R(te,!0),te.strm.avail_out===0?3:4):te.last_lit&&(R(te,!1),te.strm.avail_out===0)?1:2}(O,Y):O.strategy===3?function(te,de){for(var xe,ne,ge,be,Ie=te.window;;){if(te.lookahead<=U){if(j(te),te.lookahead<=U&&de===0)return 1;if(te.lookahead===0)break}if(te.match_length=0,te.lookahead>=3&&0<te.strstart&&(ne=Ie[ge=te.strstart-1])===Ie[++ge]&&ne===Ie[++ge]&&ne===Ie[++ge]){be=te.strstart+U;do;while(ne===Ie[++ge]&&ne===Ie[++ge]&&ne===Ie[++ge]&&ne===Ie[++ge]&&ne===Ie[++ge]&&ne===Ie[++ge]&&ne===Ie[++ge]&&ne===Ie[++ge]&&ge<be);te.match_length=U-(be-ge),te.match_length>te.lookahead&&(te.match_length=te.lookahead)}if(te.match_length>=3?(xe=y._tr_tally(te,1,te.match_length-3),te.lookahead-=te.match_length,te.strstart+=te.match_length,te.match_length=0):(xe=y._tr_tally(te,0,te.window[te.strstart]),te.lookahead--,te.strstart++),xe&&(R(te,!1),te.strm.avail_out===0))return 1}return te.insert=0,de===4?(R(te,!0),te.strm.avail_out===0?3:4):te.last_lit&&(R(te,!1),te.strm.avail_out===0)?1:2}(O,Y):g[O.level].func(O,Y);if(X!==3&&X!==4||(O.status=666),X===1||X===3)return $.avail_out===0&&(O.last_flush=-1),0;if(X===2&&(Y===1?y._tr_align(O):Y!==5&&(y._tr_stored_block(O,0,0,!1),Y===3&&(z(O.head),O.lookahead===0&&(O.strstart=0,O.block_start=0,O.insert=0))),k($),$.avail_out===0))return O.last_flush=-1,0}return Y!==4?0:O.wrap<=0?1:(O.wrap===2?(S(O,255&$.adler),S(O,$.adler>>8&255),S(O,$.adler>>16&255),S(O,$.adler>>24&255),S(O,255&$.total_in),S(O,$.total_in>>8&255),S(O,$.total_in>>16&255),S(O,$.total_in>>24&255)):(w(O,$.adler>>>16),w(O,65535&$.adler)),k($),0<O.wrap&&(O.wrap=-O.wrap),O.pending!==0?0:1)},x.deflateEnd=function($){var Y;return $&&$.state?(Y=$.state.status)!==42&&Y!==69&&Y!==73&&Y!==91&&Y!==103&&Y!==P&&Y!==666?B($,M):($.state=null,Y===P?B($,-3):0):M},x.deflateSetDictionary=function($,Y){var F,O,W,K,Q,X,te,de,xe=Y.length;if(!$||!$.state||(K=(F=$.state).wrap)===2||K===1&&F.status!==42||F.lookahead)return M;for(K===1&&($.adler=b($.adler,Y,xe,0)),F.wrap=0,xe>=F.w_size&&(K===0&&(z(F.head),F.strstart=0,F.block_start=0,F.insert=0),de=new v.Buf8(F.w_size),v.arraySet(de,Y,xe-F.w_size,F.w_size,0),Y=de,xe=F.w_size),Q=$.avail_in,X=$.next_in,te=$.input,$.avail_in=xe,$.next_in=0,$.input=Y,j(F);F.lookahead>=3;){for(O=F.strstart,W=F.lookahead-2;F.ins_h=(F.ins_h<<F.hash_shift^F.window[O+3-1])&F.hash_mask,F.prev[O&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=O,O++,--W;);F.strstart=O,F.lookahead=2,j(F)}return F.strstart+=F.lookahead,F.block_start=F.strstart,F.insert=F.lookahead,F.lookahead=0,F.match_length=F.prev_length=2,F.match_available=0,$.next_in=X,$.input=te,$.avail_in=Q,F.wrap=K,0},x.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(m,p,x){p.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(m,p,x){p.exports=function(g,v){var y,b,C,T,M,U,L,P,B,q,z,k,R,S,w,_,j,N,E,I,D,V,H,G,$;y=g.state,b=g.next_in,G=g.input,C=b+(g.avail_in-5),T=g.next_out,$=g.output,M=T-(v-g.avail_out),U=T+(g.avail_out-257),L=y.dmax,P=y.wsize,B=y.whave,q=y.wnext,z=y.window,k=y.hold,R=y.bits,S=y.lencode,w=y.distcode,_=(1<<y.lenbits)-1,j=(1<<y.distbits)-1;e:do{R<15&&(k+=G[b++]<<R,R+=8,k+=G[b++]<<R,R+=8),N=S[k&_];t:for(;;){if(k>>>=E=N>>>24,R-=E,(E=N>>>16&255)==0)$[T++]=65535&N;else{if(!(16&E)){if(!(64&E)){N=S[(65535&N)+(k&(1<<E)-1)];continue t}if(32&E){y.mode=12;break e}g.msg="invalid literal/length code",y.mode=30;break e}I=65535&N,(E&=15)&&(R<E&&(k+=G[b++]<<R,R+=8),I+=k&(1<<E)-1,k>>>=E,R-=E),R<15&&(k+=G[b++]<<R,R+=8,k+=G[b++]<<R,R+=8),N=w[k&j];s:for(;;){if(k>>>=E=N>>>24,R-=E,!(16&(E=N>>>16&255))){if(!(64&E)){N=w[(65535&N)+(k&(1<<E)-1)];continue s}g.msg="invalid distance code",y.mode=30;break e}if(D=65535&N,R<(E&=15)&&(k+=G[b++]<<R,(R+=8)<E&&(k+=G[b++]<<R,R+=8)),L<(D+=k&(1<<E)-1)){g.msg="invalid distance too far back",y.mode=30;break e}if(k>>>=E,R-=E,(E=T-M)<D){if(B<(E=D-E)&&y.sane){g.msg="invalid distance too far back",y.mode=30;break e}if(H=z,(V=0)===q){if(V+=P-E,E<I){for(I-=E;$[T++]=z[V++],--E;);V=T-D,H=$}}else if(q<E){if(V+=P+q-E,(E-=q)<I){for(I-=E;$[T++]=z[V++],--E;);if(V=0,q<I){for(I-=E=q;$[T++]=z[V++],--E;);V=T-D,H=$}}}else if(V+=q-E,E<I){for(I-=E;$[T++]=z[V++],--E;);V=T-D,H=$}for(;2<I;)$[T++]=H[V++],$[T++]=H[V++],$[T++]=H[V++],I-=3;I&&($[T++]=H[V++],1<I&&($[T++]=H[V++]))}else{for(V=T-D;$[T++]=$[V++],$[T++]=$[V++],$[T++]=$[V++],2<(I-=3););I&&($[T++]=$[V++],1<I&&($[T++]=$[V++]))}break}}break}}while(b<C&&T<U);b-=I=R>>3,k&=(1<<(R-=I<<3))-1,g.next_in=b,g.next_out=T,g.avail_in=b<C?C-b+5:5-(b-C),g.avail_out=T<U?U-T+257:257-(T-U),y.hold=k,y.bits=R}},{}],49:[function(m,p,x){var g=m("../utils/common"),v=m("./adler32"),y=m("./crc32"),b=m("./inffast"),C=m("./inftrees"),T=-2;function M(_){return(_>>>24&255)+(_>>>8&65280)+((65280&_)<<8)+((255&_)<<24)}function U(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new g.Buf16(320),this.work=new g.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function L(_){var j;return _&&_.state?(j=_.state,_.total_in=_.total_out=j.total=0,_.msg="",j.wrap&&(_.adler=1&j.wrap),j.mode=1,j.last=0,j.havedict=0,j.dmax=32768,j.head=null,j.hold=0,j.bits=0,j.lencode=j.lendyn=new g.Buf32(852),j.distcode=j.distdyn=new g.Buf32(592),j.sane=1,j.back=-1,0):T}function P(_){var j;return _&&_.state?((j=_.state).wsize=0,j.whave=0,j.wnext=0,L(_)):T}function B(_,j){var N,E;return _&&_.state?(E=_.state,j<0?(N=0,j=-j):(N=1+(j>>4),j<48&&(j&=15)),j&&(j<8||15<j)?T:(E.window!==null&&E.wbits!==j&&(E.window=null),E.wrap=N,E.wbits=j,P(_))):T}function q(_,j){var N,E;return _?(E=new U,(_.state=E).window=null,(N=B(_,j))!==0&&(_.state=null),N):T}var z,k,R=!0;function S(_){if(R){var j;for(z=new g.Buf32(512),k=new g.Buf32(32),j=0;j<144;)_.lens[j++]=8;for(;j<256;)_.lens[j++]=9;for(;j<280;)_.lens[j++]=7;for(;j<288;)_.lens[j++]=8;for(C(1,_.lens,0,288,z,0,_.work,{bits:9}),j=0;j<32;)_.lens[j++]=5;C(2,_.lens,0,32,k,0,_.work,{bits:5}),R=!1}_.lencode=z,_.lenbits=9,_.distcode=k,_.distbits=5}function w(_,j,N,E){var I,D=_.state;return D.window===null&&(D.wsize=1<<D.wbits,D.wnext=0,D.whave=0,D.window=new g.Buf8(D.wsize)),E>=D.wsize?(g.arraySet(D.window,j,N-D.wsize,D.wsize,0),D.wnext=0,D.whave=D.wsize):(E<(I=D.wsize-D.wnext)&&(I=E),g.arraySet(D.window,j,N-E,I,D.wnext),(E-=I)?(g.arraySet(D.window,j,N-E,E,0),D.wnext=E,D.whave=D.wsize):(D.wnext+=I,D.wnext===D.wsize&&(D.wnext=0),D.whave<D.wsize&&(D.whave+=I))),0}x.inflateReset=P,x.inflateReset2=B,x.inflateResetKeep=L,x.inflateInit=function(_){return q(_,15)},x.inflateInit2=q,x.inflate=function(_,j){var N,E,I,D,V,H,G,$,Y,F,O,W,K,Q,X,te,de,xe,ne,ge,be,Ie,Ce,Oe,Ee=0,pe=new g.Buf8(4),Ae=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!_||!_.state||!_.output||!_.input&&_.avail_in!==0)return T;(N=_.state).mode===12&&(N.mode=13),V=_.next_out,I=_.output,G=_.avail_out,D=_.next_in,E=_.input,H=_.avail_in,$=N.hold,Y=N.bits,F=H,O=G,Ie=0;e:for(;;)switch(N.mode){case 1:if(N.wrap===0){N.mode=13;break}for(;Y<16;){if(H===0)break e;H--,$+=E[D++]<<Y,Y+=8}if(2&N.wrap&&$===35615){pe[N.check=0]=255&$,pe[1]=$>>>8&255,N.check=y(N.check,pe,2,0),Y=$=0,N.mode=2;break}if(N.flags=0,N.head&&(N.head.done=!1),!(1&N.wrap)||(((255&$)<<8)+($>>8))%31){_.msg="incorrect header check",N.mode=30;break}if((15&$)!=8){_.msg="unknown compression method",N.mode=30;break}if(Y-=4,be=8+(15&($>>>=4)),N.wbits===0)N.wbits=be;else if(be>N.wbits){_.msg="invalid window size",N.mode=30;break}N.dmax=1<<be,_.adler=N.check=1,N.mode=512&$?10:12,Y=$=0;break;case 2:for(;Y<16;){if(H===0)break e;H--,$+=E[D++]<<Y,Y+=8}if(N.flags=$,(255&N.flags)!=8){_.msg="unknown compression method",N.mode=30;break}if(57344&N.flags){_.msg="unknown header flags set",N.mode=30;break}N.head&&(N.head.text=$>>8&1),512&N.flags&&(pe[0]=255&$,pe[1]=$>>>8&255,N.check=y(N.check,pe,2,0)),Y=$=0,N.mode=3;case 3:for(;Y<32;){if(H===0)break e;H--,$+=E[D++]<<Y,Y+=8}N.head&&(N.head.time=$),512&N.flags&&(pe[0]=255&$,pe[1]=$>>>8&255,pe[2]=$>>>16&255,pe[3]=$>>>24&255,N.check=y(N.check,pe,4,0)),Y=$=0,N.mode=4;case 4:for(;Y<16;){if(H===0)break e;H--,$+=E[D++]<<Y,Y+=8}N.head&&(N.head.xflags=255&$,N.head.os=$>>8),512&N.flags&&(pe[0]=255&$,pe[1]=$>>>8&255,N.check=y(N.check,pe,2,0)),Y=$=0,N.mode=5;case 5:if(1024&N.flags){for(;Y<16;){if(H===0)break e;H--,$+=E[D++]<<Y,Y+=8}N.length=$,N.head&&(N.head.extra_len=$),512&N.flags&&(pe[0]=255&$,pe[1]=$>>>8&255,N.check=y(N.check,pe,2,0)),Y=$=0}else N.head&&(N.head.extra=null);N.mode=6;case 6:if(1024&N.flags&&(H<(W=N.length)&&(W=H),W&&(N.head&&(be=N.head.extra_len-N.length,N.head.extra||(N.head.extra=new Array(N.head.extra_len)),g.arraySet(N.head.extra,E,D,W,be)),512&N.flags&&(N.check=y(N.check,E,W,D)),H-=W,D+=W,N.length-=W),N.length))break e;N.length=0,N.mode=7;case 7:if(2048&N.flags){if(H===0)break e;for(W=0;be=E[D+W++],N.head&&be&&N.length<65536&&(N.head.name+=String.fromCharCode(be)),be&&W<H;);if(512&N.flags&&(N.check=y(N.check,E,W,D)),H-=W,D+=W,be)break e}else N.head&&(N.head.name=null);N.length=0,N.mode=8;case 8:if(4096&N.flags){if(H===0)break e;for(W=0;be=E[D+W++],N.head&&be&&N.length<65536&&(N.head.comment+=String.fromCharCode(be)),be&&W<H;);if(512&N.flags&&(N.check=y(N.check,E,W,D)),H-=W,D+=W,be)break e}else N.head&&(N.head.comment=null);N.mode=9;case 9:if(512&N.flags){for(;Y<16;){if(H===0)break e;H--,$+=E[D++]<<Y,Y+=8}if($!==(65535&N.check)){_.msg="header crc mismatch",N.mode=30;break}Y=$=0}N.head&&(N.head.hcrc=N.flags>>9&1,N.head.done=!0),_.adler=N.check=0,N.mode=12;break;case 10:for(;Y<32;){if(H===0)break e;H--,$+=E[D++]<<Y,Y+=8}_.adler=N.check=M($),Y=$=0,N.mode=11;case 11:if(N.havedict===0)return _.next_out=V,_.avail_out=G,_.next_in=D,_.avail_in=H,N.hold=$,N.bits=Y,2;_.adler=N.check=1,N.mode=12;case 12:if(j===5||j===6)break e;case 13:if(N.last){$>>>=7&Y,Y-=7&Y,N.mode=27;break}for(;Y<3;){if(H===0)break e;H--,$+=E[D++]<<Y,Y+=8}switch(N.last=1&$,Y-=1,3&($>>>=1)){case 0:N.mode=14;break;case 1:if(S(N),N.mode=20,j!==6)break;$>>>=2,Y-=2;break e;case 2:N.mode=17;break;case 3:_.msg="invalid block type",N.mode=30}$>>>=2,Y-=2;break;case 14:for($>>>=7&Y,Y-=7&Y;Y<32;){if(H===0)break e;H--,$+=E[D++]<<Y,Y+=8}if((65535&$)!=($>>>16^65535)){_.msg="invalid stored block lengths",N.mode=30;break}if(N.length=65535&$,Y=$=0,N.mode=15,j===6)break e;case 15:N.mode=16;case 16:if(W=N.length){if(H<W&&(W=H),G<W&&(W=G),W===0)break e;g.arraySet(I,E,D,W,V),H-=W,D+=W,G-=W,V+=W,N.length-=W;break}N.mode=12;break;case 17:for(;Y<14;){if(H===0)break e;H--,$+=E[D++]<<Y,Y+=8}if(N.nlen=257+(31&$),$>>>=5,Y-=5,N.ndist=1+(31&$),$>>>=5,Y-=5,N.ncode=4+(15&$),$>>>=4,Y-=4,286<N.nlen||30<N.ndist){_.msg="too many length or distance symbols",N.mode=30;break}N.have=0,N.mode=18;case 18:for(;N.have<N.ncode;){for(;Y<3;){if(H===0)break e;H--,$+=E[D++]<<Y,Y+=8}N.lens[Ae[N.have++]]=7&$,$>>>=3,Y-=3}for(;N.have<19;)N.lens[Ae[N.have++]]=0;if(N.lencode=N.lendyn,N.lenbits=7,Ce={bits:N.lenbits},Ie=C(0,N.lens,0,19,N.lencode,0,N.work,Ce),N.lenbits=Ce.bits,Ie){_.msg="invalid code lengths set",N.mode=30;break}N.have=0,N.mode=19;case 19:for(;N.have<N.nlen+N.ndist;){for(;te=(Ee=N.lencode[$&(1<<N.lenbits)-1])>>>16&255,de=65535&Ee,!((X=Ee>>>24)<=Y);){if(H===0)break e;H--,$+=E[D++]<<Y,Y+=8}if(de<16)$>>>=X,Y-=X,N.lens[N.have++]=de;else{if(de===16){for(Oe=X+2;Y<Oe;){if(H===0)break e;H--,$+=E[D++]<<Y,Y+=8}if($>>>=X,Y-=X,N.have===0){_.msg="invalid bit length repeat",N.mode=30;break}be=N.lens[N.have-1],W=3+(3&$),$>>>=2,Y-=2}else if(de===17){for(Oe=X+3;Y<Oe;){if(H===0)break e;H--,$+=E[D++]<<Y,Y+=8}Y-=X,be=0,W=3+(7&($>>>=X)),$>>>=3,Y-=3}else{for(Oe=X+7;Y<Oe;){if(H===0)break e;H--,$+=E[D++]<<Y,Y+=8}Y-=X,be=0,W=11+(127&($>>>=X)),$>>>=7,Y-=7}if(N.have+W>N.nlen+N.ndist){_.msg="invalid bit length repeat",N.mode=30;break}for(;W--;)N.lens[N.have++]=be}}if(N.mode===30)break;if(N.lens[256]===0){_.msg="invalid code -- missing end-of-block",N.mode=30;break}if(N.lenbits=9,Ce={bits:N.lenbits},Ie=C(1,N.lens,0,N.nlen,N.lencode,0,N.work,Ce),N.lenbits=Ce.bits,Ie){_.msg="invalid literal/lengths set",N.mode=30;break}if(N.distbits=6,N.distcode=N.distdyn,Ce={bits:N.distbits},Ie=C(2,N.lens,N.nlen,N.ndist,N.distcode,0,N.work,Ce),N.distbits=Ce.bits,Ie){_.msg="invalid distances set",N.mode=30;break}if(N.mode=20,j===6)break e;case 20:N.mode=21;case 21:if(6<=H&&258<=G){_.next_out=V,_.avail_out=G,_.next_in=D,_.avail_in=H,N.hold=$,N.bits=Y,b(_,O),V=_.next_out,I=_.output,G=_.avail_out,D=_.next_in,E=_.input,H=_.avail_in,$=N.hold,Y=N.bits,N.mode===12&&(N.back=-1);break}for(N.back=0;te=(Ee=N.lencode[$&(1<<N.lenbits)-1])>>>16&255,de=65535&Ee,!((X=Ee>>>24)<=Y);){if(H===0)break e;H--,$+=E[D++]<<Y,Y+=8}if(te&&!(240&te)){for(xe=X,ne=te,ge=de;te=(Ee=N.lencode[ge+(($&(1<<xe+ne)-1)>>xe)])>>>16&255,de=65535&Ee,!(xe+(X=Ee>>>24)<=Y);){if(H===0)break e;H--,$+=E[D++]<<Y,Y+=8}$>>>=xe,Y-=xe,N.back+=xe}if($>>>=X,Y-=X,N.back+=X,N.length=de,te===0){N.mode=26;break}if(32&te){N.back=-1,N.mode=12;break}if(64&te){_.msg="invalid literal/length code",N.mode=30;break}N.extra=15&te,N.mode=22;case 22:if(N.extra){for(Oe=N.extra;Y<Oe;){if(H===0)break e;H--,$+=E[D++]<<Y,Y+=8}N.length+=$&(1<<N.extra)-1,$>>>=N.extra,Y-=N.extra,N.back+=N.extra}N.was=N.length,N.mode=23;case 23:for(;te=(Ee=N.distcode[$&(1<<N.distbits)-1])>>>16&255,de=65535&Ee,!((X=Ee>>>24)<=Y);){if(H===0)break e;H--,$+=E[D++]<<Y,Y+=8}if(!(240&te)){for(xe=X,ne=te,ge=de;te=(Ee=N.distcode[ge+(($&(1<<xe+ne)-1)>>xe)])>>>16&255,de=65535&Ee,!(xe+(X=Ee>>>24)<=Y);){if(H===0)break e;H--,$+=E[D++]<<Y,Y+=8}$>>>=xe,Y-=xe,N.back+=xe}if($>>>=X,Y-=X,N.back+=X,64&te){_.msg="invalid distance code",N.mode=30;break}N.offset=de,N.extra=15&te,N.mode=24;case 24:if(N.extra){for(Oe=N.extra;Y<Oe;){if(H===0)break e;H--,$+=E[D++]<<Y,Y+=8}N.offset+=$&(1<<N.extra)-1,$>>>=N.extra,Y-=N.extra,N.back+=N.extra}if(N.offset>N.dmax){_.msg="invalid distance too far back",N.mode=30;break}N.mode=25;case 25:if(G===0)break e;if(W=O-G,N.offset>W){if((W=N.offset-W)>N.whave&&N.sane){_.msg="invalid distance too far back",N.mode=30;break}K=W>N.wnext?(W-=N.wnext,N.wsize-W):N.wnext-W,W>N.length&&(W=N.length),Q=N.window}else Q=I,K=V-N.offset,W=N.length;for(G<W&&(W=G),G-=W,N.length-=W;I[V++]=Q[K++],--W;);N.length===0&&(N.mode=21);break;case 26:if(G===0)break e;I[V++]=N.length,G--,N.mode=21;break;case 27:if(N.wrap){for(;Y<32;){if(H===0)break e;H--,$|=E[D++]<<Y,Y+=8}if(O-=G,_.total_out+=O,N.total+=O,O&&(_.adler=N.check=N.flags?y(N.check,I,O,V-O):v(N.check,I,O,V-O)),O=G,(N.flags?$:M($))!==N.check){_.msg="incorrect data check",N.mode=30;break}Y=$=0}N.mode=28;case 28:if(N.wrap&&N.flags){for(;Y<32;){if(H===0)break e;H--,$+=E[D++]<<Y,Y+=8}if($!==(4294967295&N.total)){_.msg="incorrect length check",N.mode=30;break}Y=$=0}N.mode=29;case 29:Ie=1;break e;case 30:Ie=-3;break e;case 31:return-4;case 32:default:return T}return _.next_out=V,_.avail_out=G,_.next_in=D,_.avail_in=H,N.hold=$,N.bits=Y,(N.wsize||O!==_.avail_out&&N.mode<30&&(N.mode<27||j!==4))&&w(_,_.output,_.next_out,O-_.avail_out)?(N.mode=31,-4):(F-=_.avail_in,O-=_.avail_out,_.total_in+=F,_.total_out+=O,N.total+=O,N.wrap&&O&&(_.adler=N.check=N.flags?y(N.check,I,O,_.next_out-O):v(N.check,I,O,_.next_out-O)),_.data_type=N.bits+(N.last?64:0)+(N.mode===12?128:0)+(N.mode===20||N.mode===15?256:0),(F==0&&O===0||j===4)&&Ie===0&&(Ie=-5),Ie)},x.inflateEnd=function(_){if(!_||!_.state)return T;var j=_.state;return j.window&&(j.window=null),_.state=null,0},x.inflateGetHeader=function(_,j){var N;return _&&_.state&&2&(N=_.state).wrap?((N.head=j).done=!1,0):T},x.inflateSetDictionary=function(_,j){var N,E=j.length;return _&&_.state?(N=_.state).wrap!==0&&N.mode!==11?T:N.mode===11&&v(1,j,E,0)!==N.check?-3:w(_,j,E,E)?(N.mode=31,-4):(N.havedict=1,0):T},x.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(m,p,x){var g=m("../utils/common"),v=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],y=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],b=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],C=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];p.exports=function(T,M,U,L,P,B,q,z){var k,R,S,w,_,j,N,E,I,D=z.bits,V=0,H=0,G=0,$=0,Y=0,F=0,O=0,W=0,K=0,Q=0,X=null,te=0,de=new g.Buf16(16),xe=new g.Buf16(16),ne=null,ge=0;for(V=0;V<=15;V++)de[V]=0;for(H=0;H<L;H++)de[M[U+H]]++;for(Y=D,$=15;1<=$&&de[$]===0;$--);if($<Y&&(Y=$),$===0)return P[B++]=20971520,P[B++]=20971520,z.bits=1,0;for(G=1;G<$&&de[G]===0;G++);for(Y<G&&(Y=G),V=W=1;V<=15;V++)if(W<<=1,(W-=de[V])<0)return-1;if(0<W&&(T===0||$!==1))return-1;for(xe[1]=0,V=1;V<15;V++)xe[V+1]=xe[V]+de[V];for(H=0;H<L;H++)M[U+H]!==0&&(q[xe[M[U+H]]++]=H);if(j=T===0?(X=ne=q,19):T===1?(X=v,te-=257,ne=y,ge-=257,256):(X=b,ne=C,-1),V=G,_=B,O=H=Q=0,S=-1,w=(K=1<<(F=Y))-1,T===1&&852<K||T===2&&592<K)return 1;for(;;){for(N=V-O,I=q[H]<j?(E=0,q[H]):q[H]>j?(E=ne[ge+q[H]],X[te+q[H]]):(E=96,0),k=1<<V-O,G=R=1<<F;P[_+(Q>>O)+(R-=k)]=N<<24|E<<16|I|0,R!==0;);for(k=1<<V-1;Q&k;)k>>=1;if(k!==0?(Q&=k-1,Q+=k):Q=0,H++,--de[V]==0){if(V===$)break;V=M[U+q[H]]}if(Y<V&&(Q&w)!==S){for(O===0&&(O=Y),_+=G,W=1<<(F=V-O);F+O<$&&!((W-=de[F+O])<=0);)F++,W<<=1;if(K+=1<<F,T===1&&852<K||T===2&&592<K)return 1;P[S=Q&w]=Y<<24|F<<16|_-B|0}}return Q!==0&&(P[_+Q]=V-O<<24|64<<16|0),z.bits=Y,0}},{"../utils/common":41}],51:[function(m,p,x){p.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(m,p,x){var g=m("../utils/common");function v(ne){for(var ge=ne.length;0<=--ge;)ne[ge]=0}var y=256,b=286,C=30,T=15,M=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],U=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],L=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],B=new Array(576);v(B);var q=new Array(60);v(q);var z=new Array(512);v(z);var k=new Array(256);v(k);var R=new Array(29);v(R);var S,w,_,j=new Array(C);function N(ne,ge,be,Ie,Ce){this.static_tree=ne,this.extra_bits=ge,this.extra_base=be,this.elems=Ie,this.max_length=Ce,this.has_stree=ne&&ne.length}function E(ne,ge){this.dyn_tree=ne,this.max_code=0,this.stat_desc=ge}function I(ne){return ne<256?z[ne]:z[256+(ne>>>7)]}function D(ne,ge){ne.pending_buf[ne.pending++]=255&ge,ne.pending_buf[ne.pending++]=ge>>>8&255}function V(ne,ge,be){ne.bi_valid>16-be?(ne.bi_buf|=ge<<ne.bi_valid&65535,D(ne,ne.bi_buf),ne.bi_buf=ge>>16-ne.bi_valid,ne.bi_valid+=be-16):(ne.bi_buf|=ge<<ne.bi_valid&65535,ne.bi_valid+=be)}function H(ne,ge,be){V(ne,be[2*ge],be[2*ge+1])}function G(ne,ge){for(var be=0;be|=1&ne,ne>>>=1,be<<=1,0<--ge;);return be>>>1}function $(ne,ge,be){var Ie,Ce,Oe=new Array(16),Ee=0;for(Ie=1;Ie<=T;Ie++)Oe[Ie]=Ee=Ee+be[Ie-1]<<1;for(Ce=0;Ce<=ge;Ce++){var pe=ne[2*Ce+1];pe!==0&&(ne[2*Ce]=G(Oe[pe]++,pe))}}function Y(ne){var ge;for(ge=0;ge<b;ge++)ne.dyn_ltree[2*ge]=0;for(ge=0;ge<C;ge++)ne.dyn_dtree[2*ge]=0;for(ge=0;ge<19;ge++)ne.bl_tree[2*ge]=0;ne.dyn_ltree[512]=1,ne.opt_len=ne.static_len=0,ne.last_lit=ne.matches=0}function F(ne){8<ne.bi_valid?D(ne,ne.bi_buf):0<ne.bi_valid&&(ne.pending_buf[ne.pending++]=ne.bi_buf),ne.bi_buf=0,ne.bi_valid=0}function O(ne,ge,be,Ie){var Ce=2*ge,Oe=2*be;return ne[Ce]<ne[Oe]||ne[Ce]===ne[Oe]&&Ie[ge]<=Ie[be]}function W(ne,ge,be){for(var Ie=ne.heap[be],Ce=be<<1;Ce<=ne.heap_len&&(Ce<ne.heap_len&&O(ge,ne.heap[Ce+1],ne.heap[Ce],ne.depth)&&Ce++,!O(ge,Ie,ne.heap[Ce],ne.depth));)ne.heap[be]=ne.heap[Ce],be=Ce,Ce<<=1;ne.heap[be]=Ie}function K(ne,ge,be){var Ie,Ce,Oe,Ee,pe=0;if(ne.last_lit!==0)for(;Ie=ne.pending_buf[ne.d_buf+2*pe]<<8|ne.pending_buf[ne.d_buf+2*pe+1],Ce=ne.pending_buf[ne.l_buf+pe],pe++,Ie===0?H(ne,Ce,ge):(H(ne,(Oe=k[Ce])+y+1,ge),(Ee=M[Oe])!==0&&V(ne,Ce-=R[Oe],Ee),H(ne,Oe=I(--Ie),be),(Ee=U[Oe])!==0&&V(ne,Ie-=j[Oe],Ee)),pe<ne.last_lit;);H(ne,256,ge)}function Q(ne,ge){var be,Ie,Ce,Oe=ge.dyn_tree,Ee=ge.stat_desc.static_tree,pe=ge.stat_desc.has_stree,Ae=ge.stat_desc.elems,st=-1;for(ne.heap_len=0,ne.heap_max=573,be=0;be<Ae;be++)Oe[2*be]!==0?(ne.heap[++ne.heap_len]=st=be,ne.depth[be]=0):Oe[2*be+1]=0;for(;ne.heap_len<2;)Oe[2*(Ce=ne.heap[++ne.heap_len]=st<2?++st:0)]=1,ne.depth[Ce]=0,ne.opt_len--,pe&&(ne.static_len-=Ee[2*Ce+1]);for(ge.max_code=st,be=ne.heap_len>>1;1<=be;be--)W(ne,Oe,be);for(Ce=Ae;be=ne.heap[1],ne.heap[1]=ne.heap[ne.heap_len--],W(ne,Oe,1),Ie=ne.heap[1],ne.heap[--ne.heap_max]=be,ne.heap[--ne.heap_max]=Ie,Oe[2*Ce]=Oe[2*be]+Oe[2*Ie],ne.depth[Ce]=(ne.depth[be]>=ne.depth[Ie]?ne.depth[be]:ne.depth[Ie])+1,Oe[2*be+1]=Oe[2*Ie+1]=Ce,ne.heap[1]=Ce++,W(ne,Oe,1),2<=ne.heap_len;);ne.heap[--ne.heap_max]=ne.heap[1],function(qe,ie){var ae,we,ve,He,$e,ue,oe=ie.dyn_tree,_e=ie.max_code,Me=ie.stat_desc.static_tree,ze=ie.stat_desc.has_stree,Xe=ie.stat_desc.extra_bits,Ve=ie.stat_desc.extra_base,ot=ie.stat_desc.max_length,xt=0;for(He=0;He<=T;He++)qe.bl_count[He]=0;for(oe[2*qe.heap[qe.heap_max]+1]=0,ae=qe.heap_max+1;ae<573;ae++)ot<(He=oe[2*oe[2*(we=qe.heap[ae])+1]+1]+1)&&(He=ot,xt++),oe[2*we+1]=He,_e<we||(qe.bl_count[He]++,$e=0,Ve<=we&&($e=Xe[we-Ve]),ue=oe[2*we],qe.opt_len+=ue*(He+$e),ze&&(qe.static_len+=ue*(Me[2*we+1]+$e)));if(xt!==0){do{for(He=ot-1;qe.bl_count[He]===0;)He--;qe.bl_count[He]--,qe.bl_count[He+1]+=2,qe.bl_count[ot]--,xt-=2}while(0<xt);for(He=ot;He!==0;He--)for(we=qe.bl_count[He];we!==0;)_e<(ve=qe.heap[--ae])||(oe[2*ve+1]!==He&&(qe.opt_len+=(He-oe[2*ve+1])*oe[2*ve],oe[2*ve+1]=He),we--)}}(ne,ge),$(Oe,st,ne.bl_count)}function X(ne,ge,be){var Ie,Ce,Oe=-1,Ee=ge[1],pe=0,Ae=7,st=4;for(Ee===0&&(Ae=138,st=3),ge[2*(be+1)+1]=65535,Ie=0;Ie<=be;Ie++)Ce=Ee,Ee=ge[2*(Ie+1)+1],++pe<Ae&&Ce===Ee||(pe<st?ne.bl_tree[2*Ce]+=pe:Ce!==0?(Ce!==Oe&&ne.bl_tree[2*Ce]++,ne.bl_tree[32]++):pe<=10?ne.bl_tree[34]++:ne.bl_tree[36]++,Oe=Ce,st=(pe=0)===Ee?(Ae=138,3):Ce===Ee?(Ae=6,3):(Ae=7,4))}function te(ne,ge,be){var Ie,Ce,Oe=-1,Ee=ge[1],pe=0,Ae=7,st=4;for(Ee===0&&(Ae=138,st=3),Ie=0;Ie<=be;Ie++)if(Ce=Ee,Ee=ge[2*(Ie+1)+1],!(++pe<Ae&&Ce===Ee)){if(pe<st)for(;H(ne,Ce,ne.bl_tree),--pe!=0;);else Ce!==0?(Ce!==Oe&&(H(ne,Ce,ne.bl_tree),pe--),H(ne,16,ne.bl_tree),V(ne,pe-3,2)):pe<=10?(H(ne,17,ne.bl_tree),V(ne,pe-3,3)):(H(ne,18,ne.bl_tree),V(ne,pe-11,7));Oe=Ce,st=(pe=0)===Ee?(Ae=138,3):Ce===Ee?(Ae=6,3):(Ae=7,4)}}v(j);var de=!1;function xe(ne,ge,be,Ie){V(ne,0+(Ie?1:0),3),function(Ce,Oe,Ee,pe){F(Ce),D(Ce,Ee),D(Ce,~Ee),g.arraySet(Ce.pending_buf,Ce.window,Oe,Ee,Ce.pending),Ce.pending+=Ee}(ne,ge,be)}x._tr_init=function(ne){de||(function(){var ge,be,Ie,Ce,Oe,Ee=new Array(16);for(Ce=Ie=0;Ce<28;Ce++)for(R[Ce]=Ie,ge=0;ge<1<<M[Ce];ge++)k[Ie++]=Ce;for(k[Ie-1]=Ce,Ce=Oe=0;Ce<16;Ce++)for(j[Ce]=Oe,ge=0;ge<1<<U[Ce];ge++)z[Oe++]=Ce;for(Oe>>=7;Ce<C;Ce++)for(j[Ce]=Oe<<7,ge=0;ge<1<<U[Ce]-7;ge++)z[256+Oe++]=Ce;for(be=0;be<=T;be++)Ee[be]=0;for(ge=0;ge<=143;)B[2*ge+1]=8,ge++,Ee[8]++;for(;ge<=255;)B[2*ge+1]=9,ge++,Ee[9]++;for(;ge<=279;)B[2*ge+1]=7,ge++,Ee[7]++;for(;ge<=287;)B[2*ge+1]=8,ge++,Ee[8]++;for($(B,287,Ee),ge=0;ge<C;ge++)q[2*ge+1]=5,q[2*ge]=G(ge,5);S=new N(B,M,257,b,T),w=new N(q,U,0,C,T),_=new N(new Array(0),L,0,19,7)}(),de=!0),ne.l_desc=new E(ne.dyn_ltree,S),ne.d_desc=new E(ne.dyn_dtree,w),ne.bl_desc=new E(ne.bl_tree,_),ne.bi_buf=0,ne.bi_valid=0,Y(ne)},x._tr_stored_block=xe,x._tr_flush_block=function(ne,ge,be,Ie){var Ce,Oe,Ee=0;0<ne.level?(ne.strm.data_type===2&&(ne.strm.data_type=function(pe){var Ae,st=4093624447;for(Ae=0;Ae<=31;Ae++,st>>>=1)if(1&st&&pe.dyn_ltree[2*Ae]!==0)return 0;if(pe.dyn_ltree[18]!==0||pe.dyn_ltree[20]!==0||pe.dyn_ltree[26]!==0)return 1;for(Ae=32;Ae<y;Ae++)if(pe.dyn_ltree[2*Ae]!==0)return 1;return 0}(ne)),Q(ne,ne.l_desc),Q(ne,ne.d_desc),Ee=function(pe){var Ae;for(X(pe,pe.dyn_ltree,pe.l_desc.max_code),X(pe,pe.dyn_dtree,pe.d_desc.max_code),Q(pe,pe.bl_desc),Ae=18;3<=Ae&&pe.bl_tree[2*P[Ae]+1]===0;Ae--);return pe.opt_len+=3*(Ae+1)+5+5+4,Ae}(ne),Ce=ne.opt_len+3+7>>>3,(Oe=ne.static_len+3+7>>>3)<=Ce&&(Ce=Oe)):Ce=Oe=be+5,be+4<=Ce&&ge!==-1?xe(ne,ge,be,Ie):ne.strategy===4||Oe===Ce?(V(ne,2+(Ie?1:0),3),K(ne,B,q)):(V(ne,4+(Ie?1:0),3),function(pe,Ae,st,qe){var ie;for(V(pe,Ae-257,5),V(pe,st-1,5),V(pe,qe-4,4),ie=0;ie<qe;ie++)V(pe,pe.bl_tree[2*P[ie]+1],3);te(pe,pe.dyn_ltree,Ae-1),te(pe,pe.dyn_dtree,st-1)}(ne,ne.l_desc.max_code+1,ne.d_desc.max_code+1,Ee+1),K(ne,ne.dyn_ltree,ne.dyn_dtree)),Y(ne),Ie&&F(ne)},x._tr_tally=function(ne,ge,be){return ne.pending_buf[ne.d_buf+2*ne.last_lit]=ge>>>8&255,ne.pending_buf[ne.d_buf+2*ne.last_lit+1]=255&ge,ne.pending_buf[ne.l_buf+ne.last_lit]=255&be,ne.last_lit++,ge===0?ne.dyn_ltree[2*be]++:(ne.matches++,ge--,ne.dyn_ltree[2*(k[be]+y+1)]++,ne.dyn_dtree[2*I(ge)]++),ne.last_lit===ne.lit_bufsize-1},x._tr_align=function(ne){V(ne,2,3),H(ne,256,B),function(ge){ge.bi_valid===16?(D(ge,ge.bi_buf),ge.bi_buf=0,ge.bi_valid=0):8<=ge.bi_valid&&(ge.pending_buf[ge.pending++]=255&ge.bi_buf,ge.bi_buf>>=8,ge.bi_valid-=8)}(ne)}},{"../utils/common":41}],53:[function(m,p,x){p.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(m,p,x){(function(g){(function(v,y){if(!v.setImmediate){var b,C,T,M,U=1,L={},P=!1,B=v.document,q=Object.getPrototypeOf&&Object.getPrototypeOf(v);q=q&&q.setTimeout?q:v,b={}.toString.call(v.process)==="[object process]"?function(S){o.nextTick(function(){k(S)})}:function(){if(v.postMessage&&!v.importScripts){var S=!0,w=v.onmessage;return v.onmessage=function(){S=!1},v.postMessage("","*"),v.onmessage=w,S}}()?(M="setImmediate$"+Math.random()+"$",v.addEventListener?v.addEventListener("message",R,!1):v.attachEvent("onmessage",R),function(S){v.postMessage(M+S,"*")}):v.MessageChannel?((T=new MessageChannel).port1.onmessage=function(S){k(S.data)},function(S){T.port2.postMessage(S)}):B&&"onreadystatechange"in B.createElement("script")?(C=B.documentElement,function(S){var w=B.createElement("script");w.onreadystatechange=function(){k(S),w.onreadystatechange=null,C.removeChild(w),w=null},C.appendChild(w)}):function(S){setTimeout(k,0,S)},q.setImmediate=function(S){typeof S!="function"&&(S=new Function(""+S));for(var w=new Array(arguments.length-1),_=0;_<w.length;_++)w[_]=arguments[_+1];var j={callback:S,args:w};return L[U]=j,b(U),U++},q.clearImmediate=z}function z(S){delete L[S]}function k(S){if(P)setTimeout(k,0,S);else{var w=L[S];if(w){P=!0;try{(function(_){var j=_.callback,N=_.args;switch(N.length){case 0:j();break;case 1:j(N[0]);break;case 2:j(N[0],N[1]);break;case 3:j(N[0],N[1],N[2]);break;default:j.apply(void 0,N)}})(w)}finally{z(S),P=!1}}}}function R(S){S.source===v&&typeof S.data=="string"&&S.data.indexOf(M)===0&&k(+S.data.slice(M.length))}})(typeof self>"u"?g===void 0?this:g:self)}).call(this,a!==void 0?a:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}).call(this)}).call(this,s("_process"),typeof _s<"u"?_s:typeof self<"u"?self:typeof window<"u"?window:{},s("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],s("timers").setImmediate)},{_process:467,buffer:220,timers:523}],442:[function(s,n,c){(function(o){(function(){var a=/[\\^$.*+?()[\]{}|]/g,d=RegExp(a.source),l=typeof o=="object"&&o&&o.Object===Object&&o,i=typeof self=="object"&&self&&self.Object===Object&&self,u=l||i||Function("return this")(),f=Object.prototype.toString,h=u.Symbol,m=h?h.prototype:void 0,p=m?m.toString:void 0;function x(g){if(typeof g=="string")return g;if(function(y){return typeof y=="symbol"||function(b){return!!b&&typeof b=="object"}(y)&&f.call(y)=="[object Symbol]"}(g))return p?p.call(g):"";var v=g+"";return v=="0"&&1/g==-1/0?"-0":v}n.exports=function(g){var v;return(g=(v=g)==null?"":x(v))&&d.test(g)?g.replace(a,"\\$&"):g}}).call(this)}).call(this,typeof _s<"u"?_s:typeof self<"u"?self:typeof window<"u"?window:{})},{}],443:[function(s,n,c){(function(o){(function(){var a="[object Arguments]",d="[object Map]",l="[object Object]",i="[object Set]",u=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,f=/^\w*$/,h=/^\./,m=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,p=/\\(\\)?/g,x=/^\[object .+?Constructor\]$/,g=/^(?:0|[1-9]\d*)$/,v={};v["[object Float32Array]"]=v["[object Float64Array]"]=v["[object Int8Array]"]=v["[object Int16Array]"]=v["[object Int32Array]"]=v["[object Uint8Array]"]=v["[object Uint8ClampedArray]"]=v["[object Uint16Array]"]=v["[object Uint32Array]"]=!0,v[a]=v["[object Array]"]=v["[object ArrayBuffer]"]=v["[object Boolean]"]=v["[object DataView]"]=v["[object Date]"]=v["[object Error]"]=v["[object Function]"]=v[d]=v["[object Number]"]=v[l]=v["[object RegExp]"]=v[i]=v["[object String]"]=v["[object WeakMap]"]=!1;var y=typeof o=="object"&&o&&o.Object===Object&&o,b=typeof self=="object"&&self&&self.Object===Object&&self,C=y||b||Function("return this")(),T=typeof c=="object"&&c&&!c.nodeType&&c,M=T&&typeof n=="object"&&n&&!n.nodeType&&n,U=M&&M.exports===T&&y.process,L=function(){try{return U&&U.binding("util")}catch{}}(),P=L&&L.isTypedArray;function B(le,Le,rt,pt){for(var Tt=-1,vt=le?le.length:0;++Tt<vt;){var _t=le[Tt];Le(pt,_t,rt(_t),le)}return pt}function q(le,Le){for(var rt=-1,pt=le?le.length:0;++rt<pt;)if(Le(le[rt],rt,le))return!0;return!1}function z(le){var Le=!1;if(le!=null&&typeof le.toString!="function")try{Le=!!(le+"")}catch{}return Le}function k(le){var Le=-1,rt=Array(le.size);return le.forEach(function(pt,Tt){rt[++Le]=[Tt,pt]}),rt}function R(le){var Le=-1,rt=Array(le.size);return le.forEach(function(pt){rt[++Le]=pt}),rt}var S,w,_,j=Array.prototype,N=Function.prototype,E=Object.prototype,I=C["__core-js_shared__"],D=(S=/[^.]+$/.exec(I&&I.keys&&I.keys.IE_PROTO||""))?"Symbol(src)_1."+S:"",V=N.toString,H=E.hasOwnProperty,G=E.toString,$=RegExp("^"+V.call(H).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Y=C.Symbol,F=C.Uint8Array,O=E.propertyIsEnumerable,W=j.splice,K=(w=Object.keys,_=Object,function(le){return w(_(le))}),Q=Ue(C,"DataView"),X=Ue(C,"Map"),te=Ue(C,"Promise"),de=Ue(C,"Set"),xe=Ue(C,"WeakMap"),ne=Ue(Object,"create"),ge=je(Q),be=je(X),Ie=je(te),Ce=je(de),Oe=je(xe),Ee=Y?Y.prototype:void 0,pe=Ee?Ee.valueOf:void 0,Ae=Ee?Ee.toString:void 0;function st(le){var Le=-1,rt=le?le.length:0;for(this.clear();++Le<rt;){var pt=le[Le];this.set(pt[0],pt[1])}}function qe(le){var Le=-1,rt=le?le.length:0;for(this.clear();++Le<rt;){var pt=le[Le];this.set(pt[0],pt[1])}}function ie(le){var Le=-1,rt=le?le.length:0;for(this.clear();++Le<rt;){var pt=le[Le];this.set(pt[0],pt[1])}}function ae(le){var Le=-1,rt=le?le.length:0;for(this.__data__=new ie;++Le<rt;)this.add(le[Le])}function we(le){this.__data__=new qe(le)}function ve(le,Le){var rt=gt(le)||kt(le)?function(_t,Bt){for(var Qt=-1,Gt=Array(_t);++Qt<_t;)Gt[Qt]=Bt(Qt);return Gt}(le.length,String):[],pt=rt.length,Tt=!!pt;for(var vt in le)!Le&&!H.call(le,vt)||Tt&&(vt=="length"||ye(vt,pt))||rt.push(vt);return rt}function He(le,Le){for(var rt=le.length;rt--;)if(dt(le[rt][0],Le))return rt;return-1}function $e(le,Le,rt,pt){return oe(le,function(Tt,vt,_t){Le(pt,Tt,rt(Tt),_t)}),pt}st.prototype.clear=function(){this.__data__=ne?ne(null):{}},st.prototype.delete=function(le){return this.has(le)&&delete this.__data__[le]},st.prototype.get=function(le){var Le=this.__data__;if(ne){var rt=Le[le];return rt==="__lodash_hash_undefined__"?void 0:rt}return H.call(Le,le)?Le[le]:void 0},st.prototype.has=function(le){var Le=this.__data__;return ne?Le[le]!==void 0:H.call(Le,le)},st.prototype.set=function(le,Le){return this.__data__[le]=ne&&Le===void 0?"__lodash_hash_undefined__":Le,this},qe.prototype.clear=function(){this.__data__=[]},qe.prototype.delete=function(le){var Le=this.__data__,rt=He(Le,le);return!(rt<0)&&(rt==Le.length-1?Le.pop():W.call(Le,rt,1),!0)},qe.prototype.get=function(le){var Le=this.__data__,rt=He(Le,le);return rt<0?void 0:Le[rt][1]},qe.prototype.has=function(le){return He(this.__data__,le)>-1},qe.prototype.set=function(le,Le){var rt=this.__data__,pt=He(rt,le);return pt<0?rt.push([le,Le]):rt[pt][1]=Le,this},ie.prototype.clear=function(){this.__data__={hash:new st,map:new(X||qe),string:new st}},ie.prototype.delete=function(le){return Be(this,le).delete(le)},ie.prototype.get=function(le){return Be(this,le).get(le)},ie.prototype.has=function(le){return Be(this,le).has(le)},ie.prototype.set=function(le,Le){return Be(this,le).set(le,Le),this},ae.prototype.add=ae.prototype.push=function(le){return this.__data__.set(le,"__lodash_hash_undefined__"),this},ae.prototype.has=function(le){return this.__data__.has(le)},we.prototype.clear=function(){this.__data__=new qe},we.prototype.delete=function(le){return this.__data__.delete(le)},we.prototype.get=function(le){return this.__data__.get(le)},we.prototype.has=function(le){return this.__data__.has(le)},we.prototype.set=function(le,Le){var rt=this.__data__;if(rt instanceof qe){var pt=rt.__data__;if(!X||pt.length<199)return pt.push([le,Le]),this;rt=this.__data__=new ie(pt)}return rt.set(le,Le),this};var ue,oe=(ue=function(le,Le){return le&&_e(le,Le,Je)},function(le,Le){if(le==null)return le;if(!wt(le))return ue(le,Le);for(var rt=le.length,pt=-1,Tt=Object(le);++pt<rt&&Le(Tt[pt],pt,Tt)!==!1;);return le}),_e=function(le){return function(Le,rt,pt){for(var Tt=-1,vt=Object(Le),_t=pt(Le),Bt=_t.length;Bt--;){var Qt=_t[le?Bt:++Tt];if(rt(vt[Qt],Qt,vt)===!1)break}return Le}}();function Me(le,Le){for(var rt=0,pt=(Le=ke(Le,le)?[Le]:ft(Le)).length;le!=null&&rt<pt;)le=le[he(Le[rt++])];return rt&&rt==pt?le:void 0}function ze(le,Le){return le!=null&&Le in Object(le)}function Xe(le,Le,rt,pt,Tt){return le===Le||(le==null||Le==null||!yt(le)&&!Ge(Le)?le!=le&&Le!=Le:function(vt,_t,Bt,Qt,Gt,Ut){var gs=gt(vt),ds=gt(_t),cs="[object Array]",Cs="[object Array]";gs||(cs=(cs=re(vt))==a?l:cs),ds||(Cs=(Cs=re(_t))==a?l:Cs);var Fs=cs==l&&!z(vt),Hs=Cs==l&&!z(_t),Nr=cs==Cs;if(Nr&&!Fs)return Ut||(Ut=new we),gs||ce(vt)?at(vt,_t,Bt,Qt,Gt,Ut):function(us,hs,Yr,wn,Sr,xr,zr){switch(Yr){case"[object DataView]":if(us.byteLength!=hs.byteLength||us.byteOffset!=hs.byteOffset)return!1;us=us.buffer,hs=hs.buffer;case"[object ArrayBuffer]":return!(us.byteLength!=hs.byteLength||!wn(new F(us),new F(hs)));case"[object Boolean]":case"[object Date]":case"[object Number]":return dt(+us,+hs);case"[object Error]":return us.name==hs.name&&us.message==hs.message;case"[object RegExp]":case"[object String]":return us==hs+"";case d:var Or=k;case i:var Pn=2&xr;if(Or||(Or=R),us.size!=hs.size&&!Pn)return!1;var me=zr.get(us);if(me)return me==hs;xr|=1,zr.set(us,hs);var ct=at(Or(us),Or(hs),wn,Sr,xr,zr);return zr.delete(us),ct;case"[object Symbol]":if(pe)return pe.call(us)==pe.call(hs)}return!1}(vt,_t,cs,Bt,Qt,Gt,Ut);if(!(2&Gt)){var Kr=Fs&&H.call(vt,"__wrapped__"),vn=Hs&&H.call(_t,"__wrapped__");if(Kr||vn){var Gn=Kr?vt.value():vt,bn=vn?_t.value():_t;return Ut||(Ut=new we),Bt(Gn,bn,Qt,Gt,Ut)}}return Nr?(Ut||(Ut=new we),function(us,hs,Yr,wn,Sr,xr){var zr=2&Sr,Or=Je(us),Pn=Or.length,me=Je(hs).length;if(Pn!=me&&!zr)return!1;for(var ct=Pn;ct--;){var Ft=Or[ct];if(!(zr?Ft in hs:H.call(hs,Ft)))return!1}var xs=xr.get(us);if(xs&&xr.get(hs))return xs==hs;var As=!0;xr.set(us,hs),xr.set(hs,us);for(var Cr=zr;++ct<Pn;){Ft=Or[ct];var yr=us[Ft],Ur=hs[Ft];if(wn)var Ls=zr?wn(Ur,yr,Ft,hs,us,xr):wn(yr,Ur,Ft,us,hs,xr);if(!(Ls===void 0?yr===Ur||Yr(yr,Ur,wn,Sr,xr):Ls)){As=!1;break}Cr||(Cr=Ft=="constructor")}if(As&&!Cr){var Mn=us.constructor,Ws=hs.constructor;Mn==Ws||!("constructor"in us)||!("constructor"in hs)||typeof Mn=="function"&&Mn instanceof Mn&&typeof Ws=="function"&&Ws instanceof Ws||(As=!1)}return xr.delete(us),xr.delete(hs),As}(vt,_t,Bt,Qt,Gt,Ut)):!1}(le,Le,Xe,rt,pt,Tt))}function Ve(le){return!(!yt(le)||function(Le){return!!D&&D in Le}(le))&&(Pt(le)||z(le)?$:x).test(je(le))}function ot(le){return typeof le=="function"?le:le==null?ht:typeof le=="object"?gt(le)?function(pt,Tt){return ke(pt)&&Fe(Tt)?Ke(he(pt),Tt):function(vt){var _t=function(Bt,Qt,Gt){var Ut=Bt==null?void 0:Me(Bt,Qt);return Ut===void 0?Gt:Ut}(vt,pt);return _t===void 0&&_t===Tt?function(Bt,Qt){return Bt!=null&&function(Gt,Ut,gs){Ut=ke(Ut,Gt)?[Ut]:ft(Ut);for(var ds,cs=-1,Cs=Ut.length;++cs<Cs;){var Fs=he(Ut[cs]);if(!(ds=Gt!=null&&gs(Gt,Fs)))break;Gt=Gt[Fs]}return ds||!!(Cs=Gt?Gt.length:0)&&bt(Cs)&&ye(Fs,Cs)&&(gt(Gt)||kt(Gt))}(Bt,Qt,ze)}(vt,pt):Xe(Tt,_t,void 0,3)}}(le[0],le[1]):function(pt){var Tt=function(vt){for(var _t=Je(vt),Bt=_t.length;Bt--;){var Qt=_t[Bt],Gt=vt[Qt];_t[Bt]=[Qt,Gt,Fe(Gt)]}return _t}(pt);return Tt.length==1&&Tt[0][2]?Ke(Tt[0][0],Tt[0][1]):function(vt){return vt===pt||function(_t,Bt,Qt,Gt){var Ut=Qt.length,gs=Ut,ds=!Gt;if(_t==null)return!gs;for(_t=Object(_t);Ut--;){var cs=Qt[Ut];if(ds&&cs[2]?cs[1]!==_t[cs[0]]:!(cs[0]in _t))return!1}for(;++Ut<gs;){var Cs=(cs=Qt[Ut])[0],Fs=_t[Cs],Hs=cs[1];if(ds&&cs[2]){if(Fs===void 0&&!(Cs in _t))return!1}else{var Nr=new we;if(Gt)var Kr=Gt(Fs,Hs,Cs,_t,Bt,Nr);if(!(Kr===void 0?Xe(Hs,Fs,Gt,3,Nr):Kr))return!1}}return!0}(vt,pt,Tt)}}(le):ke(Le=le)?(rt=he(Le),function(pt){return pt==null?void 0:pt[rt]}):function(pt){return function(Tt){return Me(Tt,pt)}}(Le);var Le,rt}function xt(le){if(rt=(Le=le)&&Le.constructor,pt=typeof rt=="function"&&rt.prototype||E,Le!==pt)return K(le);var Le,rt,pt,Tt=[];for(var vt in Object(le))H.call(le,vt)&&vt!="constructor"&&Tt.push(vt);return Tt}function ft(le){return gt(le)?le:Qe(le)}function at(le,Le,rt,pt,Tt,vt){var _t=2&Tt,Bt=le.length,Qt=Le.length;if(Bt!=Qt&&!(_t&&Qt>Bt))return!1;var Gt=vt.get(le);if(Gt&&vt.get(Le))return Gt==Le;var Ut=-1,gs=!0,ds=1&Tt?new ae:void 0;for(vt.set(le,Le),vt.set(Le,le);++Ut<Bt;){var cs=le[Ut],Cs=Le[Ut];if(pt)var Fs=_t?pt(Cs,cs,Ut,Le,le,vt):pt(cs,Cs,Ut,le,Le,vt);if(Fs!==void 0){if(Fs)continue;gs=!1;break}if(ds){if(!q(Le,function(Hs,Nr){if(!ds.has(Nr)&&(cs===Hs||rt(cs,Hs,pt,Tt,vt)))return ds.add(Nr)})){gs=!1;break}}else if(cs!==Cs&&!rt(cs,Cs,pt,Tt,vt)){gs=!1;break}}return vt.delete(le),vt.delete(Le),gs}function Be(le,Le){var rt,pt,Tt=le.__data__;return((pt=typeof(rt=Le))=="string"||pt=="number"||pt=="symbol"||pt=="boolean"?rt!=="__proto__":rt===null)?Tt[typeof Le=="string"?"string":"hash"]:Tt.map}function Ue(le,Le){var rt=function(pt,Tt){return pt==null?void 0:pt[Tt]}(le,Le);return Ve(rt)?rt:void 0}var re=function(le){return G.call(le)};function ye(le,Le){return!!(Le=Le??9007199254740991)&&(typeof le=="number"||g.test(le))&&le>-1&&le%1==0&&le<Le}function ke(le,Le){if(gt(le))return!1;var rt=typeof le;return!(rt!="number"&&rt!="symbol"&&rt!="boolean"&&le!=null&&!J(le))||f.test(le)||!u.test(le)||Le!=null&&le in Object(Le)}function Fe(le){return le==le&&!yt(le)}function Ke(le,Le){return function(rt){return rt!=null&&rt[le]===Le&&(Le!==void 0||le in Object(rt))}}(Q&&re(new Q(new ArrayBuffer(1)))!="[object DataView]"||X&&re(new X)!=d||te&&re(te.resolve())!="[object Promise]"||de&&re(new de)!=i||xe&&re(new xe)!="[object WeakMap]")&&(re=function(le){var Le=G.call(le),rt=Le==l?le.constructor:void 0,pt=rt?je(rt):void 0;if(pt)switch(pt){case ge:return"[object DataView]";case be:return d;case Ie:return"[object Promise]";case Ce:return i;case Oe:return"[object WeakMap]"}return Le});var Qe=jt(function(le){var Le;le=(Le=le)==null?"":function(pt){if(typeof pt=="string")return pt;if(J(pt))return Ae?Ae.call(pt):"";var Tt=pt+"";return Tt=="0"&&1/pt==-1/0?"-0":Tt}(Le);var rt=[];return h.test(le)&&rt.push(""),le.replace(m,function(pt,Tt,vt,_t){rt.push(vt?_t.replace(p,"$1"):Tt||pt)}),rt});function he(le){if(typeof le=="string"||J(le))return le;var Le=le+"";return Le=="0"&&1/le==-1/0?"-0":Le}function je(le){if(le!=null){try{return V.call(le)}catch{}try{return le+""}catch{}}return""}var Ne,tt=(Ne=function(le,Le,rt){H.call(le,rt)?le[rt].push(Le):le[rt]=[Le]},function(le,Le){var rt=gt(le)?B:$e,pt={};return rt(le,Ne,ot(Le),pt)});function jt(le,Le){if(typeof le!="function"||Le&&typeof Le!="function")throw new TypeError("Expected a function");var rt=function(){var pt=arguments,Tt=Le?Le.apply(this,pt):pt[0],vt=rt.cache;if(vt.has(Tt))return vt.get(Tt);var _t=le.apply(this,pt);return rt.cache=vt.set(Tt,_t),_t};return rt.cache=new(jt.Cache||ie),rt}function dt(le,Le){return le===Le||le!=le&&Le!=Le}function kt(le){return function(Le){return Ge(Le)&&wt(Le)}(le)&&H.call(le,"callee")&&(!O.call(le,"callee")||G.call(le)==a)}jt.Cache=ie;var gt=Array.isArray;function wt(le){return le!=null&&bt(le.length)&&!Pt(le)}function Pt(le){var Le=yt(le)?G.call(le):"";return Le=="[object Function]"||Le=="[object GeneratorFunction]"}function bt(le){return typeof le=="number"&&le>-1&&le%1==0&&le<=9007199254740991}function yt(le){var Le=typeof le;return!!le&&(Le=="object"||Le=="function")}function Ge(le){return!!le&&typeof le=="object"}function J(le){return typeof le=="symbol"||Ge(le)&&G.call(le)=="[object Symbol]"}var ce=P?function(le){return function(Le){return le(Le)}}(P):function(le){return Ge(le)&&bt(le.length)&&!!v[G.call(le)]};function Je(le){return wt(le)?ve(le):xt(le)}function ht(le){return le}n.exports=tt}).call(this)}).call(this,typeof _s<"u"?_s:typeof self<"u"?self:typeof window<"u"?window:{})},{}],444:[function(s,n,c){var o=Object.prototype.toString;n.exports=function(a){return a===!0||a===!1||function(d){return!!d&&typeof d=="object"}(a)&&o.call(a)=="[object Boolean]"}},{}],445:[function(s,n,c){(function(o){(function(){var a="[object Arguments]",d="[object Map]",l="[object Object]",i="[object Set]",u=/^\[object .+?Constructor\]$/,f=/^(?:0|[1-9]\d*)$/,h={};h["[object Float32Array]"]=h["[object Float64Array]"]=h["[object Int8Array]"]=h["[object Int16Array]"]=h["[object Int32Array]"]=h["[object Uint8Array]"]=h["[object Uint8ClampedArray]"]=h["[object Uint16Array]"]=h["[object Uint32Array]"]=!0,h[a]=h["[object Array]"]=h["[object ArrayBuffer]"]=h["[object Boolean]"]=h["[object DataView]"]=h["[object Date]"]=h["[object Error]"]=h["[object Function]"]=h[d]=h["[object Number]"]=h[l]=h["[object RegExp]"]=h[i]=h["[object String]"]=h["[object WeakMap]"]=!1;var m=typeof o=="object"&&o&&o.Object===Object&&o,p=typeof self=="object"&&self&&self.Object===Object&&self,x=m||p||Function("return this")(),g=typeof c=="object"&&c&&!c.nodeType&&c,v=g&&typeof n=="object"&&n&&!n.nodeType&&n,y=v&&v.exports===g,b=y&&m.process,C=function(){try{return b&&b.binding&&b.binding("util")}catch{}}(),T=C&&C.isTypedArray;function M(he,je){for(var Ne=-1,tt=he==null?0:he.length;++Ne<tt;)if(je(he[Ne],Ne,he))return!0;return!1}function U(he){var je=-1,Ne=Array(he.size);return he.forEach(function(tt,jt){Ne[++je]=[jt,tt]}),Ne}function L(he){var je=-1,Ne=Array(he.size);return he.forEach(function(tt){Ne[++je]=tt}),Ne}var P,B,q,z=Array.prototype,k=Function.prototype,R=Object.prototype,S=x["__core-js_shared__"],w=k.toString,_=R.hasOwnProperty,j=(P=/[^.]+$/.exec(S&&S.keys&&S.keys.IE_PROTO||""))?"Symbol(src)_1."+P:"",N=R.toString,E=RegExp("^"+w.call(_).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),I=y?x.Buffer:void 0,D=x.Symbol,V=x.Uint8Array,H=R.propertyIsEnumerable,G=z.splice,$=D?D.toStringTag:void 0,Y=Object.getOwnPropertySymbols,F=I?I.isBuffer:void 0,O=(B=Object.keys,q=Object,function(he){return B(q(he))}),W=ze(x,"DataView"),K=ze(x,"Map"),Q=ze(x,"Promise"),X=ze(x,"Set"),te=ze(x,"WeakMap"),de=ze(Object,"create"),xe=xt(W),ne=xt(K),ge=xt(Q),be=xt(X),Ie=xt(te),Ce=D?D.prototype:void 0,Oe=Ce?Ce.valueOf:void 0;function Ee(he){var je=-1,Ne=he==null?0:he.length;for(this.clear();++je<Ne;){var tt=he[je];this.set(tt[0],tt[1])}}function pe(he){var je=-1,Ne=he==null?0:he.length;for(this.clear();++je<Ne;){var tt=he[je];this.set(tt[0],tt[1])}}function Ae(he){var je=-1,Ne=he==null?0:he.length;for(this.clear();++je<Ne;){var tt=he[je];this.set(tt[0],tt[1])}}function st(he){var je=-1,Ne=he==null?0:he.length;for(this.__data__=new Ae;++je<Ne;)this.add(he[je])}function qe(he){var je=this.__data__=new pe(he);this.size=je.size}function ie(he,je){var Ne=Be(he),tt=!Ne&&at(he),jt=!Ne&&!tt&&Ue(he),dt=!Ne&&!tt&&!jt&&Ke(he),kt=Ne||tt||jt||dt,gt=kt?function(bt,yt){for(var Ge=-1,J=Array(bt);++Ge<bt;)J[Ge]=yt(Ge);return J}(he.length,String):[],wt=gt.length;for(var Pt in he)!je&&!_.call(he,Pt)||kt&&(Pt=="length"||jt&&(Pt=="offset"||Pt=="parent")||dt&&(Pt=="buffer"||Pt=="byteLength"||Pt=="byteOffset")||ot(Pt,wt))||gt.push(Pt);return gt}function ae(he,je){for(var Ne=he.length;Ne--;)if(ft(he[Ne][0],je))return Ne;return-1}function we(he){return he==null?he===void 0?"[object Undefined]":"[object Null]":$&&$ in Object(he)?function(je){var Ne=_.call(je,$),tt=je[$];try{je[$]=void 0;var jt=!0}catch{}var dt=N.call(je);return jt&&(Ne?je[$]=tt:delete je[$]),dt}(he):function(je){return N.call(je)}(he)}function ve(he){return Fe(he)&&we(he)==a}function He(he,je,Ne,tt,jt){return he===je||(he==null||je==null||!Fe(he)&&!Fe(je)?he!=he&&je!=je:function(dt,kt,gt,wt,Pt,bt){var yt=Be(dt),Ge=Be(kt),J=yt?"[object Array]":Ve(dt),ce=Ge?"[object Array]":Ve(kt),Je=(J=J==a?l:J)==l,ht=(ce=ce==a?l:ce)==l,le=J==ce;if(le&&Ue(dt)){if(!Ue(kt))return!1;yt=!0,Je=!1}if(le&&!Je)return bt||(bt=new qe),yt||Ke(dt)?oe(dt,kt,gt,wt,Pt,bt):function(vt,_t,Bt,Qt,Gt,Ut,gs){switch(Bt){case"[object DataView]":if(vt.byteLength!=_t.byteLength||vt.byteOffset!=_t.byteOffset)return!1;vt=vt.buffer,_t=_t.buffer;case"[object ArrayBuffer]":return!(vt.byteLength!=_t.byteLength||!Ut(new V(vt),new V(_t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return ft(+vt,+_t);case"[object Error]":return vt.name==_t.name&&vt.message==_t.message;case"[object RegExp]":case"[object String]":return vt==_t+"";case d:var ds=U;case i:var cs=1&Qt;if(ds||(ds=L),vt.size!=_t.size&&!cs)return!1;var Cs=gs.get(vt);if(Cs)return Cs==_t;Qt|=2,gs.set(vt,_t);var Fs=oe(ds(vt),ds(_t),Qt,Gt,Ut,gs);return gs.delete(vt),Fs;case"[object Symbol]":if(Oe)return Oe.call(vt)==Oe.call(_t)}return!1}(dt,kt,J,gt,wt,Pt,bt);if(!(1&gt)){var Le=Je&&_.call(dt,"__wrapped__"),rt=ht&&_.call(kt,"__wrapped__");if(Le||rt){var pt=Le?dt.value():dt,Tt=rt?kt.value():kt;return bt||(bt=new qe),Pt(pt,Tt,gt,wt,bt)}}return le?(bt||(bt=new qe),function(vt,_t,Bt,Qt,Gt,Ut){var gs=1&Bt,ds=_e(vt),cs=ds.length,Cs=_e(_t).length;if(cs!=Cs&&!gs)return!1;for(var Fs=cs;Fs--;){var Hs=ds[Fs];if(!(gs?Hs in _t:_.call(_t,Hs)))return!1}var Nr=Ut.get(vt);if(Nr&&Ut.get(_t))return Nr==_t;var Kr=!0;Ut.set(vt,_t),Ut.set(_t,vt);for(var vn=gs;++Fs<cs;){Hs=ds[Fs];var Gn=vt[Hs],bn=_t[Hs];if(Qt)var us=gs?Qt(bn,Gn,Hs,_t,vt,Ut):Qt(Gn,bn,Hs,vt,_t,Ut);if(!(us===void 0?Gn===bn||Gt(Gn,bn,Bt,Qt,Ut):us)){Kr=!1;break}vn||(vn=Hs=="constructor")}if(Kr&&!vn){var hs=vt.constructor,Yr=_t.constructor;hs==Yr||!("constructor"in vt)||!("constructor"in _t)||typeof hs=="function"&&hs instanceof hs&&typeof Yr=="function"&&Yr instanceof Yr||(Kr=!1)}return Ut.delete(vt),Ut.delete(_t),Kr}(dt,kt,gt,wt,Pt,bt)):!1}(he,je,Ne,tt,He,jt))}function $e(he){return!(!ke(he)||function(je){return!!j&&j in je}(he))&&(re(he)?E:u).test(xt(he))}function ue(he){if(Ne=(je=he)&&je.constructor,tt=typeof Ne=="function"&&Ne.prototype||R,je!==tt)return O(he);var je,Ne,tt,jt=[];for(var dt in Object(he))_.call(he,dt)&&dt!="constructor"&&jt.push(dt);return jt}function oe(he,je,Ne,tt,jt,dt){var kt=1&Ne,gt=he.length,wt=je.length;if(gt!=wt&&!(kt&&wt>gt))return!1;var Pt=dt.get(he);if(Pt&&dt.get(je))return Pt==je;var bt=-1,yt=!0,Ge=2&Ne?new st:void 0;for(dt.set(he,je),dt.set(je,he);++bt<gt;){var J=he[bt],ce=je[bt];if(tt)var Je=kt?tt(ce,J,bt,je,he,dt):tt(J,ce,bt,he,je,dt);if(Je!==void 0){if(Je)continue;yt=!1;break}if(Ge){if(!M(je,function(ht,le){if(Le=le,!Ge.has(Le)&&(J===ht||jt(J,ht,Ne,tt,dt)))return Ge.push(le);var Le})){yt=!1;break}}else if(J!==ce&&!jt(J,ce,Ne,tt,dt)){yt=!1;break}}return dt.delete(he),dt.delete(je),yt}function _e(he){return function(je,Ne,tt){var jt=Ne(je);return Be(je)?jt:function(dt,kt){for(var gt=-1,wt=kt.length,Pt=dt.length;++gt<wt;)dt[Pt+gt]=kt[gt];return dt}(jt,tt(je))}(he,Qe,Xe)}function Me(he,je){var Ne,tt,jt=he.__data__;return((tt=typeof(Ne=je))=="string"||tt=="number"||tt=="symbol"||tt=="boolean"?Ne!=="__proto__":Ne===null)?jt[typeof je=="string"?"string":"hash"]:jt.map}function ze(he,je){var Ne=function(tt,jt){return tt==null?void 0:tt[jt]}(he,je);return $e(Ne)?Ne:void 0}Ee.prototype.clear=function(){this.__data__=de?de(null):{},this.size=0},Ee.prototype.delete=function(he){var je=this.has(he)&&delete this.__data__[he];return this.size-=je?1:0,je},Ee.prototype.get=function(he){var je=this.__data__;if(de){var Ne=je[he];return Ne==="__lodash_hash_undefined__"?void 0:Ne}return _.call(je,he)?je[he]:void 0},Ee.prototype.has=function(he){var je=this.__data__;return de?je[he]!==void 0:_.call(je,he)},Ee.prototype.set=function(he,je){var Ne=this.__data__;return this.size+=this.has(he)?0:1,Ne[he]=de&&je===void 0?"__lodash_hash_undefined__":je,this},pe.prototype.clear=function(){this.__data__=[],this.size=0},pe.prototype.delete=function(he){var je=this.__data__,Ne=ae(je,he);return!(Ne<0)&&(Ne==je.length-1?je.pop():G.call(je,Ne,1),--this.size,!0)},pe.prototype.get=function(he){var je=this.__data__,Ne=ae(je,he);return Ne<0?void 0:je[Ne][1]},pe.prototype.has=function(he){return ae(this.__data__,he)>-1},pe.prototype.set=function(he,je){var Ne=this.__data__,tt=ae(Ne,he);return tt<0?(++this.size,Ne.push([he,je])):Ne[tt][1]=je,this},Ae.prototype.clear=function(){this.size=0,this.__data__={hash:new Ee,map:new(K||pe),string:new Ee}},Ae.prototype.delete=function(he){var je=Me(this,he).delete(he);return this.size-=je?1:0,je},Ae.prototype.get=function(he){return Me(this,he).get(he)},Ae.prototype.has=function(he){return Me(this,he).has(he)},Ae.prototype.set=function(he,je){var Ne=Me(this,he),tt=Ne.size;return Ne.set(he,je),this.size+=Ne.size==tt?0:1,this},st.prototype.add=st.prototype.push=function(he){return this.__data__.set(he,"__lodash_hash_undefined__"),this},st.prototype.has=function(he){return this.__data__.has(he)},qe.prototype.clear=function(){this.__data__=new pe,this.size=0},qe.prototype.delete=function(he){var je=this.__data__,Ne=je.delete(he);return this.size=je.size,Ne},qe.prototype.get=function(he){return this.__data__.get(he)},qe.prototype.has=function(he){return this.__data__.has(he)},qe.prototype.set=function(he,je){var Ne=this.__data__;if(Ne instanceof pe){var tt=Ne.__data__;if(!K||tt.length<199)return tt.push([he,je]),this.size=++Ne.size,this;Ne=this.__data__=new Ae(tt)}return Ne.set(he,je),this.size=Ne.size,this};var Xe=Y?function(he){return he==null?[]:(he=Object(he),function(je,Ne){for(var tt=-1,jt=je==null?0:je.length,dt=0,kt=[];++tt<jt;){var gt=je[tt];Ne(gt,tt,je)&&(kt[dt++]=gt)}return kt}(Y(he),function(je){return H.call(he,je)}))}:function(){return[]},Ve=we;function ot(he,je){return!!(je=je??9007199254740991)&&(typeof he=="number"||f.test(he))&&he>-1&&he%1==0&&he<je}function xt(he){if(he!=null){try{return w.call(he)}catch{}try{return he+""}catch{}}return""}function ft(he,je){return he===je||he!=he&&je!=je}(W&&Ve(new W(new ArrayBuffer(1)))!="[object DataView]"||K&&Ve(new K)!=d||Q&&Ve(Q.resolve())!="[object Promise]"||X&&Ve(new X)!=i||te&&Ve(new te)!="[object WeakMap]")&&(Ve=function(he){var je=we(he),Ne=je==l?he.constructor:void 0,tt=Ne?xt(Ne):"";if(tt)switch(tt){case xe:return"[object DataView]";case ne:return d;case ge:return"[object Promise]";case be:return i;case Ie:return"[object WeakMap]"}return je});var at=ve(function(){return arguments}())?ve:function(he){return Fe(he)&&_.call(he,"callee")&&!H.call(he,"callee")},Be=Array.isArray,Ue=F||function(){return!1};function re(he){if(!ke(he))return!1;var je=we(he);return je=="[object Function]"||je=="[object GeneratorFunction]"||je=="[object AsyncFunction]"||je=="[object Proxy]"}function ye(he){return typeof he=="number"&&he>-1&&he%1==0&&he<=9007199254740991}function ke(he){var je=typeof he;return he!=null&&(je=="object"||je=="function")}function Fe(he){return he!=null&&typeof he=="object"}var Ke=T?function(he){return function(je){return he(je)}}(T):function(he){return Fe(he)&&ye(he.length)&&!!h[we(he)]};function Qe(he){return(je=he)!=null&&ye(je.length)&&!re(je)?ie(he):ue(he);var je}n.exports=function(he,je){return He(he,je)}}).call(this)}).call(this,typeof _s<"u"?_s:typeof self<"u"?self:typeof window<"u"?window:{})},{}],446:[function(s,n,c){(function(o){(function(){var a=typeof o=="object"&&o&&o.Object===Object&&o,d=typeof self=="object"&&self&&self.Object===Object&&self,l=a||d||Function("return this")(),i=Object.prototype,u=i.hasOwnProperty,f=i.toString,h=l.Symbol,m=h?h.toStringTag:void 0;function p(x){return x==null?x===void 0?"[object Undefined]":"[object Null]":m&&m in Object(x)?function(g){var v=u.call(g,m),y=g[m];try{g[m]=void 0;var b=!0}catch{}var C=f.call(g);return b&&(v?g[m]=y:delete g[m]),C}(x):function(g){return f.call(g)}(x)}n.exports=function(x){if(!function(v){var y=typeof v;return v!=null&&(y=="object"||y=="function")}(x))return!1;var g=p(x);return g=="[object Function]"||g=="[object GeneratorFunction]"||g=="[object AsyncFunction]"||g=="[object Proxy]"}}).call(this)}).call(this,typeof _s<"u"?_s:typeof self<"u"?self:typeof window<"u"?window:{})},{}],447:[function(s,n,c){n.exports=function(o){return o==null}},{}],448:[function(s,n,c){n.exports=function(o){return o===void 0}},{}],449:[function(s,n,c){(function(o){(function(){var a=/^\[object .+?Constructor\]$/,d=typeof o=="object"&&o&&o.Object===Object&&o,l=typeof self=="object"&&self&&self.Object===Object&&self,i=d||l||Function("return this")();function u(V,H){return!!(V&&V.length)&&function(G,$,Y){if($!=$)return function(W,K,Q,X){for(var te=W.length,de=Q+(X?1:-1);X?de--:++de<te;)if(K(W[de],de,W))return de;return-1}(G,h,Y);for(var F=Y-1,O=G.length;++F<O;)if(G[F]===$)return F;return-1}(V,H,0)>-1}function f(V,H,G){for(var $=-1,Y=V?V.length:0;++$<Y;)if(G(H,V[$]))return!0;return!1}function h(V){return V!=V}function m(V,H){return V.has(H)}function p(V){var H=-1,G=Array(V.size);return V.forEach(function($){G[++H]=$}),G}var x,g=Array.prototype,v=Function.prototype,y=Object.prototype,b=i["__core-js_shared__"],C=(x=/[^.]+$/.exec(b&&b.keys&&b.keys.IE_PROTO||""))?"Symbol(src)_1."+x:"",T=v.toString,M=y.hasOwnProperty,U=y.toString,L=RegExp("^"+T.call(M).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),P=g.splice,B=I(i,"Map"),q=I(i,"Set"),z=I(Object,"create");function k(V){var H=-1,G=V?V.length:0;for(this.clear();++H<G;){var $=V[H];this.set($[0],$[1])}}function R(V){var H=-1,G=V?V.length:0;for(this.clear();++H<G;){var $=V[H];this.set($[0],$[1])}}function S(V){var H=-1,G=V?V.length:0;for(this.clear();++H<G;){var $=V[H];this.set($[0],$[1])}}function w(V){var H=-1,G=V?V.length:0;for(this.__data__=new S;++H<G;)this.add(V[H])}function _(V,H){for(var G,$,Y=V.length;Y--;)if((G=V[Y][0])===($=H)||G!=G&&$!=$)return Y;return-1}function j(V){return!(!D(V)||(H=V,C&&C in H))&&(function(G){var $=D(G)?U.call(G):"";return $=="[object Function]"||$=="[object GeneratorFunction]"}(V)||function(G){var $=!1;if(G!=null&&typeof G.toString!="function")try{$=!!(G+"")}catch{}return $}(V)?L:a).test(function(G){if(G!=null){try{return T.call(G)}catch{}try{return G+""}catch{}}return""}(V));var H}k.prototype.clear=function(){this.__data__=z?z(null):{}},k.prototype.delete=function(V){return this.has(V)&&delete this.__data__[V]},k.prototype.get=function(V){var H=this.__data__;if(z){var G=H[V];return G==="__lodash_hash_undefined__"?void 0:G}return M.call(H,V)?H[V]:void 0},k.prototype.has=function(V){var H=this.__data__;return z?H[V]!==void 0:M.call(H,V)},k.prototype.set=function(V,H){return this.__data__[V]=z&&H===void 0?"__lodash_hash_undefined__":H,this},R.prototype.clear=function(){this.__data__=[]},R.prototype.delete=function(V){var H=this.__data__,G=_(H,V);return!(G<0)&&(G==H.length-1?H.pop():P.call(H,G,1),!0)},R.prototype.get=function(V){var H=this.__data__,G=_(H,V);return G<0?void 0:H[G][1]},R.prototype.has=function(V){return _(this.__data__,V)>-1},R.prototype.set=function(V,H){var G=this.__data__,$=_(G,V);return $<0?G.push([V,H]):G[$][1]=H,this},S.prototype.clear=function(){this.__data__={hash:new k,map:new(B||R),string:new k}},S.prototype.delete=function(V){return E(this,V).delete(V)},S.prototype.get=function(V){return E(this,V).get(V)},S.prototype.has=function(V){return E(this,V).has(V)},S.prototype.set=function(V,H){return E(this,V).set(V,H),this},w.prototype.add=w.prototype.push=function(V){return this.__data__.set(V,"__lodash_hash_undefined__"),this},w.prototype.has=function(V){return this.__data__.has(V)};var N=q&&1/p(new q([,-0]))[1]==1/0?function(V){return new q(V)}:function(){};function E(V,H){var G,$,Y=V.__data__;return(($=typeof(G=H))=="string"||$=="number"||$=="symbol"||$=="boolean"?G!=="__proto__":G===null)?Y[typeof H=="string"?"string":"hash"]:Y.map}function I(V,H){var G=function($,Y){return $==null?void 0:$[Y]}(V,H);return j(G)?G:void 0}function D(V){var H=typeof V;return!!V&&(H=="object"||H=="function")}n.exports=function(V){return V&&V.length?function(H,G,$){var Y=-1,F=u,O=H.length,W=!0,K=[],Q=K;if($)W=!1,F=f;else if(O>=200){var X=G?null:N(H);if(X)return p(X);W=!1,F=m,Q=new w}else Q=G?[]:K;e:for(;++Y<O;){var te=H[Y],de=G?G(te):te;if(te=$||te!==0?te:0,W&&de==de){for(var xe=Q.length;xe--;)if(Q[xe]===de)continue e;G&&Q.push(de),K.push(te)}else F(Q,de,$)||(Q!==K&&Q.push(de),K.push(te))}return K}(V):[]}}).call(this)}).call(this,typeof _s<"u"?_s:typeof self<"u"?self:typeof window<"u"?window:{})},{}],450:[function(s,n,c){var o=s("inherits"),a=s("hash-base"),d=s("safe-buffer").Buffer,l=new Array(16);function i(){a.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function u(x,g){return x<<g|x>>>32-g}function f(x,g,v,y,b,C,T){return u(x+(g&v|~g&y)+b+C|0,T)+g|0}function h(x,g,v,y,b,C,T){return u(x+(g&y|v&~y)+b+C|0,T)+g|0}function m(x,g,v,y,b,C,T){return u(x+(g^v^y)+b+C|0,T)+g|0}function p(x,g,v,y,b,C,T){return u(x+(v^(g|~y))+b+C|0,T)+g|0}o(i,a),i.prototype._update=function(){for(var x=l,g=0;g<16;++g)x[g]=this._block.readInt32LE(4*g);var v=this._a,y=this._b,b=this._c,C=this._d;v=f(v,y,b,C,x[0],3614090360,7),C=f(C,v,y,b,x[1],3905402710,12),b=f(b,C,v,y,x[2],606105819,17),y=f(y,b,C,v,x[3],3250441966,22),v=f(v,y,b,C,x[4],4118548399,7),C=f(C,v,y,b,x[5],1200080426,12),b=f(b,C,v,y,x[6],2821735955,17),y=f(y,b,C,v,x[7],4249261313,22),v=f(v,y,b,C,x[8],1770035416,7),C=f(C,v,y,b,x[9],2336552879,12),b=f(b,C,v,y,x[10],4294925233,17),y=f(y,b,C,v,x[11],2304563134,22),v=f(v,y,b,C,x[12],1804603682,7),C=f(C,v,y,b,x[13],4254626195,12),b=f(b,C,v,y,x[14],2792965006,17),v=h(v,y=f(y,b,C,v,x[15],1236535329,22),b,C,x[1],4129170786,5),C=h(C,v,y,b,x[6],3225465664,9),b=h(b,C,v,y,x[11],643717713,14),y=h(y,b,C,v,x[0],3921069994,20),v=h(v,y,b,C,x[5],3593408605,5),C=h(C,v,y,b,x[10],38016083,9),b=h(b,C,v,y,x[15],3634488961,14),y=h(y,b,C,v,x[4],3889429448,20),v=h(v,y,b,C,x[9],568446438,5),C=h(C,v,y,b,x[14],3275163606,9),b=h(b,C,v,y,x[3],4107603335,14),y=h(y,b,C,v,x[8],1163531501,20),v=h(v,y,b,C,x[13],2850285829,5),C=h(C,v,y,b,x[2],4243563512,9),b=h(b,C,v,y,x[7],1735328473,14),v=m(v,y=h(y,b,C,v,x[12],2368359562,20),b,C,x[5],4294588738,4),C=m(C,v,y,b,x[8],2272392833,11),b=m(b,C,v,y,x[11],1839030562,16),y=m(y,b,C,v,x[14],4259657740,23),v=m(v,y,b,C,x[1],2763975236,4),C=m(C,v,y,b,x[4],1272893353,11),b=m(b,C,v,y,x[7],4139469664,16),y=m(y,b,C,v,x[10],3200236656,23),v=m(v,y,b,C,x[13],681279174,4),C=m(C,v,y,b,x[0],3936430074,11),b=m(b,C,v,y,x[3],3572445317,16),y=m(y,b,C,v,x[6],76029189,23),v=m(v,y,b,C,x[9],3654602809,4),C=m(C,v,y,b,x[12],3873151461,11),b=m(b,C,v,y,x[15],530742520,16),v=p(v,y=m(y,b,C,v,x[2],3299628645,23),b,C,x[0],4096336452,6),C=p(C,v,y,b,x[7],1126891415,10),b=p(b,C,v,y,x[14],2878612391,15),y=p(y,b,C,v,x[5],4237533241,21),v=p(v,y,b,C,x[12],1700485571,6),C=p(C,v,y,b,x[3],2399980690,10),b=p(b,C,v,y,x[10],4293915773,15),y=p(y,b,C,v,x[1],2240044497,21),v=p(v,y,b,C,x[8],1873313359,6),C=p(C,v,y,b,x[15],4264355552,10),b=p(b,C,v,y,x[6],2734768916,15),y=p(y,b,C,v,x[13],1309151649,21),v=p(v,y,b,C,x[4],4149444226,6),C=p(C,v,y,b,x[11],3174756917,10),b=p(b,C,v,y,x[2],718787259,15),y=p(y,b,C,v,x[9],3951481745,21),this._a=this._a+v|0,this._b=this._b+y|0,this._c=this._c+b|0,this._d=this._d+C|0},i.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var x=d.allocUnsafe(16);return x.writeInt32LE(this._a,0),x.writeInt32LE(this._b,4),x.writeInt32LE(this._c,8),x.writeInt32LE(this._d,12),x},n.exports=i},{"hash-base":425,inherits:440,"safe-buffer":494}],451:[function(s,n,c){var o=s("bn.js"),a=s("brorand");function d(l){this.rand=l||new a.Rand}n.exports=d,d.create=function(l){return new d(l)},d.prototype._randbelow=function(l){var i=l.bitLength(),u=Math.ceil(i/8);do var f=new o(this.rand.generate(u));while(f.cmp(l)>=0);return f},d.prototype._randrange=function(l,i){var u=i.sub(l);return l.add(this._randbelow(u))},d.prototype.test=function(l,i,u){var f=l.bitLength(),h=o.mont(l),m=new o(1).toRed(h);i||(i=Math.max(1,f/48|0));for(var p=l.subn(1),x=0;!p.testn(x);x++);for(var g=l.shrn(x),v=p.toRed(h);i>0;i--){var y=this._randrange(new o(2),p);u&&u(y);var b=y.toRed(h).redPow(g);if(b.cmp(m)!==0&&b.cmp(v)!==0){for(var C=1;C<x;C++){if((b=b.redSqr()).cmp(m)===0)return!1;if(b.cmp(v)===0)break}if(C===x)return!1}}return!0},d.prototype.getDivisor=function(l,i){var u=l.bitLength(),f=o.mont(l),h=new o(1).toRed(f);i||(i=Math.max(1,u/48|0));for(var m=l.subn(1),p=0;!m.testn(p);p++);for(var x=l.shrn(p),g=m.toRed(f);i>0;i--){var v=this._randrange(new o(2),m),y=l.gcd(v);if(y.cmpn(1)!==0)return y;var b=v.toRed(f).redPow(x);if(b.cmp(h)!==0&&b.cmp(g)!==0){for(var C=1;C<p;C++){if((b=b.redSqr()).cmp(h)===0)return b.fromRed().subn(1).gcd(l);if(b.cmp(g)===0)break}if(C===p)return(b=b.redSqr()).fromRed().subn(1).gcd(l)}}return!1}},{"bn.js":452,brorand:187}],452:[function(s,n,c){arguments[4][184][0].apply(c,arguments)},{buffer:188,dup:184}],453:[function(s,n,c){function o(a,d){if(!a)throw new Error(d||"Assertion failed")}n.exports=o,o.equal=function(a,d,l){if(a!=d)throw new Error(l||"Assertion failed: "+a+" != "+d)}},{}],454:[function(s,n,c){var o=c;function a(l){return l.length===1?"0"+l:l}function d(l){for(var i="",u=0;u<l.length;u++)i+=a(l[u].toString(16));return i}o.toArray=function(l,i){if(Array.isArray(l))return l.slice();if(!l)return[];var u=[];if(typeof l!="string"){for(var f=0;f<l.length;f++)u[f]=0|l[f];return u}if(i==="hex")for((l=l.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(l="0"+l),f=0;f<l.length;f+=2)u.push(parseInt(l[f]+l[f+1],16));else for(f=0;f<l.length;f++){var h=l.charCodeAt(f),m=h>>8,p=255&h;m?u.push(m,p):u.push(p)}return u},o.zero2=a,o.toHex=d,o.encode=function(l,i){return i==="hex"?d(l):l}},{}],455:[function(s,n,c){n.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],456:[function(s,n,c){var o=s("asn1.js");c.certificate=s("./certificate");var a=o.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});c.RSAPrivateKey=a;var d=o.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});c.RSAPublicKey=d;var l=o.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(i),this.key("subjectPublicKey").bitstr())});c.PublicKey=l;var i=o.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),u=o.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(i),this.key("subjectPrivateKey").octstr())});c.PrivateKey=u;var f=o.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});c.EncryptedPrivateKey=f;var h=o.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});c.DSAPrivateKey=h,c.DSAparam=o.define("DSAparam",function(){this.int()});var m=o.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(p),this.key("publicKey").optional().explicit(1).bitstr())});c.ECPrivateKey=m;var p=o.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});c.signature=o.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},{"./certificate":457,"asn1.js":170}],457:[function(s,n,c){var o=s("asn1.js"),a=o.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),d=o.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),l=o.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),i=o.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(l),this.key("subjectPublicKey").bitstr())}),u=o.define("RelativeDistinguishedName",function(){this.setof(d)}),f=o.define("RDNSequence",function(){this.seqof(u)}),h=o.define("Name",function(){this.choice({rdnSequence:this.use(f)})}),m=o.define("Validity",function(){this.seq().obj(this.key("notBefore").use(a),this.key("notAfter").use(a))}),p=o.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),x=o.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(l),this.key("issuer").use(h),this.key("validity").use(m),this.key("subject").use(h),this.key("subjectPublicKeyInfo").use(i),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(p).optional())}),g=o.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(x),this.key("signatureAlgorithm").use(l),this.key("signatureValue").bitstr())});n.exports=g},{"asn1.js":170}],458:[function(s,n,c){var o=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,a=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,d=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,l=s("evp_bytestokey"),i=s("browserify-aes"),u=s("safe-buffer").Buffer;n.exports=function(f,h){var m,p=f.toString(),x=p.match(o);if(x){var g="aes"+x[1],v=u.from(x[2],"hex"),y=u.from(x[3].replace(/[\r\n]/g,""),"base64"),b=l(h,v.slice(0,8),parseInt(x[1],10)).key,C=[],T=i.createDecipheriv(g,b,v);C.push(T.update(y)),C.push(T.final()),m=u.concat(C)}else{var M=p.match(d);m=u.from(M[2].replace(/[\r\n]/g,""),"base64")}return{tag:p.match(a)[1],data:m}}},{"browserify-aes":191,evp_bytestokey:423,"safe-buffer":494}],459:[function(s,n,c){var o=s("./asn1"),a=s("./aesid.json"),d=s("./fixProc"),l=s("browserify-aes"),i=s("pbkdf2"),u=s("safe-buffer").Buffer;function f(h){var m;typeof h!="object"||u.isBuffer(h)||(m=h.passphrase,h=h.key),typeof h=="string"&&(h=u.from(h));var p,x,g=d(h,m),v=g.tag,y=g.data;switch(v){case"CERTIFICATE":x=o.certificate.decode(y,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(x||(x=o.PublicKey.decode(y,"der")),p=x.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return o.RSAPublicKey.decode(x.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return x.subjectPrivateKey=x.subjectPublicKey,{type:"ec",data:x};case"1.2.840.10040.4.1":return x.algorithm.params.pub_key=o.DSAparam.decode(x.subjectPublicKey.data,"der"),{type:"dsa",data:x.algorithm.params};default:throw new Error("unknown key id "+p)}case"ENCRYPTED PRIVATE KEY":y=function(b,C){var T=b.algorithm.decrypt.kde.kdeparams.salt,M=parseInt(b.algorithm.decrypt.kde.kdeparams.iters.toString(),10),U=a[b.algorithm.decrypt.cipher.algo.join(".")],L=b.algorithm.decrypt.cipher.iv,P=b.subjectPrivateKey,B=parseInt(U.split("-")[1],10)/8,q=i.pbkdf2Sync(C,T,M,B,"sha1"),z=l.createDecipheriv(U,q,L),k=[];return k.push(z.update(P)),k.push(z.final()),u.concat(k)}(y=o.EncryptedPrivateKey.decode(y,"der"),m);case"PRIVATE KEY":switch(p=(x=o.PrivateKey.decode(y,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return o.RSAPrivateKey.decode(x.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:x.algorithm.curve,privateKey:o.ECPrivateKey.decode(x.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return x.algorithm.params.priv_key=o.DSAparam.decode(x.subjectPrivateKey,"der"),{type:"dsa",params:x.algorithm.params};default:throw new Error("unknown key id "+p)}case"RSA PUBLIC KEY":return o.RSAPublicKey.decode(y,"der");case"RSA PRIVATE KEY":return o.RSAPrivateKey.decode(y,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:o.DSAPrivateKey.decode(y,"der")};case"EC PRIVATE KEY":return{curve:(y=o.ECPrivateKey.decode(y,"der")).parameters.value,privateKey:y.privateKey};default:throw new Error("unknown key type "+v)}}n.exports=f,f.signature=o.signature},{"./aesid.json":455,"./asn1":456,"./fixProc":458,"browserify-aes":191,pbkdf2:460,"safe-buffer":494}],460:[function(s,n,c){c.pbkdf2=s("./lib/async"),c.pbkdf2Sync=s("./lib/sync")},{"./lib/async":461,"./lib/sync":464}],461:[function(s,n,c){(function(o){(function(){var a,d,l=s("safe-buffer").Buffer,i=s("./precondition"),u=s("./default-encoding"),f=s("./sync"),h=s("./to-buffer"),m=o.crypto&&o.crypto.subtle,p={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},x=[];function g(){return d||(d=o.process&&o.process.nextTick?o.process.nextTick:o.queueMicrotask?o.queueMicrotask:o.setImmediate?o.setImmediate:o.setTimeout)}function v(y,b,C,T,M){return m.importKey("raw",y,{name:"PBKDF2"},!1,["deriveBits"]).then(function(U){return m.deriveBits({name:"PBKDF2",salt:b,iterations:C,hash:{name:M}},U,T<<3)}).then(function(U){return l.from(U)})}n.exports=function(y,b,C,T,M,U){typeof M=="function"&&(U=M,M=void 0);var L=p[(M=M||"sha1").toLowerCase()];if(L&&typeof o.Promise=="function"){if(i(C,T),y=h(y,u,"Password"),b=h(b,u,"Salt"),typeof U!="function")throw new Error("No callback provided to pbkdf2");(function(P,B){P.then(function(q){g()(function(){B(null,q)})},function(q){g()(function(){B(q)})})})(function(P){if(o.process&&!o.process.browser||!m||!m.importKey||!m.deriveBits)return Promise.resolve(!1);if(x[P]!==void 0)return x[P];var B=v(a=a||l.alloc(8),a,10,128,P).then(function(){return!0}).catch(function(){return!1});return x[P]=B,B}(L).then(function(P){return P?v(y,b,C,T,L):f(y,b,C,T,M)}),U)}else g()(function(){var P;try{P=f(y,b,C,T,M)}catch(B){return U(B)}U(null,P)})}}).call(this)}).call(this,typeof _s<"u"?_s:typeof self<"u"?self:typeof window<"u"?window:{})},{"./default-encoding":462,"./precondition":463,"./sync":464,"./to-buffer":465,"safe-buffer":494}],462:[function(s,n,c){(function(o,a){(function(){var d;a.process&&a.process.browser?d="utf-8":a.process&&a.process.version?d=parseInt(o.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":d="utf-8",n.exports=d}).call(this)}).call(this,s("_process"),typeof _s<"u"?_s:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467}],463:[function(s,n,c){var o=Math.pow(2,30)-1;n.exports=function(a,d){if(typeof a!="number")throw new TypeError("Iterations not a number");if(a<0)throw new TypeError("Bad iterations");if(typeof d!="number")throw new TypeError("Key length not a number");if(d<0||d>o||d!=d)throw new TypeError("Bad key length")}},{}],464:[function(s,n,c){var o=s("create-hash/md5"),a=s("ripemd160"),d=s("sha.js"),l=s("safe-buffer").Buffer,i=s("./precondition"),u=s("./default-encoding"),f=s("./to-buffer"),h=l.alloc(128),m={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function p(x,g,v){var y=function(L){function P(B){return d(L).update(B).digest()}return L==="rmd160"||L==="ripemd160"?function(B){return new a().update(B).digest()}:L==="md5"?o:P}(x),b=x==="sha512"||x==="sha384"?128:64;g.length>b?g=y(g):g.length<b&&(g=l.concat([g,h],b));for(var C=l.allocUnsafe(b+m[x]),T=l.allocUnsafe(b+m[x]),M=0;M<b;M++)C[M]=54^g[M],T[M]=92^g[M];var U=l.allocUnsafe(b+v+4);C.copy(U,0,0,b),this.ipad1=U,this.ipad2=C,this.opad=T,this.alg=x,this.blocksize=b,this.hash=y,this.size=m[x]}p.prototype.run=function(x,g){return x.copy(g,this.blocksize),this.hash(g).copy(this.opad,this.blocksize),this.hash(this.opad)},n.exports=function(x,g,v,y,b){i(v,y);var C=new p(b=b||"sha1",x=f(x,u,"Password"),(g=f(g,u,"Salt")).length),T=l.allocUnsafe(y),M=l.allocUnsafe(g.length+4);g.copy(M,0,0,g.length);for(var U=0,L=m[b],P=Math.ceil(y/L),B=1;B<=P;B++){M.writeUInt32BE(B,g.length);for(var q=C.run(M,C.ipad1),z=q,k=1;k<v;k++){z=C.run(z,C.ipad2);for(var R=0;R<L;R++)q[R]^=z[R]}q.copy(T,U),U+=L}return T}},{"./default-encoding":462,"./precondition":463,"./to-buffer":465,"create-hash/md5":387,ripemd160:493,"safe-buffer":494,"sha.js":498}],465:[function(s,n,c){var o=s("safe-buffer").Buffer;n.exports=function(a,d,l){if(o.isBuffer(a))return a;if(typeof a=="string")return o.from(a,d);if(ArrayBuffer.isView(a))return o.from(a.buffer);throw new TypeError(l+" must be a string, a Buffer, a typed array or a DataView")}},{"safe-buffer":494}],466:[function(s,n,c){(function(o){(function(){o===void 0||!o.version||o.version.indexOf("v0.")===0||o.version.indexOf("v1.")===0&&o.version.indexOf("v1.8.")!==0?n.exports={nextTick:function(a,d,l,i){if(typeof a!="function")throw new TypeError('"callback" argument must be a function');var u,f,h=arguments.length;switch(h){case 0:case 1:return o.nextTick(a);case 2:return o.nextTick(function(){a.call(null,d)});case 3:return o.nextTick(function(){a.call(null,d,l)});case 4:return o.nextTick(function(){a.call(null,d,l,i)});default:for(u=new Array(h-1),f=0;f<u.length;)u[f++]=arguments[f];return o.nextTick(function(){a.apply(null,u)})}}}:n.exports=o}).call(this)}).call(this,s("_process"))},{_process:467}],467:[function(s,n,c){var o,a,d=n.exports={};function l(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function u(b){if(o===setTimeout)return setTimeout(b,0);if((o===l||!o)&&setTimeout)return o=setTimeout,setTimeout(b,0);try{return o(b,0)}catch{try{return o.call(null,b,0)}catch{return o.call(this,b,0)}}}(function(){try{o=typeof setTimeout=="function"?setTimeout:l}catch{o=l}try{a=typeof clearTimeout=="function"?clearTimeout:i}catch{a=i}})();var f,h=[],m=!1,p=-1;function x(){m&&f&&(m=!1,f.length?h=f.concat(h):p=-1,h.length&&g())}function g(){if(!m){var b=u(x);m=!0;for(var C=h.length;C;){for(f=h,h=[];++p<C;)f&&f[p].run();p=-1,C=h.length}f=null,m=!1,function(T){if(a===clearTimeout)return clearTimeout(T);if((a===i||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(T);try{a(T)}catch{try{return a.call(null,T)}catch{return a.call(this,T)}}}(b)}}function v(b,C){this.fun=b,this.array=C}function y(){}d.nextTick=function(b){var C=new Array(arguments.length-1);if(arguments.length>1)for(var T=1;T<arguments.length;T++)C[T-1]=arguments[T];h.push(new v(b,C)),h.length!==1||m||u(g)},v.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=y,d.addListener=y,d.once=y,d.off=y,d.removeListener=y,d.removeAllListeners=y,d.emit=y,d.prependListener=y,d.prependOnceListener=y,d.listeners=function(b){return[]},d.binding=function(b){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(b){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],468:[function(s,n,c){c.publicEncrypt=s("./publicEncrypt"),c.privateDecrypt=s("./privateDecrypt"),c.privateEncrypt=function(o,a){return c.publicEncrypt(o,a,!0)},c.publicDecrypt=function(o,a){return c.privateDecrypt(o,a,!0)}},{"./privateDecrypt":471,"./publicEncrypt":472}],469:[function(s,n,c){var o=s("create-hash"),a=s("safe-buffer").Buffer;function d(l){var i=a.allocUnsafe(4);return i.writeUInt32BE(l,0),i}n.exports=function(l,i){for(var u,f=a.alloc(0),h=0;f.length<i;)u=d(h++),f=a.concat([f,o("sha1").update(l).update(u).digest()]);return f.slice(0,i)}},{"create-hash":386,"safe-buffer":494}],470:[function(s,n,c){arguments[4][184][0].apply(c,arguments)},{buffer:188,dup:184}],471:[function(s,n,c){var o=s("parse-asn1"),a=s("./mgf"),d=s("./xor"),l=s("bn.js"),i=s("browserify-rsa"),u=s("create-hash"),f=s("./withPublic"),h=s("safe-buffer").Buffer;n.exports=function(m,p,x){var g;g=m.padding?m.padding:x?1:4;var v,y=o(m),b=y.modulus.byteLength();if(p.length>b||new l(p).cmp(y.modulus)>=0)throw new Error("decryption error");v=x?f(new l(p),y):i(p,y);var C=h.alloc(b-v.length);if(v=h.concat([C,v],b),g===4)return function(T,M){var U=T.modulus.byteLength(),L=u("sha1").update(h.alloc(0)).digest(),P=L.length;if(M[0]!==0)throw new Error("decryption error");var B=M.slice(1,P+1),q=M.slice(P+1),z=d(B,a(q,P)),k=d(q,a(z,U-P-1));if(function(S,w){S=h.from(S),w=h.from(w);var _=0,j=S.length;S.length!==w.length&&(_++,j=Math.min(S.length,w.length));for(var N=-1;++N<j;)_+=S[N]^w[N];return _}(L,k.slice(0,P)))throw new Error("decryption error");for(var R=P;k[R]===0;)R++;if(k[R++]!==1)throw new Error("decryption error");return k.slice(R)}(y,v);if(g===1)return function(T,M,U){for(var L=M.slice(0,2),P=2,B=0;M[P++]!==0;)if(P>=M.length){B++;break}var q=M.slice(2,P-1);if((L.toString("hex")!=="0002"&&!U||L.toString("hex")!=="0001"&&U)&&B++,q.length<8&&B++,B)throw new Error("decryption error");return M.slice(P)}(0,v,x);if(g===3)return v;throw new Error("unknown padding")}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":209,"create-hash":386,"parse-asn1":459,"safe-buffer":494}],472:[function(s,n,c){var o=s("parse-asn1"),a=s("randombytes"),d=s("create-hash"),l=s("./mgf"),i=s("./xor"),u=s("bn.js"),f=s("./withPublic"),h=s("browserify-rsa"),m=s("safe-buffer").Buffer;n.exports=function(p,x,g){var v;v=p.padding?p.padding:g?1:4;var y,b=o(p);if(v===4)y=function(C,T){var M=C.modulus.byteLength(),U=T.length,L=d("sha1").update(m.alloc(0)).digest(),P=L.length,B=2*P;if(U>M-B-2)throw new Error("message too long");var q=m.alloc(M-U-B-2),z=M-P-1,k=a(P),R=i(m.concat([L,q,m.alloc(1,1),T],z),l(k,z)),S=i(k,l(R,P));return new u(m.concat([m.alloc(1),S,R],M))}(b,x);else if(v===1)y=function(C,T,M){var U,L=T.length,P=C.modulus.byteLength();if(L>P-11)throw new Error("message too long");return U=M?m.alloc(P-L-3,255):function(B){for(var q,z=m.allocUnsafe(B),k=0,R=a(2*B),S=0;k<B;)S===R.length&&(R=a(2*B),S=0),(q=R[S++])&&(z[k++]=q);return z}(P-L-3),new u(m.concat([m.from([0,M?1:2]),U,m.alloc(1),T],P))}(b,x,g);else{if(v!==3)throw new Error("unknown padding");if((y=new u(x)).cmp(b.modulus)>=0)throw new Error("data too long for modulus")}return g?h(y,b):f(y,b)}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":209,"create-hash":386,"parse-asn1":459,randombytes:475,"safe-buffer":494}],473:[function(s,n,c){var o=s("bn.js"),a=s("safe-buffer").Buffer;n.exports=function(d,l){return a.from(d.toRed(o.mont(l.modulus)).redPow(new o(l.publicExponent)).fromRed().toArray())}},{"bn.js":470,"safe-buffer":494}],474:[function(s,n,c){n.exports=function(o,a){for(var d=o.length,l=-1;++l<d;)o[l]^=a[l];return o}},{}],475:[function(s,n,c){(function(o,a){(function(){var d=s("safe-buffer").Buffer,l=a.crypto||a.msCrypto;l&&l.getRandomValues?n.exports=function(i,u){if(i>4294967295)throw new RangeError("requested too many random bytes");var f=d.allocUnsafe(i);if(i>0)if(i>65536)for(var h=0;h<i;h+=65536)l.getRandomValues(f.slice(h,h+65536));else l.getRandomValues(f);return typeof u=="function"?o.nextTick(function(){u(null,f)}):f}:n.exports=function(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}}).call(this)}).call(this,s("_process"),typeof _s<"u"?_s:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467,"safe-buffer":494}],476:[function(s,n,c){(function(o,a){(function(){function d(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var l=s("safe-buffer"),i=s("randombytes"),u=l.Buffer,f=l.kMaxLength,h=a.crypto||a.msCrypto,m=Math.pow(2,32)-1;function p(v,y){if(typeof v!="number"||v!=v)throw new TypeError("offset must be a number");if(v>m||v<0)throw new TypeError("offset must be a uint32");if(v>f||v>y)throw new RangeError("offset out of range")}function x(v,y,b){if(typeof v!="number"||v!=v)throw new TypeError("size must be a number");if(v>m||v<0)throw new TypeError("size must be a uint32");if(v+y>b||v>f)throw new RangeError("buffer too small")}function g(v,y,b,C){if(o.browser){var T=v.buffer,M=new Uint8Array(T,y,b);return h.getRandomValues(M),C?void o.nextTick(function(){C(null,v)}):v}if(!C)return i(b).copy(v,y),v;i(b,function(U,L){if(U)return C(U);L.copy(v,y),C(null,v)})}h&&h.getRandomValues||!o.browser?(c.randomFill=function(v,y,b,C){if(!(u.isBuffer(v)||v instanceof a.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof y=="function")C=y,y=0,b=v.length;else if(typeof b=="function")C=b,b=v.length-y;else if(typeof C!="function")throw new TypeError('"cb" argument must be a function');return p(y,v.length),x(b,y,v.length),g(v,y,b,C)},c.randomFillSync=function(v,y,b){if(y===void 0&&(y=0),!(u.isBuffer(v)||v instanceof a.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return p(y,v.length),b===void 0&&(b=v.length-y),x(b,y,v.length),g(v,y,b)}):(c.randomFill=d,c.randomFillSync=d)}).call(this)}).call(this,s("_process"),typeof _s<"u"?_s:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467,randombytes:475,"safe-buffer":494}],477:[function(s,n,c){var o={};function a(l,i,u){u||(u=Error);var f=function(h){var m,p;function x(g,v,y){return h.call(this,function(b,C,T){return typeof i=="string"?i:i(b,C,T)}(g,v,y))||this}return p=h,(m=x).prototype=Object.create(p.prototype),m.prototype.constructor=m,m.__proto__=p,x}(u);f.prototype.name=u.name,f.prototype.code=l,o[l]=f}function d(l,i){if(Array.isArray(l)){var u=l.length;return l=l.map(function(f){return String(f)}),u>2?"one of ".concat(i," ").concat(l.slice(0,u-1).join(", "),", or ")+l[u-1]:u===2?"one of ".concat(i," ").concat(l[0]," or ").concat(l[1]):"of ".concat(i," ").concat(l[0])}return"of ".concat(i," ").concat(String(l))}a("ERR_INVALID_OPT_VALUE",function(l,i){return'The value "'+i+'" is invalid for option "'+l+'"'},TypeError),a("ERR_INVALID_ARG_TYPE",function(l,i,u){var f,h,m;if(typeof i=="string"&&(h="not ",i.substr(0,h.length)===h)?(f="must not be",i=i.replace(/^not /,"")):f="must be",function(x,g,v){return(v===void 0||v>x.length)&&(v=x.length),x.substring(v-g.length,v)===g}(l," argument"))m="The ".concat(l," ").concat(f," ").concat(d(i,"type"));else{var p=function(x,g,v){return typeof v!="number"&&(v=0),!(v+g.length>x.length)&&x.indexOf(g,v)!==-1}(l,".")?"property":"argument";m='The "'.concat(l,'" ').concat(p," ").concat(f," ").concat(d(i,"type"))}return m+=". Received type ".concat(typeof u)},TypeError),a("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),a("ERR_METHOD_NOT_IMPLEMENTED",function(l){return"The "+l+" method is not implemented"}),a("ERR_STREAM_PREMATURE_CLOSE","Premature close"),a("ERR_STREAM_DESTROYED",function(l){return"Cannot call "+l+" after a stream was destroyed"}),a("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),a("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),a("ERR_STREAM_WRITE_AFTER_END","write after end"),a("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),a("ERR_UNKNOWN_ENCODING",function(l){return"Unknown encoding: "+l},TypeError),a("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),n.exports.codes=o},{}],478:[function(s,n,c){(function(o){(function(){var a=Object.keys||function(x){var g=[];for(var v in x)g.push(v);return g};n.exports=h;var d=s("./_stream_readable"),l=s("./_stream_writable");s("inherits")(h,d);for(var i=a(l.prototype),u=0;u<i.length;u++){var f=i[u];h.prototype[f]||(h.prototype[f]=l.prototype[f])}function h(x){if(!(this instanceof h))return new h(x);d.call(this,x),l.call(this,x),this.allowHalfOpen=!0,x&&(x.readable===!1&&(this.readable=!1),x.writable===!1&&(this.writable=!1),x.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",m)))}function m(){this._writableState.ended||o.nextTick(p,this)}function p(x){x.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(h.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(x){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=x,this._writableState.destroyed=x)}})}).call(this)}).call(this,s("_process"))},{"./_stream_readable":480,"./_stream_writable":482,_process:467,inherits:440}],479:[function(s,n,c){n.exports=a;var o=s("./_stream_transform");function a(d){if(!(this instanceof a))return new a(d);o.call(this,d)}s("inherits")(a,o),a.prototype._transform=function(d,l,i){i(null,d)}},{"./_stream_transform":481,inherits:440}],480:[function(s,n,c){(function(o,a){(function(){var d;n.exports=z,z.ReadableState=q,s("events").EventEmitter;var l=function(F,O){return F.listeners(O).length},i=s("./internal/streams/stream"),u=s("buffer").Buffer,f=(a!==void 0?a:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},h,m=s("util");h=m&&m.debuglog?m.debuglog("stream"):function(){};var p,x,g,v=s("./internal/streams/buffer_list"),y=s("./internal/streams/destroy"),b=s("./internal/streams/state").getHighWaterMark,C=s("../errors").codes,T=C.ERR_INVALID_ARG_TYPE,M=C.ERR_STREAM_PUSH_AFTER_EOF,U=C.ERR_METHOD_NOT_IMPLEMENTED,L=C.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;s("inherits")(z,i);var P=y.errorOrDestroy,B=["error","close","destroy","pause","resume"];function q(F,O,W){d=d||s("./_stream_duplex"),F=F||{},typeof W!="boolean"&&(W=O instanceof d),this.objectMode=!!F.objectMode,W&&(this.objectMode=this.objectMode||!!F.readableObjectMode),this.highWaterMark=b(this,F,"readableHighWaterMark",W),this.buffer=new v,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=F.emitClose!==!1,this.autoDestroy=!!F.autoDestroy,this.destroyed=!1,this.defaultEncoding=F.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,F.encoding&&(p||(p=s("string_decoder/").StringDecoder),this.decoder=new p(F.encoding),this.encoding=F.encoding)}function z(F){if(d=d||s("./_stream_duplex"),!(this instanceof z))return new z(F);var O=this instanceof d;this._readableState=new q(F,this,O),this.readable=!0,F&&(typeof F.read=="function"&&(this._read=F.read),typeof F.destroy=="function"&&(this._destroy=F.destroy)),i.call(this)}function k(F,O,W,K,Q){h("readableAddChunk",O);var X,te=F._readableState;if(O===null)te.reading=!1,function(de,xe){if(h("onEofChunk"),!xe.ended){if(xe.decoder){var ne=xe.decoder.end();ne&&ne.length&&(xe.buffer.push(ne),xe.length+=xe.objectMode?1:ne.length)}xe.ended=!0,xe.sync?w(de):(xe.needReadable=!1,xe.emittedReadable||(xe.emittedReadable=!0,_(de)))}}(F,te);else if(Q||(X=function(de,xe){var ne;ge=xe,u.isBuffer(ge)||ge instanceof f||typeof xe=="string"||xe===void 0||de.objectMode||(ne=new T("chunk",["string","Buffer","Uint8Array"],xe));var ge;return ne}(te,O)),X)P(F,X);else if(te.objectMode||O&&O.length>0)if(typeof O=="string"||te.objectMode||Object.getPrototypeOf(O)===u.prototype||(O=function(de){return u.from(de)}(O)),K)te.endEmitted?P(F,new L):R(F,te,O,!0);else if(te.ended)P(F,new M);else{if(te.destroyed)return!1;te.reading=!1,te.decoder&&!W?(O=te.decoder.write(O),te.objectMode||O.length!==0?R(F,te,O,!1):j(F,te)):R(F,te,O,!1)}else K||(te.reading=!1,j(F,te));return!te.ended&&(te.length<te.highWaterMark||te.length===0)}function R(F,O,W,K){O.flowing&&O.length===0&&!O.sync?(O.awaitDrain=0,F.emit("data",W)):(O.length+=O.objectMode?1:W.length,K?O.buffer.unshift(W):O.buffer.push(W),O.needReadable&&w(F)),j(F,O)}Object.defineProperty(z.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(F){this._readableState&&(this._readableState.destroyed=F)}}),z.prototype.destroy=y.destroy,z.prototype._undestroy=y.undestroy,z.prototype._destroy=function(F,O){O(F)},z.prototype.push=function(F,O){var W,K=this._readableState;return K.objectMode?W=!0:typeof F=="string"&&((O=O||K.defaultEncoding)!==K.encoding&&(F=u.from(F,O),O=""),W=!0),k(this,F,O,!1,W)},z.prototype.unshift=function(F){return k(this,F,null,!0,!1)},z.prototype.isPaused=function(){return this._readableState.flowing===!1},z.prototype.setEncoding=function(F){p||(p=s("string_decoder/").StringDecoder);var O=new p(F);this._readableState.decoder=O,this._readableState.encoding=this._readableState.decoder.encoding;for(var W=this._readableState.buffer.head,K="";W!==null;)K+=O.write(W.data),W=W.next;return this._readableState.buffer.clear(),K!==""&&this._readableState.buffer.push(K),this._readableState.length=K.length,this};function S(F,O){return F<=0||O.length===0&&O.ended?0:O.objectMode?1:F!=F?O.flowing&&O.length?O.buffer.head.data.length:O.length:(F>O.highWaterMark&&(O.highWaterMark=function(W){return W>=1073741824?W=1073741824:(W--,W|=W>>>1,W|=W>>>2,W|=W>>>4,W|=W>>>8,W|=W>>>16,W++),W}(F)),F<=O.length?F:O.ended?O.length:(O.needReadable=!0,0))}function w(F){var O=F._readableState;h("emitReadable",O.needReadable,O.emittedReadable),O.needReadable=!1,O.emittedReadable||(h("emitReadable",O.flowing),O.emittedReadable=!0,o.nextTick(_,F))}function _(F){var O=F._readableState;h("emitReadable_",O.destroyed,O.length,O.ended),O.destroyed||!O.length&&!O.ended||(F.emit("readable"),O.emittedReadable=!1),O.needReadable=!O.flowing&&!O.ended&&O.length<=O.highWaterMark,V(F)}function j(F,O){O.readingMore||(O.readingMore=!0,o.nextTick(N,F,O))}function N(F,O){for(;!O.reading&&!O.ended&&(O.length<O.highWaterMark||O.flowing&&O.length===0);){var W=O.length;if(h("maybeReadMore read 0"),F.read(0),W===O.length)break}O.readingMore=!1}function E(F){var O=F._readableState;O.readableListening=F.listenerCount("readable")>0,O.resumeScheduled&&!O.paused?O.flowing=!0:F.listenerCount("data")>0&&F.resume()}function I(F){h("readable nexttick read 0"),F.read(0)}function D(F,O){h("resume",O.reading),O.reading||F.read(0),O.resumeScheduled=!1,F.emit("resume"),V(F),O.flowing&&!O.reading&&F.read(0)}function V(F){var O=F._readableState;for(h("flow",O.flowing);O.flowing&&F.read()!==null;);}function H(F,O){return O.length===0?null:(O.objectMode?W=O.buffer.shift():!F||F>=O.length?(W=O.decoder?O.buffer.join(""):O.buffer.length===1?O.buffer.first():O.buffer.concat(O.length),O.buffer.clear()):W=O.buffer.consume(F,O.decoder),W);var W}function G(F){var O=F._readableState;h("endReadable",O.endEmitted),O.endEmitted||(O.ended=!0,o.nextTick($,O,F))}function $(F,O){if(h("endReadableNT",F.endEmitted,F.length),!F.endEmitted&&F.length===0&&(F.endEmitted=!0,O.readable=!1,O.emit("end"),F.autoDestroy)){var W=O._writableState;(!W||W.autoDestroy&&W.finished)&&O.destroy()}}function Y(F,O){for(var W=0,K=F.length;W<K;W++)if(F[W]===O)return W;return-1}z.prototype.read=function(F){h("read",F),F=parseInt(F,10);var O=this._readableState,W=F;if(F!==0&&(O.emittedReadable=!1),F===0&&O.needReadable&&((O.highWaterMark!==0?O.length>=O.highWaterMark:O.length>0)||O.ended))return h("read: emitReadable",O.length,O.ended),O.length===0&&O.ended?G(this):w(this),null;if((F=S(F,O))===0&&O.ended)return O.length===0&&G(this),null;var K,Q=O.needReadable;return h("need readable",Q),(O.length===0||O.length-F<O.highWaterMark)&&h("length less than watermark",Q=!0),O.ended||O.reading?h("reading or ended",Q=!1):Q&&(h("do read"),O.reading=!0,O.sync=!0,O.length===0&&(O.needReadable=!0),this._read(O.highWaterMark),O.sync=!1,O.reading||(F=S(W,O))),(K=F>0?H(F,O):null)===null?(O.needReadable=O.length<=O.highWaterMark,F=0):(O.length-=F,O.awaitDrain=0),O.length===0&&(O.ended||(O.needReadable=!0),W!==F&&O.ended&&G(this)),K!==null&&this.emit("data",K),K},z.prototype._read=function(F){P(this,new U("_read()"))},z.prototype.pipe=function(F,O){var W=this,K=this._readableState;switch(K.pipesCount){case 0:K.pipes=F;break;case 1:K.pipes=[K.pipes,F];break;default:K.pipes.push(F)}K.pipesCount+=1,h("pipe count=%d opts=%j",K.pipesCount,O);var Q=(!O||O.end!==!1)&&F!==o.stdout&&F!==o.stderr?te:Ce;function X(Oe,Ee){h("onunpipe"),Oe===W&&Ee&&Ee.hasUnpiped===!1&&(Ee.hasUnpiped=!0,h("cleanup"),F.removeListener("close",be),F.removeListener("finish",Ie),F.removeListener("drain",de),F.removeListener("error",ge),F.removeListener("unpipe",X),W.removeListener("end",te),W.removeListener("end",Ce),W.removeListener("data",ne),xe=!0,!K.awaitDrain||F._writableState&&!F._writableState.needDrain||de())}function te(){h("onend"),F.end()}K.endEmitted?o.nextTick(Q):W.once("end",Q),F.on("unpipe",X);var de=function(Oe){return function(){var Ee=Oe._readableState;h("pipeOnDrain",Ee.awaitDrain),Ee.awaitDrain&&Ee.awaitDrain--,Ee.awaitDrain===0&&l(Oe,"data")&&(Ee.flowing=!0,V(Oe))}}(W);F.on("drain",de);var xe=!1;function ne(Oe){h("ondata");var Ee=F.write(Oe);h("dest.write",Ee),Ee===!1&&((K.pipesCount===1&&K.pipes===F||K.pipesCount>1&&Y(K.pipes,F)!==-1)&&!xe&&(h("false write response, pause",K.awaitDrain),K.awaitDrain++),W.pause())}function ge(Oe){h("onerror",Oe),Ce(),F.removeListener("error",ge),l(F,"error")===0&&P(F,Oe)}function be(){F.removeListener("finish",Ie),Ce()}function Ie(){h("onfinish"),F.removeListener("close",be),Ce()}function Ce(){h("unpipe"),W.unpipe(F)}return W.on("data",ne),function(Oe,Ee,pe){if(typeof Oe.prependListener=="function")return Oe.prependListener(Ee,pe);Oe._events&&Oe._events[Ee]?Array.isArray(Oe._events[Ee])?Oe._events[Ee].unshift(pe):Oe._events[Ee]=[pe,Oe._events[Ee]]:Oe.on(Ee,pe)}(F,"error",ge),F.once("close",be),F.once("finish",Ie),F.emit("pipe",W),K.flowing||(h("pipe resume"),W.resume()),F},z.prototype.unpipe=function(F){var O=this._readableState,W={hasUnpiped:!1};if(O.pipesCount===0)return this;if(O.pipesCount===1)return F&&F!==O.pipes||(F||(F=O.pipes),O.pipes=null,O.pipesCount=0,O.flowing=!1,F&&F.emit("unpipe",this,W)),this;if(!F){var K=O.pipes,Q=O.pipesCount;O.pipes=null,O.pipesCount=0,O.flowing=!1;for(var X=0;X<Q;X++)K[X].emit("unpipe",this,{hasUnpiped:!1});return this}var te=Y(O.pipes,F);return te===-1||(O.pipes.splice(te,1),O.pipesCount-=1,O.pipesCount===1&&(O.pipes=O.pipes[0]),F.emit("unpipe",this,W)),this},z.prototype.on=function(F,O){var W=i.prototype.on.call(this,F,O),K=this._readableState;return F==="data"?(K.readableListening=this.listenerCount("readable")>0,K.flowing!==!1&&this.resume()):F==="readable"&&(K.endEmitted||K.readableListening||(K.readableListening=K.needReadable=!0,K.flowing=!1,K.emittedReadable=!1,h("on readable",K.length,K.reading),K.length?w(this):K.reading||o.nextTick(I,this))),W},z.prototype.addListener=z.prototype.on,z.prototype.removeListener=function(F,O){var W=i.prototype.removeListener.call(this,F,O);return F==="readable"&&o.nextTick(E,this),W},z.prototype.removeAllListeners=function(F){var O=i.prototype.removeAllListeners.apply(this,arguments);return F!=="readable"&&F!==void 0||o.nextTick(E,this),O},z.prototype.resume=function(){var F=this._readableState;return F.flowing||(h("resume"),F.flowing=!F.readableListening,function(O,W){W.resumeScheduled||(W.resumeScheduled=!0,o.nextTick(D,O,W))}(this,F)),F.paused=!1,this},z.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},z.prototype.wrap=function(F){var O=this,W=this._readableState,K=!1;for(var Q in F.on("end",function(){if(h("wrapped end"),W.decoder&&!W.ended){var te=W.decoder.end();te&&te.length&&O.push(te)}O.push(null)}),F.on("data",function(te){h("wrapped data"),W.decoder&&(te=W.decoder.write(te)),W.objectMode&&te==null||(W.objectMode||te&&te.length)&&(O.push(te)||(K=!0,F.pause()))}),F)this[Q]===void 0&&typeof F[Q]=="function"&&(this[Q]=function(te){return function(){return F[te].apply(F,arguments)}}(Q));for(var X=0;X<B.length;X++)F.on(B[X],this.emit.bind(this,B[X]));return this._read=function(te){h("wrapped _read",te),K&&(K=!1,F.resume())},this},typeof Symbol=="function"&&(z.prototype[Symbol.asyncIterator]=function(){return x===void 0&&(x=s("./internal/streams/async_iterator")),x(this)}),Object.defineProperty(z.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(z.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(z.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(F){this._readableState&&(this._readableState.flowing=F)}}),z._fromList=H,Object.defineProperty(z.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(z.from=function(F,O){return g===void 0&&(g=s("./internal/streams/from")),g(z,F,O)})}).call(this)}).call(this,s("_process"),typeof _s<"u"?_s:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/async_iterator":483,"./internal/streams/buffer_list":484,"./internal/streams/destroy":485,"./internal/streams/from":487,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:220,events:422,inherits:440,"string_decoder/":522,util:188}],481:[function(s,n,c){n.exports=h;var o=s("../errors").codes,a=o.ERR_METHOD_NOT_IMPLEMENTED,d=o.ERR_MULTIPLE_CALLBACK,l=o.ERR_TRANSFORM_ALREADY_TRANSFORMING,i=o.ERR_TRANSFORM_WITH_LENGTH_0,u=s("./_stream_duplex");function f(x,g){var v=this._transformState;v.transforming=!1;var y=v.writecb;if(y===null)return this.emit("error",new d);v.writechunk=null,v.writecb=null,g!=null&&this.push(g),y(x);var b=this._readableState;b.reading=!1,(b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}function h(x){if(!(this instanceof h))return new h(x);u.call(this,x),this._transformState={afterTransform:f.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,x&&(typeof x.transform=="function"&&(this._transform=x.transform),typeof x.flush=="function"&&(this._flush=x.flush)),this.on("prefinish",m)}function m(){var x=this;typeof this._flush!="function"||this._readableState.destroyed?p(this,null,null):this._flush(function(g,v){p(x,g,v)})}function p(x,g,v){if(g)return x.emit("error",g);if(v!=null&&x.push(v),x._writableState.length)throw new i;if(x._transformState.transforming)throw new l;return x.push(null)}s("inherits")(h,u),h.prototype.push=function(x,g){return this._transformState.needTransform=!1,u.prototype.push.call(this,x,g)},h.prototype._transform=function(x,g,v){v(new a("_transform()"))},h.prototype._write=function(x,g,v){var y=this._transformState;if(y.writecb=v,y.writechunk=x,y.writeencoding=g,!y.transforming){var b=this._readableState;(y.needTransform||b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}},h.prototype._read=function(x){var g=this._transformState;g.writechunk===null||g.transforming?g.needTransform=!0:(g.transforming=!0,this._transform(g.writechunk,g.writeencoding,g.afterTransform))},h.prototype._destroy=function(x,g){u.prototype._destroy.call(this,x,function(v){g(v)})}},{"../errors":477,"./_stream_duplex":478,inherits:440}],482:[function(s,n,c){(function(o,a){(function(){function d(N){var E=this;this.next=null,this.entry=null,this.finish=function(){(function(I,D,V){var H=I.entry;for(I.entry=null;H;){var G=H.callback;D.pendingcb--,G(V),H=H.next}D.corkedRequestsFree.next=I})(E,N)}}var l;n.exports=z,z.WritableState=q;var i={deprecate:s("util-deprecate")},u=s("./internal/streams/stream"),f=s("buffer").Buffer,h=(a!==void 0?a:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},m,p=s("./internal/streams/destroy"),x=s("./internal/streams/state").getHighWaterMark,g=s("../errors").codes,v=g.ERR_INVALID_ARG_TYPE,y=g.ERR_METHOD_NOT_IMPLEMENTED,b=g.ERR_MULTIPLE_CALLBACK,C=g.ERR_STREAM_CANNOT_PIPE,T=g.ERR_STREAM_DESTROYED,M=g.ERR_STREAM_NULL_VALUES,U=g.ERR_STREAM_WRITE_AFTER_END,L=g.ERR_UNKNOWN_ENCODING,P=p.errorOrDestroy;function B(){}function q(N,E,I){l=l||s("./_stream_duplex"),N=N||{},typeof I!="boolean"&&(I=E instanceof l),this.objectMode=!!N.objectMode,I&&(this.objectMode=this.objectMode||!!N.writableObjectMode),this.highWaterMark=x(this,N,"writableHighWaterMark",I),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var D=N.decodeStrings===!1;this.decodeStrings=!D,this.defaultEncoding=N.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(V){(function(H,G){var $=H._writableState,Y=$.sync,F=$.writecb;if(typeof F!="function")throw new b;if(function(W){W.writing=!1,W.writecb=null,W.length-=W.writelen,W.writelen=0}($),G)(function(W,K,Q,X,te){--K.pendingcb,Q?(o.nextTick(te,X),o.nextTick(j,W,K),W._writableState.errorEmitted=!0,P(W,X)):(te(X),W._writableState.errorEmitted=!0,P(W,X),j(W,K))})(H,$,Y,G,F);else{var O=w($)||H.destroyed;O||$.corked||$.bufferProcessing||!$.bufferedRequest||S(H,$),Y?o.nextTick(R,H,$,O,F):R(H,$,O,F)}})(E,V)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=N.emitClose!==!1,this.autoDestroy=!!N.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new d(this)}function z(N){var E=this instanceof(l=l||s("./_stream_duplex"));if(!E&&!m.call(z,this))return new z(N);this._writableState=new q(N,this,E),this.writable=!0,N&&(typeof N.write=="function"&&(this._write=N.write),typeof N.writev=="function"&&(this._writev=N.writev),typeof N.destroy=="function"&&(this._destroy=N.destroy),typeof N.final=="function"&&(this._final=N.final)),u.call(this)}function k(N,E,I,D,V,H,G){E.writelen=D,E.writecb=G,E.writing=!0,E.sync=!0,E.destroyed?E.onwrite(new T("write")):I?N._writev(V,E.onwrite):N._write(V,H,E.onwrite),E.sync=!1}function R(N,E,I,D){I||function(V,H){H.length===0&&H.needDrain&&(H.needDrain=!1,V.emit("drain"))}(N,E),E.pendingcb--,D(),j(N,E)}function S(N,E){E.bufferProcessing=!0;var I=E.bufferedRequest;if(N._writev&&I&&I.next){var D=E.bufferedRequestCount,V=new Array(D),H=E.corkedRequestsFree;H.entry=I;for(var G=0,$=!0;I;)V[G]=I,I.isBuf||($=!1),I=I.next,G+=1;V.allBuffers=$,k(N,E,!0,E.length,V,"",H.finish),E.pendingcb++,E.lastBufferedRequest=null,H.next?(E.corkedRequestsFree=H.next,H.next=null):E.corkedRequestsFree=new d(E),E.bufferedRequestCount=0}else{for(;I;){var Y=I.chunk,F=I.encoding,O=I.callback;if(k(N,E,!1,E.objectMode?1:Y.length,Y,F,O),I=I.next,E.bufferedRequestCount--,E.writing)break}I===null&&(E.lastBufferedRequest=null)}E.bufferedRequest=I,E.bufferProcessing=!1}function w(N){return N.ending&&N.length===0&&N.bufferedRequest===null&&!N.finished&&!N.writing}function _(N,E){N._final(function(I){E.pendingcb--,I&&P(N,I),E.prefinished=!0,N.emit("prefinish"),j(N,E)})}function j(N,E){var I=w(E);if(I&&(function(V,H){H.prefinished||H.finalCalled||(typeof V._final!="function"||H.destroyed?(H.prefinished=!0,V.emit("prefinish")):(H.pendingcb++,H.finalCalled=!0,o.nextTick(_,V,H)))}(N,E),E.pendingcb===0&&(E.finished=!0,N.emit("finish"),E.autoDestroy))){var D=N._readableState;(!D||D.autoDestroy&&D.endEmitted)&&N.destroy()}return I}s("inherits")(z,u),q.prototype.getBuffer=function(){for(var N=this.bufferedRequest,E=[];N;)E.push(N),N=N.next;return E},function(){try{Object.defineProperty(q.prototype,"buffer",{get:i.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(m=Function.prototype[Symbol.hasInstance],Object.defineProperty(z,Symbol.hasInstance,{value:function(N){return!!m.call(this,N)||this===z&&N&&N._writableState instanceof q}})):m=function(N){return N instanceof this},z.prototype.pipe=function(){P(this,new C)},z.prototype.write=function(N,E,I){var D,V=this._writableState,H=!1,G=!V.objectMode&&(D=N,f.isBuffer(D)||D instanceof h);return G&&!f.isBuffer(N)&&(N=function($){return f.from($)}(N)),typeof E=="function"&&(I=E,E=null),G?E="buffer":E||(E=V.defaultEncoding),typeof I!="function"&&(I=B),V.ending?function($,Y){var F=new U;P($,F),o.nextTick(Y,F)}(this,I):(G||function($,Y,F,O){var W;return F===null?W=new M:typeof F=="string"||Y.objectMode||(W=new v("chunk",["string","Buffer"],F)),!W||(P($,W),o.nextTick(O,W),!1)}(this,V,N,I))&&(V.pendingcb++,H=function($,Y,F,O,W,K){if(!F){var Q=function(xe,ne,ge){return xe.objectMode||xe.decodeStrings===!1||typeof ne!="string"||(ne=f.from(ne,ge)),ne}(Y,O,W);O!==Q&&(F=!0,W="buffer",O=Q)}var X=Y.objectMode?1:O.length;Y.length+=X;var te=Y.length<Y.highWaterMark;if(te||(Y.needDrain=!0),Y.writing||Y.corked){var de=Y.lastBufferedRequest;Y.lastBufferedRequest={chunk:O,encoding:W,isBuf:F,callback:K,next:null},de?de.next=Y.lastBufferedRequest:Y.bufferedRequest=Y.lastBufferedRequest,Y.bufferedRequestCount+=1}else k($,Y,!1,X,O,W,K);return te}(this,V,G,N,E,I)),H},z.prototype.cork=function(){this._writableState.corked++},z.prototype.uncork=function(){var N=this._writableState;N.corked&&(N.corked--,N.writing||N.corked||N.bufferProcessing||!N.bufferedRequest||S(this,N))},z.prototype.setDefaultEncoding=function(N){if(typeof N=="string"&&(N=N.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((N+"").toLowerCase())>-1))throw new L(N);return this._writableState.defaultEncoding=N,this},Object.defineProperty(z.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(z.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),z.prototype._write=function(N,E,I){I(new y("_write()"))},z.prototype._writev=null,z.prototype.end=function(N,E,I){var D=this._writableState;return typeof N=="function"?(I=N,N=null,E=null):typeof E=="function"&&(I=E,E=null),N!=null&&this.write(N,E),D.corked&&(D.corked=1,this.uncork()),D.ending||function(V,H,G){H.ending=!0,j(V,H),G&&(H.finished?o.nextTick(G):V.once("finish",G)),H.ended=!0,V.writable=!1}(this,D,I),this},Object.defineProperty(z.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(z.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(N){this._writableState&&(this._writableState.destroyed=N)}}),z.prototype.destroy=p.destroy,z.prototype._undestroy=p.undestroy,z.prototype._destroy=function(N,E){E(N)}}).call(this)}).call(this,s("_process"),typeof _s<"u"?_s:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/destroy":485,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:220,inherits:440,"util-deprecate":524}],483:[function(s,n,c){(function(o){(function(){var a;function d(T,M,U){return(M=function(L){var P=function(B,q){if(typeof B!="object"||B===null)return B;var z=B[Symbol.toPrimitive];if(z!==void 0){var k=z.call(B,q||"default");if(typeof k!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(q==="string"?String:Number)(B)}(L,"string");return typeof P=="symbol"?P:String(P)}(M))in T?Object.defineProperty(T,M,{value:U,enumerable:!0,configurable:!0,writable:!0}):T[M]=U,T}var l=s("./end-of-stream"),i=Symbol("lastResolve"),u=Symbol("lastReject"),f=Symbol("error"),h=Symbol("ended"),m=Symbol("lastPromise"),p=Symbol("handlePromise"),x=Symbol("stream");function g(T,M){return{value:T,done:M}}function v(T){var M=T[i];if(M!==null){var U=T[x].read();U!==null&&(T[m]=null,T[i]=null,T[u]=null,M(g(U,!1)))}}function y(T){o.nextTick(v,T)}var b=Object.getPrototypeOf(function(){}),C=Object.setPrototypeOf((d(a={get stream(){return this[x]},next:function(){var T=this,M=this[f];if(M!==null)return Promise.reject(M);if(this[h])return Promise.resolve(g(void 0,!0));if(this[x].destroyed)return new Promise(function(B,q){o.nextTick(function(){T[f]?q(T[f]):B(g(void 0,!0))})});var U,L=this[m];if(L)U=new Promise(function(B,q){return function(z,k){B.then(function(){q[h]?z(g(void 0,!0)):q[p](z,k)},k)}}(L,this));else{var P=this[x].read();if(P!==null)return Promise.resolve(g(P,!1));U=new Promise(this[p])}return this[m]=U,U}},Symbol.asyncIterator,function(){return this}),d(a,"return",function(){var T=this;return new Promise(function(M,U){T[x].destroy(null,function(L){L?U(L):M(g(void 0,!0))})})}),a),b);n.exports=function(T){var M,U=Object.create(C,(d(M={},x,{value:T,writable:!0}),d(M,i,{value:null,writable:!0}),d(M,u,{value:null,writable:!0}),d(M,f,{value:null,writable:!0}),d(M,h,{value:T._readableState.endEmitted,writable:!0}),d(M,p,{value:function(L,P){var B=U[x].read();B?(U[m]=null,U[i]=null,U[u]=null,L(g(B,!1))):(U[i]=L,U[u]=P)},writable:!0}),M));return U[m]=null,l(T,function(L){if(L&&L.code!=="ERR_STREAM_PREMATURE_CLOSE"){var P=U[u];return P!==null&&(U[m]=null,U[i]=null,U[u]=null,P(L)),void(U[f]=L)}var B=U[i];B!==null&&(U[m]=null,U[i]=null,U[u]=null,B(g(void 0,!0))),U[h]=!0}),T.on("readable",y.bind(null,U)),U}}).call(this)}).call(this,s("_process"))},{"./end-of-stream":486,_process:467}],484:[function(s,n,c){function o(m,p){var x=Object.keys(m);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(m);p&&(g=g.filter(function(v){return Object.getOwnPropertyDescriptor(m,v).enumerable})),x.push.apply(x,g)}return x}function a(m){for(var p=1;p<arguments.length;p++){var x=arguments[p]!=null?arguments[p]:{};p%2?o(Object(x),!0).forEach(function(g){d(m,g,x[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(x)):o(Object(x)).forEach(function(g){Object.defineProperty(m,g,Object.getOwnPropertyDescriptor(x,g))})}return m}function d(m,p,x){return(p=i(p))in m?Object.defineProperty(m,p,{value:x,enumerable:!0,configurable:!0,writable:!0}):m[p]=x,m}function l(m,p){for(var x=0;x<p.length;x++){var g=p[x];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(m,i(g.key),g)}}function i(m){var p=function(x,g){if(typeof x!="object"||x===null)return x;var v=x[Symbol.toPrimitive];if(v!==void 0){var y=v.call(x,g||"default");if(typeof y!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(x)}(m,"string");return typeof p=="symbol"?p:String(p)}var u=s("buffer").Buffer,f=s("util").inspect,h=f&&f.custom||"inspect";n.exports=function(){function m(){(function(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")})(this,m),this.head=null,this.tail=null,this.length=0}var p,x;return p=m,(x=[{key:"push",value:function(g){var v={data:g,next:null};this.length>0?this.tail.next=v:this.head=v,this.tail=v,++this.length}},{key:"unshift",value:function(g){var v={data:g,next:this.head};this.length===0&&(this.tail=v),this.head=v,++this.length}},{key:"shift",value:function(){if(this.length!==0){var g=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,g}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(g){if(this.length===0)return"";for(var v=this.head,y=""+v.data;v=v.next;)y+=g+v.data;return y}},{key:"concat",value:function(g){if(this.length===0)return u.alloc(0);for(var v,y,b,C=u.allocUnsafe(g>>>0),T=this.head,M=0;T;)v=T.data,y=C,b=M,u.prototype.copy.call(v,y,b),M+=T.data.length,T=T.next;return C}},{key:"consume",value:function(g,v){var y;return g<this.head.data.length?(y=this.head.data.slice(0,g),this.head.data=this.head.data.slice(g)):y=g===this.head.data.length?this.shift():v?this._getString(g):this._getBuffer(g),y}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(g){var v=this.head,y=1,b=v.data;for(g-=b.length;v=v.next;){var C=v.data,T=g>C.length?C.length:g;if(T===C.length?b+=C:b+=C.slice(0,g),(g-=T)==0){T===C.length?(++y,v.next?this.head=v.next:this.head=this.tail=null):(this.head=v,v.data=C.slice(T));break}++y}return this.length-=y,b}},{key:"_getBuffer",value:function(g){var v=u.allocUnsafe(g),y=this.head,b=1;for(y.data.copy(v),g-=y.data.length;y=y.next;){var C=y.data,T=g>C.length?C.length:g;if(C.copy(v,v.length-g,0,T),(g-=T)==0){T===C.length?(++b,y.next?this.head=y.next:this.head=this.tail=null):(this.head=y,y.data=C.slice(T));break}++b}return this.length-=b,v}},{key:h,value:function(g,v){return f(this,a(a({},v),{},{depth:0,customInspect:!1}))}}])&&l(p.prototype,x),Object.defineProperty(p,"prototype",{writable:!1}),m}()},{buffer:220,util:188}],485:[function(s,n,c){(function(o){(function(){function a(i,u){l(i,u),d(i)}function d(i){i._writableState&&!i._writableState.emitClose||i._readableState&&!i._readableState.emitClose||i.emit("close")}function l(i,u){i.emit("error",u)}n.exports={destroy:function(i,u){var f=this,h=this._readableState&&this._readableState.destroyed,m=this._writableState&&this._writableState.destroyed;return h||m?(u?u(i):i&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,o.nextTick(l,this,i)):o.nextTick(l,this,i)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(i||null,function(p){!u&&p?f._writableState?f._writableState.errorEmitted?o.nextTick(d,f):(f._writableState.errorEmitted=!0,o.nextTick(a,f,p)):o.nextTick(a,f,p):u?(o.nextTick(d,f),u(p)):o.nextTick(d,f)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(i,u){var f=i._readableState,h=i._writableState;f&&f.autoDestroy||h&&h.autoDestroy?i.destroy(u):i.emit("error",u)}}}).call(this)}).call(this,s("_process"))},{_process:467}],486:[function(s,n,c){var o=s("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function a(){}n.exports=function d(l,i,u){if(typeof i=="function")return d(l,null,i);i||(i={}),u=function(T){var M=!1;return function(){if(!M){M=!0;for(var U=arguments.length,L=new Array(U),P=0;P<U;P++)L[P]=arguments[P];T.apply(this,L)}}}(u||a);var f=i.readable||i.readable!==!1&&l.readable,h=i.writable||i.writable!==!1&&l.writable,m=function(){l.writable||x()},p=l._writableState&&l._writableState.finished,x=function(){h=!1,p=!0,f||u.call(l)},g=l._readableState&&l._readableState.endEmitted,v=function(){f=!1,g=!0,h||u.call(l)},y=function(T){u.call(l,T)},b=function(){var T;return f&&!g?(l._readableState&&l._readableState.ended||(T=new o),u.call(l,T)):h&&!p?(l._writableState&&l._writableState.ended||(T=new o),u.call(l,T)):void 0},C=function(){l.req.on("finish",x)};return function(T){return T.setHeader&&typeof T.abort=="function"}(l)?(l.on("complete",x),l.on("abort",b),l.req?C():l.on("request",C)):h&&!l._writableState&&(l.on("end",m),l.on("close",m)),l.on("end",v),l.on("finish",x),i.error!==!1&&l.on("error",y),l.on("close",b),function(){l.removeListener("complete",x),l.removeListener("abort",b),l.removeListener("request",C),l.req&&l.req.removeListener("finish",x),l.removeListener("end",m),l.removeListener("close",m),l.removeListener("finish",x),l.removeListener("end",v),l.removeListener("error",y),l.removeListener("close",b)}}},{"../../../errors":477}],487:[function(s,n,c){n.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],488:[function(s,n,c){var o,a=s("../../../errors").codes,d=a.ERR_MISSING_ARGS,l=a.ERR_STREAM_DESTROYED;function i(p){if(p)throw p}function u(p,x,g,v){v=function(C){var T=!1;return function(){T||(T=!0,C.apply(void 0,arguments))}}(v);var y=!1;p.on("close",function(){y=!0}),o===void 0&&(o=s("./end-of-stream")),o(p,{readable:x,writable:g},function(C){if(C)return v(C);y=!0,v()});var b=!1;return function(C){if(!y&&!b)return b=!0,function(T){return T.setHeader&&typeof T.abort=="function"}(p)?p.abort():typeof p.destroy=="function"?p.destroy():void v(C||new l("pipe"))}}function f(p){p()}function h(p,x){return p.pipe(x)}function m(p){return p.length?typeof p[p.length-1]!="function"?i:p.pop():i}n.exports=function(){for(var p=arguments.length,x=new Array(p),g=0;g<p;g++)x[g]=arguments[g];var v,y=m(x);if(Array.isArray(x[0])&&(x=x[0]),x.length<2)throw new d("streams");var b=x.map(function(C,T){var M=T<x.length-1;return u(C,M,T>0,function(U){v||(v=U),U&&b.forEach(f),M||(b.forEach(f),y(v))})});return x.reduce(h)}},{"../../../errors":477,"./end-of-stream":486}],489:[function(s,n,c){var o=s("../../../errors").codes.ERR_INVALID_OPT_VALUE;n.exports={getHighWaterMark:function(a,d,l,i){var u=function(f,h,m){return f.highWaterMark!=null?f.highWaterMark:h?f[m]:null}(d,i,l);if(u!=null){if(!isFinite(u)||Math.floor(u)!==u||u<0)throw new o(i?l:"highWaterMark",u);return Math.floor(u)}return a.objectMode?16:16384}}},{"../../../errors":477}],490:[function(s,n,c){n.exports=s("events").EventEmitter},{events:422}],491:[function(s,n,c){(c=n.exports=s("./lib/_stream_readable.js")).Stream=c,c.Readable=c,c.Writable=s("./lib/_stream_writable.js"),c.Duplex=s("./lib/_stream_duplex.js"),c.Transform=s("./lib/_stream_transform.js"),c.PassThrough=s("./lib/_stream_passthrough.js"),c.finished=s("./lib/internal/streams/end-of-stream.js"),c.pipeline=s("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":478,"./lib/_stream_passthrough.js":479,"./lib/_stream_readable.js":480,"./lib/_stream_transform.js":481,"./lib/_stream_writable.js":482,"./lib/internal/streams/end-of-stream.js":486,"./lib/internal/streams/pipeline.js":488}],492:[function(s,n,c){var o=function(a){var d=Object.prototype,l=d.hasOwnProperty,i=Object.defineProperty||function(j,N,E){j[N]=E.value},u=typeof Symbol=="function"?Symbol:{},f=u.iterator||"@@iterator",h=u.asyncIterator||"@@asyncIterator",m=u.toStringTag||"@@toStringTag";function p(j,N,E){return Object.defineProperty(j,N,{value:E,enumerable:!0,configurable:!0,writable:!0}),j[N]}try{p({},"")}catch{p=function(N,E,I){return N[E]=I}}function x(j,N,E,I){var D=N&&N.prototype instanceof y?N:y,V=Object.create(D.prototype),H=new S(I||[]);return i(V,"_invoke",{value:q(j,E,H)}),V}function g(j,N,E){try{return{type:"normal",arg:j.call(N,E)}}catch(I){return{type:"throw",arg:I}}}a.wrap=x;var v={};function y(){}function b(){}function C(){}var T={};p(T,f,function(){return this});var M=Object.getPrototypeOf,U=M&&M(M(w([])));U&&U!==d&&l.call(U,f)&&(T=U);var L=C.prototype=y.prototype=Object.create(T);function P(j){["next","throw","return"].forEach(function(N){p(j,N,function(E){return this._invoke(N,E)})})}function B(j,N){var E;i(this,"_invoke",{value:function(I,D){function V(){return new N(function(H,G){(function $(Y,F,O,W){var K=g(j[Y],j,F);if(K.type!=="throw"){var Q=K.arg,X=Q.value;return X&&typeof X=="object"&&l.call(X,"__await")?N.resolve(X.__await).then(function(te){$("next",te,O,W)},function(te){$("throw",te,O,W)}):N.resolve(X).then(function(te){Q.value=te,O(Q)},function(te){return $("throw",te,O,W)})}W(K.arg)})(I,D,H,G)})}return E=E?E.then(V,V):V()}})}function q(j,N,E){var I="suspendedStart";return function(D,V){if(I==="executing")throw new Error("Generator is already running");if(I==="completed"){if(D==="throw")throw V;return _()}for(E.method=D,E.arg=V;;){var H=E.delegate;if(H){var G=z(H,E);if(G){if(G===v)continue;return G}}if(E.method==="next")E.sent=E._sent=E.arg;else if(E.method==="throw"){if(I==="suspendedStart")throw I="completed",E.arg;E.dispatchException(E.arg)}else E.method==="return"&&E.abrupt("return",E.arg);I="executing";var $=g(j,N,E);if($.type==="normal"){if(I=E.done?"completed":"suspendedYield",$.arg===v)continue;return{value:$.arg,done:E.done}}$.type==="throw"&&(I="completed",E.method="throw",E.arg=$.arg)}}}function z(j,N){var E=N.method,I=j.iterator[E];if(I===void 0)return N.delegate=null,E==="throw"&&j.iterator.return&&(N.method="return",N.arg=void 0,z(j,N),N.method==="throw")||E!=="return"&&(N.method="throw",N.arg=new TypeError("The iterator does not provide a '"+E+"' method")),v;var D=g(I,j.iterator,N.arg);if(D.type==="throw")return N.method="throw",N.arg=D.arg,N.delegate=null,v;var V=D.arg;return V?V.done?(N[j.resultName]=V.value,N.next=j.nextLoc,N.method!=="return"&&(N.method="next",N.arg=void 0),N.delegate=null,v):V:(N.method="throw",N.arg=new TypeError("iterator result is not an object"),N.delegate=null,v)}function k(j){var N={tryLoc:j[0]};1 in j&&(N.catchLoc=j[1]),2 in j&&(N.finallyLoc=j[2],N.afterLoc=j[3]),this.tryEntries.push(N)}function R(j){var N=j.completion||{};N.type="normal",delete N.arg,j.completion=N}function S(j){this.tryEntries=[{tryLoc:"root"}],j.forEach(k,this),this.reset(!0)}function w(j){if(j){var N=j[f];if(N)return N.call(j);if(typeof j.next=="function")return j;if(!isNaN(j.length)){var E=-1,I=function D(){for(;++E<j.length;)if(l.call(j,E))return D.value=j[E],D.done=!1,D;return D.value=void 0,D.done=!0,D};return I.next=I}}return{next:_}}function _(){return{value:void 0,done:!0}}return b.prototype=C,i(L,"constructor",{value:C,configurable:!0}),i(C,"constructor",{value:b,configurable:!0}),b.displayName=p(C,m,"GeneratorFunction"),a.isGeneratorFunction=function(j){var N=typeof j=="function"&&j.constructor;return!!N&&(N===b||(N.displayName||N.name)==="GeneratorFunction")},a.mark=function(j){return Object.setPrototypeOf?Object.setPrototypeOf(j,C):(j.__proto__=C,p(j,m,"GeneratorFunction")),j.prototype=Object.create(L),j},a.awrap=function(j){return{__await:j}},P(B.prototype),p(B.prototype,h,function(){return this}),a.AsyncIterator=B,a.async=function(j,N,E,I,D){D===void 0&&(D=Promise);var V=new B(x(j,N,E,I),D);return a.isGeneratorFunction(N)?V:V.next().then(function(H){return H.done?H.value:V.next()})},P(L),p(L,m,"Generator"),p(L,f,function(){return this}),p(L,"toString",function(){return"[object Generator]"}),a.keys=function(j){var N=Object(j),E=[];for(var I in N)E.push(I);return E.reverse(),function D(){for(;E.length;){var V=E.pop();if(V in N)return D.value=V,D.done=!1,D}return D.done=!0,D}},a.values=w,S.prototype={constructor:S,reset:function(j){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!j)for(var N in this)N.charAt(0)==="t"&&l.call(this,N)&&!isNaN(+N.slice(1))&&(this[N]=void 0)},stop:function(){this.done=!0;var j=this.tryEntries[0].completion;if(j.type==="throw")throw j.arg;return this.rval},dispatchException:function(j){if(this.done)throw j;var N=this;function E($,Y){return V.type="throw",V.arg=j,N.next=$,Y&&(N.method="next",N.arg=void 0),!!Y}for(var I=this.tryEntries.length-1;I>=0;--I){var D=this.tryEntries[I],V=D.completion;if(D.tryLoc==="root")return E("end");if(D.tryLoc<=this.prev){var H=l.call(D,"catchLoc"),G=l.call(D,"finallyLoc");if(H&&G){if(this.prev<D.catchLoc)return E(D.catchLoc,!0);if(this.prev<D.finallyLoc)return E(D.finallyLoc)}else if(H){if(this.prev<D.catchLoc)return E(D.catchLoc,!0)}else{if(!G)throw new Error("try statement without catch or finally");if(this.prev<D.finallyLoc)return E(D.finallyLoc)}}}},abrupt:function(j,N){for(var E=this.tryEntries.length-1;E>=0;--E){var I=this.tryEntries[E];if(I.tryLoc<=this.prev&&l.call(I,"finallyLoc")&&this.prev<I.finallyLoc){var D=I;break}}D&&(j==="break"||j==="continue")&&D.tryLoc<=N&&N<=D.finallyLoc&&(D=null);var V=D?D.completion:{};return V.type=j,V.arg=N,D?(this.method="next",this.next=D.finallyLoc,v):this.complete(V)},complete:function(j,N){if(j.type==="throw")throw j.arg;return j.type==="break"||j.type==="continue"?this.next=j.arg:j.type==="return"?(this.rval=this.arg=j.arg,this.method="return",this.next="end"):j.type==="normal"&&N&&(this.next=N),v},finish:function(j){for(var N=this.tryEntries.length-1;N>=0;--N){var E=this.tryEntries[N];if(E.finallyLoc===j)return this.complete(E.completion,E.afterLoc),R(E),v}},catch:function(j){for(var N=this.tryEntries.length-1;N>=0;--N){var E=this.tryEntries[N];if(E.tryLoc===j){var I=E.completion;if(I.type==="throw"){var D=I.arg;R(E)}return D}}throw new Error("illegal catch attempt")},delegateYield:function(j,N,E){return this.delegate={iterator:w(j),resultName:N,nextLoc:E},this.method==="next"&&(this.arg=void 0),v}},a}(typeof n=="object"?n.exports:{});try{regeneratorRuntime=o}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}},{}],493:[function(s,n,c){var o=s("buffer").Buffer,a=s("inherits"),d=s("hash-base"),l=new Array(16),i=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],u=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],f=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],h=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],m=[0,1518500249,1859775393,2400959708,2840853838],p=[1352829926,1548603684,1836072691,2053994217,0];function x(){d.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function g(M,U){return M<<U|M>>>32-U}function v(M,U,L,P,B,q,z,k){return g(M+(U^L^P)+q+z|0,k)+B|0}function y(M,U,L,P,B,q,z,k){return g(M+(U&L|~U&P)+q+z|0,k)+B|0}function b(M,U,L,P,B,q,z,k){return g(M+((U|~L)^P)+q+z|0,k)+B|0}function C(M,U,L,P,B,q,z,k){return g(M+(U&P|L&~P)+q+z|0,k)+B|0}function T(M,U,L,P,B,q,z,k){return g(M+(U^(L|~P))+q+z|0,k)+B|0}a(x,d),x.prototype._update=function(){for(var M=l,U=0;U<16;++U)M[U]=this._block.readInt32LE(4*U);for(var L=0|this._a,P=0|this._b,B=0|this._c,q=0|this._d,z=0|this._e,k=0|this._a,R=0|this._b,S=0|this._c,w=0|this._d,_=0|this._e,j=0;j<80;j+=1){var N,E;j<16?(N=v(L,P,B,q,z,M[i[j]],m[0],f[j]),E=T(k,R,S,w,_,M[u[j]],p[0],h[j])):j<32?(N=y(L,P,B,q,z,M[i[j]],m[1],f[j]),E=C(k,R,S,w,_,M[u[j]],p[1],h[j])):j<48?(N=b(L,P,B,q,z,M[i[j]],m[2],f[j]),E=b(k,R,S,w,_,M[u[j]],p[2],h[j])):j<64?(N=C(L,P,B,q,z,M[i[j]],m[3],f[j]),E=y(k,R,S,w,_,M[u[j]],p[3],h[j])):(N=T(L,P,B,q,z,M[i[j]],m[4],f[j]),E=v(k,R,S,w,_,M[u[j]],p[4],h[j])),L=z,z=q,q=g(B,10),B=P,P=N,k=_,_=w,w=g(S,10),S=R,R=E}var I=this._b+B+w|0;this._b=this._c+q+_|0,this._c=this._d+z+k|0,this._d=this._e+L+R|0,this._e=this._a+P+S|0,this._a=I},x.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var M=o.alloc?o.alloc(20):new o(20);return M.writeInt32LE(this._a,0),M.writeInt32LE(this._b,4),M.writeInt32LE(this._c,8),M.writeInt32LE(this._d,12),M.writeInt32LE(this._e,16),M},n.exports=x},{buffer:220,"hash-base":425,inherits:440}],494:[function(s,n,c){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var o=s("buffer"),a=o.Buffer;function d(i,u){for(var f in i)u[f]=i[f]}function l(i,u,f){return a(i,u,f)}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?n.exports=o:(d(o,c),c.Buffer=l),l.prototype=Object.create(a.prototype),d(a,l),l.from=function(i,u,f){if(typeof i=="number")throw new TypeError("Argument must not be a number");return a(i,u,f)},l.alloc=function(i,u,f){if(typeof i!="number")throw new TypeError("Argument must be a number");var h=a(i);return u!==void 0?typeof f=="string"?h.fill(u,f):h.fill(u):h.fill(0),h},l.allocUnsafe=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return a(i)},l.allocUnsafeSlow=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return o.SlowBuffer(i)}},{buffer:220}],495:[function(s,n,c){(function(o){(function(){var a,d=s("buffer"),l=d.Buffer,i={};for(a in d)d.hasOwnProperty(a)&&a!=="SlowBuffer"&&a!=="Buffer"&&(i[a]=d[a]);var u=i.Buffer={};for(a in l)l.hasOwnProperty(a)&&a!=="allocUnsafe"&&a!=="allocUnsafeSlow"&&(u[a]=l[a]);if(i.Buffer.prototype=l.prototype,u.from&&u.from!==Uint8Array.from||(u.from=function(f,h,m){if(typeof f=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof f);if(f&&f.length===void 0)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);return l(f,h,m)}),u.alloc||(u.alloc=function(f,h,m){if(typeof f!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof f);if(f<0||f>=2*(1<<30))throw new RangeError('The value "'+f+'" is invalid for option "size"');var p=l(f);return h&&h.length!==0?typeof m=="string"?p.fill(h,m):p.fill(h):p.fill(0),p}),!i.kStringMaxLength)try{i.kStringMaxLength=o.binding("buffer").kStringMaxLength}catch{}i.constants||(i.constants={MAX_LENGTH:i.kMaxLength},i.kStringMaxLength&&(i.constants.MAX_STRING_LENGTH=i.kStringMaxLength)),n.exports=i}).call(this)}).call(this,s("_process"))},{_process:467,buffer:220}],496:[function(s,n,c){Object.defineProperty(c,"__esModule",{value:!0});const o=s("xmlchars/xml/1.0/ed5"),a=s("xmlchars/xml/1.1/ed2"),d=s("xmlchars/xmlns/1.0/ed3");var l=o.isS,i=o.isChar,u=o.isNameStartChar,f=o.isNameChar,h=o.S_LIST,m=o.NAME_RE,p=a.isChar,x=d.isNCNameStartChar,g=d.isNCNameChar,v=d.NC_NAME_RE;const y="http://www.w3.org/XML/1998/namespace",b="http://www.w3.org/2000/xmlns/",C={__proto__:null,xml:y,xmlns:b},T={__proto__:null,amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},M=w=>w===34||w===39,U=[34,39],L=[...U,91,62],P=[...U,60,93],B=[61,63,...h],q=[...h,62,38,60];function z(w,_,j){switch(_){case"xml":j!==y&&w.fail(`xml prefix must be bound to ${y}.`);break;case"xmlns":j!==b&&w.fail(`xmlns prefix must be bound to ${b}.`)}switch(j){case b:w.fail(_===""?`the default namespace may not be set to ${j}.`:`may not assign a prefix (even "xmlns") to the URI ${b}.`);break;case y:switch(_){case"xml":break;case"":w.fail(`the default namespace may not be set to ${j}.`);break;default:w.fail("may not assign the xml namespace to another prefix.")}}}const k=w=>v.test(w),R=w=>m.test(w);c.EVENTS=["xmldecl","text","processinginstruction","doctype","comment","opentagstart","attribute","opentag","closetag","cdata","error","end","ready"];const S={xmldecl:"xmldeclHandler",text:"textHandler",processinginstruction:"piHandler",doctype:"doctypeHandler",comment:"commentHandler",opentagstart:"openTagStartHandler",attribute:"attributeHandler",opentag:"openTagHandler",closetag:"closeTagHandler",cdata:"cdataHandler",error:"errorHandler",end:"endHandler",ready:"readyHandler"};c.SaxesParser=class{constructor(w){this.opt=w??{},this.fragmentOpt=!!this.opt.fragment;const _=this.xmlnsOpt=!!this.opt.xmlns;if(this.trackPosition=this.opt.position!==!1,this.fileName=this.opt.fileName,_){this.nameStartCheck=x,this.nameCheck=g,this.isName=k,this.processAttribs=this.processAttribsNS,this.pushAttrib=this.pushAttribNS,this.ns=Object.assign({__proto__:null},C);const j=this.opt.additionalNamespaces;j!=null&&(function(N,E){for(const I of Object.keys(E))z(N,I,E[I])}(this,j),Object.assign(this.ns,j))}else this.nameStartCheck=u,this.nameCheck=f,this.isName=R,this.processAttribs=this.processAttribsPlain,this.pushAttrib=this.pushAttribPlain;this.stateTable=[this.sBegin,this.sBeginWhitespace,this.sDoctype,this.sDoctypeQuote,this.sDTD,this.sDTDQuoted,this.sDTDOpenWaka,this.sDTDOpenWakaBang,this.sDTDComment,this.sDTDCommentEnding,this.sDTDCommentEnded,this.sDTDPI,this.sDTDPIEnding,this.sText,this.sEntity,this.sOpenWaka,this.sOpenWakaBang,this.sComment,this.sCommentEnding,this.sCommentEnded,this.sCData,this.sCDataEnding,this.sCDataEnding2,this.sPIFirstChar,this.sPIRest,this.sPIBody,this.sPIEnding,this.sXMLDeclNameStart,this.sXMLDeclName,this.sXMLDeclEq,this.sXMLDeclValueStart,this.sXMLDeclValue,this.sXMLDeclSeparator,this.sXMLDeclEnding,this.sOpenTag,this.sOpenTagSlash,this.sAttrib,this.sAttribName,this.sAttribNameSawWhite,this.sAttribValue,this.sAttribValueQuoted,this.sAttribValueClosed,this.sAttribValueUnquoted,this.sCloseTag,this.sCloseTagSawWhite],this._init()}get closed(){return this._closed}_init(){var w;this.openWakaBang="",this.text="",this.name="",this.piTarget="",this.entity="",this.q=null,this.tags=[],this.tag=null,this.topNS=null,this.chunk="",this.chunkPosition=0,this.i=0,this.prevI=0,this.carriedFromPrevious=void 0,this.forbiddenState=0,this.attribList=[];const{fragmentOpt:_}=this;this.state=_?13:0,this.reportedTextBeforeRoot=this.reportedTextAfterRoot=this.closedRoot=this.sawRoot=_,this.xmlDeclPossible=!_,this.xmlDeclExpects=["version"],this.entityReturnState=void 0;let{defaultXMLVersion:j}=this.opt;if(j===void 0){if(this.opt.forceXMLVersion===!0)throw new Error("forceXMLVersion set but defaultXMLVersion is not set");j="1.0"}this.setXMLVersion(j),this.positionAtNewLine=0,this.doctype=!1,this._closed=!1,this.xmlDecl={version:void 0,encoding:void 0,standalone:void 0},this.line=1,this.column=0,this.ENTITIES=Object.create(T),(w=this.readyHandler)===null||w===void 0||w.call(this)}get position(){return this.chunkPosition+this.i}get columnIndex(){return this.position-this.positionAtNewLine}on(w,_){this[S[w]]=_}off(w){this[S[w]]=void 0}makeError(w){var _;let j=(_=this.fileName)!==null&&_!==void 0?_:"";return this.trackPosition&&(j.length>0&&(j+=":"),j+=`${this.line}:${this.column}`),j.length>0&&(j+=": "),new Error(j+w)}fail(w){const _=this.makeError(w),j=this.errorHandler;if(j===void 0)throw _;return j(_),this}write(w){if(this.closed)return this.fail("cannot write after close; assign an onready handler.");let _=!1;w===null?(_=!0,w=""):typeof w=="object"&&(w=w.toString()),this.carriedFromPrevious!==void 0&&(w=`${this.carriedFromPrevious}${w}`,this.carriedFromPrevious=void 0);let j=w.length;const N=w.charCodeAt(j-1);!_&&(N===13||N>=55296&&N<=56319)&&(this.carriedFromPrevious=w[j-1],j--,w=w.slice(0,j));const{stateTable:E}=this;for(this.chunk=w,this.i=0;this.i<j;)E[this.state].call(this);return this.chunkPosition+=j,_?this.end():this}close(){return this.write(null)}getCode10(){const{chunk:w,i:_}=this;if(this.prevI=_,this.i=_+1,_>=w.length)return-1;const j=w.charCodeAt(_);if(this.column++,j<55296){if(j>=32||j===9)return j;switch(j){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:return w.charCodeAt(_+1)===10&&(this.i=_+2),this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),j}}if(j>56319)return j>=57344&&j<=65533||this.fail("disallowed character."),j;const N=65536+1024*(j-55296)+(w.charCodeAt(_+1)-56320);return this.i=_+2,N>1114111&&this.fail("disallowed character."),N}getCode11(){const{chunk:w,i:_}=this;if(this.prevI=_,this.i=_+1,_>=w.length)return-1;const j=w.charCodeAt(_);if(this.column++,j<55296){if(j>31&&j<127||j>159&&j!==8232||j===9)return j;switch(j){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:{const E=w.charCodeAt(_+1);E!==10&&E!==133||(this.i=_+2)}case 133:case 8232:return this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),j}}if(j>56319)return j>=57344&&j<=65533||this.fail("disallowed character."),j;const N=65536+1024*(j-55296)+(w.charCodeAt(_+1)-56320);return this.i=_+2,N>1114111&&this.fail("disallowed character."),N}getCodeNorm(){const w=this.getCode();return w===-2?10:w}unget(){this.i=this.prevI,this.column--}captureTo(w){let{i:_}=this;const{chunk:j}=this;for(;;){const N=this.getCode(),E=N===-2,I=E?10:N;if(I===-1||w.includes(I))return this.text+=j.slice(_,this.prevI),I;E&&(this.text+=j.slice(_,this.prevI)+`
`,_=this.i)}}captureToChar(w){let{i:_}=this;const{chunk:j}=this;for(;;){let N=this.getCode();switch(N){case-2:this.text+=j.slice(_,this.prevI)+`
`,_=this.i,N=10;break;case-1:return this.text+=j.slice(_),!1}if(N===w)return this.text+=j.slice(_,this.prevI),!0}}captureNameChars(){const{chunk:w,i:_}=this;for(;;){const j=this.getCode();if(j===-1)return this.name+=w.slice(_),-1;if(!f(j))return this.name+=w.slice(_,this.prevI),j===-2?10:j}}skipSpaces(){for(;;){const w=this.getCodeNorm();if(w===-1||!l(w))return w}}setXMLVersion(w){this.currentXMLVersion=w,w==="1.0"?(this.isChar=i,this.getCode=this.getCode10):(this.isChar=p,this.getCode=this.getCode11)}sBegin(){this.chunk.charCodeAt(0)===65279&&(this.i++,this.column++),this.state=1}sBeginWhitespace(){const w=this.i,_=this.skipSpaces();switch(this.prevI!==w&&(this.xmlDeclPossible=!1),_){case 60:if(this.state=15,this.text.length!==0)throw new Error("no-empty text at start");break;case-1:break;default:this.unget(),this.state=13,this.xmlDeclPossible=!1}}sDoctype(){var w;const _=this.captureTo(L);switch(_){case 62:(w=this.doctypeHandler)===null||w===void 0||w.call(this,this.text),this.text="",this.state=13,this.doctype=!0;break;case-1:break;default:this.text+=String.fromCodePoint(_),_===91?this.state=4:M(_)&&(this.state=3,this.q=_)}}sDoctypeQuote(){const w=this.q;this.captureToChar(w)&&(this.text+=String.fromCodePoint(w),this.q=null,this.state=2)}sDTD(){const w=this.captureTo(P);w!==-1&&(this.text+=String.fromCodePoint(w),w===93?this.state=2:w===60?this.state=6:M(w)&&(this.state=5,this.q=w))}sDTDQuoted(){const w=this.q;this.captureToChar(w)&&(this.text+=String.fromCodePoint(w),this.state=4,this.q=null)}sDTDOpenWaka(){const w=this.getCodeNorm();switch(this.text+=String.fromCodePoint(w),w){case 33:this.state=7,this.openWakaBang="";break;case 63:this.state=11;break;default:this.state=4}}sDTDOpenWakaBang(){const w=String.fromCodePoint(this.getCodeNorm()),_=this.openWakaBang+=w;this.text+=w,_!=="-"&&(this.state=_==="--"?8:4,this.openWakaBang="")}sDTDComment(){this.captureToChar(45)&&(this.text+="-",this.state=9)}sDTDCommentEnding(){const w=this.getCodeNorm();this.text+=String.fromCodePoint(w),this.state=w===45?10:8}sDTDCommentEnded(){const w=this.getCodeNorm();this.text+=String.fromCodePoint(w),w===62?this.state=4:(this.fail("malformed comment."),this.state=8)}sDTDPI(){this.captureToChar(63)&&(this.text+="?",this.state=12)}sDTDPIEnding(){const w=this.getCodeNorm();this.text+=String.fromCodePoint(w),w===62&&(this.state=4)}sText(){this.tags.length!==0?this.handleTextInRoot():this.handleTextOutsideRoot()}sEntity(){let{i:w}=this;const{chunk:_}=this;e:for(;;)switch(this.getCode()){case-2:this.entity+=_.slice(w,this.prevI)+`
`,w=this.i;break;case 59:{const{entityReturnState:j}=this,N=this.entity+_.slice(w,this.prevI);let E;this.state=j,N===""?(this.fail("empty entity name."),E="&;"):(E=this.parseEntity(N),this.entity=""),j===13&&this.textHandler===void 0||(this.text+=E);break e}case-1:this.entity+=_.slice(w);break e}}sOpenWaka(){const w=this.getCode();if(u(w))this.state=34,this.unget(),this.xmlDeclPossible=!1;else switch(w){case 47:this.state=43,this.xmlDeclPossible=!1;break;case 33:this.state=16,this.openWakaBang="",this.xmlDeclPossible=!1;break;case 63:this.state=23;break;default:this.fail("disallowed character in tag name"),this.state=13,this.xmlDeclPossible=!1}}sOpenWakaBang(){switch(this.openWakaBang+=String.fromCodePoint(this.getCodeNorm()),this.openWakaBang){case"[CDATA[":this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0),this.state=20,this.openWakaBang="";break;case"--":this.state=17,this.openWakaBang="";break;case"DOCTYPE":this.state=2,(this.doctype||this.sawRoot)&&this.fail("inappropriately located doctype declaration."),this.openWakaBang="";break;default:this.openWakaBang.length>=7&&this.fail("incorrect syntax.")}}sComment(){this.captureToChar(45)&&(this.state=18)}sCommentEnding(){var w;const _=this.getCodeNorm();_===45?(this.state=19,(w=this.commentHandler)===null||w===void 0||w.call(this,this.text),this.text=""):(this.text+="-"+String.fromCodePoint(_),this.state=17)}sCommentEnded(){const w=this.getCodeNorm();w!==62?(this.fail("malformed comment."),this.text+="--"+String.fromCodePoint(w),this.state=17):this.state=13}sCData(){this.captureToChar(93)&&(this.state=21)}sCDataEnding(){const w=this.getCodeNorm();w===93?this.state=22:(this.text+="]"+String.fromCodePoint(w),this.state=20)}sCDataEnding2(){var w;const _=this.getCodeNorm();switch(_){case 62:(w=this.cdataHandler)===null||w===void 0||w.call(this,this.text),this.text="",this.state=13;break;case 93:this.text+="]";break;default:this.text+="]]"+String.fromCodePoint(_),this.state=20}}sPIFirstChar(){const w=this.getCodeNorm();this.nameStartCheck(w)?(this.piTarget+=String.fromCodePoint(w),this.state=24):w===63||l(w)?(this.fail("processing instruction without a target."),this.state=w===63?26:25):(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(w),this.state=24)}sPIRest(){const{chunk:w,i:_}=this;for(;;){const j=this.getCodeNorm();if(j===-1)return void(this.piTarget+=w.slice(_));if(!this.nameCheck(j)){this.piTarget+=w.slice(_,this.prevI);const N=j===63;N||l(j)?this.piTarget==="xml"?(this.xmlDeclPossible||this.fail("an XML declaration must be at the start of the document."),this.state=N?33:27):this.state=N?26:25:(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(j));break}}}sPIBody(){if(this.text.length===0){const w=this.getCodeNorm();w===63?this.state=26:l(w)||(this.text=String.fromCodePoint(w))}else this.captureToChar(63)&&(this.state=26)}sPIEnding(){var w;const _=this.getCodeNorm();if(_===62){const{piTarget:j}=this;j.toLowerCase()==="xml"&&this.fail("the XML declaration must appear at the start of the document."),(w=this.piHandler)===null||w===void 0||w.call(this,{target:j,body:this.text}),this.piTarget=this.text="",this.state=13}else _===63?this.text+="?":(this.text+="?"+String.fromCodePoint(_),this.state=25);this.xmlDeclPossible=!1}sXMLDeclNameStart(){const w=this.skipSpaces();w!==63?w!==-1&&(this.state=28,this.name=String.fromCodePoint(w)):this.state=33}sXMLDeclName(){const w=this.captureTo(B);if(w===63)return this.state=33,this.name+=this.text,this.text="",void this.fail("XML declaration is incomplete.");if(l(w)||w===61){if(this.name+=this.text,this.text="",!this.xmlDeclExpects.includes(this.name))switch(this.name.length){case 0:this.fail("did not expect any more name/value pairs.");break;case 1:this.fail(`expected the name ${this.xmlDeclExpects[0]}.`);break;default:this.fail("expected one of "+this.xmlDeclExpects.join(", "))}this.state=w===61?30:29}}sXMLDeclEq(){const w=this.getCodeNorm();if(w===63)return this.state=33,void this.fail("XML declaration is incomplete.");l(w)||(w!==61&&this.fail("value required."),this.state=30)}sXMLDeclValueStart(){const w=this.getCodeNorm();if(w===63)return this.state=33,void this.fail("XML declaration is incomplete.");l(w)||(M(w)?this.q=w:(this.fail("value must be quoted."),this.q=32),this.state=31)}sXMLDeclValue(){const w=this.captureTo([this.q,63]);if(w===63)return this.state=33,this.text="",void this.fail("XML declaration is incomplete.");if(w===-1)return;const _=this.text;switch(this.text="",this.name){case"version":{this.xmlDeclExpects=["encoding","standalone"];const j=_;this.xmlDecl.version=j,/^1\.[0-9]+$/.test(j)?this.opt.forceXMLVersion||this.setXMLVersion(j):this.fail("version number must match /^1\\.[0-9]+$/.");break}case"encoding":/^[A-Za-z][A-Za-z0-9._-]*$/.test(_)||this.fail("encoding value must match /^[A-Za-z0-9][A-Za-z0-9._-]*$/."),this.xmlDeclExpects=["standalone"],this.xmlDecl.encoding=_;break;case"standalone":_!=="yes"&&_!=="no"&&this.fail('standalone value must match "yes" or "no".'),this.xmlDeclExpects=[],this.xmlDecl.standalone=_}this.name="",this.state=32}sXMLDeclSeparator(){const w=this.getCodeNorm();w!==63?(l(w)||(this.fail("whitespace required."),this.unget()),this.state=27):this.state=33}sXMLDeclEnding(){var w;this.getCodeNorm()===62?(this.piTarget!=="xml"?this.fail("processing instructions are not allowed before root."):this.name!=="version"&&this.xmlDeclExpects.includes("version")&&this.fail("XML declaration must contain a version."),(w=this.xmldeclHandler)===null||w===void 0||w.call(this,this.xmlDecl),this.name="",this.piTarget=this.text="",this.state=13):this.fail("The character ? is disallowed anywhere in XML declarations."),this.xmlDeclPossible=!1}sOpenTag(){var w;const _=this.captureNameChars();if(_===-1)return;const j=this.tag={name:this.name,attributes:Object.create(null)};switch(this.name="",this.xmlnsOpt&&(this.topNS=j.ns=Object.create(null)),(w=this.openTagStartHandler)===null||w===void 0||w.call(this,j),this.sawRoot=!0,!this.fragmentOpt&&this.closedRoot&&this.fail("documents may contain only one root."),_){case 62:this.openTag();break;case 47:this.state=35;break;default:l(_)||this.fail("disallowed character in tag name."),this.state=36}}sOpenTagSlash(){this.getCode()===62?this.openSelfClosingTag():(this.fail("forward-slash in opening tag not followed by >."),this.state=36)}sAttrib(){const w=this.skipSpaces();w!==-1&&(u(w)?(this.unget(),this.state=37):w===62?this.openTag():w===47?this.state=35:this.fail("disallowed character in attribute name."))}sAttribName(){const w=this.captureNameChars();w===61?this.state=39:l(w)?this.state=38:w===62?(this.fail("attribute without value."),this.pushAttrib(this.name,this.name),this.name=this.text="",this.openTag()):w!==-1&&this.fail("disallowed character in attribute name.")}sAttribNameSawWhite(){const w=this.skipSpaces();switch(w){case-1:return;case 61:this.state=39;break;default:this.fail("attribute without value."),this.text="",this.name="",w===62?this.openTag():u(w)?(this.unget(),this.state=37):(this.fail("disallowed character in attribute name."),this.state=36)}}sAttribValue(){const w=this.getCodeNorm();M(w)?(this.q=w,this.state=40):l(w)||(this.fail("unquoted attribute value."),this.state=42,this.unget())}sAttribValueQuoted(){const{q:w,chunk:_}=this;let{i:j}=this;for(;;)switch(this.getCode()){case w:return this.pushAttrib(this.name,this.text+_.slice(j,this.prevI)),this.name=this.text="",this.q=null,void(this.state=41);case 38:return this.text+=_.slice(j,this.prevI),this.state=14,void(this.entityReturnState=40);case 10:case-2:case 9:this.text+=_.slice(j,this.prevI)+" ",j=this.i;break;case 60:return this.text+=_.slice(j,this.prevI),void this.fail("disallowed character.");case-1:return void(this.text+=_.slice(j))}}sAttribValueClosed(){const w=this.getCodeNorm();l(w)?this.state=36:w===62?this.openTag():w===47?this.state=35:u(w)?(this.fail("no whitespace between attributes."),this.unget(),this.state=37):this.fail("disallowed character in attribute name.")}sAttribValueUnquoted(){const w=this.captureTo(q);switch(w){case 38:this.state=14,this.entityReturnState=42;break;case 60:this.fail("disallowed character.");break;case-1:break;default:this.text.includes("]]>")&&this.fail('the string "]]>" is disallowed in char data.'),this.pushAttrib(this.name,this.text),this.name=this.text="",w===62?this.openTag():this.state=36}}sCloseTag(){const w=this.captureNameChars();w===62?this.closeTag():l(w)?this.state=44:w!==-1&&this.fail("disallowed character in closing tag.")}sCloseTagSawWhite(){switch(this.skipSpaces()){case 62:this.closeTag();break;case-1:break;default:this.fail("disallowed character in closing tag.")}}handleTextInRoot(){let{i:w,forbiddenState:_}=this;const{chunk:j,textHandler:N}=this;e:for(;;)switch(this.getCode()){case 60:if(this.state=15,N!==void 0){const{text:E}=this,I=j.slice(w,this.prevI);E.length!==0?(N(E+I),this.text=""):I.length!==0&&N(I)}_=0;break e;case 38:this.state=14,this.entityReturnState=13,N!==void 0&&(this.text+=j.slice(w,this.prevI)),_=0;break e;case 93:switch(_){case 0:_=1;break;case 1:_=2;break;case 2:break;default:throw new Error("impossible state")}break;case 62:_===2&&this.fail('the string "]]>" is disallowed in char data.'),_=0;break;case-2:N!==void 0&&(this.text+=j.slice(w,this.prevI)+`
`),w=this.i,_=0;break;case-1:N!==void 0&&(this.text+=j.slice(w));break e;default:_=0}this.forbiddenState=_}handleTextOutsideRoot(){let{i:w}=this;const{chunk:_,textHandler:j}=this;let N=!1;e:for(;;){const E=this.getCode();switch(E){case 60:if(this.state=15,j!==void 0){const{text:I}=this,D=_.slice(w,this.prevI);I.length!==0?(j(I+D),this.text=""):D.length!==0&&j(D)}break e;case 38:this.state=14,this.entityReturnState=13,j!==void 0&&(this.text+=_.slice(w,this.prevI)),N=!0;break e;case-2:j!==void 0&&(this.text+=_.slice(w,this.prevI)+`
`),w=this.i;break;case-1:j!==void 0&&(this.text+=_.slice(w));break e;default:l(E)||(N=!0)}}N&&(this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0))}pushAttribNS(w,_){var j;const{prefix:N,local:E}=this.qname(w),I={name:w,prefix:N,local:E,value:_};if(this.attribList.push(I),(j=this.attributeHandler)===null||j===void 0||j.call(this,I),N==="xmlns"){const D=_.trim();this.currentXMLVersion==="1.0"&&D===""&&this.fail("invalid attempt to undefine prefix in XML 1.0"),this.topNS[E]=D,z(this,E,D)}else if(w==="xmlns"){const D=_.trim();this.topNS[""]=D,z(this,"",D)}}pushAttribPlain(w,_){var j;const N={name:w,value:_};this.attribList.push(N),(j=this.attributeHandler)===null||j===void 0||j.call(this,N)}end(){var w,_;this.sawRoot||this.fail("document must contain a root element.");const{tags:j}=this;for(;j.length>0;){const E=j.pop();this.fail("unclosed tag: "+E.name)}this.state!==0&&this.state!==13&&this.fail("unexpected end.");const{text:N}=this;return N.length!==0&&((w=this.textHandler)===null||w===void 0||w.call(this,N),this.text=""),this._closed=!0,(_=this.endHandler)===null||_===void 0||_.call(this),this._init(),this}resolve(w){var _,j;let N=this.topNS[w];if(N!==void 0)return N;const{tags:E}=this;for(let I=E.length-1;I>=0;I--)if(N=E[I].ns[w],N!==void 0)return N;return N=this.ns[w],N!==void 0?N:(j=(_=this.opt).resolvePrefix)===null||j===void 0?void 0:j.call(_,w)}qname(w){const _=w.indexOf(":");if(_===-1)return{prefix:"",local:w};const j=w.slice(_+1),N=w.slice(0,_);return(N===""||j===""||j.includes(":"))&&this.fail(`malformed name: ${w}.`),{prefix:N,local:j}}processAttribsNS(){var w;const{attribList:_}=this,j=this.tag;{const{prefix:I,local:D}=this.qname(j.name);j.prefix=I,j.local=D;const V=j.uri=(w=this.resolve(I))!==null&&w!==void 0?w:"";I!==""&&(I==="xmlns"&&this.fail('tags may not have "xmlns" as prefix.'),V===""&&(this.fail(`unbound namespace prefix: ${JSON.stringify(I)}.`),j.uri=I))}if(_.length===0)return;const{attributes:N}=j,E=new Set;for(const I of _){const{name:D,prefix:V,local:H}=I;let G,$;V===""?(G=D==="xmlns"?b:"",$=D):(G=this.resolve(V),G===void 0&&(this.fail(`unbound namespace prefix: ${JSON.stringify(V)}.`),G=V),$=`{${G}}${H}`),E.has($)&&this.fail(`duplicate attribute: ${$}.`),E.add($),I.uri=G,N[D]=I}this.attribList=[]}processAttribsPlain(){const{attribList:w}=this,_=this.tag.attributes;for(const{name:j,value:N}of w)_[j]!==void 0&&this.fail(`duplicate attribute: ${j}.`),_[j]=N;this.attribList=[]}openTag(){var w;this.processAttribs();const{tags:_}=this,j=this.tag;j.isSelfClosing=!1,(w=this.openTagHandler)===null||w===void 0||w.call(this,j),_.push(j),this.state=13,this.name=""}openSelfClosingTag(){var w,_,j;this.processAttribs();const{tags:N}=this,E=this.tag;E.isSelfClosing=!0,(w=this.openTagHandler)===null||w===void 0||w.call(this,E),(_=this.closeTagHandler)===null||_===void 0||_.call(this,E),(this.tag=(j=N[N.length-1])!==null&&j!==void 0?j:null)===null&&(this.closedRoot=!0),this.state=13,this.name=""}closeTag(){const{tags:w,name:_}=this;if(this.state=13,this.name="",_==="")return this.fail("weird empty close tag."),void(this.text+="</>");const j=this.closeTagHandler;let N=w.length;for(;N-- >0;){const E=this.tag=w.pop();if(this.topNS=E.ns,j==null||j(E),E.name===_)break;this.fail("unexpected close tag.")}N===0?this.closedRoot=!0:N<0&&(this.fail(`unmatched closing tag: ${_}.`),this.text+=`</${_}>`)}parseEntity(w){if(w[0]!=="#"){const j=this.ENTITIES[w];return j!==void 0?j:(this.fail(this.isName(w)?"undefined entity.":"disallowed character in entity name."),`&${w};`)}let _=NaN;return w[1]==="x"&&/^#x[0-9a-f]+$/i.test(w)?_=parseInt(w.slice(2),16):/^#[0-9]+$/.test(w)&&(_=parseInt(w.slice(1),10)),this.isChar(_)?String.fromCodePoint(_):(this.fail("malformed character entity."),`&${w};`)}}},{"xmlchars/xml/1.0/ed5":543,"xmlchars/xml/1.1/ed2":544,"xmlchars/xmlns/1.0/ed3":545}],497:[function(s,n,c){var o=s("safe-buffer").Buffer;function a(d,l){this._block=o.alloc(d),this._finalSize=l,this._blockSize=d,this._len=0}a.prototype.update=function(d,l){typeof d=="string"&&(l=l||"utf8",d=o.from(d,l));for(var i=this._block,u=this._blockSize,f=d.length,h=this._len,m=0;m<f;){for(var p=h%u,x=Math.min(f-m,u-p),g=0;g<x;g++)i[p+g]=d[m+g];m+=x,(h+=x)%u==0&&this._update(i)}return this._len+=f,this},a.prototype.digest=function(d){var l=this._len%this._blockSize;this._block[l]=128,this._block.fill(0,l+1),l>=this._finalSize&&(this._update(this._block),this._block.fill(0));var i=8*this._len;if(i<=4294967295)this._block.writeUInt32BE(i,this._blockSize-4);else{var u=(4294967295&i)>>>0,f=(i-u)/4294967296;this._block.writeUInt32BE(f,this._blockSize-8),this._block.writeUInt32BE(u,this._blockSize-4)}this._update(this._block);var h=this._hash();return d?h.toString(d):h},a.prototype._update=function(){throw new Error("_update must be implemented by subclass")},n.exports=a},{"safe-buffer":494}],498:[function(s,n,c){var o=n.exports=function(a){a=a.toLowerCase();var d=o[a];if(!d)throw new Error(a+" is not supported (we accept pull requests)");return new d};o.sha=s("./sha"),o.sha1=s("./sha1"),o.sha224=s("./sha224"),o.sha256=s("./sha256"),o.sha384=s("./sha384"),o.sha512=s("./sha512")},{"./sha":499,"./sha1":500,"./sha224":501,"./sha256":502,"./sha384":503,"./sha512":504}],499:[function(s,n,c){var o=s("inherits"),a=s("./hash"),d=s("safe-buffer").Buffer,l=[1518500249,1859775393,-1894007588,-899497514],i=new Array(80);function u(){this.init(),this._w=i,a.call(this,64,56)}function f(m){return m<<30|m>>>2}function h(m,p,x,g){return m===0?p&x|~p&g:m===2?p&x|p&g|x&g:p^x^g}o(u,a),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(m){for(var p,x=this._w,g=0|this._a,v=0|this._b,y=0|this._c,b=0|this._d,C=0|this._e,T=0;T<16;++T)x[T]=m.readInt32BE(4*T);for(;T<80;++T)x[T]=x[T-3]^x[T-8]^x[T-14]^x[T-16];for(var M=0;M<80;++M){var U=~~(M/20),L=0|((p=g)<<5|p>>>27)+h(U,v,y,b)+C+x[M]+l[U];C=b,b=y,y=f(v),v=g,g=L}this._a=g+this._a|0,this._b=v+this._b|0,this._c=y+this._c|0,this._d=b+this._d|0,this._e=C+this._e|0},u.prototype._hash=function(){var m=d.allocUnsafe(20);return m.writeInt32BE(0|this._a,0),m.writeInt32BE(0|this._b,4),m.writeInt32BE(0|this._c,8),m.writeInt32BE(0|this._d,12),m.writeInt32BE(0|this._e,16),m},n.exports=u},{"./hash":497,inherits:440,"safe-buffer":494}],500:[function(s,n,c){var o=s("inherits"),a=s("./hash"),d=s("safe-buffer").Buffer,l=[1518500249,1859775393,-1894007588,-899497514],i=new Array(80);function u(){this.init(),this._w=i,a.call(this,64,56)}function f(p){return p<<5|p>>>27}function h(p){return p<<30|p>>>2}function m(p,x,g,v){return p===0?x&g|~x&v:p===2?x&g|x&v|g&v:x^g^v}o(u,a),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(p){for(var x,g=this._w,v=0|this._a,y=0|this._b,b=0|this._c,C=0|this._d,T=0|this._e,M=0;M<16;++M)g[M]=p.readInt32BE(4*M);for(;M<80;++M)g[M]=(x=g[M-3]^g[M-8]^g[M-14]^g[M-16])<<1|x>>>31;for(var U=0;U<80;++U){var L=~~(U/20),P=f(v)+m(L,y,b,C)+T+g[U]+l[L]|0;T=C,C=b,b=h(y),y=v,v=P}this._a=v+this._a|0,this._b=y+this._b|0,this._c=b+this._c|0,this._d=C+this._d|0,this._e=T+this._e|0},u.prototype._hash=function(){var p=d.allocUnsafe(20);return p.writeInt32BE(0|this._a,0),p.writeInt32BE(0|this._b,4),p.writeInt32BE(0|this._c,8),p.writeInt32BE(0|this._d,12),p.writeInt32BE(0|this._e,16),p},n.exports=u},{"./hash":497,inherits:440,"safe-buffer":494}],501:[function(s,n,c){var o=s("inherits"),a=s("./sha256"),d=s("./hash"),l=s("safe-buffer").Buffer,i=new Array(64);function u(){this.init(),this._w=i,d.call(this,64,56)}o(u,a),u.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},u.prototype._hash=function(){var f=l.allocUnsafe(28);return f.writeInt32BE(this._a,0),f.writeInt32BE(this._b,4),f.writeInt32BE(this._c,8),f.writeInt32BE(this._d,12),f.writeInt32BE(this._e,16),f.writeInt32BE(this._f,20),f.writeInt32BE(this._g,24),f},n.exports=u},{"./hash":497,"./sha256":502,inherits:440,"safe-buffer":494}],502:[function(s,n,c){var o=s("inherits"),a=s("./hash"),d=s("safe-buffer").Buffer,l=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],i=new Array(64);function u(){this.init(),this._w=i,a.call(this,64,56)}function f(g,v,y){return y^g&(v^y)}function h(g,v,y){return g&v|y&(g|v)}function m(g){return(g>>>2|g<<30)^(g>>>13|g<<19)^(g>>>22|g<<10)}function p(g){return(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7)}function x(g){return(g>>>7|g<<25)^(g>>>18|g<<14)^g>>>3}o(u,a),u.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},u.prototype._update=function(g){for(var v,y=this._w,b=0|this._a,C=0|this._b,T=0|this._c,M=0|this._d,U=0|this._e,L=0|this._f,P=0|this._g,B=0|this._h,q=0;q<16;++q)y[q]=g.readInt32BE(4*q);for(;q<64;++q)y[q]=0|(((v=y[q-2])>>>17|v<<15)^(v>>>19|v<<13)^v>>>10)+y[q-7]+x(y[q-15])+y[q-16];for(var z=0;z<64;++z){var k=B+p(U)+f(U,L,P)+l[z]+y[z]|0,R=m(b)+h(b,C,T)|0;B=P,P=L,L=U,U=M+k|0,M=T,T=C,C=b,b=k+R|0}this._a=b+this._a|0,this._b=C+this._b|0,this._c=T+this._c|0,this._d=M+this._d|0,this._e=U+this._e|0,this._f=L+this._f|0,this._g=P+this._g|0,this._h=B+this._h|0},u.prototype._hash=function(){var g=d.allocUnsafe(32);return g.writeInt32BE(this._a,0),g.writeInt32BE(this._b,4),g.writeInt32BE(this._c,8),g.writeInt32BE(this._d,12),g.writeInt32BE(this._e,16),g.writeInt32BE(this._f,20),g.writeInt32BE(this._g,24),g.writeInt32BE(this._h,28),g},n.exports=u},{"./hash":497,inherits:440,"safe-buffer":494}],503:[function(s,n,c){var o=s("inherits"),a=s("./sha512"),d=s("./hash"),l=s("safe-buffer").Buffer,i=new Array(160);function u(){this.init(),this._w=i,d.call(this,128,112)}o(u,a),u.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},u.prototype._hash=function(){var f=l.allocUnsafe(48);function h(m,p,x){f.writeInt32BE(m,x),f.writeInt32BE(p,x+4)}return h(this._ah,this._al,0),h(this._bh,this._bl,8),h(this._ch,this._cl,16),h(this._dh,this._dl,24),h(this._eh,this._el,32),h(this._fh,this._fl,40),f},n.exports=u},{"./hash":497,"./sha512":504,inherits:440,"safe-buffer":494}],504:[function(s,n,c){var o=s("inherits"),a=s("./hash"),d=s("safe-buffer").Buffer,l=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],i=new Array(160);function u(){this.init(),this._w=i,a.call(this,128,112)}function f(C,T,M){return M^C&(T^M)}function h(C,T,M){return C&T|M&(C|T)}function m(C,T){return(C>>>28|T<<4)^(T>>>2|C<<30)^(T>>>7|C<<25)}function p(C,T){return(C>>>14|T<<18)^(C>>>18|T<<14)^(T>>>9|C<<23)}function x(C,T){return(C>>>1|T<<31)^(C>>>8|T<<24)^C>>>7}function g(C,T){return(C>>>1|T<<31)^(C>>>8|T<<24)^(C>>>7|T<<25)}function v(C,T){return(C>>>19|T<<13)^(T>>>29|C<<3)^C>>>6}function y(C,T){return(C>>>19|T<<13)^(T>>>29|C<<3)^(C>>>6|T<<26)}function b(C,T){return C>>>0<T>>>0?1:0}o(u,a),u.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},u.prototype._update=function(C){for(var T=this._w,M=0|this._ah,U=0|this._bh,L=0|this._ch,P=0|this._dh,B=0|this._eh,q=0|this._fh,z=0|this._gh,k=0|this._hh,R=0|this._al,S=0|this._bl,w=0|this._cl,_=0|this._dl,j=0|this._el,N=0|this._fl,E=0|this._gl,I=0|this._hl,D=0;D<32;D+=2)T[D]=C.readInt32BE(4*D),T[D+1]=C.readInt32BE(4*D+4);for(;D<160;D+=2){var V=T[D-30],H=T[D-30+1],G=x(V,H),$=g(H,V),Y=v(V=T[D-4],H=T[D-4+1]),F=y(H,V),O=T[D-14],W=T[D-14+1],K=T[D-32],Q=T[D-32+1],X=$+W|0,te=G+O+b(X,$)|0;te=(te=te+Y+b(X=X+F|0,F)|0)+K+b(X=X+Q|0,Q)|0,T[D]=te,T[D+1]=X}for(var de=0;de<160;de+=2){te=T[de],X=T[de+1];var xe=h(M,U,L),ne=h(R,S,w),ge=m(M,R),be=m(R,M),Ie=p(B,j),Ce=p(j,B),Oe=l[de],Ee=l[de+1],pe=f(B,q,z),Ae=f(j,N,E),st=I+Ce|0,qe=k+Ie+b(st,I)|0;qe=(qe=(qe=qe+pe+b(st=st+Ae|0,Ae)|0)+Oe+b(st=st+Ee|0,Ee)|0)+te+b(st=st+X|0,X)|0;var ie=be+ne|0,ae=ge+xe+b(ie,be)|0;k=z,I=E,z=q,E=N,q=B,N=j,B=P+qe+b(j=_+st|0,_)|0,P=L,_=w,L=U,w=S,U=M,S=R,M=qe+ae+b(R=st+ie|0,st)|0}this._al=this._al+R|0,this._bl=this._bl+S|0,this._cl=this._cl+w|0,this._dl=this._dl+_|0,this._el=this._el+j|0,this._fl=this._fl+N|0,this._gl=this._gl+E|0,this._hl=this._hl+I|0,this._ah=this._ah+M+b(this._al,R)|0,this._bh=this._bh+U+b(this._bl,S)|0,this._ch=this._ch+L+b(this._cl,w)|0,this._dh=this._dh+P+b(this._dl,_)|0,this._eh=this._eh+B+b(this._el,j)|0,this._fh=this._fh+q+b(this._fl,N)|0,this._gh=this._gh+z+b(this._gl,E)|0,this._hh=this._hh+k+b(this._hl,I)|0},u.prototype._hash=function(){var C=d.allocUnsafe(64);function T(M,U,L){C.writeInt32BE(M,L),C.writeInt32BE(U,L+4)}return T(this._ah,this._al,0),T(this._bh,this._bl,8),T(this._ch,this._cl,16),T(this._dh,this._dl,24),T(this._eh,this._el,32),T(this._fh,this._fl,40),T(this._gh,this._gl,48),T(this._hh,this._hl,56),C},n.exports=u},{"./hash":497,inherits:440,"safe-buffer":494}],505:[function(s,n,c){n.exports=a;var o=s("events").EventEmitter;function a(){o.call(this)}s("inherits")(a,o),a.Readable=s("readable-stream/readable.js"),a.Writable=s("readable-stream/writable.js"),a.Duplex=s("readable-stream/duplex.js"),a.Transform=s("readable-stream/transform.js"),a.PassThrough=s("readable-stream/passthrough.js"),a.Stream=a,a.prototype.pipe=function(d,l){var i=this;function u(v){d.writable&&d.write(v)===!1&&i.pause&&i.pause()}function f(){i.readable&&i.resume&&i.resume()}i.on("data",u),d.on("drain",f),d._isStdio||l&&l.end===!1||(i.on("end",m),i.on("close",p));var h=!1;function m(){h||(h=!0,d.end())}function p(){h||(h=!0,typeof d.destroy=="function"&&d.destroy())}function x(v){if(g(),o.listenerCount(this,"error")===0)throw v}function g(){i.removeListener("data",u),d.removeListener("drain",f),i.removeListener("end",m),i.removeListener("close",p),i.removeListener("error",x),d.removeListener("error",x),i.removeListener("end",g),i.removeListener("close",g),d.removeListener("close",g)}return i.on("error",x),d.on("error",x),i.on("end",g),i.on("close",g),d.on("close",g),d.emit("pipe",i),d}},{events:422,inherits:440,"readable-stream/duplex.js":507,"readable-stream/passthrough.js":516,"readable-stream/readable.js":517,"readable-stream/transform.js":518,"readable-stream/writable.js":519}],506:[function(s,n,c){var o={}.toString;n.exports=Array.isArray||function(a){return o.call(a)=="[object Array]"}},{}],507:[function(s,n,c){n.exports=s("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":508}],508:[function(s,n,c){var o=s("process-nextick-args"),a=Object.keys||function(g){var v=[];for(var y in g)v.push(y);return v};n.exports=m;var d=Object.create(s("core-util-is"));d.inherits=s("inherits");var l=s("./_stream_readable"),i=s("./_stream_writable");d.inherits(m,l);for(var u=a(i.prototype),f=0;f<u.length;f++){var h=u[f];m.prototype[h]||(m.prototype[h]=i.prototype[h])}function m(g){if(!(this instanceof m))return new m(g);l.call(this,g),i.call(this,g),g&&g.readable===!1&&(this.readable=!1),g&&g.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,g&&g.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",p)}function p(){this.allowHalfOpen||this._writableState.ended||o.nextTick(x,this)}function x(g){g.end()}Object.defineProperty(m.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(m.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(g){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=g,this._writableState.destroyed=g)}}),m.prototype._destroy=function(g,v){this.push(null),this.end(),o.nextTick(v,g)}},{"./_stream_readable":510,"./_stream_writable":512,"core-util-is":383,inherits:440,"process-nextick-args":466}],509:[function(s,n,c){n.exports=d;var o=s("./_stream_transform"),a=Object.create(s("core-util-is"));function d(l){if(!(this instanceof d))return new d(l);o.call(this,l)}a.inherits=s("inherits"),a.inherits(d,o),d.prototype._transform=function(l,i,u){u(null,l)}},{"./_stream_transform":511,"core-util-is":383,inherits:440}],510:[function(s,n,c){(function(o,a){(function(){var d=s("process-nextick-args");n.exports=M;var l,i=s("isarray");M.ReadableState=T,s("events").EventEmitter;var u=function(I,D){return I.listeners(D).length},f=s("./internal/streams/stream"),h=s("safe-buffer").Buffer,m=(a!==void 0?a:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},p=Object.create(s("core-util-is"));p.inherits=s("inherits");var x=s("util"),g=void 0;g=x&&x.debuglog?x.debuglog("stream"):function(){};var v,y=s("./internal/streams/BufferList"),b=s("./internal/streams/destroy");p.inherits(M,f);var C=["error","close","destroy","pause","resume"];function T(I,D){I=I||{};var V=D instanceof(l=l||s("./_stream_duplex"));this.objectMode=!!I.objectMode,V&&(this.objectMode=this.objectMode||!!I.readableObjectMode);var H=I.highWaterMark,G=I.readableHighWaterMark,$=this.objectMode?16:16384;this.highWaterMark=H||H===0?H:V&&(G||G===0)?G:$,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=I.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,I.encoding&&(v||(v=s("string_decoder/").StringDecoder),this.decoder=new v(I.encoding),this.encoding=I.encoding)}function M(I){if(l=l||s("./_stream_duplex"),!(this instanceof M))return new M(I);this._readableState=new T(I,this),this.readable=!0,I&&(typeof I.read=="function"&&(this._read=I.read),typeof I.destroy=="function"&&(this._destroy=I.destroy)),f.call(this)}function U(I,D,V,H,G){var $,Y=I._readableState;return D===null?(Y.reading=!1,function(F,O){if(!O.ended){if(O.decoder){var W=O.decoder.end();W&&W.length&&(O.buffer.push(W),O.length+=O.objectMode?1:W.length)}O.ended=!0,B(F)}}(I,Y)):(G||($=function(F,O){var W;K=O,h.isBuffer(K)||K instanceof m||typeof O=="string"||O===void 0||F.objectMode||(W=new TypeError("Invalid non-string/buffer chunk"));var K;return W}(Y,D)),$?I.emit("error",$):Y.objectMode||D&&D.length>0?(typeof D=="string"||Y.objectMode||Object.getPrototypeOf(D)===h.prototype||(D=function(F){return h.from(F)}(D)),H?Y.endEmitted?I.emit("error",new Error("stream.unshift() after end event")):L(I,Y,D,!0):Y.ended?I.emit("error",new Error("stream.push() after EOF")):(Y.reading=!1,Y.decoder&&!V?(D=Y.decoder.write(D),Y.objectMode||D.length!==0?L(I,Y,D,!1):z(I,Y)):L(I,Y,D,!1))):H||(Y.reading=!1)),function(F){return!F.ended&&(F.needReadable||F.length<F.highWaterMark||F.length===0)}(Y)}function L(I,D,V,H){D.flowing&&D.length===0&&!D.sync?(I.emit("data",V),I.read(0)):(D.length+=D.objectMode?1:V.length,H?D.buffer.unshift(V):D.buffer.push(V),D.needReadable&&B(I)),z(I,D)}Object.defineProperty(M.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(I){this._readableState&&(this._readableState.destroyed=I)}}),M.prototype.destroy=b.destroy,M.prototype._undestroy=b.undestroy,M.prototype._destroy=function(I,D){this.push(null),D(I)},M.prototype.push=function(I,D){var V,H=this._readableState;return H.objectMode?V=!0:typeof I=="string"&&((D=D||H.defaultEncoding)!==H.encoding&&(I=h.from(I,D),D=""),V=!0),U(this,I,D,!1,V)},M.prototype.unshift=function(I){return U(this,I,null,!0,!1)},M.prototype.isPaused=function(){return this._readableState.flowing===!1},M.prototype.setEncoding=function(I){return v||(v=s("string_decoder/").StringDecoder),this._readableState.decoder=new v(I),this._readableState.encoding=I,this};function P(I,D){return I<=0||D.length===0&&D.ended?0:D.objectMode?1:I!=I?D.flowing&&D.length?D.buffer.head.data.length:D.length:(I>D.highWaterMark&&(D.highWaterMark=function(V){return V>=8388608?V=8388608:(V--,V|=V>>>1,V|=V>>>2,V|=V>>>4,V|=V>>>8,V|=V>>>16,V++),V}(I)),I<=D.length?I:D.ended?D.length:(D.needReadable=!0,0))}function B(I){var D=I._readableState;D.needReadable=!1,D.emittedReadable||(g("emitReadable",D.flowing),D.emittedReadable=!0,D.sync?d.nextTick(q,I):q(I))}function q(I){g("emit readable"),I.emit("readable"),w(I)}function z(I,D){D.readingMore||(D.readingMore=!0,d.nextTick(k,I,D))}function k(I,D){for(var V=D.length;!D.reading&&!D.flowing&&!D.ended&&D.length<D.highWaterMark&&(g("maybeReadMore read 0"),I.read(0),V!==D.length);)V=D.length;D.readingMore=!1}function R(I){g("readable nexttick read 0"),I.read(0)}function S(I,D){D.reading||(g("resume read 0"),I.read(0)),D.resumeScheduled=!1,D.awaitDrain=0,I.emit("resume"),w(I),D.flowing&&!D.reading&&I.read(0)}function w(I){var D=I._readableState;for(g("flow",D.flowing);D.flowing&&I.read()!==null;);}function _(I,D){return D.length===0?null:(D.objectMode?V=D.buffer.shift():!I||I>=D.length?(V=D.decoder?D.buffer.join(""):D.buffer.length===1?D.buffer.head.data:D.buffer.concat(D.length),D.buffer.clear()):V=function(H,G,$){var Y;return H<G.head.data.length?(Y=G.head.data.slice(0,H),G.head.data=G.head.data.slice(H)):Y=H===G.head.data.length?G.shift():$?function(F,O){var W=O.head,K=1,Q=W.data;for(F-=Q.length;W=W.next;){var X=W.data,te=F>X.length?X.length:F;if(te===X.length?Q+=X:Q+=X.slice(0,F),(F-=te)===0){te===X.length?(++K,W.next?O.head=W.next:O.head=O.tail=null):(O.head=W,W.data=X.slice(te));break}++K}return O.length-=K,Q}(H,G):function(F,O){var W=h.allocUnsafe(F),K=O.head,Q=1;for(K.data.copy(W),F-=K.data.length;K=K.next;){var X=K.data,te=F>X.length?X.length:F;if(X.copy(W,W.length-F,0,te),(F-=te)===0){te===X.length?(++Q,K.next?O.head=K.next:O.head=O.tail=null):(O.head=K,K.data=X.slice(te));break}++Q}return O.length-=Q,W}(H,G),Y}(I,D.buffer,D.decoder),V);var V}function j(I){var D=I._readableState;if(D.length>0)throw new Error('"endReadable()" called on non-empty stream');D.endEmitted||(D.ended=!0,d.nextTick(N,D,I))}function N(I,D){I.endEmitted||I.length!==0||(I.endEmitted=!0,D.readable=!1,D.emit("end"))}function E(I,D){for(var V=0,H=I.length;V<H;V++)if(I[V]===D)return V;return-1}M.prototype.read=function(I){g("read",I),I=parseInt(I,10);var D=this._readableState,V=I;if(I!==0&&(D.emittedReadable=!1),I===0&&D.needReadable&&(D.length>=D.highWaterMark||D.ended))return g("read: emitReadable",D.length,D.ended),D.length===0&&D.ended?j(this):B(this),null;if((I=P(I,D))===0&&D.ended)return D.length===0&&j(this),null;var H,G=D.needReadable;return g("need readable",G),(D.length===0||D.length-I<D.highWaterMark)&&g("length less than watermark",G=!0),D.ended||D.reading?g("reading or ended",G=!1):G&&(g("do read"),D.reading=!0,D.sync=!0,D.length===0&&(D.needReadable=!0),this._read(D.highWaterMark),D.sync=!1,D.reading||(I=P(V,D))),(H=I>0?_(I,D):null)===null?(D.needReadable=!0,I=0):D.length-=I,D.length===0&&(D.ended||(D.needReadable=!0),V!==I&&D.ended&&j(this)),H!==null&&this.emit("data",H),H},M.prototype._read=function(I){this.emit("error",new Error("_read() is not implemented"))},M.prototype.pipe=function(I,D){var V=this,H=this._readableState;switch(H.pipesCount){case 0:H.pipes=I;break;case 1:H.pipes=[H.pipes,I];break;default:H.pipes.push(I)}H.pipesCount+=1,g("pipe count=%d opts=%j",H.pipesCount,D);var G=(!D||D.end!==!1)&&I!==o.stdout&&I!==o.stderr?Y:de;function $(xe,ne){g("onunpipe"),xe===V&&ne&&ne.hasUnpiped===!1&&(ne.hasUnpiped=!0,g("cleanup"),I.removeListener("close",X),I.removeListener("finish",te),I.removeListener("drain",F),I.removeListener("error",Q),I.removeListener("unpipe",$),V.removeListener("end",Y),V.removeListener("end",de),V.removeListener("data",K),O=!0,!H.awaitDrain||I._writableState&&!I._writableState.needDrain||F())}function Y(){g("onend"),I.end()}H.endEmitted?d.nextTick(G):V.once("end",G),I.on("unpipe",$);var F=function(xe){return function(){var ne=xe._readableState;g("pipeOnDrain",ne.awaitDrain),ne.awaitDrain&&ne.awaitDrain--,ne.awaitDrain===0&&u(xe,"data")&&(ne.flowing=!0,w(xe))}}(V);I.on("drain",F);var O=!1,W=!1;function K(xe){g("ondata"),W=!1,I.write(xe)!==!1||W||((H.pipesCount===1&&H.pipes===I||H.pipesCount>1&&E(H.pipes,I)!==-1)&&!O&&(g("false write response, pause",H.awaitDrain),H.awaitDrain++,W=!0),V.pause())}function Q(xe){g("onerror",xe),de(),I.removeListener("error",Q),u(I,"error")===0&&I.emit("error",xe)}function X(){I.removeListener("finish",te),de()}function te(){g("onfinish"),I.removeListener("close",X),de()}function de(){g("unpipe"),V.unpipe(I)}return V.on("data",K),function(xe,ne,ge){if(typeof xe.prependListener=="function")return xe.prependListener(ne,ge);xe._events&&xe._events[ne]?i(xe._events[ne])?xe._events[ne].unshift(ge):xe._events[ne]=[ge,xe._events[ne]]:xe.on(ne,ge)}(I,"error",Q),I.once("close",X),I.once("finish",te),I.emit("pipe",V),H.flowing||(g("pipe resume"),V.resume()),I},M.prototype.unpipe=function(I){var D=this._readableState,V={hasUnpiped:!1};if(D.pipesCount===0)return this;if(D.pipesCount===1)return I&&I!==D.pipes||(I||(I=D.pipes),D.pipes=null,D.pipesCount=0,D.flowing=!1,I&&I.emit("unpipe",this,V)),this;if(!I){var H=D.pipes,G=D.pipesCount;D.pipes=null,D.pipesCount=0,D.flowing=!1;for(var $=0;$<G;$++)H[$].emit("unpipe",this,{hasUnpiped:!1});return this}var Y=E(D.pipes,I);return Y===-1||(D.pipes.splice(Y,1),D.pipesCount-=1,D.pipesCount===1&&(D.pipes=D.pipes[0]),I.emit("unpipe",this,V)),this},M.prototype.on=function(I,D){var V=f.prototype.on.call(this,I,D);if(I==="data")this._readableState.flowing!==!1&&this.resume();else if(I==="readable"){var H=this._readableState;H.endEmitted||H.readableListening||(H.readableListening=H.needReadable=!0,H.emittedReadable=!1,H.reading?H.length&&B(this):d.nextTick(R,this))}return V},M.prototype.addListener=M.prototype.on,M.prototype.resume=function(){var I=this._readableState;return I.flowing||(g("resume"),I.flowing=!0,function(D,V){V.resumeScheduled||(V.resumeScheduled=!0,d.nextTick(S,D,V))}(this,I)),this},M.prototype.pause=function(){return g("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(g("pause"),this._readableState.flowing=!1,this.emit("pause")),this},M.prototype.wrap=function(I){var D=this,V=this._readableState,H=!1;for(var G in I.on("end",function(){if(g("wrapped end"),V.decoder&&!V.ended){var Y=V.decoder.end();Y&&Y.length&&D.push(Y)}D.push(null)}),I.on("data",function(Y){g("wrapped data"),V.decoder&&(Y=V.decoder.write(Y)),V.objectMode&&Y==null||(V.objectMode||Y&&Y.length)&&(D.push(Y)||(H=!0,I.pause()))}),I)this[G]===void 0&&typeof I[G]=="function"&&(this[G]=function(Y){return function(){return I[Y].apply(I,arguments)}}(G));for(var $=0;$<C.length;$++)I.on(C[$],this.emit.bind(this,C[$]));return this._read=function(Y){g("wrapped _read",Y),H&&(H=!1,I.resume())},this},Object.defineProperty(M.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),M._fromList=_}).call(this)}).call(this,s("_process"),typeof _s<"u"?_s:typeof self<"u"?self:typeof window<"u"?window:{})},{"./_stream_duplex":508,"./internal/streams/BufferList":513,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":383,events:422,inherits:440,isarray:506,"process-nextick-args":466,"safe-buffer":520,"string_decoder/":521,util:188}],511:[function(s,n,c){n.exports=l;var o=s("./_stream_duplex"),a=Object.create(s("core-util-is"));function d(f,h){var m=this._transformState;m.transforming=!1;var p=m.writecb;if(!p)return this.emit("error",new Error("write callback called multiple times"));m.writechunk=null,m.writecb=null,h!=null&&this.push(h),p(f);var x=this._readableState;x.reading=!1,(x.needReadable||x.length<x.highWaterMark)&&this._read(x.highWaterMark)}function l(f){if(!(this instanceof l))return new l(f);o.call(this,f),this._transformState={afterTransform:d.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,f&&(typeof f.transform=="function"&&(this._transform=f.transform),typeof f.flush=="function"&&(this._flush=f.flush)),this.on("prefinish",i)}function i(){var f=this;typeof this._flush=="function"?this._flush(function(h,m){u(f,h,m)}):u(this,null,null)}function u(f,h,m){if(h)return f.emit("error",h);if(m!=null&&f.push(m),f._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(f._transformState.transforming)throw new Error("Calling transform done when still transforming");return f.push(null)}a.inherits=s("inherits"),a.inherits(l,o),l.prototype.push=function(f,h){return this._transformState.needTransform=!1,o.prototype.push.call(this,f,h)},l.prototype._transform=function(f,h,m){throw new Error("_transform() is not implemented")},l.prototype._write=function(f,h,m){var p=this._transformState;if(p.writecb=m,p.writechunk=f,p.writeencoding=h,!p.transforming){var x=this._readableState;(p.needTransform||x.needReadable||x.length<x.highWaterMark)&&this._read(x.highWaterMark)}},l.prototype._read=function(f){var h=this._transformState;h.writechunk!==null&&h.writecb&&!h.transforming?(h.transforming=!0,this._transform(h.writechunk,h.writeencoding,h.afterTransform)):h.needTransform=!0},l.prototype._destroy=function(f,h){var m=this;o.prototype._destroy.call(this,f,function(p){h(p),m.emit("close")})}},{"./_stream_duplex":508,"core-util-is":383,inherits:440}],512:[function(s,n,c){(function(o,a,d){(function(){var l=s("process-nextick-args");function i(z){var k=this;this.next=null,this.entry=null,this.finish=function(){(function(R,S,w){var _=R.entry;for(R.entry=null;_;){var j=_.callback;S.pendingcb--,j(w),_=_.next}S.corkedRequestsFree.next=R})(k,z)}}n.exports=T;var u,f=!o.browser&&["v0.10","v0.9."].indexOf(o.version.slice(0,5))>-1?d:l.nextTick;T.WritableState=C;var h=Object.create(s("core-util-is"));h.inherits=s("inherits");var m={deprecate:s("util-deprecate")},p=s("./internal/streams/stream"),x=s("safe-buffer").Buffer,g=(a!==void 0?a:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},v,y=s("./internal/streams/destroy");function b(){}function C(z,k){u=u||s("./_stream_duplex"),z=z||{};var R=k instanceof u;this.objectMode=!!z.objectMode,R&&(this.objectMode=this.objectMode||!!z.writableObjectMode);var S=z.highWaterMark,w=z.writableHighWaterMark,_=this.objectMode?16:16384;this.highWaterMark=S||S===0?S:R&&(w||w===0)?w:_,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var j=z.decodeStrings===!1;this.decodeStrings=!j,this.defaultEncoding=z.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(N){(function(E,I){var D=E._writableState,V=D.sync,H=D.writecb;if(function($){$.writing=!1,$.writecb=null,$.length-=$.writelen,$.writelen=0}(D),I)(function($,Y,F,O,W){--Y.pendingcb,F?(l.nextTick(W,O),l.nextTick(q,$,Y),$._writableState.errorEmitted=!0,$.emit("error",O)):(W(O),$._writableState.errorEmitted=!0,$.emit("error",O),q($,Y))})(E,D,V,I,H);else{var G=P(D);G||D.corked||D.bufferProcessing||!D.bufferedRequest||L(E,D),V?f(U,E,D,G,H):U(E,D,G,H)}})(k,N)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function T(z){if(u=u||s("./_stream_duplex"),!(v.call(T,this)||this instanceof u))return new T(z);this._writableState=new C(z,this),this.writable=!0,z&&(typeof z.write=="function"&&(this._write=z.write),typeof z.writev=="function"&&(this._writev=z.writev),typeof z.destroy=="function"&&(this._destroy=z.destroy),typeof z.final=="function"&&(this._final=z.final)),p.call(this)}function M(z,k,R,S,w,_,j){k.writelen=S,k.writecb=j,k.writing=!0,k.sync=!0,R?z._writev(w,k.onwrite):z._write(w,_,k.onwrite),k.sync=!1}function U(z,k,R,S){R||function(w,_){_.length===0&&_.needDrain&&(_.needDrain=!1,w.emit("drain"))}(z,k),k.pendingcb--,S(),q(z,k)}function L(z,k){k.bufferProcessing=!0;var R=k.bufferedRequest;if(z._writev&&R&&R.next){var S=k.bufferedRequestCount,w=new Array(S),_=k.corkedRequestsFree;_.entry=R;for(var j=0,N=!0;R;)w[j]=R,R.isBuf||(N=!1),R=R.next,j+=1;w.allBuffers=N,M(z,k,!0,k.length,w,"",_.finish),k.pendingcb++,k.lastBufferedRequest=null,_.next?(k.corkedRequestsFree=_.next,_.next=null):k.corkedRequestsFree=new i(k),k.bufferedRequestCount=0}else{for(;R;){var E=R.chunk,I=R.encoding,D=R.callback;if(M(z,k,!1,k.objectMode?1:E.length,E,I,D),R=R.next,k.bufferedRequestCount--,k.writing)break}R===null&&(k.lastBufferedRequest=null)}k.bufferedRequest=R,k.bufferProcessing=!1}function P(z){return z.ending&&z.length===0&&z.bufferedRequest===null&&!z.finished&&!z.writing}function B(z,k){z._final(function(R){k.pendingcb--,R&&z.emit("error",R),k.prefinished=!0,z.emit("prefinish"),q(z,k)})}function q(z,k){var R=P(k);return R&&(function(S,w){w.prefinished||w.finalCalled||(typeof S._final=="function"?(w.pendingcb++,w.finalCalled=!0,l.nextTick(B,S,w)):(w.prefinished=!0,S.emit("prefinish")))}(z,k),k.pendingcb===0&&(k.finished=!0,z.emit("finish"))),R}h.inherits(T,p),C.prototype.getBuffer=function(){for(var z=this.bufferedRequest,k=[];z;)k.push(z),z=z.next;return k},function(){try{Object.defineProperty(C.prototype,"buffer",{get:m.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(v=Function.prototype[Symbol.hasInstance],Object.defineProperty(T,Symbol.hasInstance,{value:function(z){return!!v.call(this,z)||this===T&&z&&z._writableState instanceof C}})):v=function(z){return z instanceof this},T.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},T.prototype.write=function(z,k,R){var S,w=this._writableState,_=!1,j=!w.objectMode&&(S=z,x.isBuffer(S)||S instanceof g);return j&&!x.isBuffer(z)&&(z=function(N){return x.from(N)}(z)),typeof k=="function"&&(R=k,k=null),j?k="buffer":k||(k=w.defaultEncoding),typeof R!="function"&&(R=b),w.ended?function(N,E){var I=new Error("write after end");N.emit("error",I),l.nextTick(E,I)}(this,R):(j||function(N,E,I,D){var V=!0,H=!1;return I===null?H=new TypeError("May not write null values to stream"):typeof I=="string"||I===void 0||E.objectMode||(H=new TypeError("Invalid non-string/buffer chunk")),H&&(N.emit("error",H),l.nextTick(D,H),V=!1),V}(this,w,z,R))&&(w.pendingcb++,_=function(N,E,I,D,V,H){if(!I){var G=function(O,W,K){return O.objectMode||O.decodeStrings===!1||typeof W!="string"||(W=x.from(W,K)),W}(E,D,V);D!==G&&(I=!0,V="buffer",D=G)}var $=E.objectMode?1:D.length;E.length+=$;var Y=E.length<E.highWaterMark;if(Y||(E.needDrain=!0),E.writing||E.corked){var F=E.lastBufferedRequest;E.lastBufferedRequest={chunk:D,encoding:V,isBuf:I,callback:H,next:null},F?F.next=E.lastBufferedRequest:E.bufferedRequest=E.lastBufferedRequest,E.bufferedRequestCount+=1}else M(N,E,!1,$,D,V,H);return Y}(this,w,j,z,k,R)),_},T.prototype.cork=function(){this._writableState.corked++},T.prototype.uncork=function(){var z=this._writableState;z.corked&&(z.corked--,z.writing||z.corked||z.bufferProcessing||!z.bufferedRequest||L(this,z))},T.prototype.setDefaultEncoding=function(z){if(typeof z=="string"&&(z=z.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((z+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+z);return this._writableState.defaultEncoding=z,this},Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),T.prototype._write=function(z,k,R){R(new Error("_write() is not implemented"))},T.prototype._writev=null,T.prototype.end=function(z,k,R){var S=this._writableState;typeof z=="function"?(R=z,z=null,k=null):typeof k=="function"&&(R=k,k=null),z!=null&&this.write(z,k),S.corked&&(S.corked=1,this.uncork()),S.ending||function(w,_,j){_.ending=!0,q(w,_),j&&(_.finished?l.nextTick(j):w.once("finish",j)),_.ended=!0,w.writable=!1}(this,S,R)},Object.defineProperty(T.prototype,"destroyed",{get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(z){this._writableState&&(this._writableState.destroyed=z)}}),T.prototype.destroy=y.destroy,T.prototype._undestroy=y.undestroy,T.prototype._destroy=function(z,k){this.end(),k(z)}}).call(this)}).call(this,s("_process"),typeof _s<"u"?_s:typeof self<"u"?self:typeof window<"u"?window:{},s("timers").setImmediate)},{"./_stream_duplex":508,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":383,inherits:440,"process-nextick-args":466,"safe-buffer":520,timers:523,"util-deprecate":524}],513:[function(s,n,c){var o=s("safe-buffer").Buffer,a=s("util");n.exports=function(){function d(){(function(l,i){if(!(l instanceof i))throw new TypeError("Cannot call a class as a function")})(this,d),this.head=null,this.tail=null,this.length=0}return d.prototype.push=function(l){var i={data:l,next:null};this.length>0?this.tail.next=i:this.head=i,this.tail=i,++this.length},d.prototype.unshift=function(l){var i={data:l,next:this.head};this.length===0&&(this.tail=i),this.head=i,++this.length},d.prototype.shift=function(){if(this.length!==0){var l=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,l}},d.prototype.clear=function(){this.head=this.tail=null,this.length=0},d.prototype.join=function(l){if(this.length===0)return"";for(var i=this.head,u=""+i.data;i=i.next;)u+=l+i.data;return u},d.prototype.concat=function(l){if(this.length===0)return o.alloc(0);for(var i,u,f,h=o.allocUnsafe(l>>>0),m=this.head,p=0;m;)i=m.data,u=h,f=p,i.copy(u,f),p+=m.data.length,m=m.next;return h},d}(),a&&a.inspect&&a.inspect.custom&&(n.exports.prototype[a.inspect.custom]=function(){var d=a.inspect({length:this.length});return this.constructor.name+" "+d})},{"safe-buffer":520,util:188}],514:[function(s,n,c){var o=s("process-nextick-args");function a(d,l){d.emit("error",l)}n.exports={destroy:function(d,l){var i=this,u=this._readableState&&this._readableState.destroyed,f=this._writableState&&this._writableState.destroyed;return u||f?(l?l(d):d&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,o.nextTick(a,this,d)):o.nextTick(a,this,d)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(d||null,function(h){!l&&h?i._writableState?i._writableState.errorEmitted||(i._writableState.errorEmitted=!0,o.nextTick(a,i,h)):o.nextTick(a,i,h):l&&l(h)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":466}],515:[function(s,n,c){arguments[4][490][0].apply(c,arguments)},{dup:490,events:422}],516:[function(s,n,c){n.exports=s("./readable").PassThrough},{"./readable":517}],517:[function(s,n,c){(c=n.exports=s("./lib/_stream_readable.js")).Stream=c,c.Readable=c,c.Writable=s("./lib/_stream_writable.js"),c.Duplex=s("./lib/_stream_duplex.js"),c.Transform=s("./lib/_stream_transform.js"),c.PassThrough=s("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":508,"./lib/_stream_passthrough.js":509,"./lib/_stream_readable.js":510,"./lib/_stream_transform.js":511,"./lib/_stream_writable.js":512}],518:[function(s,n,c){n.exports=s("./readable").Transform},{"./readable":517}],519:[function(s,n,c){n.exports=s("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":512}],520:[function(s,n,c){arguments[4][217][0].apply(c,arguments)},{buffer:220,dup:217}],521:[function(s,n,c){arguments[4][218][0].apply(c,arguments)},{dup:218,"safe-buffer":520}],522:[function(s,n,c){arguments[4][218][0].apply(c,arguments)},{dup:218,"safe-buffer":494}],523:[function(s,n,c){(function(o,a){(function(){var d=s("process/browser.js").nextTick,l=Function.prototype.apply,i=Array.prototype.slice,u={},f=0;function h(m,p){this._id=m,this._clearFn=p}c.setTimeout=function(){return new h(l.call(setTimeout,window,arguments),clearTimeout)},c.setInterval=function(){return new h(l.call(setInterval,window,arguments),clearInterval)},c.clearTimeout=c.clearInterval=function(m){m.close()},h.prototype.unref=h.prototype.ref=function(){},h.prototype.close=function(){this._clearFn.call(window,this._id)},c.enroll=function(m,p){clearTimeout(m._idleTimeoutId),m._idleTimeout=p},c.unenroll=function(m){clearTimeout(m._idleTimeoutId),m._idleTimeout=-1},c._unrefActive=c.active=function(m){clearTimeout(m._idleTimeoutId);var p=m._idleTimeout;p>=0&&(m._idleTimeoutId=setTimeout(function(){m._onTimeout&&m._onTimeout()},p))},c.setImmediate=typeof o=="function"?o:function(m){var p=f++,x=!(arguments.length<2)&&i.call(arguments,1);return u[p]=!0,d(function(){u[p]&&(x?m.apply(null,x):m.call(null),c.clearImmediate(p))}),p},c.clearImmediate=typeof a=="function"?a:function(m){delete u[m]}}).call(this)}).call(this,s("timers").setImmediate,s("timers").clearImmediate)},{"process/browser.js":467,timers:523}],524:[function(s,n,c){(function(o){(function(){function a(d){try{if(!o.localStorage)return!1}catch{return!1}var l=o.localStorage[d];return l!=null&&String(l).toLowerCase()==="true"}n.exports=function(d,l){if(a("noDeprecation"))return d;var i=!1;return function(){if(!i){if(a("throwDeprecation"))throw new Error(l);a("traceDeprecation")?console.trace(l):console.warn(l),i=!0}return d.apply(this,arguments)}}}).call(this)}).call(this,typeof _s<"u"?_s:typeof self<"u"?self:typeof window<"u"?window:{})},{}],525:[function(s,n,c){typeof Object.create=="function"?n.exports=function(o,a){o.super_=a,o.prototype=Object.create(a.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}})}:n.exports=function(o,a){o.super_=a;var d=function(){};d.prototype=a.prototype,o.prototype=new d,o.prototype.constructor=o}},{}],526:[function(s,n,c){n.exports=function(o){return o&&typeof o=="object"&&typeof o.copy=="function"&&typeof o.fill=="function"&&typeof o.readUInt8=="function"}},{}],527:[function(s,n,c){(function(o,a){(function(){var d=/%[sdj%]/g;c.format=function(w){if(!C(w)){for(var _=[],j=0;j<arguments.length;j++)_.push(u(arguments[j]));return _.join(" ")}j=1;for(var N=arguments,E=N.length,I=String(w).replace(d,function(V){if(V==="%%")return"%";if(j>=E)return V;switch(V){case"%s":return String(N[j++]);case"%d":return Number(N[j++]);case"%j":try{return JSON.stringify(N[j++])}catch{return"[Circular]"}default:return V}}),D=N[j];j<E;D=N[++j])y(D)||!U(D)?I+=" "+D:I+=" "+u(D);return I},c.deprecate=function(w,_){if(T(a.process))return function(){return c.deprecate(w,_).apply(this,arguments)};if(o.noDeprecation===!0)return w;var j=!1;return function(){if(!j){if(o.throwDeprecation)throw new Error(_);o.traceDeprecation?console.trace(_):console.error(_),j=!0}return w.apply(this,arguments)}};var l,i={};function u(w,_){var j={seen:[],stylize:h};return arguments.length>=3&&(j.depth=arguments[2]),arguments.length>=4&&(j.colors=arguments[3]),v(_)?j.showHidden=_:_&&c._extend(j,_),T(j.showHidden)&&(j.showHidden=!1),T(j.depth)&&(j.depth=2),T(j.colors)&&(j.colors=!1),T(j.customInspect)&&(j.customInspect=!0),j.colors&&(j.stylize=f),m(j,w,j.depth)}function f(w,_){var j=u.styles[_];return j?"\x1B["+u.colors[j][0]+"m"+w+"\x1B["+u.colors[j][1]+"m":w}function h(w,_){return w}function m(w,_,j){if(w.customInspect&&_&&B(_.inspect)&&_.inspect!==c.inspect&&(!_.constructor||_.constructor.prototype!==_)){var N=_.inspect(j,w);return C(N)||(N=m(w,N,j)),N}var E=function(F,O){if(T(O))return F.stylize("undefined","undefined");if(C(O)){var W="'"+JSON.stringify(O).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return F.stylize(W,"string")}if(b(O))return F.stylize(""+O,"number");if(v(O))return F.stylize(""+O,"boolean");if(y(O))return F.stylize("null","null")}(w,_);if(E)return E;var I=Object.keys(_),D=function(F){var O={};return F.forEach(function(W,K){O[W]=!0}),O}(I);if(w.showHidden&&(I=Object.getOwnPropertyNames(_)),P(_)&&(I.indexOf("message")>=0||I.indexOf("description")>=0))return p(_);if(I.length===0){if(B(_)){var V=_.name?": "+_.name:"";return w.stylize("[Function"+V+"]","special")}if(M(_))return w.stylize(RegExp.prototype.toString.call(_),"regexp");if(L(_))return w.stylize(Date.prototype.toString.call(_),"date");if(P(_))return p(_)}var H,G="",$=!1,Y=["{","}"];return g(_)&&($=!0,Y=["[","]"]),B(_)&&(G=" [Function"+(_.name?": "+_.name:"")+"]"),M(_)&&(G=" "+RegExp.prototype.toString.call(_)),L(_)&&(G=" "+Date.prototype.toUTCString.call(_)),P(_)&&(G=" "+p(_)),I.length!==0||$&&_.length!=0?j<0?M(_)?w.stylize(RegExp.prototype.toString.call(_),"regexp"):w.stylize("[Object]","special"):(w.seen.push(_),H=$?function(F,O,W,K,Q){for(var X=[],te=0,de=O.length;te<de;++te)S(O,String(te))?X.push(x(F,O,W,K,String(te),!0)):X.push("");return Q.forEach(function(xe){xe.match(/^\d+$/)||X.push(x(F,O,W,K,xe,!0))}),X}(w,_,j,D,I):I.map(function(F){return x(w,_,j,D,F,$)}),w.seen.pop(),function(F,O,W){return F.reduce(function(K,Q){return Q.indexOf(`
`)>=0,K+Q.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?W[0]+(O===""?"":O+`
 `)+" "+F.join(`,
  `)+" "+W[1]:W[0]+O+" "+F.join(", ")+" "+W[1]}(H,G,Y)):Y[0]+G+Y[1]}function p(w){return"["+Error.prototype.toString.call(w)+"]"}function x(w,_,j,N,E,I){var D,V,H;if((H=Object.getOwnPropertyDescriptor(_,E)||{value:_[E]}).get?V=H.set?w.stylize("[Getter/Setter]","special"):w.stylize("[Getter]","special"):H.set&&(V=w.stylize("[Setter]","special")),S(N,E)||(D="["+E+"]"),V||(w.seen.indexOf(H.value)<0?(V=y(j)?m(w,H.value,null):m(w,H.value,j-1)).indexOf(`
`)>-1&&(V=I?V.split(`
`).map(function(G){return"  "+G}).join(`
`).substr(2):`
`+V.split(`
`).map(function(G){return"   "+G}).join(`
`)):V=w.stylize("[Circular]","special")),T(D)){if(I&&E.match(/^\d+$/))return V;(D=JSON.stringify(""+E)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(D=D.substr(1,D.length-2),D=w.stylize(D,"name")):(D=D.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),D=w.stylize(D,"string"))}return D+": "+V}function g(w){return Array.isArray(w)}function v(w){return typeof w=="boolean"}function y(w){return w===null}function b(w){return typeof w=="number"}function C(w){return typeof w=="string"}function T(w){return w===void 0}function M(w){return U(w)&&q(w)==="[object RegExp]"}function U(w){return typeof w=="object"&&w!==null}function L(w){return U(w)&&q(w)==="[object Date]"}function P(w){return U(w)&&(q(w)==="[object Error]"||w instanceof Error)}function B(w){return typeof w=="function"}function q(w){return Object.prototype.toString.call(w)}function z(w){return w<10?"0"+w.toString(10):w.toString(10)}c.debuglog=function(w){if(T(l)&&(l=o.env.NODE_DEBUG||""),w=w.toUpperCase(),!i[w])if(new RegExp("\\b"+w+"\\b","i").test(l)){var _=o.pid;i[w]=function(){var j=c.format.apply(c,arguments);console.error("%s %d: %s",w,_,j)}}else i[w]=function(){};return i[w]},c.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},c.isArray=g,c.isBoolean=v,c.isNull=y,c.isNullOrUndefined=function(w){return w==null},c.isNumber=b,c.isString=C,c.isSymbol=function(w){return typeof w=="symbol"},c.isUndefined=T,c.isRegExp=M,c.isObject=U,c.isDate=L,c.isError=P,c.isFunction=B,c.isPrimitive=function(w){return w===null||typeof w=="boolean"||typeof w=="number"||typeof w=="string"||typeof w=="symbol"||w===void 0},c.isBuffer=s("./support/isBuffer");var k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function R(){var w=new Date,_=[z(w.getHours()),z(w.getMinutes()),z(w.getSeconds())].join(":");return[w.getDate(),k[w.getMonth()],_].join(" ")}function S(w,_){return Object.prototype.hasOwnProperty.call(w,_)}c.log=function(){console.log("%s - %s",R(),c.format.apply(c,arguments))},c.inherits=s("inherits"),c._extend=function(w,_){if(!_||!U(_))return w;for(var j=Object.keys(_),N=j.length;N--;)w[j[N]]=_[j[N]];return w}}).call(this)}).call(this,s("_process"),typeof _s<"u"?_s:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":526,_process:467,inherits:525}],528:[function(s,n,c){Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"v1",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(c,"v3",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(c,"v4",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(c,"v5",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(c,"NIL",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(c,"version",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(c,"validate",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(c,"stringify",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(c,"parse",{enumerable:!0,get:function(){return m.default}});var o=p(s("./v1.js")),a=p(s("./v3.js")),d=p(s("./v4.js")),l=p(s("./v5.js")),i=p(s("./nil.js")),u=p(s("./version.js")),f=p(s("./validate.js")),h=p(s("./stringify.js")),m=p(s("./parse.js"));function p(x){return x&&x.__esModule?x:{default:x}}},{"./nil.js":530,"./parse.js":531,"./stringify.js":535,"./v1.js":536,"./v3.js":537,"./v4.js":539,"./v5.js":540,"./validate.js":541,"./version.js":542}],529:[function(s,n,c){function o(m){return 14+(m+64>>>9<<4)+1}function a(m,p){const x=(65535&m)+(65535&p);return(m>>16)+(p>>16)+(x>>16)<<16|65535&x}function d(m,p,x,g,v,y){return a((b=a(a(p,m),a(g,y)))<<(C=v)|b>>>32-C,x);var b,C}function l(m,p,x,g,v,y,b){return d(p&x|~p&g,m,p,v,y,b)}function i(m,p,x,g,v,y,b){return d(p&g|x&~g,m,p,v,y,b)}function u(m,p,x,g,v,y,b){return d(p^x^g,m,p,v,y,b)}function f(m,p,x,g,v,y,b){return d(x^(p|~g),m,p,v,y,b)}Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var h=function(m){if(typeof m=="string"){const p=unescape(encodeURIComponent(m));m=new Uint8Array(p.length);for(let x=0;x<p.length;++x)m[x]=p.charCodeAt(x)}return function(p){const x=[],g=32*p.length;for(let v=0;v<g;v+=8){const y=p[v>>5]>>>v%32&255,b=parseInt("0123456789abcdef".charAt(y>>>4&15)+"0123456789abcdef".charAt(15&y),16);x.push(b)}return x}(function(p,x){p[x>>5]|=128<<x%32,p[o(x)-1]=x;let g=1732584193,v=-271733879,y=-1732584194,b=271733878;for(let C=0;C<p.length;C+=16){const T=g,M=v,U=y,L=b;g=l(g,v,y,b,p[C],7,-680876936),b=l(b,g,v,y,p[C+1],12,-389564586),y=l(y,b,g,v,p[C+2],17,606105819),v=l(v,y,b,g,p[C+3],22,-1044525330),g=l(g,v,y,b,p[C+4],7,-176418897),b=l(b,g,v,y,p[C+5],12,1200080426),y=l(y,b,g,v,p[C+6],17,-1473231341),v=l(v,y,b,g,p[C+7],22,-45705983),g=l(g,v,y,b,p[C+8],7,1770035416),b=l(b,g,v,y,p[C+9],12,-1958414417),y=l(y,b,g,v,p[C+10],17,-42063),v=l(v,y,b,g,p[C+11],22,-1990404162),g=l(g,v,y,b,p[C+12],7,1804603682),b=l(b,g,v,y,p[C+13],12,-40341101),y=l(y,b,g,v,p[C+14],17,-1502002290),v=l(v,y,b,g,p[C+15],22,1236535329),g=i(g,v,y,b,p[C+1],5,-165796510),b=i(b,g,v,y,p[C+6],9,-1069501632),y=i(y,b,g,v,p[C+11],14,643717713),v=i(v,y,b,g,p[C],20,-373897302),g=i(g,v,y,b,p[C+5],5,-701558691),b=i(b,g,v,y,p[C+10],9,38016083),y=i(y,b,g,v,p[C+15],14,-660478335),v=i(v,y,b,g,p[C+4],20,-405537848),g=i(g,v,y,b,p[C+9],5,568446438),b=i(b,g,v,y,p[C+14],9,-1019803690),y=i(y,b,g,v,p[C+3],14,-187363961),v=i(v,y,b,g,p[C+8],20,1163531501),g=i(g,v,y,b,p[C+13],5,-1444681467),b=i(b,g,v,y,p[C+2],9,-51403784),y=i(y,b,g,v,p[C+7],14,1735328473),v=i(v,y,b,g,p[C+12],20,-1926607734),g=u(g,v,y,b,p[C+5],4,-378558),b=u(b,g,v,y,p[C+8],11,-2022574463),y=u(y,b,g,v,p[C+11],16,1839030562),v=u(v,y,b,g,p[C+14],23,-35309556),g=u(g,v,y,b,p[C+1],4,-1530992060),b=u(b,g,v,y,p[C+4],11,1272893353),y=u(y,b,g,v,p[C+7],16,-155497632),v=u(v,y,b,g,p[C+10],23,-1094730640),g=u(g,v,y,b,p[C+13],4,681279174),b=u(b,g,v,y,p[C],11,-358537222),y=u(y,b,g,v,p[C+3],16,-722521979),v=u(v,y,b,g,p[C+6],23,76029189),g=u(g,v,y,b,p[C+9],4,-640364487),b=u(b,g,v,y,p[C+12],11,-421815835),y=u(y,b,g,v,p[C+15],16,530742520),v=u(v,y,b,g,p[C+2],23,-995338651),g=f(g,v,y,b,p[C],6,-198630844),b=f(b,g,v,y,p[C+7],10,1126891415),y=f(y,b,g,v,p[C+14],15,-1416354905),v=f(v,y,b,g,p[C+5],21,-57434055),g=f(g,v,y,b,p[C+12],6,1700485571),b=f(b,g,v,y,p[C+3],10,-1894986606),y=f(y,b,g,v,p[C+10],15,-1051523),v=f(v,y,b,g,p[C+1],21,-2054922799),g=f(g,v,y,b,p[C+8],6,1873313359),b=f(b,g,v,y,p[C+15],10,-30611744),y=f(y,b,g,v,p[C+6],15,-1560198380),v=f(v,y,b,g,p[C+13],21,1309151649),g=f(g,v,y,b,p[C+4],6,-145523070),b=f(b,g,v,y,p[C+11],10,-1120210379),y=f(y,b,g,v,p[C+2],15,718787259),v=f(v,y,b,g,p[C+9],21,-343485551),g=a(g,T),v=a(v,M),y=a(y,U),b=a(b,L)}return[g,v,y,b]}(function(p){if(p.length===0)return[];const x=8*p.length,g=new Uint32Array(o(x));for(let v=0;v<x;v+=8)g[v>>5]|=(255&p[v/8])<<v%32;return g}(m),8*m.length))};c.default=h},{}],530:[function(s,n,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,c.default="00000000-0000-0000-0000-000000000000"},{}],531:[function(s,n,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var o,a=(o=s("./validate.js"))&&o.__esModule?o:{default:o},d=function(l){if(!(0,a.default)(l))throw TypeError("Invalid UUID");let i;const u=new Uint8Array(16);return u[0]=(i=parseInt(l.slice(0,8),16))>>>24,u[1]=i>>>16&255,u[2]=i>>>8&255,u[3]=255&i,u[4]=(i=parseInt(l.slice(9,13),16))>>>8,u[5]=255&i,u[6]=(i=parseInt(l.slice(14,18),16))>>>8,u[7]=255&i,u[8]=(i=parseInt(l.slice(19,23),16))>>>8,u[9]=255&i,u[10]=(i=parseInt(l.slice(24,36),16))/1099511627776&255,u[11]=i/4294967296&255,u[12]=i>>>24&255,u[13]=i>>>16&255,u[14]=i>>>8&255,u[15]=255&i,u};c.default=d},{"./validate.js":541}],532:[function(s,n,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,c.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},{}],533:[function(s,n,c){let o;Object.defineProperty(c,"__esModule",{value:!0}),c.default=function(){if(!o&&(o=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!o))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(a)};const a=new Uint8Array(16)},{}],534:[function(s,n,c){function o(l,i,u,f){switch(l){case 0:return i&u^~i&f;case 1:return i^u^f;case 2:return i&u^i&f^u&f;case 3:return i^u^f}}function a(l,i){return l<<i|l>>>32-i}Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=function(l){const i=[1518500249,1859775393,2400959708,3395469782],u=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof l=="string"){const p=unescape(encodeURIComponent(l));l=[];for(let x=0;x<p.length;++x)l.push(p.charCodeAt(x))}else Array.isArray(l)||(l=Array.prototype.slice.call(l));l.push(128);const f=l.length/4+2,h=Math.ceil(f/16),m=new Array(h);for(let p=0;p<h;++p){const x=new Uint32Array(16);for(let g=0;g<16;++g)x[g]=l[64*p+4*g]<<24|l[64*p+4*g+1]<<16|l[64*p+4*g+2]<<8|l[64*p+4*g+3];m[p]=x}m[h-1][14]=8*(l.length-1)/Math.pow(2,32),m[h-1][14]=Math.floor(m[h-1][14]),m[h-1][15]=8*(l.length-1)&4294967295;for(let p=0;p<h;++p){const x=new Uint32Array(80);for(let T=0;T<16;++T)x[T]=m[p][T];for(let T=16;T<80;++T)x[T]=a(x[T-3]^x[T-8]^x[T-14]^x[T-16],1);let g=u[0],v=u[1],y=u[2],b=u[3],C=u[4];for(let T=0;T<80;++T){const M=Math.floor(T/20),U=a(g,5)+o(M,v,y,b)+C+i[M]+x[T]>>>0;C=b,b=y,y=a(v,30)>>>0,v=g,g=U}u[0]=u[0]+g>>>0,u[1]=u[1]+v>>>0,u[2]=u[2]+y>>>0,u[3]=u[3]+b>>>0,u[4]=u[4]+C>>>0}return[u[0]>>24&255,u[0]>>16&255,u[0]>>8&255,255&u[0],u[1]>>24&255,u[1]>>16&255,u[1]>>8&255,255&u[1],u[2]>>24&255,u[2]>>16&255,u[2]>>8&255,255&u[2],u[3]>>24&255,u[3]>>16&255,u[3]>>8&255,255&u[3],u[4]>>24&255,u[4]>>16&255,u[4]>>8&255,255&u[4]]};c.default=d},{}],535:[function(s,n,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var o,a=(o=s("./validate.js"))&&o.__esModule?o:{default:o};const d=[];for(let i=0;i<256;++i)d.push((i+256).toString(16).substr(1));var l=function(i){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const f=(d[i[u+0]]+d[i[u+1]]+d[i[u+2]]+d[i[u+3]]+"-"+d[i[u+4]]+d[i[u+5]]+"-"+d[i[u+6]]+d[i[u+7]]+"-"+d[i[u+8]]+d[i[u+9]]+"-"+d[i[u+10]]+d[i[u+11]]+d[i[u+12]]+d[i[u+13]]+d[i[u+14]]+d[i[u+15]]).toLowerCase();if(!(0,a.default)(f))throw TypeError("Stringified UUID is invalid");return f};c.default=l},{"./validate.js":541}],536:[function(s,n,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var o=d(s("./rng.js")),a=d(s("./stringify.js"));function d(m){return m&&m.__esModule?m:{default:m}}let l,i,u=0,f=0;var h=function(m,p,x){let g=p&&x||0;const v=p||new Array(16);let y=(m=m||{}).node||l,b=m.clockseq!==void 0?m.clockseq:i;if(y==null||b==null){const P=m.random||(m.rng||o.default)();y==null&&(y=l=[1|P[0],P[1],P[2],P[3],P[4],P[5]]),b==null&&(b=i=16383&(P[6]<<8|P[7]))}let C=m.msecs!==void 0?m.msecs:Date.now(),T=m.nsecs!==void 0?m.nsecs:f+1;const M=C-u+(T-f)/1e4;if(M<0&&m.clockseq===void 0&&(b=b+1&16383),(M<0||C>u)&&m.nsecs===void 0&&(T=0),T>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=C,f=T,i=b,C+=122192928e5;const U=(1e4*(268435455&C)+T)%4294967296;v[g++]=U>>>24&255,v[g++]=U>>>16&255,v[g++]=U>>>8&255,v[g++]=255&U;const L=C/4294967296*1e4&268435455;v[g++]=L>>>8&255,v[g++]=255&L,v[g++]=L>>>24&15|16,v[g++]=L>>>16&255,v[g++]=b>>>8|128,v[g++]=255&b;for(let P=0;P<6;++P)v[g+P]=y[P];return p||(0,a.default)(v)};c.default=h},{"./rng.js":533,"./stringify.js":535}],537:[function(s,n,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var o=d(s("./v35.js")),a=d(s("./md5.js"));function d(i){return i&&i.__esModule?i:{default:i}}var l=(0,o.default)("v3",48,a.default);c.default=l},{"./md5.js":529,"./v35.js":538}],538:[function(s,n,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=function(u,f,h){function m(p,x,g,v){if(typeof p=="string"&&(p=function(b){b=unescape(encodeURIComponent(b));const C=[];for(let T=0;T<b.length;++T)C.push(b.charCodeAt(T));return C}(p)),typeof x=="string"&&(x=(0,a.default)(x)),x.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let y=new Uint8Array(16+p.length);if(y.set(x),y.set(p,x.length),y=h(y),y[6]=15&y[6]|f,y[8]=63&y[8]|128,g){v=v||0;for(let b=0;b<16;++b)g[v+b]=y[b];return g}return(0,o.default)(y)}try{m.name=u}catch{}return m.DNS=l,m.URL=i,m},c.URL=c.DNS=void 0;var o=d(s("./stringify.js")),a=d(s("./parse.js"));function d(u){return u&&u.__esModule?u:{default:u}}const l="6ba7b810-9dad-11d1-80b4-00c04fd430c8";c.DNS=l;const i="6ba7b811-9dad-11d1-80b4-00c04fd430c8";c.URL=i},{"./parse.js":531,"./stringify.js":535}],539:[function(s,n,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var o=d(s("./rng.js")),a=d(s("./stringify.js"));function d(i){return i&&i.__esModule?i:{default:i}}var l=function(i,u,f){const h=(i=i||{}).random||(i.rng||o.default)();if(h[6]=15&h[6]|64,h[8]=63&h[8]|128,u){f=f||0;for(let m=0;m<16;++m)u[f+m]=h[m];return u}return(0,a.default)(h)};c.default=l},{"./rng.js":533,"./stringify.js":535}],540:[function(s,n,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var o=d(s("./v35.js")),a=d(s("./sha1.js"));function d(i){return i&&i.__esModule?i:{default:i}}var l=(0,o.default)("v5",80,a.default);c.default=l},{"./sha1.js":534,"./v35.js":538}],541:[function(s,n,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var o,a=(o=s("./regex.js"))&&o.__esModule?o:{default:o},d=function(l){return typeof l=="string"&&a.default.test(l)};c.default=d},{"./regex.js":532}],542:[function(s,n,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var o,a=(o=s("./validate.js"))&&o.__esModule?o:{default:o},d=function(l){if(!(0,a.default)(l))throw TypeError("Invalid UUID");return parseInt(l.substr(14,1),16)};c.default=d},{"./validate.js":541}],543:[function(s,n,c){/**
* Character classes and associated utilities for the 5th edition of XML 1.0.
*
* @author Louis-Dominique Dubeau
* @license MIT
* @copyright Louis-Dominique Dubeau
*/Object.defineProperty(c,"__esModule",{value:!0}),c.CHAR=`	
\r ---`,c.S=` 	\r
`,c.NAME_START_CHAR=":A-Z_a-z-----------",c.NAME_CHAR="-"+c.NAME_START_CHAR+".0-9--",c.CHAR_RE=new RegExp("^["+c.CHAR+"]$","u"),c.S_RE=new RegExp("^["+c.S+"]+$","u"),c.NAME_START_CHAR_RE=new RegExp("^["+c.NAME_START_CHAR+"]$","u"),c.NAME_CHAR_RE=new RegExp("^["+c.NAME_CHAR+"]$","u"),c.NAME_RE=new RegExp("^["+c.NAME_START_CHAR+"]["+c.NAME_CHAR+"]*$","u"),c.NMTOKEN_RE=new RegExp("^["+c.NAME_CHAR+"]+$","u");function o(a){return a>=65&&a<=90||a>=97&&a<=122||a===58||a===95||a===8204||a===8205||a>=192&&a<=214||a>=216&&a<=246||a>=248&&a<=767||a>=880&&a<=893||a>=895&&a<=8191||a>=8304&&a<=8591||a>=11264&&a<=12271||a>=12289&&a<=55295||a>=63744&&a<=64975||a>=65008&&a<=65533||a>=65536&&a<=983039}c.S_LIST=[32,10,13,9],c.isChar=function(a){return a>=32&&a<=55295||a===10||a===13||a===9||a>=57344&&a<=65533||a>=65536&&a<=1114111},c.isS=function(a){return a===32||a===10||a===13||a===9},c.isNameStartChar=o,c.isNameChar=function(a){return o(a)||a>=48&&a<=57||a===45||a===46||a===183||a>=768&&a<=879||a>=8255&&a<=8256}},{}],544:[function(s,n,c){/**
* Character classes and associated utilities for the 2nd edition of XML 1.1.
*
* @author Louis-Dominique Dubeau
* @license MIT
* @copyright Louis-Dominique Dubeau
*/Object.defineProperty(c,"__esModule",{value:!0}),c.CHAR="---",c.RESTRICTED_CHAR="-\b\v\f---",c.S=` 	\r
`,c.NAME_START_CHAR=":A-Z_a-z-----------",c.NAME_CHAR="-"+c.NAME_START_CHAR+".0-9--",c.CHAR_RE=new RegExp("^["+c.CHAR+"]$","u"),c.RESTRICTED_CHAR_RE=new RegExp("^["+c.RESTRICTED_CHAR+"]$","u"),c.S_RE=new RegExp("^["+c.S+"]+$","u"),c.NAME_START_CHAR_RE=new RegExp("^["+c.NAME_START_CHAR+"]$","u"),c.NAME_CHAR_RE=new RegExp("^["+c.NAME_CHAR+"]$","u"),c.NAME_RE=new RegExp("^["+c.NAME_START_CHAR+"]["+c.NAME_CHAR+"]*$","u"),c.NMTOKEN_RE=new RegExp("^["+c.NAME_CHAR+"]+$","u");function o(a){return a>=65&&a<=90||a>=97&&a<=122||a===58||a===95||a===8204||a===8205||a>=192&&a<=214||a>=216&&a<=246||a>=248&&a<=767||a>=880&&a<=893||a>=895&&a<=8191||a>=8304&&a<=8591||a>=11264&&a<=12271||a>=12289&&a<=55295||a>=63744&&a<=64975||a>=65008&&a<=65533||a>=65536&&a<=983039}c.S_LIST=[32,10,13,9],c.isChar=function(a){return a>=1&&a<=55295||a>=57344&&a<=65533||a>=65536&&a<=1114111},c.isRestrictedChar=function(a){return a>=1&&a<=8||a===11||a===12||a>=14&&a<=31||a>=127&&a<=132||a>=134&&a<=159},c.isCharAndNotRestricted=function(a){return a===9||a===10||a===13||a>31&&a<127||a===133||a>159&&a<=55295||a>=57344&&a<=65533||a>=65536&&a<=1114111},c.isS=function(a){return a===32||a===10||a===13||a===9},c.isNameStartChar=o,c.isNameChar=function(a){return o(a)||a>=48&&a<=57||a===45||a===46||a===183||a>=768&&a<=879||a>=8255&&a<=8256}},{}],545:[function(s,n,c){/**
* Character class utilities for XML NS 1.0 edition 3.
*
* @author Louis-Dominique Dubeau
* @license MIT
* @copyright Louis-Dominique Dubeau
*/function o(a){return a>=65&&a<=90||a===95||a>=97&&a<=122||a>=192&&a<=214||a>=216&&a<=246||a>=248&&a<=767||a>=880&&a<=893||a>=895&&a<=8191||a>=8204&&a<=8205||a>=8304&&a<=8591||a>=11264&&a<=12271||a>=12289&&a<=55295||a>=63744&&a<=64975||a>=65008&&a<=65533||a>=65536&&a<=983039}Object.defineProperty(c,"__esModule",{value:!0}),c.NC_NAME_START_CHAR="A-Z_a-z------------",c.NC_NAME_CHAR="-"+c.NC_NAME_START_CHAR+".0-9--",c.NC_NAME_START_CHAR_RE=new RegExp("^["+c.NC_NAME_START_CHAR+"]$","u"),c.NC_NAME_CHAR_RE=new RegExp("^["+c.NC_NAME_CHAR+"]$","u"),c.NC_NAME_RE=new RegExp("^["+c.NC_NAME_START_CHAR+"]["+c.NC_NAME_CHAR+"]*$","u"),c.isNCNameStartChar=o,c.isNCNameChar=function(a){return o(a)||a===45||a===46||a>=48&&a<=57||a===183||a>=768&&a<=879||a>=8255&&a<=8256}},{}]},{},[15])(15)})})(eC);var ad=eC.exports;const tz=Lf(ad),sz=()=>{var yr,Ur,Ls,Mn,Ws;const[t,r]=A.useState([]),[s,n]=A.useState([]),[c,o]=A.useState([]),[a,d]=A.useState([]),[l,i]=A.useState([]),[u,f]=A.useState(!0),[h,m]=A.useState(!1),[p,x]=A.useState(!1),[g,v]=A.useState(""),[y,b]=A.useState(""),[C,T]=A.useState("all"),[M,U]=A.useState("all"),[L,P]=A.useState("all"),[B,q]=A.useState("all"),[z,k]=A.useState("all"),[R,S]=A.useState(!1),[w,_]=A.useState(!1),[j,N]=A.useState(!1),[E,I]=A.useState(null),[D,V]=A.useState(null),[H,G]=A.useState(null),[$,Y]=A.useState("super-admin"),[F,O]=A.useState(""),[W,K]=A.useState(""),[Q,X]=A.useState("no-batch"),[te,de]=A.useState(!1),[xe,ne]=A.useState([]),[ge,be]=A.useState(!1),[Ie,Ce]=A.useState({}),[Oe,Ee]=A.useState(""),[pe,Ae]=A.useState(!1),[st,qe]=A.useState(null),[ie,ae]=A.useState(!1),[we,ve]=A.useState([]),[He,$e]=A.useState(!1),[ue,oe]=A.useState(!1),[_e,Me]=A.useState(""),[ze,Xe]=A.useState(new Set),[Ve,ot]=A.useState(!1),[xt,ft]=A.useState(!1),[at,Be]=A.useState(!1),[Ue,re]=A.useState(!1),[ye,ke]=A.useState(""),[Fe,Ke]=A.useState(""),[Qe,he]=A.useState(""),[je,Ne]=A.useState(null),[tt,jt]=A.useState([]),[dt,kt]=A.useState(!1),[gt,wt]=A.useState(!1),[Pt,bt]=A.useState(!1),{toast:yt}=Js(),[Ge,J]=A.useState({name:"",email:"",role:"student",college_id:"",department:"",batch:"no-batch",student_id:"",admission_type:"regular",joining_year:new Date().getFullYear(),final_year:new Date().getFullYear()+4,phone:"",is_active:!0,faculty_type:"Internal",address:"",designation:"",technical_skills:"",languages_known:"",current_location:"",bank_account_number:"",bank_name:"",bank_ifsc:"",bank_branch_address:"",faculty_status:"Available",payment_type:"Monthly",pan_number:"",payment_amount:""});A.useEffect(()=>{Je(),ht()},[]),A.useEffect(()=>{Ge.college_id&&Ge.role==="student"?(le(Ge.college_id),Le(Ge.college_id)):(o([]),i([]),J(Z=>({...Z,department:"",batch:"no-batch"})))},[Ge.college_id,Ge.role]),A.useEffect(()=>{d(c)},[c]),A.useEffect(()=>{if(Ge.role==="student"){const Z=new Date().getFullYear();J(Ze=>({...Ze,joining_year:Z,final_year:Z+4}))}},[Ge.role]),A.useEffect(()=>{M!=="all"?(le(M),Le(M)):(d([]),i([]))},[M]),A.useEffect(()=>{F&&$==="student"?Le(F):(i([]),X("no-batch"))},[F,$]),A.useEffect(()=>{const Z=setTimeout(()=>{b(g)},150);return()=>clearTimeout(Z)},[g]),A.useEffect(()=>{ds()},[C,M,L,B,z,D]),A.useEffect(()=>{ds()},[y]);const ce=async()=>{try{f(!0);const Z=await Pe.getUsers({limit:1e3,page:1});Z.success&&r(Z.data)}catch(Z){console.error("Error fetching users:",Z),yt({variant:"destructive",title:"Error",description:"Failed to fetch users"})}finally{f(!1)}},Je=async()=>{try{f(!0);const Z=await Pe.getUsers({limit:1e4,page:1});Z.success&&r(Z.data)}catch(Z){console.error("Error fetching all users:",Z),await ce()}finally{f(!1)}},ht=async()=>{try{const Z=await Pe.getSuperAdminColleges();Z.success&&n(Z.data.colleges||Z.data||[])}catch(Z){console.error("Error fetching colleges:",Z),n([])}},le=async Z=>{try{m(!0);const Ze=await Pe.getCollegeDepartments(Z);Ze.success?o(Ze.data||[]):o([])}catch(Ze){console.error("Error fetching departments:",Ze),o([]),yt({variant:"destructive",title:"Error",description:"Failed to fetch departments for the selected college"})}finally{m(!1)}},Le=async Z=>{try{x(!0);const Ze=await Pe.getCollegeBatches(Z);Ze.success?i(Ze.data||[]):i([])}catch(Ze){console.error("Error fetching batches:",Ze),i([]),yt({variant:"destructive",title:"Error",description:"Failed to fetch batches for the selected college"})}finally{x(!1)}},rt=async Z=>new Promise((Ze,Et)=>{const qt=new FileReader;qt.onload=async ss=>{try{const is=new ad.Workbook;await is.xlsx.load(ss.target.result);const Bs=is.getWorksheet(1),kr=[];let Ca=!0;Bs.eachRow((Qr,da)=>{var Qs;if(Ca){Ca=!1;return}const Rs=(Qs=Qr.getCell(1))==null?void 0:Qs.value;Rs&&String(Rs).trim()&&kr.push(String(Rs).trim().toUpperCase())}),Ze(kr)}catch(is){Et(is)}},qt.readAsArrayBuffer(Z)}),pt=Z=>Z.trim()?Z.split(",").map(Ze=>Ze.trim().toUpperCase()).filter(Ze=>Ze.length>0):[],Tt=async()=>{if(!ye||!Fe){yt({variant:"destructive",title:"Error",description:"Please select both college and batch"});return}let Z=[];try{if(wt(!0),je)Z=await rt(je);else if(Qe.trim())Z=pt(Qe);else{yt({variant:"destructive",title:"Error",description:"Please provide either an Excel file or comma-separated roll numbers"});return}if(Z.length===0){yt({variant:"destructive",title:"Error",description:"No valid roll numbers found"});return}const Ze=[];for(const is of Z)try{const Bs=t.find(kr=>kr.role==="student"&&kr.student_id===is&&kr.college_id===ye);if(Bs){const kr=await Pe.updateUser(Bs.id,{...Bs,batch:Fe});kr.success?Ze.push({success:!0,rollNumber:is,student:Bs.name,message:`Successfully mapped to ${Fe}`}):Ze.push({success:!1,rollNumber:is,error:kr.message||"Failed to update batch"})}else Ze.push({success:!1,rollNumber:is,error:"Student not found in selected college"})}catch(Bs){Ze.push({success:!1,rollNumber:is,error:Bs.message||"Unknown error"})}jt(Ze),kt(!0);const Et=Ze.filter(is=>is.success).length,qt=Ze.filter(is=>!is.success).length;let ss=`Successfully mapped ${Et} students to ${Fe}`;qt>0&&(ss+=`. ${qt} errors occurred. Check the results below for details.`),yt({title:"Batch Mapping Complete",description:ss}),ce()}catch(Ze){console.error("Error in batch mapping:",Ze),yt({variant:"destructive",title:"Error",description:Ze.message||"Failed to process batch mapping"})}finally{wt(!1)}},vt=()=>{ke(""),Ke(""),he(""),Ne(null),jt([]),kt(!1),i([])},_t=async()=>{var Z,Ze;try{if(!Ge.name||!Ge.email||!Ge.role){yt({variant:"destructive",title:"Error",description:"Please fill in all required fields"});return}if(Ge.role!=="super-admin"&&Ge.role!=="faculty"&&!Ge.college_id){yt({variant:"destructive",title:"Error",description:"Please select a college"});return}if(Ge.role==="student"&&!Ge.department){yt({variant:"destructive",title:"Error",description:"Please select a department for the student"});return}if(Ge.role==="student"&&!Ge.student_id){yt({variant:"destructive",title:"Error",description:"Student ID (Roll Number) is required for students"});return}if(Ge.role==="student"&&!Ge.joining_year){yt({variant:"destructive",title:"Error",description:"Joining Year is required for students"});return}if(Ge.role==="student"&&!Ge.final_year){yt({variant:"destructive",title:"Error",description:"Final Year is required for students"});return}if(Ge.role==="faculty"){if(!Ge.phone){yt({variant:"destructive",title:"Error",description:"Mobile number is required for faculty (will be used as password)"});return}const ss=/^[0-9]{10}$/,is=Ge.phone.replace(/[^0-9]/g,"");if(!ss.test(is)){yt({variant:"destructive",title:"Error",description:"Invalid mobile number format. Please enter a 10-digit number"});return}if(!Ge.payment_amount||parseFloat(Ge.payment_amount)<=0){yt({variant:"destructive",title:"Error",description:`Payment amount is required for ${Ge.payment_type==="Monthly"?"monthly":"per day"} payment`});return}}const Et={...Ge,batch:Ge.batch==="no-batch"?"":Ge.batch},qt=await Pe.createUser(Et);if(qt.success){const{data:ss}=qt;let is="User added successfully";ss&&ss.password&&(Ge.role==="student"&&ss.student_id?is=`Student created! Roll Number: ${ss.student_id}, Password: ${ss.password}`:Ge.role==="faculty"?is=`Faculty created! Email: ${Ge.email}, Password: ${ss.password} (Mobile Number)`:is=`User created! Password: ${ss.password}`),yt({title:"Success",description:is}),S(!1),Yr(),ce()}}catch(Et){console.error("Error adding user:",Et),yt({variant:"destructive",title:"Error",description:((Ze=(Z=Et.response)==null?void 0:Z.data)==null?void 0:Ze.message)||Et.message||"Failed to add user"})}},Bt=async()=>{try{const Z={...Ge,batch:Ge.batch==="no-batch"?"":Ge.batch};(await Pe.updateUser(E.id,Z)).success&&(yt({title:"Success",description:"User updated successfully"}),_(!1),I(null),Yr(),ce())}catch(Z){console.error("Error updating user:",Z),yt({variant:"destructive",title:"Error",description:Z.message||"Failed to update user"})}},Qt=async Z=>{try{(await Pe.deleteUser(Z)).success&&(yt({title:"Success",description:"User deleted successfully"}),ce())}catch(Ze){console.error("Error deleting user:",Ze),yt({variant:"destructive",title:"Error",description:"Failed to delete user"})}},Gt=Z=>{Xe(Ze=>{const Et=new Set(Ze);return Et.has(Z)?Et.delete(Z):Et.add(Z),Et})},Ut=()=>{ze.size===Sr.length?Xe(new Set):Xe(new Set(Sr.map(Z=>Z.id)))},gs=async()=>{if(ze.size===0){yt({variant:"destructive",title:"Error",description:"No users selected for deletion"});return}try{ft(!0);const Z=Array.from(ze),Ze=[];for(const ss of Z)try{const is=await Pe.deleteUser(ss);is.success?Ze.push({success:!0,userId:ss}):Ze.push({success:!1,userId:ss,error:is.message||"Failed to delete"})}catch(is){Ze.push({success:!1,userId:ss,error:is.message||"Unknown error"})}const Et=Ze.filter(ss=>ss.success).length,qt=Ze.filter(ss=>!ss.success).length;Et>0?yt({title:"Bulk Delete Complete",description:`Successfully deleted ${Et} users${qt>0?`. ${qt} errors occurred.`:""}`}):yt({variant:"destructive",title:"Bulk Delete Failed",description:"Failed to delete any users. Check the console for details."}),Xe(new Set),ot(!1),ce()}catch(Z){console.error("Error in bulk delete:",Z),yt({variant:"destructive",title:"Error",description:"Failed to perform bulk delete operation"})}finally{ft(!1)}},ds=()=>{Xe(new Set)},cs=async Z=>{try{(await Pe.toggleUserStatus(Z)).success&&(yt({title:"Success",description:"User status updated successfully"}),ce())}catch(Ze){console.error("Error toggling user status:",Ze),yt({variant:"destructive",title:"Error",description:"Failed to update user status"})}},Cs=Z=>{const Ze={minLength:Z.length>=8,hasUpperCase:/[A-Z]/.test(Z),hasLowerCase:/[a-z]/.test(Z),hasNumber:/[0-9]/.test(Z),hasSpecialChar:/[!@#$%^&*(),.?":{}|<>]/.test(Z)};return{isValid:Object.values(Ze).every(qt=>qt===!0),validations:Ze}},Fs=async()=>{var Z,Ze;try{if(!Oe.trim()){yt({variant:"destructive",title:"Error",description:"Please enter a new password"});return}const{isValid:Et,validations:qt}=Cs(Oe);if(!Et){const is=[];qt.minLength||is.push("at least 8 characters"),qt.hasUpperCase||is.push("one uppercase letter"),qt.hasLowerCase||is.push("one lowercase letter"),qt.hasNumber||is.push("one number"),qt.hasSpecialChar||is.push('one special character (!@#$%^&*(),.?":{}|<>)'),yt({variant:"destructive",title:"Password Requirements Not Met",description:`Password must contain: ${is.join(", ")}`});return}const ss=await Pe.patch(`/users/${E.id}/change-password`,{newPassword:Oe.trim()});if(ss.success){const{data:is}=ss;is&&is.password?(qe(is.password),ae(!0)):yt({title:"Success",description:"Password changed successfully"}),ss.data&&ss.data.password&&r(Bs=>Bs.map(kr=>kr.id===E.id?{...kr,plain_password:ss.data.password}:kr)),N(!1),Ee(""),Ae(!1),I(null),ce()}}catch(Et){console.error("Error changing password:",Et),yt({variant:"destructive",title:"Error",description:((Ze=(Z=Et.response)==null?void 0:Z.data)==null?void 0:Ze.message)||"Failed to change password"})}},Hs=Z=>{I(Z),Ee(""),Ae(!1),N(!0)},Nr=async()=>{if(!H){yt({variant:"destructive",title:"Error",description:"Please select a file to upload"});return}if($==="student"&&(!F||!W)){yt({variant:"destructive",title:"Error",description:"Please select both college and department for student upload"});return}try{de(!0),yt({title:"Processing File",description:"Reading and validating Excel file...",duration:3e3});const Z=await Kr(H);if(Z.length===0){yt({variant:"destructive",title:"Error",description:"No valid data found in the uploaded file"});return}ne(Z),be(!0),yt({title:"File Parsed Successfully",description:`Found ${Z.length} users in the file. Review the data below and click "Create Users" to create them.`})}catch(Z){console.error("Error uploading file:",Z),Z.message&&Z.message.includes("Validation errors found:")?(yt({variant:"destructive",title:"Validation Errors",description:"Please fix the errors in your Excel file and try again. Check the console for details.",duration:8e3}),console.error("Detailed validation errors:",Z.message)):yt({variant:"destructive",title:"Error",description:Z.message||"Failed to parse file"})}finally{de(!1)}},Kr=async Z=>new Promise((Ze,Et)=>{const qt=new FileReader,ss=setTimeout(()=>{qt.abort(),Et(new Error("File reading timeout. Please try again with a smaller file."))},3e4);qt.onload=async is=>{try{clearTimeout(ss);const Bs=new ad.Workbook;await Bs.xlsx.load(is.target.result);const kr=Bs.getWorksheet(1),Ca=[],Qr=[];let da=!0,Rs=1;const Qs=ls=>{if(!ls)return"";let ar="";return ls.richText&&Array.isArray(ls.richText)?ar=ls.richText.map(dr=>dr.text).join(""):ls.hyperlink?ar=ls.hyperlink.text||ls.hyperlink.address||"":ls.result?ar=String(ls.result):ls.value!==null&&ls.value!==void 0&&(ar=String(ls.value)),ar.trim()},jn=(ls,ar,dr)=>!ls||ls===""?(Qr.push(`Row ${dr}: ${ar} is required`),!1):!0,So=(ls,ar)=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ls)?!0:(Qr.push(`Row ${ar}: Invalid email format for ${ls}`),!1),Ru=(ls,ar)=>{const dr=parseInt(ls),an=new Date().getFullYear();return isNaN(dr)||dr<2e3||dr>an+10?(Qr.push(`Row ${ar}: Invalid year format. Year should be between 2000 and ${an+10}`),!1):!0},Va=(ls,ar)=>{if(ls&&ls.trim()!==""){const dr=["regular","lateral"],an=ls.toLowerCase().trim();if(!dr.includes(an))return Qr.push(`Row ${ar}: Invalid admission type '${ls}'. Must be 'regular' or 'lateral' (case insensitive)`),!1}return!0},Pu=(ls,ar)=>ls&&ls.length>100?(Qr.push(`Row ${ar}: Batch name is too long. Maximum 100 characters allowed.`),!1):!0;if(kr.eachRow((ls,ar)=>{if(Rs=ar,da){da=!1;return}if($==="super-admin"){const dr=Qs(ls.getCell(1)).trim(),an=Qs(ls.getCell(2)).trim(),ml=Qs(ls.getCell(3)).trim(),se=Qs(ls.getCell(4)).trim(),fe=jn(dr,"Name",Rs),We=jn(an,"Email ID",Rs)&&So(an,Rs);fe&&We&&Ca.push({name:dr,email:an,phone:ml,password:se,role:"super-admin",is_active:!0})}else if($==="student"){const dr=Qs(ls.getCell(1)).trim(),an=Qs(ls.getCell(2)).trim(),ml=Qs(ls.getCell(3)).trim(),se=Qs(ls.getCell(4)).trim(),fe=Qs(ls.getCell(5)).trim(),We=Qs(ls.getCell(6)).trim(),nt=Qs(ls.getCell(7)).trim(),Mt=Qs(ls.getCell(8)).trim(),ys=jn(dr,"Name",Rs),Wt=jn(an,"Email ID",Rs)&&So(an,Rs),Xr=jn(se,"Roll Number",Rs),ur=jn(nt,"Joining Year",Rs)&&Ru(nt,Rs),Kn=jn(Mt,"Ending Year",Rs)&&Ru(Mt,Rs),qa=fe===""||Va(fe,Rs),Pc=We===""||Pu(We,Rs);let Mc=!0;if(ur&&Kn){const Mu=parseInt(nt);parseInt(Mt)<=Mu&&(Qr.push(`Row ${Rs}: Ending Year must be greater than Joining Year`),Mc=!1)}ys&&Wt&&Xr&&qa&&Pc&&ur&&Kn&&Mc&&Ca.push({name:dr,email:an,phone:ml,student_id:se,admission_type:(fe||"regular").toLowerCase(),batch:We||(Q==="no-batch"?"":Q),joining_year:parseInt(nt),final_year:parseInt(Mt),role:"student",college_id:F,department:W,is_active:!0})}}),Qr.length>0){Et(new Error(`Validation errors found:
${Qr.join(`
`)}`));return}Ze(Ca)}catch(Bs){clearTimeout(ss),Et(Bs)}},qt.onerror=()=>{clearTimeout(ss),Et(new Error("Failed to read file. Please check if the file is corrupted or try a different file."))},qt.onabort=()=>{Et(new Error("File reading was aborted due to timeout."))},qt.readAsArrayBuffer(Z)}),vn=async Z=>{const Ze=[];for(const Et of Z)try{if(!Et.name||!Et.email){Ze.push({success:!1,user:Et,error:"Name and email are required"});continue}const qt=await Pe.createUser(Et);qt.success?Ze.push({success:!0,user:Et,data:qt.data}):Ze.push({success:!1,user:Et,error:qt.message||"Failed to create user"})}catch(qt){Ze.push({success:!1,user:Et,error:qt.message||"Unknown error"})}return Ze},Gn=async()=>{if(xe.length===0){yt({variant:"destructive",title:"Error",description:"No users to create"});return}try{de(!0);const Z=await vn(xe);ve(Z),$e(!0);const Ze=Z.filter(ss=>ss.success).length,Et=Z.filter(ss=>!ss.success).length;let qt=`Successfully created ${Ze} users`;Et>0&&(qt+=`. ${Et} errors occurred. Check the results below for details.`),yt({title:"Users Created",description:qt}),ce()}catch(Z){console.error("Error creating users:",Z),yt({variant:"destructive",title:"Error",description:Z.message||"Failed to create users"})}finally{de(!1)}},bn=()=>{ne([]),be(!1),G(null),ve([]),$e(!1),X("no-batch")},us=async Z=>{try{if(Z==="student"&&(!F||!W)){yt({variant:"destructive",title:"Error",description:"Please select both college and department first"});return}const Ze=hs(Z),Et=new ad.Workbook,qt=Et.addWorksheet("Users");qt.addRow(Ze.headers).eachCell((Rs,Qs)=>{Rs.font={bold:!0,size:12},Rs.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFE0E0E0"}},Rs.alignment={horizontal:"center",vertical:"middle"},Rs.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}}),qt.addRow(Ze.sampleData).eachCell((Rs,Qs)=>{Rs.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}}),Ze.headers.map((Rs,Qs)=>{const jn=Rs.length,So=Ze.sampleData[Qs]?Ze.sampleData[Qs].toString().length:0;return Math.max(jn,So)+3}).forEach((Rs,Qs)=>{qt.getColumn(Qs+1).width=Rs});const kr=await Et.xlsx.writeBuffer(),Ca=new Blob([kr],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),Qr=window.URL.createObjectURL(Ca),da=document.createElement("a");da.href=Qr,da.setAttribute("download",`${Z}_template.xlsx`),document.body.appendChild(da),da.click(),da.remove(),window.URL.revokeObjectURL(Qr),yt({title:"Success",description:`${Z==="super-admin"?"Super Admin":"Student"} template downloaded successfully`})}catch(Ze){console.error("Error downloading template:",Ze),yt({variant:"destructive",title:"Error",description:"Failed to download template"})}},hs=Z=>Z==="super-admin"?{headers:["Name","Email ID","Contact","Password"],sampleData:["John Doe","john@example.com","+1234567890","password123"]}:Z==="student"?{headers:["Name *","Email ID *","Phone Number","Roll Number *","Admission Type","Batch","Joining Year","Ending Year"],sampleData:["Jane Smith","jane.smith@example.com","+91-9876543210","CS2024001","regular","2024","2024","2028"]}:{headers:[],sampleData:[]},Yr=()=>{J({name:"",email:"",role:"student",college_id:"",department:"",batch:"no-batch",student_id:"",admission_type:"regular",joining_year:new Date().getFullYear(),final_year:new Date().getFullYear()+4,phone:"",is_active:!0,faculty_type:"Internal",address:"",designation:"",technical_skills:"",languages_known:"",current_location:"",bank_account_number:"",bank_name:"",bank_ifsc:"",bank_branch_address:"",faculty_status:"Available",payment_type:"Monthly",pan_number:"",payment_amount:""}),o([]),i([]),U("all"),P("all"),q("all")},wn=Z=>{I(Z),J({name:Z.name,email:Z.email,role:Z.role,college_id:Z.college_id,department:Z.department||"",batch:Z.batch||"no-batch",student_id:Z.student_id||"",admission_type:Z.admission_type||"regular",joining_year:Z.joining_year||new Date().getFullYear(),final_year:Z.final_year||new Date().getFullYear()+4,phone:Z.phone||"",is_active:Z.is_active}),Z.role==="student"&&Z.college_id?(le(Z.college_id),Le(Z.college_id)):(o([]),i([])),_(!0)},Sr=t.filter(Z=>{const Ze=Z.name.toLowerCase().includes(y.toLowerCase())||Z.email.toLowerCase().includes(y.toLowerCase())||Z.student_id&&Z.student_id.toLowerCase().includes(y.toLowerCase()),Et=D?Z.role===D:C==="all"||Z.role===C,qt=M==="all"||Z.college_id===M,ss=L==="all"||Z.department===L,is=B==="all"||Z.batch===B,Bs=z==="all"||z==="active"&&Z.is_active||z==="inactive"&&!Z.is_active;return Ze&&Et&&qt&&ss&&is&&Bs}),xr=Z=>{if(!s||!Array.isArray(s))return"Unknown College";const Ze=s.find(Et=>Et.id===Z);return Ze?Ze.name:"Unknown College"},zr=Z=>Z||"Not specified",Or=Z=>!Z||!Z.trim()?[]:Z.split(",").map(Ze=>Ze.trim()).filter(Ze=>Ze.length>0),Pn=Z=>{const Ze=[];return Z.faculty_type||Ze.push("Faculty Type"),Z.address||Ze.push("Address"),Z.designation||Ze.push("Designation"),Z.technical_skills||Ze.push("Technical Skills"),Z.languages_known||Ze.push("Languages Known"),Z.current_location||Ze.push("Current Location"),Z.bank_account_number||Ze.push("Bank Account Number"),Z.bank_name||Ze.push("Bank Name"),Z.bank_ifsc||Ze.push("IFSC Code"),Z.bank_branch_address||Ze.push("Branch Address"),Z.pan_number||Ze.push("PAN Number"),Z.payment_amount||Ze.push("Payment Amount"),Ze},me=Z=>!Z||typeof Z=="string"&&!Z.trim(),ct=Z=>{Me(Z||""),oe(!0)},Ft=Z=>{if(!Z)return null;const Ze=new Date,Et=Ze.getFullYear();return Ze.getMonth()+1>=6?Et:Et-1},xs=(Z,Ze)=>{if(!Z||!Ze)return"Not Set";const Et=Ft(Z);if(!Et)return"Not Set";if(Et>Ze)return"Passout";const qt=Et-Z;switch(qt){case 0:return"1st Year";case 1:return"2nd Year";case 2:return"3rd Year";case 3:return"4th Year";case 4:return"5th Year";default:return`${qt+1}th Year`}},As=Z=>{navigator.clipboard.writeText(Z),yt({title:"Copied!",description:"Password copied to clipboard"})},Cr=Z=>{Ce(Ze=>({...Ze,[Z]:!Ze[Z]}))};return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(ee,{onClick:Je,variant:"outline",size:"sm",children:[e.jsx(Is,{className:"h-4 w-4 mr-2"}),"Refresh All"]}),e.jsxs(ee,{variant:"outline",onClick:()=>Be(!0),children:[e.jsx(va,{className:"h-4 w-4 mr-2"}),"Bulk Upload"]}),e.jsx(Ht,{open:Ue,onOpenChange:re,children:e.jsx(xa,{asChild:!0,children:e.jsxs(ee,{variant:"outline",children:[e.jsx(as,{className:"h-4 w-4 mr-2"}),"Batch Mapping"]})})})]}),e.jsx(Ht,{open:R,onOpenChange:S,children:e.jsxs(Zt,{className:"max-w-4xl w-[95vw] max-h-[90vh] overflow-y-auto",children:[e.jsxs(Jt,{children:[e.jsx(es,{className:"text-2xl font-bold",children:"Add New User"}),e.jsx(ps,{className:"text-muted-foreground",children:"Create a new user account with appropriate role and permissions"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary border-b pb-2",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"name",className:"text-sm font-medium",children:"Full Name *"}),e.jsx(Ye,{id:"name",value:Ge.name,onChange:Z=>{const Ze=Z.target.value;J({...Ge,name:Ze})},onBlur:Z=>{const Ze=Z.target.value.toLowerCase().replace(/\b\w/g,Et=>Et.toUpperCase());J({...Ge,name:Ze})},placeholder:"Enter full name",className:"h-10"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Name will be automatically formatted to Title Case"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"email",className:"text-sm font-medium",children:"Email Address *"}),e.jsx(Ye,{id:"email",type:"email",value:Ge.email,onChange:Z=>{const Ze=Z.target.value;J({...Ge,email:Ze})},onBlur:Z=>{const Ze=Z.target.value.toLowerCase().trim();J({...Ge,email:Ze})},placeholder:"Enter email address",className:"h-10"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Email will be automatically converted to lowercase"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary border-b pb-2",children:"Role & Institution"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"role",className:"text-sm font-medium",children:"Role *"}),e.jsxs(At,{value:Ge.role||"",onValueChange:Z=>J({...Ge,role:Z}),children:[e.jsx(St,{className:"h-10",children:e.jsx(Rt,{placeholder:"Select role"})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"student",children:"Student"}),e.jsx(Te,{value:"faculty",children:"Faculty"}),e.jsx(Te,{value:"college-admin",children:"College Admin"}),e.jsx(Te,{value:"super-admin",children:"Super Admin"})]})]})]}),Ge.role!=="super-admin"&&Ge.role!=="faculty"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"college",className:"text-sm font-medium",children:"College *"}),e.jsxs(At,{value:Ge.college_id||"",onValueChange:Z=>J({...Ge,college_id:Z}),children:[e.jsx(St,{className:"h-10",children:e.jsx(Rt,{placeholder:"Select college"})}),e.jsx(Ct,{children:Array.isArray(s)&&s.map(Z=>e.jsx(Te,{value:Z.id,children:Z.name},Z.id))})]}),Ge.role==="student"&&Ge.college_id&&h&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1 flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-primary mr-2"}),"Loading departments for ",(yr=s.find(Z=>Z.id===Ge.college_id))==null?void 0:yr.name,"..."]})]})]})]}),Ge.role==="student"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary border-b pb-2",children:"Student Details"}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," Student roll numbers will be automatically stored in CAPS format for consistency."]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"department",className:"text-sm font-medium",children:"Department *"}),e.jsxs(At,{value:Ge.department||"",onValueChange:Z=>J({...Ge,department:Z}),children:[e.jsx(St,{className:"h-10",children:e.jsx(Rt,{placeholder:"Select department"})}),e.jsx(Ct,{children:h?e.jsx(Te,{value:"loading",disabled:!0,children:"Loading departments..."}):c.length===0?e.jsx(Te,{value:"no-departments",disabled:!0,children:"No departments found for this college"}):c.map(Z=>e.jsx(Te,{value:Z.name,children:Z.name},Z.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"joining_year",className:"text-sm font-medium",children:"Joining Year *"}),e.jsxs(At,{value:((Ur=Ge.joining_year)==null?void 0:Ur.toString())||"",onValueChange:Z=>{const Ze=parseInt(Z);J({...Ge,joining_year:Ze,final_year:Ze+4})},children:[e.jsx(St,{className:"h-10",children:e.jsx(Rt,{placeholder:"Select joining year"})}),e.jsx(Ct,{children:Array.from({length:10},(Z,Ze)=>{const Et=new Date().getFullYear()-5+Ze;return e.jsxs(Te,{value:Et.toString(),children:[Et," - ",Et+1]},Et)})})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Academic year when student joined (cycle starts from June). Final year will be automatically set to ",Ge.joining_year?Ge.joining_year+4:"joining year + 4","."]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"final_year",className:"text-sm font-medium",children:"Final Year *"}),e.jsxs(At,{value:((Ls=Ge.final_year)==null?void 0:Ls.toString())||"",onValueChange:Z=>J({...Ge,final_year:parseInt(Z)}),disabled:!Ge.joining_year,children:[e.jsx(St,{className:"h-10",children:e.jsx(Rt,{placeholder:Ge.joining_year?"Select final year":"Select joining year first"})}),e.jsx(Ct,{children:Ge.joining_year?Array.from({length:8},(Z,Ze)=>{const Et=Ge.joining_year+Ze;return e.jsxs(Te,{value:Et.toString(),children:[Et," - ",Et+1]},Et)}):e.jsx(Te,{value:"",disabled:!0,children:"Please select joining year first"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:Ge.joining_year?`Expected completion year (based on joining year ${Ge.joining_year})`:"Expected completion year (select joining year first)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"admission_type",className:"text-sm font-medium",children:"Admission Type *"}),e.jsxs(At,{value:Ge.admission_type,onValueChange:Z=>{J({...Ge,admission_type:Z,joining_year:Z==="lateral"?Ge.joining_year+1:Ge.joining_year,final_year:Z==="lateral"?Ge.final_year+1:Ge.final_year})},children:[e.jsx(St,{className:"h-10",children:e.jsx(Rt,{placeholder:"Select admission type"})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"regular",children:"Regular"}),e.jsx(Te,{value:"lateral",children:"Lateral"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Lateral students get +1 year added to their joining year for academic calculations"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"student_id",className:"text-sm font-medium",children:"Student ID (Roll Number) *"}),e.jsx(Ye,{id:"student_id",value:Ge.student_id,onChange:Z=>{const Ze=Z.target.value.toUpperCase();J({...Ge,student_id:Ze})},onBlur:Z=>{const Ze=Z.target.value.toUpperCase();J({...Ge,student_id:Ze})},placeholder:"Enter roll number (will be used as password)",required:!0,className:"h-10",maxLength:50}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Roll number is mandatory for students and will be used as their login password. Will be stored in CAPS."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"batch",className:"text-sm font-medium",children:"Batch"}),e.jsxs(At,{value:Ge.batch||"no-batch",onValueChange:Z=>J({...Ge,batch:Z==="no-batch"?"":Z}),children:[e.jsx(St,{className:"h-10",children:e.jsx(Rt,{placeholder:"Select batch"})}),e.jsx(Ct,{children:p?e.jsx(Te,{value:"loading",disabled:!0,children:"Loading batches..."}):l.length===0?e.jsx(Te,{value:"no-batches",disabled:!0,children:"No batches found for this college"}):e.jsxs(e.Fragment,{children:[e.jsx(Te,{value:"no-batch",children:"No batch (optional)"}),l.map(Z=>e.jsxs(Te,{value:Z.name,children:[Z.name," (",Z.code,")"]},Z.id))]})})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:p?"Loading available batches...":l.length===0?"No batches available for this college":"Select from available batches or leave empty"})]})]})]}),Ge.role==="faculty"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary border-b pb-2",children:"Faculty Details"}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," Mobile number will be used as the password for faculty login."]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"phone",className:"text-sm font-medium",children:"Mobile Number *"}),e.jsx(Ye,{id:"phone",type:"tel",value:Ge.phone,onChange:Z=>{const Ze=Z.target.value.replace(/[^0-9]/g,"").slice(0,10);J({...Ge,phone:Ze})},placeholder:"Enter 10-digit mobile number",className:"h-10",maxLength:10,required:!0}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This will be used as the password for faculty login"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"faculty_type",className:"text-sm font-medium",children:"Faculty Type *"}),e.jsxs(At,{value:Ge.faculty_type||"Internal",onValueChange:Z=>J({...Ge,faculty_type:Z}),children:[e.jsx(St,{className:"h-10",children:e.jsx(Rt,{placeholder:"Select faculty type"})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"Internal",children:"Internal"}),e.jsx(Te,{value:"Freelancer",children:"Freelancer"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"designation",className:"text-sm font-medium",children:"Designation"}),e.jsx(Ye,{id:"designation",value:Ge.designation,onChange:Z=>J({...Ge,designation:Z.target.value}),placeholder:"e.g., Professor, Assistant Professor",className:"h-10"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"current_location",className:"text-sm font-medium",children:"Current Location"}),e.jsx(Ye,{id:"current_location",value:Ge.current_location,onChange:Z=>J({...Ge,current_location:Z.target.value}),placeholder:"Enter current location",className:"h-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"address",className:"text-sm font-medium",children:"Address"}),e.jsx(ms,{id:"address",value:Ge.address,onChange:Z=>J({...Ge,address:Z.target.value}),placeholder:"Enter full address",rows:3,className:"resize-none"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"technical_skills",className:"text-sm font-medium",children:"Technical Skills"}),e.jsx(ms,{id:"technical_skills",value:Ge.technical_skills,onChange:Z=>J({...Ge,technical_skills:Z.target.value}),placeholder:"e.g., JavaScript, Python, React, Node.js (comma-separated)",rows:3,className:"resize-none"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"languages_known",className:"text-sm font-medium",children:"Languages Known"}),e.jsx(ms,{id:"languages_known",value:Ge.languages_known,onChange:Z=>J({...Ge,languages_known:Z.target.value}),placeholder:"e.g., English, Hindi, Tamil (comma-separated)",rows:3,className:"resize-none"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-md font-semibold text-primary border-b pb-2",children:"Bank Details"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"bank_account_number",className:"text-sm font-medium",children:"Account Number"}),e.jsx(Ye,{id:"bank_account_number",value:Ge.bank_account_number,onChange:Z=>J({...Ge,bank_account_number:Z.target.value}),placeholder:"Enter bank account number",className:"h-10"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"bank_name",className:"text-sm font-medium",children:"Bank Name"}),e.jsx(Ye,{id:"bank_name",value:Ge.bank_name,onChange:Z=>J({...Ge,bank_name:Z.target.value}),placeholder:"Enter bank name",className:"h-10"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"bank_ifsc",className:"text-sm font-medium",children:"IFSC Code"}),e.jsx(Ye,{id:"bank_ifsc",value:Ge.bank_ifsc,onChange:Z=>J({...Ge,bank_ifsc:Z.target.value.toUpperCase()}),placeholder:"Enter IFSC code",className:"h-10",maxLength:11})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"bank_branch_address",className:"text-sm font-medium",children:"Branch Address"}),e.jsx(ms,{id:"bank_branch_address",value:Ge.bank_branch_address,onChange:Z=>J({...Ge,bank_branch_address:Z.target.value}),placeholder:"Enter branch address",rows:2,className:"resize-none"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"faculty_status",className:"text-sm font-medium",children:"Status *"}),e.jsxs(At,{value:Ge.faculty_status||"Available",onValueChange:Z=>J({...Ge,faculty_status:Z}),children:[e.jsx(St,{className:"h-10",children:e.jsx(Rt,{placeholder:"Select status"})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"Available",children:"Available"}),e.jsx(Te,{value:"Occupied",children:"Occupied"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Default: Available"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"payment_type",className:"text-sm font-medium",children:"Payment Type *"}),e.jsxs(At,{value:Ge.payment_type||"Monthly",onValueChange:Z=>J({...Ge,payment_type:Z}),children:[e.jsx(St,{className:"h-10",children:e.jsx(Rt,{placeholder:"Select payment type"})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"Monthly",children:"Monthly"}),e.jsx(Te,{value:"Per Day",children:"Per Day"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Default: Monthly"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"pan_number",className:"text-sm font-medium",children:"PAN Number"}),e.jsx(Ye,{id:"pan_number",value:Ge.pan_number,onChange:Z=>{const Ze=Z.target.value.toUpperCase().replace(/[^A-Z0-9]/g,"").slice(0,10);J({...Ge,pan_number:Ze})},placeholder:"ABCDE1234F",className:"h-10",maxLength:10}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Format: ABCDE1234F (5 letters, 4 digits, 1 letter)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Se,{htmlFor:"payment_amount",className:"text-sm font-medium",children:["Payment Amount (",Ge.payment_type==="Monthly"?"Monthly":"Per Day",") *"]}),e.jsx(Ye,{id:"payment_amount",type:"number",value:Ge.payment_amount,onChange:Z=>{const Ze=Z.target.value.replace(/[^0-9.]/g,"");J({...Ge,payment_amount:Ze})},placeholder:Ge.payment_type==="Monthly"?"Enter monthly payment amount (e.g., 50000)":"Enter per day payment amount (e.g., 2000)",className:"h-10",min:"0",step:"0.01"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:Ge.payment_type==="Monthly"?"Enter the monthly payment amount in INR":"Enter the per day payment amount in INR"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary border-b pb-2",children:"Additional Information"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6",children:[Ge.role!=="faculty"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"phone",className:"text-sm font-medium",children:"Phone Number"}),e.jsx(Ye,{id:"phone",value:Ge.phone,onChange:Z=>J({...Ge,phone:Z.target.value}),placeholder:"Enter phone number",className:"h-10"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"is_active",className:"text-sm font-medium",children:"Account Status"}),e.jsx("div",{className:"flex items-center space-x-3 pt-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:Ge.is_active,onChange:Z=>J({...Ge,is_active:Z.target.checked}),className:"rounded border-gray-300 text-primary focus:ring-primary"}),e.jsx(Se,{htmlFor:"is_active",className:"text-sm",children:"Active Account"})]})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Active accounts can log in immediately. Inactive accounts are suspended."})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsxs(ee,{onClick:_t,className:"flex-1 h-11 text-base font-medium",children:[e.jsx(rm,{className:"h-4 w-4 mr-2"}),"Create User"]}),e.jsx(ee,{variant:"outline",onClick:()=>S(!1),className:"flex-1 h-11 text-base font-medium",children:"Cancel"})]})]})]})}),e.jsx("div",{className:"space-y-4",children:D?e.jsxs(Re,{children:[e.jsxs(lt,{children:[e.jsxs(mt,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(ee,{variant:"ghost",size:"sm",onClick:()=>V(null),className:"p-0 h-auto",children:[e.jsx(Lo,{className:"h-4 w-4 mr-2"}),"Back to Roles"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[D==="super-admin"&&e.jsx(Th,{className:"h-5 w-5 text-red-600"}),D==="college-admin"&&e.jsx(tr,{className:"h-5 w-5 text-blue-600"}),D==="faculty"&&e.jsx(Go,{className:"h-5 w-5 text-green-600"}),D==="student"&&e.jsx(as,{className:"h-5 w-5 text-purple-600"}),e.jsx("span",{className:"capitalize",children:D==="super-admin"?"Super Administrators":D==="college-admin"?"College Administrators":D==="faculty"?"Faculty Members":"Students"})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs(ee,{onClick:()=>S(!0),size:"sm",children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),"Add ",D==="student"?"Student":D==="faculty"?"Faculty":D==="college-admin"?"College Admin":"Super Admin"]})})]}),e.jsx("div",{className:"text-sm text-muted-foreground mb-4",children:e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(hn,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(Ye,{placeholder:`Search ${D==="super-admin"?"super administrators":D.replace("-"," ")} users...`,value:g,onChange:Z=>v(Z.target.value),className:"pl-10 max-w-sm"})]}),D!=="super-admin"&&e.jsxs(At,{value:M,onValueChange:Z=>{U(Z),P("all"),q("all")},children:[e.jsx(St,{className:"w-48",children:e.jsx(Rt,{placeholder:"Filter by college"})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"all",children:"All Colleges"}),s.map(Z=>e.jsx(Te,{value:Z.id.toString(),children:Z.name},Z.id))]})]}),D==="student"&&M!=="all"&&e.jsxs(At,{value:L,onValueChange:Z=>{P(Z),q("all")},children:[e.jsx(St,{className:"w-48",children:e.jsx(Rt,{placeholder:"Filter by department"})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"all",children:"All Departments"}),a.map(Z=>e.jsx(Te,{value:Z.name,children:Z.name},Z.id))]})]}),D==="student"&&M!=="all"&&e.jsxs(At,{value:B,onValueChange:Z=>{q(Z),P("all")},children:[e.jsx(St,{className:"w-48",children:e.jsx(Rt,{placeholder:"Filter by batch"})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"all",children:"All Batches"}),l.map(Z=>e.jsxs(Te,{value:Z.name,children:[Z.name," (",Z.code,")"]},Z.id))]})]})]}),Sr.length>0&&e.jsxs("div",{className:"flex items-center space-x-3 mt-4 p-3 bg-muted/30 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{variant:"outline",size:"sm",onClick:Ut,className:"h-8 px-3",children:ze.size===Sr.length?e.jsxs(e.Fragment,{children:[e.jsx(Ar,{className:"h-4 w-4 mr-2"}),"Deselect All"]}):e.jsxs(e.Fragment,{children:[e.jsx(gl,{className:"h-4 w-4 mr-2"}),"Select All"]})}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[ze.size," of ",Sr.length," users selected"]})]}),ze.size>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{variant:"outline",size:"sm",onClick:ds,className:"h-8 px-3",children:"Clear Selection"}),e.jsxs(Uo,{open:Ve,onOpenChange:ot,children:[e.jsx(V0,{asChild:!0,children:e.jsxs(ee,{variant:"destructive",size:"sm",className:"h-8 px-3",children:[e.jsx(Ds,{className:"h-4 w-4 mr-2"}),"Delete Selected (",ze.size,")"]})}),e.jsxs(Mi,{children:[e.jsxs(Ii,{children:[e.jsx(Fi,{children:"Delete Multiple Users"}),e.jsxs(Li,{children:["Are you sure you want to delete ",ze.size," selected users? This action cannot be undone."]})]}),e.jsxs(Oi,{children:[e.jsx(Ko,{children:"Cancel"}),e.jsx(Di,{onClick:gs,disabled:xt,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:xt?e.jsxs(e.Fragment,{children:[e.jsx(Tr,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):`Delete ${ze.size} Users`})]})]})]})]})]})]})})]}),e.jsx(De,{children:u?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx(Tr,{className:"h-8 w-8 animate-spin"})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-muted/50",children:[e.jsx("th",{className:"text-left p-3 font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:ze.size===Sr.length&&Sr.length>0,onChange:Ut,className:"rounded border-gray-300 text-primary focus:ring-primary"}),e.jsx("span",{children:"Select"})]})}),e.jsx("th",{className:"text-left p-3 font-medium",children:"User"}),e.jsx("th",{className:"text-left p-3 font-medium",children:"Status"}),e.jsx("th",{className:"text-left p-3 font-medium",children:"Contact"}),D!=="super-admin"&&e.jsx(e.Fragment,{children:D==="faculty"?e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"text-left p-3 font-medium",children:"Faculty Type"}),e.jsx("th",{className:"text-left p-3 font-medium",children:"Technical Skills"}),e.jsx("th",{className:"text-left p-3 font-medium",children:"Payment Type"}),e.jsx("th",{className:"text-left p-3 font-medium",children:"Amount"})]}):e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"text-left p-3 font-medium",children:"College"}),e.jsx("th",{className:"text-left p-3 font-medium",children:"Department"}),e.jsx("th",{className:"text-left p-3 font-medium",children:"Batch"}),D==="student"&&e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"text-left p-3 font-medium",children:"Student ID"}),e.jsx("th",{className:"text-left p-3 font-medium",children:"Current Year"})]})]})}),e.jsx("th",{className:"text-left p-3 font-medium",children:"Password"}),e.jsx("th",{className:"text-left p-3 font-medium",children:"Actions"})]})}),e.jsx("tbody",{children:Sr.map(Z=>{const Ze=Z.role==="faculty"?Pn(Z):[],Et=Ze.length>0;return e.jsxs("tr",{className:`border-b hover:bg-muted/30 ${Et?"relative":""}`,title:Et?`Missing details: ${Ze.join(", ")}`:"",children:[e.jsx("td",{className:"p-3",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("input",{type:"checkbox",checked:ze.has(Z.id),onChange:()=>Gt(Z.id),className:"rounded border-gray-300 text-primary focus:ring-primary"})})}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[Z.role==="faculty"?(()=>{const qt=Pn(Z),ss=qt.length===0;return e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${ss?"bg-green-500":"bg-red-500"}`,title:ss?"All details filled":`Missing details: ${qt.join(", ")}`,children:ss?e.jsx("div",{className:"w-3 h-3 bg-white rounded-full"}):e.jsx(Lr,{className:"h-4 w-4 text-white"})})})():e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${Z.role==="super-admin"?"bg-red-100 text-red-600":Z.role==="college-admin"?"bg-blue-100 text-blue-600":Z.role==="faculty"?"bg-green-100 text-green-600":Z.role==="student"?"bg-purple-100 text-purple-600":"bg-gray-100 text-gray-600"}`,children:Z.role==="super-admin"?e.jsx(Th,{className:"h-4 w-4"}):Z.role==="college-admin"?e.jsx(tr,{className:"h-4 w-4"}):Z.role==="faculty"?e.jsx(Go,{className:"h-4 w-4"}):Z.role==="student"?e.jsx(as,{className:"h-4 w-4"}):e.jsx(Da,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:Z.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:Z.email})]})]})}),e.jsx("td",{className:"p-3",children:Z.role==="faculty"?e.jsx(et,{variant:Z.faculty_status==="Available"?"default":"secondary",children:Z.faculty_status||"Available"}):e.jsx(et,{variant:Z.is_active?"default":"secondary",children:Z.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"p-3",children:e.jsx("div",{className:"text-sm",children:Z.phone||"Not provided"})}),D!=="super-admin"&&e.jsx(e.Fragment,{children:D==="faculty"?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"p-3",children:e.jsx("div",{className:`text-sm ${me(Z.faculty_type)?"text-muted-foreground italic":""}`,children:me(Z.faculty_type)?e.jsxs("span",{className:"flex items-center gap-1 text-orange-600 cursor-help",title:"Missing: Faculty Type",children:[e.jsx(Lr,{className:"h-3 w-3"}),"Not set"]}):Z.faculty_type})}),e.jsx("td",{className:"p-3",children:me(Z.technical_skills)?e.jsxs("span",{className:"flex items-center gap-1 text-sm text-orange-600 cursor-help",title:"Missing: Technical Skills",children:[e.jsx(Lr,{className:"h-3 w-3"}),"Not set"]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[Or(Z.technical_skills).length," skill(s)"]}),e.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>ct(Z.technical_skills),className:"h-6 w-6 p-0",title:"View Technical Skills",children:e.jsx(Ti,{className:"h-3 w-3"})})]})}),e.jsx("td",{className:"p-3",children:e.jsx("div",{className:`text-sm ${me(Z.payment_type)?"text-muted-foreground italic":""}`,children:me(Z.payment_type)?e.jsxs("span",{className:"flex items-center gap-1 text-orange-600 cursor-help",title:"Missing: Payment Type",children:[e.jsx(Lr,{className:"h-3 w-3"}),"Not set"]}):Z.payment_type})}),e.jsx("td",{className:"p-3",children:e.jsx("div",{className:`text-sm ${me(Z.payment_amount)?"text-muted-foreground italic":"font-medium"}`,children:me(Z.payment_amount)?e.jsxs("span",{className:"flex items-center gap-1 text-orange-600 cursor-help",title:"Missing: Payment Amount",children:[e.jsx(Lr,{className:"h-3 w-3"}),"Not set"]}):`${parseFloat(Z.payment_amount).toLocaleString("en-IN")}`})})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(tr,{className:"h-3 w-3 mr-1 text-muted-foreground"}),xr(Z.college_id)]})}),e.jsx("td",{className:"p-3",children:e.jsx("div",{className:"text-sm text-muted-foreground",children:zr(Z.department)})}),e.jsx("td",{className:"p-3",children:e.jsx("div",{className:"text-sm text-muted-foreground",children:Z.batch||"Not set"})}),D==="student"&&e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"p-3",children:e.jsx("div",{className:"text-sm font-medium",children:Z.student_id||"Not set"})}),e.jsx("td",{className:"p-3",children:e.jsx("div",{className:"text-sm text-muted-foreground",children:Z.joining_year?xs(Z.joining_year,Z.final_year):"Not set"})})]})]})}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("code",{className:"text-xs bg-muted px-2 py-1 rounded",children:Ie[Z.id]?(()=>Z.plain_password?Z.plain_password:Z.password?Z.password.startsWith("$2a$")||Z.password.startsWith("$2b$")||Z.password.startsWith("$2y$")||Z.password.length>60?e.jsx("span",{className:"text-orange-600 italic text-[10px]",children:"Encrypted - Change password to view"}):Z.password:"Not set")():""}),e.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>Cr(Z.id),className:"h-6 w-6 p-0",title:Ie[Z.id]?"Hide Password":"Show Password",children:Ie[Z.id]?e.jsx(Wo,{className:"h-3 w-3"}):e.jsx(Ss,{className:"h-3 w-3"})}),Ie[Z.id]&&Z.plain_password&&e.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>As(Z.plain_password),className:"h-6 w-6 p-0",title:"Copy Password to Clipboard",children:e.jsx(Ho,{className:"h-3 w-3"})})]})}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>cs(Z.id),title:Z.is_active?"Deactivate User":"Activate User",children:Z.is_active?e.jsx(Wo,{className:"h-4 w-4"}):e.jsx(Ss,{className:"h-4 w-4"})}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>wn(Z),title:"Edit User",children:e.jsx(wr,{className:"h-4 w-4"})}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>Hs(Z),title:"Change Password",children:e.jsx(v0,{className:"h-4 w-4"})}),e.jsxs(Uo,{children:[e.jsx(V0,{asChild:!0,children:e.jsx(ee,{variant:"outline",size:"sm",title:"Delete User",children:e.jsx(Ds,{className:"h-4 w-4"})})}),e.jsxs(Mi,{children:[e.jsxs(Ii,{children:[e.jsx(Fi,{children:"Delete User"}),e.jsxs(Li,{children:["Are you sure you want to delete ",Z.name,"? This action cannot be undone."]})]}),e.jsxs(Oi,{children:[e.jsx(Ko,{children:"Cancel"}),e.jsx(Di,{onClick:()=>Qt(Z.id),children:"Delete"})]})]})]})]})})]},Z.id)})})]}),Sr.length===0&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:["No ",D.replace("-"," ")," users found matching your criteria."]})]})})})]}):e.jsxs(Re,{children:[e.jsx(lt,{children:e.jsxs(mt,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(as,{className:"h-5 w-5"}),e.jsx("span",{children:"User Roles"})]}),e.jsxs(ee,{onClick:()=>S(!0),size:"sm",children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),"Add User"]})]})}),e.jsx(De,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(Re,{className:"cursor-pointer hover:shadow-lg transition-all duration-200 hover:scale-105 border-2 hover:border-red-200",onClick:()=>V("super-admin"),children:[e.jsxs(lt,{className:"text-center pb-3",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 text-red-600 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(Th,{className:"h-8 w-8"})}),e.jsx(mt,{className:"text-lg",children:"Super Admin"}),e.jsxs(ts,{children:[t.filter(Z=>Z.role==="super-admin").length," users"]})]}),e.jsx(De,{className:"text-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"System administrators with full access"})})]}),e.jsxs(Re,{className:"cursor-pointer hover:shadow-lg transition-all duration-200 hover:scale-105 border-2 hover:border-blue-200",onClick:()=>V("college-admin"),children:[e.jsxs(lt,{className:"text-center pb-3",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(tr,{className:"h-8 w-8"})}),e.jsx(mt,{className:"text-lg",children:"College Admin"}),e.jsxs(ts,{children:[t.filter(Z=>Z.role==="college-admin").length," users"]})]}),e.jsx(De,{className:"text-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"College-level administrators"})})]}),e.jsxs(Re,{className:"cursor-pointer hover:shadow-lg transition-all duration-200 hover:scale-105 border-2 hover:border-green-200",onClick:()=>V("faculty"),children:[e.jsxs(lt,{className:"text-center pb-3",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(Go,{className:"h-8 w-8"})}),e.jsx(mt,{className:"text-lg",children:"Faculty"}),e.jsxs(ts,{children:[t.filter(Z=>Z.role==="faculty").length," users"]})]}),e.jsx(De,{className:"text-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Teaching staff and instructors"})})]}),e.jsxs(Re,{className:"cursor-pointer hover:shadow-lg transition-all duration-200 hover:scale-105 border-2 hover:border-purple-200",onClick:()=>V("student"),children:[e.jsxs(lt,{className:"text-center pb-3",children:[e.jsx("div",{className:"w-16 h-16 bg-purple-100 text-purple-600 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(as,{className:"h-8 w-8"})}),e.jsx(mt,{className:"text-lg",children:"Students"}),e.jsxs(ts,{children:[t.filter(Z=>Z.role==="student").length," users"]})]}),e.jsx(De,{className:"text-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enrolled students"})})]})]})})]})}),e.jsx(Ht,{open:w,onOpenChange:_,children:e.jsxs(Zt,{className:"max-w-4xl w-[95vw] max-h-[90vh] overflow-y-auto",children:[e.jsxs(Jt,{children:[e.jsx(es,{className:"text-2xl font-bold",children:"Edit User"}),e.jsx(ps,{className:"text-muted-foreground",children:"Update user information and permissions"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary border-b pb-2",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"edit-name",className:"text-sm font-medium",children:"Full Name *"}),e.jsx(Ye,{id:"edit-name",value:Ge.name,onChange:Z=>{const Ze=Z.target.value;J({...Ge,name:Ze})},onBlur:Z=>{const Ze=Z.target.value.toLowerCase().replace(/\b\w/g,Et=>Et.toUpperCase());J({...Ge,name:Ze})},placeholder:"Enter full name",className:"h-10"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Name will be automatically formatted to Title Case"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"edit-email",className:"text-sm font-medium",children:"Email Address *"}),e.jsx(Ye,{id:"edit-email",type:"email",value:Ge.email,onChange:Z=>{const Ze=Z.target.value;J({...Ge,email:Ze})},onBlur:Z=>{const Ze=Z.target.value.toLowerCase().trim();J({...Ge,email:Ze})},placeholder:"Enter email address",className:"h-10"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Email will be automatically converted to lowercase"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary border-b pb-2",children:"Role & Institution"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"edit-role",className:"text-sm font-medium",children:"User Role *"}),e.jsxs(At,{value:Ge.role,onValueChange:Z=>J({...Ge,role:Z}),children:[e.jsx(St,{className:"h-10",children:e.jsx(Rt,{placeholder:"Select user role"})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"student",children:"Student"}),e.jsx(Te,{value:"faculty",children:"Faculty"}),e.jsx(Te,{value:"college-admin",children:"College Admin"}),e.jsx(Te,{value:"super-admin",children:"Super Admin"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"edit-college",className:"text-sm font-medium",children:"College *"}),e.jsxs(At,{value:Ge.college_id,onValueChange:Z=>J({...Ge,college_id:Z}),children:[e.jsx(St,{className:"h-10",children:e.jsx(Rt,{placeholder:"Select college"})}),e.jsx(Ct,{children:Array.isArray(s)&&s.map(Z=>e.jsx(Te,{value:Z.id,children:Z.name},Z.id))})]}),Ge.role==="student"&&Ge.college_id&&h&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1 flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-primary mr-2"}),"Loading departments for ",(Mn=s.find(Z=>Z.id===Ge.college_id))==null?void 0:Mn.name,"..."]})]})]})]}),Ge.role==="student"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary border-b pb-2",children:"Student Details"}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," Student roll numbers will be automatically stored in CAPS format for consistency."]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"edit-department",className:"text-sm font-medium",children:"Department *"}),e.jsxs(At,{value:Ge.department,onValueChange:Z=>J({...Ge,department:Z}),children:[e.jsx(St,{className:"h-10",children:e.jsx(Rt,{placeholder:"Select department"})}),e.jsx(Ct,{children:h?e.jsx(Te,{value:"loading",disabled:!0,children:"Loading departments..."}):c.length===0?e.jsx(Te,{value:"no-departments",disabled:!0,children:"No departments found for this college"}):c.map(Z=>e.jsx(Te,{value:Z.name,children:Z.name},Z.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"edit-joining_year",className:"text-sm font-medium",children:"Joining Year"}),e.jsxs(At,{value:Ge.joining_year,onValueChange:Z=>{const Ze=parseInt(Z);J({...Ge,joining_year:Ze,final_year:Ze+4})},children:[e.jsx(St,{className:"h-10",children:e.jsx(Rt,{placeholder:"Select joining year"})}),e.jsx(Ct,{children:Array.from({length:10},(Z,Ze)=>{const Et=new Date().getFullYear()-5+Ze;return e.jsxs(Te,{value:Et.toString(),children:[Et," - ",Et+1]},Et)})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"edit-final_year",className:"text-sm font-medium",children:"Final Year"}),e.jsxs(At,{value:Ge.final_year,onValueChange:Z=>J({...Ge,final_year:parseInt(Z)}),children:[e.jsx(St,{className:"h-10",children:e.jsx(Rt,{placeholder:"Select final year"})}),e.jsx(Ct,{children:Array.from({length:8},(Z,Ze)=>{const Et=Ge.joining_year||new Date().getFullYear()+Ze;return e.jsxs(Te,{value:Et.toString(),children:[Et," - ",Et+1]},Et)})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"edit-admission_type",className:"text-sm font-medium",children:"Admission Type"}),e.jsxs(At,{value:Ge.admission_type||"regular",onValueChange:Z=>{J({...Ge,admission_type:Z,joining_year:Z==="lateral"?Ge.joining_year+1:Ge.joining_year,final_year:Z==="lateral"?Ge.final_year+1:Ge.final_year})},children:[e.jsx(St,{className:"h-10",children:e.jsx(Rt,{placeholder:"Select admission type"})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"regular",children:"Regular"}),e.jsx(Te,{value:"lateral",children:"Lateral"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Lateral students get +1 year added to their joining year for academic calculations"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"edit-student_id",className:"text-sm font-medium",children:"Student ID (Roll Number)"}),e.jsx(Ye,{id:"edit-student_id",value:Ge.student_id,onChange:Z=>{const Ze=Z.target.value.toUpperCase();J({...Ge,student_id:Ze})},onBlur:Z=>{const Ze=Z.target.value.toUpperCase();J({...Ge,student_id:Ze})},placeholder:"Enter student ID",className:"h-10",maxLength:50}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Student roll number will be stored in CAPS."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"edit-batch",className:"text-sm font-medium",children:"Batch"}),e.jsxs(At,{value:Ge.batch||"no-batch",onValueChange:Z=>J({...Ge,batch:Z==="no-batch"?"":Z}),children:[e.jsx(St,{className:"h-10",children:e.jsx(Rt,{placeholder:"Select batch"})}),e.jsx(Ct,{children:p?e.jsx(Te,{value:"loading",disabled:!0,children:"Loading batches..."}):l.length===0?e.jsx(Te,{value:"no-batches",disabled:!0,children:"No batches found for this college"}):e.jsxs(e.Fragment,{children:[e.jsx(Te,{value:"",children:"No batch (optional)"}),l.map(Z=>e.jsxs(Te,{value:Z.name,children:[Z.name," (",Z.code,")"]},Z.id))]})})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:p?"Loading available batches...":l.length===0?"No batches available for this college":"Select from available batches or leave empty"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary border-b pb-2",children:"Additional Information"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"edit-phone",className:"text-sm font-medium",children:"Phone Number"}),e.jsx(Ye,{id:"edit-phone",value:Ge.phone,onChange:Z=>J({...Ge,phone:Z.target.value}),placeholder:"Enter phone number",className:"h-10"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"edit-is_active",className:"text-sm font-medium",children:"Account Status"}),e.jsx("div",{className:"flex items-center space-x-3 pt-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"edit-is_active",checked:Ge.is_active,onChange:Z=>J({...Ge,is_active:Z.target.checked}),className:"rounded border-gray-300 text-primary focus:ring-primary"}),e.jsx(Se,{htmlFor:"edit-is_active",className:"text-sm",children:"Active Account"})]})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Active accounts can log in immediately. Inactive accounts are suspended."})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsxs(ee,{onClick:Bt,className:"flex-1 h-11 text-base font-medium",children:[e.jsx(no,{className:"h-4 w-4 mr-2"}),"Update User"]}),e.jsx(ee,{variant:"outline",onClick:()=>_(!1),className:"flex-1 h-11 text-base font-medium",children:"Cancel"})]})]})]})}),e.jsx(Ht,{open:j,onOpenChange:N,children:e.jsxs(Zt,{className:"max-w-md",children:[e.jsxs(Jt,{children:[e.jsx(es,{children:"Change Password"}),e.jsxs(ps,{children:["Change password for ",E==null?void 0:E.name," (",E==null?void 0:E.email,")"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"newPassword",children:"New Password"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(Ye,{id:"newPassword",type:pe?"text":"password",value:Oe,onChange:Z=>Ee(Z.target.value),placeholder:"Enter new password",className:"pr-10"}),e.jsx(ee,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>Ae(!pe),children:pe?e.jsx(Wo,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Ss,{className:"h-4 w-4 text-muted-foreground"})})]}),Oe&&e.jsxs("div",{className:"mt-3 space-y-1.5 text-sm",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Password Requirements:"}),(()=>{const{validations:Z}=Cs(Oe);return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:`flex items-center gap-2 ${Z.minLength?"text-green-600":"text-gray-500"}`,children:[Z.minLength?e.jsx(Ar,{className:"h-3.5 w-3.5"}):e.jsx(gl,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:"At least 8 characters"})]}),e.jsxs("div",{className:`flex items-center gap-2 ${Z.hasUpperCase?"text-green-600":"text-gray-500"}`,children:[Z.hasUpperCase?e.jsx(Ar,{className:"h-3.5 w-3.5"}):e.jsx(gl,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:"One uppercase letter (A-Z)"})]}),e.jsxs("div",{className:`flex items-center gap-2 ${Z.hasLowerCase?"text-green-600":"text-gray-500"}`,children:[Z.hasLowerCase?e.jsx(Ar,{className:"h-3.5 w-3.5"}):e.jsx(gl,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:"One lowercase letter (a-z)"})]}),e.jsxs("div",{className:`flex items-center gap-2 ${Z.hasNumber?"text-green-600":"text-gray-500"}`,children:[Z.hasNumber?e.jsx(Ar,{className:"h-3.5 w-3.5"}):e.jsx(gl,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:"One number (0-9)"})]}),e.jsxs("div",{className:`flex items-center gap-2 ${Z.hasSpecialChar?"text-green-600":"text-gray-500"}`,children:[Z.hasSpecialChar?e.jsx(Ar,{className:"h-3.5 w-3.5"}):e.jsx(gl,{className:"h-3.5 w-3.5"}),e.jsxs("span",{children:['One special character (!@#$%^&*(),.?":',"|<>)"]})]})]})})()]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(ee,{variant:"outline",onClick:()=>{N(!1),Ee(""),Ae(!1),I(null)},children:"Cancel"}),e.jsxs(ee,{onClick:Fs,disabled:!Oe||!Cs(Oe).isValid,children:[e.jsx(no,{className:"h-4 w-4 mr-2"}),"Change Password"]})]})]})]})}),e.jsx(Ht,{open:ue,onOpenChange:oe,children:e.jsxs(Zt,{className:"max-w-md",children:[e.jsxs(Jt,{children:[e.jsxs(es,{className:"flex items-center gap-2",children:[e.jsx(Gr,{className:"h-5 w-5 text-primary"}),"Technical Skills"]}),e.jsx(ps,{children:"List of technical skills for this faculty member"})]}),e.jsx("div",{className:"space-y-4",children:_e&&Or(_e).length>0?e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:Or(_e).map((Z,Ze)=>e.jsx(et,{variant:"outline",className:"text-sm py-1 px-3",children:Z},Ze))}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Total: ",Or(_e).length," skill(s)"]})]}):e.jsxs("div",{className:"text-center py-4 text-muted-foreground",children:[e.jsx(Lr,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No technical skills specified"})]})})]})}),e.jsx(Uo,{open:ie,onOpenChange:ae,children:e.jsxs(Mi,{className:"max-w-md",children:[e.jsxs(Ii,{children:[e.jsxs(Fi,{className:"flex items-center gap-2",children:[e.jsx(v0,{className:"h-5 w-5 text-green-600"}),"Password Changed Successfully"]}),e.jsxs(Li,{className:"space-y-4",children:[e.jsx("p",{children:"The password has been changed and stored securely in the database (hashed)."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{className:"text-sm font-medium",children:"New Password (Plain Text):"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 px-3 py-2 bg-muted rounded-md font-mono text-sm border",children:st}),e.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>{As(st||"")},className:"shrink-0",children:[e.jsx(Ho,{className:"h-4 w-4 mr-1"}),"Copy"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:" This is the only time the password will be shown in plain text. Please copy it now if needed."})]})]})]}),e.jsx(Oi,{children:e.jsx(Di,{onClick:()=>{ae(!1),qe(null)},children:"Got it"})})]})}),e.jsx(Ht,{open:Ue,onOpenChange:re,children:e.jsxs(Zt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Jt,{children:[e.jsx(es,{className:"text-2xl font-bold",children:"Batch Mapping"}),e.jsx(ps,{className:"text-muted-foreground",children:"Map multiple students to a specific batch using Excel files or comma-separated roll numbers"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary border-b pb-2",children:"Select Target"}),ye&&Fe&&e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Current Batch Information"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-blue-700",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"College:"})," ",(Ws=s.find(Z=>Z.id===ye))==null?void 0:Ws.name]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Batch:"})," ",Fe]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Current Students:"})," ",t.filter(Z=>Z.role==="student"&&Z.college_id===ye&&Z.batch===Fe).length]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Total Students in College:"})," ",t.filter(Z=>Z.role==="student"&&Z.college_id===ye).length]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"batch-mapping-college",className:"text-sm font-medium",children:"College *"}),e.jsxs(At,{value:ye,onValueChange:Z=>{ke(Z),Ke(""),Z?Le(Z):i([])},children:[e.jsx(St,{className:"h-10",children:e.jsx(Rt,{placeholder:"Select college"})}),e.jsx(Ct,{children:s.map(Z=>e.jsx(Te,{value:Z.id.toString(),children:Z.name},Z.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"batch-mapping-batch",className:"text-sm font-medium",children:"Batch *"}),e.jsxs(At,{value:Fe,onValueChange:Z=>Ke(Z),disabled:!ye,children:[e.jsx(St,{className:"h-10",children:e.jsx(Rt,{placeholder:ye?"Select batch":"Select college first"})}),e.jsx(Ct,{children:p?e.jsx(Te,{value:"loading",disabled:!0,children:"Loading batches..."}):l.length===0?e.jsx(Te,{value:"no-batches",disabled:!0,children:"No batches found for this college"}):l.map(Z=>e.jsxs(Te,{value:Z.name,children:[Z.name," (",Z.code,")"]},Z.id))})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary border-b pb-2",children:"Student Roll Numbers"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Se,{className:"text-sm font-medium",children:"Method 1: Upload Excel File"}),e.jsxs("div",{className:"group relative",children:[e.jsx("input",{id:"batch-mapping-file",type:"file",accept:".xlsx,.xls",onChange:Z=>{const Ze=Z.target.files[0];Ne(Ze),he("")},className:"hidden"}),e.jsx(Se,{htmlFor:"batch-mapping-file",className:"flex flex-col items-center justify-center w-full h-24 border-2 border-dashed rounded-lg transition-all duration-200 group-hover:scale-[1.02] group-hover:shadow-sm border-muted-foreground/30 bg-muted/20 hover:bg-muted/30 hover:border-muted-foreground/50 cursor-pointer",children:je?e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 text-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-100 flex items-center justify-center",children:e.jsx(p1,{className:"w-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-foreground",children:je.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:je.size?`${(je.size/1024).toFixed(1)} KB`:"0 KB"})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center bg-primary/10 group-hover:bg-primary/20",children:e.jsx(va,{className:"w-4 w-4 text-primary"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium",children:"Upload Excel File"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Click or drag & drop (should contain roll numbers in first column)"})]})]})})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Excel file should have roll numbers in the first column. First row will be treated as header."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Se,{className:"text-sm font-medium",children:"Method 2: Comma-Separated Values"}),e.jsx(ms,{value:Qe,onChange:Z=>{he(Z.target.value),Ne(null),i([])},placeholder:"Enter roll numbers separated by commas (e.g., STU001, STU002, STU003)",rows:4,className:"resize-none"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter roll numbers separated by commas. Roll numbers will be automatically converted to uppercase."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>{const Z=new ad.Workbook,Ze=Z.addWorksheet("Roll Numbers");Ze.addRow(["Roll Number"]),Ze.addRow(["STU001"]),Ze.addRow(["STU002"]),Ze.addRow(["STU003"]),Ze.getRow(1).eachCell(qt=>{qt.font={bold:!0},qt.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFE0E0E0"}}}),Z.xlsx.writeBuffer().then(qt=>{const ss=new Blob([qt],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),is=window.URL.createObjectURL(ss),Bs=document.createElement("a");Bs.href=is,Bs.setAttribute("download","batch_mapping_template.xlsx"),document.body.appendChild(Bs),Bs.click(),Bs.remove(),window.URL.revokeObjectURL(is),yt({title:"Template Downloaded",description:"Excel template for batch mapping downloaded successfully"})})},children:[e.jsx(Zs,{className:"h-4 w-4 mr-2"}),"Download Template"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Download Excel template with proper format for roll numbers"})]})]}),ye&&Fe&&e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsxs("h4",{className:"text-lg font-semibold text-primary",children:["Current Students in ",Fe]}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-2 font-medium text-xs",children:"Roll Number"}),e.jsx("th",{className:"text-left p-2 font-medium text-xs",children:"Student Name"}),e.jsx("th",{className:"text-left p-2 font-medium text-xs",children:"Department"}),e.jsx("th",{className:"text-left p-2 font-medium text-xs",children:"Joining Year"})]})}),e.jsx("tbody",{children:t.filter(Z=>Z.role==="student"&&Z.college_id===ye&&Z.batch===Fe).map((Z,Ze)=>e.jsxs("tr",{className:"border-t hover:bg-muted/30",children:[e.jsx("td",{className:"p-2 text-xs font-medium",children:Z.student_id}),e.jsx("td",{className:"p-2 text-xs",children:Z.name}),e.jsx("td",{className:"p-2 text-xs",children:Z.department}),e.jsx("td",{className:"p-2 text-xs",children:Z.joining_year})]},Z.id))})]})})}),t.filter(Z=>Z.role==="student"&&Z.college_id===ye&&Z.batch===Fe).length===0&&e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No students currently assigned to this batch"})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsx(ee,{onClick:Tt,disabled:!ye||!Fe||!je&&!Qe.trim()||gt,className:"flex-1 h-11 text-base font-medium",children:gt?e.jsxs(e.Fragment,{children:[e.jsx(Tr,{className:"h-4 w-4 mr-2 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(as,{className:"h-4 w-4 mr-2"}),"Map Students to Batch"]})}),e.jsx(ee,{variant:"outline",onClick:()=>re(!1),className:"flex-1 h-11 text-base font-medium",children:"Cancel"})]}),dt&&e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-lg font-semibold text-primary",children:"Mapping Results"}),e.jsxs(ee,{variant:"outline",size:"sm",onClick:vt,children:[e.jsx(Lo,{className:"h-4 w-4 mr-2"}),"Start New Mapping"]})]}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-2 font-medium text-xs",children:"Roll Number"}),e.jsx("th",{className:"text-left p-2 font-medium text-xs",children:"Student Name"}),e.jsx("th",{className:"text-left p-2 font-medium text-xs",children:"Status"}),e.jsx("th",{className:"text-left p-2 font-medium text-xs",children:"Message"})]})}),e.jsx("tbody",{children:tt.map((Z,Ze)=>e.jsxs("tr",{className:`border-t ${Z.success?"bg-green-50 hover:bg-green-100":"bg-red-50 hover:bg-red-100"}`,children:[e.jsx("td",{className:"p-2 text-xs font-medium",children:Z.rollNumber}),e.jsx("td",{className:"p-2 text-xs",children:Z.student||"N/A"}),e.jsx("td",{className:"p-2 text-xs",children:Z.success?e.jsxs("div",{className:"flex items-center gap-1 text-green-700",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"font-medium",children:"Success"})]}):e.jsxs("div",{className:"flex items-center gap-1 text-red-700",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),e.jsx("span",{className:"font-medium",children:"Failed"})]})}),e.jsx("td",{className:"p-2 text-xs",children:Z.success?Z.message:Z.error})]},Ze))})]})})}),e.jsxs("div",{className:"p-4 border rounded-lg bg-muted/20",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsxs("span",{className:"text-green-700",children:["Success: ",tt.filter(Z=>Z.success).length]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),e.jsxs("span",{className:"text-red-700",children:["Failed: ",tt.filter(Z=>!Z.success).length]})]})]}),tt.some(Z=>!Z.success)&&e.jsxs("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded text-sm",children:[e.jsx("h5",{className:"font-medium text-red-800 mb-2",children:"Failed Mappings:"}),e.jsx("ul",{className:"space-y-1 text-red-700",children:tt.filter(Z=>!Z.success).map((Z,Ze)=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:Z.rollNumber}),e.jsxs("span",{className:"text-red-600",children:["- ",Z.error]})]},Ze))})]})]})]})]})]})}),e.jsx(Uo,{open:Ve,onOpenChange:ot,children:e.jsxs(Mi,{children:[e.jsxs(Ii,{children:[e.jsx(Fi,{children:"Delete Multiple Users"}),e.jsxs(Li,{children:["Are you sure you want to delete ",ze.size," selected users? This action cannot be undone."]})]}),e.jsxs(Oi,{children:[e.jsx(Ko,{children:"Cancel"}),e.jsx(Di,{onClick:gs,disabled:xt,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:xt?e.jsxs(e.Fragment,{children:[e.jsx(Tr,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):`Delete ${ze.size} Users`})]})]})}),e.jsx(Ht,{open:at,onOpenChange:Be,children:e.jsxs(Zt,{className:"max-w-7xl w-[95vw] max-h-[95vh] overflow-y-auto",children:[e.jsxs(Jt,{children:[e.jsx(es,{className:"text-2xl font-bold",children:$==="super-admin"?"Bulk Upload Super Admins":"Bulk Upload Students"}),e.jsx(ps,{className:"text-muted-foreground",children:$==="super-admin"?"Upload multiple super admin users using Excel files. Download the template first, fill it with admin data, then upload.":"Upload multiple students using Excel files. Download the template first, fill it with student data, then upload."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-gradient-to-r from-green-50 to-emerald-50 border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(as,{className:"h-5 w-5 text-green-600"}),e.jsx(Se,{className:"text-sm font-medium text-green-800",children:"Select Upload Type"})]}),e.jsx("div",{className:"text-sm text-green-700 mb-4",children:e.jsx("p",{children:"Choose the type of users you want to upload."})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"bulk-role",className:"text-sm font-medium text-green-700",children:"User Type *"}),e.jsxs(At,{value:$,onValueChange:Z=>{Y(Z),O(""),K(""),X("no-batch"),ne([]),be(!1),G(null)},children:[e.jsx(St,{className:"border-green-200 focus:border-green-400",children:e.jsx(Rt,{placeholder:"Select user type"})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"super-admin",children:"Super Admin"}),e.jsx(Te,{value:"student",children:"Student"})]})]})]})})]}),e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-gradient-to-r from-purple-50 to-indigo-50 border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(as,{className:"h-5 w-5 text-purple-600"}),e.jsx(Se,{className:"text-sm font-medium text-purple-800",children:$==="super-admin"?"Super Admin Data Upload":"Student Data Upload"})]}),e.jsxs("div",{className:"text-sm text-purple-700",children:[e.jsx("p",{children:$==="super-admin"?"This feature allows you to bulk upload multiple super admin users at once.":"This feature allows you to bulk upload multiple students at once."}),e.jsx("p",{className:"mt-1",children:$==="super-admin"?"The system will create super admin accounts with the provided information.":"The system will create student accounts with the provided information."})]})]}),$==="student"&&e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(tr,{className:"h-5 w-5 text-blue-600"}),e.jsx(Se,{className:"text-sm font-medium text-blue-800",children:"Select Institution for Student Assignment"})]}),e.jsx("div",{className:"text-sm text-blue-700 mb-4",children:e.jsx("p",{children:"Select the institution details where the students will be assigned."})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"bulk-college",className:"text-sm font-medium text-blue-700",children:"College *"}),e.jsxs(At,{value:F,onValueChange:Z=>{O(Z),K(""),ne([]),be(!1),Z!=="all"&&le(Z)},children:[e.jsx(St,{className:"border-blue-200 focus:border-blue-400",children:e.jsx(Rt,{placeholder:"Select college"})}),e.jsx(Ct,{children:s.map(Z=>e.jsx(Te,{value:Z.id.toString(),children:Z.name},Z.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"bulk-department",className:"text-sm font-medium text-blue-700",children:"Department *"}),e.jsxs(At,{value:W,onValueChange:Z=>{K(Z),X("no-batch"),ne([]),be(!1)},disabled:!F||F==="all",children:[e.jsx(St,{className:"border-blue-200 focus:border-blue-400",children:e.jsx(Rt,{placeholder:!F||F==="all"?"Select college first":"Select department"})}),e.jsx(Ct,{children:c.map(Z=>e.jsx(Te,{value:Z.name,children:Z.name},Z.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"bulk-batch",className:"text-sm font-medium text-blue-700",children:"Batch (Optional)"}),e.jsxs(At,{value:Q,onValueChange:Z=>{X(Z==="no-batch"?"":Z),ne([]),be(!1)},disabled:$==="student"&&(!F||!W),children:[e.jsx(St,{className:"border-blue-200 focus:border-blue-400",children:e.jsx(Rt,{placeholder:!F||!W?"Select college & department first":"Select batch (optional)"})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"no-batch",children:"No batch (optional)"}),l.map(Z=>e.jsxs(Te,{value:Z.name,children:[Z.name," (",Z.code,")"]},Z.id))]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Se,{className:"text-sm font-medium",children:"Bulk Upload Actions"}),e.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>bt(!Pt),className:"text-xs",children:Pt?"Hide Help":"Show Help"})]}),Pt&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-sm",children:[e.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Template Format Help"}),e.jsx("div",{className:"space-y-2 text-blue-700",children:$==="super-admin"?e.jsxs(e.Fragment,{children:[e.jsx("p",{children:e.jsx("strong",{children:"Required Fields (marked with *):"})}),e.jsxs("ul",{className:"list-disc list-inside ml-4 space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Name *"})," - Full name of the super admin"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Email ID *"})," - Email address (must be unique)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Contact"})," - Phone number (optional)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Password"})," - Login password (optional, will be auto-generated if empty)"]})]}),e.jsx("p",{children:e.jsx("strong",{children:"Important Notes:"})}),e.jsxs("ul",{className:"list-disc list-inside ml-4 space-y-1",children:[e.jsx("li",{children:"Email addresses must be unique in the system"}),e.jsx("li",{children:"If password is not provided, a default password will be generated"}),e.jsx("li",{children:"All super admins will have full system access"})]}),e.jsxs("p",{className:"text-xs mt-2",children:[e.jsx("strong",{children:"Column Order:"})," Name, Email ID, Contact, Password"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{children:e.jsx("strong",{children:"Required Fields (marked with *):"})}),e.jsxs("ul",{className:"list-disc list-inside ml-4 space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Name *"})," - Full name of the student"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Email ID *"})," - Email address (must be unique)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Phone Number"})," - Contact number (optional)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Roll Number *"})," - Student's roll number/ID (must be unique)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Admission Type"})," - Regular or lateral (defaults to regular)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Batch"})," - Student batch (optional)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Joining Year *"})," - Year student joined"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Ending Year *"})," - Expected graduation year"]})]}),e.jsx("p",{children:e.jsx("strong",{children:"Important Notes:"})}),e.jsxs("ul",{className:"list-disc list-inside ml-4 space-y-1",children:[e.jsx("li",{children:"Email addresses and roll numbers must be unique in the system"}),e.jsx("li",{children:"Students will be assigned to the selected college and department"}),e.jsx("li",{children:"If batch is not specified, it will use the selected batch or be empty"}),e.jsx("li",{children:"Ending year must be greater than joining year"})]}),e.jsxs("p",{className:"text-xs mt-2",children:[e.jsx("strong",{children:"Column Order:"})," Name, Email ID, Phone Number, Roll Number, Admission Type, Batch, Joining Year, Ending Year"]})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs(ee,{variant:"outline",onClick:()=>us(),disabled:$==="student"&&(!F||!W),className:"w-full h-24 flex flex-col items-center justify-center gap-2 p-3",children:[e.jsx(Zs,{className:"h-6 w-6 text-primary"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium",children:"Download Template"}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[$==="super-admin"?"Super admin data format":"Student data format"," with required fields marked with *"]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-2 text-left",children:$==="super-admin"?e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Required:"})," Name, Email ID"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Optional:"})," Contact, Password"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Required:"})," Name, Email ID, Roll Number, Joining Year, Ending Year"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Optional:"})," Phone Number, Admission Type, Batch"]})]})})]})]}),$==="student"&&(!F||!W)&&e.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:"Please select college and department first"})]}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"group relative",children:[e.jsx("input",{id:"file-upload",type:"file",accept:".xlsx,.xls",onChange:Z=>{const Ze=Z.target.files[0];G(Ze),ne([]),be(!1)},disabled:$==="student"&&(!F||!W),className:"hidden"}),e.jsx(Se,{htmlFor:"file-upload",className:`flex flex-col items-center justify-center w-full h-24 border-2 border-dashed rounded-lg transition-all duration-200 group-hover:scale-[1.02] group-hover:shadow-sm ${$==="student"&&(!F||!W)?"border-muted-foreground/20 bg-muted/10 cursor-not-allowed opacity-50":"border-muted-foreground/30 bg-muted/20 hover:bg-muted/30 hover:border-muted-foreground/50 cursor-pointer"}`,children:H?e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 text-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-100 flex items-center justify-center",children:e.jsx(p1,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-foreground",children:H?H.name:"No file"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:H?`${(H.size/1024).toFixed(1)} KB`:"0 KB"})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center transition-colors ${$==="student"&&(!F||!W)?"bg-muted-foreground/20":"bg-primary/10 group-hover:bg-primary/20"}`,children:e.jsx(va,{className:`w-4 h-4 ${$==="student"&&(!F||!W)?"text-muted-foreground":"text-primary"}`})}),$==="student"&&F&&W?e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-primary rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs text-primary-foreground font-medium",children:"+"})}):null]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium",children:"Upload File"}),$==="student"&&(!F||!W)?e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Select college and department first"}):e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Click or drag & drop"})]})]})})]})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx(ee,{onClick:Nr,disabled:!H||te||$==="student"&&(!F||!W),className:`w-full h-24 flex flex-col items-center justify-center gap-2 p-3 transition-colors ${!H||te||$==="student"&&(!F||!W)?"bg-muted text-muted-foreground cursor-not-allowed":"bg-primary hover:bg-primary/90"}`,children:te?e.jsxs(e.Fragment,{children:[e.jsx(Tr,{className:"h-6 w-6 animate-spin"}),e.jsx("p",{className:"font-medium",children:"Parsing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(va,{className:"h-6 w-6"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium",children:"Parse File"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:H?$==="student"&&(!F||!W)?"Select college & department first":"Ready to parse":"Select file first"})]})]})})})]}),e.jsxs("div",{className:"mt-6 p-4 border rounded-lg bg-muted/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(Se,{className:"text-sm font-medium",children:ge?"Template Format & Parsed Data":""}),ge&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ee,{variant:"outline",size:"sm",onClick:bn,children:[e.jsx(Lo,{className:"h-4 w-4 mr-2"}),"Reset"]}),e.jsx(ee,{onClick:Gn,disabled:te,size:"sm",className:"bg-green-600 hover:bg-green-700",children:te?e.jsxs(e.Fragment,{children:[e.jsx(Tr,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(as,{className:"h-4 w-4 mr-2"}),"Create Users (",xe.length,")"]})})]})]}),ge?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"border rounded overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-2 font-medium text-xs",children:"Name"}),e.jsx("th",{className:"text-left p-2 font-medium text-xs",children:"Email"}),e.jsx("th",{className:"text-left p-2 font-medium text-xs",children:"Roll Number"}),e.jsx("th",{className:"text-left p-2 font-medium text-xs",children:"Phone"}),e.jsx("th",{className:"text-left p-2 font-medium text-xs",children:"Batch"}),e.jsx("th",{className:"text-left p-2 font-medium text-xs",children:"Admission Type"}),e.jsx("th",{className:"text-left p-2 font-medium text-xs",children:"Joining Year"}),e.jsx("th",{className:"text-left p-2 font-medium text-xs",children:"Ending Year"}),He&&e.jsx("th",{className:"text-left p-2 font-medium text-xs",children:"Status"})]})}),e.jsx("tbody",{children:xe.map((Z,Ze)=>{const Et=He?we[Ze]:null,qt=Et?Et.success?"border-t bg-green-50 hover:bg-green-100":"border-t bg-red-50 hover:bg-red-100":"border-t hover:bg-muted/30";return e.jsxs("tr",{className:qt,children:[e.jsx("td",{className:"p-2 text-xs font-medium",children:Z.name||""}),e.jsx("td",{className:"p-2 text-xs",children:Z.email||""}),e.jsx("td",{className:"p-2 text-xs font-medium",children:Z.student_id||""}),e.jsx("td",{className:"p-2 text-xs",children:Z.phone||"-"}),e.jsx("td",{className:"p-2 text-xs",children:Z.batch?e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:Z.batch}):e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsx("td",{className:"p-2 text-xs",children:Z.admission_type?e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:Z.admission_type}):e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsx("td",{className:"p-2 text-xs",children:Z.joining_year||""}),e.jsx("td",{className:"p-2 text-xs",children:Z.final_year||""}),He&&e.jsx("td",{className:"p-2 text-xs",children:Et?Et.success?e.jsxs("div",{className:"flex items-center gap-1 text-green-700",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"font-medium",children:"Success"})]}):e.jsxs("div",{className:"flex items-center gap-1 text-red-700",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),e.jsx("span",{className:"font-medium",children:"Failed"}),e.jsxs("span",{className:"text-xs text-red-600 ml-1",children:["(",Et.error,")"]})]}):null})]},Ze)})})]})})}),He&&e.jsxs("div",{className:"mt-4 p-4 border rounded-lg bg-muted/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"User Creation Results"}),e.jsxs(ee,{variant:"outline",size:"sm",onClick:bn,children:[e.jsx(Lo,{className:"h-4 w-4 mr-2"}),"Start New Upload"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsxs("span",{className:"text-green-700",children:["Success: ",we.filter(Z=>Z.success).length]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),e.jsxs("span",{className:"text-red-700",children:["Failed: ",we.filter(Z=>!Z.success).length]})]})]}),we.some(Z=>!Z.success)&&e.jsxs("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded text-sm",children:[e.jsx("h5",{className:"font-medium text-red-800 mb-2",children:"Failed Creations:"}),e.jsx("ul",{className:"space-y-1 text-red-700",children:we.filter(Z=>!Z.success).map((Z,Ze)=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:Z.user.name||Z.user.student_id||"Unknown"}),e.jsxs("span",{className:"text-red-600",children:["- ",Z.error]})]},Ze))})]})]})]}):e.jsx(e.Fragment,{children:$==="super-admin"?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-sm font-medium text-muted-foreground mb-2",children:["Template Format: ",e.jsx("span",{className:"font-normal",children:"Super Admin template contains the following columns:"})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 text-xs",children:[e.jsx("div",{className:"font-medium bg-primary/10 p-2 rounded",children:"Name"}),e.jsx("div",{className:"font-medium bg-primary/10 p-2 rounded",children:"Email ID"}),e.jsx("div",{className:"font-medium bg-primary/10 p-2 rounded",children:"Contact"}),e.jsx("div",{className:"font-medium bg-primary/10 p-2 rounded",children:"Password"})]})]}):$==="student"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-sm font-medium text-muted-foreground mb-2",children:["Template Format: ",e.jsx("span",{className:"font-normal",children:"Student template contains the following columns:"})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-3 text-xs",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"font-semibold text-primary border-b pb-1",children:"Basic Information"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium bg-blue-50 border border-blue-200 p-2 rounded text-blue-800",children:"Name *"}),e.jsx("div",{className:"font-medium bg-blue-50 border border-blue-200 p-2 rounded text-blue-800",children:"Email ID *"}),e.jsx("div",{className:"font-medium bg-blue-50 border border-blue-200 p-2 rounded text-blue-800",children:"Phone Number"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"font-semibold text-primary border-b pb-1",children:"Student Details"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium bg-purple-50 border border-purple-200 p-2 rounded text-purple-800",children:"Roll Number *"}),e.jsx("div",{className:"font-medium bg-purple-50 border border-purple-200 p-2 rounded text-purple-800",children:"Admission Type"}),e.jsx("div",{className:"font-medium bg-purple-50 border border-purple-200 p-2 rounded text-purple-800",children:"Batch (or leave empty to use selected batch)"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"font-semibold text-primary border-b pb-1",children:"Academic Years"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium bg-green-50 border border-green-200 p-2 rounded text-green-800",children:"Joining Year"}),e.jsx("div",{className:"font-medium bg-green-50 border border-green-200 p-2 rounded text-green-800",children:"Ending Year"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"font-semibold text-primary border-b pb-1",children:"Auto-Filled"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium bg-gray-50 border border-gray-200 p-2 rounded text-gray-600",children:"College"}),e.jsx("div",{className:"font-medium bg-gray-50 border border-gray-200 p-2 rounded text-gray-600",children:"Department"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Admission Type Guide"})]}),e.jsxs("div",{className:"text-xs text-blue-700 space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Regular:"})," Standard 4-year program entry"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Lateral:"})," Advanced entry (typically 2nd year) - System adds +1 year automatically"]})]})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-green-800",children:"Important Notes"})]}),e.jsxs("div",{className:"text-xs text-green-700 space-y-1",children:[e.jsx("div",{children:" Roll numbers stored in CAPS automatically"}),e.jsx("div",{children:" College & Department auto-filled from selection"}),e.jsx("div",{children:" Batch can be selected from form or left empty in Excel"}),e.jsx("div",{children:" Years calculated automatically for lateral students"})]})]})]})]}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"Please select a role type to see the template format."})})]})]})]})]})})]})};var $m="Checkbox",[rz,hH]=nn($m),[nz,Mv]=rz($m);function az(t){const{__scopeCheckbox:r,checked:s,children:n,defaultChecked:c,disabled:o,form:a,name:d,onCheckedChange:l,required:i,value:u="on",internal_do_not_use_render:f}=t,[h,m]=$a({prop:s,defaultProp:c??!1,onChange:l,caller:$m}),[p,x]=A.useState(null),[g,v]=A.useState(null),y=A.useRef(!1),b=p?!!a||!!p.closest("form"):!0,C={checked:h,disabled:o,setChecked:m,control:p,setControl:x,name:d,form:a,value:u,hasConsumerStoppedPropagationRef:y,required:i,defaultChecked:Xi(c)?!1:c,isFormControl:b,bubbleInput:g,setBubbleInput:v};return e.jsx(nz,{scope:r,...C,children:iz(f)?f(C):n})}var tC="CheckboxTrigger",sC=A.forwardRef(({__scopeCheckbox:t,onKeyDown:r,onClick:s,...n},c)=>{const{control:o,value:a,disabled:d,checked:l,required:i,setControl:u,setChecked:f,hasConsumerStoppedPropagationRef:h,isFormControl:m,bubbleInput:p}=Mv(tC,t),x=bs(c,u),g=A.useRef(l);return A.useEffect(()=>{const v=o==null?void 0:o.form;if(v){const y=()=>f(g.current);return v.addEventListener("reset",y),()=>v.removeEventListener("reset",y)}},[o,f]),e.jsx(Dt.button,{type:"button",role:"checkbox","aria-checked":Xi(l)?"mixed":l,"aria-required":i,"data-state":oC(l),"data-disabled":d?"":void 0,disabled:d,value:a,...n,ref:x,onKeyDown:It(r,v=>{v.key==="Enter"&&v.preventDefault()}),onClick:It(s,v=>{f(y=>Xi(y)?!0:!y),p&&m&&(h.current=v.isPropagationStopped(),h.current||v.stopPropagation())})})});sC.displayName=tC;var Iv=A.forwardRef((t,r)=>{const{__scopeCheckbox:s,name:n,checked:c,defaultChecked:o,required:a,disabled:d,value:l,onCheckedChange:i,form:u,...f}=t;return e.jsx(az,{__scopeCheckbox:s,checked:c,defaultChecked:o,disabled:d,required:a,onCheckedChange:i,name:n,form:u,value:l,internal_do_not_use_render:({isFormControl:h})=>e.jsxs(e.Fragment,{children:[e.jsx(sC,{...f,ref:r,__scopeCheckbox:s}),h&&e.jsx(iC,{__scopeCheckbox:s})]})})});Iv.displayName=$m;var rC="CheckboxIndicator",nC=A.forwardRef((t,r)=>{const{__scopeCheckbox:s,forceMount:n,...c}=t,o=Mv(rC,s);return e.jsx(Tn,{present:n||Xi(o.checked)||o.checked===!0,children:e.jsx(Dt.span,{"data-state":oC(o.checked),"data-disabled":o.disabled?"":void 0,...c,ref:r,style:{pointerEvents:"none",...t.style}})})});nC.displayName=rC;var aC="CheckboxBubbleInput",iC=A.forwardRef(({__scopeCheckbox:t,...r},s)=>{const{control:n,hasConsumerStoppedPropagationRef:c,checked:o,defaultChecked:a,required:d,disabled:l,name:i,value:u,form:f,bubbleInput:h,setBubbleInput:m}=Mv(aC,t),p=bs(s,m),x=jv(o),g=Cy(n);A.useEffect(()=>{const y=h;if(!y)return;const b=window.HTMLInputElement.prototype,T=Object.getOwnPropertyDescriptor(b,"checked").set,M=!c.current;if(x!==o&&T){const U=new Event("click",{bubbles:M});y.indeterminate=Xi(o),T.call(y,Xi(o)?!1:o),y.dispatchEvent(U)}},[h,x,o,c]);const v=A.useRef(Xi(o)?!1:o);return e.jsx(Dt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??v.current,required:d,disabled:l,name:i,value:u,form:f,...r,tabIndex:-1,ref:p,style:{...r.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});iC.displayName=aC;function iz(t){return typeof t=="function"}function Xi(t){return t==="indeterminate"}function oC(t){return Xi(t)?"indeterminate":t?"checked":"unchecked"}const Vt=Lt.forwardRef(({className:t,...r},s)=>e.jsx(Iv,{ref:s,className:Ot("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...r,children:e.jsx(nC,{className:Ot("flex items-center justify-center text-current"),children:e.jsx(hu,{className:"h-4 w-4"})})}));Vt.displayName=Iv.displayName;const oz=({isOpen:t,onClose:r,assessment:s,onCopy:n,loading:c=!1})=>{const[o,a]=A.useState({title:"",description:"",instructions:"",startDate:"",endDate:"",startTime:"09:00",endTime:"17:00",timezone:"UTC",earlyAccessHours:0,lateSubmissionMinutes:0,timeLimit:"",maxAttempts:"",passingScore:"",totalPoints:"",department:"",tags:[],proctoringSettings:{},questionSettings:{},assignmentSettings:{}}),[d,l]=A.useState([]),[i,u]=A.useState([]),[f,h]=A.useState(""),[m,p]=A.useState(!1),[x,g]=A.useState(!1),[v,y]=A.useState(null),[b,C]=A.useState({sendImmediately:!0,sendBeforeStart:!0,sendBeforeEnd:!0,customReminderDays:1,customReminderMessage:""});A.useEffect(()=>{t&&s&&(T(),M())},[t,s]);const T=async()=>{try{g(!0),y(null);const R=await Pe.getStudents();if(R.success){const S=R.data.map(w=>({id:w.id,name:w.name,email:w.email,rollNumber:w.roll_number||w.student_id||"N/A"}));u(S)}else y(R.message||"Failed to load students"),u([])}catch(R){console.error("Error loading students:",R),y("Failed to load students. Please try again."),u([])}finally{g(!1)}},M=()=>{var R,S,w,_,j,N,E,I,D;s&&a({title:`${s.title} (Copy)`,description:s.description||"",instructions:s.instructions||"",startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0],startTime:((R=s.scheduling)==null?void 0:R.start_time)||"09:00",endTime:((S=s.scheduling)==null?void 0:S.end_time)||"17:00",timezone:((w=s.scheduling)==null?void 0:w.timezone)||"UTC",earlyAccessHours:((_=s.scheduling)==null?void 0:_.early_access_hours)||0,lateSubmissionMinutes:((j=s.scheduling)==null?void 0:j.late_submission_minutes)||0,timeLimit:((N=s.time_limit_minutes)==null?void 0:N.toString())||"60",maxAttempts:((E=s.max_attempts)==null?void 0:E.toString())||"1",passingScore:((I=s.passing_score)==null?void 0:I.toString())||"50",totalPoints:((D=s.total_points)==null?void 0:D.toString())||"100",department:s.department||"",tags:s.tags||[],proctoringSettings:s.proctoring_settings||{},questionSettings:{shuffleQuestions:s.shuffle_questions||!1,showResultsImmediately:s.show_results_immediately||!1,allowReview:s.allow_review||!1},assignmentSettings:{requireProctoring:s.require_proctoring||!1,accessPassword:s.access_password||""}})},U=(R,S)=>{a(w=>({...w,[R]:S}))},L=R=>{l(S=>S.some(_=>_.id===R.id)?S.filter(_=>_.id!==R.id):[...S,R])},P=()=>{d.length===i.length?l([]):l(i)},B=i.filter(R=>R.name.toLowerCase().includes(f.toLowerCase())||R.email.toLowerCase().includes(f.toLowerCase())||R.rollNumber.toLowerCase().includes(f.toLowerCase())),q=()=>{const R={...o,selectedStudents:d,reminderSettings:b,originalAssessmentId:s.id};n(R)},z=R=>{switch(R){case"quiz":return e.jsx(Os,{className:"h-4 w-4"});case"exam":return e.jsx(ra,{className:"h-4 w-4"});case"assignment":return e.jsx(Os,{className:"h-4 w-4"});default:return e.jsx(Os,{className:"h-4 w-4"})}},k=R=>{switch(R){case"easy":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"hard":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsx(Ht,{open:t,onOpenChange:r,children:e.jsxs(Zt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Jt,{children:e.jsxs(es,{className:"flex items-center space-x-2",children:[e.jsx(Ho,{className:"h-5 w-5"}),e.jsx("span",{children:"Copy Assessment"})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Re,{children:[e.jsx(lt,{children:e.jsx(mt,{className:"text-lg",children:"Original Assessment"})}),e.jsx(De,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:s==null?void 0:s.title}),e.jsx("p",{className:"text-gray-600 text-sm mb-3",children:s==null?void 0:s.description}),e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[z(s==null?void 0:s.assessment_type),e.jsx("span",{className:"text-sm capitalize",children:s==null?void 0:s.assessment_type}),e.jsx(et,{className:k(s==null?void 0:s.difficulty_level),children:s==null?void 0:s.difficulty_level})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ps,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-sm",children:[s==null?void 0:s.time_limit_minutes," minutes"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ra,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-sm",children:[s==null?void 0:s.total_points," points"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(as,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-sm",children:[s==null?void 0:s.max_attempts," attempts"]})]}),(s==null?void 0:s.require_proctoring)&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(el,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:"text-sm text-red-600",children:"Proctoring Required"})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(Re,{children:[e.jsx(lt,{children:e.jsx(mt,{className:"text-lg",children:"Basic Information"})}),e.jsxs(De,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"title",children:"Assessment Title *"}),e.jsx(Ye,{id:"title",value:o.title,onChange:R=>U("title",R.target.value),placeholder:"Enter assessment title"})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"description",children:"Description"}),e.jsx(ms,{id:"description",value:o.description,onChange:R=>U("description",R.target.value),placeholder:"Enter assessment description",rows:3})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"instructions",children:"Instructions"}),e.jsx(ms,{id:"instructions",value:o.instructions,onChange:R=>U("instructions",R.target.value),placeholder:"Enter assessment instructions",rows:3})]})]})]}),e.jsxs(Re,{children:[e.jsx(lt,{children:e.jsx(mt,{className:"text-lg",children:"Schedule & Settings"})}),e.jsxs(De,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"startDate",children:"Start Date"}),e.jsx(Ye,{id:"startDate",type:"date",value:o.startDate,onChange:R=>U("startDate",R.target.value)})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"endDate",children:"End Date"}),e.jsx(Ye,{id:"endDate",type:"date",value:o.endDate,onChange:R=>U("endDate",R.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"startTime",children:"Start Time"}),e.jsx(Ye,{id:"startTime",type:"time",value:o.startTime,onChange:R=>U("startTime",R.target.value)})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"endTime",children:"End Time"}),e.jsx(Ye,{id:"endTime",type:"time",value:o.endTime,onChange:R=>U("endTime",R.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"timezone",children:"Timezone"}),e.jsxs(At,{value:o.timezone,onValueChange:R=>U("timezone",R),children:[e.jsx(St,{children:e.jsx(Rt,{})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"UTC",children:"UTC"}),e.jsx(Te,{value:"America/New_York",children:"EST (New York)"}),e.jsx(Te,{value:"America/Chicago",children:"CST (Chicago)"}),e.jsx(Te,{value:"America/Denver",children:"MST (Denver)"}),e.jsx(Te,{value:"America/Los_Angeles",children:"PST (Los Angeles)"}),e.jsx(Te,{value:"Europe/London",children:"GMT (London)"}),e.jsx(Te,{value:"Europe/Paris",children:"CET (Paris)"}),e.jsx(Te,{value:"Asia/Tokyo",children:"JST (Tokyo)"}),e.jsx(Te,{value:"Asia/Kolkata",children:"IST (India)"})]})]})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"earlyAccessHours",children:"Early Access (hours)"}),e.jsx(Ye,{id:"earlyAccessHours",type:"number",min:"0",value:o.earlyAccessHours,onChange:R=>U("earlyAccessHours",parseInt(R.target.value)||0)})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"lateSubmissionMinutes",children:"Late Submission (minutes)"}),e.jsx(Ye,{id:"lateSubmissionMinutes",type:"number",min:"0",value:o.lateSubmissionMinutes,onChange:R=>U("lateSubmissionMinutes",parseInt(R.target.value)||0)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"timeLimit",children:"Time Limit (minutes)"}),e.jsx(Ye,{id:"timeLimit",type:"number",value:o.timeLimit,onChange:R=>U("timeLimit",R.target.value)})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"maxAttempts",children:"Max Attempts"}),e.jsx(Ye,{id:"maxAttempts",type:"number",value:o.maxAttempts,onChange:R=>U("maxAttempts",R.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"passingScore",children:"Passing Score (%)"}),e.jsx(Ye,{id:"passingScore",type:"number",value:o.passingScore,onChange:R=>U("passingScore",R.target.value)})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"totalPoints",children:"Total Points"}),e.jsx(Ye,{id:"totalPoints",type:"number",value:o.totalPoints,onChange:R=>U("totalPoints",R.target.value)})]})]})]})]})]}),e.jsxs(Re,{children:[e.jsx(lt,{children:e.jsx(mt,{className:"text-lg",children:"Student Assignment"})}),e.jsx(De,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"assignToStudents",checked:m,onCheckedChange:p}),e.jsx(Se,{htmlFor:"assignToStudents",children:"Assign to students immediately"})]}),m&&e.jsx(ee,{variant:"outline",size:"sm",onClick:P,children:d.length===i.length?"Deselect All":"Select All"})]}),m&&e.jsxs(os.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"studentSearch",children:"Search Students"}),e.jsx(Ye,{id:"studentSearch",placeholder:"Search by name, email, or roll number",value:f,onChange:R=>h(R.target.value)})]}),x?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(Tr,{className:"h-6 w-6 animate-spin mr-2"}),e.jsx("span",{children:"Loading students..."})]}):v?e.jsxs("div",{className:"p-4 border border-red-200 rounded-lg bg-red-50",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ms,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-red-800",children:v})]}),e.jsx(ee,{variant:"outline",size:"sm",onClick:T,className:"mt-2",children:"Try Again"})]}):e.jsx("div",{className:"max-h-48 overflow-y-auto border rounded-lg p-4",children:e.jsx("div",{className:"space-y-2",children:B.length===0?e.jsx("div",{className:"text-center text-gray-500 py-4",children:f?"No students found matching your search":"No students available"}):B.map(R=>e.jsxs("div",{className:"flex items-center space-x-3 p-2 hover:bg-gray-50 rounded",children:[e.jsx(Vt,{checked:d.some(S=>S.id===R.id),onCheckedChange:()=>L(R)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:R.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:[R.email,"  ",R.rollNumber]})]})]},R.id))})}),e.jsxs("div",{className:"text-sm text-gray-600",children:[d.length," student",d.length!==1?"s":""," selected"]})]})]})})]}),e.jsxs(Re,{children:[e.jsx(lt,{children:e.jsx(mt,{className:"text-lg",children:"Reminder Settings"})}),e.jsx(De,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"sendImmediately",checked:b.sendImmediately,onCheckedChange:R=>C(S=>({...S,sendImmediately:R}))}),e.jsx(Se,{htmlFor:"sendImmediately",children:"Send immediate notification"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"sendBeforeStart",checked:b.sendBeforeStart,onCheckedChange:R=>C(S=>({...S,sendBeforeStart:R}))}),e.jsx(Se,{htmlFor:"sendBeforeStart",children:"Send reminder before start date"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"sendBeforeEnd",checked:b.sendBeforeEnd,onCheckedChange:R=>C(S=>({...S,sendBeforeEnd:R}))}),e.jsx(Se,{htmlFor:"sendBeforeEnd",children:"Send reminder before end date"})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"customMessage",children:"Custom Reminder Message"}),e.jsx(ms,{id:"customMessage",value:b.customReminderMessage,onChange:R=>C(S=>({...S,customReminderMessage:R.target.value})),placeholder:"Enter custom reminder message (optional)",rows:3})]})]})})]}),e.jsxs(pr,{children:[e.jsx(Yt,{className:"h-4 w-4"}),e.jsxs(gr,{children:[e.jsx("strong",{children:"Summary:"})," This will create a complete copy of the assessment with all questions, proctoring settings, and configurations. ",m&&d.length>0&&`It will be assigned to ${d.length} student${d.length!==1?"s":""} and `,b.sendImmediately&&"immediate notifications will be sent."]})]})]}),e.jsxs(ir,{children:[e.jsx(ee,{variant:"outline",onClick:r,disabled:c,children:"Cancel"}),e.jsx(ee,{onClick:q,disabled:c||!o.title.trim(),className:"bg-blue-600 hover:bg-blue-700",children:c?e.jsxs(e.Fragment,{children:[e.jsx(Tr,{className:"h-4 w-4 mr-2 animate-spin"}),"Copying..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ho,{className:"h-4 w-4 mr-2"}),"Copy Assessment"]})})]})]})})},lz=()=>{qs();const{toast:t}=Js(),r=Br(),[s,n]=A.useState([]),[c,o]=A.useState([]),[a,d]=A.useState([]),[l,i]=A.useState([]),[u,f]=A.useState(!0),[h,m]=A.useState(""),[p,x]=A.useState("all"),[g,v]=A.useState("all"),[y,b]=A.useState("all"),[C,T]=A.useState("assessments"),[M,U]=A.useState("cards"),[L,P]=A.useState(!1);A.useState(null);const[B,q]=A.useState(!1),[z,k]=A.useState(!1),[R,S]=A.useState(!1),[w,_]=A.useState(null),[j,N]=A.useState(null),[E,I]=A.useState(null),[D,V]=A.useState(!1),[H,G]=A.useState(!1),[$,Y]=A.useState(!1),[F,O]=A.useState(!1),[W,K]=A.useState(null),[Q,X]=A.useState(""),[te,de]=A.useState("all"),[xe,ne]=A.useState("categories"),[ge,be]=A.useState(null),[Ie,Ce]=A.useState(null),[Oe,Ee]=A.useState([]),[pe,Ae]=A.useState([]),[st,qe]=A.useState("active"),[ie,ae]=A.useState({title:"",content:"",question_type:"multiple_choice",difficulty_level:"medium",points:10,category_id:"",tags:[],options:["","","",""],correct_answer:[],explanation:""}),[we,ve]=A.useState({name:"",description:"",parent_id:null,color:"#3B82F6",icon:""});A.useEffect(()=>{He()},[]),A.useEffect(()=>{xe==="questions"&&Ie&&Qe(Ie.id)},[st]);const He=async()=>{try{f(!0),console.log("Loading assessments...");const J=await Pe.getAssessmentTemplates();console.log("Assessments response:",J),J.success?(n(J.data),console.log("Assessments loaded:",J.data.length)):(console.error("Failed to load assessments:",J.message),t({variant:"destructive",title:"Error",description:`Failed to load assessments: ${J.message}`}));const ce=await Pe.getQuestions();ce.success&&o(ce.data);const Je=await Pe.getQuestionCategories();Je.success&&d(Je.data);const ht=await Pe.getQuestionTags();ht.success&&i(ht.data)}catch(J){console.error("Error loading data:",J),t({variant:"destructive",title:"Error",description:`Failed to load assessment data: ${J.message}`})}finally{f(!1)}},$e=async()=>{try{(await Pe.createQuestion(ie)).success&&(t({title:"Success",description:"Question created successfully"}),P(!1),ae({title:"",content:"",question_type:"multiple_choice",difficulty_level:"medium",points:10,category_id:"",tags:[],options:["","","",""],correct_answer:[],explanation:""}),He())}catch(J){t({variant:"destructive",title:"Error",description:J.message||"Failed to create question"})}},ue=async()=>{try{const J=xe==="subcategories"?{...we,parent_id:ge==null?void 0:ge.id}:we;(await Pe.createQuestionCategory(J)).success&&(t({title:"Success",description:xe==="subcategories"?"Subcategory created successfully":"Category created successfully"}),G(!1),ve({name:"",description:"",parent_id:null,color:"#3B82F6",icon:""}),He())}catch(J){t({variant:"destructive",title:"Error",description:J.message||"Failed to create category"})}},oe=async()=>{try{(await Pe.updateQuestionCategory(W.id,we)).success&&(t({title:"Success",description:"Category updated successfully"}),Y(!1),K(null),ve({name:"",description:"",parent_id:null,color:"#3B82F6",icon:""}),He())}catch(J){t({variant:"destructive",title:"Error",description:J.message||"Failed to update category"})}},_e=async()=>{try{(await Pe.deleteQuestionCategory(W.id)).success&&(t({title:"Success",description:"Category deleted successfully"}),O(!1),K(null),He())}catch(J){t({variant:"destructive",title:"Error",description:J.message||"Failed to delete category"})}},Me=J=>{K(J),ve({name:J.name,description:J.description||"",parent_id:J.parent_id,color:J.color||"#3B82F6",icon:J.icon||""}),Y(!0)},ze=J=>{K(J),O(!0)},Xe=()=>a.filter(J=>J.parent_id===null),Ve=J=>a.filter(ce=>ce.parent_id===J),ot=a.filter(J=>{var le;const ce=J.name.toLowerCase().includes(Q.toLowerCase())||((le=J.description)==null?void 0:le.toLowerCase().includes(Q.toLowerCase())),Je=te==="all"||te==="main"&&J.parent_id===null||te==="sub"&&J.parent_id!==null||J.parent_id===te,ht=J.parent_id===null;return ce&&Je&&(xe==="categories"?ht:!0)}),xt=J=>{switch(J){case"quiz":return e.jsx(Ar,{className:"h-4 w-4"});case"test":return e.jsx(Os,{className:"h-4 w-4"});case"exam":return e.jsx(lr,{className:"h-4 w-4"});case"assignment":return e.jsx(Gr,{className:"h-4 w-4"});case"coding_challenge":return e.jsx(Gr,{className:"h-4 w-4"});case"survey":return e.jsx(Rr,{className:"h-4 w-4"});default:return e.jsx(Os,{className:"h-4 w-4"})}},ft=J=>{switch(J){case"beginner":return"bg-green-100 text-green-800";case"intermediate":return"bg-yellow-100 text-yellow-800";case"advanced":return"bg-red-100 text-red-800";case"expert":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},at=J=>{switch(J){case"draft":return"bg-gray-100 text-gray-800";case"published":return"bg-green-100 text-green-800";case"archived":return"bg-red-100 text-red-800";case"scheduled":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},Be=J=>{const ce=J.start_date_only&&J.end_date_only,Je=J.start_time_only&&J.end_time_only;if(!ce)return{status:"no-schedule",color:"bg-gray-100 text-gray-800",text:"No Schedule"};const ht=new Date;let le,Le;const rt=J.start_date_only&&J.start_date_only.includes("T"),pt=J.end_date_only&&J.end_date_only.includes("T");if(rt&&pt&&Je){const Tt=J.start_date_only.split("T")[0],vt=J.end_date_only.split("T")[0];le=new Date(`${Tt}T${J.start_time_only}`),Le=new Date(`${vt}T${J.end_time_only}`),isNaN(le.getTime())&&(console.warn(`Invalid start datetime for assessment ${J.id}: ${Tt}T${J.start_time_only}`),le=null),isNaN(Le.getTime())&&(console.warn(`Invalid end datetime for assessment ${J.id}: ${vt}T${J.end_time_only}`),Le=null)}else rt&&pt?(le=new Date(J.start_date_only),Le=new Date(J.end_date_only),isNaN(le.getTime())&&(console.warn(`Invalid start datetime for assessment ${J.id}: ${J.start_date_only}`),le=null),isNaN(Le.getTime())&&(console.warn(`Invalid end datetime for assessment ${J.id}: ${J.end_date_only}`),Le=null)):Je?(le=new Date(`${J.start_date_only}T${J.start_time_only}`),Le=new Date(`${J.end_date_only}T${J.end_time_only}`),isNaN(le.getTime())&&(console.warn(`Invalid start datetime for assessment ${J.id}: ${J.start_date_only}T${J.start_time_only}`),le=null),isNaN(Le.getTime())&&(console.warn(`Invalid end datetime for assessment ${J.id}: ${J.end_date_only}T${J.end_time_only}`),Le=null)):(le=new Date(J.start_date_only),Le=new Date(J.end_date_only),isNaN(le.getTime())&&(console.warn(`Invalid start date for assessment ${J.id}: ${J.start_date_only}`),le=null),isNaN(Le.getTime())?(console.warn(`Invalid end date for assessment ${J.id}: ${J.end_date_only}`),Le=null):Le.setHours(23,59,59,999));return!le||!Le?{status:"no-schedule",color:"bg-gray-100 text-gray-800",text:"No Schedule"}:ht<le?{status:"upcoming",color:"bg-blue-100 text-blue-800",text:"Upcoming"}:ht>=le&&ht<=Le?{status:"active",color:"bg-green-100 text-green-800",text:"Active"}:{status:"expired",color:"bg-red-100 text-red-800",text:"Expired"}},Ue=(J,ce=null)=>{if(!J)return"Not set";const ht=new Date(J).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});if(ce){let le=ce;return typeof ce=="string"&&ce.includes(":")?le=ce:typeof ce=="string"&&(le=ce.length===4?`${ce.slice(0,2)}:${ce.slice(2)}`:ce),`${ht} ${le}`}return ht},re=J=>{if(!J)return null;const ce=new Date,ht=new Date(J)-ce;if(ht<=0)return null;const le=Math.floor(ht/(1e3*60*60*24)),Le=Math.floor(ht%(1e3*60*60*24)/(1e3*60*60)),rt=Math.floor(ht%(1e3*60*60)/(1e3*60));return le>0?`${le}d ${Le}h remaining`:Le>0?`${Le}h ${rt}m remaining`:`${rt}m remaining`},ye=s.filter(J=>{var Le;const ce=J.title.toLowerCase().includes(h.toLowerCase())||((Le=J.description)==null?void 0:Le.toLowerCase().includes(h.toLowerCase())),Je=p==="all"||J.assessment_type===p,ht=g==="all"||J.status===g,le=y==="all"||J.difficulty_level===y;return ce&&Je&&ht&&le}),ke=J=>{be(J),ne("subcategories"),Ae([{name:"Categories",action:()=>Ke()},{name:J.name,action:()=>ke(J)}])},Fe=J=>{Ce(J),ne("questions"),Ae([{name:"Categories",action:()=>Ke()},{name:ge.name,action:()=>ke(ge)},{name:J.name,action:()=>Fe(J)}]),Qe(J.id)},Ke=()=>{ne("categories"),be(null),Ce(null),Ae([])},Qe=async J=>{try{const ce={category_id:J};st!=="all"&&(ce.status=st);const Je=await Pe.getQuestions(ce);Je.success&&Ee(Je.data)}catch(ce){console.error("Error loading category questions:",ce),t({variant:"destructive",title:"Error",description:"Failed to load questions for this category"})}},he=async J=>{try{V(!0);const ce=await Pe.getAssessmentTemplateById(J.id);ce.success?(N(ce.data),q(!0)):t({variant:"destructive",title:"Error",description:ce.message||"Failed to load assessment details"})}catch(ce){console.error("Error loading assessment details:",ce),t({variant:"destructive",title:"Error",description:ce.message||"Failed to load assessment details. Please try again."})}finally{V(!1)}},je=J=>{r(`/assessments/create?edit=${J.id}`)},Ne=async J=>{try{V(!0);const ce=await Pe.sendAssessmentReminder(J.id);ce.success?t({title:"Reminder Sent",description:ce.message}):t({title:"Error",description:ce.message||"Failed to send reminder emails",variant:"destructive"})}catch(ce){console.error("Error sending reminder:",ce),t({title:"Error",description:"Failed to send reminder emails",variant:"destructive"})}finally{V(!1)}},tt=J=>{I(J),S(!0)},jt=async(J,ce)=>{try{V(!0);const Je=await Pe.updateAssessmentTemplate(J,{status:ce});Je.success?(n(ht=>ht.map(le=>le.id===J?{...le,status:ce}:le)),t({title:"Status Updated",description:`Assessment status changed to ${ce}`}),ce==="published"&&await Pt(J)):t({title:"Error",description:Je.message||"Failed to update assessment status",variant:"destructive"})}catch(Je){console.error("Error updating assessment status:",Je),t({title:"Error",description:"Failed to update assessment status",variant:"destructive"})}finally{V(!1)}},dt=async J=>{try{const ce=s.find(ht=>ht.id===J);if(!ce)return;const Je=await Pe.getAssessmentAssignments(J);if(Je.success&&Je.data.length>0){const ht=Je.data.map(le=>le.assignment_type==="individual"?Pe.sendAssessmentNotification(J,le.target_id,{type:"assessment_published",title:"New Assessment Available",message:`A new assessment "${ce.title}" has been published and is now available for you to take.`}):Promise.resolve());await Promise.all(ht),t({title:"Notifications Sent",description:"Assessment published and notifications sent to assigned students"})}}catch(ce){console.error("Error sending assessment notifications:",ce)}},kt=async J=>{var ce,Je;try{V(!0);const ht={title:J.title,description:J.description,instructions:J.instructions,assessment_type:E.assessment_type,difficulty_level:E.difficulty_level,time_limit_minutes:parseInt(J.timeLimit),total_points:parseInt(J.totalPoints),passing_score:parseInt(J.passingScore),max_attempts:parseInt(J.maxAttempts),shuffle_questions:J.questionSettings.shuffleQuestions,show_results_immediately:J.questionSettings.showResultsImmediately,allow_review:J.questionSettings.allowReview,require_proctoring:J.assignmentSettings.requireProctoring,access_password:J.assignmentSettings.accessPassword,department:E.department,tags:E.tags&&Array.isArray(E.tags)?E.tags:[],proctoring_settings:E.proctoring_settings||{},status:"draft",scheduling:{start_date:J.startDate,start_time:J.startTime||"09:00",end_date:J.endDate,end_time:J.endTime||"17:00",timezone:J.timezone||"UTC",early_access_hours:parseInt(J.earlyAccessHours)||0,late_submission_minutes:parseInt(J.lateSubmissionMinutes)||0}},le=await Pe.createAssessmentTemplate(ht);if(le.success){const Le=le.data.id;await gt(E.id,Le),J.selectedStudents&&J.selectedStudents.length>0&&await wt(Le,J.selectedStudents),J.reminderSettings.sendImmediately&&await bt(Le,J.reminderSettings,J.selectedStudents);const rt=await Pe.getAssessmentQuestionsForAdmin(E.id),pt=rt.success&&((ce=rt.data)==null?void 0:ce.length)||0;t({title:"Success",description:`Assessment copied successfully with ${pt} questions linked${((Je=J.selectedStudents)==null?void 0:Je.length)>0?` and assigned to ${J.selectedStudents.length} students`:""}`}),He(),S(!1),I(null)}else throw new Error(le.message||"Failed to create assessment copy")}catch(ht){console.error("Error copying assessment:",ht),t({variant:"destructive",title:"Error",description:ht.message||"Failed to copy assessment. Please try again."})}finally{V(!1)}},gt=async(J,ce)=>{try{const Je=await Pe.getAssessmentQuestionsForAdmin(J);if(Je.success&&Je.data&&Je.data.length>0){let ht=0;for(const le of Je.data)try{(await Pe.addQuestionToAssessment(ce,le.id,null,ht+1,le.points||1,le.time_limit||null,le.is_required!==!1)).success&&ht++}catch(Le){console.error("Error linking question to assessment:",Le)}}}catch(Je){console.error("Error copying questions:",Je)}},wt=async(J,ce)=>{try{const Je=ce.map(le=>le.id),ht=await Pe.assignAssessmentToStudents(J,Je);if(!ht.success)throw new Error(ht.message||"Failed to assign assessment to students")}catch(Je){throw console.error("Error assigning assessment to students:",Je),new Error("Failed to assign assessment to students")}},Pt=async J=>{try{const ce=await Pe.getStudents();if(ce.success&&ce.data.length>0){const Je=ce.data;await wt(J,Je),await dt(J),t({title:"Assessment Published",description:`Assessment has been assigned to ${Je.length} students and notifications sent`})}else t({title:"No Students Found",description:"No students available to assign this assessment to",variant:"destructive"})}catch(ce){console.error("Error assigning assessment to all students:",ce),t({title:"Assignment Error",description:"Failed to assign assessment to students, but status was updated",variant:"destructive"})}},bt=async(J,ce,Je=null)=>{try{const ht={assessment_id:J,send_immediately:ce.sendImmediately,send_before_start:ce.sendBeforeStart,send_before_end:ce.sendBeforeEnd,custom_message:ce.customReminderMessage,student_ids:Je?Je.map(Le=>Le.id):null},le=await Pe.sendAssessmentReminders(ht);le.success||console.warn("Failed to send reminders:",le.message)}catch(ht){console.error("Error sending reminders:",ht)}},yt=async()=>{try{V(!0),(await Pe.deleteAssessmentTemplate(w.id)).success&&(t({title:"Success",description:"Assessment deleted successfully"}),k(!1),_(null),He())}catch(J){t({variant:"destructive",title:"Error",description:J.message||"Failed to delete assessment"})}finally{V(!1)}},Ge=J=>{_(J),k(!0)};return u?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading assessment platform..."})]})})}):e.jsx("div",{className:"space-y-6",children:e.jsxs(os.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8 gap-4",children:[e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 flex-shrink-0",children:[e.jsxs(ee,{onClick:()=>r("/assessments/create"),className:"whitespace-nowrap",children:[e.jsx(vs,{className:"mr-2 h-4 w-4"}),"Create Assessment Wizard"]}),e.jsxs(ee,{variant:"outline",onClick:()=>r("/create-question"),className:"whitespace-nowrap",children:[e.jsx(vs,{className:"mr-2 h-4 w-4"}),"Add Question"]})]})]}),e.jsxs(Dr,{value:C,onValueChange:T,className:"space-y-6",children:[e.jsxs(Ir,{className:"grid w-full grid-cols-2",children:[e.jsx(zt,{value:"assessments",children:"Assessments"}),e.jsx(zt,{value:"categories",children:"Categories"})]}),e.jsxs(Kt,{value:"assessments",className:"space-y-6",children:[e.jsx(Re,{children:e.jsx(De,{children:e.jsxs("div",{className:"grid mt-4 gap-4 grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5",children:[e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"search",children:"Search"}),e.jsx(Ye,{id:"search",placeholder:"Search assessments...",value:h,onChange:J=>m(J.target.value)})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"type",children:"Type"}),e.jsxs(At,{value:p,onValueChange:x,children:[e.jsx(St,{children:e.jsx(Rt,{})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"all",children:"All Types"}),e.jsx(Te,{value:"quiz",children:"Quiz"}),e.jsx(Te,{value:"test",children:"Test"}),e.jsx(Te,{value:"exam",children:"Exam"}),e.jsx(Te,{value:"assignment",children:"Assignment"}),e.jsx(Te,{value:"coding_challenge",children:"Coding Challenge"}),e.jsx(Te,{value:"survey",children:"Survey"})]})]})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"status",children:"Status"}),e.jsxs(At,{value:g,onValueChange:v,children:[e.jsx(St,{children:e.jsx(Rt,{})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"all",children:"All Status"}),e.jsx(Te,{value:"draft",children:"Draft"}),e.jsx(Te,{value:"published",children:"Published"}),e.jsx(Te,{value:"archived",children:"Archived"}),e.jsx(Te,{value:"scheduled",children:"Scheduled"})]})]})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"difficulty",children:"Difficulty"}),e.jsxs(At,{value:y,onValueChange:b,children:[e.jsx(St,{children:e.jsx(Rt,{})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"all",children:"All Difficulties"}),e.jsx(Te,{value:"beginner",children:"Beginner"}),e.jsx(Te,{value:"intermediate",children:"Intermediate"}),e.jsx(Te,{value:"advanced",children:"Advanced"}),e.jsx(Te,{value:"expert",children:"Expert"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-end gap-2 sm:space-x-2",children:[e.jsxs("div",{className:"flex items-center space-x-1 border rounded-md",children:[e.jsx(ee,{variant:M==="cards"?"default":"ghost",size:"sm",onClick:()=>U("cards"),className:"h-8 px-2",children:e.jsx(q7,{className:"h-4 w-4"})}),e.jsx(ee,{variant:M==="list"?"default":"ghost",size:"sm",onClick:()=>U("list"),className:"h-8 px-2",children:e.jsx(Z_,{className:"h-4 w-4"})})]}),e.jsxs(ee,{variant:"outline",onClick:He,className:"h-8",children:[e.jsx(Is,{className:"mr-2 h-4 w-4"}),"Refresh"]})]})]})})}),M==="cards"?e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:ye.map(J=>e.jsx(os.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},children:e.jsxs(Re,{className:"h-full hover:shadow-lg transition-shadow",children:[e.jsx(lt,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[xt(J.assessment_type),e.jsx(mt,{className:"text-lg",children:J.title})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(At,{value:J.status,onValueChange:ce=>jt(J.id,ce),disabled:D,children:[e.jsx(St,{className:"w-28 h-8 text-xs px-2",children:e.jsx(Rt,{})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"draft",children:e.jsxs("div",{className:"flex items-center space-x-2 py-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500 border border-yellow-600 flex-shrink-0"}),e.jsx("span",{children:"Draft"})]})}),e.jsx(Te,{value:"published",children:e.jsxs("div",{className:"flex items-center space-x-2 py-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500 border border-green-600 flex-shrink-0"}),e.jsx("span",{children:"Published"})]})}),e.jsx(Te,{value:"archived",children:e.jsxs("div",{className:"flex items-center space-x-2 py-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-500 border border-gray-600 flex-shrink-0"}),e.jsx("span",{children:"Archived"})]})})]})]}),e.jsx(et,{className:`text-xs ${Be(J).color}`,children:Be(J).text})]})]})}),e.jsxs(De,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(Ps,{className:"mr-1 h-3 w-3"}),J.time_limit_minutes," min"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(ra,{className:"mr-1 h-3 w-3"}),J.total_points," pts"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(et,{className:ft(J.difficulty_level),children:J.difficulty_level}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[J.question_count||0," questions"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center text-muted-foreground",children:[e.jsx(fr,{className:"mr-1 h-3 w-3"}),"Start:"]}),e.jsx("span",{className:"text-xs",children:Ue(J.start_date_only,J.start_time_only)})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center text-muted-foreground",children:[e.jsx(fr,{className:"mr-1 h-3 w-3"}),"End:"]}),e.jsx("span",{className:"text-xs",children:Ue(J.end_date_only,J.end_time_only)})]}),Be(J).status==="active"&&re(J.end_date_only)&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center text-green-600",children:[e.jsx(Ps,{className:"mr-1 h-3 w-3"}),"Time Left:"]}),e.jsx("span",{className:"text-xs text-green-600 font-medium",children:re(J.end_date_only)})]})]}),e.jsx(xc,{}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center text-muted-foreground",children:[e.jsx(as,{className:"mr-1 h-3 w-3"}),J.submission_count||0," submissions"]}),e.jsx("span",{className:"text-muted-foreground",children:J.creator_name})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>he(J),disabled:D,children:[e.jsx(Ss,{className:"mr-1 h-3 w-3"}),"View"]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>Ne(J),disabled:D,title:"Send Reminder Email",children:e.jsx(ro,{className:"h-3 w-3"})}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>je(J),children:e.jsx(wr,{className:"h-3 w-3"})}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>tt(J),disabled:D,children:e.jsx(Ho,{className:"h-3 w-3"})}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>Ge(J),disabled:D,children:e.jsx(xl,{className:"h-3 w-3"})})]})]})]})]})},J.id))}):e.jsx("div",{className:"space-y-4",children:ye.map(J=>e.jsx(os.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:e.jsx(Re,{className:"hover:shadow-md transition-shadow",children:e.jsxs(De,{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start space-x-3 flex-1 min-w-0",children:[xt(J.assessment_type),e.jsx("div",{className:"min-w-0 flex-1",children:e.jsx("h3",{className:"font-semibold text-lg truncate",children:J.title})})]}),e.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(At,{value:J.status,onValueChange:ce=>jt(J.id,ce),disabled:D,children:[e.jsx(St,{className:"w-28 h-8 text-xs px-2",children:e.jsx(Rt,{})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"draft",children:e.jsxs("div",{className:"flex items-center space-x-2 py-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500 border border-yellow-600 flex-shrink-0"}),e.jsx("span",{children:"Draft"})]})}),e.jsx(Te,{value:"published",children:e.jsxs("div",{className:"flex items-center space-x-2 py-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500 border border-green-600 flex-shrink-0"}),e.jsx("span",{children:"Published"})]})}),e.jsx(Te,{value:"archived",children:e.jsxs("div",{className:"flex items-center space-x-2 py-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-500 border border-gray-600 flex-shrink-0"}),e.jsx("span",{children:"Archived"})]})})]})]}),e.jsx(et,{className:`text-xs ${Be(J).color}`,children:Be(J).text})]})})]}),e.jsx("div",{className:"mt-4 flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 text-sm text-muted-foreground",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(Ps,{className:"mr-1 h-4 w-4"}),J.time_limit_minutes," min"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(ra,{className:"mr-1 h-4 w-4"}),J.total_points," pts"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(as,{className:"mr-1 h-4 w-4"}),J.submission_count||0," submissions"]}),e.jsx(et,{className:ft(J.difficulty_level),children:J.difficulty_level})]})}),e.jsxs("div",{className:"mt-3 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4",children:[e.jsxs("span",{children:["Created by: ",J.creator_name]}),e.jsxs("span",{children:["Questions: ",J.question_count||0]}),e.jsxs("span",{className:"hidden sm:inline",children:["Start: ",Ue(J.start_date_only,J.start_time_only)]}),e.jsxs("span",{className:"hidden sm:inline",children:["End: ",Ue(J.end_date_only,J.end_time_only)]})]}),Be(J).status==="active"&&re(J.end_date_only)&&e.jsxs("span",{className:"text-green-600 font-medium",children:["Time Left: ",re(J.end_date_only)]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[e.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>he(J),disabled:D,className:"flex-1 sm:flex-none",children:[e.jsx(Ss,{className:"mr-1 h-3 w-3"}),"View"]}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>Ne(J),disabled:D,title:"Send Reminder Email",children:e.jsx(ro,{className:"h-3 w-3"})}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>je(J),children:e.jsx(wr,{className:"h-3 w-3"})}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>tt(J),disabled:D,children:e.jsx(Ho,{className:"h-3 w-3"})}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>Ge(J),disabled:D,children:e.jsx(xl,{className:"h-3 w-3"})})]})]})})},J.id))}),ye.length===0&&e.jsx(Re,{children:e.jsxs(De,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Os,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No assessments found"}),e.jsx("p",{className:"text-muted-foreground text-center mb-4",children:h||p!=="all"||g!=="all"||y!=="all"?"Try adjusting your filters or search terms":"Create your first assessment to get started"}),e.jsxs(ee,{onClick:()=>r("/assessments/create"),children:[e.jsx(vs,{className:"mr-2 h-4 w-4"}),"Create Assessment Wizard"]})]})})]}),e.jsx(Kt,{value:"categories",className:"space-y-6",children:e.jsxs(Re,{children:[e.jsxs(lt,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsxs(mt,{children:[xe==="categories"&&"Question Categories",xe==="subcategories"&&`Subcategories - ${ge==null?void 0:ge.name}`,xe==="questions"&&`Questions - ${Ie==null?void 0:Ie.name}`]}),e.jsxs(ts,{children:[xe==="categories"&&"Organize questions by categories and subcategories",xe==="subcategories"&&`Subcategories under ${ge==null?void 0:ge.name}`,xe==="questions"&&`Questions in ${Ie==null?void 0:Ie.name}`]})]}),xe==="categories"&&e.jsxs(ee,{onClick:()=>G(!0),className:"mt-4 sm:mt-0",children:[e.jsx(vs,{className:"mr-2 h-4 w-4"}),"Create Category"]})]}),pe.length>0&&e.jsx("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground mt-2",children:pe.map((J,ce)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:J.action,className:"hover:text-foreground transition-colors",children:J.name}),ce<pe.length-1&&e.jsx("span",{className:"mx-2",children:"/"})]},ce))})]}),e.jsxs(De,{children:[xe==="categories"&&e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3 mb-6",children:[e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"category-search",children:"Search Categories"}),e.jsx(Ye,{id:"category-search",placeholder:"Search by name or description...",value:Q,onChange:J=>X(J.target.value)})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"category-filter",children:"Filter by Type"}),e.jsxs(At,{value:te,onValueChange:de,children:[e.jsx(St,{children:e.jsx(Rt,{})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"all",children:"All Categories"}),e.jsx(Te,{value:"main",children:"Main Categories"}),e.jsx(Te,{value:"sub",children:"Subcategories"}),Xe().map(J=>e.jsxs(Te,{value:J.id,children:[J.name," (Parent)"]},J.id))]})]})]})]}),xe==="categories"&&e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:ot.map(J=>e.jsxs(Re,{className:"h-full hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>ke(J),children:[e.jsx(lt,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:J.color}}),e.jsx(mt,{className:"text-lg",children:J.name})]}),e.jsxs("div",{className:"flex items-center space-x-1",onClick:ce=>ce.stopPropagation(),children:[e.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>Me(J),children:e.jsx(wr,{className:"h-3 w-3"})}),e.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>ze(J),className:"text-red-600 hover:text-red-700",children:e.jsx(xl,{className:"h-3 w-3"})})]})]})}),e.jsxs(De,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:J.description||"No description provided"}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-muted-foreground",children:[J.question_count||0," questions"]}),e.jsxs("span",{className:"text-muted-foreground",children:[J.subcategory_count||0," subcategories"]})]})]})]},J.id))}),xe==="subcategories"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Subcategories"}),e.jsxs(ee,{variant:"outline",onClick:()=>{ve({name:"",description:"",parent_id:ge==null?void 0:ge.id,color:"#3B82F6",icon:""}),G(!0)},size:"sm",children:[e.jsx(vs,{className:"mr-2 h-4 w-4"}),"Add Subcategory"]})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:Ve(ge==null?void 0:ge.id).map(J=>e.jsxs(Re,{className:"h-full hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>Fe(J),children:[e.jsxs(lt,{children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:J.color}}),e.jsx(mt,{className:"text-lg",children:J.name})]}),e.jsxs("div",{className:"flex items-center space-x-1",onClick:ce=>ce.stopPropagation(),children:[e.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>Me(J),children:e.jsx(wr,{className:"h-3 w-3"})}),e.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>ze(J),className:"text-red-600 hover:text-red-700",children:e.jsx(xl,{className:"h-3 w-3"})})]})]}),e.jsx(et,{variant:"outline",className:"text-xs",children:"Subcategory"})]}),e.jsxs(De,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:J.description||"No description provided"}),e.jsx("div",{className:"flex items-center justify-between text-sm",children:e.jsxs("span",{className:"text-muted-foreground",children:[J.question_count||0," questions"]})})]})]},J.id))}),Ve(ge==null?void 0:ge.id).length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(x0,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No subcategories found"}),e.jsxs(ee,{variant:"outline",onClick:()=>{ve({name:"",description:"",parent_id:ge==null?void 0:ge.id,color:"#3B82F6",icon:""}),G(!0)},className:"mt-2",children:[e.jsx(vs,{className:"mr-2 h-4 w-4"}),"Create First Subcategory"]})]})]}),xe==="questions"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Questions"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(At,{value:st,onValueChange:qe,children:[e.jsx(St,{className:"w-40",children:e.jsx(Rt,{})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"all",children:"All Questions"}),e.jsx(Te,{value:"active",children:"Active"}),e.jsx(Te,{value:"draft",children:"Draft"}),e.jsx(Te,{value:"archived",children:"Archived"})]})]}),e.jsxs(ee,{variant:"outline",onClick:()=>r("/create-question"),size:"sm",children:[e.jsx(vs,{className:"mr-2 h-4 w-4"}),"Add Question"]})]})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:Oe.map(J=>e.jsxs(Re,{className:"h-full hover:shadow-lg transition-shadow",children:[e.jsxs(lt,{children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-500"}),e.jsx(mt,{className:"text-lg line-clamp-2",children:J.title})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>r(`/create-question?edit=${J.id}`),children:e.jsx(wr,{className:"h-3 w-3"})}),e.jsx(ee,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",children:e.jsx(xl,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{className:ft(J.difficulty_level),children:J.difficulty_level}),e.jsx(et,{className:at(J.status),children:J.status})]})]}),e.jsxs(De,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-3",children:J.content||J.question_text}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:J.question_type||J.type}),e.jsxs("span",{className:"text-muted-foreground",children:[J.points||0," points"]})]})]})]},J.id))}),Oe.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ar,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No questions found in this category"}),e.jsxs(ee,{variant:"outline",onClick:()=>r("/create-question"),className:"mt-2",children:[e.jsx(vs,{className:"mr-2 h-4 w-4"}),"Create First Question"]})]})]}),xe==="categories"&&ot.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(x0,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No categories found"}),e.jsxs(ee,{variant:"outline",onClick:()=>G(!0),className:"mt-2",children:[e.jsx(vs,{className:"mr-2 h-4 w-4"}),"Create First Category"]})]})]})]})})]}),e.jsx(Ht,{open:L,onOpenChange:P,children:e.jsxs(Zt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Jt,{children:[e.jsx(es,{children:"Create New Question"}),e.jsx(ps,{children:"Add a new question to your question bank"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(Se,{htmlFor:"question_title",children:["Question Title",ie.question_type==="coding"&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ye,{id:"question_title",value:ie.title,onChange:J=>ae({...ie,title:J.target.value}),placeholder:ie.question_type==="coding"?"Enter question title (required)":"Enter question title (optional)"})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"question_content",children:"Question Content *"}),e.jsx(ms,{id:"question_content",value:ie.content,onChange:J=>ae({...ie,content:J.target.value}),placeholder:"Enter question content"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"question_type",children:"Question Type *"}),e.jsxs(At,{value:ie.question_type,onValueChange:J=>ae({...ie,question_type:J}),children:[e.jsx(St,{children:e.jsx(Rt,{})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"multiple_choice",children:"Multiple Choice"}),e.jsx(Te,{value:"single_choice",children:"Single Choice"}),e.jsx(Te,{value:"true_false",children:"True/False"}),e.jsx(Te,{value:"short_answer",children:"Short Answer"}),e.jsx(Te,{value:"essay",children:"Essay"}),e.jsx(Te,{value:"coding",children:"Coding"}),e.jsx(Te,{value:"fill_blank",children:"Fill in the Blank"})]})]})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"question_difficulty",children:"Difficulty Level"}),e.jsxs(At,{value:ie.difficulty_level,onValueChange:J=>ae({...ie,difficulty_level:J}),children:[e.jsx(St,{children:e.jsx(Rt,{})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"easy",children:"Easy"}),e.jsx(Te,{value:"medium",children:"Medium"}),e.jsx(Te,{value:"hard",children:"Hard"}),e.jsx(Te,{value:"expert",children:"Expert"})]})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"question_points",children:"Points"}),e.jsx(Ye,{id:"question_points",type:"number",value:ie.points,onChange:J=>ae({...ie,points:parseInt(J.target.value)})})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"question_category",children:"Category"}),e.jsxs(At,{value:ie.category_id,onValueChange:J=>ae({...ie,category_id:J}),children:[e.jsx(St,{children:e.jsx(Rt,{placeholder:"Select category"})}),e.jsx(Ct,{children:a.map(J=>e.jsx(Te,{value:J.id,children:J.name},J.id))})]})]})]}),["multiple_choice","single_choice"].includes(ie.question_type)&&e.jsxs("div",{children:[e.jsx(Se,{children:"Options"}),e.jsx("div",{className:"space-y-2",children:ie.options.map((J,ce)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ye,{value:J,onChange:Je=>{const ht=[...ie.options];ht[ce]=Je.target.value,ae({...ie,options:ht})},placeholder:`Option ${ce+1}`}),e.jsx(Vt,{checked:ie.correct_answer.includes(ce),onCheckedChange:Je=>{const ht=Je?[...ie.correct_answer,ce]:ie.correct_answer.filter(le=>le!==ce);ae({...ie,correct_answer:ht})}})]},ce))})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"question_explanation",children:"Explanation"}),e.jsx(ms,{id:"question_explanation",value:ie.explanation,onChange:J=>ae({...ie,explanation:J.target.value}),placeholder:"Explain the correct answer"})]})]}),e.jsxs(ir,{children:[e.jsx(ee,{variant:"outline",onClick:()=>P(!1),children:"Cancel"}),e.jsx(ee,{onClick:$e,children:"Create Question"})]})]})}),e.jsx(Ht,{open:H,onOpenChange:G,children:e.jsxs(Zt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Jt,{children:[e.jsx(es,{children:xe==="categories"?"Create New Category":"Create New Subcategory"}),e.jsx(ps,{children:xe==="categories"?"Add a new category to organize your questions":`Add a new subcategory under ${ge==null?void 0:ge.name}`})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"category_name",children:"Category Name *"}),e.jsx(Ye,{id:"category_name",value:we.name,onChange:J=>ve({...we,name:J.target.value}),placeholder:"Enter category name"})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"category_description",children:"Description"}),e.jsx(ms,{id:"category_description",value:we.description,onChange:J=>ve({...we,description:J.target.value}),placeholder:"Enter category description"})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"category_parent",children:"Parent Category"}),e.jsxs(At,{value:we.parent_id||"none",onValueChange:J=>ve({...we,parent_id:J==="none"?null:J}),disabled:xe==="subcategories",children:[e.jsx(St,{children:e.jsx(Rt,{placeholder:"Select parent category"})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"none",children:"No Parent"}),Xe().map(J=>e.jsx(Te,{value:J.id,children:J.name},J.id))]})]}),xe==="subcategories"&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["This will be a subcategory of ",ge==null?void 0:ge.name]})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"category_color",children:"Color"}),e.jsx(Ye,{id:"category_color",type:"color",value:we.color,onChange:J=>ve({...we,color:J.target.value})})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"category_icon",children:"Icon (e.g., smiley, book, star)"}),e.jsx(Ye,{id:"category_icon",value:we.icon,onChange:J=>ve({...we,icon:J.target.value}),placeholder:"Enter icon name (e.g., smiley, book, star)"})]})]}),e.jsxs(ir,{children:[e.jsx(ee,{variant:"outline",onClick:()=>G(!1),children:"Cancel"}),e.jsx(ee,{onClick:ue,children:"Create Category"})]})]})}),e.jsx(Ht,{open:$,onOpenChange:Y,children:e.jsxs(Zt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Jt,{children:[e.jsx(es,{children:"Edit Category"}),e.jsx(ps,{children:"Modify the details of the category"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"edit_category_name",children:"Category Name *"}),e.jsx(Ye,{id:"edit_category_name",value:we.name,onChange:J=>ve({...we,name:J.target.value}),placeholder:"Enter category name"})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"edit_category_description",children:"Description"}),e.jsx(ms,{id:"edit_category_description",value:we.description,onChange:J=>ve({...we,description:J.target.value}),placeholder:"Enter category description"})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"edit_category_parent",children:"Parent Category"}),e.jsxs(At,{value:we.parent_id||"none",onValueChange:J=>ve({...we,parent_id:J==="none"?null:J}),children:[e.jsx(St,{children:e.jsx(Rt,{placeholder:"Select parent category"})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"none",children:"No Parent"}),Xe().map(J=>e.jsx(Te,{value:J.id,children:J.name},J.id))]})]})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"edit_category_color",children:"Color"}),e.jsx(Ye,{id:"edit_category_color",type:"color",value:we.color,onChange:J=>ve({...we,color:J.target.value})})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"edit_category_icon",children:"Icon (e.g., smiley, book, star)"}),e.jsx(Ye,{id:"edit_category_icon",value:we.icon,onChange:J=>ve({...we,icon:J.target.value}),placeholder:"Enter icon name (e.g., smiley, book, star)"})]})]}),e.jsxs(ir,{children:[e.jsx(ee,{variant:"outline",onClick:()=>Y(!1),children:"Cancel"}),e.jsx(ee,{onClick:oe,children:"Save Changes"})]})]})}),e.jsx(Ht,{open:F,onOpenChange:O,children:e.jsxs(Zt,{className:"max-w-sm max-h-[90vh] overflow-y-auto",children:[e.jsxs(Jt,{children:[e.jsx(es,{children:"Are you absolutely sure?"}),e.jsx(ps,{children:"This action cannot be undone. This will permanently delete your category."})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(ee,{variant:"outline",onClick:()=>O(!1),children:"Cancel"}),e.jsx(ee,{variant:"destructive",onClick:_e,children:"Delete"})]})]})}),e.jsx(Ht,{open:B,onOpenChange:q,children:e.jsxs(Zt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Jt,{children:[e.jsxs(es,{className:"flex items-center gap-2",children:[e.jsx(Os,{className:"h-5 w-5"}),"Assessment Details"]}),e.jsx(ps,{children:"Comprehensive view of the assessment template and its configuration."})]}),j?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-lg border",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[xt(j.assessment_type),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:j.title}),e.jsx(et,{className:at(j.status),children:j.status})]}),j.description&&e.jsx("p",{className:"text-gray-600 mb-4",children:j.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ps,{className:"h-4 w-4"}),j.time_limit_minutes," minutes"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ra,{className:"h-4 w-4"}),j.total_points," points"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ar,{className:"h-4 w-4"}),j.question_count||0," questions"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(as,{className:"h-4 w-4"}),j.creator_name]})]})]}),e.jsx(et,{className:ft(j.difficulty_level),children:j.difficulty_level})]})}),e.jsx(Re,{children:e.jsx(De,{className:"p-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx(la,{className:"h-4 w-4"}),"Basic Info"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Type:"}),e.jsx("span",{className:"font-medium",children:j.assessment_type})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Difficulty:"}),e.jsx(et,{className:ft(j.difficulty_level),size:"sm",children:j.difficulty_level})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Time Limit:"}),e.jsxs("span",{className:"font-medium",children:[j.time_limit_minutes,"m"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Points:"}),e.jsx("span",{className:"font-medium",children:j.total_points})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Passing:"}),e.jsxs("span",{className:"font-medium",children:[j.passing_score,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Attempts:"}),e.jsx("span",{className:"font-medium",children:j.max_attempts})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx(la,{className:"h-4 w-4"}),"Settings"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Shuffle:"}),e.jsx(et,{variant:j.shuffle_questions?"default":"secondary",size:"sm",children:j.shuffle_questions?"On":"Off"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Results:"}),e.jsx(et,{variant:j.show_results_immediately?"default":"secondary",size:"sm",children:j.show_results_immediately?"Immediate":"Delayed"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Review:"}),e.jsx(et,{variant:j.allow_review?"default":"secondary",size:"sm",children:j.allow_review?"Allowed":"Disabled"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx(el,{className:"h-4 w-4"}),"Proctoring & Access"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Proctoring:"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${j.require_proctoring?"bg-green-500":"bg-gray-300"}`}),e.jsx("span",{className:"font-medium text-xs",children:j.require_proctoring?"Required":"None"})]})]}),j.proctoring_settings&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Type:"}),e.jsx("span",{className:"font-medium text-xs",children:j.proctoring_settings.proctoring_type||"None"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Access Password:"}),j.assignments&&j.assignments.length>0&&j.assignments[0].password?e.jsx("span",{className:"font-mono text-xs bg-gray-100 px-1 py-0.5 rounded text-green-600",children:j.assignments[0].password}):e.jsx("span",{className:"text-gray-400 text-xs italic",children:"None"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx(fr,{className:"h-4 w-4"}),"Scheduling"]}),e.jsx("div",{className:"space-y-2 text-sm",children:j.assignments&&j.assignments.length>0?j.assignments.map((J,ce)=>e.jsxs("div",{className:"border-l-2 border-blue-200 pl-2",children:[e.jsxs("div",{className:"text-xs font-medium text-gray-600 mb-1",children:["Assignment ",ce+1," (",J.assignment_type,")"]}),J.start_date_only&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 text-xs",children:"Start:"}),e.jsxs("span",{className:"font-medium text-xs",children:[new Date(J.start_date_only).toLocaleDateString(),J.start_time_only&&` ${J.start_time_only}`]})]}),J.end_date_only&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 text-xs",children:"End:"}),e.jsxs("span",{className:"font-medium text-xs",children:[new Date(J.end_date_only).toLocaleDateString(),J.end_time_only&&` ${J.end_time_only}`]})]}),J.assessment_timezone&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 text-xs",children:"TZ:"}),e.jsx("span",{className:"font-medium text-xs",children:J.assessment_timezone})]})]},J.id||ce)):j.scheduling&&e.jsxs(e.Fragment,{children:[j.scheduling.start_date&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 text-xs",children:"Start:"}),e.jsxs("span",{className:"font-medium text-xs",children:[new Date(j.scheduling.start_date).toLocaleDateString(),j.scheduling.start_time&&` ${j.scheduling.start_time}`]})]}),j.scheduling.end_date&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 text-xs",children:"End:"}),e.jsxs("span",{className:"font-medium text-xs",children:[new Date(j.scheduling.end_date).toLocaleDateString(),j.scheduling.end_time&&` ${j.scheduling.end_time}`]})]})]})})]})]})})})}),(j.instructions||j.tags&&Array.isArray(j.tags)&&j.tags.length>0)&&e.jsx(Re,{children:e.jsx(De,{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[j.instructions&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2 mb-2",children:[e.jsx(Os,{className:"h-4 w-4"}),"Instructions"]}),e.jsx("div",{className:"bg-gray-50 p-3 rounded text-sm text-gray-700 max-h-32 overflow-y-auto",children:e.jsx("p",{className:"whitespace-pre-wrap",children:j.instructions})})]}),j.tags&&Array.isArray(j.tags)&&j.tags.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2 mb-2",children:[e.jsx(gy,{className:"h-4 w-4"}),"Tags"]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:j.tags.map((J,ce)=>e.jsx(et,{variant:"outline",className:"text-xs",children:J},ce))})]})]})})}),j.sections&&j.sections.length>0&&e.jsx(Re,{children:e.jsxs(De,{className:"p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2 mb-3",children:[e.jsx(lr,{className:"h-4 w-4"}),"Sections & Questions"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:j.sections.map((J,ce)=>e.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:J.name}),e.jsxs(et,{variant:"outline",className:"text-xs",children:[J.questions?J.questions.length:0,"q"]})]}),J.description&&e.jsx("p",{className:"text-xs text-gray-600 mb-2 line-clamp-2",children:J.description}),J.questions&&J.questions.length>0&&e.jsxs("div",{className:"space-y-1",children:[J.questions.slice(0,2).map((Je,ht)=>e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-600",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full flex-shrink-0"}),e.jsx("span",{className:"truncate flex-1",children:Je.title||"Untitled"}),e.jsxs("span",{className:"text-xs text-gray-500",children:[Je.points||1,"p"]})]},ht)),J.questions.length>2&&e.jsxs("div",{className:"text-xs text-gray-500 italic",children:["+",J.questions.length-2," more"]})]})]},J.id||ce))})]})})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Os,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No assessment selected for viewing."})]}),e.jsxs(ir,{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("div",{className:"flex gap-2 order-2 sm:order-1",children:[e.jsx(ee,{variant:"outline",onClick:()=>q(!1),children:"Close"}),e.jsxs(ee,{variant:"outline",onClick:()=>tt(j),disabled:D,children:[e.jsx(Ho,{className:"h-4 w-4 mr-2"}),"Duplicate"]})]}),e.jsxs("div",{className:"flex gap-2 order-1 sm:order-2",children:[e.jsxs(ee,{onClick:()=>je(j),children:[e.jsx(wr,{className:"h-4 w-4 mr-2"}),"Edit with Wizard"]}),e.jsxs(ee,{variant:"destructive",onClick:()=>Ge(j),disabled:D,children:[e.jsx(xl,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})}),e.jsx(Ht,{open:z,onOpenChange:k,children:e.jsxs(Zt,{className:"max-w-sm max-h-[90vh] overflow-y-auto",children:[e.jsxs(Jt,{children:[e.jsx(es,{children:"Are you absolutely sure?"}),e.jsx(ps,{children:"This action cannot be undone. This will permanently delete your assessment."})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(ee,{variant:"outline",onClick:()=>k(!1),children:"Cancel"}),e.jsx(ee,{variant:"destructive",onClick:yt,disabled:D,children:D?"Deleting...":"Delete"})]})]})}),e.jsx(oz,{isOpen:R,onClose:()=>{S(!1),I(null)},assessment:E,onCopy:kt,loading:D})]})})},cz=[{value:"none",label:"None"},{value:"basic",label:"Basic"},{value:"advanced",label:"Advanced"},{value:"ai",label:"AI Proctoring"}],Nd=[{value:"multiple_choice",label:"Multiple Choice",icon:""},{value:"single_choice",label:"Single Choice",icon:""},{value:"true_false",label:"True/False",icon:""},{value:"short_answer",label:"Short Answer",icon:""},{value:"essay",label:"Essay",icon:""},{value:"coding",label:"Coding",icon:""},{value:"fill_blanks",label:"Fill Blanks",icon:""}];function dz({formData:t,updateFormData:r}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Basic Information"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Provide the fundamental details about your assessment."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Assessment Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ye,{value:t.title,onChange:s=>r({title:s.target.value}),placeholder:"Enter assessment title",className:"w-full"})]}),!t.require_proctoring&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx(ms,{value:t.description,onChange:s=>r({description:s.target.value}),placeholder:"Provide a brief description of the assessment",rows:4,className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Instructions"}),e.jsx(ms,{value:t.instructions,onChange:s=>r({instructions:s.target.value}),placeholder:"Provide detailed instructions for students taking this assessment",rows:6,className:"w-full"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"These instructions will be shown to students before they begin the assessment."})]})]})}const uz=[{value:"beginner",label:"Beginner"},{value:"intermediate",label:"Intermediate"},{value:"advanced",label:"Advanced"},{value:"expert",label:"Expert"}];function hz({formData:t,updateFormData:r}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Assessment Settings"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Configure the assessment parameters and behavior."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Limit (minutes)"}),e.jsx(Ye,{type:"text",value:t.time_limit_minutes||"",onChange:s=>{const n=s.target.value.trim();if(n==="")r({time_limit_minutes:null});else{const c=parseInt(n);!isNaN(c)&&c>0&&r({time_limit_minutes:c})}},placeholder:"Leave empty for no time limit",className:"w-full"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Leave empty for no time limit"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Per-Question Time Limit (seconds)"}),e.jsx(Ye,{type:"text",value:t.per_question_time_limit||"",onChange:s=>{const n=s.target.value.trim();if(n==="")r({per_question_time_limit:null});else{const c=parseInt(n);!isNaN(c)&&c>0&&r({per_question_time_limit:c})}},placeholder:"Optional",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Points"}),e.jsx(Ye,{type:"number",value:Number(t.sections.reduce((s,n)=>s+n.questions.reduce((c,o)=>c+(Number(o.points)||1),0),0)).toFixed(2),readOnly:!0,className:"w-full bg-gray-50"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Auto-calculated from questions"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Passing Score (%)"}),e.jsx(Ye,{type:"number",value:t.passing_score,onChange:s=>r({passing_score:parseInt(s.target.value)||0}),placeholder:"70",min:"0",max:"100",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Attempts"}),e.jsx(Ye,{type:"number",value:t.max_attempts,onChange:s=>r({max_attempts:parseInt(s.target.value)||1}),placeholder:"1",min:"1",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Between Attempts (hours)"}),e.jsx(Ye,{type:"number",value:t.time_between_attempts_hours,onChange:s=>r({time_between_attempts_hours:parseInt(s.target.value)||0}),placeholder:"24",min:"0",className:"w-full"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Difficulty Level"}),e.jsxs(At,{value:t.difficulty_level,onValueChange:s=>r({difficulty_level:s}),children:[e.jsx(St,{children:e.jsx(Rt,{})}),e.jsx(Ct,{children:uz.map(s=>e.jsx(Te,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Display Options"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"shuffle_questions",checked:t.shuffle_questions,onCheckedChange:s=>r({shuffle_questions:s})}),e.jsx("label",{htmlFor:"shuffle_questions",className:"text-sm font-medium",children:"Shuffle Questions"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"show_results_immediately",checked:t.show_results_immediately,onCheckedChange:s=>r({show_results_immediately:s})}),e.jsx("label",{htmlFor:"show_results_immediately",className:"text-sm font-medium",children:"Show Results Immediately"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"allow_review",checked:t.allow_review,onCheckedChange:s=>r({allow_review:s})}),e.jsx("label",{htmlFor:"allow_review",className:"text-sm font-medium",children:"Allow Review After Submission"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"show_correct_answers",checked:t.show_correct_answers,onCheckedChange:s=>r({show_correct_answers:s})}),e.jsx("label",{htmlFor:"show_correct_answers",className:"text-sm font-medium",children:"Show Correct Answers After Submission"})]})]})]})]})}function fz({formData:t,updateFormData:r}){const[s,n]=A.useState({}),[c,o]=A.useState(null),a=()=>new Date().toISOString().split("T")[0],d=()=>new Date().toTimeString().slice(0,5);A.useEffect(()=>{t.start_date||r({start_date:a()}),t.start_time||r({start_time:d()}),t.end_date||r({end_date:a()}),t.end_time||r({end_time:d()}),t.assessment_timezone||r({assessment_timezone:"UTC"})},[]),A.useEffect(()=>{t.start_date&&t.start_time&&t.end_date&&t.end_time&&t.assessment_timezone&&o({start:`${t.start_date} ${t.start_time}`,end:`${t.end_date} ${t.end_time}`,timezone:t.assessment_timezone})},[t.start_date,t.start_time,t.end_date,t.end_time,t.assessment_timezone]);const l=A.useMemo(()=>{const f={};return t.start_date||(f.start_date="Start date is required"),t.start_time||(f.start_time="Start time is required"),t.end_date||(f.end_date="End date is required"),t.end_time||(f.end_time="End time is required"),t.assessment_timezone||(f.assessment_timezone="Assessment timezone is required"),t.start_date&&t.end_date&&t.start_date>t.end_date&&(f.end_date="End date must be after start date"),t.start_date&&t.end_date&&t.start_time&&t.end_time&&t.start_date===t.end_date&&t.start_time>=t.end_time&&(f.end_time="End time must be after start time on the same day"),t.early_access_hours&&t.early_access_hours>72&&(f.early_access_hours="Early access cannot exceed 72 hours"),t.late_submission_minutes&&t.late_submission_minutes>1440&&(f.late_submission_minutes="Late submission window cannot exceed 24 hours"),{errors:f,isValid:Object.keys(f).length===0}},[t]);A.useEffect(()=>{n(l.errors)},[l.errors]);const i=(f,h)=>{r({[f]:h}),s[f]&&n(m=>({...m,[f]:null}))},u=f=>{const h=XB(f);r({assessment_country:f,assessment_timezone:h}),s.assessment_timezone&&n(m=>({...m,assessment_timezone:null}))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Assessment Scheduling"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Set the assessment availability and timing. All times will be treated as local time in the selected timezone."})]}),e.jsxs(Re,{children:[e.jsxs(lt,{children:[e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(fr,{className:"h-5 w-5"}),"Date and Time Settings"]}),e.jsx(ts,{children:"Set when the assessment will be available to students"})]}),e.jsx(De,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsxs(Se,{htmlFor:"start_date",className:"text-sm font-medium",children:["Start Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ye,{id:"start_date",type:"date",value:t.start_date||"",onChange:f=>i("start_date",f.target.value),min:a(),className:s.start_date?"border-red-500":"",required:!0}),s.start_date&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:s.start_date})]}),e.jsxs("div",{children:[e.jsxs(Se,{htmlFor:"start_time",className:"text-sm font-medium",children:["Start Time ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ye,{id:"start_time",type:"time",value:t.start_time||"",onChange:f=>i("start_time",f.target.value),className:s.start_time?"border-red-500":"",required:!0}),s.start_time&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:s.start_time})]}),e.jsxs("div",{children:[e.jsxs(Se,{htmlFor:"end_date",className:"text-sm font-medium",children:["End Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ye,{id:"end_date",type:"date",value:t.end_date||"",onChange:f=>i("end_date",f.target.value),min:t.start_date||a(),className:s.end_date?"border-red-500":"",required:!0}),s.end_date&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:s.end_date})]}),e.jsxs("div",{children:[e.jsxs(Se,{htmlFor:"end_time",className:"text-sm font-medium",children:["End Time ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ye,{id:"end_time",type:"time",value:t.end_time||"",onChange:f=>i("end_time",f.target.value),className:s.end_time?"border-red-500":"",required:!0}),s.end_time&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:s.end_time})]})]})})]}),e.jsxs(Re,{children:[e.jsx(lt,{}),e.jsx(De,{children:e.jsxs("div",{children:[e.jsxs(Se,{htmlFor:"assessment_timezone",className:"text-sm font-medium",children:["Assessment Timezone (Country) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(J5,{value:t.assessment_country||"",onValueChange:u,placeholder:"Select country for assessment timezone"}),t.assessment_timezone&&e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx(et,{variant:"outline",className:"text-sm",children:t.assessment_timezone}),e.jsx("span",{className:"text-sm text-gray-500",children:"Times will be treated as local time in this timezone"})]}),s.assessment_timezone&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:s.assessment_timezone})]})})]}),e.jsxs(Re,{children:[e.jsxs(lt,{children:[e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(Ps,{className:"h-5 w-5"}),"Access Control"]}),e.jsx(ts,{children:"Configure early access and late submission windows"})]}),e.jsx(De,{children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"early_access_hours",className:"text-sm font-medium",children:"Early Access (hours)"}),e.jsx(Ye,{id:"early_access_hours",type:"number",min:"0",max:"72",value:t.early_access_hours||0,onChange:f=>r({early_access_hours:parseInt(f.target.value)||0}),placeholder:"0",className:s.early_access_hours?"border-red-500":""}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Hours before start time students can access the assessment"}),s.early_access_hours&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:s.early_access_hours})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"late_submission_minutes",className:"text-sm font-medium",children:"Late Submission Window (minutes)"}),e.jsx(Ye,{id:"late_submission_minutes",type:"number",min:"0",max:"1440",value:t.late_submission_minutes||0,onChange:f=>r({late_submission_minutes:parseInt(f.target.value)||0}),placeholder:"0",className:s.late_submission_minutes?"border-red-500":""}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Minutes after end time submissions are still accepted"}),s.late_submission_minutes&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:s.late_submission_minutes})]})]})})]}),c&&e.jsxs(Re,{children:[e.jsxs(lt,{children:[e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(Yt,{className:"h-5 w-5 text-green-600"}),"Schedule Preview"]}),e.jsx(ts,{children:"Preview of your assessment schedule"})]}),e.jsx(De,{children:e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-green-800",children:"Start:"}),e.jsxs("span",{className:"text-green-700",children:[c.start," (",c.timezone,")"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-green-800",children:"End:"}),e.jsxs("span",{className:"text-green-700",children:[c.end," (",c.timezone,")"]})]}),t.early_access_hours>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-green-800",children:"Early Access:"}),e.jsxs("span",{className:"text-green-700",children:[t.early_access_hours," hours before start"]})]}),t.late_submission_minutes>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-green-800",children:"Late Window:"}),e.jsxs("span",{className:"text-green-700",children:[t.late_submission_minutes," minutes after end"]})]})]})})})]}),Object.keys(s).length>0&&e.jsxs(pr,{variant:"destructive",children:[e.jsx(Ms,{className:"h-4 w-4"}),e.jsxs(gr,{children:["Please fix the following errors:",e.jsx("ul",{className:"mt-2 list-disc list-inside",children:Object.values(s).filter(Boolean).map((f,h)=>e.jsx("li",{children:f},h))})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["All fields marked with ",e.jsx("span",{className:"text-red-500",children:"*"})," are required"]}),e.jsx("div",{className:"flex items-center gap-2",children:l.isValid?e.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[e.jsx(Yt,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Schedule is valid"})]}):e.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[e.jsx(Ms,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Please fix validation errors"})]})})]})]})}function mz({formData:t,updateFormData:r}){const s=async a=>{try{return a==="webcam"?((await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(l=>l.stop()),!0):(a==="microphone"&&(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(l=>l.stop()),!0)}catch(d){return console.error(`Permission denied for ${a}:`,d),alert(`Permission denied for ${a}. Please allow access to continue.`),!1}},n=async(a,d)=>{d&&(a==="require_webcam"||a==="require_microphone")&&!await s(a==="require_webcam"?"webcam":"microphone")||r({[a]:d})},c=a=>{r({require_proctoring:a,proctoring_type:a?"basic":"none"})},o=a=>{r({proctoring_type:a}),a==="none"?r({browser_lockdown:!1,tab_switching_detection:!1,copy_paste_detection:!1,right_click_detection:!1,fullscreen_requirement:!1,keyboard_shortcut_detection:!1,require_webcam:!1,require_microphone:!1,screen_sharing_detection:!1,multiple_device_detection:!1,plagiarism_detection:!1,face_detection:!1,voice_detection:!1,background_noise_detection:!1,eye_tracking_detection:!1,behavioral_analysis:!1,facial_recognition:!1,emotion_detection:!1,attention_monitoring:!1,suspicious_activity_detection:!1,ai_plagiarism_detection:!1,voice_analysis:!1,gesture_recognition:!1,real_time_alerts:!1}):a==="basic"?r({browser_lockdown:!0,tab_switching_detection:!0,copy_paste_detection:!0,right_click_detection:!0,fullscreen_requirement:!0,keyboard_shortcut_detection:!0,require_webcam:!1,require_microphone:!1,screen_sharing_detection:!1,multiple_device_detection:!1,plagiarism_detection:!1,face_detection:!1,voice_detection:!1,background_noise_detection:!1,eye_tracking_detection:!1,behavioral_analysis:!1,facial_recognition:!1,emotion_detection:!1,attention_monitoring:!1,suspicious_activity_detection:!1,ai_plagiarism_detection:!1,voice_analysis:!1,gesture_recognition:!1,real_time_alerts:!1}):a==="advanced"?r({browser_lockdown:!0,tab_switching_detection:!0,copy_paste_detection:!0,right_click_detection:!0,fullscreen_requirement:!0,keyboard_shortcut_detection:!0,require_webcam:!0,require_microphone:!0,screen_sharing_detection:!0,multiple_device_detection:!0,plagiarism_detection:!0,face_detection:!0,voice_detection:!0,background_noise_detection:!0,eye_tracking_detection:!0,behavioral_analysis:!1,facial_recognition:!1,emotion_detection:!1,attention_monitoring:!1,suspicious_activity_detection:!1,ai_plagiarism_detection:!1,voice_analysis:!1,gesture_recognition:!1,real_time_alerts:!1}):a==="ai"&&r({browser_lockdown:!0,tab_switching_detection:!0,copy_paste_detection:!0,right_click_detection:!0,fullscreen_requirement:!0,keyboard_shortcut_detection:!0,require_webcam:!0,require_microphone:!0,screen_sharing_detection:!0,multiple_device_detection:!0,plagiarism_detection:!0,face_detection:!0,voice_detection:!0,background_noise_detection:!0,eye_tracking_detection:!0,behavioral_analysis:!0,facial_recognition:!0,emotion_detection:!0,attention_monitoring:!0,suspicious_activity_detection:!0,ai_plagiarism_detection:!0,voice_analysis:!0,gesture_recognition:!0,real_time_alerts:!0})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Proctoring Settings"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Configure automated proctoring features for this assessment."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"require_proctoring",checked:t.require_proctoring,onCheckedChange:c}),e.jsx("label",{htmlFor:"require_proctoring",className:"text-sm font-medium",children:"Enable Proctoring"})]}),t.require_proctoring&&e.jsxs("div",{className:"space-y-4 pl-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Proctoring Type"}),e.jsxs(At,{value:t.proctoring_type,onValueChange:o,children:[e.jsx(St,{children:e.jsx(Rt,{})}),e.jsx(Ct,{children:cz.map(a=>e.jsx(Te,{value:a.value,children:a.label},a.value))})]})]}),(t.proctoring_type==="basic"||t.proctoring_type==="advanced"||t.proctoring_type==="ai")&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Basic Proctoring Features"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"browser_lockdown",checked:t.browser_lockdown,onCheckedChange:a=>r({browser_lockdown:a}),disabled:t.proctoring_type==="advanced"||t.proctoring_type==="ai"}),e.jsxs("label",{htmlFor:"browser_lockdown",className:`text-sm font-medium ${t.proctoring_type==="advanced"||t.proctoring_type==="ai"?"text-gray-500":""}`,children:["Browser Lockdown",(t.proctoring_type==="advanced"||t.proctoring_type==="ai")&&e.jsx("span",{className:"text-xs text-blue-600 ml-1",children:"(Required)"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"tab_switching_detection",checked:t.tab_switching_detection,onCheckedChange:a=>r({tab_switching_detection:a}),disabled:t.proctoring_type==="advanced"||t.proctoring_type==="ai"}),e.jsxs("label",{htmlFor:"tab_switching_detection",className:`text-sm font-medium ${t.proctoring_type==="advanced"||t.proctoring_type==="ai"?"text-gray-500":""}`,children:["Tab Switching Detection",(t.proctoring_type==="advanced"||t.proctoring_type==="ai")&&e.jsx("span",{className:"text-xs text-blue-600 ml-1",children:"(Required)"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"copy_paste_detection",checked:t.copy_paste_detection,onCheckedChange:a=>r({copy_paste_detection:a}),disabled:t.proctoring_type==="advanced"||t.proctoring_type==="ai"}),e.jsxs("label",{htmlFor:"copy_paste_detection",className:`text-sm font-medium ${t.proctoring_type==="advanced"||t.proctoring_type==="ai"?"text-gray-500":""}`,children:["Copy/Paste Detection",(t.proctoring_type==="advanced"||t.proctoring_type==="ai")&&e.jsx("span",{className:"text-xs text-blue-600 ml-1",children:"(Required)"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"right_click_detection",checked:t.right_click_detection,onCheckedChange:a=>r({right_click_detection:a}),disabled:t.proctoring_type==="advanced"||t.proctoring_type==="ai"}),e.jsxs("label",{htmlFor:"right_click_detection",className:`text-sm font-medium ${t.proctoring_type==="advanced"||t.proctoring_type==="ai"?"text-gray-500":""}`,children:["Right-Click Detection",(t.proctoring_type==="advanced"||t.proctoring_type==="ai")&&e.jsx("span",{className:"text-xs text-blue-600 ml-1",children:"(Required)"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"fullscreen_requirement",checked:t.fullscreen_requirement,onCheckedChange:a=>r({fullscreen_requirement:a}),disabled:t.proctoring_type==="advanced"||t.proctoring_type==="ai"}),e.jsxs("label",{htmlFor:"fullscreen_requirement",className:`text-sm font-medium ${t.proctoring_type==="advanced"||t.proctoring_type==="ai"?"text-gray-500":""}`,children:["Require Fullscreen Mode",(t.proctoring_type==="advanced"||t.proctoring_type==="ai")&&e.jsx("span",{className:"text-xs text-blue-600 ml-1",children:"(Required)"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"keyboard_shortcut_detection",checked:t.keyboard_shortcut_detection,onCheckedChange:a=>r({keyboard_shortcut_detection:a}),disabled:t.proctoring_type==="advanced"||t.proctoring_type==="ai"}),e.jsxs("label",{htmlFor:"keyboard_shortcut_detection",className:`text-sm font-medium ${t.proctoring_type==="advanced"||t.proctoring_type==="ai"?"text-gray-500":""}`,children:["Keyboard Shortcut Detection",(t.proctoring_type==="advanced"||t.proctoring_type==="ai")&&e.jsx("span",{className:"text-xs text-blue-600 ml-1",children:"(Required)"})]})]})]}),t.tab_switching_detection&&e.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"max_tab_switches",className:"text-sm font-medium text-blue-800",children:"Maximum Allowed Tab Switches"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ye,{id:"max_tab_switches",type:"number",min:"0",max:"100",value:t.max_tab_switches||0,onChange:a=>r({max_tab_switches:parseInt(a.target.value)||0}),className:"w-24",placeholder:"0"}),e.jsx("span",{className:"text-sm text-gray-600",children:"(0 = unlimited, assessment will auto-submit when exceeded)"})]}),e.jsx("p",{className:"text-xs text-blue-600",children:"When students exceed this limit, their assessment will be automatically submitted."})]})})]}),(t.proctoring_type==="advanced"||t.proctoring_type==="ai")&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Advanced Proctoring Features"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"require_webcam",checked:t.require_webcam,onCheckedChange:a=>n("require_webcam",a),disabled:t.proctoring_type==="ai"}),e.jsxs("label",{htmlFor:"require_webcam",className:`text-sm font-medium ${t.proctoring_type==="ai"?"text-gray-500":""}`,children:["Require Webcam",t.proctoring_type==="ai"&&e.jsx("span",{className:"text-xs text-blue-600 ml-1",children:"(Required)"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"require_microphone",checked:t.require_microphone,onCheckedChange:a=>n("require_microphone",a),disabled:t.proctoring_type==="ai"}),e.jsxs("label",{htmlFor:"require_microphone",className:`text-sm font-medium ${t.proctoring_type==="ai"?"text-gray-500":""}`,children:["Require Microphone",t.proctoring_type==="ai"&&e.jsx("span",{className:"text-xs text-blue-600 ml-1",children:"(Required)"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"screen_sharing_detection",checked:t.screen_sharing_detection,onCheckedChange:a=>r({screen_sharing_detection:a}),disabled:t.proctoring_type==="ai"}),e.jsxs("label",{htmlFor:"screen_sharing_detection",className:`text-sm font-medium ${t.proctoring_type==="ai"?"text-gray-500":""}`,children:["Screen Sharing Detection",t.proctoring_type==="ai"&&e.jsx("span",{className:"text-xs text-blue-600 ml-1",children:"(Required)"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"multiple_device_detection",checked:t.multiple_device_detection,onCheckedChange:a=>r({multiple_device_detection:a}),disabled:t.proctoring_type==="ai"}),e.jsxs("label",{htmlFor:"multiple_device_detection",className:`text-sm font-medium ${t.proctoring_type==="ai"?"text-gray-500":""}`,children:["Multiple Device Detection",t.proctoring_type==="ai"&&e.jsx("span",{className:"text-xs text-blue-600 ml-1",children:"(Required)"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"plagiarism_detection",checked:t.plagiarism_detection,onCheckedChange:a=>r({plagiarism_detection:a}),disabled:t.proctoring_type==="ai"}),e.jsxs("label",{htmlFor:"plagiarism_detection",className:`text-sm font-medium ${t.proctoring_type==="ai"?"text-gray-500":""}`,children:["Plagiarism Detection",t.proctoring_type==="ai"&&e.jsx("span",{className:"text-xs text-blue-600 ml-1",children:"(Required)"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"face_detection",checked:t.face_detection,onCheckedChange:a=>r({face_detection:a}),disabled:t.proctoring_type==="ai"}),e.jsxs("label",{htmlFor:"face_detection",className:`text-sm font-medium ${t.proctoring_type==="ai"?"text-gray-500":""}`,children:["Face Detection",t.proctoring_type==="ai"&&e.jsx("span",{className:"text-xs text-blue-600 ml-1",children:"(Required)"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"voice_detection",checked:t.voice_detection,onCheckedChange:a=>r({voice_detection:a}),disabled:t.proctoring_type==="ai"}),e.jsxs("label",{htmlFor:"voice_detection",className:`text-sm font-medium ${t.proctoring_type==="ai"?"text-gray-500":""}`,children:["Voice Detection",t.proctoring_type==="ai"&&e.jsx("span",{className:"text-xs text-blue-600 ml-1",children:"(Required)"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"background_noise_detection",checked:t.background_noise_detection,onCheckedChange:a=>r({background_noise_detection:a}),disabled:t.proctoring_type==="ai"}),e.jsxs("label",{htmlFor:"background_noise_detection",className:`text-sm font-medium ${t.proctoring_type==="ai"?"text-gray-500":""}`,children:["Background Noise Detection",t.proctoring_type==="ai"&&e.jsx("span",{className:"text-xs text-blue-600 ml-1",children:"(Required)"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"eye_tracking_detection",checked:t.eye_tracking_detection,onCheckedChange:a=>r({eye_tracking_detection:a}),disabled:t.proctoring_type==="ai"}),e.jsxs("label",{htmlFor:"eye_tracking_detection",className:`text-sm font-medium ${t.proctoring_type==="ai"?"text-gray-500":""}`,children:["Eye Tracking",t.proctoring_type==="ai"&&e.jsx("span",{className:"text-xs text-blue-600 ml-1",children:"(Required)"})]})]})]})]}),t.proctoring_type==="ai"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"AI Proctoring Features"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"behavioral_analysis",checked:t.behavioral_analysis,onCheckedChange:a=>r({behavioral_analysis:a})}),e.jsx("label",{htmlFor:"behavioral_analysis",className:"text-sm font-medium",children:"Behavioral Analysis"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"facial_recognition",checked:t.facial_recognition,onCheckedChange:a=>r({facial_recognition:a})}),e.jsx("label",{htmlFor:"facial_recognition",className:"text-sm font-medium",children:"Facial Recognition"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"emotion_detection",checked:t.emotion_detection,onCheckedChange:a=>r({emotion_detection:a})}),e.jsx("label",{htmlFor:"emotion_detection",className:"text-sm font-medium",children:"Emotion Detection"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"attention_monitoring",checked:t.attention_monitoring,onCheckedChange:a=>r({attention_monitoring:a})}),e.jsx("label",{htmlFor:"attention_monitoring",className:"text-sm font-medium",children:"Attention Monitoring"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"suspicious_activity_detection",checked:t.suspicious_activity_detection,onCheckedChange:a=>r({suspicious_activity_detection:a})}),e.jsx("label",{htmlFor:"suspicious_activity_detection",className:"text-sm font-medium",children:"Suspicious Activity Detection"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"ai_plagiarism_detection",checked:t.ai_plagiarism_detection,onCheckedChange:a=>r({ai_plagiarism_detection:a})}),e.jsx("label",{htmlFor:"ai_plagiarism_detection",className:"text-sm font-medium",children:"AI-Powered Plagiarism Detection"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"voice_analysis",checked:t.voice_analysis,onCheckedChange:a=>r({voice_analysis:a})}),e.jsx("label",{htmlFor:"voice_analysis",className:"text-sm font-medium",children:"Voice Analysis"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"gesture_recognition",checked:t.gesture_recognition,onCheckedChange:a=>r({gesture_recognition:a})}),e.jsx("label",{htmlFor:"gesture_recognition",className:"text-sm font-medium",children:"Gesture Recognition"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"real_time_alerts",checked:t.real_time_alerts,onCheckedChange:a=>r({real_time_alerts:a})}),e.jsx("label",{htmlFor:"real_time_alerts",className:"text-sm font-medium",children:"Real-time AI Alerts"})]})]})]})]})]})]})}function pz({formData:t,updateFormData:r,colleges:s}){const[n,c]=A.useState(""),[o,a]=A.useState(""),[d,l]=A.useState([]),[i,u]=A.useState([]),[f,h]=A.useState({}),[m,p]=A.useState({}),[x,g]=A.useState({}),[v,y]=A.useState(!1),[b,C]=A.useState(!1);A.useEffect(()=>{if(Array.isArray(s))if(n.trim()){const P=s.filter(B=>{var q;return B.name.toLowerCase().includes(n.toLowerCase())||((q=B.code)==null?void 0:q.toLowerCase().includes(n.toLowerCase()))});l(P)}else l([]);else l([])},[n,s]),A.useEffect(()=>{(async()=>{const B=t.assigned_colleges||[];if(B.length===0){p({}),g({});return}try{y(!0),C(!0);const q={},z={};for(const k of B)try{const R=await Pe.getSuperAdminCollegeDetails(k);if(R.success&&R.data){const w=R.data;q[k]={college_name:w.name,departments:w.departments||[]}}const S=await Pe.getBatches({college_id:k});if(S.success&&S.data){const w=s.find(_=>_.id===k);z[k]={college_name:(w==null?void 0:w.name)||`College ${k}`,batches:S.data||[]}}}catch(R){console.error(`Error loading data for college ${k}:`,R)}p(q),g(z)}catch(q){console.error("Error loading departments and batches:",q),p({}),g({})}finally{y(!1),C(!1)}})()},[t.assigned_colleges]),A.useEffect(()=>{const B=setTimeout(async()=>{if(o.trim())try{const q=await Pe.getSuperAdminUsers({role:"student",search:o,limit:20});q.success&&q.data&&Array.isArray(q.data)?u(q.data):u([])}catch(q){console.error("Error searching students:",q),u([])}else u([])},150);return()=>clearTimeout(B)},[o]),A.useEffect(()=>{(async()=>{const B=t.assigned_students||[];if(B.length>0)try{const q=B.map(async S=>{try{const w=await Pe.getSuperAdminUserById(S);if(w.success&&w.data)return{id:S,data:w.data}}catch(w){console.error(`Error loading student data for ${S}:`,w)}return null}),k=(await Promise.all(q)).filter(S=>S!==null),R={};k.forEach(S=>{R[S.id]=S.data}),h(S=>({...S,...R}))}catch(q){console.error("Error loading existing student data:",q)}})()},[t.assigned_students]);const T=(P,B,q)=>{const z=`assigned_${P}s`,k=t[z]||[];if(q){if(P==="student"){const R=i.find(S=>S.id===B);R&&h(S=>({...S,[B]:R}))}r({[z]:[...k,B]})}else P==="student"&&h(R=>{const S={...R};return delete S[B],S}),r({[z]:k.filter(R=>R!==B)})},M=(P,B)=>{const q=`assigned_${P}s`,z=t[q]||[];P==="student"&&h(k=>{const R={...k};return delete R[B],R}),r({[q]:z.filter(k=>k!==B)})},U=(P,B,q)=>{const z=t.assigned_departments||[];r(q?{assigned_departments:[...z,{college_id:P,department_id:B}]}:{assigned_departments:z.filter(k=>!(k.college_id===P&&k.department_id===B))})},L=(P,B,q)=>{const z=t.assigned_batches||[];r(q?{assigned_batches:[...z,{college_id:P,batch_id:B}]}:{assigned_batches:z.filter(k=>!(k.college_id===P&&k.batch_id===B))})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Assignment"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Assign this assessment to colleges, departments, batches, or individual students"})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"College Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(hn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Ye,{type:"text",placeholder:"Search colleges...",value:n,onChange:P=>c(P.target.value),className:"pl-10"})]}),n&&d.length>0&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:d.map(P=>e.jsxs("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-100 last:border-b-0",onClick:B=>{B.preventDefault(),B.stopPropagation(),T("college",P.id,!0),c("")},children:[e.jsx("div",{className:"font-medium",children:P.name}),P.code&&e.jsx("div",{className:"text-sm text-gray-500",children:P.code})]},P.id))})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selected College"}),e.jsx("div",{className:"min-h-[40px] p-2 border border-gray-300 rounded-md bg-gray-50",children:(t.assigned_colleges||[]).length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:t.assigned_colleges.map(P=>{const B=s.find(q=>q.id===P);return e.jsxs(et,{variant:"secondary",className:"flex items-center gap-1",children:[(B==null?void 0:B.name)||`College ${P}`,e.jsx("button",{type:"button",onClick:()=>M("college",P),className:"ml-1 hover:text-red-600",children:e.jsx(Dn,{className:"w-3 h-3"})})]},P)})}):e.jsx("span",{className:"text-gray-500 text-sm",children:"No colleges selected"})})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Department"}),(t.assigned_colleges||[]).length===0?e.jsx("div",{className:"border border-gray-300 rounded-md p-4",children:e.jsx("p",{className:"text-gray-500 text-center",children:"Select colleges first to assign departments"})}):v?e.jsx("div",{className:"border border-gray-300 rounded-md p-4",children:e.jsx("p",{className:"text-gray-500 text-center",children:"Loading departments..."})}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs(At,{value:"",onValueChange:P=>{if(P&&P!=="no-departments"){const B=t.assigned_colleges||[];for(const q of B){const z=m[q];if(z&&z.departments&&z.departments.find(R=>R.id===P)){U(q,P,!0);break}}}},children:[e.jsx(St,{className:"w-full",children:e.jsx(Rt,{placeholder:"Select department from all colleges..."})}),e.jsx(Ct,{children:(()=>{const P=[];return(t.assigned_colleges||[]).forEach(q=>{const z=s.find(R=>R.id===q),k=m[q];k&&k.departments&&k.departments.forEach(R=>{P.push({id:R.id,name:R.name,collegeId:q,collegeName:(z==null?void 0:z.name)||`College ${q}`})})}),P.length>0?P.map(q=>e.jsxs(Te,{value:q.id,children:[q.collegeName," - ",q.name]},q.id)):e.jsx(Te,{value:"no-departments",disabled:!0,children:"No departments found"})})()})]}),(t.assigned_departments||[]).length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:(t.assigned_departments||[]).map(P=>{var k;const B=s.find(R=>R.id===P.college_id),q=m[P.college_id],z=(k=q==null?void 0:q.departments)==null?void 0:k.find(R=>R.id===P.department_id);return e.jsxs(et,{variant:"secondary",className:"flex items-center gap-1",children:[(B==null?void 0:B.name)||`College ${P.college_id}`," - ",(z==null?void 0:z.name)||`Dept ${P.department_id}`,e.jsx("button",{type:"button",onClick:()=>U(P.college_id,P.department_id,!1),className:"ml-1 hover:text-red-600",children:e.jsx(Dn,{className:"w-3 h-3"})})]},`${P.college_id}-${P.department_id}`)})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Batch"}),(t.assigned_colleges||[]).length===0?e.jsx("div",{className:"border border-gray-300 rounded-md p-4",children:e.jsx("p",{className:"text-gray-500 text-center",children:"Select colleges first to assign batches"})}):b?e.jsx("div",{className:"border border-gray-300 rounded-md p-4",children:e.jsx("p",{className:"text-gray-500 text-center",children:"Loading batches..."})}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs(At,{value:"",onValueChange:P=>{if(P&&P!=="no-batches"){const B=t.assigned_colleges||[];for(const q of B){const z=x[q];if(z&&z.batches&&z.batches.find(R=>R.id===P)){L(q,P,!0);break}}}},children:[e.jsx(St,{className:"w-full",children:e.jsx(Rt,{placeholder:"Select batch from all colleges..."})}),e.jsx(Ct,{children:(()=>{const P=[];return(t.assigned_colleges||[]).forEach(q=>{const z=s.find(R=>R.id===q),k=x[q];k&&k.batches&&k.batches.forEach(R=>{P.push({id:R.id,name:R.name,collegeId:q,collegeName:(z==null?void 0:z.name)||`College ${q}`})})}),P.length>0?P.map(q=>e.jsxs(Te,{value:q.id,children:[q.collegeName," - ",q.name]},q.id)):e.jsx(Te,{value:"no-batches",disabled:!0,children:"No batches found"})})()})]}),(t.assigned_batches||[]).length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:(t.assigned_batches||[]).map(P=>{var k;const B=s.find(R=>R.id===P.college_id),q=x[P.college_id],z=(k=q==null?void 0:q.batches)==null?void 0:k.find(R=>R.id===P.batch_id);return e.jsxs(et,{variant:"secondary",className:"flex items-center gap-1",children:[(B==null?void 0:B.name)||`College ${P.college_id}`," - ",(z==null?void 0:z.name)||`Batch ${P.batch_id}`,e.jsx("button",{type:"button",onClick:()=>L(P.college_id,P.batch_id,!1),className:"ml-1 hover:text-red-600",children:e.jsx(Dn,{className:"w-3 h-3"})})]},`${P.college_id}-${P.batch_id}`)})})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Individual Selection search Bar"}),e.jsxs("div",{className:"relative",children:[e.jsx(hn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Ye,{type:"text",placeholder:"Search students by name, ID, or email...",value:o,onChange:P=>a(P.target.value),className:"pl-10"})]}),o&&i.length>0&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:i.map(P=>e.jsxs("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-100 last:border-b-0",onClick:B=>{B.preventDefault(),B.stopPropagation(),T("student",P.id,!0),a("")},children:[e.jsx("div",{className:"font-medium",children:P.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:[P.student_id||P.roll_number,"  ",P.email]})]},P.id))})]}),(t.assigned_students||[]).length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selected Individual Students"}),e.jsx("div",{className:"border border-gray-300 rounded-md p-4 max-h-60 overflow-auto",children:e.jsx("div",{className:"space-y-2",children:t.assigned_students.map(P=>{const B=f[P];return e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded border",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm",children:(B==null?void 0:B.name)||`Student ${P}`}),e.jsxs("div",{className:"text-xs text-gray-500",children:[(B==null?void 0:B.student_id)||(B==null?void 0:B.roll_number)||"N/A","  ",(B==null?void 0:B.email)||"N/A"]})]}),e.jsx("button",{type:"button",onClick:()=>T("student",P,!1),className:"ml-2 hover:text-red-600",children:e.jsx(Dn,{className:"w-4 h-4"})})]},P)})})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Access Password"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"enable_access_password",checked:!!t.access_password,onCheckedChange:P=>{if(P){const B="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let q="";for(let z=0;z<5;z++)q+=B.charAt(Math.floor(Math.random()*B.length));r({access_password:q})}else r({access_password:""})}}),e.jsx("label",{htmlFor:"enable_access_password",className:"text-sm font-medium",children:"Enable Access Password"})]}),t.access_password&&e.jsx(Ye,{value:t.access_password,onChange:P=>r({access_password:P.target.value}),placeholder:"Access password",type:"text",className:"w-full"})]})]})]})}function gz({formData:t,updateFormData:r,updateSection:s,addSection:n,removeSection:c,questionTypes:o}){const a=(u,f,h)=>{const m=t.sections.find(x=>x.id===u);if(!m)return;const p=h?[...m.allowed_question_types,f]:m.allowed_question_types.filter(x=>x!==f);s(u,{allowed_question_types:p})},d=(u,f)=>{const h=[...t.sections],[m]=h.splice(u,1);h.splice(f,0,m),r({sections:h})},l=u=>{const f=u.allowed_question_types.includes("coding"),h=u.allowed_question_types.includes("multiple_choice")||u.allowed_question_types.includes("single_choice")||u.allowed_question_types.includes("true_false");return f&&h?"":f?"":h?"":""},i=u=>{const f=u.allowed_question_types,h=[];return f.includes("coding")&&h.push("Coding"),(f.includes("multiple_choice")||f.includes("single_choice")||f.includes("true_false"))&&h.push("MCQ"),f.includes("essay")&&h.push("Essay"),f.includes("short_answer")&&h.push("Short Answer"),f.includes("fill_blanks")&&h.push("Fill Blanks"),h.join(" + ")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Re,{className:"p-6 bg-blue-50 border-blue-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-4",children:"Global Section Control"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"sequential_sections",checked:t.sequential_sections||!1,onCheckedChange:u=>r({sequential_sections:u})}),e.jsx("label",{htmlFor:"sequential_sections",className:"text-sm font-medium",children:"Sequential Section Access"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"require_section_completion",checked:t.require_section_completion||!1,onCheckedChange:u=>r({require_section_completion:u})}),e.jsx("label",{htmlFor:"require_section_completion",className:"text-sm font-medium",children:"Require Section Completion"})]})]}),e.jsx("p",{className:"text-sm text-blue-700",children:"Multi-Type Section-Based Assessment: Students must complete each section before accessing the next one."})]})]}),e.jsx("div",{className:"space-y-4",children:t.sections.map((u,f)=>e.jsx(Re,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:l(u)}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:["Section ",f+1,e.jsx(et,{variant:"outline",className:"text-xs",children:i(u)})]}),e.jsx("p",{className:"text-sm text-gray-500",children:u.name||"Untitled Section"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[f>0&&e.jsx(ee,{type:"button",variant:"outline",size:"sm",onClick:()=>d(f,f-1),children:e.jsx(I7,{className:"w-4 h-4"})}),f<t.sections.length-1&&e.jsx(ee,{type:"button",variant:"outline",size:"sm",onClick:()=>d(f,f+1),children:e.jsx(M7,{className:"w-4 h-4"})}),t.sections.length>1&&e.jsx(ee,{type:"button",variant:"outline",size:"sm",onClick:()=>c(u.id),className:"text-red-600 hover:text-red-700",children:e.jsx(Dn,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Section Name"}),e.jsx(Ye,{value:u.name,onChange:h=>s(u.id,{name:h.target.value}),placeholder:"Enter section name",className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Time Limit (minutes)"}),e.jsx(Ye,{type:"text",value:u.time_limit_minutes||"",onChange:h=>{const m=h.target.value.trim();if(m==="")s(u.id,{time_limit_minutes:null});else{const p=parseInt(m);!isNaN(p)&&p>0&&s(u.id,{time_limit_minutes:p})}},placeholder:"No limit",className:"w-full"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Leave empty for no time limit"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx(ms,{value:u.description,onChange:h=>s(u.id,{description:h.target.value}),placeholder:"Brief description of this section",rows:2,className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Instructions"}),e.jsx(ms,{value:u.instructions,onChange:h=>s(u.id,{instructions:h.target.value}),placeholder:"Specific instructions for this section",rows:2,className:"w-full"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Navigation Type"}),e.jsxs(At,{value:u.navigation_type,onValueChange:h=>s(u.id,{navigation_type:h}),children:[e.jsx(St,{children:e.jsx(Rt,{})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"free",children:"Free Navigation"}),e.jsx(Te,{value:"sequential",children:"Sequential Navigation"})]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:u.navigation_type==="free"?"Students can navigate freely between questions in this section":"Students must answer questions in order and cannot go back"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Completion Requirement"}),e.jsxs(At,{value:u.completion_requirement||"all",onValueChange:h=>s(u.id,{completion_requirement:h}),children:[e.jsx(St,{children:e.jsx(Rt,{})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"all",children:"All Questions Required"}),e.jsx(Te,{value:"minimum",children:"Minimum Questions"}),e.jsx(Te,{value:"percentage",children:"Percentage Required"})]})]}),u.completion_requirement==="minimum"&&e.jsx(Ye,{type:"number",value:u.minimum_questions||"",onChange:h=>s(u.id,{minimum_questions:h.target.value?parseInt(h.target.value):null}),placeholder:"Minimum questions to complete",min:"1",className:"w-full"}),u.completion_requirement==="percentage"&&e.jsx(Ye,{type:"number",value:u.completion_percentage||"",onChange:h=>s(u.id,{completion_percentage:h.target.value?parseInt(h.target.value):null}),placeholder:"Percentage required (1-100)",min:"1",max:"100",className:"w-full"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Allowed Question Types"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:o.map(h=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:`${u.id}-${h.value}`,checked:u.allowed_question_types.includes(h.value),onCheckedChange:m=>a(u.id,h.value,m)}),e.jsx("label",{htmlFor:`${u.id}-${h.value}`,className:"text-sm font-medium cursor-pointer",children:h.label})]},h.value))}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Select the question types allowed in this section. You can mix different types for multi-type assessments."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:`${u.id}-shuffle`,checked:u.shuffle_questions,onCheckedChange:h=>s(u.id,{shuffle_questions:h})}),e.jsx("label",{htmlFor:`${u.id}-shuffle`,className:"text-sm font-medium",children:"Shuffle questions within this section"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:`${u.id}-allow_return`,checked:u.allow_return_to_section||!1,onCheckedChange:h=>s(u.id,{allow_return_to_section:h})}),e.jsx("label",{htmlFor:`${u.id}-allow_return`,className:"text-sm font-medium",children:"Allow return to this section after completion"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm font-medium",children:["Questions: ",u.questions.length]}),e.jsx("span",{className:"text-sm text-gray-500",children:"|"}),e.jsxs("span",{className:"text-sm font-medium",children:["Type: ",i(u)]}),e.jsx("span",{className:"text-sm text-gray-500",children:"|"}),e.jsx("span",{className:"text-sm font-medium",children:u.navigation_type==="sequential"?e.jsxs("span",{className:"flex items-center gap-1 text-orange-600",children:[e.jsx(Wd,{className:"w-3 h-3"}),"Sequential"]}):e.jsxs("span",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(_9,{className:"w-3 h-3"}),"Free Navigation"]})})]}),u.questions.length>0&&e.jsxs(et,{variant:"secondary",className:"flex items-center gap-1",children:[e.jsx(Yt,{className:"w-3 h-3"}),"Ready"]})]})]})},u.id))}),e.jsxs(ee,{type:"button",variant:"outline",onClick:n,className:"w-full",children:[e.jsx(vs,{className:"w-4 h-4 mr-2"}),"Add Section"]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-800 mb-2",children:"Section Summary"}),e.jsxs("div",{className:"text-sm text-blue-700 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Total Sections:"})," ",t.sections.length]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Total Questions:"})," ",t.sections.reduce((u,f)=>u+f.questions.length,0)]}),t.assessment_type==="multi_type"&&t.multi_type_structure==="section_based"?e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Sequential Access:"})," ",t.sequential_sections?"Enabled":"Disabled"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Section Completion Required:"})," ",t.require_section_completion?"Yes":"No"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Multi-Type Sections:"})," ",t.sections.filter(u=>u.allowed_question_types.length>1).length," sections"]})]}):t.assessment_type==="multi_type"&&t.multi_type_structure==="non_section_based"?e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Question Shuffling:"})," ",t.shuffle_all_questions?"Enabled":"Disabled"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Question Navigation:"})," ",t.allow_question_navigation?"Enabled":"Disabled"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Assessment Structure:"})," Non-Section Based"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Section Navigation:"})," ",t.allow_section_navigation?"Enabled":"Disabled"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Progress Tracking:"})," ",t.show_section_progress?"Enabled":"Disabled"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Assessment Type:"})," Single Type"]})]})]})]})]})}function xz(t,r,s){return r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function s2(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),s.push.apply(s,n)}return s}function r2(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?s2(Object(s),!0).forEach(function(n){xz(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):s2(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function yz(t,r){if(t==null)return{};var s={},n=Object.keys(t),c,o;for(o=0;o<n.length;o++)c=n[o],!(r.indexOf(c)>=0)&&(s[c]=t[c]);return s}function vz(t,r){if(t==null)return{};var s=yz(t,r),n,c;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(c=0;c<o.length;c++)n=o[c],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function bz(t,r){return wz(t)||jz(t,r)||_z(t,r)||Nz()}function wz(t){if(Array.isArray(t))return t}function jz(t,r){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var s=[],n=!0,c=!1,o=void 0;try{for(var a=t[Symbol.iterator](),d;!(n=(d=a.next()).done)&&(s.push(d.value),!(r&&s.length===r));n=!0);}catch(l){c=!0,o=l}finally{try{!n&&a.return!=null&&a.return()}finally{if(c)throw o}}return s}}function _z(t,r){if(t){if(typeof t=="string")return n2(t,r);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return n2(t,r)}}function n2(t,r){(r==null||r>t.length)&&(r=t.length);for(var s=0,n=new Array(r);s<r;s++)n[s]=t[s];return n}function Nz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sz(t,r,s){return r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function a2(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),s.push.apply(s,n)}return s}function i2(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?a2(Object(s),!0).forEach(function(n){Sz(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a2(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function Cz(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return function(n){return r.reduceRight(function(c,o){return o(c)},n)}}function id(t){return function r(){for(var s=this,n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return c.length>=t.length?t.apply(this,c):function(){for(var a=arguments.length,d=new Array(a),l=0;l<a;l++)d[l]=arguments[l];return r.apply(s,[].concat(c,d))}}}function Mf(t){return{}.toString.call(t).includes("Object")}function kz(t){return!Object.keys(t).length}function iu(t){return typeof t=="function"}function Ez(t,r){return Object.prototype.hasOwnProperty.call(t,r)}function Az(t,r){return Mf(r)||Zi("changeType"),Object.keys(r).some(function(s){return!Ez(t,s)})&&Zi("changeField"),r}function Tz(t){iu(t)||Zi("selectorType")}function Rz(t){iu(t)||Mf(t)||Zi("handlerType"),Mf(t)&&Object.values(t).some(function(r){return!iu(r)})&&Zi("handlersType")}function Pz(t){t||Zi("initialIsRequired"),Mf(t)||Zi("initialType"),kz(t)&&Zi("initialContent")}function Mz(t,r){throw new Error(t[r]||t.default)}var Iz={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},Zi=id(Mz)(Iz),uh={changes:Az,selector:Tz,handler:Rz,initial:Pz};function Oz(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};uh.initial(t),uh.handler(r);var s={current:t},n=id(Dz)(s,r),c=id(Lz)(s),o=id(uh.changes)(t),a=id(Fz)(s);function d(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(u){return u};return uh.selector(i),i(s.current)}function l(i){Cz(n,c,o,a)(i)}return[d,l]}function Fz(t,r){return iu(r)?r(t.current):r}function Lz(t,r){return t.current=i2(i2({},t.current),r),r}function Dz(t,r,s){return iu(r)?r(t.current):Object.keys(s).forEach(function(n){var c;return(c=r[n])===null||c===void 0?void 0:c.call(r,t.current[n])}),s}var $z={create:Oz},Bz={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}};function zz(t){return function r(){for(var s=this,n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return c.length>=t.length?t.apply(this,c):function(){for(var a=arguments.length,d=new Array(a),l=0;l<a;l++)d[l]=arguments[l];return r.apply(s,[].concat(c,d))}}}function Uz(t){return{}.toString.call(t).includes("Object")}function Vz(t){return t||o2("configIsRequired"),Uz(t)||o2("configType"),t.urls?(qz(),{paths:{vs:t.urls.monacoBase}}):t}function qz(){console.warn(lC.deprecation)}function Hz(t,r){throw new Error(t[r]||t.default)}var lC={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},o2=zz(Hz)(lC),Wz={config:Vz},Gz=function(){for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return function(c){return s.reduceRight(function(o,a){return a(o)},c)}};function cC(t,r){return Object.keys(r).forEach(function(s){r[s]instanceof Object&&t[s]&&Object.assign(r[s],cC(t[s],r[s]))}),r2(r2({},t),r)}var Kz={type:"cancelation",msg:"operation is manually canceled"};function ag(t){var r=!1,s=new Promise(function(n,c){t.then(function(o){return r?c(Kz):n(o)}),t.catch(c)});return s.cancel=function(){return r=!0},s}var Yz=$z.create({config:Bz,isInitialized:!1,resolve:null,reject:null,monaco:null}),dC=bz(Yz,2),Eu=dC[0],Bm=dC[1];function Qz(t){var r=Wz.config(t),s=r.monaco,n=vz(r,["monaco"]);Bm(function(c){return{config:cC(c.config,n),monaco:s}})}function Xz(){var t=Eu(function(r){var s=r.monaco,n=r.isInitialized,c=r.resolve;return{monaco:s,isInitialized:n,resolve:c}});if(!t.isInitialized){if(Bm({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),ag(ig);if(window.monaco&&window.monaco.editor)return uC(window.monaco),t.resolve(window.monaco),ag(ig);Gz(Zz,eU)(tU)}return ag(ig)}function Zz(t){return document.body.appendChild(t)}function Jz(t){var r=document.createElement("script");return t&&(r.src=t),r}function eU(t){var r=Eu(function(n){var c=n.config,o=n.reject;return{config:c,reject:o}}),s=Jz("".concat(r.config.paths.vs,"/loader.js"));return s.onload=function(){return t()},s.onerror=r.reject,s}function tU(){var t=Eu(function(s){var n=s.config,c=s.resolve,o=s.reject;return{config:n,resolve:c,reject:o}}),r=window.require;r.config(t.config),r(["vs/editor/editor.main"],function(s){uC(s),t.resolve(s)},function(s){t.reject(s)})}function uC(t){Eu().monaco||Bm({monaco:t})}function sU(){return Eu(function(t){var r=t.monaco;return r})}var ig=new Promise(function(t,r){return Bm({resolve:t,reject:r})}),hC={config:Qz,init:Xz,__getMonacoInstance:sU},rU={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},og=rU,nU={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},aU=nU;function iU({children:t}){return Lt.createElement("div",{style:aU.container},t)}var oU=iU,lU=oU;function cU({width:t,height:r,isEditorReady:s,loading:n,_ref:c,className:o,wrapperProps:a}){return Lt.createElement("section",{style:{...og.wrapper,width:t,height:r},...a},!s&&Lt.createElement(lU,null,n),Lt.createElement("div",{ref:c,style:{...og.fullWidth,...!s&&og.hide},className:o}))}var dU=cU,fC=A.memo(dU);function uU(t){A.useEffect(t,[])}var mC=uU;function hU(t,r,s=!0){let n=A.useRef(!0);A.useEffect(n.current||!s?()=>{n.current=!1}:t,r)}var On=hU;function Sd(){}function $l(t,r,s,n){return fU(t,n)||mU(t,r,s,n)}function fU(t,r){return t.editor.getModel(pC(t,r))}function mU(t,r,s,n){return t.editor.createModel(r,s,n?pC(t,n):void 0)}function pC(t,r){return t.Uri.parse(r)}function pU({original:t,modified:r,language:s,originalLanguage:n,modifiedLanguage:c,originalModelPath:o,modifiedModelPath:a,keepCurrentOriginalModel:d=!1,keepCurrentModifiedModel:l=!1,theme:i="light",loading:u="Loading...",options:f={},height:h="100%",width:m="100%",className:p,wrapperProps:x={},beforeMount:g=Sd,onMount:v=Sd}){let[y,b]=A.useState(!1),[C,T]=A.useState(!0),M=A.useRef(null),U=A.useRef(null),L=A.useRef(null),P=A.useRef(v),B=A.useRef(g),q=A.useRef(!1);mC(()=>{let S=hC.init();return S.then(w=>(U.current=w)&&T(!1)).catch(w=>(w==null?void 0:w.type)!=="cancelation"&&console.error("Monaco initialization: error:",w)),()=>M.current?R():S.cancel()}),On(()=>{if(M.current&&U.current){let S=M.current.getOriginalEditor(),w=$l(U.current,t||"",n||s||"text",o||"");w!==S.getModel()&&S.setModel(w)}},[o],y),On(()=>{if(M.current&&U.current){let S=M.current.getModifiedEditor(),w=$l(U.current,r||"",c||s||"text",a||"");w!==S.getModel()&&S.setModel(w)}},[a],y),On(()=>{let S=M.current.getModifiedEditor();S.getOption(U.current.editor.EditorOption.readOnly)?S.setValue(r||""):r!==S.getValue()&&(S.executeEdits("",[{range:S.getModel().getFullModelRange(),text:r||"",forceMoveMarkers:!0}]),S.pushUndoStop())},[r],y),On(()=>{var S,w;(w=(S=M.current)==null?void 0:S.getModel())==null||w.original.setValue(t||"")},[t],y),On(()=>{let{original:S,modified:w}=M.current.getModel();U.current.editor.setModelLanguage(S,n||s||"text"),U.current.editor.setModelLanguage(w,c||s||"text")},[s,n,c],y),On(()=>{var S;(S=U.current)==null||S.editor.setTheme(i)},[i],y),On(()=>{var S;(S=M.current)==null||S.updateOptions(f)},[f],y);let z=A.useCallback(()=>{var _;if(!U.current)return;B.current(U.current);let S=$l(U.current,t||"",n||s||"text",o||""),w=$l(U.current,r||"",c||s||"text",a||"");(_=M.current)==null||_.setModel({original:S,modified:w})},[s,r,c,t,n,o,a]),k=A.useCallback(()=>{var S;!q.current&&L.current&&(M.current=U.current.editor.createDiffEditor(L.current,{automaticLayout:!0,...f}),z(),(S=U.current)==null||S.editor.setTheme(i),b(!0),q.current=!0)},[f,i,z]);A.useEffect(()=>{y&&P.current(M.current,U.current)},[y]),A.useEffect(()=>{!C&&!y&&k()},[C,y,k]);function R(){var w,_,j,N;let S=(w=M.current)==null?void 0:w.getModel();d||((_=S==null?void 0:S.original)==null||_.dispose()),l||((j=S==null?void 0:S.modified)==null||j.dispose()),(N=M.current)==null||N.dispose()}return Lt.createElement(fC,{width:m,height:h,isEditorReady:y,loading:u,_ref:L,className:p,wrapperProps:x})}var gU=pU;A.memo(gU);function xU(t){let r=A.useRef();return A.useEffect(()=>{r.current=t},[t]),r.current}var yU=xU,hh=new Map;function vU({defaultValue:t,defaultLanguage:r,defaultPath:s,value:n,language:c,path:o,theme:a="light",line:d,loading:l="Loading...",options:i={},overrideServices:u={},saveViewState:f=!0,keepCurrentModel:h=!1,width:m="100%",height:p="100%",className:x,wrapperProps:g={},beforeMount:v=Sd,onMount:y=Sd,onChange:b,onValidate:C=Sd}){let[T,M]=A.useState(!1),[U,L]=A.useState(!0),P=A.useRef(null),B=A.useRef(null),q=A.useRef(null),z=A.useRef(y),k=A.useRef(v),R=A.useRef(),S=A.useRef(n),w=yU(o),_=A.useRef(!1),j=A.useRef(!1);mC(()=>{let I=hC.init();return I.then(D=>(P.current=D)&&L(!1)).catch(D=>(D==null?void 0:D.type)!=="cancelation"&&console.error("Monaco initialization: error:",D)),()=>B.current?E():I.cancel()}),On(()=>{var D,V,H,G;let I=$l(P.current,t||n||"",r||c||"",o||s||"");I!==((D=B.current)==null?void 0:D.getModel())&&(f&&hh.set(w,(V=B.current)==null?void 0:V.saveViewState()),(H=B.current)==null||H.setModel(I),f&&((G=B.current)==null||G.restoreViewState(hh.get(o))))},[o],T),On(()=>{var I;(I=B.current)==null||I.updateOptions(i)},[i],T),On(()=>{!B.current||n===void 0||(B.current.getOption(P.current.editor.EditorOption.readOnly)?B.current.setValue(n):n!==B.current.getValue()&&(j.current=!0,B.current.executeEdits("",[{range:B.current.getModel().getFullModelRange(),text:n,forceMoveMarkers:!0}]),B.current.pushUndoStop(),j.current=!1))},[n],T),On(()=>{var D,V;let I=(D=B.current)==null?void 0:D.getModel();I&&c&&((V=P.current)==null||V.editor.setModelLanguage(I,c))},[c],T),On(()=>{var I;d!==void 0&&((I=B.current)==null||I.revealLine(d))},[d],T),On(()=>{var I;(I=P.current)==null||I.editor.setTheme(a)},[a],T);let N=A.useCallback(()=>{var I;if(!(!q.current||!P.current)&&!_.current){k.current(P.current);let D=o||s,V=$l(P.current,n||t||"",r||c||"",D||"");B.current=(I=P.current)==null?void 0:I.editor.create(q.current,{model:V,automaticLayout:!0,...i},u),f&&B.current.restoreViewState(hh.get(D)),P.current.editor.setTheme(a),d!==void 0&&B.current.revealLine(d),M(!0),_.current=!0}},[t,r,s,n,c,o,i,u,f,a,d]);A.useEffect(()=>{T&&z.current(B.current,P.current)},[T]),A.useEffect(()=>{!U&&!T&&N()},[U,T,N]),S.current=n,A.useEffect(()=>{var I,D;T&&b&&((I=R.current)==null||I.dispose(),R.current=(D=B.current)==null?void 0:D.onDidChangeModelContent(V=>{j.current||b(B.current.getValue(),V)}))},[T,b]),A.useEffect(()=>{if(T){let I=P.current.editor.onDidChangeMarkers(D=>{var H;let V=(H=B.current.getModel())==null?void 0:H.uri;if(V&&D.find(G=>G.path===V.path)){let G=P.current.editor.getModelMarkers({resource:V});C==null||C(G)}});return()=>{I==null||I.dispose()}}return()=>{}},[T,C]);function E(){var I,D;(I=R.current)==null||I.dispose(),h?f&&hh.set(o,B.current.saveViewState()):(D=B.current.getModel())==null||D.dispose(),B.current.dispose()}return Lt.createElement(fC,{width:m,height:p,isEditorReady:T,loading:l,_ref:q,className:x,wrapperProps:g})}var bU=vU,wU=A.memo(bU),jU=wU;const If=({value:t="",onChange:r,language:s="javascript",theme:n="vs-dark",height:c="400px",width:o="100%",readOnly:a=!1,options:d={},onMount:l,...i})=>{const u=typeof t=="string"?t:t&&typeof t=="object"&&t.code?t.code:"",f=typeof t=="object"&&t.language?t.language:s,h=A.useRef(null),m=(g,v)=>{h.current=g,g.updateOptions({minimap:{enabled:!1},fontSize:14,fontFamily:'Consolas, "Courier New", monospace',lineNumbers:"on",roundedSelection:!1,scrollBeyondLastLine:!1,automaticLayout:!0,wordWrap:"on",...d}),l&&l(g,v)},p=(g,v)=>{r&&r(g,v)},x=g=>{const v={python:{tabSize:4,insertSpaces:!0,detectIndentation:!0},javascript:{tabSize:2,insertSpaces:!0,detectIndentation:!0},java:{tabSize:4,insertSpaces:!0,detectIndentation:!0},cpp:{tabSize:4,insertSpaces:!0,detectIndentation:!0},csharp:{tabSize:4,insertSpaces:!0,detectIndentation:!0},go:{tabSize:4,insertSpaces:!0,detectIndentation:!0},ruby:{tabSize:2,insertSpaces:!0,detectIndentation:!0},php:{tabSize:4,insertSpaces:!0,detectIndentation:!0},html:{tabSize:2,insertSpaces:!0,detectIndentation:!0},css:{tabSize:2,insertSpaces:!0,detectIndentation:!0}};return v[g]||v.javascript};return e.jsx("div",{className:"code-editor-container w-full h-full",style:{height:c==="100%"?"100%":c,width:o},...i,children:e.jsx(jU,{height:c==="100%"?"100%":c,width:o,language:f,theme:n,value:u,onChange:p,onMount:m,options:{...x(f),readOnly:a,automaticLayout:!0,...d},loading:e.jsxs("div",{className:"flex items-center justify-center h-full",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),e.jsx("span",{className:"ml-2 text-muted-foreground",children:"Loading editor..."})]})})})},l2=[{value:"easy",label:"Easy"},{value:"medium",label:"Medium"},{value:"hard",label:"Hard"}],en={title:"",content:"",question_type:"multiple_choice",difficulty_level:"medium",points:1,time_limit_seconds:null,category_id:null,subcategory_id:null,status:"draft",tags:[],options:["",""],correctAnswers:[],explanation:"",hints:[],acceptable_answers:[],rubric:"",coding_details:{languages:["javascript"],starter_codes:{javascript:`// Write your solution here
// Example: function solve(input) {
//   // Your code here
//   return result;
// }`,python:`# Write your solution here
# Example:
# def solve(input):
#     # Your code here
#     return result`,java:`// Write your solution here
// Example:
// public class Solution {
//     public static String solve(String input) {
//         // Your code here
//         return result;
//     }
// }`,cpp:`// Write your solution here
// Example:
// #include <iostream>
// #include <string>
// using namespace std;
// 
// string solve(string input) {
//     // Your code here
//     return result;
// }`,c:`// Write your solution here
// Example:
// #include <stdio.h>
// #include <string.h>
// 
// char* solve(char* input) {
//     // Your code here
//     return result;
// }`,php:`<?php
// Write your solution here
// Example:
// function solve($input) {
//     // Your code here
//     return $result;
// }`,ruby:`# Write your solution here
# Example:
# def solve(input)
#   # Your code here
#   result
# end`,go:`package main

// Write your solution here
// Example:
// func solve(input string) string {
//     // Your code here
//     return result
// }`,rust:`// Write your solution here
// Example:
// fn solve(input: &str) -> String {
//     // Your code here
//     result
// }`},solution_codes:{javascript:"",python:"",java:"",cpp:"",c:"",php:"",ruby:"",go:"",rust:""},test_cases:[]},blanks:[""]};function lg(t){const r=/\[\[blank(\d+)\]\]/g,s=[];let n;for(;(n=r.exec(t))!==null;){const c=parseInt(n[1],10)-1;s.includes(c)||s.push(c)}return s}function Of({editMode:t=!1,questionData:r=null,onSuccess:s=null}){var ge,be,Ie,Ce,Oe,Ee,pe,Ae,st,qe;const[n]=tm(),c=Br(),o=n.get("edit"),a=t||!!o,d=()=>{if(a&&r){let ie=[],ae=r.options;if(typeof ae=="string")try{ae=JSON.parse(ae)}catch(ve){console.error("Error parsing options JSON:",ve),ae=[]}if(Array.isArray(ae)&&ae.length>0?typeof ae[0]=="object"&&ae[0]!==null?ie=ae.map(ve=>ve.text||ve.label||""):ie=ae:(Array.isArray(ae)&&ae.length,ie=en.options),ie.length<2)for(;ie.length<2;)ie.push("");let we=[];if(r.correctAnswers&&Array.isArray(r.correctAnswers))we=r.correctAnswers;else if(r.correct_answers&&Array.isArray(r.correct_answers))we=r.correct_answers;else if(r.correct_answer!==null&&r.correct_answer!==void 0)if(r.question_type==="single_choice"&&Array.isArray(ae)&&ae.length>0){const ve=ae.findIndex(He=>typeof He=="object"&&He!==null?He.label===r.correct_answer||He.label===String(r.correct_answer):!1);if(ve!==-1)we=[ve];else{const He=Number(r.correct_answer);!isNaN(He)&&He>=0&&He<ae.length?we=[He]:we=[0]}}else we=[r.correct_answer];return{...en,...r,options:ie,correctAnswers:we,acceptable_answers:r.acceptable_answers||[""],tags:r.tags||[],hints:r.hints||[],blanks:r.blanks||[""],coding_details:r.coding_details||en.coding_details}}return en},[l,i]=A.useState(d),[u,f]=A.useState(!1),[h,m]=A.useState(!1),[p,x]=A.useState([]);A.useState([]);const[g,v]=A.useState([]),y=A.useRef(),[b,C]=A.useState([]),[T,M]=A.useState([]);A.useState(!1),A.useState({name:"",parent_id:null});const[U,L]=A.useState(!1),[P,B]=A.useState(!1),[q,z]=A.useState(""),[k,R]=A.useState(""),[S,w]=A.useState(""),[_,j]=A.useState([]),[N,E]=A.useState([]),[I,D]=A.useState(!1),V=ie=>({javascript:"javascript",python:"python",java:"java",cpp:"cpp",c:"c",php:"php",ruby:"ruby",go:"go",rust:"rust"})[ie]||"javascript";A.useEffect(()=>{H(),$()},[]),A.useEffect(()=>{G()},[]),A.useEffect(()=>{(async()=>{if(o&&!r)try{m(!0);const ae=await Pe.get(`/question-bank/questions/${o}`);if(ae.success){const we=ae.data;let ve=[];we.correctAnswers&&Array.isArray(we.correctAnswers)?ve=we.correctAnswers:we.correct_answers&&Array.isArray(we.correct_answers)?ve=we.correct_answers:we.correct_answer!==null&&we.correct_answer!==void 0&&(ve=[we.correct_answer]);let He=Array.isArray(we.options)?we.options:en.options;i({...en,...we,options:He,correctAnswers:ve,acceptable_answers:we.acceptable_answers||[""],tags:we.tags||[],hints:we.hints||[],blanks:we.blanks||[""],coding_details:we.coding_details||en.coding_details})}else fs({title:"Error",description:"Failed to load question data",variant:"destructive"}),c("/question-bank")}catch(ae){console.error("Error fetching question data:",ae),fs({title:"Error",description:"Failed to load question data",variant:"destructive"}),c("/question-bank")}finally{m(!1)}})()},[o,r,c]),A.useEffect(()=>{if(t&&r){let ie=[],ae=r.options;if(typeof ae=="string")try{ae=JSON.parse(ae)}catch(ve){console.error("Error parsing options JSON:",ve),ae=[]}if(Array.isArray(ae)&&ae.length>0?typeof ae[0]=="object"&&ae[0]!==null?ie=ae.map(ve=>ve.text||ve.label||""):ie=ae:(Array.isArray(ae)&&ae.length,ie=en.options),ie.length<2)for(;ie.length<2;)ie.push("");let we=[];if(r.correctAnswers&&Array.isArray(r.correctAnswers))we=r.correctAnswers;else if(r.correct_answers&&Array.isArray(r.correct_answers))we=r.correct_answers;else if(r.correct_answer!==null&&r.correct_answer!==void 0)if(r.question_type==="single_choice"&&Array.isArray(ae)&&ae.length>0){const ve=ae.findIndex(He=>typeof He=="object"&&He!==null?He.label===r.correct_answer||He.label===String(r.correct_answer):!1);if(ve!==-1)we=[ve];else{const He=Number(r.correct_answer);!isNaN(He)&&He>=0&&He<ae.length?we=[He]:we=[0]}}else we=[r.correct_answer];i({...en,...r,options:ie,correctAnswers:we,acceptable_answers:r.acceptable_answers||[""],tags:r.tags||[],hints:r.hints||[],blanks:r.blanks||[""],coding_details:r.coding_details||en.coding_details})}},[t,r]);const H=async()=>{try{const ie=await Pe.getQuestionCategories();if(ie.success){const ae=ie.data.filter(we=>we.parent_id===null);x(ae)}}catch(ie){console.error("Failed to load categories:",ie),fs({title:"Failed to load categories",variant:"destructive"})}},G=async()=>{try{const ie=await Pe.getQuestionCategories();if(ie.success){const ae=ie.data.filter(we=>we.parent_id!==null);M(ae)}}catch(ie){console.error("Failed to load subcategories:",ie),fs({title:"Failed to load subcategories",variant:"destructive"})}},$=async()=>{try{const ie=await Pe.getQuestionTags();ie.success&&(v(ie.data),j(ie.data))}catch(ie){console.error("Failed to load tags:",ie),fs({title:"Failed to load tags",variant:"destructive"})}},Y=ie=>{const ae=ie.target.value;i(we=>({...en,question_type:ae,title:we.title,content:we.content,difficulty_level:we.difficulty_level,points:we.points,category_id:we.category_id,tags:we.tags,coding_details:ae==="coding"?a&&we.coding_details?we.coding_details:{languages:["javascript"],starter_codes:{javascript:`// Write your solution here
// Example: function solve(input) {
//   // Your code here
//   return result;
// }`,python:`# Write your solution here
# Example:
# def solve(input):
#     # Your code here
#     return result`,java:`// Write your solution here
// Example:
// public class Solution {
//     public static String solve(String input) {
//         // Your code here
//         return result;
//     }
// }`,cpp:`// Write your solution here
// Example:
// #include <iostream>
// #include <string>
// using namespace std;
// 
// string solve(string input) {
//     // Your code here
//     return result;
// }`,c:`// Write your solution here
// Example:
// #include <stdio.h>
// #include <string.h>
// 
// char* solve(char* input) {
//     // Your code here
//     return result;
// }`,php:`<?php
// Write your solution here
// Example:
// function solve($input) {
//     // Your code here
//     return $result;
// }`,ruby:`# Write your solution here
# Example:
# def solve(input)
#   # Your code here
#   result
# end`,go:`package main

// Write your solution here
// Example:
// func solve(input string) string {
//     // Your code here
//     return result
// }`,rust:`// Write your solution here
// Example:
// fn solve(input: &str) -> String {
//     // Your code here
//     result
// }`},solution_codes:{javascript:"",python:"",java:"",cpp:"",c:"",php:"",ruby:"",go:"",rust:""},test_cases:[]}:en.coding_details}))},F=(ie,ae)=>{i(we=>{const ve=[...we.options||[]];return ve[ie]=ae,{...we,options:ve}})},O=()=>{i(ie=>({...ie,options:[...ie.options||[],""]}))},W=ie=>{i(ae=>{const we=(ae.options||[]).filter((ve,He)=>He!==ie);return{...ae,options:we}})},K=(ie,ae)=>{i(we=>{let ve=[...we.correctAnswers||[]];return ae?ve.push(ie):ve=ve.filter(He=>He!==ie),{...we,correctAnswers:ve}})},Q=(ie,ae)=>{i(we=>{let ve=[...we.tags||[]];return ae?ve.push(ie):ve=ve.filter(He=>He!==ie),{...we,tags:ve}}),ae&&w("")},X=async()=>{if(!S.trim())return;const ie=g.find(ae=>ae.name.toLowerCase()===S.trim().toLowerCase());if(ie){(!l.tags||!l.tags.includes(ie.id))&&Q(ie.id,!0),w("");return}try{const ae=await Pe.createQuestionTag({name:S.trim()});ae.success?(await $(),ae.data&&ae.data.id&&Q(ae.data.id,!0),w(""),fs({title:"Tag created successfully!",description:`Tag "${S.trim()}" has been added and selected.`,variant:"default"})):fs({title:"Failed to create tag",description:ae.message||"Please try again.",variant:"destructive"})}catch(ae){console.error("Error creating tag:",ae),fs({title:"Failed to create tag",description:ae.message||"Please try again.",variant:"destructive"})}},te=async ie=>{var ae;if(!((ae=l.coding_details.solution_codes[ie])!=null&&ae.trim())||!l.coding_details.test_cases||l.coding_details.test_cases.length===0){fs({title:"Please provide solution code and test cases",variant:"destructive"});return}D(!0),E([]);try{fs({title:"Verifying test cases...",description:`Processing ${l.coding_details.test_cases.length} test cases`,variant:"default"});const we=[];for(let $e=0;$e<l.coding_details.test_cases.length;$e++){const ue=l.coding_details.test_cases[$e];try{const oe=await de(l.coding_details.solution_codes[ie],ue.input,ie),_e=oe.output.trim()===ue.output.trim();we.push({testCaseIndex:$e,input:ue.input,expectedOutput:ue.output,actualOutput:oe.output,isCorrect:_e,error:null,executionTime:oe.executionTime||0})}catch(oe){we.push({testCaseIndex:$e,input:ue.input,expectedOutput:ue.output,actualOutput:null,isCorrect:!1,error:oe.message,executionTime:0})}}E(we);const ve=we.filter($e=>$e.isCorrect).length,He=we.length;fs(ve===He?{title:"All test cases passed! ",description:`${ve}/${He} test cases successful`,variant:"default"}:{title:"Some test cases failed! ",description:`${ve}/${He} test cases passed`,variant:"destructive"})}catch(we){console.error("Error verifying test cases:",we),fs({title:"Failed to verify test cases",description:we.message||"Please check your code and try again.",variant:"destructive"})}finally{D(!1)}},de=async(ie,ae,we)=>{try{const ve=await Pe.executeCode({sourceCode:ie,language:we,input:ae||"",expectedOutput:""});if(!ve.success)throw new Error(ve.message||"Code execution failed");return{output:ve.data.output||"",error:ve.data.error||"",executionTime:ve.data.time||0,memoryUsed:ve.data.memory||0}}catch(ve){throw console.error("Code execution error:",ve),new Error(`Code execution failed: ${ve.message}`)}},xe=async ie=>{var ae,we,ve,He,$e,ue,oe,_e,Me;ie.preventDefault(),m(!0);try{if(!l.content.trim()){fs({title:"Question content is required",variant:"destructive"});return}if(l.question_type==="coding"&&!l.title.trim()){fs({title:"Title is required for coding questions",variant:"destructive"});return}if(["multiple_choice","single_choice"].includes(l.question_type)){if((l.options||[]).length<2){fs({title:"At least 2 options are required",variant:"destructive"});return}if((l.correctAnswers||[]).length===0){fs({title:"Please select at least one correct answer",variant:"destructive"});return}if(l.question_type==="single_choice"&&(l.correctAnswers||[]).length>1){fs({title:"Single choice questions can only have one correct answer",variant:"destructive"});return}}if(l.question_type==="true_false"&&(l.correctAnswers||[]).length===0){fs({title:"Please select the correct answer (True or False)",variant:"destructive"});return}if(l.question_type==="short_answer"&&((l.acceptable_answers||[]).length===0||(l.acceptable_answers||[]).every(Ve=>!Ve.trim()))){fs({title:"Please provide at least one acceptable answer",variant:"destructive"});return}if(l.question_type==="fill_blanks"&&(l.blanks||[]).some(Ve=>!Ve.trim())){fs({title:"All blanks must be filled",variant:"destructive"});return}if(l.question_type==="coding"){if((((ae=l.coding_details)==null?void 0:ae.languages)||[]).length===0){fs({title:"Please select at least one programming language for coding questions",variant:"destructive"});return}if(!(((we=l.coding_details)==null?void 0:we.languages)||[]).some(ft=>{var at,Be;return(((Be=(at=l.coding_details)==null?void 0:at.starter_codes)==null?void 0:Be[ft])||"").trim()})){fs({title:"At least one language must have starter code",variant:"destructive"});return}if(!(((ve=l.coding_details)==null?void 0:ve.languages)||[]).some(ft=>{var at,Be;return(((Be=(at=l.coding_details)==null?void 0:at.solution_codes)==null?void 0:Be[ft])||"").trim()})){fs({title:"At least one language must have solution code",variant:"destructive"});return}if((((He=l.coding_details)==null?void 0:He.test_cases)||[]).length===0){fs({title:"Coding questions must have at least one test case",variant:"destructive"});return}if(((($e=l.coding_details)==null?void 0:$e.test_cases)||[]).filter(ft=>{var at,Be;return!((at=ft.input)!=null&&at.trim())||!((Be=ft.output)!=null&&Be.trim())}).length>0){fs({title:"All test cases must have both input and expected output",variant:"destructive"});return}}const ze={title:l.title,content:l.content,question_type:l.question_type,difficulty_level:l.difficulty_level,points:l.points,time_limit_seconds:l.time_limit_seconds,category_id:l.category_id,status:l.status||"draft",tags:l.tags,explanation:l.explanation,hints:l.hints};switch(l.question_type){case"multiple_choice":ze.options=l.options||[],ze.correct_answers=l.correctAnswers||[];break;case"single_choice":ze.options=l.options||[],ze.correct_answer=(l.correctAnswers||[])[0];break;case"true_false":ze.correct_answer=(l.correctAnswers||[])[0];break;case"short_answer":ze.acceptable_answers=l.acceptable_answers||[];break;case"essay":ze.rubric=l.rubric||"";break;case"coding":ze.coding_details={languages:((ue=l.coding_details)==null?void 0:ue.languages)||[],starter_codes:((oe=l.coding_details)==null?void 0:oe.starter_codes)||{},solution_codes:((_e=l.coding_details)==null?void 0:_e.solution_codes)||{},test_cases:((Me=l.coding_details)==null?void 0:Me.test_cases)||[]};break;case"fill_blanks":ze.blanks=b.map(Ve=>({options:Ve.options||[],correct:Ve.correct||0}));break}ze.subcategory_id=l.subcategory_id||null;let Xe;if(a&&l.id?Xe=await Pe.updateQuestion(l.id,ze):Xe=await Pe.createQuestion(ze),Xe.success)fs({title:`Question ${a?"updated":"created"} successfully!`,description:a?"Question has been updated":`Question ID: ${Xe.data.id}`,variant:"default"}),a&&s?s(Xe.data):a&&o?c("/question-bank"):(i(en),f(!1));else{const Ve=a?"update":"create";fs({title:Xe.message||`Failed to ${Ve} question`,variant:"destructive"})}}catch(ze){console.error("Create question error:",ze),fs({title:"Failed to create question",description:ze.message,variant:"destructive"})}finally{m(!1)}},ne=()=>{const ie=y.current;if(!ie)return;const ae=ie.selectionStart,we=ie.selectionEnd,ve=l.content,ue=`[[blank${lg(ve).length+1}]]`,oe=ve.slice(0,ae)+ue+ve.slice(we);i(_e=>({..._e,content:oe})),setTimeout(()=>{ie.focus(),ie.selectionStart=ie.selectionEnd=ae+ue.length},0)};return Lt.useEffect(()=>{if(l.question_type!=="fill_blanks")return;const ie=lg(l.content);C(ae=>{const we=[...ae];return ie.forEach((ve,He)=>{we[He]||(we[He]={options:["","","",""],correct:0})}),we.slice(0,ie.length)})},[l.content,l.question_type]),Lt.useEffect(()=>{const ie=S.toLowerCase().trim();if(!ie){j(g);return}const ae=g.filter(ve=>ve.name.toLowerCase().includes(ie));!g.find(ve=>ve.name.toLowerCase()===ie)&&ie.length>0?j([...ae,{id:"new",name:`Create "${S.trim()}"`,isNew:!0}]):j(ae)},[S,g]),e.jsxs("div",{className:"space-y-6 w-full",children:[e.jsxs(Re,{className:"p-6 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:a?"Edit Question":"Create New Question"}),e.jsxs("form",{onSubmit:xe,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-1 font-medium",children:["Question Title",l.question_type==="coding"&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ye,{value:l.title||"",onChange:ie=>i(ae=>({...ae,title:ie.target.value})),required:l.question_type==="coding",placeholder:l.question_type==="coding"?"Enter question title (required)":"Enter question title (optional)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Question Type"}),e.jsx("select",{value:l.question_type,onChange:Y,className:"w-full border rounded p-2",children:Nd.map(ie=>e.jsx("option",{value:ie.value,children:ie.label},ie.value))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Difficulty Level"}),e.jsx("select",{value:l.difficulty_level,onChange:ie=>i(ae=>({...ae,difficulty_level:ie.target.value})),className:"w-full border rounded p-2",children:l2.map(ie=>e.jsx("option",{value:ie.value,children:ie.label},ie.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Points"}),e.jsx(Ye,{type:"number",min:1,value:l.points,onChange:ie=>i(ae=>({...ae,points:Number(ie.target.value)})),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Time Limit (seconds, optional)"}),e.jsx(Ye,{type:"number",min:1,value:l.time_limit_seconds||"",onChange:ie=>i(ae=>({...ae,time_limit_seconds:ie.target.value?Number(ie.target.value):null})),placeholder:"No limit"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-1 font-medium",children:["Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:l.category_id||"",onChange:ie=>{ie.target.value==="add_new"?L(!0):(i(ae=>({...ae,category_id:ie.target.value})),L(!1))},className:"w-full border rounded p-2",required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),p.map(ie=>e.jsx("option",{value:ie.id,children:ie.name},ie.id)),e.jsx("option",{value:"add_new",children:"+ Add New Category"})]}),U&&e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(Ye,{value:q,onChange:ie=>z(ie.target.value),placeholder:"New category name"}),e.jsx(ee,{onClick:async()=>{if(q.trim())try{const ie=await Pe.createQuestionCategory({name:q,parent_id:null});ie.success&&(await H(),i(ae=>({...ae,category_id:ie.data.id})),z(""),L(!1),fs({title:"Success",description:"Category created successfully!"}))}catch(ie){console.error("Error creating category:",ie),fs({variant:"destructive",title:"Error",description:ie.message||"Failed to create category"})}},children:"Add"}),e.jsx(ee,{variant:"secondary",onClick:()=>{L(!1),z("")},children:"Cancel"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-1 font-medium",children:["Subcategory ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:l.subcategory_id||"",onChange:ie=>{ie.target.value==="add_new"?B(!0):(i(ae=>({...ae,subcategory_id:ie.target.value})),B(!1))},className:"w-full border rounded p-2",required:!0,children:[e.jsx("option",{value:"",children:"Select Subcategory"}),T.map(ie=>e.jsx("option",{value:ie.id,children:ie.name},ie.id)),e.jsx("option",{value:"add_new",children:"+ Add New Subcategory"})]}),P&&e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(Ye,{value:k,onChange:ie=>R(ie.target.value),placeholder:"New subcategory name"}),e.jsx(ee,{onClick:async()=>{if(k.trim())try{const ie=await Pe.createQuestionCategory({name:k,parent_id:l.category_id||null});ie.success&&(await G(),i(ae=>({...ae,subcategory_id:ie.data.id})),R(""),B(!1),fs({title:"Success",description:"Subcategory created successfully!"}))}catch(ie){console.error("Error creating subcategory:",ie),fs({variant:"destructive",title:"Error",description:ie.message||"Failed to create subcategory"})}},children:"Add"}),e.jsx(ee,{variant:"secondary",onClick:()=>{B(!1),R("")},children:"Cancel"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Status"}),e.jsxs(At,{value:l.status||"draft",onValueChange:ie=>i(ae=>({...ae,status:ie})),children:[e.jsx(St,{className:"w-full",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${l.status==="active"?"bg-green-500":l.status==="draft"?"bg-yellow-500":l.status==="archived"?"bg-gray-600":"bg-gray-500"}`}),e.jsx("span",{children:l.status==="active"?"Active":l.status==="draft"?"Draft":l.status==="archived"?"Archived":"Draft"})]})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"draft",className:"cursor-pointer",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500"}),e.jsx("span",{className:"font-medium",children:"Draft"})]})}),e.jsx(Te,{value:"active",className:"cursor-pointer",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),e.jsx("span",{className:"font-medium",children:"Active"})]})}),e.jsx(Te,{value:"archived",className:"cursor-pointer",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-600"}),e.jsx("span",{className:"font-medium",children:"Archived"})]})})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Tags"}),e.jsxs("div",{className:`border border-gray-300 rounded-lg p-3 w-full flex flex-col ${S.trim()?"h-[200px]":"h-auto"}`,children:[e.jsx("div",{className:"mb-3",children:l.tags&&l.tags.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:l.tags.map(ie=>{const ae=g.find(we=>we.id===ie);return ae?e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded-full bg-purple-600 text-white text-sm font-medium",children:[e.jsx("span",{children:ae.name}),e.jsx("button",{type:"button",onClick:()=>Q(ie,!1),className:"ml-1 hover:text-red-200",children:""})]},ie):null})}):e.jsx("span",{className:"text-gray-500 text-sm",children:"No tags selected"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ye,{placeholder:"Search tags or type to create custom tag...",value:S,onChange:ie=>w(ie.target.value),onKeyDown:ie=>{ie.key==="Enter"&&(ie.preventDefault(),S.trim()&&X())},className:"flex-1"}),e.jsx(ee,{type:"button",variant:"outline",size:"sm",onClick:X,disabled:!S.trim(),children:"Add Tag"})]}),S.trim()&&e.jsx("div",{className:"mt-3 flex-1 overflow-y-auto",children:_.length>0?e.jsx("div",{className:"p-3 border border-gray-200 rounded-lg bg-gray-50",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:_.map(ie=>{if(ie.isNew)return e.jsx("button",{type:"button",onClick:()=>X(),className:"px-3 py-1 rounded-full border-2 border-dashed border-green-500 text-green-700 bg-green-50 hover:bg-green-100 transition-colors text-sm font-medium",children:ie.name},ie.id);const ae=l.tags&&l.tags.includes(ie.id);return e.jsxs("button",{type:"button",onClick:()=>Q(ie.id,!ae),className:`px-3 py-1 rounded-full border transition-colors text-sm font-medium ${ae?"bg-purple-600 text-white border-purple-600":"bg-gray-100 text-gray-800 border-gray-300 hover:bg-purple-100"}`,children:[ie.name,ae&&e.jsx("span",{className:"ml-1",children:""})]},ie.id)})})}):e.jsx("div",{className:"p-3 border border-gray-200 rounded-lg bg-gray-50 flex items-center justify-center h-full",children:e.jsx("p",{className:"text-gray-500 text-sm",children:"No matching tags found"})})})]})]})]}),!["multiple_choice","single_choice","true_false","short_answer","essay","coding","fill_blanks"].includes(l.question_type)&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Question Content"}),e.jsx(ms,{value:l.content||"",onChange:ie=>i(ae=>({...ae,content:ie.target.value})),rows:4,placeholder:"Enter your question here...",required:!0})]}),["multiple_choice","single_choice"].includes(l.question_type)&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Question Content"}),e.jsx(ms,{value:l.content||"",onChange:ie=>i(ae=>({...ae,content:ie.target.value})),rows:4,placeholder:"Enter your question here...",required:!0}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block font-medium",children:"Options"}),e.jsx(ee,{type:"button",variant:"outline",size:"sm",onClick:O,disabled:(l.options||[]).length>=8,children:"+ Add Option"})]}),e.jsx("div",{className:"space-y-2",children:(l.options||[]).map((ie,ae)=>e.jsxs("div",{className:"flex items-center gap-2 p-3 border rounded-lg bg-gray-50",children:[e.jsx("div",{className:"flex-1",children:e.jsx(Ye,{value:ie,onChange:we=>F(ae,we.target.value),placeholder:`Option ${ae+1}`,required:!0})}),e.jsxs("div",{className:"flex items-center gap-2",children:[l.question_type==="multiple_choice"?e.jsxs("label",{className:"flex items-center gap-1 text-sm",children:[e.jsx("input",{type:"checkbox",checked:Array.isArray(l.correctAnswers)&&l.correctAnswers.includes(ae),onChange:we=>K(ae,we.target.checked),className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),"Correct"]}):e.jsxs("label",{className:"flex items-center gap-1 text-sm",children:[e.jsx("input",{type:"radio",name:"correct-answer",checked:Array.isArray(l.correctAnswers)&&l.correctAnswers.includes(ae),onChange:()=>i(we=>({...we,correctAnswers:[ae]})),className:"w-4 h-4 text-purple-600 border-gray-300 focus:ring-purple-500"}),"Correct"]}),(l.options||[]).length>2&&e.jsx(ee,{type:"button",variant:"outline",size:"sm",onClick:()=>W(ae),className:"text-red-600 hover:text-red-700",children:"Remove"})]})]},ae))}),(l.options||[]).length<2&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:"At least 2 options are required"}),(!Array.isArray(l.correctAnswers)||l.correctAnswers.length===0)&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:"Please select at least one correct answer"})]})]}),l.question_type==="true_false"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Question Content"}),e.jsx(ms,{value:l.content||"",onChange:ie=>i(ae=>({...ae,content:ie.target.value})),rows:4,placeholder:"Enter your True/False question here...",required:!0}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block mb-2 font-medium",children:"Correct Answer"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"true-false",checked:Array.isArray(l.correctAnswers)&&l.correctAnswers.includes(!0),onChange:()=>i(ie=>({...ie,correctAnswers:[!0]})),className:"w-4 h-4 text-purple-600 border-gray-300 focus:ring-purple-500"}),"True"]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"true-false",checked:Array.isArray(l.correctAnswers)&&l.correctAnswers.includes(!1),onChange:()=>i(ie=>({...ie,correctAnswers:[!1]})),className:"w-4 h-4 text-purple-600 border-gray-300 focus:ring-purple-500"}),"False"]})]}),(!Array.isArray(l.correctAnswers)||l.correctAnswers.length===0)&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:"Please select the correct answer"})]})]}),l.question_type==="short_answer"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Question Content"}),e.jsx(ms,{value:l.content||"",onChange:ie=>i(ae=>({...ae,content:ie.target.value})),rows:4,placeholder:"Enter your short answer question here...",required:!0}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block mb-2 font-medium",children:"Acceptable Answers"}),e.jsxs("div",{className:"space-y-2",children:[(l.acceptable_answers||[""]).map((ie,ae)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ye,{value:ie,onChange:we=>{const ve=[...l.acceptable_answers||[""]];ve[ae]=we.target.value,i(He=>({...He,acceptable_answers:ve}))},placeholder:`Acceptable answer ${ae+1}`,required:!0}),(l.acceptable_answers||[]).length>1&&e.jsx(ee,{type:"button",variant:"outline",size:"sm",onClick:()=>{const we=(l.acceptable_answers||[]).filter((ve,He)=>He!==ae);i(ve=>({...ve,acceptable_answers:we}))},className:"text-red-600 hover:text-red-700",children:"Remove"})]},ae)),e.jsx(ee,{type:"button",variant:"outline",size:"sm",onClick:()=>{const ie=[...l.acceptable_answers||[""],""];i(ae=>({...ae,acceptable_answers:ie}))},children:"+ Add Answer"})]})]})]}),l.question_type==="essay"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Question Content"}),e.jsx(ms,{value:l.content||"",onChange:ie=>i(ae=>({...ae,content:ie.target.value})),rows:4,placeholder:"Enter your essay question here...",required:!0}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Rubric / Grading Guidelines"}),e.jsx(ms,{value:l.rubric||"",onChange:ie=>i(ae=>({...ae,rubric:ie.target.value})),rows:4,placeholder:"Describe what a good answer should include, grading criteria, etc..."})]})]}),l.question_type==="coding"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Question Content"}),e.jsx(ms,{value:l.content||"",onChange:ie=>i(ae=>({...ae,content:ie.target.value})),rows:4,placeholder:"Enter your coding problem description here...",required:!0}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-1 font-medium",children:["Programming Languages ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"flex flex-wrap gap-2 p-3 border rounded-lg",children:[{value:"javascript",label:"JavaScript"},{value:"python",label:"Python"},{value:"java",label:"Java"},{value:"cpp",label:"C++"},{value:"c",label:"C"},{value:"php",label:"PHP"},{value:"ruby",label:"Ruby"},{value:"go",label:"Go"},{value:"rust",label:"Rust"}].map(ie=>{const ae=l.coding_details.languages.includes(ie.value);return e.jsxs("button",{type:"button",onClick:()=>{const we=[...l.coding_details.languages];if(ae){const ve=we.filter(He=>He!==ie.value);i(He=>({...He,coding_details:{...He.coding_details,languages:ve}}))}else{const ve=[...we,ie.value];i(He=>({...He,coding_details:{...He.coding_details,languages:ve}}))}},className:`px-3 py-1 rounded-full border transition-colors text-sm font-medium ${ae?"bg-blue-600 text-white border-blue-600":"bg-gray-100 text-gray-800 border-gray-300 hover:bg-blue-100"}`,children:[ie.label,ae&&e.jsx("span",{className:"ml-1",children:""})]},ie.value)})}),l.coding_details.languages.length===0&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:"Please select at least one programming language"})]}),l.coding_details.languages.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Code Implementation"}),e.jsxs("div",{className:"border rounded-lg",children:[e.jsx("div",{className:"flex border-b",children:l.coding_details.languages.map((ie,ae)=>e.jsx("button",{type:"button",onClick:()=>i(we=>({...we,coding_details:{...we.coding_details,activeLanguage:ie}})),className:`px-4 py-2 text-sm font-medium border-r ${(l.coding_details.activeLanguage||l.coding_details.languages[0])===ie?"bg-blue-50 text-blue-700 border-blue-200":"bg-gray-50 text-gray-600 hover:bg-gray-100"}`,children:ie.charAt(0).toUpperCase()+ie.slice(1)},ie))}),l.coding_details.languages.map(ie=>{var we;return(l.coding_details.activeLanguage||l.coding_details.languages[0])===ie?e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block mb-1 font-medium",children:["Starter Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"border rounded-lg overflow-hidden shadow-sm",children:[e.jsx("div",{className:"bg-gray-50 px-3 py-1 border-b text-s font-medium text-gray-600",children:ie.charAt(0).toUpperCase()+ie.slice(1)}),e.jsx(If,{value:l.coding_details.starter_codes[ie]||"",onChange:ve=>i(He=>({...He,coding_details:{...He.coding_details,starter_codes:{...He.coding_details.starter_codes,[ie]:ve}}})),language:V(ie),height:"200px",theme:"vs-light",options:{minimap:{enabled:!1},fontSize:13,lineNumbers:"on",wordWrap:"on",scrollBeyondLastLine:!1}})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-1 font-medium",children:["Solution Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("div",{className:"flex-1 border rounded-lg overflow-hidden shadow-sm",children:[e.jsx("div",{className:"bg-gray-50 px-3 py-1 border-b text-xs font-medium text-gray-600",children:ie.charAt(0).toUpperCase()+ie.slice(1)}),e.jsx(If,{value:l.coding_details.solution_codes[ie]||"",onChange:ve=>i(He=>({...He,coding_details:{...He.coding_details,solution_codes:{...He.coding_details.solution_codes,[ie]:ve}}})),language:V(ie),height:"200px",theme:"vs-light",options:{minimap:{enabled:!1},fontSize:13,lineNumbers:"on",wordWrap:"on",scrollBeyondLastLine:!1}})]}),e.jsx(ee,{type:"button",variant:"outline",size:"sm",onClick:()=>te(ie),disabled:!((we=l.coding_details.solution_codes[ie])!=null&&we.trim())||!l.coding_details.test_cases||l.coding_details.test_cases.length===0||I,className:"whitespace-nowrap",children:I?"Verifying...":"Verify"})]})]})]},ie):null})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block font-medium",children:"Test Cases"}),e.jsx(ee,{type:"button",variant:"outline",size:"sm",onClick:()=>{const ie=[...l.coding_details.test_cases||[],{input:"",output:"",description:""}];i(ae=>({...ae,coding_details:{...ae.coding_details,test_cases:ie}}))},children:"+ Add Test Case"})]}),e.jsxs("div",{className:"space-y-3",children:[(l.coding_details.test_cases||[]).map((ie,ae)=>e.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"font-medium text-sm",children:["Test Case ",ae+1]}),e.jsx(ee,{type:"button",variant:"outline",size:"sm",onClick:()=>{const we=(l.coding_details.test_cases||[]).filter((ve,He)=>He!==ae);i(ve=>({...ve,coding_details:{...ve.coding_details,test_cases:we}}))},className:"text-red-600 hover:text-red-700",children:"Remove"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description (Optional)"}),e.jsx(Ye,{value:ie.description||"",onChange:we=>{const ve=[...l.coding_details.test_cases||[]];ve[ae]={...ve[ae],description:we.target.value},i(He=>({...He,coding_details:{...He.coding_details,test_cases:ve}}))},placeholder:"e.g., Basic case, edge case, large input..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Input"}),e.jsx(ms,{value:ie.input||"",onChange:we=>{const ve=[...l.coding_details.test_cases||[]];ve[ae]={...ve[ae],input:we.target.value},i(He=>({...He,coding_details:{...He.coding_details,test_cases:ve}}))},rows:3,placeholder:`e.g., [1,2,3]
4
5 or multi-line input`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Expected Output"}),e.jsx(ms,{value:ie.output||"",onChange:we=>{const ve=[...l.coding_details.test_cases||[]];ve[ae]={...ve[ae],output:we.target.value},i(He=>({...He,coding_details:{...He.coding_details,test_cases:ve}}))},rows:3,placeholder:`e.g., [0,1]
true or multi-line output`})]})]})]})]},ae)),(l.coding_details.test_cases||[]).length===0&&e.jsxs("div",{className:"text-center py-6 border-2 border-dashed border-gray-300 rounded-lg",children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"No test cases added yet."}),e.jsx("p",{className:"text-gray-400 text-xs mt-1",children:'Click "Add Test Case" to get started.'})]})]})]}),N.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block font-medium",children:"Verification Results"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`text-sm font-medium ${N.every(ie=>ie.isCorrect)?"text-green-600":"text-red-600"}`,children:[N.filter(ie=>ie.isCorrect).length,"/",N.length," passed"]}),e.jsx(ee,{type:"button",variant:"outline",size:"sm",onClick:()=>te(l.coding_details.activeLanguage||l.coding_details.languages[0]),disabled:I,children:I?"Verifying...":"Re-run Tests"})]})]}),e.jsx("div",{className:"space-y-3",children:N.map((ie,ae)=>e.jsxs("div",{className:`border rounded-lg p-4 ${ie.isCorrect?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:`font-medium text-sm ${ie.isCorrect?"text-green-700":"text-red-700"}`,children:["Test Case ",ie.testCaseIndex+1," - ",ie.isCorrect?" PASSED":" FAILED"]}),ie.executionTime>0&&e.jsxs("span",{className:"text-xs text-gray-500",children:[ie.executionTime,"ms"]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("b",{children:"Input:"}),e.jsx("pre",{className:"bg-white p-2 rounded mt-1 text-xs border",children:ie.input||"None"})]}),e.jsxs("div",{children:[e.jsx("b",{children:"Expected Output:"}),e.jsx("pre",{className:"bg-white p-2 rounded mt-1 text-xs border",children:ie.expectedOutput||"None"})]}),e.jsxs("div",{children:[e.jsx("b",{children:"Actual Output:"}),ie.error?e.jsx("pre",{className:"bg-red-100 p-2 rounded mt-1 text-xs border border-red-300 text-red-700",children:ie.error}):e.jsx("pre",{className:"bg-white p-2 rounded mt-1 text-xs border",children:ie.actualOutput||"None"})]})]})]},ae))})]})]})]}),l.question_type==="fill_blanks"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Question Content"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(ms,{ref:y,value:l.content||"",onChange:ie=>i(ae=>({...ae,content:ie.target.value})),rows:4,placeholder:"Type your question and use 'Insert Blank' to add blanks..."}),e.jsx(ee,{type:"button",onClick:ne,children:"Insert Blank"})]}),lg(l.content).map((ie,ae)=>{var we;return e.jsxs("div",{className:"mb-2 border rounded p-2",children:[e.jsxs("div",{className:"font-medium mb-1",children:["Blank ",ae+1," Options"]}),(we=b[ae])==null?void 0:we.options.map((ve,He)=>{var $e;return e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Ye,{value:ve,onChange:ue=>{C(oe=>{const _e=[...oe];return _e[ae]={..._e[ae],options:[..._e[ae].options]},_e[ae].options[He]=ue.target.value,_e})},placeholder:`Option ${He+1}`,required:!0}),e.jsx("input",{type:"radio",name:`blank-correct-${ae}`,checked:(($e=b[ae])==null?void 0:$e.correct)===He,onChange:()=>{C(ue=>{const oe=[...ue];return oe[ae]={...oe[ae],correct:He},oe})}})," Correct"]},He)})]},ae)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Explanation (optional)"}),e.jsx(ms,{value:l.explanation||"",onChange:ie=>i(ae=>({...ae,explanation:ie.target.value})),rows:3,placeholder:"Enter explanation for the correct answer..."})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(ee,{type:"submit",disabled:h,children:h?a?"Updating...":"Creating...":a?"Update Question":"Create Question"}),e.jsx(ee,{type:"button",variant:"secondary",onClick:()=>i(a&&r?r:en),children:a?"Reset Changes":"Reset"}),e.jsx(ee,{type:"button",variant:"outline",onClick:()=>f(!u),children:u?"Hide Preview":"Show Preview"})]})]})]}),u&&e.jsxs(Re,{className:"p-6 mt-6 bg-gray-50",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Preview"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("b",{children:"Title:"})," ",l.title||"No title"]}),e.jsxs("div",{children:[e.jsx("b",{children:"Type:"})," ",(ge=Nd.find(ie=>ie.value===l.question_type))==null?void 0:ge.label]}),e.jsxs("div",{children:[e.jsx("b",{children:"Difficulty:"})," ",(be=l2.find(ie=>ie.value===l.difficulty_level))==null?void 0:be.label]}),e.jsxs("div",{children:[e.jsx("b",{children:"Points:"})," ",l.points]}),e.jsxs("div",{children:[e.jsx("b",{children:"Content:"})," ",l.content||"No content"]}),["multiple_choice","single_choice"].includes(l.question_type)&&e.jsxs("div",{children:[e.jsx("b",{children:"Options:"}),e.jsx("ul",{className:"ml-4",children:(l.options||[]).map((ie,ae)=>e.jsx("li",{className:(l.correctAnswers||[]).includes(ae)?"font-bold text-green-700":"",children:ie||`Option ${ae+1}`},ae))})]}),l.question_type==="true_false"&&e.jsxs("div",{children:[e.jsx("b",{children:"Correct:"})," ",(l.correctAnswers||[])[0]===!0?"True":(l.correctAnswers||[])[0]===!1?"False":"Not set"]}),l.question_type==="short_answer"&&e.jsxs("div",{children:[e.jsx("b",{children:"Acceptable Answers:"}),e.jsx("ul",{className:"ml-4",children:(l.acceptable_answers||[]).map((ie,ae)=>e.jsx("li",{children:ie},ae))})]}),l.question_type==="coding"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("b",{children:"Languages:"})," ",(((Ie=l.coding_details)==null?void 0:Ie.languages)||[]).map(ie=>ie.charAt(0).toUpperCase()+ie.slice(1)).join(", ")]}),e.jsxs("div",{children:[e.jsx("b",{children:"Active Language:"})," ",(Ce=l.coding_details)!=null&&Ce.activeLanguage?l.coding_details.activeLanguage.charAt(0).toUpperCase()+l.coding_details.activeLanguage.slice(1):"N/A"]}),e.jsxs("div",{children:[e.jsx("b",{children:"Starter Code:"}),e.jsx("pre",{className:"bg-gray-100 p-2 rounded mt-1 text-sm",children:((pe=(Oe=l.coding_details)==null?void 0:Oe.starter_codes)==null?void 0:pe[(Ee=l.coding_details)==null?void 0:Ee.activeLanguage])||"Required - Not provided"})]}),e.jsxs("div",{children:[e.jsx("b",{children:"Solution Code:"}),e.jsx("pre",{className:"bg-gray-100 p-2 rounded mt-1 text-sm",children:((qe=(Ae=l.coding_details)==null?void 0:Ae.solution_codes)==null?void 0:qe[(st=l.coding_details)==null?void 0:st.activeLanguage])||"Required - Not provided"})]}),e.jsxs("div",{children:[e.jsx("b",{children:"Test Cases:"}),(l.coding_details.test_cases||[]).length>0?e.jsx("div",{className:"space-y-2 mt-1",children:(l.coding_details.test_cases||[]).map((ie,ae)=>e.jsxs("div",{className:"border rounded p-2 bg-gray-50",children:[e.jsxs("div",{className:"font-medium text-sm mb-1",children:["Test Case ",ae+1]}),ie.description&&e.jsxs("div",{className:"text-sm text-gray-600 mb-1",children:[e.jsx("b",{children:"Description:"})," ",ie.description]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("b",{children:"Input:"}),e.jsx("pre",{className:"bg-white p-1 rounded mt-1 text-xs",children:ie.input||"None"})]}),e.jsxs("div",{children:[e.jsx("b",{children:"Expected Output:"}),e.jsx("pre",{className:"bg-white p-1 rounded mt-1 text-xs",children:ie.output||"None"})]})]})]},ae))}):e.jsx("span",{className:"text-gray-500",children:"No test cases"})]})]}),l.question_type==="fill_blanks"&&e.jsxs("div",{children:[e.jsx("b",{children:"Preview:"}),e.jsx("div",{children:(()=>{let ie=0;return l.content.split(/(\[\[blank\d+\]\])/g).map((ae,we)=>{var He;if(ae.match(/^\[\[blank(\d+)\]\]$/)){const $e=ie++,ue=((He=b[$e])==null?void 0:He.options)||[];return e.jsx("select",{className:"mx-1",children:ue.map((oe,_e)=>e.jsx("option",{children:oe},_e))},we)}return e.jsx("span",{children:ae},we)})})()})]}),l.explanation&&e.jsxs("div",{children:[e.jsx("b",{children:"Explanation:"})," ",l.explanation]})]})]})]})}function _U({formData:t,availableQuestions:r,selectedQuestions:s,setSelectedQuestions:n,addQuestionToSection:c,removeQuestionFromSection:o,searchTerm:a,setSearchTerm:d,filterType:l,setFilterType:i,filterDifficulty:u,setFilterDifficulty:f}){var be,Ie,Ce,Oe,Ee;const[h,m]=A.useState(((be=t.sections[0])==null?void 0:be.id)||null),[p,x]=A.useState(null),[g,v]=A.useState("browse"),[y,b]=A.useState(!1),[C,T]=A.useState(!1),[M,U]=A.useState([]),[L,P]=A.useState(!0),[B,q]=A.useState([]),[z,k]=A.useState([]),[R,S]=A.useState("categories"),[w,_]=A.useState(null),[j,N]=A.useState(null),[E,I]=A.useState([]),D=async()=>{try{b(!0);const pe={};a&&(pe.search=a),l!=="all"&&(pe.question_type=l),u!=="all"&&(pe.difficulty_level=u),pe.status="active",pe.limit=50,j?pe.category_id=j.id:w&&(pe.category_id=w.id);const Ae=await Pe.getQuestions(pe);if(Ae.success){const st=Ae.data.questions||Ae.data||[];U(st)}else U([])}catch(pe){console.error("Error loading questions:",pe),fs({title:"Error",description:"Failed to load questions from question bank",variant:"destructive"}),U([])}finally{b(!1)}},V=async()=>{try{const[pe,Ae]=await Promise.all([Pe.getQuestionCategories(),Pe.getQuestionTags()]);pe.success&&q(pe.data||[]),Ae.success&&k(Ae.data||[])}catch(pe){console.error("Error loading categories and tags:",pe)}};A.useEffect(()=>{V()},[]),A.useEffect(()=>{const pe=setTimeout(()=>{R==="questions"&&D()},300);return()=>clearTimeout(pe)},[a,l,u,w,j]);const H=pe=>{_(pe),N(null),S("subcategories"),I([{id:pe.id,name:pe.name,type:"category"}])},G=pe=>{N(pe),S("questions"),I([{id:w.id,name:w.name,type:"category"},{id:pe.id,name:pe.name,type:"subcategory"}]),D()},$=()=>{_(null),N(null),S("categories"),I([])},Y=()=>B.filter(pe=>pe.parent_id===null),F=pe=>B.filter(Ae=>Ae.parent_id===pe),O=pe=>{if(!h){fs({title:"No Section Selected",description:"Please select a section to add the question to.",variant:"destructive"});return}const Ae=t.sections.find(qe=>qe.id===h);if(Ae.questions.some(qe=>qe.id===pe.id)){fs({title:"Question Already Added",description:"This question is already in the selected section.",variant:"destructive"});return}c(h,pe),fs({title:"Question Added",description:`Question added to ${Ae.name} section.`})},W=()=>{T(!0)},K=async pe=>{T(!1),fs({title:"Question Created",description:"New question has been created and added to your question bank."}),R==="questions"&&D()},Q=pe=>{T(!0),fs({title:"Edit Question",description:"Opening question editor..."})},X=pe=>{x(pe)},te=pe=>({multiple_choice:"Multiple Choice",single_choice:"Single Choice",true_false:"True/False",short_answer:"Short Answer",essay:"Essay",coding:"Coding",fill_blanks:"Fill in Blanks"})[pe]||pe,de=pe=>{switch(pe){case"coding":return"#3B82F6";case"multiple_choice":return"#10B981";case"single_choice":return"#10B981";case"true_false":return"#F59E0B";case"short_answer":return"#8B5CF6";case"essay":return"#8B5CF6";case"fill_blanks":return"#EF4444";default:return"#6B7280"}},xe=pe=>{switch(pe){case"beginner":return"bg-green-100 text-green-800";case"intermediate":return"bg-yellow-100 text-yellow-800";case"advanced":return"bg-red-100 text-red-800";case"expert":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},ne=t.sections.reduce((pe,Ae)=>pe+Ae.questions.length,0),ge=t.sections.reduce((pe,Ae)=>{const st=Ae.questions.reduce((qe,ie)=>qe+(ie.points||1),0);return pe+st},0);return e.jsxs("div",{className:"space-y-8 w-full mx-auto px-2 sm:px-4",children:[e.jsx("div",{className:"flex flex-col gap-3",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs(Ht,{open:C,onOpenChange:T,children:[e.jsx(xa,{asChild:!0,children:e.jsxs(ee,{variant:"outline",className:"flex items-center gap-2 px-6 py-3",size:"lg",children:[e.jsx(uf,{className:"w-5 h-5"}),"Create New Question"]})}),e.jsxs(Zt,{className:"max-w-7xl max-h-[95vh] overflow-y-auto",children:[e.jsxs(Jt,{children:[e.jsx(es,{className:"text-2xl",children:"Create New Question"}),e.jsx(ps,{className:"text-lg",children:"Create a new question that will be added to your question bank and can be used in assessments."})]}),e.jsx(Of,{onSuccess:K,categories:B,tags:z})]})]}),e.jsxs(ee,{variant:"outline",onClick:D,className:"flex items-center gap-2 px-6 py-3",size:"lg",disabled:y,children:[e.jsx(Is,{className:`w-5 h-5 ${y?"animate-spin":""}`}),"Refresh"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 flex-1 sm:justify-end",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs(et,{variant:"secondary",className:"text-sm px-3 py-1",children:["Total Questions: ",ne]}),e.jsxs(et,{variant:"secondary",className:"text-sm px-3 py-1",children:["Total Points: ",Number(ge).toFixed(2)]})]}),e.jsx("div",{className:"flex items-center gap-2 overflow-x-auto",children:e.jsx("div",{className:"flex items-center gap-2",children:t.sections.map(pe=>e.jsxs(et,{variant:"outline",className:"text-xs px-2 py-1 whitespace-nowrap",children:[pe.name,": ",pe.questions.length]},pe.id))})}),e.jsxs("div",{className:"flex items-center gap-2 min-w-[220px]",children:[e.jsx(Se,{className:"text-sm text-muted-foreground",children:"Assign To Section"}),e.jsxs(At,{value:h||"",onValueChange:m,children:[e.jsx(St,{className:"h-10",children:e.jsx(Rt,{placeholder:"Select a section"})}),e.jsx(Ct,{children:t.sections.map(pe=>e.jsx(Te,{value:pe.id,children:pe.name},pe.id))})]})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 xl:grid-cols-6 gap-6",children:e.jsx("div",{className:L?" xl:col-span-6":" xl:col-span-5",children:e.jsx(Re,{className:"p-6",children:e.jsxs(Dr,{value:g,onValueChange:v,className:"w-full",children:[e.jsxs(Ir,{className:"grid w-full grid-cols-2 mb-6 h-10",children:[e.jsxs(zt,{value:"browse",className:"flex items-center gap-2 text-sm",children:[e.jsx(lr,{className:"w-4 h-4"}),"Browse Questions"]}),e.jsxs(zt,{value:"selected",className:"flex items-center gap-2 text-sm",children:[e.jsx(Ar,{className:"w-4 h-4"}),"Selected Questions"]})]}),e.jsxs(Kt,{value:"browse",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsxs(ee,{variant:"ghost",size:"sm",onClick:$,className:`text-muted-foreground hover:text-foreground ${R==="categories"?"text-blue-600 font-medium":""}`,children:[e.jsx(X_,{className:"h-4 w-4 mr-1"}),"Categories"]}),R==="subcategories"&&e.jsxs(e.Fragment,{children:[e.jsx(Oa,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-blue-600 font-medium",children:w==null?void 0:w.name})]}),R==="questions"&&e.jsxs(e.Fragment,{children:[e.jsx(Oa,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>H(w),className:"text-muted-foreground hover:text-foreground",children:w==null?void 0:w.name}),e.jsx(Oa,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-blue-600 font-medium",children:j==null?void 0:j.name})]})]}),R!=="categories"&&e.jsxs(ee,{variant:"outline",size:"sm",onClick:$,className:"flex items-center gap-2",children:[e.jsx(oa,{className:"h-4 w-4"}),"Back to Categories"]})]}),R==="categories"&&e.jsx("div",{className:"bg-white border rounded-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsx("table",{className:"w-full",children:e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Y().map(pe=>e.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>H(pe),children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded-full mr-3",style:{backgroundColor:pe.color||"#3B82F6"}}),e.jsx("div",{className:"text-sm font-medium text-gray-900",children:pe.name})]})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-800",children:[pe.question_count||0," questions"]})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-800",children:[F(pe.id).length," subcategories"]})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium",children:e.jsx(ee,{variant:"ghost",size:"sm",onClick:Ae=>{Ae.stopPropagation(),H(pe)},className:"text-blue-600 hover:text-blue-900 h-8 px-3",children:"Select"})})]},pe.id))})})})}),R==="subcategories"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:["Select Subcategory in ",w==null?void 0:w.name]}),e.jsx("p",{className:"text-sm text-blue-700",children:"Choose a subcategory to view its questions"})]}),e.jsx("div",{className:"bg-white border rounded-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsx("table",{className:"w-full",children:e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:F(w==null?void 0:w.id).map(pe=>e.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>G(pe),children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded-full mr-3",style:{backgroundColor:pe.color||"#3B82F6"}}),e.jsx("div",{className:"text-sm font-medium text-gray-900",children:pe.name})]})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-800",children:[pe.question_count||0," questions"]})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium",children:e.jsx(ee,{variant:"ghost",size:"sm",onClick:Ae=>{Ae.stopPropagation(),G(pe)},className:"text-blue-600 hover:text-blue-900 h-8 px-3",children:"Select"})})]},pe.id))})})})})]}),R==="questions"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-green-900 mb-2",children:["Questions in ",j==null?void 0:j.name]}),e.jsx("p",{className:"text-sm text-green-700",children:"Browse and select questions from this subcategory"})]}),e.jsx(Re,{className:"p-4 sticky top-0 z-10 bg-white",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(hn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(Ye,{placeholder:"Search questions...",value:a,onChange:pe=>d(pe.target.value),className:"pl-10"})]})}),e.jsxs(At,{value:l,onValueChange:i,children:[e.jsx(St,{className:"w-full md:w-48",children:e.jsx(Rt,{placeholder:"Question Type"})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"all",children:"All Types"}),e.jsx(Te,{value:"multiple_choice",children:"Multiple Choice"}),e.jsx(Te,{value:"single_choice",children:"Single Choice"}),e.jsx(Te,{value:"true_false",children:"True/False"}),e.jsx(Te,{value:"short_answer",children:"Short Answer"}),e.jsx(Te,{value:"essay",children:"Essay"}),e.jsx(Te,{value:"coding",children:"Coding"}),e.jsx(Te,{value:"fill_blanks",children:"Fill in Blanks"})]})]}),e.jsxs(At,{value:u,onValueChange:f,children:[e.jsx(St,{className:"w-full md:w-48",children:e.jsx(Rt,{placeholder:"Difficulty"})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"all",children:"All Levels"}),e.jsx(Te,{value:"beginner",children:"Beginner"}),e.jsx(Te,{value:"intermediate",children:"Intermediate"}),e.jsx(Te,{value:"advanced",children:"Advanced"}),e.jsx(Te,{value:"expert",children:"Expert"})]})]}),e.jsx(ee,{variant:"outline",onClick:()=>{d(""),i("all"),f("all")},className:"w-full md:w-auto",children:"Reset"})]})}),y?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Loading questions..."})]}):M.length===0?e.jsx(Re,{className:"text-center py-12",children:e.jsxs(De,{children:[e.jsx(Lr,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No questions found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:a||l!=="all"||u!=="all"?"Try adjusting your search criteria or filters.":"No questions available in this category."}),e.jsxs(ee,{onClick:W,className:"flex items-center gap-2",children:[e.jsx(uf,{className:"w-4 h-4"}),"Create New Question"]})]})}):e.jsx("div",{className:"bg-white border rounded-lg overflow-hidden",children:e.jsx("div",{children:e.jsx("table",{className:"w-full",children:e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:M.map(pe=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors align-top",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded-full mr-3",style:{backgroundColor:de(pe.question_type)}}),e.jsx("div",{className:"text-sm font-medium text-gray-900 whitespace-normal break-words",children:pe.title||pe.content})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"text-xs text-gray-500",children:te(pe.question_type)})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(et,{className:xe(pe.difficulty_level),children:pe.difficulty_level})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:"text-sm text-gray-500",children:[pe.points||1," pts"]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"text-sm text-gray-500",children:pe.time_limit_seconds?`${pe.time_limit_seconds}s`:"No limit"})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ee,{variant:"ghost",size:"sm",onClick:()=>X(pe),className:"text-blue-600 hover:text-blue-900 h-8 px-3",children:[e.jsx(Ss,{className:"w-4 h-4 mr-1"}),"View"]}),e.jsxs(ee,{variant:"default",size:"sm",onClick:()=>O(pe),disabled:!h,className:"h-8 px-3",children:[e.jsx(vs,{className:"w-4 h-4 mr-1"}),"Add"]})]})})]},pe.id))})})})})]})]}),e.jsx(Kt,{value:"selected",className:"space-y-4",children:e.jsx("div",{className:"space-y-4",children:t.sections.map(pe=>e.jsxs(Re,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:pe.name}),e.jsxs(et,{variant:"outline",className:"text-sm px-2 py-1",children:[pe.questions.length," questions"]})]}),pe.questions.length===0?e.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[e.jsx(Lr,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500",children:"No questions added to this section yet."})]}):e.jsx("div",{className:"bg-white border rounded-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsx("table",{className:"w-full",children:e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:pe.questions.map((Ae,st)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded-full mr-3",style:{backgroundColor:de(Ae.question_type)}}),e.jsx("div",{className:"text-sm font-medium text-gray-900 whitespace-normal break-words",children:Ae.title||"Untitled Question"})]})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:"text-xs text-gray-500",children:te(Ae.question_type)})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx(et,{className:xe(Ae.difficulty_level),children:Ae.difficulty_level})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsxs("span",{className:"text-sm text-gray-500",children:[Ae.points||1," pts"]})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ee,{type:"button",variant:"ghost",size:"sm",onClick:()=>X(Ae),className:"text-blue-600 hover:text-blue-900 h-8 px-3",children:[e.jsx(Ss,{className:"w-4 h-4 mr-1"}),"View"]}),e.jsxs(ee,{type:"button",variant:"ghost",size:"sm",onClick:()=>Q(),className:"text-green-600 hover:text-green-900 h-8 px-3",children:[e.jsx(Bn,{className:"w-4 h-4 mr-1"}),"Edit"]}),e.jsxs(ee,{type:"button",variant:"ghost",size:"sm",onClick:()=>o(pe.id,Ae.id),className:"text-red-600 hover:text-red-900 h-8 px-3",children:[e.jsx(Ds,{className:"w-4 h-4 mr-1"}),"Remove"]})]})})]},Ae.section_question_id||st))})})})})]},pe.id))})})]})})})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[85vh] overflow-y-auto shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[p.question_type==="coding"&&e.jsx(Gr,{className:"h-4 w-4 text-blue-600"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Question Details"}),p.question_type==="coding"&&e.jsx("span",{className:"ml-2 text-blue-600 font-medium text-sm",children:" Coding Question"})]}),e.jsx(ee,{type:"button",variant:"ghost",onClick:()=>x(null),className:"h-8 w-8 p-0 hover:bg-gray-100",children:e.jsx(Dn,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx(Re,{children:e.jsx(lt,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:de(p.question_type)}}),e.jsxs("div",{children:[e.jsx(mt,{className:"text-lg",children:p.title||"Untitled Question"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:p.content})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(et,{variant:"outline",className:"text-xs",children:te(p.question_type)}),e.jsx(et,{className:`${xe(p.difficulty_level)} text-xs`,children:p.difficulty_level}),e.jsxs(et,{variant:"secondary",className:"text-xs",children:[p.points||1," pts"]})]})]})})}),p.question_type==="coding"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs(Re,{children:[e.jsx(lt,{className:"pb-2",children:e.jsxs(mt,{className:"text-base flex items-center gap-2",children:[e.jsx(la,{className:"h-4 w-4"}),"Programming Settings"]})}),e.jsx(De,{className:"pt-0",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(Se,{className:"text-xs font-medium text-muted-foreground",children:"Language"}),e.jsx("p",{className:"text-sm font-semibold",children:(()=>{const pe=p.metadata||p.coding_details||{},Ae=pe.languages||pe.language||[p.programming_language];return Array.isArray(Ae)?Ae[0]:Ae})()})]}),e.jsxs("div",{children:[e.jsx(Se,{className:"text-xs font-medium text-muted-foreground",children:"Points"}),e.jsxs("p",{className:"text-sm font-semibold text-primary",children:[p.points||1," pts"]})]})]})})]}),e.jsxs(Re,{children:[e.jsx(lt,{className:"pb-2",children:e.jsxs(mt,{className:"text-base flex items-center gap-2",children:[e.jsx(Gr,{className:"h-4 w-4"}),"Starter Code"]})}),e.jsx(De,{className:"pt-0",children:e.jsx("div",{className:"bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-x-auto max-h-32",children:e.jsx("pre",{className:"whitespace-pre-wrap",children:(()=>{var ie,ae;const pe=p.metadata||p.coding_details||{},Ae=pe.languages||pe.language||[p.programming_language],st=Array.isArray(Ae)?Ae[0]:Ae;return((ie=pe.starter_codes)==null?void 0:ie[st])||((ae=pe.starterCodes)==null?void 0:ae[st])||pe.starter_code||pe.starterCode||"// No starter code provided"})()})})})]}),e.jsxs(Re,{children:[e.jsx(lt,{className:"pb-2",children:e.jsxs(mt,{className:"text-base flex items-center gap-2",children:[e.jsx(Yt,{className:"h-4 w-4 text-green-600"}),"Solution Code"]})}),e.jsx(De,{className:"pt-0",children:e.jsx("div",{className:"bg-green-900 text-green-100 p-3 rounded-lg font-mono text-xs overflow-x-auto max-h-32",children:e.jsx("pre",{className:"whitespace-pre-wrap",children:(()=>{var ie,ae;const pe=p.metadata||p.coding_details||{},Ae=pe.languages||pe.language||[p.programming_language],st=Array.isArray(Ae)?Ae[0]:Ae;return((ie=pe.solution_codes)==null?void 0:ie[st])||((ae=pe.solutionCodes)==null?void 0:ae[st])||pe.solution_code||pe.solutionCode||"// Solution code not provided"})()})})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(Re,{children:[e.jsx(lt,{className:"pb-2",children:e.jsxs(mt,{className:"text-base flex items-center gap-2",children:[e.jsx(x1,{className:"h-4 w-4"}),"Test Cases"]})}),e.jsx(De,{className:"pt-0",children:e.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[(((Ie=p.metadata)==null?void 0:Ie.test_cases)||((Ce=p.coding_details)==null?void 0:Ce.test_cases)||p.test_cases||[]).map((pe,Ae)=>e.jsxs("div",{className:"border rounded p-2 bg-muted/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("span",{className:"text-xs font-semibold",children:["Test ",Ae+1]}),pe.hidden&&e.jsx(et,{variant:"outline",className:"text-xs",children:"Hidden"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx(Se,{className:"text-xs text-muted-foreground",children:"Input"}),e.jsx("div",{className:"bg-gray-100 p-1 rounded font-mono text-xs",children:pe.input||pe.test_input||"No input"})]}),e.jsxs("div",{children:[e.jsx(Se,{className:"text-xs text-muted-foreground",children:"Output"}),e.jsx("div",{className:"bg-green-100 p-1 rounded font-mono text-xs",children:pe.output||pe.expected_output||"No output"})]})]})]},Ae)),!((Oe=p.metadata)!=null&&Oe.test_cases)&&!((Ee=p.coding_details)!=null&&Ee.test_cases)&&!p.test_cases&&e.jsxs("div",{className:"text-center py-4 text-muted-foreground",children:[e.jsx(x1,{className:"h-6 w-6 mx-auto mb-1"}),e.jsx("p",{className:"text-xs",children:"No test cases defined"})]})]})})]}),p.time_limit_seconds&&e.jsxs(Re,{children:[e.jsx(lt,{className:"pb-2",children:e.jsxs(mt,{className:"text-base flex items-center gap-2",children:[e.jsx(Ps,{className:"h-4 w-4"}),"Time Limit"]})}),e.jsx(De,{className:"pt-0",children:e.jsxs("p",{className:"text-lg font-bold text-primary",children:[p.time_limit_seconds," seconds"]})})]})]})]}),p.question_type!=="coding"&&e.jsx(Re,{children:e.jsxs(De,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1 text-sm",children:"Question Content"}),e.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap line-clamp-3",children:p.content})]}),p.options&&p.options.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1 text-sm",children:"Options"}),e.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:p.options.map((pe,Ae)=>e.jsxs("div",{className:"flex items-center space-x-2 p-1 bg-muted/30 rounded text-xs",children:[e.jsxs("span",{className:"font-medium text-primary",children:[String.fromCharCode(65+Ae),"."]}),e.jsx("span",{className:"flex-1",children:pe}),p.correct_answers&&p.correct_answers.includes(pe)&&e.jsxs(et,{className:"bg-green-100 text-green-700 border-green-200 text-xs",children:[e.jsx(Ar,{className:"w-3 h-3 mr-1"}),"Correct"]})]},Ae))})]}),p.correct_answer&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1 text-sm",children:"Correct Answer"}),e.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded",children:e.jsx("p",{className:"text-xs text-green-700 font-medium",children:Array.isArray(p.correct_answer)?p.correct_answer.join(", "):p.correct_answer})})]}),p.explanation&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1 text-sm",children:"Explanation"}),e.jsx("div",{className:"p-2 bg-blue-50 border border-blue-200 rounded",children:e.jsx("p",{className:"text-xs text-blue-700 line-clamp-2",children:p.explanation})})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t text-xs",children:[e.jsxs("div",{className:"flex items-center space-x-3 text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(Ps,{className:"h-3 w-3 mr-1"}),p.time_limit_seconds?`${p.time_limit_seconds}s`:"No limit"]}),e.jsxs("span",{className:"font-medium text-foreground",children:[p.points||1," points"]})]}),e.jsx("div",{className:"text-muted-foreground",children:p.created_at&&`Created: ${new Date(p.created_at).toLocaleDateString()}`})]})]})}),p.tags&&p.tags.length>0&&e.jsx(Re,{children:e.jsxs(De,{className:"pt-3",children:[e.jsx("h3",{className:"font-semibold mb-1 text-sm",children:"Tags"}),e.jsx("div",{className:"flex items-center gap-1 flex-wrap",children:p.tags.map((pe,Ae)=>e.jsx(et,{variant:"outline",className:"text-xs",children:pe},Ae))})]})}),e.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t",children:[e.jsx(ee,{type:"button",variant:"outline",onClick:()=>x(null),size:"sm",className:"px-4",children:"Close"}),e.jsx(ee,{type:"button",onClick:()=>{O(p),x(null)},size:"sm",className:"px-4",children:"Add to Section"})]})]})]})})]})}function NU({formData:t,calculateTotalPoints:r,colleges:s}){var l,i,u,f;const n=h=>({quiz:"Quiz",test:"Test",exam:"Exam",assignment:"Assignment",coding_challenge:"Coding Challenge",survey:"Survey"})[h]||h,c=h=>({beginner:"bg-green-100 text-green-800",intermediate:"bg-yellow-100 text-yellow-800",advanced:"bg-red-100 text-red-800",expert:"bg-purple-100 text-purple-800"})[h]||"bg-gray-100 text-gray-800",o=h=>({none:"None",basic:"Basic",advanced:"Advanced",ai:"AI Proctoring"})[h]||h,a=()=>{var h,m,p,x;return(((h=t.assigned_colleges)==null?void 0:h.length)||0)+(((m=t.assigned_departments)==null?void 0:m.length)||0)+(((p=t.assigned_groups)==null?void 0:p.length)||0)+(((x=t.assigned_students)==null?void 0:x.length)||0)},d=()=>t.sections.reduce((h,m)=>h+m.questions.length,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Review & Submit"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Review all your assessment settings before creating and assigning it."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(Re,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Os,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Basic Information"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Title"}),e.jsx("p",{className:"text-sm",children:t.title||"No title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Assessment Type"}),e.jsx(et,{variant:"outline",children:n(t.assessment_category)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Assessment Structure"}),e.jsx(et,{variant:t.assessment_type==="multi_type"?"default":"secondary",children:t.assessment_type==="multi_type"?`Multi-Type (${t.multi_type_structure==="section_based"?"Section Based":"Non-Section Based"})`:"Single Type"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Difficulty"}),e.jsx(et,{className:c(t.difficulty_level),children:t.difficulty_level})]}),t.description&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Description"}),e.jsx("p",{className:"text-sm text-gray-700",children:t.description})]}),t.instructions&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Instructions"}),e.jsx("p",{className:"text-sm text-gray-700",children:t.instructions})]})]})]}),e.jsxs(Re,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(la,{className:"w-5 h-5 text-green-600"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Assessment Settings"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Time Limit"}),e.jsx("p",{className:"text-sm",children:t.time_limit_minutes?`${t.time_limit_minutes} minutes`:"No limit"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Total Points"}),e.jsxs("p",{className:"text-sm font-medium",children:[Number(r()).toFixed(2)," points"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Passing Score"}),e.jsxs("p",{className:"text-sm",children:[t.passing_score,"%"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Max Attempts"}),e.jsx("p",{className:"text-sm",children:t.max_attempts})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.shuffle_questions&&e.jsx(et,{variant:"secondary",children:"Shuffle Questions"}),t.show_results_immediately&&e.jsx(et,{variant:"secondary",children:"Show Results Immediately"}),t.allow_review&&e.jsx(et,{variant:"secondary",children:"Allow Review"}),t.show_correct_answers&&e.jsx(et,{variant:"secondary",children:"Show Correct Answers"})]})]})]}),e.jsxs(Re,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(fr,{className:"w-5 h-5 text-purple-600"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Scheduling"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Start Date & Time"}),e.jsxs("p",{className:"text-sm",children:[t.start_date," at ",t.start_time," (",t.assessment_country||t.timezone,")"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"End Date & Time"}),e.jsxs("p",{className:"text-sm",children:[t.end_date," at ",t.end_time," (",t.assessment_country||t.timezone,")"]})]}),t.early_access_hours>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Early Access"}),e.jsxs("p",{className:"text-sm",children:[t.early_access_hours," hours before start"]})]}),t.late_submission_minutes>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Late Window"}),e.jsxs("p",{className:"text-sm",children:[t.late_submission_minutes," minutes after time limit"]})]})]})]}),e.jsxs(Re,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Ss,{className:"w-5 h-5 text-orange-600"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Proctoring"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Proctoring Type"}),e.jsx(et,{variant:"outline",children:o(t.proctoring_type)})]}),t.require_proctoring&&e.jsxs("div",{className:"space-y-2",children:[t.require_webcam&&e.jsx(et,{variant:"secondary",children:"Webcam Required"}),t.require_microphone&&e.jsx(et,{variant:"secondary",children:"Microphone Required"}),t.screen_sharing_detection&&e.jsx(et,{variant:"secondary",children:"Screen Sharing Detection"}),t.multiple_device_detection&&e.jsx(et,{variant:"secondary",children:"Multiple Device Detection"}),t.plagiarism_detection&&e.jsx(et,{variant:"secondary",children:"Plagiarism Detection"})]})]})]}),e.jsxs(Re,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Ar,{className:"w-5 h-5 text-indigo-600"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Assessment Control"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Assessment Type"}),e.jsx(et,{variant:t.assessment_type==="multi_type"?"default":"secondary",children:t.assessment_type==="multi_type"?"Multi-Type":"Single Type"})]}),t.assessment_type==="multi_type"&&t.multi_type_structure==="section_based"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Structure"}),e.jsx(et,{variant:"default",children:"Section Based"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Sequential Access"}),e.jsx(et,{variant:t.sequential_sections?"default":"secondary",children:t.sequential_sections?"Enabled":"Disabled"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Section Completion"}),e.jsx(et,{variant:t.require_section_completion?"default":"secondary",children:t.require_section_completion?"Required":"Optional"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Multi-Type Sections"}),e.jsxs("p",{className:"text-sm",children:[t.sections.filter(h=>(h.allowed_question_types||[]).length>1).length," of ",t.sections.length," sections"]})]})]}):t.assessment_type==="multi_type"&&t.multi_type_structure==="non_section_based"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Structure"}),e.jsx(et,{variant:"default",children:"Non-Section Based"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Question Shuffling"}),e.jsx(et,{variant:t.shuffle_all_questions?"default":"secondary",children:t.shuffle_all_questions?"Enabled":"Disabled"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Question Navigation"}),e.jsx(et,{variant:t.allow_question_navigation?"default":"secondary",children:t.allow_question_navigation?"Enabled":"Disabled"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Section Navigation"}),e.jsx(et,{variant:t.allow_section_navigation?"default":"secondary",children:t.allow_section_navigation?"Enabled":"Disabled"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Progress Tracking"}),e.jsx(et,{variant:t.show_section_progress?"default":"secondary",children:t.show_section_progress?"Enabled":"Disabled"})]})]})]}),t.assessment_type==="multi_type"&&t.multi_type_structure==="section_based"&&t.sequential_sections&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx(Ti,{className:"w-4 h-4 inline mr-1"}),"Students must complete each section before accessing the next one."]})}),t.assessment_type==="multi_type"&&t.multi_type_structure==="non_section_based"&&e.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-purple-700",children:[e.jsx(Ti,{className:"w-4 h-4 inline mr-1"}),"All questions in continuous flow with mixed question types throughout."]})}),t.assessment_type==="single_type"&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-green-700",children:[e.jsx(Ti,{className:"w-4 h-4 inline mr-1"}),"Traditional single-type assessment with standard navigation."]})})]})]}),e.jsxs(Re,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(as,{className:"w-5 h-5 text-indigo-600"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Assignment"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Total Assignments"}),e.jsxs("p",{className:"text-sm font-medium",children:[a()," recipients"]})]}),((l=t.assigned_colleges)==null?void 0:l.length)>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Colleges"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:t.assigned_colleges.map(h=>{const m=s.find(p=>p.id===h);return e.jsx(et,{variant:"outline",className:"text-xs",children:(m==null?void 0:m.name)||"Unknown College"},h)})})]}),((i=t.assigned_departments)==null?void 0:i.length)>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Departments"}),e.jsxs("p",{className:"text-sm",children:[t.assigned_departments.length," departments"]})]}),((u=t.assigned_groups)==null?void 0:u.length)>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Groups"}),e.jsxs("p",{className:"text-sm",children:[t.assigned_groups.length," groups"]})]}),((f=t.assigned_students)==null?void 0:f.length)>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Individual Students"}),e.jsxs("p",{className:"text-sm",children:[t.assigned_students.length," students"]})]}),t.access_password&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Access Password"}),e.jsx("p",{className:"text-sm",children:"Password protected"})]})]})]}),e.jsxs(Re,{className:"p-6 lg:col-span-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Ar,{className:"w-5 h-5 text-teal-600"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Sections & Questions"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:t.sections.length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Sections"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:d()}),e.jsx("p",{className:"text-sm text-gray-600",children:"Questions"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:Number(r()).toFixed(2)}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Points"})]})]}),e.jsx(xc,{}),e.jsx("div",{className:"space-y-3",children:t.sections.map((h,m)=>{const p=g=>{const v=g.allowed_question_types||[],y=v.includes("coding"),b=v.includes("multiple_choice")||v.includes("single_choice")||v.includes("true_false");return y&&b?"":y?"":b?"":""},x=g=>{const v=g.allowed_question_types||[],y=[];return v.includes("coding")&&y.push("Coding"),(v.includes("multiple_choice")||v.includes("single_choice")||v.includes("true_false"))&&y.push("MCQ"),v.includes("essay")&&y.push("Essay"),v.includes("short_answer")&&y.push("Short Answer"),v.includes("fill_blanks")&&y.push("Fill Blanks"),y.join(" + ")};return e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:p(h)}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[h.name,e.jsx(et,{variant:"outline",className:"text-xs",children:x(h)})]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Section ",m+1]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(et,{variant:"outline",children:[h.questions.length," questions"]}),h.time_limit_minutes&&e.jsxs(et,{variant:"secondary",children:[h.time_limit_minutes," min"]})]})]}),h.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:h.description}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500",children:"Navigation"}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(et,{variant:"outline",className:"text-xs",children:h.navigation_type==="free"?"Free Navigation":"Sequential"}),h.navigation_type==="sequential"&&e.jsx("span",{className:"text-xs text-orange-600",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500",children:"Completion"}),e.jsx("div",{className:"flex items-center gap-1 mt-1",children:e.jsx(et,{variant:"outline",className:"text-xs",children:h.completion_requirement==="all"?"All Required":h.completion_requirement==="minimum"?`Min ${h.minimum_questions}`:h.completion_requirement==="percentage"?`${h.completion_percentage}%`:"All Required"})})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[h.shuffle_questions&&e.jsx(et,{variant:"secondary",className:"text-xs",children:"Shuffle"}),h.allow_return_to_section&&e.jsx(et,{variant:"secondary",className:"text-xs",children:"Allow Return"}),(h.allowed_question_types||[]).length>1&&e.jsx(et,{variant:"default",className:"text-xs",children:"Multi-Type"})]})]},h.id)})})]})]})]}),e.jsxs(Re,{className:"p-6 bg-blue-50 border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Ti,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-blue-800",children:"Email Notification Summary"})]}),e.jsxs("div",{className:"text-sm text-blue-700 space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Recipients:"})," ",a()," total recipients will receive email notifications"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email Content:"})," Assessment details, schedule, instructions, and direct access link"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Proctoring Info:"})," ",t.require_proctoring?"Included":"Not applicable"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Timing:"})," Emails will be sent immediately after assessment creation"]})]})]}),e.jsxs(Re,{className:"p-6 bg-green-50 border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Kd,{className:"w-5 h-5 text-green-600"}),e.jsx("h3",{className:"text-lg font-semibold text-green-800",children:"Ready to Create Assessment"})]}),e.jsxs("div",{className:"text-sm text-green-700 space-y-1",children:[e.jsx("p",{children:" All required fields completed"}),e.jsxs("p",{children:[" ",d()," questions added across ",t.sections.length," sections"]}),e.jsxs("p",{children:[" Assessment assigned to ",a()," recipients"]}),e.jsx("p",{children:" Email notifications will be sent automatically"}),e.jsxs("p",{children:[" Total assessment value: ",Number(r()).toFixed(2)," points"]})]})]})]})}function SU(){var W;const t=Br(),[r]=tm(),{toast:s}=Js(),[n,c]=A.useState(1),[o,a]=A.useState(!1),[d,l]=A.useState(!1),[i,u]=A.useState(new Set),[f,h]=A.useState([]),[m,p]=A.useState([]),[x,g]=A.useState(""),[v,y]=A.useState("all"),[b,C]=A.useState("all"),T=r.get("edit"),M=!!T,[U,L]=A.useState(!1),[P,B]=A.useState({title:"",selected_question_types:[],description:"",instructions:"",time_limit_minutes:30,per_question_time_limit:null,total_points:100,passing_score:70,max_attempts:1,time_between_attempts_hours:24,shuffle_questions:!1,show_results_immediately:!0,allow_review:!0,show_correct_answers:!1,start_date:"",start_time:"",end_date:"",end_time:"",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,assessment_country:"",early_access_hours:0,late_submission_minutes:0,require_proctoring:!1,proctoring_type:"none",browser_lockdown:!1,tab_switching_detection:!1,copy_paste_detection:!1,right_click_detection:!1,fullscreen_requirement:!1,keyboard_shortcut_detection:!1,max_tab_switches:0,require_webcam:!1,require_microphone:!1,screen_sharing_detection:!1,multiple_device_detection:!1,plagiarism_detection:!1,face_detection:!1,voice_detection:!1,background_noise_detection:!1,eye_tracking:!1,behavioral_analysis:!1,facial_recognition:!1,emotion_detection:!1,attention_monitoring:!1,suspicious_activity_detection:!1,ai_plagiarism_detection:!1,voice_analysis:!1,gesture_recognition:!1,real_time_alerts:!1,assigned_colleges:[],assigned_departments:[],assigned_groups:[],assigned_students:[],access_password:"",ip_restrictions:"",device_restrictions:"",browser_restrictions:"",sections:[{id:"section-1",name:"Section 1",description:"",instructions:"",time_limit_minutes:null,allowed_question_types:[...Nd.map(K=>K.value)],shuffle_questions:!1,navigation_type:"free",completion_requirement:"all",minimum_questions:null,completion_percentage:null,allow_return_to_section:!1,questions:[]}],sequential_sections:!1,require_section_completion:!1,difficulty_level:"medium",tags:[],status:"draft"});if(A.useEffect(()=>{q()},[]),A.useEffect(()=>{M&&T&&z()},[M,T]),M&&U)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading assessment data..."})]})});const q=async()=>{try{a(!0);const K=await Pe.getSuperAdminColleges();if(K.success){let Q=[];K.data&&Array.isArray(K.data)?Q=K.data:K.data&&K.data.colleges&&Array.isArray(K.data.colleges)?Q=K.data.colleges:K.data&&K.data.data&&Array.isArray(K.data.data)&&(Q=K.data.data),h(Q)}else h([])}catch{s({variant:"destructive",title:"Error",description:"Failed to load initial data"}),h([])}finally{a(!1)}},z=async()=>{var K,Q,X,te,de,xe,ne,ge,be,Ie,Ce,Oe,Ee,pe,Ae,st,qe,ie,ae,we,ve,He,$e,ue,oe,_e,Me,ze,Xe,Ve,ot,xt,ft,at,Be,Ue,re,ye,ke,Fe,Ke,Qe,he;if(!T){s({variant:"destructive",title:"Error",description:"No assessment ID provided for editing"}),t("/assessments");return}try{L(!0);const je=await Pe.getAssessmentTemplateById(T);if(je.success){const Ne=je.data,tt=((K=Ne.assignments)==null?void 0:K.filter(gt=>gt.assignment_type==="college"))||[],jt=((Q=Ne.assignments)==null?void 0:Q.filter(gt=>gt.assignment_type==="department"))||[],dt=((X=Ne.assignments)==null?void 0:X.filter(gt=>gt.assignment_type==="individual"||gt.assignment_type==="student"))||[];let kt=Ne.sections&&Ne.sections.length>0?Ne.sections:[{id:"section-1",name:"Section 1",description:"",instructions:"",time_limit_minutes:null,allowed_question_types:["multiple_choice"],shuffle_questions:!1,navigation_type:"free",completion_requirement:"all",minimum_questions:null,completion_percentage:null,allow_return_to_section:!1,questions:[]}];if(Ne.questions&&Ne.questions.length>0){const gt={};Ne.questions.forEach(wt=>{const Pt=wt.section_id||"section-1";gt[Pt]||(gt[Pt]=[]),gt[Pt].push({...wt,section_question_id:`${Pt}-${Date.now()}-${Math.random()}`,points:wt.points||1,is_required:!0,order:0})}),kt=kt.map(wt=>({...wt,questions:gt[wt.id]||[]}))}B({title:Ne.title||"",assessment_type:"single_type",multi_type_structure:null,selected_question_types:[],description:Ne.description||"",instructions:Ne.instructions||"",time_limit_minutes:Ne.time_limit_minutes||30,per_question_time_limit:null,total_points:Ne.total_points||100,passing_score:Ne.passing_score||70,max_attempts:Ne.max_attempts||1,time_between_attempts_hours:Ne.time_between_attempts_hours||24,shuffle_questions:Ne.shuffle_questions||!1,show_results_immediately:Ne.show_results_immediately!==!1,allow_review:Ne.allow_review!==!1,show_correct_answers:Ne.show_correct_answers||!1,start_date:(()=>{var wt;const gt=((wt=Ne.scheduling)==null?void 0:wt.start_date)||Ne.default_start_date_only||"";return gt?gt.includes("T")?gt.split("T")[0]:gt:""})(),start_time:((te=Ne.scheduling)==null?void 0:te.start_time)||Ne.default_start_time_only||"",end_date:(()=>{var wt;const gt=((wt=Ne.scheduling)==null?void 0:wt.end_date)||Ne.default_end_date_only||"";return gt?gt.includes("T")?gt.split("T")[0]:gt:""})(),end_time:((de=Ne.scheduling)==null?void 0:de.end_time)||Ne.default_end_time_only||"",timezone:((xe=Ne.scheduling)==null?void 0:xe.timezone)||Ne.default_assessment_timezone||Intl.DateTimeFormat().resolvedOptions().timeZone,assessment_timezone:((ne=Ne.scheduling)==null?void 0:ne.timezone)||Ne.default_assessment_timezone||Intl.DateTimeFormat().resolvedOptions().timeZone,assessment_country:(()=>{var wt;const gt=((wt=Ne.scheduling)==null?void 0:wt.timezone)||Ne.default_assessment_timezone||"UTC";return ZB(gt)||""})(),early_access_hours:((ge=Ne.scheduling)==null?void 0:ge.early_access_hours)||Ne.default_early_access_hours||0,late_submission_minutes:((be=Ne.scheduling)==null?void 0:be.late_submission_minutes)||Ne.default_late_submission_minutes||0,require_proctoring:Ne.require_proctoring||!1,proctoring_type:((Ie=Ne.proctoring_settings)==null?void 0:Ie.proctoring_type)||"none",max_tab_switches:((Ce=Ne.proctoring_settings)==null?void 0:Ce.max_tab_switches)??0,browser_lockdown:((Oe=Ne.proctoring_settings)==null?void 0:Oe.browser_lockdown)||!1,tab_switching_detection:((Ee=Ne.proctoring_settings)==null?void 0:Ee.tab_switching_detection)||!1,copy_paste_detection:((pe=Ne.proctoring_settings)==null?void 0:pe.copy_paste_detection)||!1,right_click_detection:((Ae=Ne.proctoring_settings)==null?void 0:Ae.right_click_detection)||!1,fullscreen_requirement:((st=Ne.proctoring_settings)==null?void 0:st.fullscreen_requirement)||!1,keyboard_shortcut_detection:((qe=Ne.proctoring_settings)==null?void 0:qe.keyboard_shortcut_detection)||!1,require_webcam:((ie=Ne.proctoring_settings)==null?void 0:ie.require_webcam)||!1,require_microphone:((ae=Ne.proctoring_settings)==null?void 0:ae.require_microphone)||!1,screen_sharing_detection:((we=Ne.proctoring_settings)==null?void 0:we.screen_sharing_detection)||!1,multiple_device_detection:((ve=Ne.proctoring_settings)==null?void 0:ve.multiple_device_detection)||!1,plagiarism_detection:((He=Ne.proctoring_settings)==null?void 0:He.plagiarism_detection)||!1,face_detection:(($e=Ne.proctoring_settings)==null?void 0:$e.face_detection)||!1,voice_detection:((ue=Ne.proctoring_settings)==null?void 0:ue.voice_detection)||!1,background_noise_detection:((oe=Ne.proctoring_settings)==null?void 0:oe.background_noise_detection)||!1,eye_tracking:((_e=Ne.proctoring_settings)==null?void 0:_e.eye_tracking)||!1,behavioral_analysis:((Me=Ne.proctoring_settings)==null?void 0:Me.behavioral_analysis)||!1,facial_recognition:((ze=Ne.proctoring_settings)==null?void 0:ze.facial_recognition)||!1,emotion_detection:((Xe=Ne.proctoring_settings)==null?void 0:Xe.emotion_detection)||!1,attention_monitoring:((Ve=Ne.proctoring_settings)==null?void 0:Ve.attention_monitoring)||!1,suspicious_activity_detection:((ot=Ne.proctoring_settings)==null?void 0:ot.suspicious_activity_detection)||!1,ai_plagiarism_detection:((xt=Ne.proctoring_settings)==null?void 0:xt.ai_plagiarism_detection)||!1,voice_analysis:((ft=Ne.proctoring_settings)==null?void 0:ft.voice_analysis)||!1,gesture_recognition:((at=Ne.proctoring_settings)==null?void 0:at.gesture_recognition)||!1,real_time_alerts:((Be=Ne.proctoring_settings)==null?void 0:Be.real_time_alerts)||!1,assigned_colleges:((Ue=Ne.assignments)==null?void 0:Ue.filter(gt=>gt.assignment_type==="college").map(gt=>gt.target_id))||[],assigned_departments:((re=Ne.assignments)==null?void 0:re.filter(gt=>gt.assignment_type==="department").map(gt=>{var wt;return{college_id:gt.college_id||((wt=gt.metadata)==null?void 0:wt.college_id)||null,department_id:gt.target_id}}).filter(gt=>gt.college_id!==null))||[],assigned_groups:((ye=Ne.assignments)==null?void 0:ye.filter(gt=>gt.assignment_type==="group").map(gt=>gt.target_id))||[],assigned_students:((ke=Ne.assignments)==null?void 0:ke.filter(gt=>gt.assignment_type==="individual"||gt.assignment_type==="student").map(gt=>gt.target_id))||[],access_password:((Fe=Ne.access_control)==null?void 0:Fe.password)||"",ip_restrictions:((Ke=Ne.access_control)==null?void 0:Ke.ip_restrictions)||"",device_restrictions:((Qe=Ne.access_control)==null?void 0:Qe.device_restrictions)||"",browser_restrictions:((he=Ne.access_control)==null?void 0:he.browser_restrictions)||"",sections:kt,difficulty_level:(()=>({beginner:"beginner",intermediate:"intermediate",advanced:"advanced",expert:"expert"})[Ne.difficulty_level]||"intermediate")(),department:Ne.department||"",tags:Ne.tags||[],metadata:Ne.metadata||{}}),p([]),s({title:"Success",description:"Assessment data loaded for editing"})}else s({variant:"destructive",title:"Error",description:je.message||"Failed to load assessment data"}),t("/assessments")}catch{s({variant:"destructive",title:"Error",description:"Failed to load assessment data for editing"}),t("/assessments")}finally{L(!1)}},k=K=>{B(Q=>({...Q,...K}))},R=(K,Q)=>{B(X=>({...X,sections:X.sections.map(te=>te.id===K?{...te,...Q}:te)}))},S=()=>{const K={id:`section-${Date.now()}`,name:`Section ${P.sections.length+1}`,description:"",instructions:"",time_limit_minutes:null,allowed_question_types:[...Nd.map(Q=>Q.value)],shuffle_questions:!1,navigation_type:"free",completion_requirement:"all",minimum_questions:null,completion_percentage:null,allow_return_to_section:!1,questions:[]};B(Q=>({...Q,sections:[...Q.sections,K]}))},w=K=>{B(Q=>({...Q,sections:Q.sections.filter(X=>X.id!==K)}))},_=(K,Q)=>{const X={...Q,section_question_id:`${K}-${Date.now()}`,points:Number(Q.points)||1,is_required:!0,order:0};B(te=>{const de=te.sections.map(xe=>xe.id===K?{...xe,questions:[...xe.questions,X]}:xe);return{...te,sections:de}})},j=(K,Q)=>{B(X=>({...X,sections:X.sections.map(te=>te.id===K?{...te,questions:te.questions.filter(de=>de.id!==Q)}:te)}))},N=()=>P.sections.reduce((K,Q)=>{const X=Q.questions.reduce((te,de)=>te+(Number(de.points)||1),0);return K+X},0),E=K=>{switch(K){case 1:if(!P.title.trim())return s({title:"Validation Error",description:"Assessment title is required",variant:"destructive"}),!1;break;case 2:if(P.time_limit_minutes<=0)return s({title:"Validation Error",description:"Time limit must be greater than 0",variant:"destructive"}),!1;break;case 3:if(!P.start_date||!P.end_date)return s({title:"Validation Error",description:"Start and end dates are required",variant:"destructive"}),!1;if(!P.start_time||!P.end_time)return s({title:"Validation Error",description:"Start and end times are required",variant:"destructive"}),!1;if(!P.timezone||!P.assessment_country)return s({title:"Validation Error",description:"Assessment country/timezone is required for proper scheduling",variant:"destructive"}),!1;break;case 5:if((!P.assigned_colleges||P.assigned_colleges.length===0)&&(!P.assigned_departments||P.assigned_departments.length===0)&&(!P.assigned_groups||P.assigned_groups.length===0)&&(!P.assigned_students||P.assigned_students.length===0))return s({title:"Validation Error",description:"Please assign the assessment to at least one college, department, group, or student",variant:"destructive"}),!1;break;case 7:if(!P.sections||P.sections.length===0)return s({title:"Validation Error",description:"Please add at least one section to the assessment",variant:"destructive"}),!1;if(P.sections.reduce((X,te)=>!te||!te.questions?X:X+(Array.isArray(te.questions)?te.questions.length:0),0)===0)return s({title:"Validation Error",description:"Please add at least one question to the assessment",variant:"destructive"}),!1;break}return!0},I=()=>{if(E(n)){u(X=>new Set([...X,n]));const K=F(),Q=K.findIndex(X=>X.id===n);Q<K.length-1&&c(K[Q+1].id)}},D=()=>{const K=F(),Q=K.findIndex(X=>X.id===n);Q>0&&c(K[Q-1].id)},V=K=>{const Q=F(),X=Q.findIndex(de=>de.id===K),te=Q.findIndex(de=>de.id===n);i.has(K)||X===te+1&&i.has(n)||X===te?c(K):s({title:"Navigation Restricted",description:"Please complete the current step before navigating to future steps",variant:"destructive"})},H=async()=>{try{l(!0);const K={start_date:P.start_date,start_time:P.start_time,end_date:P.end_date,end_time:P.end_time,timezone:P.timezone,early_access_hours:P.early_access_hours,late_submission_minutes:P.late_submission_minutes},Q={proctoring_type:P.proctoring_type,browser_lockdown:P.browser_lockdown,tab_switching_detection:P.tab_switching_detection,copy_paste_detection:P.copy_paste_detection,right_click_detection:P.right_click_detection,fullscreen_requirement:P.fullscreen_requirement,keyboard_shortcut_detection:P.keyboard_shortcut_detection,require_webcam:P.require_webcam,require_microphone:P.require_microphone,screen_sharing_detection:P.screen_sharing_detection,multiple_device_detection:P.multiple_device_detection,plagiarism_detection:P.plagiarism_detection,face_detection:P.face_detection,voice_detection:P.voice_detection,background_noise_detection:P.background_noise_detection,eye_tracking:P.eye_tracking,behavioral_analysis:P.behavioral_analysis,facial_recognition:P.facial_recognition,emotion_detection:P.emotion_detection,attention_monitoring:P.attention_monitoring,suspicious_activity_detection:P.suspicious_activity_detection,ai_plagiarism_detection:P.ai_plagiarism_detection,voice_analysis:P.voice_analysis,gesture_recognition:P.gesture_recognition,real_time_alerts:P.real_time_alerts},X={password:P.access_password,ip_restrictions:P.ip_restrictions,device_restrictions:P.device_restrictions,browser_restrictions:P.browser_restrictions},te={assigned_colleges:P.assigned_colleges,assigned_departments:P.assigned_departments,assigned_groups:P.assigned_groups,assigned_students:P.assigned_students},de=ge=>({beginner:"beginner",intermediate:"intermediate",advanced:"advanced",expert:"expert"})[ge]||"intermediate",xe={title:P.title,description:P.description,instructions:P.instructions,assessment_type:"quiz",difficulty_level:de(P.difficulty_level),time_limit_minutes:P.time_limit_minutes,total_points:N(),passing_score:P.passing_score,max_attempts:P.max_attempts,time_between_attempts_hours:P.time_between_attempts_hours,shuffle_questions:P.shuffle_questions,show_results_immediately:P.show_results_immediately,allow_review:P.allow_review,show_correct_answers:P.show_correct_answers,require_proctoring:P.require_proctoring,proctoring_type:P.proctoring_type,proctoring_settings:Q,scheduling:K,access_control:X,assignment_settings:te,sections:P.sections,tags:P.tags||[],metadata:{assessment_type:P.assessment_type,multi_type_structure:P.multi_type_structure,selected_question_types:P.selected_question_types},status:"draft"};xe.proctoring_settings&&(xe.proctoring_settings.max_tab_switches=P.max_tab_switches||0),(await Pe.createAssessmentTemplate(xe)).success&&(s({title:"Success",description:"Assessment draft saved successfully",variant:"default"}),t("/assessments"))}catch{s({title:"Error",description:"Failed to save draft",variant:"destructive"})}finally{l(!1)}},G=async()=>{try{a(!0);const K={start_date:P.start_date,start_time:P.start_time,end_date:P.end_date,end_time:P.end_time,timezone:P.timezone,early_access_hours:P.early_access_hours,late_submission_minutes:P.late_submission_minutes},Q={proctoring_type:P.proctoring_type,browser_lockdown:P.browser_lockdown,tab_switching_detection:P.tab_switching_detection,copy_paste_detection:P.copy_paste_detection,right_click_detection:P.right_click_detection,fullscreen_requirement:P.fullscreen_requirement,keyboard_shortcut_detection:P.keyboard_shortcut_detection,require_webcam:P.require_webcam,require_microphone:P.require_microphone,screen_sharing_detection:P.screen_sharing_detection,multiple_device_detection:P.multiple_device_detection,plagiarism_detection:P.plagiarism_detection,face_detection:P.face_detection,voice_detection:P.voice_detection,background_noise_detection:P.background_noise_detection,eye_tracking:P.eye_tracking,behavioral_analysis:P.behavioral_analysis,facial_recognition:P.facial_recognition,emotion_detection:P.emotion_detection,attention_monitoring:P.attention_monitoring,suspicious_activity_detection:P.suspicious_activity_detection,ai_plagiarism_detection:P.ai_plagiarism_detection,voice_analysis:P.voice_analysis,gesture_recognition:P.gesture_recognition,real_time_alerts:P.real_time_alerts},X={password:P.access_password,ip_restrictions:P.ip_restrictions,device_restrictions:P.device_restrictions,browser_restrictions:P.browser_restrictions},te={assigned_colleges:P.assigned_colleges,assigned_departments:P.assigned_departments,assigned_groups:P.assigned_groups,assigned_students:P.assigned_students},de=be=>({beginner:"beginner",intermediate:"intermediate",advanced:"advanced",expert:"expert"})[be]||"intermediate",xe={title:P.title,description:P.description,instructions:P.instructions,assessment_type:"quiz",difficulty_level:de(P.difficulty_level),time_limit_minutes:P.time_limit_minutes,total_points:N(),passing_score:P.passing_score,max_attempts:P.max_attempts,time_between_attempts_hours:P.time_between_attempts_hours,shuffle_questions:P.shuffle_questions,show_results_immediately:P.show_results_immediately,allow_review:P.allow_review,show_correct_answers:P.show_correct_answers,require_proctoring:P.require_proctoring,proctoring_type:P.proctoring_type,proctoring_settings:Q,scheduling:K,access_control:X,assignment_settings:te,sections:P.sections,tags:P.tags||[],metadata:{assessment_type:P.assessment_type,multi_type_structure:P.multi_type_structure,selected_question_types:P.selected_question_types}};xe.proctoring_settings&&(xe.proctoring_settings.max_tab_switches=P.max_tab_switches||0),M||(xe.status="active");let ne,ge;M?(ne=await Pe.updateAssessmentTemplate(T,xe),ge=T):(ne=await Pe.createAssessmentTemplate(xe),ge=ne.data.id),ne.success&&(M||await $(ge),ne.warning?(s({title:"Assessment Created Successfully",description:ne.message,variant:"default"}),setTimeout(()=>{s({title:"Email Notification Warning",description:ne.warning,variant:"destructive"})},1e3)):s({title:"Success",description:M?"Assessment updated successfully!":"Assessment created and assigned successfully! Email notifications have been sent.",variant:"default"}),t("/assessments"))}catch{s({title:"Error",description:M?"Failed to update assessment":"Failed to create assessment",variant:"destructive"})}finally{a(!1)}},$=async K=>{try{if(!P.start_date||!P.start_time||!P.end_date||!P.end_time||!P.timezone)throw new Error("Missing required scheduling data for assignments");const Q=[];for(const X of P.assigned_colleges||[]){if(!X)continue;const te={assignment_type:"college",target_id:X,start_date:`${P.start_date}T${P.start_time}:00`,end_date:`${P.end_date}T${P.end_time}:00`,start_date_only:P.start_date,start_time_only:P.start_time,end_date_only:P.end_date,end_time_only:P.end_time,assessment_timezone:P.timezone||"UTC",early_access_hours:P.early_access_hours||0,late_submission_minutes:P.late_submission_minutes||0,password:P.access_password||"",ip_restrictions:P.ip_restrictions||"",device_restrictions:P.device_restrictions||"",browser_restrictions:P.browser_restrictions||""},de=await Pe.createAssessmentAssignment(K,te);de.success&&Q.push(de.data)}for(const X of P.assigned_departments||[]){if(!X||!X.department_id)continue;const te={assignment_type:"department",target_id:X.department_id,college_id:X.college_id,start_date_only:P.start_date,start_time_only:P.start_time,end_date_only:P.end_date,end_time_only:P.end_time,assessment_timezone:P.timezone||"UTC",early_access_hours:P.early_access_hours||0,late_submission_minutes:P.late_submission_minutes||0,password:P.access_password||"",ip_restrictions:P.ip_restrictions||"",device_restrictions:P.device_restrictions||"",browser_restrictions:P.browser_restrictions||""},de=await Pe.createAssessmentAssignment(K,te);de.success&&Q.push(de.data)}for(const X of P.assigned_groups||[]){if(!X)continue;const te={assignment_type:"group",target_id:X,start_date_only:P.start_date,start_time_only:P.start_time,end_date_only:P.end_date,end_time_only:P.end_time,assessment_timezone:P.timezone||"UTC",early_access_hours:P.early_access_hours||0,late_submission_minutes:P.late_submission_minutes||0,password:P.access_password||"",ip_restrictions:P.ip_restrictions||"",device_restrictions:P.device_restrictions||"",browser_restrictions:P.browser_restrictions||""},de=await Pe.createAssessmentAssignment(K,te);de.success&&Q.push(de.data)}for(const X of P.assigned_students||[]){if(!X)continue;const te={assignment_type:"individual",target_id:X,start_date_only:P.start_date,start_time_only:P.start_time,end_date_only:P.end_date,end_time_only:P.end_time,assessment_timezone:P.timezone||"UTC",early_access_hours:P.early_access_hours||0,late_submission_minutes:P.late_submission_minutes||0,password:P.access_password||"",ip_restrictions:P.ip_restrictions||"",device_restrictions:P.device_restrictions||"",browser_restrictions:P.browser_restrictions||""},de=await Pe.createAssessmentAssignment(K,te);de.success&&Q.push(de.data)}if(Q.length===0){const te=JSON.parse(localStorage.getItem("lmsUser")||"{}").college_id;if(te){const de={assignment_type:"college",target_id:te,start_date_only:P.start_date,start_time_only:P.start_time,end_date_only:P.end_date,end_time_only:P.end_time,assessment_timezone:P.timezone||"UTC",early_access_hours:P.early_access_hours||0,late_submission_minutes:P.late_submission_minutes||0,password:P.access_password||"",ip_restrictions:P.ip_restrictions||"",device_restrictions:P.device_restrictions||"",browser_restrictions:P.browser_restrictions||""},xe=await Pe.createAssessmentAssignment(K,de);xe.success&&Q.push(xe.data)}}if(Q.length>0)try{await Y(K,Q)}catch(X){console.warn("Notification sending failed, but assessment was created successfully:",X)}}catch(Q){throw Q}},Y=async(K,Q)=>{try{console.log("Sending notifications for assignments:",Q);for(const X of Q){console.log("Processing assignment:",X);const te={assessment_id:K,assignment_id:X.id,recipients:[{type:X.assignment_type,id:X.target_id}],assessment_details:{title:P.title,type:"assessment",start_date:`${P.start_date}T${P.start_time}:00`,end_date:`${P.end_date}T${P.end_time}:00`,instructions:P.instructions,total_points:N(),timezone:P.timezone}};console.log("Sending notification data:",te);const de=await Pe.post("/assessments/notifications/send",te);console.log("Notification response:",de),de.warning&&console.log("Notification warning:",de.warning)}}catch(X){console.error("Error sending notifications:",X)}},F=()=>{const K=[{id:1,title:"Basic Information",icon:Os},{id:2,title:"Assessment Settings",icon:la},{id:3,title:"Scheduling",icon:fr},{id:4,title:"Proctoring",icon:Ss},{id:5,title:"Assignment",icon:as}];return K.push({id:6,title:"Section Management",icon:Os}),K.push({id:7,title:"Question Selection",icon:Ar},{id:8,title:"Review & Submit",icon:hf}),K},O=()=>{const Q=F().find(X=>X.id===n);if(!Q)return null;switch(Q.title){case"Basic Information":return e.jsx(dz,{formData:P,updateFormData:k});case"Assessment Settings":return e.jsx(hz,{formData:P,updateFormData:k});case"Scheduling":return e.jsx(fz,{formData:P,updateFormData:k});case"Proctoring":return e.jsx(mz,{formData:P,updateFormData:k});case"Assignment":return e.jsx(pz,{formData:P,updateFormData:k,colleges:f});case"Section Management":return e.jsx(gz,{formData:P,updateFormData:k,updateSection:R,addSection:S,removeSection:w,questionTypes:Nd});case"Question Selection":return e.jsx(_U,{formData:P,selectedQuestions:m,setSelectedQuestions:p,addQuestionToSection:_,removeQuestionFromSection:j,searchTerm:x,setSearchTerm:g,filterType:v,setFilterType:y,filterDifficulty:b,setFilterDifficulty:C});case"Review & Submit":return e.jsx(NU,{formData:P,calculateTotalPoints:N,colleges:f});default:return null}};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6 lg:mb-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900",children:M?"Edit Assessment":"Create Assessment"}),e.jsx("p",{className:"text-gray-600 mt-2 text-sm lg:text-base",children:M?"Step-by-step wizard to edit your assessment":"Step-by-step wizard to create a comprehensive assessment"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ee,{variant:"outline",onClick:H,disabled:d,size:"sm",className:"lg:text-base",children:[e.jsx(no,{className:"w-4 h-4 mr-2"}),d?"Saving...":"Save Draft"]}),e.jsx(ee,{variant:"outline",onClick:()=>t("/assessments"),size:"sm",className:"lg:text-base",children:"Cancel"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"hidden md:flex items-center justify-center",children:e.jsx("div",{className:"flex items-center justify-center w-full max-w-6xl",children:F().map((K,Q)=>{const X=i.has(K.id),te=n===K.id,de=X||te||Q===F().findIndex(xe=>xe.id===n)+1&&i.has(n);return e.jsxs("div",{className:"flex flex-col items-center relative flex-1",children:[e.jsx("button",{onClick:()=>de&&V(K.id),disabled:!de,className:`flex items-center justify-center w-8 h-8 lg:w-10 lg:h-10 rounded-full border-2 flex-shrink-0 z-10 transition-all duration-200 ${te?"bg-blue-600 border-blue-600 text-white shadow-lg":X?"bg-green-600 border-green-600 text-white hover:bg-green-700 cursor-pointer":de?"bg-white border-blue-300 text-blue-600 hover:bg-blue-50 cursor-pointer":"bg-white border-gray-300 text-gray-500 cursor-not-allowed"}`,children:X?e.jsx(Ar,{className:"w-4 h-4 lg:w-5 lg:h-5"}):e.jsx(K.icon,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),Q<F().length-1&&e.jsx("div",{className:`absolute top-4 lg:top-5 left-1/2 w-full h-0.5 ${X?"bg-green-600":"bg-gray-300"}`}),e.jsx("div",{className:"mt-2 text-center",children:e.jsx("div",{className:`text-xs lg:text-sm font-medium ${te?"text-blue-600":X?"text-green-600":"text-gray-500"}`,children:K.title})})]},K.id)})})}),e.jsx("div",{className:"hidden sm:flex md:hidden items-center justify-center",children:e.jsx("div",{className:"flex items-center justify-center w-full max-w-4xl",children:F().map((K,Q)=>{const X=i.has(K.id),te=n===K.id,de=X||te||Q===F().findIndex(xe=>xe.id===n)+1&&i.has(n);return e.jsxs("div",{className:"flex flex-col items-center relative flex-1",children:[e.jsx("button",{onClick:()=>de&&V(K.id),disabled:!de,className:`flex items-center justify-center w-7 h-7 rounded-full border-2 flex-shrink-0 z-10 transition-all duration-200 ${te?"bg-blue-600 border-blue-600 text-white shadow-lg":X?"bg-green-600 border-green-600 text-white hover:bg-green-700 cursor-pointer":de?"bg-white border-blue-300 text-blue-600 hover:bg-blue-50 cursor-pointer":"bg-white border-gray-300 text-gray-500 cursor-not-allowed"}`,children:X?e.jsx(Ar,{className:"w-3 h-3"}):e.jsx(K.icon,{className:"w-3 h-3"})}),Q<F().length-1&&e.jsx("div",{className:`absolute top-3.5 left-1/2 w-full h-0.5 ${X?"bg-green-600":"bg-gray-300"}`}),e.jsx("div",{className:"mt-1 text-center",children:e.jsx("div",{className:`text-xs font-medium ${te?"text-blue-600":X?"text-green-600":"text-gray-500"}`,children:K.title})})]},K.id)})})}),e.jsxs("div",{className:"sm:hidden",children:[e.jsx("div",{className:"flex items-center justify-center space-x-2 mb-2",children:e.jsxs("span",{className:"text-sm text-gray-600",children:["Step ",n," of ",F().length]})}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-blue-600 text-center",children:(W=F().find(K=>K.id===n))==null?void 0:W.title})}),e.jsx("div",{className:"flex items-center justify-center gap-2 mt-3",children:F().map(K=>e.jsx("div",{className:`w-2 h-2 rounded-full ${n>=K.id?"bg-blue-600":"bg-gray-300"}`},K.id))})]})]})]}),e.jsx(Re,{className:"p-6 lg:p-8",children:e.jsx("div",{className:"max-w-none",children:O()})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4 mt-6",children:[e.jsxs(ee,{variant:"outline",onClick:D,disabled:n===1,size:"sm",className:"w-full sm:w-auto",children:[e.jsx(Hd,{className:"w-4 h-4 mr-2"}),"Previous"]}),e.jsx("div",{className:"flex gap-2",children:(()=>{const K=F();return K.findIndex(te=>te.id===n)===K.length-1?e.jsxs(ee,{onClick:G,disabled:o,size:"sm",className:"w-full sm:w-auto",children:[e.jsx(hf,{className:"w-4 h-4 mr-2"}),o?M?"Updating...":"Creating...":M?"Update Assessment":"Create Assessment"]}):e.jsxs(ee,{onClick:I,size:"sm",className:"w-full sm:w-auto",children:["Next",e.jsx(Oa,{className:"w-4 h-4 ml-2"})]})})()})]})]})})}const CU=()=>{qs();const{toast:t}=Js(),[r,s]=A.useState(navigator.onLine),[n,c]=A.useState(new Date),[o,a]=A.useState(!1),[d,l]=A.useState(!1),[i,u]=A.useState({today:[],week:[],month:[],overall:[]}),[f,h]=A.useState([]),[m,p]=A.useState([]),[x,g]=A.useState({today:{present:0,absent:0,late:0,total:0},week:{present:0,absent:0,late:0,total:0},month:{present:0,absent:0,late:0,total:0},overall:{percentage:0,streak:0}}),[v,y]=A.useState(null),[b,C]=A.useState("manual"),[T,M]=A.useState(""),[U,L]=A.useState(!1),P=A.useCallback(async()=>{a(!0);try{await B(),await q(),await z()}catch(E){console.error("Error refreshing data:",E)}finally{a(!1),c(new Date)}},[]);A.useEffect(()=>{const E=setInterval(P,3e4);return()=>clearInterval(E)},[P]),A.useEffect(()=>{const E=()=>s(!0),I=()=>s(!1);return window.addEventListener("online",E),window.addEventListener("offline",I),()=>{window.removeEventListener("online",E),window.removeEventListener("offline",I)}},[]),A.useEffect(()=>{P()},[]);const B=async()=>{try{l(!0);const E=new Date().toISOString().split("T")[0],I=await Pe.getAttendanceSessions({date:E});if(I.success&&I.data){const D=I.data.filter(Y=>Y.session_date===E),V=[];for(const Y of D)try{const F=await Pe.getAttendanceRecords(Y.id);F.success&&F.data&&V.push(...F.data.map(O=>({id:O.id,studentId:O.student_id,studentName:O.student_name||"Unknown",classId:Y.class_id,className:Y.class_name||Y.course_name,status:O.status,time:O.marked_at?new Date(O.marked_at).toLocaleTimeString():null,method:O.marking_method||"manual"})))}catch(F){console.error("Error loading attendance records:",F)}u({today:V,week:[],month:[],overall:[]});const H=V.filter(Y=>Y.status==="present").length,G=V.filter(Y=>Y.status==="absent").length,$=V.filter(Y=>Y.status==="late").length;g({today:{present:H,absent:G,late:$,total:V.length},week:{present:0,absent:0,late:0,total:0},month:{present:0,absent:0,late:0,total:0},overall:{percentage:0,streak:0}})}else u({today:[],week:[],month:[],overall:[]}),g({today:{present:0,absent:0,late:0,total:0},week:{present:0,absent:0,late:0,total:0},month:{present:0,absent:0,late:0,total:0},overall:{percentage:0,streak:0}})}catch(E){console.error("Error loading attendance data:",E),t({variant:"destructive",title:"Error",description:"Failed to load attendance data. Please try again."}),u({today:[],week:[],month:[],overall:[]}),g({today:{present:0,absent:0,late:0,total:0},week:{present:0,absent:0,late:0,total:0},month:{present:0,absent:0,late:0,total:0},overall:{percentage:0,streak:0}})}finally{l(!1)}},q=async()=>{try{const E=await Pe.getCourses();E.success&&E.data?h(E.data.map(I=>({id:I.id,name:I.title,code:I.code,instructor:I.instructor_name||"Unknown",time:I.schedule||"TBA",room:I.room_name||"TBA",students:I.enrolled||0}))):h([])}catch(E){console.error("Error loading classes:",E),h([])}},z=async()=>{try{const E=await Pe.getStudents({role:"student"});E.success&&E.data?p(E.data.map(I=>({id:I.id,name:I.name,email:I.email,rollNumber:I.student_id||"N/A",status:I.is_active?"active":"inactive"}))):p([])}catch(E){console.error("Error loading students:",E),p([])}},k=async()=>{L(!0);try{await new Promise(E=>setTimeout(E,500)),M("QR_CODE_DATA_"+Date.now()),t({title:"QR Code Generated",description:"QR code has been generated for attendance marking."})}catch{t({variant:"destructive",title:"Error",description:"Failed to generate QR code."})}finally{L(!1)}},R=async(E,I)=>{var D;try{const V=(D=i.today[0])==null?void 0:D.sessionId;if(!V){t({variant:"destructive",title:"Error",description:"No active attendance session found."});return}const H=await Pe.markAttendance({sessionId:V,studentId:E,status:I,method:b});if(H.success)await B(),t({title:"Success",description:`Attendance marked as ${I}.`});else throw new Error(H.message||"Failed to mark attendance")}catch{t({variant:"destructive",title:"Error",description:"Failed to mark attendance."})}},S=async E=>{try{await new Promise(I=>setTimeout(I,500)),u(I=>({...I,today:I.today.map(D=>({...D,status:D.status==="absent"?E:D.status,time:D.status==="absent"?new Date().toLocaleTimeString():D.time,method:D.status==="absent"?b:D.method}))})),t({title:"Bulk Attendance Marked",description:`All absent students marked as ${E}.`})}catch{t({variant:"destructive",title:"Error",description:"Failed to mark bulk attendance."})}},w=async E=>{try{await new Promise(I=>setTimeout(I,1e3)),t({title:"Export Complete",description:`Attendance data exported as ${E}.`})}catch{t({variant:"destructive",title:"Error",description:"Failed to export attendance data."})}},_=E=>{switch(E){case"present":return"bg-green-100 text-green-800 border-green-200";case"absent":return"bg-red-100 text-red-800 border-red-200";case"late":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},j=E=>{switch(E){case"present":return e.jsx(Yt,{className:"h-4 w-4 text-green-600"});case"absent":return e.jsx(Mr,{className:"h-4 w-4 text-red-600"});case"late":return e.jsx(Lr,{className:"h-4 w-4 text-yellow-600"});default:return e.jsx(rN,{className:"h-4 w-4 text-gray-600"})}},N=E=>{switch(E){case"qr":return e.jsx(Po,{className:"h-4 w-4"});case"manual":return e.jsx(Jn,{className:"h-4 w-4"});case"biometric":return e.jsx(f1,{className:"h-4 w-4"});case"gps":return e.jsx(Pa,{className:"h-4 w-4"});default:return e.jsx(Jn,{className:"h-4 w-4"})}};return e.jsx("div",{className:"min-h-screen bg-background p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Attendance Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Track and manage student attendance across all classes"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[r?e.jsx(yo,{className:"h-4 w-4 text-green-500"}):e.jsx(xo,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:r?"Online":"Offline"})]}),e.jsxs(ee,{variant:"outline",size:"sm",onClick:P,disabled:o,className:"flex items-center gap-2",children:[e.jsx(Is,{className:`h-4 w-4 ${o?"animate-spin":""}`}),"Refresh"]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-4",children:[e.jsx(Re,{className:"shadow-lg",children:e.jsx(De,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm font-medium",children:"Today"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:x.today.present}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Present"})]}),e.jsx(Yt,{className:"h-12 w-12 text-green-600"})]})})}),e.jsx(Re,{className:"shadow-lg",children:e.jsx(De,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm font-medium",children:"Today"}),e.jsx("p",{className:"text-3xl font-bold text-red-600",children:x.today.absent}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Absent"})]}),e.jsx(Mr,{className:"h-12 w-12 text-red-600"})]})})}),e.jsx(Re,{className:"shadow-lg",children:e.jsx(De,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm font-medium",children:"This Month"}),e.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:[x.overall.percentage,"%"]}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Attendance Rate"})]}),e.jsx(Nc,{className:"h-12 w-12 text-blue-600"})]})})}),e.jsx(Re,{className:"shadow-lg",children:e.jsx(De,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm font-medium",children:"Streak"}),e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:x.overall.streak}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Days"})]}),e.jsx(fu,{className:"h-12 w-12 text-purple-600"})]})})})]}),e.jsxs(Dr,{defaultValue:"today",className:"space-y-6",children:[e.jsxs(Ir,{className:"grid w-full grid-cols-4",children:[e.jsx(zt,{value:"today",children:"Today's Attendance"}),e.jsx(zt,{value:"marking",children:"Mark Attendance"}),e.jsx(zt,{value:"reports",children:"Reports"}),e.jsx(zt,{value:"settings",children:"Settings"})]}),e.jsxs(Kt,{value:"today",className:"space-y-6",children:[e.jsxs(Re,{children:[e.jsxs(lt,{children:[e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(lr,{className:"h-5 w-5"}),"Select Class"]}),e.jsx(ts,{children:"Choose a class to view attendance details."})]}),e.jsx(De,{children:e.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:f.map(E=>e.jsx(Re,{className:`cursor-pointer transition-all hover:shadow-md ${(v==null?void 0:v.id)===E.id?"ring-2 ring-primary":""}`,onClick:()=>y(E),children:e.jsxs(De,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold",children:E.name}),e.jsx(et,{variant:"outline",children:E.code})]}),e.jsxs("div",{className:"space-y-1 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Da,{className:"h-3 w-3"}),E.instructor]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ps,{className:"h-3 w-3"}),E.time]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Pa,{className:"h-3 w-3"}),E.room]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(as,{className:"h-3 w-3"}),E.students," students"]})]})]})},E.id))})})]}),v&&e.jsxs(Re,{children:[e.jsxs(lt,{children:[e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(Jn,{className:"h-5 w-5"}),"Attendance for ",v.name]}),e.jsx(ts,{children:"Today's attendance status for all students."})]}),e.jsx(De,{children:e.jsx("div",{className:"space-y-4",children:i.today.filter(E=>E.classId===v.id).map(E=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[j(E.status),e.jsx("span",{className:"font-medium",children:E.studentName})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[E.time&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ps,{className:"h-3 w-3"}),E.time]}),E.method&&e.jsxs("div",{className:"flex items-center gap-1",children:[N(E.method),E.method]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(et,{className:_(E.status),children:E.status}),e.jsx(ee,{variant:"outline",size:"sm",children:e.jsx(Bn,{className:"h-4 w-4"})})]})]},E.id))})})]})]}),e.jsxs(Kt,{value:"marking",className:"space-y-6",children:[e.jsxs(Re,{children:[e.jsxs(lt,{children:[e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(la,{className:"h-5 w-5"}),"Attendance Method"]}),e.jsx(ts,{children:"Choose how you want to mark attendance."})]}),e.jsx(De,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsx(Re,{className:`cursor-pointer transition-all hover:shadow-md ${b==="manual"?"ring-2 ring-primary":""}`,onClick:()=>C("manual"),children:e.jsxs(De,{className:"p-4 text-center",children:[e.jsx(Jn,{className:"h-8 w-8 mx-auto mb-2 text-blue-600"}),e.jsx("h4",{className:"font-semibold",children:"Manual"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Click to mark"})]})}),e.jsx(Re,{className:`cursor-pointer transition-all hover:shadow-md ${b==="qr"?"ring-2 ring-primary":""}`,onClick:()=>C("qr"),children:e.jsxs(De,{className:"p-4 text-center",children:[e.jsx(Po,{className:"h-8 w-8 mx-auto mb-2 text-green-600"}),e.jsx("h4",{className:"font-semibold",children:"QR Code"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Scan to mark"})]})}),e.jsx(Re,{className:`cursor-pointer transition-all hover:shadow-md ${b==="biometric"?"ring-2 ring-primary":""}`,onClick:()=>C("biometric"),children:e.jsxs(De,{className:"p-4 text-center",children:[e.jsx(f1,{className:"h-8 w-8 mx-auto mb-2 text-purple-600"}),e.jsx("h4",{className:"font-semibold",children:"Biometric"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Fingerprint scan"})]})}),e.jsx(Re,{className:`cursor-pointer transition-all hover:shadow-md ${b==="gps"?"ring-2 ring-primary":""}`,onClick:()=>C("gps"),children:e.jsxs(De,{className:"p-4 text-center",children:[e.jsx(Pa,{className:"h-8 w-8 mx-auto mb-2 text-orange-600"}),e.jsx("h4",{className:"font-semibold",children:"GPS"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Location based"})]})})]})})]}),b==="qr"&&e.jsxs(Re,{children:[e.jsxs(lt,{children:[e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(Po,{className:"h-5 w-5"}),"QR Code Attendance"]}),e.jsx(ts,{children:"Generate QR code for students to scan and mark attendance."})]}),e.jsx(De,{children:e.jsx("div",{className:"text-center space-y-4",children:T?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-48 h-48 mx-auto bg-white border-2 border-gray-300 rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Po,{className:"h-24 w-24 mx-auto mb-2 text-gray-600"}),e.jsx("p",{className:"text-sm text-gray-600",children:"QR Code"})]})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Students can scan this QR code to mark their attendance"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs(ee,{variant:"outline",onClick:()=>M(""),children:[e.jsx(Is,{className:"h-4 w-4 mr-2"}),"Regenerate"]}),e.jsxs(ee,{variant:"outline",children:[e.jsx(Zs,{className:"h-4 w-4 mr-2"}),"Download"]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-48 h-48 mx-auto bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Po,{className:"h-16 w-16 mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No QR Code"})]})}),e.jsx(ee,{onClick:k,disabled:U,children:U?e.jsxs(e.Fragment,{children:[e.jsx(Is,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),"Generate QR Code"]})})]})})})]}),b==="manual"&&v&&e.jsxs(Re,{children:[e.jsxs(lt,{children:[e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(Jn,{className:"h-5 w-5"}),"Mark Attendance - ",v.name]}),e.jsx(ts,{children:"Manually mark attendance for each student."})]}),e.jsx(De,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2 p-4 bg-muted/50 rounded-lg",children:[e.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>S("present"),children:[e.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Mark All Present"]}),e.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>S("absent"),children:[e.jsx(Mr,{className:"h-4 w-4 mr-2"}),"Mark All Absent"]})]}),e.jsx("div",{className:"space-y-2",children:i.today.filter(E=>E.classId===v.id).map(E=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-medium",children:E.studentName}),e.jsx(et,{className:_(E.status),children:E.status})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>R(E.studentId,"present"),className:E.status==="present"?"bg-green-50 border-green-200":"",children:e.jsx(Yt,{className:"h-4 w-4"})}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>R(E.studentId,"late"),className:E.status==="late"?"bg-yellow-50 border-yellow-200":"",children:e.jsx(Lr,{className:"h-4 w-4"})}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>R(E.studentId,"absent"),className:E.status==="absent"?"bg-red-50 border-red-200":"",children:e.jsx(Mr,{className:"h-4 w-4"})})]})]},E.id))})]})})]})]}),e.jsx(Kt,{value:"reports",className:"space-y-6",children:e.jsxs(Re,{children:[e.jsxs(lt,{children:[e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(Rr,{className:"h-5 w-5"}),"Attendance Reports"]}),e.jsx(ts,{children:"Generate and export attendance reports."})]}),e.jsx(De,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsx(Re,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>w("PDF"),children:e.jsxs(De,{className:"p-4 text-center",children:[e.jsx(Os,{className:"h-8 w-8 mx-auto mb-2 text-red-600"}),e.jsx("h4",{className:"font-semibold",children:"PDF Report"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Download as PDF"})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>w("Excel"),children:e.jsxs(De,{className:"p-4 text-center",children:[e.jsx(x0,{className:"h-8 w-8 mx-auto mb-2 text-green-600"}),e.jsx("h4",{className:"font-semibold",children:"Excel Report"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Download as Excel"})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>w("CSV"),children:e.jsxs(De,{className:"p-4 text-center",children:[e.jsx(Os,{className:"h-8 w-8 mx-auto mb-2 text-blue-600"}),e.jsx("h4",{className:"font-semibold",children:"CSV Report"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Download as CSV"})]})})]})})]})}),e.jsx(Kt,{value:"settings",className:"space-y-6",children:e.jsxs(Re,{children:[e.jsxs(lt,{children:[e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(la,{className:"h-5 w-5"}),"Attendance Settings"]}),e.jsx(ts,{children:"Configure attendance policies and settings."})]}),e.jsx(De,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"lateThreshold",children:"Late Threshold (minutes)"}),e.jsx(Ye,{id:"lateThreshold",type:"number",defaultValue:"15"})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"attendanceRequired",children:"Minimum Attendance Required (%)"}),e.jsx(Ye,{id:"attendanceRequired",type:"number",defaultValue:"75"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"autoMarkAbsent",defaultChecked:!0}),e.jsx(Se,{htmlFor:"autoMarkAbsent",children:"Auto-mark absent after class ends"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"allowLateMarking"}),e.jsx(Se,{htmlFor:"allowLateMarking",children:"Allow late attendance marking"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"sendNotifications",defaultChecked:!0}),e.jsx(Se,{htmlFor:"sendNotifications",children:"Send attendance notifications"})]})]})]})})]})})]}),e.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["Last updated: ",n.toLocaleTimeString(),o&&e.jsx("span",{className:"ml-2",children:" Refreshing..."})]})]})})},kU=()=>{qs();const{toast:t}=Js(),[r,s]=A.useState(navigator.onLine),[n,c]=A.useState(new Date),[o,a]=A.useState(!1),[d,l]=A.useState(!1),[i,u]=A.useState([]),[f,h]=A.useState([]),[m,p]=A.useState([]),[x,g]=A.useState(null),[v,y]=A.useState(!1),[b,C]=A.useState({total:0,active:0,completed:0,enrolled:0}),T=A.useCallback(async()=>{a(!0);try{await M(),await U(),await L()}catch(k){console.error("Error refreshing data:",k)}finally{a(!1),c(new Date)}},[]);A.useEffect(()=>{const k=setInterval(T,3e4);return()=>clearInterval(k)},[T]),A.useEffect(()=>{const k=()=>s(!0),R=()=>s(!1);return window.addEventListener("online",k),window.addEventListener("offline",R),()=>{window.removeEventListener("online",k),window.removeEventListener("offline",R)}},[]),A.useEffect(()=>{T()},[]);const M=async()=>{try{l(!0);const k=await Pe.getCourses();if(k.success&&k.data){const R=k.data.map(S=>({id:S.id,name:S.title,code:S.code,description:S.description||"",instructor:S.instructor_name||"TBA",department:S.department||"Unknown",credits:S.credits||3,semester:S.semester||"Current",status:S.status||"active",enrolled:S.enrolled||0,capacity:S.capacity||50,progress:S.progress||0,startDate:S.start_date||"",endDate:S.end_date||"",schedule:S.schedule||"TBA",room:S.room_name||"TBA",prerequisites:S.prerequisites?Array.isArray(S.prerequisites)?S.prerequisites:JSON.parse(S.prerequisites):[],objectives:S.objectives?Array.isArray(S.objectives)?S.objectives:JSON.parse(S.objectives):[]}));u(R),C({total:R.length,active:R.filter(S=>S.status==="active").length,completed:R.filter(S=>S.status==="completed").length,enrolled:R.reduce((S,w)=>S+w.enrolled,0)})}else u([]),C({total:0,active:0,completed:0,enrolled:0})}catch(k){console.error("Error loading courses:",k),t({variant:"destructive",title:"Error",description:"Failed to load courses. Please try again."}),u([]),C({total:0,active:0,completed:0,enrolled:0})}finally{l(!1)}},U=async()=>{try{const k=await Pe.getUsers({role:"faculty"});k.success&&k.data?h(k.data.map(R=>({id:R.id,name:R.name,email:R.email,department:R.department||"Unknown",status:R.is_active?"active":"inactive"}))):h([])}catch(k){console.error("Error loading faculty:",k),h([])}},L=async()=>{try{const k=await Pe.getDepartments();k.success&&k.data?p(k.data.map(R=>({id:R.id,name:R.name,code:R.code||R.name.substring(0,4).toUpperCase(),head:R.head_name||"TBA"}))):p([])}catch(k){console.error("Error loading departments:",k),p([])}},P=async(k,R)=>{try{l(!0);const S={title:R.name,code:R.code,description:R.description,instructor_id:R.instructor,department:R.department,credits:R.credits,semester:R.semester,start_date:R.startDate,end_date:R.endDate,schedule:R.schedule,room_id:R.room,prerequisites:JSON.stringify(R.prerequisites||[]),objectives:JSON.stringify(R.objectives||[]),capacity:R.capacity,status:R.status},w=await Pe.put(`/enhanced/courses/${k}`,S);if(w.success)await M(),t({title:"Course Updated",description:"Course has been updated successfully."});else throw new Error(w.message||"Failed to update course")}catch(S){console.error("Error updating course:",S),t({variant:"destructive",title:"Error",description:S.message||"Failed to update course."})}finally{l(!1)}},B=async k=>{try{l(!0);const R=await Pe.delete(`/enhanced/courses/${k}`);if(R.success)await M(),t({title:"Course Deleted",description:"Course has been deleted successfully."});else throw new Error(R.message||"Failed to delete course")}catch(R){console.error("Error deleting course:",R),t({variant:"destructive",title:"Error",description:R.message||"Failed to delete course."})}finally{l(!1)}},q=k=>{switch(k){case"active":return"bg-green-100 text-green-800 border-green-200";case"completed":return"bg-blue-100 text-blue-800 border-blue-200";case"scheduled":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},z=k=>k>=80?"text-green-600":k>=60?"text-blue-600":k>=40?"text-yellow-600":"text-red-600";return e.jsx("div",{className:"min-h-screen bg-background p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Course Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage courses, faculty assignments, and student enrollment"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[r?e.jsx(yo,{className:"h-4 w-4 text-green-500"}):e.jsx(xo,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:r?"Online":"Offline"})]}),e.jsxs(ee,{variant:"outline",size:"sm",onClick:T,disabled:o,className:"flex items-center gap-2",children:[e.jsx(Is,{className:`h-4 w-4 ${o?"animate-spin":""}`}),"Refresh"]}),e.jsxs(ee,{onClick:()=>y(!0),children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),"Create Course"]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-4",children:[e.jsx(Re,{className:"shadow-lg",children:e.jsx(De,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm font-medium",children:"Total Courses"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:b.total})]}),e.jsx(lr,{className:"h-12 w-12 text-blue-600"})]})})}),e.jsx(Re,{className:"shadow-lg",children:e.jsx(De,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm font-medium",children:"Active Courses"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:b.active})]}),e.jsx(oc,{className:"h-12 w-12 text-green-600"})]})})}),e.jsx(Re,{className:"shadow-lg",children:e.jsx(De,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm font-medium",children:"Total Enrolled"}),e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:b.enrolled})]}),e.jsx(as,{className:"h-12 w-12 text-purple-600"})]})})}),e.jsx(Re,{className:"shadow-lg",children:e.jsx(De,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm font-medium",children:"Completed"}),e.jsx("p",{className:"text-3xl font-bold text-orange-600",children:b.completed})]}),e.jsx(Yt,{className:"h-12 w-12 text-orange-600"})]})})})]}),e.jsxs(Dr,{defaultValue:"courses",className:"space-y-6",children:[e.jsxs(Ir,{className:"grid w-full grid-cols-4",children:[e.jsx(zt,{value:"courses",children:"Courses"}),e.jsx(zt,{value:"faculty",children:"Faculty"}),e.jsx(zt,{value:"departments",children:"Departments"}),e.jsx(zt,{value:"analytics",children:"Analytics"})]}),e.jsx(Kt,{value:"courses",className:"space-y-6",children:e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:i.map(k=>e.jsxs(Re,{className:"shadow-lg hover:shadow-xl transition-shadow",children:[e.jsx(lt,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(mt,{className:"text-lg",children:k.name}),e.jsxs(ts,{children:[k.code,"  ",k.credits," credits"]})]}),e.jsx(et,{className:q(k.status),children:k.status})]})}),e.jsx(De,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{className:z(k.progress),children:[k.progress,"%"]})]}),e.jsx(co,{value:k.progress,className:"h-2"})]}),e.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Instructor:"}),e.jsx("span",{children:k.instructor})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Enrolled:"}),e.jsxs("span",{children:[k.enrolled,"/",k.capacity]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Schedule:"}),e.jsx("span",{children:k.schedule})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Room:"}),e.jsx("span",{children:k.room})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ee,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>g(k),children:[e.jsx(Ss,{className:"h-4 w-4 mr-2"}),"View"]}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>P(k.id,{status:"completed"}),children:e.jsx(Bn,{className:"h-4 w-4"})}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>B(k.id),children:e.jsx(Ds,{className:"h-4 w-4"})})]})]})})]},k.id))})}),e.jsx(Kt,{value:"faculty",className:"space-y-6",children:e.jsxs(Re,{children:[e.jsxs(lt,{children:[e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(Go,{className:"h-5 w-5"}),"Faculty Members"]}),e.jsx(ts,{children:"Manage faculty assignments and information."})]}),e.jsx(De,{children:e.jsx("div",{className:"space-y-4",children:f.map(k=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Da,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:k.name}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ro,{className:"h-3 w-3"}),k.email]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(tr,{className:"h-3 w-3"}),k.department]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(et,{variant:k.status==="active"?"default":"secondary",children:k.status}),e.jsx(ee,{variant:"outline",size:"sm",children:e.jsx(Bn,{className:"h-4 w-4"})})]})]},k.id))})})]})}),e.jsx(Kt,{value:"departments",className:"space-y-6",children:e.jsxs(Re,{children:[e.jsxs(lt,{children:[e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(tr,{className:"h-5 w-5"}),"Departments"]}),e.jsx(ts,{children:"Manage academic departments and programs."})]}),e.jsx(De,{children:e.jsx("div",{className:"space-y-4",children:m.map(k=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(tr,{className:"h-4 w-4 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:k.name}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Code: ",k.code]}),e.jsxs("span",{children:["Head: ",k.head]})]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(ee,{variant:"outline",size:"sm",children:e.jsx(Bn,{className:"h-4 w-4"})})})]},k.id))})})]})}),e.jsx(Kt,{value:"analytics",className:"space-y-6",children:e.jsxs(Re,{children:[e.jsxs(lt,{children:[e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(Rr,{className:"h-5 w-5"}),"Course Analytics"]}),e.jsx(ts,{children:"Course performance and enrollment analytics."})]}),e.jsx(De,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Enrollment Trends"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:b.enrolled}),e.jsx("p",{className:"text-sm text-blue-600",children:"Total Students"})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"Average Progress"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[Math.round(i.reduce((k,R)=>k+R.progress,0)/i.length),"%"]}),e.jsx("p",{className:"text-sm text-green-600",children:"Course Completion"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold",children:"Course Performance"}),i.map(k=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:k.name}),e.jsxs("span",{className:"text-sm text-muted-foreground ml-2",children:["(",k.code,")"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Progress: "}),e.jsxs("span",{className:z(k.progress),children:[k.progress,"%"]})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Enrolled: "}),e.jsx("span",{children:k.enrolled})]})]})]},k.id))]})]})})]})})]}),e.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["Last updated: ",n.toLocaleTimeString(),o&&e.jsx("span",{className:"ml-2",children:" Refreshing..."})]})]})})},EU=()=>{qs();const{toast:t}=Js(),[r,s]=A.useState(navigator.onLine),[n,c]=A.useState(new Date),[o,a]=A.useState(!1),[d,l]=A.useState(!1),[i,u]=A.useState([]),[f,h]=A.useState([]),[m,p]=A.useState([]),[x,g]=A.useState([]),[v,y]=A.useState(new Date),[b,C]=A.useState("week"),[T,M]=A.useState(null),[U,L]=A.useState(!1),[P,B]=A.useState([]),[q,z]=A.useState({totalClasses:0,conflicts:0,utilization:0,facultyWorkload:0}),k=A.useCallback(async()=>{a(!0);try{await R(),await _(),await j(),await N(),await E()}catch(K){console.error("Error refreshing data:",K)}finally{a(!1),c(new Date)}},[]);A.useEffect(()=>{const K=setInterval(k,3e4);return()=>clearInterval(K)},[k]),A.useEffect(()=>{const K=()=>s(!0),Q=()=>s(!1);return window.addEventListener("online",K),window.addEventListener("offline",Q),()=>{window.removeEventListener("online",K),window.removeEventListener("offline",Q)}},[]),A.useEffect(()=>{k()},[]);const R=async()=>{try{const K=await Pe.getClassSchedules();if(K.success&&K.data){const Q=K.data.map(X=>({id:X.id,courseId:X.course_id,courseName:X.course_name||X.course_title,courseCode:X.course_code,facultyId:X.faculty_id||X.instructor_id,facultyName:X.faculty_name||X.instructor_name||"TBA",roomId:X.room_id,roomName:X.room_name||"TBA",day:X.day||X.day_of_week,startTime:X.start_time,endTime:X.end_time,duration:X.duration||90,type:X.type||X.class_type||"lecture",semester:X.semester||"Current",status:X.status||"scheduled",capacity:X.capacity||50,enrolled:X.enrolled||0,recurring:X.recurring!==!1,startDate:X.start_date,endDate:X.end_date}));u(Q),z({totalClasses:Q.length,conflicts:0,utilization:S(Q),facultyWorkload:w(Q)})}else u([]),z({totalClasses:0,conflicts:0,utilization:0,facultyWorkload:0})}catch(K){console.error("Error loading schedules:",K),u([]),z({totalClasses:0,conflicts:0,utilization:0,facultyWorkload:0})}},S=K=>{if(!K.length)return 0;const Q=K.reduce((te,de)=>te+(de.capacity||0),0),X=K.reduce((te,de)=>te+(de.enrolled||0),0);return Q>0?Math.round(X/Q*100):0},w=K=>K.length?Math.round(K.length/10*100):0,_=async()=>{try{const K=await Pe.getRooms();K.success&&K.data?h(K.data.map(Q=>({id:Q.id,name:Q.name,capacity:Q.capacity||0,type:Q.type||"lecture",equipment:Q.equipment?Array.isArray(Q.equipment)?Q.equipment:JSON.parse(Q.equipment):[],status:Q.status||"available"}))):h([])}catch(K){console.error("Error loading rooms:",K),h([])}},j=async()=>{try{const K=await Pe.getUsers({role:"faculty"});if(K.success&&K.data){const Q=await Promise.all(K.data.map(async X=>{try{const te=await Pe.getFacultyWorkload({facultyId:X.id});return{id:X.id,name:X.name,email:X.email,department:X.department||"Unknown",status:X.status||"available",workload:te.success&&te.data&&te.data.workload_percentage||0}}catch{return{id:X.id,name:X.name,email:X.email,department:X.department||"Unknown",status:X.status||"available",workload:0}}}));p(Q)}else p([])}catch(K){console.error("Error loading faculty:",K),p([])}},N=async()=>{try{const K=await Pe.getCourses();K.success&&K.data?g(K.data.map(Q=>({id:Q.id,name:Q.title,code:Q.code,credits:Q.credits||3,department:Q.department||"Unknown"}))):g([])}catch(K){console.error("Error loading courses:",K),g([])}},E=async()=>{try{const K=[];for(let Q=0;Q<i.length;Q++)for(let X=Q+1;X<i.length;X++){const te=i[Q],de=i[X];te.roomId===de.roomId&&te.day===de.day&&I(te.startTime,te.endTime,de.startTime,de.endTime)&&K.push({id:Date.now()+Q,type:"room_conflict",message:`Room ${te.roomName} is double-booked on ${te.day} ${te.startTime}-${te.endTime}`,scheduleIds:[te.id,de.id],severity:"high"}),te.facultyId===de.facultyId&&te.day===de.day&&I(te.startTime,te.endTime,de.startTime,de.endTime)&&K.push({id:Date.now()+Q+1e3,type:"faculty_conflict",message:`${te.facultyName} has overlapping classes on ${te.day}`,scheduleIds:[te.id,de.id],severity:"medium"})}B(K),z(Q=>({...Q,conflicts:K.length}))}catch(K){console.error("Error detecting conflicts:",K),B([])}},I=(K,Q,X,te)=>{const de=D(K),xe=D(Q),ne=D(X),ge=D(te);return de<ge&&xe>ne},D=K=>{const[Q,X]=K.split(":").map(Number);return Q*60+(X||0)},V=async(K,Q)=>{try{l(!0);const X={course_id:Q.courseId,faculty_id:Q.facultyId,room_id:Q.roomId,day:Q.day,start_time:Q.startTime,end_time:Q.endTime,duration:Q.duration,type:Q.type,semester:Q.semester,recurring:Q.recurring,start_date:Q.startDate,end_date:Q.endDate,capacity:Q.capacity,status:Q.status},te=await Pe.put(`/enhanced/schedules/${K}`,X);if(te.success)await k(),t({title:"Schedule Updated",description:"Schedule has been updated successfully."});else throw new Error(te.message||"Failed to update schedule")}catch(X){console.error("Error updating schedule:",X),t({variant:"destructive",title:"Error",description:X.message||"Failed to update schedule."})}finally{l(!1)}},H=async K=>{try{l(!0);const Q=await Pe.delete(`/enhanced/schedules/${K}`);if(Q.success)await k(),t({title:"Schedule Deleted",description:"Schedule has been deleted successfully."});else throw new Error(Q.message||"Failed to delete schedule")}catch(Q){console.error("Error deleting schedule:",Q),t({variant:"destructive",title:"Error",description:Q.message||"Failed to delete schedule."})}finally{l(!1)}},G=K=>{switch(K){case"scheduled":return"bg-green-100 text-green-800 border-green-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";case"completed":return"bg-blue-100 text-blue-800 border-blue-200";case"conflict":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},$=K=>{switch(K){case"lecture":return"bg-blue-100 text-blue-800";case"lab":return"bg-green-100 text-green-800";case"tutorial":return"bg-purple-100 text-purple-800";case"seminar":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},Y=K=>{switch(K){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},F=K=>{const[Q,X]=K.split(":"),te=parseInt(Q),de=te>=12?"PM":"AM";return`${te%12||12}:${X} ${de}`},O=()=>["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],W=()=>{const K=[];for(let Q=8;Q<=18;Q++)for(let X=0;X<60;X+=30){const te=`${Q.toString().padStart(2,"0")}:${X.toString().padStart(2,"0")}`;K.push(te)}return K};return e.jsx("div",{className:"min-h-screen bg-background p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Class Scheduling"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage class schedules, room assignments, and resource allocation"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[r?e.jsx(yo,{className:"h-4 w-4 text-green-500"}):e.jsx(xo,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:r?"Online":"Offline"})]}),e.jsxs(ee,{variant:"outline",size:"sm",onClick:k,disabled:o,className:"flex items-center gap-2",children:[e.jsx(Is,{className:`h-4 w-4 ${o?"animate-spin":""}`}),"Refresh"]}),e.jsxs(ee,{onClick:()=>L(!0),children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),"Create Schedule"]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-4",children:[e.jsx(Re,{className:"shadow-lg",children:e.jsx(De,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm font-medium",children:"Total Classes"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:q.totalClasses})]}),e.jsx(fr,{className:"h-12 w-12 text-blue-600"})]})})}),e.jsx(Re,{className:"shadow-lg",children:e.jsx(De,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm font-medium",children:"Conflicts"}),e.jsx("p",{className:"text-3xl font-bold text-red-600",children:P.length})]}),e.jsx(Lr,{className:"h-12 w-12 text-red-600"})]})})}),e.jsx(Re,{className:"shadow-lg",children:e.jsx(De,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm font-medium",children:"Room Utilization"}),e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:[q.utilization,"%"]})]}),e.jsx(Rr,{className:"h-12 w-12 text-green-600"})]})})}),e.jsx(Re,{className:"shadow-lg",children:e.jsx(De,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm font-medium",children:"Faculty Workload"}),e.jsxs("p",{className:"text-3xl font-bold text-purple-600",children:[q.facultyWorkload,"%"]})]}),e.jsx(as,{className:"h-12 w-12 text-purple-600"})]})})})]}),e.jsxs(Dr,{defaultValue:"calendar",className:"space-y-6",children:[e.jsxs(Ir,{className:"grid w-full grid-cols-4",children:[e.jsx(zt,{value:"calendar",children:"Calendar View"}),e.jsx(zt,{value:"schedules",children:"Schedules"}),e.jsx(zt,{value:"conflicts",children:"Conflicts"}),e.jsx(zt,{value:"resources",children:"Resources"})]}),e.jsx(Kt,{value:"calendar",className:"space-y-6",children:e.jsxs(Re,{children:[e.jsxs(lt,{children:[e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(fr,{className:"h-5 w-5"}),"Schedule Calendar"]}),e.jsx(ts,{children:"View and manage class schedules in calendar format."})]}),e.jsxs(De,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{variant:"outline",size:"sm",children:e.jsx(Hd,{className:"h-4 w-4"})}),e.jsxs("span",{className:"font-semibold",children:["Week of ",v.toLocaleDateString()]}),e.jsx(ee,{variant:"outline",size:"sm",children:e.jsx(Oa,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(At,{value:b,onValueChange:C,children:[e.jsx(St,{className:"w-32",children:e.jsx(Rt,{})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"day",children:"Day"}),e.jsx(Te,{value:"week",children:"Week"}),e.jsx(Te,{value:"month",children:"Month"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-8 gap-1",children:[e.jsx("div",{className:"p-2 text-sm font-medium text-muted-foreground",children:"Time"}),O().map(K=>e.jsx("div",{className:"p-2 text-sm font-medium text-center border-b",children:K},K)),W().map(K=>e.jsxs(Lt.Fragment,{children:[e.jsx("div",{className:"p-2 text-xs text-muted-foreground border-r",children:F(K)}),O().map(Q=>{const X=i.find(te=>te.day===Q&&te.startTime<=K&&te.endTime>K);return e.jsx("div",{className:"min-h-[40px] border border-gray-200 p-1",children:X&&e.jsxs("div",{className:`p-1 rounded text-xs cursor-pointer hover:shadow-sm transition-shadow ${$(X.type)}`,children:[e.jsx("div",{className:"font-medium truncate",children:X.courseName}),e.jsx("div",{className:"text-xs opacity-75",children:X.roomName})]})},`${Q}-${K}`)})]},K))]})]})]})}),e.jsx(Kt,{value:"schedules",className:"space-y-6",children:e.jsxs(Re,{children:[e.jsxs(lt,{children:[e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(Ps,{className:"h-5 w-5"}),"Class Schedules"]}),e.jsx(ts,{children:"Manage all class schedules and assignments."})]}),e.jsx(De,{children:e.jsx("div",{className:"space-y-4",children:i.map(K=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(lr,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:K.courseName}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(fr,{className:"h-3 w-3"}),K.day]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ps,{className:"h-3 w-3"}),F(K.startTime)," - ",F(K.endTime)]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Pa,{className:"h-3 w-3"}),K.roomName]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Da,{className:"h-3 w-3"}),K.facultyName]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(et,{className:$(K.type),children:K.type}),e.jsx(et,{className:G(K.status),children:K.status}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>M(K),children:e.jsx(Ss,{className:"h-4 w-4"})}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>V(K.id,{status:"cancelled"}),children:e.jsx(Bn,{className:"h-4 w-4"})}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>H(K.id),children:e.jsx(Ds,{className:"h-4 w-4"})})]})]},K.id))})})]})}),e.jsx(Kt,{value:"conflicts",className:"space-y-6",children:e.jsxs(Re,{children:[e.jsxs(lt,{children:[e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(Lr,{className:"h-5 w-5"}),"Schedule Conflicts"]}),e.jsx(ts,{children:"Resolve scheduling conflicts and overlaps."})]}),e.jsx(De,{children:P.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Yt,{className:"h-12 w-12 text-green-500 mx-auto mb-3"}),e.jsx("p",{className:"text-muted-foreground",children:"No conflicts detected"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"All schedules are properly configured"})]}):e.jsx("div",{className:"space-y-4",children:P.map(K=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(Lr,{className:"h-4 w-4 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:K.message}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Type: ",K.type.replace("_"," ")]}),e.jsxs("span",{children:["Affected Schedules: ",K.scheduleIds.length]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(et,{className:Y(K.severity),children:K.severity}),e.jsx(ee,{variant:"outline",size:"sm",children:e.jsx(Ss,{className:"h-4 w-4"})}),e.jsx(ee,{variant:"outline",size:"sm",children:e.jsx(Bn,{className:"h-4 w-4"})})]})]},K.id))})})]})}),e.jsxs(Kt,{value:"resources",className:"space-y-6",children:[e.jsxs(Re,{children:[e.jsxs(lt,{children:[e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(tr,{className:"h-5 w-5"}),"Room Management"]}),e.jsx(ts,{children:"Manage classrooms, labs, and other resources."})]}),e.jsx(De,{children:e.jsx("div",{className:"space-y-4",children:f.map(K=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(tr,{className:"h-4 w-4 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:K.name}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(as,{className:"h-3 w-3"}),"Capacity: ",K.capacity]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(la,{className:"h-3 w-3"}),"Type: ",K.type]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(nm,{className:"h-3 w-3"}),"Equipment: ",K.equipment.join(", ")]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(et,{variant:K.status==="available"?"default":"secondary",children:K.status}),e.jsx(ee,{variant:"outline",size:"sm",children:e.jsx(Bn,{className:"h-4 w-4"})})]})]},K.id))})})]}),e.jsxs(Re,{children:[e.jsxs(lt,{children:[e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(as,{className:"h-5 w-5"}),"Faculty Workload"]}),e.jsx(ts,{children:"Monitor faculty teaching load and availability."})]}),e.jsx(De,{children:e.jsx("div",{className:"space-y-4",children:m.map(K=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Da,{className:"h-4 w-4 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:K.name}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ro,{className:"h-3 w-3"}),K.email]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(tr,{className:"h-3 w-3"}),K.department]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Rr,{className:"h-3 w-3"}),"Workload: ",K.workload,"%"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(et,{variant:K.status==="available"?"default":"secondary",children:K.status}),e.jsx(ee,{variant:"outline",size:"sm",children:e.jsx(Ss,{className:"h-4 w-4"})})]})]},K.id))})})]})]})]}),e.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["Last updated: ",n.toLocaleTimeString(),o&&e.jsx("span",{className:"ml-2",children:" Refreshing..."})]})]})})},AU=()=>{qs(),Js();const[t,r]=A.useState(navigator.onLine),[s,n]=A.useState(new Date),[c,o]=A.useState(!1),[a,d]=A.useState([]),[l,i]=A.useState({}),[u,f]=A.useState({}),[h,m]=A.useState({}),[p,x]=A.useState({}),[g,v]=A.useState(null),[y,b]=A.useState(!1),[C,T]=A.useState({total:0,available:0,busy:0,away:0,offline:0}),M=A.useCallback(async()=>{o(!0);try{await U(),await L(),await P(),await B(),await q()}catch(j){console.error("Error refreshing data:",j)}finally{o(!1),n(new Date)}},[]);A.useEffect(()=>{const j=setInterval(M,3e4);return()=>clearInterval(j)},[M]),A.useEffect(()=>{const j=()=>r(!0),N=()=>r(!1);return window.addEventListener("online",j),window.addEventListener("offline",N),()=>{window.removeEventListener("online",j),window.removeEventListener("offline",N)}},[]),A.useEffect(()=>{M()},[]);const U=async()=>{try{const j=await Pe.getUsers({role:"faculty"});j.success&&j.data?(d(j.data),T({total:j.data.length,available:0,busy:0,away:0,offline:0})):(d([]),T({total:0,available:0,busy:0,away:0,offline:0}))}catch(j){console.error("Error loading faculty:",j),d([]),T({total:0,available:0,busy:0,away:0,offline:0})}},L=async()=>{try{const j=await Pe.getFacultyStatus();if(j.success&&j.data){const N={};Array.isArray(j.data)?j.data.forEach(E=>{N[E.faculty_id||E.id]={status:E.status||"offline",lastSeen:E.last_seen||E.lastSeen||new Date().toISOString(),device:E.device||"unknown",browser:E.browser||"unknown"}}):typeof j.data=="object"&&Object.assign(N,j.data),i(N)}else i({})}catch(j){console.error("Error loading faculty status:",j),i({})}},P=async()=>{try{const j=await Pe.getFacultyAvailability();if(j.success&&j.data){const N={};Array.isArray(j.data)?j.data.forEach(E=>{N[E.faculty_id||E.id]={schedule:E.schedule||[],timezone:E.timezone||"UTC",workingHours:E.working_hours||E.workingHours||{start:"09:00",end:"17:00"},breaks:E.breaks||[]}}):typeof j.data=="object"&&Object.assign(N,j.data),f(N)}else f({})}catch(j){console.error("Error loading availability:",j),f({})}},B=async()=>{try{const j=await Pe.getFacultyWorkload();if(j.success&&j.data){const N={};Array.isArray(j.data)?j.data.forEach(E=>{N[E.faculty_id||E.id]={teaching:E.teaching||{hours:0,courses:0,students:0},research:E.research||{hours:0,projects:0,publications:0},admin:E.admin||{hours:0,tasks:0,meetings:0},total:E.total||0}}):typeof j.data=="object"&&Object.assign(N,j.data),m(N)}else m({})}catch(j){console.error("Error loading workload:",j),m({})}},q=async()=>{try{x({})}catch(j){console.error("Error loading location:",j),x({})}},z=j=>{switch(j){case"available":return"bg-green-100 text-green-800 border-green-200";case"busy":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"away":return"bg-orange-100 text-orange-800 border-orange-200";case"offline":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},k=j=>{switch(j){case"available":return e.jsx(Yt,{className:"h-4 w-4 text-green-600"});case"busy":return e.jsx(Ps,{className:"h-4 w-4 text-yellow-600"});case"away":return e.jsx(Lr,{className:"h-4 w-4 text-orange-600"});case"offline":return e.jsx(Mr,{className:"h-4 w-4 text-gray-600"});default:return e.jsx(rN,{className:"h-4 w-4 text-gray-600"})}},R=j=>{switch(j){case"on_campus":return e.jsx(tr,{className:"h-4 w-4 text-blue-600"});case"remote":return e.jsx(G7,{className:"h-4 w-4 text-green-600"});case"off_campus":return e.jsx(Pa,{className:"h-4 w-4 text-orange-600"});default:return e.jsx(Pa,{className:"h-4 w-4 text-gray-600"})}},S=j=>{switch(j){case"desktop":return e.jsx(Gd,{className:"h-4 w-4"});case"laptop":return e.jsx(Y7,{className:"h-4 w-4"});case"mobile":return e.jsx(m9,{className:"h-4 w-4"});case"tablet":return e.jsx(g9,{className:"h-4 w-4"});default:return e.jsx(Gd,{className:"h-4 w-4"})}},w=j=>{if(!j||typeof j!="string")return"N/A";try{const[N,E]=j.split(":");if(!N||!E)return"N/A";const I=parseInt(N);if(isNaN(I))return"N/A";const D=I>=12?"PM":"AM";return`${I%12||12}:${E} ${D}`}catch(N){return console.error("Error formatting time:",N,j),"N/A"}},_=j=>j>=90?"text-red-600":j>=75?"text-orange-600":j>=50?"text-yellow-600":"text-green-600";return e.jsx("div",{className:"min-h-screen bg-background p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Faculty Status Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Monitor faculty availability, workload, and real-time status"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[t?e.jsx(yo,{className:"h-4 w-4 text-green-500"}):e.jsx(xo,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:t?"Online":"Offline"})]}),e.jsxs(ee,{variant:"outline",size:"sm",onClick:M,disabled:c,className:"flex items-center gap-2",children:[e.jsx(Is,{className:`h-4 w-4 ${c?"animate-spin":""}`}),"Refresh"]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-5",children:[e.jsx(Re,{className:"shadow-lg",children:e.jsx(De,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm font-medium",children:"Total Faculty"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:C.total})]}),e.jsx(as,{className:"h-12 w-12 text-blue-600"})]})})}),e.jsx(Re,{className:"shadow-lg",children:e.jsx(De,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm font-medium",children:"Available"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:C.available})]}),e.jsx(Yt,{className:"h-12 w-12 text-green-600"})]})})}),e.jsx(Re,{className:"shadow-lg",children:e.jsx(De,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm font-medium",children:"Busy"}),e.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:C.busy})]}),e.jsx(Ps,{className:"h-12 w-12 text-yellow-600"})]})})}),e.jsx(Re,{className:"shadow-lg",children:e.jsx(De,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm font-medium",children:"Away"}),e.jsx("p",{className:"text-3xl font-bold text-orange-600",children:C.away})]}),e.jsx(Lr,{className:"h-12 w-12 text-orange-600"})]})})}),e.jsx(Re,{className:"shadow-lg",children:e.jsx(De,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm font-medium",children:"Offline"}),e.jsx("p",{className:"text-3xl font-bold text-gray-600",children:C.offline})]}),e.jsx(Mr,{className:"h-12 w-12 text-gray-600"})]})})})]}),e.jsxs(Dr,{defaultValue:"status",className:"space-y-6",children:[e.jsxs(Ir,{className:"grid w-full grid-cols-4",children:[e.jsx(zt,{value:"status",children:"Status Overview"}),e.jsx(zt,{value:"availability",children:"Availability"}),e.jsx(zt,{value:"workload",children:"Workload"}),e.jsx(zt,{value:"location",children:"Location"})]}),e.jsx(Kt,{value:"status",className:"space-y-6",children:e.jsxs(Re,{children:[e.jsxs(lt,{children:[e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(oc,{className:"h-5 w-5"}),"Faculty Status Overview"]}),e.jsx(ts,{children:"Real-time status and activity of all faculty members."})]}),e.jsx(De,{children:e.jsx("div",{className:"space-y-4",children:a.map(j=>{const N=l[j.id],E=p[j.id],I=h[j.id];return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Da,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:j.name}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ro,{className:"h-3 w-3"}),j.email]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(tr,{className:"h-3 w-3"}),j.department]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Go,{className:"h-3 w-3"}),j.position]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[k(N==null?void 0:N.status),e.jsx(et,{className:z(N==null?void 0:N.status),children:(N==null?void 0:N.status)||"unknown"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[S(N==null?void 0:N.device),e.jsx("span",{className:"text-xs text-muted-foreground",children:N==null?void 0:N.device})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[R(E==null?void 0:E.type),e.jsx("span",{className:"text-xs text-muted-foreground",children:(E==null?void 0:E.type)==="on_campus"?E==null?void 0:E.room:E==null?void 0:E.type})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Workload: "}),e.jsxs("span",{className:_((I==null?void 0:I.total)||0),children:[(I==null?void 0:I.total)||0,"h"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>v(j),children:e.jsx(Ss,{className:"h-4 w-4"})}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>b(!0),children:e.jsx(Bn,{className:"h-4 w-4"})})]})]})]},j.id)})})})]})}),e.jsx(Kt,{value:"availability",className:"space-y-6",children:e.jsxs(Re,{children:[e.jsxs(lt,{children:[e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(fr,{className:"h-5 w-5"}),"Faculty Availability"]}),e.jsx(ts,{children:"View and manage faculty availability schedules."})]}),e.jsx(De,{children:e.jsx("div",{className:"space-y-6",children:a.map(j=>{var E,I,D;const N=u[j.id];return e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"font-semibold",children:j.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Working Hours: ",(E=N==null?void 0:N.workingHours)!=null&&E.start&&((I=N==null?void 0:N.workingHours)!=null&&I.end)?`${w(N.workingHours.start)} - ${w(N.workingHours.end)}`:"Not set"]}),e.jsx(ee,{variant:"outline",size:"sm",children:e.jsx(Bn,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"grid gap-2 md:grid-cols-5",children:(D=N==null?void 0:N.schedule)==null?void 0:D.map((V,H)=>e.jsxs("div",{className:"p-2 border rounded text-center",children:[e.jsx("div",{className:"font-medium text-sm",children:V.day}),e.jsx("div",{className:"text-xs text-muted-foreground",children:V.start&&V.end?`${w(V.start)} - ${w(V.end)}`:"Not set"}),e.jsx(et,{variant:"outline",className:"text-xs mt-1",children:V.type})]},H))})]},j.id)})})})]})}),e.jsx(Kt,{value:"workload",className:"space-y-6",children:e.jsxs(Re,{children:[e.jsxs(lt,{children:[e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(Rr,{className:"h-5 w-5"}),"Faculty Workload Analysis"]}),e.jsx(ts,{children:"Monitor teaching, research, and administrative workload distribution."})]}),e.jsx(De,{children:e.jsx("div",{className:"space-y-6",children:a.map(j=>{var E,I,D,V,H,G,$,Y,F;const N=h[j.id];return e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"font-semibold",children:j.name}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold",children:e.jsxs("span",{className:_((N==null?void 0:N.total)||0),children:[(N==null?void 0:N.total)||0,"h"]})}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Hours"})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Teaching"}),e.jsxs("span",{className:"text-sm font-bold text-blue-600",children:[((E=N==null?void 0:N.teaching)==null?void 0:E.hours)||0,"h"]})]}),e.jsxs("div",{className:"text-xs text-blue-600",children:[((I=N==null?void 0:N.teaching)==null?void 0:I.courses)||0," courses, ",((D=N==null?void 0:N.teaching)==null?void 0:D.students)||0," students"]})]}),e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-green-800",children:"Research"}),e.jsxs("span",{className:"text-sm font-bold text-green-600",children:[((V=N==null?void 0:N.research)==null?void 0:V.hours)||0,"h"]})]}),e.jsxs("div",{className:"text-xs text-green-600",children:[((H=N==null?void 0:N.research)==null?void 0:H.projects)||0," projects, ",((G=N==null?void 0:N.research)==null?void 0:G.publications)||0," publications"]})]}),e.jsxs("div",{className:"p-3 bg-purple-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-purple-800",children:"Administrative"}),e.jsxs("span",{className:"text-sm font-bold text-purple-600",children:[(($=N==null?void 0:N.admin)==null?void 0:$.hours)||0,"h"]})]}),e.jsxs("div",{className:"text-xs text-purple-600",children:[((Y=N==null?void 0:N.admin)==null?void 0:Y.tasks)||0," tasks, ",((F=N==null?void 0:N.admin)==null?void 0:F.meetings)||0," meetings"]})]})]})]},j.id)})})})]})}),e.jsx(Kt,{value:"location",className:"space-y-6",children:e.jsxs(Re,{children:[e.jsxs(lt,{children:[e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(Pa,{className:"h-5 w-5"}),"Faculty Location Tracking"]}),e.jsx(ts,{children:"Monitor faculty location and presence on campus."})]}),e.jsx(De,{children:e.jsx("div",{className:"space-y-4",children:a.map(j=>{const N=p[j.id],E=l[j.id];return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Da,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:j.name}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[R(N==null?void 0:N.type),(N==null?void 0:N.type)==="on_campus"?`${N==null?void 0:N.building}, ${N==null?void 0:N.room}`:N==null?void 0:N.type]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ps,{className:"h-3 w-3"}),"Last seen: ",new Date(E==null?void 0:E.lastSeen).toLocaleTimeString()]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(et,{className:z(E==null?void 0:E.status),children:E==null?void 0:E.status}),e.jsx(ee,{variant:"outline",size:"sm",children:e.jsx(Pa,{className:"h-4 w-4"})})]})]},j.id)})})})]})})]}),e.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["Last updated: ",s.toLocaleTimeString(),c&&e.jsx("span",{className:"ml-2",children:" Refreshing..."})]})]})})},TU=()=>{var hs,Yr,wn,Sr,xr,zr,Or,Pn;qs();const{toast:t}=Js(),[r,s]=A.useState([]),[n,c]=A.useState([]),[o,a]=A.useState([]),[d,l]=A.useState(!0),[i,u]=A.useState(0),[f,h]=A.useState("categories"),[m,p]=A.useState(null),[x,g]=A.useState(null),[v,y]=A.useState([]),[b,C]=A.useState(!1),[T,M]=A.useState(""),[U,L]=A.useState("all"),[P,B]=A.useState("all"),[q,z]=A.useState("all"),[k,R]=A.useState("all"),[S,w]=A.useState("all"),[_,j]=A.useState("created_at"),[N,E]=A.useState("DESC"),[I,D]=A.useState(1),[V,H]=A.useState(12),[G,$]=A.useState(1),[Y,F]=A.useState(1),[O,W]=A.useState(9),[K,Q]=A.useState(9),[X,te]=A.useState(!1),[de,xe]=A.useState(!1),[ne,ge]=A.useState(!1),[be,Ie]=A.useState(!1),[Ce,Oe]=A.useState(!1),[Ee,pe]=A.useState(!1),[Ae,st]=A.useState(!1),[qe,ie]=A.useState(null),[ae,we]=A.useState(null),[ve,He]=A.useState(new Set),[$e,ue]=A.useState(!1),[oe,_e]=A.useState(!1),[Me,ze]=A.useState(!1),[Xe,Ve]=A.useState(!1),[ot,xt]=A.useState("multiple_choice"),[ft,at]=A.useState(null),[Be,Ue]=A.useState(!1),[re,ye]=A.useState(!1),[ke,Fe]=A.useState(null),[Ke,Qe]=A.useState(null),[he,je]=A.useState({name:"",description:"",parent_id:null,color:"#3B82F6",icon:""}),Ne=[{value:"all",label:"All Types"},{value:"multiple_choice",label:"Multiple Choice"},{value:"single_choice",label:"Single Choice"},{value:"true_false",label:"True/False"},{value:"short_answer",label:"Short Answer"},{value:"essay",label:"Essay"},{value:"coding",label:"Coding"},{value:"fill_blanks",label:"Fill in the Blanks"}];A.useEffect(()=>{tt()},[I,V,_,N,G,O,Y,K]),A.useEffect(()=>{const me=setTimeout(()=>{(x||b)&&kt()},150);return()=>clearTimeout(me)},[T,U,P,q,k,S,b,x]);const tt=async()=>{try{await Promise.all([jt(),dt()]),(x||b)&&await kt()}catch(me){console.error("Error loading data:",me)}},jt=async()=>{try{const me=await Pe.get("/question-bank/categories");me.success&&c(me.data||[])}catch(me){console.error("Error loading categories:",me)}},dt=async()=>{try{const me=await Pe.get("/question-bank/tags");me.success&&a(me.data||[])}catch(me){console.error("Error loading tags:",me)}},kt=async()=>{var me;try{l(!0);const ct=new URLSearchParams({page:I.toString(),limit:V.toString(),sort_by:_,sort_order:N});T&&ct.append("search",T),U!=="all"&&U!=="choice_questions"&&U!=="text_questions"&&ct.append("question_type",U),P!=="all"&&ct.append("difficulty_level",P),q!=="all"&&ct.append("category_id",q),k!=="all"&&ct.append("tags",k),S!=="all"&&ct.append("status",S),x?ct.append("category_id",x.id):m&&ct.append("category_id",m.id);const Ft=await Pe.get(`/question-bank/questions?${ct.toString()}`);if(Ft.success){let xs=Ft.data.questions||Ft.data;U==="choice_questions"?xs=xs.filter(As=>["multiple_choice","single_choice","true_false"].includes(As.question_type)):U==="text_questions"&&(xs=xs.filter(As=>["short_answer","essay"].includes(As.question_type))),s(xs),u(((me=Ft.data.pagination)==null?void 0:me.total)||xs.length),He(new Set)}}catch(ct){console.error("Error fetching questions:",ct),t({variant:"destructive",title:"Error",description:"Failed to load questions"})}finally{l(!1)}},gt=me=>{p(me),g(null),h("categories"),y([{id:me.id,name:me.name,type:"category"}])},wt=me=>{g(me),h("categories"),y([{id:m.id,name:m.name,type:"category"},{id:me.id,name:me.name,type:"subcategory"}]),kt()},Pt=()=>{p(null),g(null),h("categories"),y([])},bt=()=>n.filter(me=>me.parent_id===null),yt=me=>n.filter(ct=>ct.parent_id===me),Ge=async()=>{try{(await Pe.post("/question-bank/categories",he)).success&&(t({title:"Success",description:"Category created successfully"}),Oe(!1),je({name:"",description:"",parent_id:null,color:"#3B82F6",icon:""}),jt())}catch(me){console.error("Error creating category:",me),t({variant:"destructive",title:"Error",description:"Failed to create category"})}},J=async()=>{try{(await Pe.put(`/question-bank/categories/${ae.id}`,he)).success&&(t({title:"Success",description:"Category updated successfully"}),pe(!1),we(null),je({name:"",description:"",parent_id:null,color:"#3B82F6",icon:""}),jt())}catch(me){console.error("Error updating category:",me),t({variant:"destructive",title:"Error",description:"Failed to update category"})}},ce=async()=>{try{(await Pe.delete(`/question-bank/categories/${ae.id}`)).success&&(t({title:"Success",description:"Category deleted successfully"}),st(!1),we(null),jt(),f==="subcategories"&&(m==null?void 0:m.id)===(ae==null?void 0:ae.id)&&Pt())}catch(me){console.error("Error deleting category:",me),t({variant:"destructive",title:"Error",description:"Failed to delete category"})}},Je=me=>{we(me),je({name:me.name,description:me.description||"",parent_id:me.parent_id,color:me.color||"#3B82F6",icon:me.icon||""}),pe(!0)},ht=me=>{we(me),st(!0)},le=async()=>{var me,ct;if(qe)try{(await Pe.deleteQuestion(qe.id)).success&&(t({title:"Success",description:"Question deleted successfully"}),Ie(!1),ie(null),kt())}catch(Ft){console.error("Error deleting question:",Ft),t({variant:"destructive",title:"Error",description:((ct=(me=Ft.response)==null?void 0:me.data)==null?void 0:ct.message)||"Failed to delete question"})}},Le=async(me,ct)=>{try{(await Pe.updateQuestion(me,{status:ct})).success&&(t({title:"Success",description:"Question status updated successfully"}),kt())}catch(Ft){console.error("Error updating question status:",Ft),t({variant:"destructive",title:"Error",description:"Failed to update question status"})}},rt=async me=>{try{const ct=await Pe.get(`/question-bank/questions/${me.id}`);ct.success?(ie(ct.data),xe(!0)):(console.error("Failed to load question details:",ct),t({variant:"destructive",title:"Error",description:"Failed to load question details"}))}catch(ct){console.error("Error fetching question details:",ct),t({variant:"destructive",title:"Error",description:"Failed to load question details"})}},pt=async me=>{try{const ct=await Pe.get(`/question-bank/questions/${me.id}`);if(ct.success){const Ft=ct.data;if(Ft.options&&typeof Ft.options=="string")try{Ft.options=JSON.parse(Ft.options)}catch(xs){console.error("Error parsing options:",xs),Ft.options=[]}ie(Ft),ge(!0)}else t({variant:"destructive",title:"Error",description:"Failed to load question details"})}catch(ct){console.error("Error fetching question details:",ct),t({variant:"destructive",title:"Error",description:"Failed to load question details"})}},Tt=me=>{ie(me),Ie(!0)},vt=me=>{He(ct=>{const Ft=new Set(ct);return Ft.has(me)?Ft.delete(me):Ft.add(me),Ft})},_t=()=>{ve.size===r.length?He(new Set):He(new Set(r.map(me=>me.id)))},Bt=async()=>{try{await Pe.downloadQuestionTemplate(ot),t({title:"Success",description:"Template downloaded successfully"})}catch(me){console.error("Error downloading template:",me),t({variant:"destructive",title:"Error",description:me.message||"Failed to download template"})}},Qt=async()=>{if(!ft){t({variant:"destructive",title:"Error",description:"Please select an Excel file to upload"});return}try{ye(!0),Fe(null);const me=await Pe.previewBulkUploadQuestions(ft,ot);Fe(me.data),ze(!1),Ve(!0)}catch(me){console.error("Error in preview upload:",me),t({variant:"destructive",title:"Error",description:me.message||"Failed to parse Excel file"})}finally{ye(!1)}},Gt=async()=>{if(!ft){t({variant:"destructive",title:"Error",description:"File not found"});return}try{Ue(!0),Qe(null);const me=await Pe.bulkUploadQuestions(ft,ot);Qe(me.data),Ve(!1),me.data.success>0?(t({title:"Bulk Upload Complete",description:`Successfully uploaded ${me.data.success} question${me.data.success>1?"s":""}${me.data.failed>0?`. ${me.data.failed} failed.`:""}`}),at(null),Fe(null),await Promise.all([jt(),dt()]),D(1),kt()):t({variant:"destructive",title:"Upload Failed",description:"No questions were uploaded. Please check the errors."})}catch(me){console.error("Error in bulk upload:",me),t({variant:"destructive",title:"Error",description:me.message||"Failed to upload questions"})}finally{Ue(!1)}},Ut=me=>{const ct=me.target.files[0];if(ct){if(!["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(ct.type)){t({variant:"destructive",title:"Invalid File Type",description:"Please upload an Excel file (.xlsx or .xls)"});return}at(ct)}},gs=async()=>{var me,ct;if(ve.size===0){t({variant:"destructive",title:"Error",description:"No questions selected for deletion"});return}try{ue(!0);const Ft=Array.from(ve),xs=[];for(const yr of Ft)try{const Ur=await Pe.deleteQuestion(yr);Ur.success?xs.push({success:!0,questionId:yr}):xs.push({success:!1,questionId:yr,error:Ur.message||"Failed to delete"})}catch(Ur){xs.push({success:!1,questionId:yr,error:((ct=(me=Ur.response)==null?void 0:me.data)==null?void 0:ct.message)||Ur.message||"Unknown error"})}const As=xs.filter(yr=>yr.success).length,Cr=xs.filter(yr=>!yr.success).length;As>0?t({title:"Bulk Delete Complete",description:`Successfully deleted ${As} question${As>1?"s":""}${Cr>0?`. ${Cr} error${Cr>1?"s":""} occurred.`:""}`}):t({variant:"destructive",title:"Bulk Delete Failed",description:"Failed to delete any questions. Please check the console for details."}),He(new Set),_e(!1),kt()}catch(Ft){console.error("Error in bulk delete:",Ft),t({variant:"destructive",title:"Error",description:"Failed to perform bulk delete operation"})}finally{ue(!1)}},ds=me=>{const ct=Ne.find(Ft=>Ft.value===me);return ct?ct.label:me},cs=me=>{switch(me){case"beginner":return"bg-green-100 text-green-800";case"intermediate":return"bg-yellow-100 text-yellow-800";case"advanced":return"bg-red-100 text-red-800";case"expert":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},Cs=me=>{switch(me){case"active":return"bg-green-100 text-green-800 border-green-200";case"draft":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"archived":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},Fs=me=>{switch(me){case"active":return"Active";case"draft":return"Draft";case"archived":return"Archived";default:return"Draft"}},Hs=me=>{switch(me){case"coding":return"#3B82F6";case"multiple_choice":return"#10B981";case"single_choice":return"#10B981";case"true_false":return"#F59E0B";case"short_answer":return"#8B5CF6";case"essay":return"#8B5CF6";case"fill_blanks":return"#EF4444";default:return"#6B7280"}},Nr=Math.ceil(i/V),Kr=Math.ceil(bt().length/O),vn=Math.ceil(n.filter(me=>me.parent_id!==null).length/K),Gn=()=>{const me=(G-1)*O,ct=me+O;return bt().slice(me,ct)},bn=()=>{const me=(Y-1)*K,ct=me+K;return n.filter(Ft=>Ft.parent_id!==null).slice(me,ct)},us=({currentPage:me,totalPages:ct,onPageChange:Ft,pageSize:xs,onPageSizeChange:As,totalItems:Cr,itemsLabel:yr})=>{const Ur=()=>{const Ls=[];if(ct<=5)for(let Ws=1;Ws<=ct;Ws++)Ls.push(Ws);else if(me<=3){for(let Ws=1;Ws<=4;Ws++)Ls.push(Ws);Ls.push("..."),Ls.push(ct)}else if(me>=ct-2){Ls.push(1),Ls.push("...");for(let Ws=ct-3;Ws<=ct;Ws++)Ls.push(Ws)}else{Ls.push(1),Ls.push("...");for(let Ws=me-1;Ws<=me+1;Ws++)Ls.push(Ws);Ls.push("..."),Ls.push(ct)}return Ls};return e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{htmlFor:"page-size",children:"Show"}),e.jsxs(At,{value:xs.toString(),onValueChange:Ls=>As(parseInt(Ls)),children:[e.jsx(St,{className:"w-20",children:e.jsx(Rt,{})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"6",children:"6"}),e.jsx(Te,{value:"9",children:"9"}),e.jsx(Te,{value:"12",children:"12"})]})]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"per page"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",Cr," ",yr,")"]})]}),ct>1&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>Ft(Math.max(1,me-1)),disabled:me===1,children:"Previous"}),e.jsx("div",{className:"flex items-center space-x-1",children:Ur().map((Ls,Mn)=>e.jsx(Lt.Fragment,{children:Ls==="..."?e.jsx("span",{className:"px-2 text-muted-foreground",children:"..."}):e.jsx(ee,{variant:me===Ls?"default":"outline",size:"sm",onClick:()=>Ft(Ls),className:"w-8 h-8 p-0",children:Ls})},Mn))}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>Ft(Math.min(ct,me+1)),disabled:me===ct,children:"Next"})]})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ht,{open:X,onOpenChange:te,children:e.jsxs(Zt,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Jt,{children:[e.jsx(es,{children:"Create New Question"}),e.jsx(ps,{children:"Add a new question to your question bank"})]}),e.jsx(Of,{})]})}),v.length>0&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsxs(ee,{variant:"ghost",size:"sm",onClick:()=>{p(null),g(null),y([]),C(!1)},className:"text-muted-foreground hover:text-foreground",children:[e.jsx(X_,{className:"h-4 w-4 mr-1"}),"All Categories"]}),v.map((me,ct)=>e.jsxs(Lt.Fragment,{children:[e.jsx(Oa,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>{if(ct===0){const Ft=n.find(xs=>xs.id===me.id);p(Ft),g(null),y([{id:Ft.id,name:Ft.name,type:"category"}])}else if(ct===1){const Ft=n.find(As=>As.id===v[0].id),xs=n.find(As=>As.id===me.id);p(Ft),g(xs),y([{id:Ft.id,name:Ft.name,type:"category"},{id:xs.id,name:xs.name,type:"subcategory"}]),kt()}},className:"text-muted-foreground hover:text-foreground",children:me.name})]},me.id))]}),e.jsxs(Dr,{value:f,onValueChange:me=>{h(me),me==="questions"?(C(!0),p(null),g(null),y([]),kt()):me==="subcategories"?(C(!1),p(null),g(null),y([])):me==="categories"&&(C(!1),p(null),g(null),y([]))},className:"space-y-6",children:[e.jsxs(Ir,{className:"grid w-full grid-cols-3",children:[e.jsx(zt,{value:"categories",children:"Categories"}),e.jsx(zt,{value:"subcategories",children:"All Subcategories"}),e.jsx(zt,{value:"questions",children:"All Questions"})]}),e.jsx(Kt,{value:"categories",className:"space-y-6",children:!m&&!x?e.jsxs(Re,{children:[e.jsx(lt,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-end gap-3",children:[e.jsx(Ht,{open:Me,onOpenChange:ze,children:e.jsx(xa,{asChild:!0,children:e.jsxs(ee,{variant:"outline",children:[e.jsx(va,{className:"mr-2 h-4 w-4"}),"Bulk Upload"]})})}),e.jsx(Ht,{open:X,onOpenChange:te,children:e.jsx(xa,{asChild:!0,children:e.jsxs(ee,{children:[e.jsx(vs,{className:"mr-2 h-4 w-4"}),"Create Question"]})})}),e.jsxs(ee,{onClick:()=>Oe(!0),variant:"outline",children:[e.jsx(vs,{className:"mr-2 h-4 w-4"}),"Create Category"]})]})}),e.jsxs(De,{children:[e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:Gn().map(me=>e.jsxs(Re,{className:"h-full hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>gt(me),children:[e.jsx(lt,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:me.color}}),e.jsx(mt,{className:"text-lg",children:me.name})]}),e.jsxs("div",{className:"flex items-center space-x-1",onClick:ct=>ct.stopPropagation(),children:[e.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>Je(me),children:e.jsx(wr,{className:"h-3 w-3"})}),e.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>ht(me),className:"text-red-600 hover:text-red-700",children:e.jsx(Ds,{className:"h-3 w-3"})})]})]})}),e.jsxs(De,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:me.description||"No description provided"}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-muted-foreground",children:[me.question_count||0," questions"]}),e.jsxs("span",{className:"text-muted-foreground",children:[yt(me.id).length," subcategories"]})]})]})]},me.id))}),e.jsx(us,{currentPage:G,totalPages:Kr,onPageChange:$,pageSize:O,onPageSizeChange:W,totalItems:bt().length,itemsLabel:"categories"})]})]}):m&&!x?e.jsxs(Re,{children:[e.jsx(lt,{children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-end",children:e.jsxs(ee,{variant:"outline",onClick:()=>{je({name:"",description:"",parent_id:m.id,color:"#3B82F6",icon:""}),Oe(!0)},size:"sm",children:[e.jsx(vs,{className:"mr-2 h-4 w-4"}),"Add Subcategory"]})})}),e.jsx(De,{children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:yt(m.id).map(me=>e.jsxs(Re,{className:"h-full hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>wt(me),children:[e.jsx(lt,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:me.color||"#3B82F6"}}),e.jsx(mt,{className:"text-lg",children:me.name})]}),e.jsxs("div",{className:"flex items-center space-x-1",onClick:ct=>ct.stopPropagation(),children:[e.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>Je(me),children:e.jsx(wr,{className:"h-3 w-3"})}),e.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>ht(me),className:"text-red-600 hover:text-red-700",children:e.jsx(Ds,{className:"h-3 w-3"})})]})]})}),e.jsxs(De,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:me.description||"No description provided"}),e.jsx("div",{className:"flex items-center justify-between text-sm",children:e.jsxs("span",{className:"text-muted-foreground",children:[me.question_count||0," questions"]})})]})]},me.id))})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(Re,{children:e.jsxs(De,{className:"space-y-4 pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(hn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(Ye,{placeholder:"Search questions by title or content...",value:T,onChange:me=>M(me.target.value),className:"pl-10"})]}),ve.size>0&&e.jsxs(ee,{variant:"destructive",onClick:()=>_e(!0),disabled:$e,children:[e.jsx(Ds,{className:"mr-2 h-4 w-4"}),"Delete Selected (",ve.size,")"]}),e.jsx(Ht,{open:Me,onOpenChange:ze,children:e.jsx(xa,{asChild:!0,children:e.jsxs(ee,{variant:"outline",children:[e.jsx(va,{className:"mr-2 h-4 w-4"}),"Bulk Upload"]})})}),e.jsx(Ht,{open:X,onOpenChange:te,children:e.jsx(xa,{asChild:!0,children:e.jsxs(ee,{children:[e.jsx(vs,{className:"mr-2 h-4 w-4"}),"Create Question"]})})})]}),e.jsx(Dr,{value:U,onValueChange:L,className:"w-full",children:e.jsxs(Ir,{className:"flex w-full h-10 bg-muted/50 rounded-lg p-1 gap-1",children:[e.jsx(zt,{value:"all",className:"flex-1 text-sm font-medium data-[state=active]:bg-white data-[state=active]:text-black data-[state=active]:shadow-sm transition-all duration-200 rounded-md",children:"All"}),e.jsx(zt,{value:"choice_questions",className:"flex-1 text-sm font-medium data-[state=active]:bg-white data-[state=active]:text-black data-[state=active]:shadow-sm transition-all duration-200 rounded-md",children:"Choice Questions"}),e.jsx(zt,{value:"text_questions",className:"flex-1 text-sm font-medium data-[state=active]:bg-white data-[state=active]:text-black data-[state=active]:shadow-sm transition-all duration-200 rounded-md",children:"Text Questions"}),e.jsx(zt,{value:"coding",className:"flex-1 text-sm font-medium data-[state=active]:bg-white data-[state=active]:text-black data-[state=active]:shadow-sm transition-all duration-200 rounded-md",children:"Coding"}),e.jsx(zt,{value:"fill_blanks",className:"flex-1 text-sm font-medium data-[state=active]:bg-white data-[state=active]:text-black data-[state=active]:shadow-sm transition-all duration-200 rounded-md",children:"Fill Blanks"})]})})]})}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",r.length," of ",i," questions"]})}),d?e.jsx(Re,{children:e.jsx(De,{className:"p-6",children:e.jsx("div",{className:"space-y-3",children:Array.from({length:V}).map((me,ct)=>e.jsxs("div",{className:"flex items-center space-x-4 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/6"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/6"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/6"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/6"})]},ct))})})}):r.length===0?e.jsx(Re,{className:"text-center py-12",children:e.jsxs(De,{children:[e.jsx(Os,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No questions found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:T||U!=="all"||P!=="all"?"Try adjusting your search criteria or filters.":"No questions available in this subcategory."}),e.jsxs(ee,{onClick:()=>te(!0),className:"flex items-center gap-2",children:[e.jsx(vs,{className:"w-4 h-4"}),"Create New Question"]})]})}):e.jsx(Re,{children:e.jsx(De,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-muted/50",children:[e.jsx("th",{className:"text-center p-3 font-medium text-sm w-12",children:e.jsx(Vt,{checked:r.length>0&&ve.size===r.length,onCheckedChange:_t})}),e.jsx("th",{className:"text-left p-3 font-medium text-sm w-1/3",children:"Question"}),e.jsx("th",{className:"text-left p-3 font-medium text-sm cursor-pointer hover:bg-muted/70 transition-colors w-24",onClick:()=>{_==="question_type"?E(N==="asc"?"desc":"asc"):(j("question_type"),E("asc"))},children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"Type"}),_==="question_type"&&e.jsx("span",{className:"text-xs",children:N==="asc"?"":""})]})}),e.jsx("th",{className:"text-center p-3 font-medium text-sm cursor-pointer hover:bg-muted/70 transition-colors w-24",onClick:()=>{_==="difficulty_level"?E(N==="asc"?"desc":"asc"):(j("difficulty_level"),E("asc"))},children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("span",{children:"Difficulty"}),_==="difficulty_level"&&e.jsx("span",{className:"text-xs",children:N==="asc"?"":""})]})}),e.jsx("th",{className:"text-center p-3 font-medium text-sm w-20",children:"Points"}),e.jsx("th",{className:"text-center p-3 font-medium text-sm w-24",children:"Status"}),e.jsx("th",{className:"text-center p-3 font-medium text-sm w-28",children:"Actions"})]})}),e.jsx("tbody",{children:r.map(me=>e.jsxs("tr",{className:"border-b hover:bg-muted/20 transition-colors",children:[e.jsx("td",{className:"p-3",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(Vt,{checked:ve.has(me.id),onCheckedChange:()=>vt(me.id),onClick:ct=>ct.stopPropagation()})})}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"max-w-xs",children:[e.jsx("div",{className:"font-medium line-clamp-1 text-sm",children:me.title||"Untitled Question"}),e.jsx("div",{className:"text-xs text-muted-foreground line-clamp-2 mt-1",children:me.content})]})}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:Hs(me.question_type)}}),e.jsx("span",{className:"text-xs font-medium",children:ds(me.question_type)})]})}),e.jsx("td",{className:"p-3",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(et,{className:`${cs(me.difficulty_level)} text-xs px-2 py-0.5`,children:me.difficulty_level})})}),e.jsx("td",{className:"p-3",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("span",{className:"text-xs font-medium text-center",children:[me.points||1," pts"]})})}),e.jsx("td",{className:"p-3",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs(At,{value:me.status||"draft",onValueChange:ct=>Le(me.id,ct),onClick:ct=>ct.stopPropagation(),children:[e.jsx(St,{className:`h-6 w-16 text-xs font-medium rounded-full border-0 shadow-sm hover:shadow-md transition-all duration-200 ${Cs(me.status)}`,children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${me.status==="active"?"bg-green-500":me.status==="draft"?"bg-yellow-500":me.status==="archived"?"bg-gray-600":"bg-gray-500"}`}),e.jsx("span",{className:"text-xs",children:Fs(me.status)})]})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"draft",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500"}),e.jsx("span",{className:"font-medium",children:"Draft"})]})}),e.jsx(Te,{value:"active",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),e.jsx("span",{className:"font-medium",children:"Active"})]})}),e.jsx(Te,{value:"archived",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-600"}),e.jsx("span",{className:"font-medium",children:"Archived"})]})})]})]})})}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",onClick:ct=>ct.stopPropagation(),children:[e.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>pt(me),className:"h-8 w-8 p-0 hover:bg-blue-50",title:"View Details",children:e.jsx(Ss,{className:"h-4 w-4 text-blue-600"})}),e.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>rt(me),className:"h-8 w-8 p-0 hover:bg-orange-50",title:"Edit Question",children:e.jsx(wr,{className:"h-4 w-4 text-orange-600"})}),e.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>Tt(me),className:"h-8 w-8 p-0 hover:bg-red-50",title:"Delete Question",children:e.jsx(Ds,{className:"h-4 w-4 text-red-600"})})]})})]},me.id))})]})})})}),e.jsx(us,{currentPage:I,totalPages:Nr,onPageChange:D,pageSize:V,onPageSizeChange:H,totalItems:i,itemsLabel:"questions"})]})}),e.jsx(Kt,{value:"subcategories",className:"space-y-6",children:x?e.jsxs("div",{className:"space-y-6",children:[e.jsx(Re,{children:e.jsxs(De,{className:"space-y-4 pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(hn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(Ye,{placeholder:"Search questions by title or content...",value:T,onChange:me=>M(me.target.value),className:"pl-10"})]}),ve.size>0&&e.jsxs(ee,{variant:"destructive",onClick:()=>_e(!0),disabled:$e,children:[e.jsx(Ds,{className:"mr-2 h-4 w-4"}),"Delete Selected (",ve.size,")"]}),e.jsx(Ht,{open:Me,onOpenChange:ze,children:e.jsx(xa,{asChild:!0,children:e.jsxs(ee,{variant:"outline",children:[e.jsx(va,{className:"mr-2 h-4 w-4"}),"Bulk Upload"]})})}),e.jsx(Ht,{open:X,onOpenChange:te,children:e.jsx(xa,{asChild:!0,children:e.jsxs(ee,{children:[e.jsx(vs,{className:"mr-2 h-4 w-4"}),"Create Question"]})})})]}),e.jsx(Dr,{value:U,onValueChange:L,className:"w-full",children:e.jsxs(Ir,{className:"flex w-full h-10 bg-muted/50 rounded-lg p-1 gap-1",children:[e.jsx(zt,{value:"all",className:"flex-1 text-sm font-medium data-[state=active]:bg-white data-[state=active]:text-black data-[state=active]:shadow-sm transition-all duration-200 rounded-md",children:"All"}),e.jsx(zt,{value:"choice_questions",className:"flex-1 text-sm font-medium data-[state=active]:bg-white data-[state=active]:text-black data-[state=active]:shadow-sm transition-all duration-200 rounded-md",children:"Choice Questions"}),e.jsx(zt,{value:"text_questions",className:"flex-1 text-sm font-medium data-[state=active]:bg-white data-[state=active]:text-black data-[state=active]:shadow-sm transition-all duration-200 rounded-md",children:"Text Questions"}),e.jsx(zt,{value:"coding",className:"flex-1 text-sm font-medium data-[state=active]:bg-white data-[state=active]:text-black data-[state=active]:shadow-sm transition-all duration-200 rounded-md",children:"Coding"}),e.jsx(zt,{value:"fill_blanks",className:"flex-1 text-sm font-medium data-[state=active]:bg-white data-[state=active]:text-black data-[state=active]:shadow-sm transition-all duration-200 rounded-md",children:"Fill Blanks"})]})})]})}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",r.length," of ",i," questions"]})}),d?e.jsx(Re,{children:e.jsx(De,{className:"p-6",children:e.jsx("div",{className:"space-y-3",children:Array.from({length:V}).map((me,ct)=>e.jsxs("div",{className:"flex items-center space-x-4 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/6"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/6"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/6"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/6"})]},ct))})})}):r.length===0?e.jsx(Re,{className:"text-center py-12",children:e.jsxs(De,{children:[e.jsx(Os,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No questions found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:T||U!=="all"||P!=="all"?"Try adjusting your search criteria or filters.":"No questions available in this subcategory."}),e.jsxs(ee,{onClick:()=>te(!0),className:"flex items-center gap-2",children:[e.jsx(vs,{className:"w-4 h-4"}),"Create New Question"]})]})}):e.jsx(Re,{children:e.jsx(De,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-muted/50",children:[e.jsx("th",{className:"text-center p-4 font-medium w-12",children:e.jsx(Vt,{checked:r.length>0&&ve.size===r.length,onCheckedChange:_t})}),e.jsx("th",{className:"text-left p-4 font-medium",children:"Question"}),e.jsx("th",{className:"text-left p-4 font-medium cursor-pointer hover:bg-muted/70 transition-colors",onClick:()=>{_==="question_type"?E(N==="asc"?"desc":"asc"):(j("question_type"),E("asc"))},children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Type"}),_==="question_type"&&e.jsx("span",{className:"text-xs",children:N==="asc"?"":""})]})}),e.jsx("th",{className:"text-center p-4 font-medium cursor-pointer hover:bg-muted/70 transition-colors",onClick:()=>{_==="difficulty_level"?E(N==="asc"?"desc":"asc"):(j("difficulty_level"),E("asc"))},children:e.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[e.jsx("span",{children:"Difficulty"}),_==="difficulty_level"&&e.jsx("span",{className:"text-xs",children:N==="asc"?"":""})]})}),e.jsx("th",{className:"text-center p-4 font-medium",children:"Points"}),e.jsx("th",{className:"text-center p-4 font-medium",children:"Status"}),e.jsx("th",{className:"text-center p-4 font-medium",children:"Actions"})]})}),e.jsx("tbody",{children:r.map(me=>e.jsxs("tr",{className:"border-b hover:bg-muted/30 cursor-pointer",onClick:()=>pt(me),children:[e.jsx("td",{className:"p-4",onClick:ct=>ct.stopPropagation(),children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(Vt,{checked:ve.has(me.id),onCheckedChange:()=>vt(me.id),onClick:ct=>ct.stopPropagation()})})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"max-w-xs",children:[e.jsx("div",{className:"font-medium line-clamp-1",children:me.title||"Untitled Question"}),e.jsx("div",{className:"text-sm text-muted-foreground line-clamp-2 mt-1",children:me.content})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Hs(me.question_type)}}),e.jsx("span",{className:"text-sm",children:ds(me.question_type)})]})}),e.jsx("td",{className:"p-4",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(et,{className:cs(me.difficulty_level),children:me.difficulty_level})})}),e.jsx("td",{className:"p-4",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("span",{className:"text-sm font-medium",children:[me.points||1," pts"]})})}),e.jsx("td",{className:"p-4",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs(At,{value:me.status||"draft",onValueChange:ct=>Le(me.id,ct),onClick:ct=>ct.stopPropagation(),children:[e.jsx(St,{className:`h-7 w-24 text-xs font-semibold rounded-full border-0 shadow-sm hover:shadow-md transition-all duration-200 ${Cs(me.status)}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${me.status==="active"?"bg-green-500":me.status==="draft"?"bg-yellow-500":me.status==="archived"?"bg-gray-600":"bg-gray-500"}`}),e.jsx("span",{children:Fs(me.status)})]})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"draft",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500"}),e.jsx("span",{className:"font-medium",children:"Draft"})]})}),e.jsx(Te,{value:"active",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),e.jsx("span",{className:"font-medium",children:"Active"})]})}),e.jsx(Te,{value:"archived",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-600"}),e.jsx("span",{className:"font-medium",children:"Archived"})]})})]})]})})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",onClick:ct=>ct.stopPropagation(),children:[e.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>pt(me),children:e.jsx(Ss,{className:"h-4 w-4"})}),e.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>rt(me),children:e.jsx(wr,{className:"h-4 w-4"})}),e.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>Tt(me),className:"text-red-600 hover:text-red-700",children:e.jsx(Ds,{className:"h-4 w-4"})})]})})]},me.id))})]})})})}),e.jsx(us,{currentPage:I,totalPages:Nr,onPageChange:D,pageSize:V,onPageSizeChange:H,totalItems:i,itemsLabel:"questions"})]}):e.jsxs(Re,{children:[e.jsx(lt,{children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-end",children:e.jsxs(ee,{variant:"outline",onClick:()=>{je({name:"",description:"",parent_id:null,color:"#3B82F6",icon:""}),Oe(!0)},size:"sm",children:[e.jsx(vs,{className:"mr-2 h-4 w-4"}),"Add Subcategory"]})})}),e.jsxs(De,{children:[e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:bn().map(me=>{const ct=n.find(Ft=>Ft.id===me.parent_id);return e.jsxs(Re,{className:"h-full hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>{p(ct),g(me),y([{id:ct.id,name:ct.name,type:"category"},{id:me.id,name:me.name,type:"subcategory"}]),kt()},children:[e.jsx(lt,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:me.color||"#3B82F6"}}),e.jsx(mt,{className:"text-lg",children:me.name})]}),e.jsxs("div",{className:"flex items-center space-x-1",onClick:Ft=>Ft.stopPropagation(),children:[e.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>Je(me),children:e.jsx(wr,{className:"h-3 w-3"})}),e.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>ht(me),className:"text-red-600 hover:text-red-700",children:e.jsx(Ds,{className:"h-3 w-3"})})]})]})}),e.jsxs(De,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:me.description||"No description provided"}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-muted-foreground",children:[me.question_count||0," questions"]}),e.jsxs("span",{className:"text-muted-foreground",children:["Parent: ",(ct==null?void 0:ct.name)||"Unknown"]})]})]})]},me.id)})}),e.jsx(us,{currentPage:Y,totalPages:vn,onPageChange:F,pageSize:K,onPageSizeChange:Q,totalItems:n.filter(me=>me.parent_id!==null).length,itemsLabel:"subcategories"})]})]})}),e.jsxs(Kt,{value:"questions",className:"space-y-6",children:[x&&e.jsx("div",{className:"mb-4",children:e.jsxs(ee,{variant:"ghost",size:"sm",onClick:()=>{p(null),g(null),y([]),C(!0),kt()},className:"text-muted-foreground hover:text-foreground",children:[e.jsx(oa,{className:"h-4 w-4 mr-1"}),"Show All Questions"]})}),e.jsx(Re,{children:e.jsxs(De,{className:"space-y-4 pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(hn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(Ye,{placeholder:"Search questions by title or content...",value:T,onChange:me=>M(me.target.value),className:"pl-10"})]}),ve.size>0&&e.jsxs(ee,{variant:"destructive",onClick:()=>_e(!0),disabled:$e,children:[e.jsx(Ds,{className:"mr-2 h-4 w-4"}),"Delete Selected (",ve.size,")"]}),e.jsx(Ht,{open:X,onOpenChange:te,children:e.jsx(xa,{asChild:!0,children:e.jsxs(ee,{children:[e.jsx(vs,{className:"mr-2 h-4 w-4"}),"Create Question"]})})})]}),e.jsx(Dr,{value:U,onValueChange:L,className:"w-full",children:e.jsxs(Ir,{className:"flex w-full h-10 bg-muted/50 rounded-lg p-1 gap-1",children:[e.jsx(zt,{value:"all",className:"flex-1 text-sm font-medium data-[state=active]:bg-white data-[state=active]:text-black data-[state=active]:shadow-sm transition-all duration-200 rounded-md",children:"All"}),e.jsx(zt,{value:"choice_questions",className:"flex-1 text-sm font-medium data-[state=active]:bg-white data-[state=active]:text-black data-[state=active]:shadow-sm transition-all duration-200 rounded-md",children:"Choice Questions"}),e.jsx(zt,{value:"text_questions",className:"flex-1 text-sm font-medium data-[state=active]:bg-white data-[state=active]:text-black data-[state=active]:shadow-sm transition-all duration-200 rounded-md",children:"Text Questions"}),e.jsx(zt,{value:"coding",className:"flex-1 text-sm font-medium data-[state=active]:bg-white data-[state=active]:text-black data-[state=active]:shadow-sm transition-all duration-200 rounded-md",children:"Coding"}),e.jsx(zt,{value:"fill_blanks",className:"flex-1 text-sm font-medium data-[state=active]:bg-white data-[state=active]:text-black data-[state=active]:shadow-sm transition-all duration-200 rounded-md",children:"Fill Blanks"})]})})]})}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",r.length," of ",i," questions"]})}),d?e.jsx(Re,{children:e.jsx(De,{className:"p-6",children:e.jsx("div",{className:"space-y-3",children:Array.from({length:V}).map((me,ct)=>e.jsxs("div",{className:"flex items-center space-x-4 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/6"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/6"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/6"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/6"})]},ct))})})}):r.length===0?e.jsx(Re,{className:"text-center py-12",children:e.jsxs(De,{children:[e.jsx(Os,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No questions found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:T||U!=="all"||P!=="all"?"Try adjusting your search criteria or filters.":"No questions available in this category."}),e.jsxs(ee,{onClick:()=>te(!0),className:"flex items-center gap-2",children:[e.jsx(vs,{className:"w-4 h-4"}),"Create New Question"]})]})}):e.jsx(Re,{children:e.jsx(De,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-muted/50",children:[e.jsx("th",{className:"text-center p-4 font-medium w-12",children:e.jsx(Vt,{checked:r.length>0&&ve.size===r.length,onCheckedChange:_t})}),e.jsx("th",{className:"text-left p-4 font-medium",children:"Question"}),e.jsx("th",{className:"text-left p-4 font-medium cursor-pointer hover:bg-muted/70 transition-colors",onClick:()=>{_==="question_type"?E(N==="asc"?"desc":"asc"):(j("question_type"),E("asc"))},children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Type"}),_==="question_type"&&e.jsx("span",{className:"text-xs",children:N==="asc"?"":""})]})}),e.jsx("th",{className:"text-center p-4 font-medium cursor-pointer hover:bg-muted/70 transition-colors",onClick:()=>{_==="difficulty_level"?E(N==="asc"?"desc":"asc"):(j("difficulty_level"),E("asc"))},children:e.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[e.jsx("span",{children:"Difficulty"}),_==="difficulty_level"&&e.jsx("span",{className:"text-xs",children:N==="asc"?"":""})]})}),e.jsx("th",{className:"text-center p-4 font-medium",children:"Points"}),e.jsx("th",{className:"text-center p-4 font-medium",children:"Status"}),e.jsx("th",{className:"text-center p-4 font-medium",children:"Actions"})]})}),e.jsx("tbody",{children:r.map(me=>e.jsxs("tr",{className:"border-b hover:bg-muted/30 cursor-pointer",onClick:()=>pt(me),children:[e.jsx("td",{className:"p-4",onClick:ct=>ct.stopPropagation(),children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(Vt,{checked:ve.has(me.id),onCheckedChange:()=>vt(me.id),onClick:ct=>ct.stopPropagation()})})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"max-w-xs",children:[e.jsx("div",{className:"font-medium line-clamp-1",children:me.title||"Untitled Question"}),e.jsx("div",{className:"text-sm text-muted-foreground line-clamp-2 mt-1",children:me.content})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Hs(me.question_type)}}),e.jsx("span",{className:"text-sm",children:ds(me.question_type)})]})}),e.jsx("td",{className:"p-4",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(et,{className:cs(me.difficulty_level),children:me.difficulty_level})})}),e.jsx("td",{className:"p-4",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("span",{className:"text-sm font-medium",children:[me.points||1," pts"]})})}),e.jsx("td",{className:"p-4",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs(At,{value:me.status||"draft",onValueChange:ct=>Le(me.id,ct),onClick:ct=>ct.stopPropagation(),children:[e.jsx(St,{className:`h-7 w-24 text-xs font-semibold rounded-full border-0 shadow-sm hover:shadow-md transition-all duration-200 ${Cs(me.status)}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${me.status==="active"?"bg-green-500":me.status==="draft"?"bg-yellow-500":me.status==="archived"?"bg-gray-600":"bg-gray-500"}`}),e.jsx("span",{children:Fs(me.status)})]})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"draft",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500"}),e.jsx("span",{className:"font-medium",children:"Draft"})]})}),e.jsx(Te,{value:"active",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),e.jsx("span",{className:"font-medium",children:"Active"})]})}),e.jsx(Te,{value:"archived",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-600"}),e.jsx("span",{className:"font-medium",children:"Archived"})]})})]})]})})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",onClick:ct=>ct.stopPropagation(),children:[e.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>pt(me),children:e.jsx(Ss,{className:"h-4 w-4"})}),e.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>rt(me),children:e.jsx(wr,{className:"h-4 w-4"})}),e.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>Tt(me),className:"text-red-600 hover:text-red-700",children:e.jsx(Ds,{className:"h-4 w-4"})})]})})]},me.id))})]})})})}),e.jsx(us,{currentPage:I,totalPages:Nr,onPageChange:D,pageSize:V,onPageSizeChange:H,totalItems:i,itemsLabel:"questions"})]})]}),e.jsx(Ht,{open:Ce||Ee,onOpenChange:me=>{me||(Oe(!1),pe(!1),je({name:"",description:"",parent_id:null,color:"#3B82F6",icon:""}))},children:e.jsxs(Zt,{children:[e.jsxs(Jt,{children:[e.jsx(es,{children:Ce?"Create Category":"Edit Category"}),e.jsx(ps,{children:Ce?"Add a new category to organize questions":"Update category information"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"category_name",children:"Name"}),e.jsx(Ye,{id:"category_name",value:he.name,onChange:me=>je({...he,name:me.target.value}),placeholder:"Enter category name"})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"category_description",children:"Description"}),e.jsx(Ye,{id:"category_description",value:he.description,onChange:me=>je({...he,description:me.target.value}),placeholder:"Enter category description"})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"category_parent",children:"Parent Category"}),e.jsxs(At,{value:he.parent_id||"none",onValueChange:me=>je({...he,parent_id:me==="none"?null:me}),disabled:Ee&&(ae==null?void 0:ae.parent_id)!==null,children:[e.jsx(St,{children:e.jsx(Rt,{placeholder:"Select parent category"})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"none",children:"No Parent (Main Category)"}),bt().map(me=>e.jsx(Te,{value:me.id,children:me.name},me.id))]})]})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"category_color",children:"Color"}),e.jsx(Ye,{id:"category_color",type:"color",value:he.color,onChange:me=>je({...he,color:me.target.value})})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"category_icon",children:"Icon (e.g., smiley, book, star)"}),e.jsx(Ye,{id:"category_icon",value:he.icon,onChange:me=>je({...he,icon:me.target.value}),placeholder:"Enter icon name (e.g., smiley, book, star)"})]})]}),e.jsxs(ir,{children:[e.jsx(ee,{variant:"outline",onClick:()=>{Oe(!1),pe(!1),je({name:"",description:"",parent_id:null,color:"#3B82F6",icon:""})},children:"Cancel"}),e.jsx(ee,{onClick:Ce?Ge:J,children:Ce?"Create":"Update"})]})]})}),e.jsx(Ht,{open:Ae,onOpenChange:st,children:e.jsxs(Zt,{children:[e.jsxs(Jt,{children:[e.jsx(es,{children:"Delete Category"}),e.jsxs(ps,{children:['Are you sure you want to delete "',ae==null?void 0:ae.name,'"? This action cannot be undone.']})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(ee,{variant:"outline",onClick:()=>st(!1),children:"Cancel"}),e.jsx(ee,{variant:"destructive",onClick:ce,children:"Delete"})]})]})}),e.jsx(Ht,{open:ne,onOpenChange:ge,children:e.jsxs(Zt,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Jt,{children:[e.jsxs(es,{className:"flex items-center gap-2",children:[(qe==null?void 0:qe.question_type)==="coding"&&e.jsx(Gr,{className:"h-5 w-5 text-blue-600"}),"Question Details"]}),e.jsxs(ps,{children:["View complete question information",(qe==null?void 0:qe.question_type)==="coding"&&e.jsx("span",{className:"ml-2 text-blue-600 font-medium",children:" Coding Question"})]})]}),qe&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(Re,{children:e.jsx(lt,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-5 h-5 rounded-full",style:{backgroundColor:Hs(qe.question_type)}}),e.jsxs("div",{children:[e.jsx(mt,{className:"text-xl",children:qe.title||"Untitled Question"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:qe.content})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{variant:"outline",className:"text-sm",children:ds(qe.question_type)}),e.jsx(et,{className:`${cs(qe.difficulty_level)} text-sm`,children:qe.difficulty_level}),e.jsx(et,{className:`${Cs(qe.status)} text-sm`,children:Fs(qe.status)})]})]})})}),qe.question_type==="coding"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Re,{children:[e.jsx(lt,{children:e.jsxs(mt,{className:"text-lg flex items-center gap-2",children:[e.jsx(la,{className:"h-5 w-5"}),"Programming Settings"]})}),e.jsx(De,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Se,{className:"text-sm font-medium text-muted-foreground",children:"Language"}),e.jsx("p",{className:"text-sm font-semibold",children:(()=>{const me=qe.metadata||qe.coding_details||{},ct=me.languages||me.language||["javascript"];return Array.isArray(ct)?ct[0]:ct})()})]}),e.jsxs("div",{children:[e.jsx(Se,{className:"text-sm font-medium text-muted-foreground",children:"Points"}),e.jsxs("p",{className:"text-sm font-semibold text-primary",children:[qe.points||1," pts"]})]})]})})]}),e.jsxs(Re,{children:[e.jsx(lt,{children:e.jsxs(mt,{className:"text-lg flex items-center gap-2",children:[e.jsx(Gr,{className:"h-5 w-5"}),"Starter Code"]})}),e.jsx(De,{children:e.jsx("div",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg font-mono text-sm overflow-x-auto",children:e.jsx("pre",{className:"whitespace-pre-wrap",children:(()=>{var As,Cr;const me=qe.metadata||qe.coding_details||{},ct=me.languages||me.language||["javascript"],Ft=Array.isArray(ct)?ct[0]:ct;return((As=me.starter_codes)==null?void 0:As[Ft])||((Cr=me.starterCodes)==null?void 0:Cr[Ft])||me.starter_code||me.starterCode||"// No starter code provided"})()})})})]}),e.jsxs(Re,{children:[e.jsx(lt,{children:e.jsxs(mt,{className:"text-lg flex items-center gap-2",children:[e.jsx(Yt,{className:"h-5 w-5 text-green-600"}),"Solution Code"]})}),e.jsx(De,{children:e.jsx("div",{className:"bg-green-900 text-green-100 p-4 rounded-lg font-mono text-sm overflow-x-auto",children:e.jsx("pre",{className:"whitespace-pre-wrap",children:(()=>{var As,Cr;const me=qe.metadata||qe.coding_details||{},ct=me.languages||me.language||["javascript"],Ft=Array.isArray(ct)?ct[0]:ct;return((As=me.solution_codes)==null?void 0:As[Ft])||((Cr=me.solutionCodes)==null?void 0:Cr[Ft])||me.solution_code||me.solutionCode||"// Solution code not provided"})()})})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Re,{children:[e.jsx(lt,{children:e.jsxs(mt,{className:"text-lg flex items-center gap-2",children:[e.jsx(g1,{className:"h-5 w-5"}),"Test Cases",e.jsxs(et,{variant:"secondary",className:"ml-2",children:[(((hs=qe.metadata)==null?void 0:hs.test_cases)||((Yr=qe.coding_details)==null?void 0:Yr.test_cases)||qe.test_cases||[]).length," cases"]})]})}),e.jsx(De,{children:e.jsxs("div",{className:"space-y-3",children:[(((wn=qe.metadata)==null?void 0:wn.test_cases)||((Sr=qe.coding_details)==null?void 0:Sr.test_cases)||qe.test_cases||[]).map((me,ct)=>e.jsxs("div",{className:"border rounded-lg p-3 bg-muted/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-semibold",children:["Test Case ",ct+1]}),me.hidden&&e.jsx(et,{variant:"outline",className:"text-xs",children:"Hidden"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx(Se,{className:"text-xs text-muted-foreground",children:"Input"}),e.jsx("div",{className:"bg-gray-100 p-2 rounded font-mono text-xs",children:me.input||me.test_input||"No input"})]}),e.jsxs("div",{children:[e.jsx(Se,{className:"text-xs text-muted-foreground",children:"Expected Output"}),e.jsx("div",{className:"bg-green-100 p-2 rounded font-mono text-xs",children:me.output||me.expected_output||"No output"})]})]})]},ct)),!((xr=qe.metadata)!=null&&xr.test_cases)&&!((zr=qe.coding_details)!=null&&zr.test_cases)&&!qe.test_cases&&e.jsxs("div",{className:"text-center py-4 text-muted-foreground",children:[e.jsx(g1,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No test cases defined"})]})]})})]}),qe.explanation&&e.jsxs(Re,{children:[e.jsx(lt,{children:e.jsxs(mt,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ti,{className:"h-5 w-5 text-blue-600"}),"Explanation"]})}),e.jsx(De,{children:e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-blue-800",children:qe.explanation})})})]}),e.jsxs(Re,{children:[e.jsx(lt,{children:e.jsxs(mt,{className:"text-lg flex items-center gap-2",children:[e.jsx(x9,{className:"h-5 w-5"}),"Additional Information"]})}),e.jsxs(De,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Created"}),e.jsx("span",{children:new Date(qe.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Last Updated"}),e.jsx("span",{children:new Date(qe.updated_at||qe.created_at).toLocaleDateString()})]}),((Or=qe.metadata)==null?void 0:Or.category)&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Category"}),e.jsx("span",{children:qe.metadata.category})]}),((Pn=qe.metadata)==null?void 0:Pn.tags)&&qe.metadata.tags.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:qe.metadata.tags.map((me,ct)=>e.jsx(et,{variant:"outline",className:"text-xs",children:me},ct))})]})]})]})]})]}),qe.question_type!=="coding"&&e.jsx(Re,{children:e.jsxs(De,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Question Content"}),e.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:qe.content})]}),qe.options&&Array.isArray(qe.options)&&qe.options.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Options"}),e.jsx("div",{className:"space-y-2",children:qe.options.map((me,ct)=>{const Ft=typeof me=="object"&&me!==null?me.text||me.label||"":me||"",xs=typeof me=="object"&&me!==null&&me.label||String.fromCharCode(65+ct);return e.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-muted/30 rounded",children:[e.jsxs("span",{className:"text-sm font-medium text-primary",children:[xs,"."]}),e.jsx("span",{className:"text-sm",children:Ft})]},ct)})})]}),qe.correct_answer&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Correct Answer"}),e.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded",children:e.jsx("p",{className:"text-sm text-green-700 font-medium",children:Array.isArray(qe.correct_answer)?qe.correct_answer.join(", "):qe.correct_answer})})]}),qe.explanation&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Explanation"}),e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded",children:e.jsx("p",{className:"text-sm text-blue-700",children:qe.explanation})})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(Ps,{className:"h-4 w-4 mr-1"}),qe.time_limit_seconds?`${qe.time_limit_seconds}s`:"No limit"]}),e.jsxs("span",{className:"font-medium text-foreground",children:[qe.points||1," points"]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Created: ",new Date(qe.created_at).toLocaleDateString()]})]})]})})]})]})}),e.jsx(Ht,{open:de,onOpenChange:xe,children:e.jsxs(Zt,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Jt,{children:[e.jsxs(es,{className:"flex items-center gap-2",children:[e.jsx(wr,{className:"h-5 w-5"}),"Edit Question"]}),e.jsx(ps,{children:"Update the question details and content"})]}),qe?e.jsx(Of,{editMode:!0,questionData:qe,onSuccess:()=>{xe(!1),ie(null),kt(),t({title:"Success",description:"Question updated successfully"})}}):e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})]})}),e.jsx(Ht,{open:be,onOpenChange:Ie,children:e.jsxs(Zt,{children:[e.jsxs(Jt,{children:[e.jsx(es,{children:"Delete Question"}),e.jsx(ps,{children:"Are you sure you want to delete this question? This action cannot be undone."})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(ee,{variant:"outline",onClick:()=>Ie(!1),children:"Cancel"}),e.jsx(ee,{variant:"destructive",onClick:le,children:"Delete"})]})]})}),e.jsx(Ht,{open:oe,onOpenChange:_e,children:e.jsxs(Zt,{children:[e.jsxs(Jt,{children:[e.jsx(es,{children:"Delete Selected Questions"}),e.jsxs(ps,{children:["Are you sure you want to delete ",ve.size," question",ve.size>1?"s":"","? This action cannot be undone.",e.jsx("br",{}),e.jsx("span",{className:"text-sm text-muted-foreground mt-2 block",children:"Note: Questions that are used in assessments cannot be deleted and will be skipped."})]})]}),e.jsxs(ir,{children:[e.jsx(ee,{variant:"outline",onClick:()=>_e(!1),disabled:$e,children:"Cancel"}),e.jsx(ee,{variant:"destructive",onClick:gs,disabled:$e,children:$e?"Deleting...":`Delete ${ve.size} Question${ve.size>1?"s":""}`})]})]})}),e.jsx(Ht,{open:Me,onOpenChange:me=>{ze(me),me||(at(null),Qe(null),xt("multiple_choice"))},children:e.jsxs(Zt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Jt,{children:[e.jsx(es,{children:"Bulk Upload Questions"}),e.jsxs(ps,{children:["Upload multiple questions at once using an Excel template. Download the template first, fill it with your questions, then upload it here.",e.jsx("br",{}),e.jsx("span",{className:"text-xs text-muted-foreground mt-2 block",children:"Note: Serial numbers are auto-generated. Title is only required for coding questions."})]})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{children:"Question Type"}),e.jsxs(At,{value:ot,onValueChange:xt,children:[e.jsx(St,{children:e.jsx(Rt,{})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"multiple_choice",children:"Multiple Choice"}),e.jsx(Te,{value:"single_choice",children:"Single Choice"}),e.jsx(Te,{value:"true_false",children:"True/False"}),e.jsx(Te,{value:"short_answer",children:"Short Answer"}),e.jsx(Te,{value:"essay",children:"Essay"}),e.jsx(Te,{value:"coding",children:"Coding"}),e.jsx(Te,{value:"fill_blanks",children:"Fill in the Blanks"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Select the question type to download the appropriate template"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs(ee,{variant:"outline",onClick:Bt,className:"flex-1",children:[e.jsx(Zs,{className:"mr-2 h-4 w-4"}),"Download Template"]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{children:"Upload Excel File"}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(Ye,{type:"file",accept:".xlsx,.xls",onChange:Ut,className:"flex-1"})}),ft&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Os,{className:"h-4 w-4"}),e.jsx("span",{children:ft.name}),e.jsxs("span",{className:"text-xs",children:["(",(ft.size/1024).toFixed(2)," KB)"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Upload the filled Excel template. Each row represents one question."})]})]}),e.jsxs(ir,{children:[e.jsx(ee,{variant:"outline",onClick:()=>{ze(!1),at(null),Fe(null)},children:"Cancel"}),e.jsx(ee,{onClick:Qt,disabled:!ft||re,children:re?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Parsing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ss,{className:"mr-2 h-4 w-4"}),"Preview Questions"]})})]})]})}),e.jsx(Ht,{open:Xe,onOpenChange:me=>{Ve(me),me||Fe(null)},children:e.jsxs(Zt,{className:"max-w-4xl max-h-[90vh] flex flex-col p-0",children:[e.jsxs(Jt,{className:"px-6 pt-6 pb-4 flex-shrink-0",children:[e.jsx(es,{children:"Preview Questions Before Upload"}),e.jsx(ps,{children:"Review the parsed questions below. Only valid questions will be uploaded. Invalid questions will be skipped."})]}),ke&&e.jsxs("div",{className:"flex-1 overflow-y-auto px-6 pb-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-sm font-medium",children:["Total Questions: ",ke.total]}),e.jsxs("p",{className:"text-sm text-green-600",children:["Valid: ",ke.valid]}),ke.invalid>0&&e.jsxs("p",{className:"text-sm text-red-600",children:["Invalid: ",ke.invalid]})]}),e.jsxs(et,{variant:ke.invalid===0?"default":"destructive",children:[ke.valid," / ",ke.total," valid"]})]}),e.jsx("div",{className:"space-y-3",children:ke.questions.map((me,ct)=>{var Ft;return e.jsxs(Re,{className:me.valid?"border-green-200":"border-red-200",children:[e.jsx(lt,{className:"pb-3",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:["Serial #",me.serialNumber," (Row ",me.rowNumber,")"]}),me.valid?e.jsx(et,{variant:"default",className:"bg-green-100 text-green-800",children:"Valid"}):e.jsx(et,{variant:"destructive",children:"Invalid"})]})})}),e.jsxs(De,{className:"space-y-2",children:[me.errors.length>0&&e.jsxs("div",{className:"p-2 bg-red-50 rounded text-sm",children:[e.jsx("p",{className:"font-medium text-red-800 mb-1",children:"Errors:"}),e.jsx("ul",{className:"list-disc list-inside text-red-600 space-y-1",children:me.errors.map((xs,As)=>e.jsx("li",{children:xs},As))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Title:"})," ",me.data.title||"Auto-generated"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Difficulty:"})," ",me.data.difficulty]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Points:"})," ",me.data.points]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Category:"})," ",me.data.categoryName||"None"]}),me.data.subcategoryName&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Subcategory:"})," ",me.data.subcategoryName]}),me.data.tags&&me.data.tags.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Tags:"})," ",me.data.tags.join(", ")]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"font-medium text-sm",children:"Content:"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:me.data.content})]}),(ot==="multiple_choice"||ot==="single_choice")&&me.data.options&&e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsx("span",{className:"font-medium text-sm",children:"Options:"}),e.jsx("div",{className:"space-y-1",children:me.data.options.map((xs,As)=>e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"font-medium",children:[xs.label,":"]})," ",xs.text]},As))}),e.jsxs("div",{className:"mt-1",children:[e.jsx("span",{className:"font-medium text-sm",children:"Correct Answer: "}),ot==="single_choice"?me.data.correctAnswer:(Ft=me.data.correctAnswers)==null?void 0:Ft.join(", ")]})]}),ot==="true_false"&&e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"font-medium text-sm",children:"Correct Answer: "}),me.data.correctAnswer?"TRUE":"FALSE"]}),ot==="short_answer"&&me.data.correctAnswers&&e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"font-medium text-sm",children:"Correct Answers: "}),me.data.correctAnswers.join(", ")]}),ot==="coding"&&e.jsxs("div",{className:"mt-2 space-y-1 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Language:"})," ",me.data.language]}),me.data.testCases&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Test Cases:"})," ",me.data.testCases.length," test case(s)"]})]})]})]},ct)})})]}),e.jsxs(ir,{className:"px-6 py-4 border-t flex-shrink-0",children:[e.jsx(ee,{variant:"outline",onClick:()=>{Ve(!1),Fe(null),ze(!0)},children:"Back"}),e.jsx(ee,{onClick:Gt,disabled:!ke||ke.valid===0||Be,children:Be?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(va,{className:"mr-2 h-4 w-4"}),"Confirm & Upload ",(ke==null?void 0:ke.valid)||0," Question",(ke==null?void 0:ke.valid)!==1?"s":""]})})]})]})})]})};let RU={data:""},PU=t=>{if(typeof window=="object"){let r=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return r.nonce=window.__nonce__,r.parentNode||(t||document.head).appendChild(r),r.firstChild}return t||RU},MU=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,IU=/\/\*[^]*?\*\/|  +/g,c2=/\n+/g,Ci=(t,r)=>{let s="",n="",c="";for(let o in t){let a=t[o];o[0]=="@"?o[1]=="i"?s=o+" "+a+";":n+=o[1]=="f"?Ci(a,o):o+"{"+Ci(a,o[1]=="k"?"":r)+"}":typeof a=="object"?n+=Ci(a,r?r.replace(/([^,])+/g,d=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,d):d?d+" "+l:l)):o):a!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),c+=Ci.p?Ci.p(o,a):o+":"+a+";")}return s+(r&&c?r+"{"+c+"}":c)+n},Ha={},gC=t=>{if(typeof t=="object"){let r="";for(let s in t)r+=s+gC(t[s]);return r}return t},OU=(t,r,s,n,c)=>{let o=gC(t),a=Ha[o]||(Ha[o]=(l=>{let i=0,u=11;for(;i<l.length;)u=101*u+l.charCodeAt(i++)>>>0;return"go"+u})(o));if(!Ha[a]){let l=o!==t?t:(i=>{let u,f,h=[{}];for(;u=MU.exec(i.replace(IU,""));)u[4]?h.shift():u[3]?(f=u[3].replace(c2," ").trim(),h.unshift(h[0][f]=h[0][f]||{})):h[0][u[1]]=u[2].replace(c2," ").trim();return h[0]})(t);Ha[a]=Ci(c?{["@keyframes "+a]:l}:l,s?"":"."+a)}let d=s&&Ha.g?Ha.g:null;return s&&(Ha.g=Ha[a]),((l,i,u,f)=>{f?i.data=i.data.replace(f,l):i.data.indexOf(l)===-1&&(i.data=u?l+i.data:i.data+l)})(Ha[a],r,n,d),a},FU=(t,r,s)=>t.reduce((n,c,o)=>{let a=r[o];if(a&&a.call){let d=a(s),l=d&&d.props&&d.props.className||/^go/.test(d)&&d;a=l?"."+l:d&&typeof d=="object"?d.props?"":Ci(d,""):d===!1?"":d}return n+c+(a??"")},"");function zm(t){let r=this||{},s=t.call?t(r.p):t;return OU(s.unshift?s.raw?FU(s,[].slice.call(arguments,1),r.p):s.reduce((n,c)=>Object.assign(n,c&&c.call?c(r.p):c),{}):s,PU(r.target),r.g,r.o,r.k)}let xC,tx,sx;zm.bind({g:1});let hi=zm.bind({k:1});function LU(t,r,s,n){Ci.p=r,xC=t,tx=s,sx=n}function No(t,r){let s=this||{};return function(){let n=arguments;function c(o,a){let d=Object.assign({},o),l=d.className||c.className;s.p=Object.assign({theme:tx&&tx()},d),s.o=/ *go\d+/.test(l),d.className=zm.apply(s,n)+(l?" "+l:""),r&&(d.ref=a);let i=t;return t[0]&&(i=d.as||t,delete d.as),sx&&i[0]&&sx(d),xC(i,d)}return r?r(c):c}}var DU=t=>typeof t=="function",rx=(t,r)=>DU(t)?t(r):t,$U=(()=>{let t=0;return()=>(++t).toString()})(),BU=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let r=matchMedia("(prefers-reduced-motion: reduce)");t=!r||r.matches}return t}})(),zU=20,yC="default",vC=(t,r)=>{let{toastLimit:s}=t.settings;switch(r.type){case 0:return{...t,toasts:[r.toast,...t.toasts].slice(0,s)};case 1:return{...t,toasts:t.toasts.map(a=>a.id===r.toast.id?{...a,...r.toast}:a)};case 2:let{toast:n}=r;return vC(t,{type:t.toasts.find(a=>a.id===n.id)?1:0,toast:n});case 3:let{toastId:c}=r;return{...t,toasts:t.toasts.map(a=>a.id===c||c===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return r.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==r.toastId)};case 5:return{...t,pausedAt:r.time};case 6:let o=r.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+o}))}}},UU=[],VU={toasts:[],pausedAt:void 0,settings:{toastLimit:zU}},Jl={},bC=(t,r=yC)=>{Jl[r]=vC(Jl[r]||VU,t),UU.forEach(([s,n])=>{s===r&&n(Jl[r])})},wC=t=>Object.keys(Jl).forEach(r=>bC(t,r)),qU=t=>Object.keys(Jl).find(r=>Jl[r].toasts.some(s=>s.id===t)),Ov=(t=yC)=>r=>{bC(r,t)},HU=(t,r="blank",s)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:r,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...s,id:(s==null?void 0:s.id)||$U()}),Au=t=>(r,s)=>{let n=HU(r,t,s);return Ov(n.toasterId||qU(n.id))({type:2,toast:n}),n.id},ut=(t,r)=>Au("blank")(t,r);ut.error=Au("error");ut.success=Au("success");ut.loading=Au("loading");ut.custom=Au("custom");ut.dismiss=(t,r)=>{let s={type:3,toastId:t};r?Ov(r)(s):wC(s)};ut.dismissAll=t=>ut.dismiss(void 0,t);ut.remove=(t,r)=>{let s={type:4,toastId:t};r?Ov(r)(s):wC(s)};ut.removeAll=t=>ut.remove(void 0,t);ut.promise=(t,r,s)=>{let n=ut.loading(r.loading,{...s,...s==null?void 0:s.loading});return typeof t=="function"&&(t=t()),t.then(c=>{let o=r.success?rx(r.success,c):void 0;return o?ut.success(o,{id:n,...s,...s==null?void 0:s.success}):ut.dismiss(n),c}).catch(c=>{let o=r.error?rx(r.error,c):void 0;o?ut.error(o,{id:n,...s,...s==null?void 0:s.error}):ut.dismiss(n)}),t};var WU=hi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,GU=hi`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,KU=hi`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,YU=No("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${WU} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${GU} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${KU} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,QU=hi`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,XU=No("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${QU} 1s linear infinite;
`,ZU=hi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,JU=hi`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,eV=No("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ZU} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${JU} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,tV=No("div")`
  position: absolute;
`,sV=No("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,rV=hi`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,nV=No("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${rV} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,aV=({toast:t})=>{let{icon:r,type:s,iconTheme:n}=t;return r!==void 0?typeof r=="string"?A.createElement(nV,null,r):r:s==="blank"?null:A.createElement(sV,null,A.createElement(XU,{...n}),s!=="loading"&&A.createElement(tV,null,s==="error"?A.createElement(YU,{...n}):A.createElement(eV,{...n})))},iV=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,oV=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,lV="0%{opacity:0;} 100%{opacity:1;}",cV="0%{opacity:1;} 100%{opacity:0;}",dV=No("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,uV=No("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,hV=(t,r)=>{let s=t.includes("top")?1:-1,[n,c]=BU()?[lV,cV]:[iV(s),oV(s)];return{animation:r?`${hi(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${hi(c)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};A.memo(({toast:t,position:r,style:s,children:n})=>{let c=t.height?hV(t.position||r||"top-center",t.visible):{opacity:0},o=A.createElement(aV,{toast:t}),a=A.createElement(uV,{...t.ariaProps},rx(t.message,t));return A.createElement(dV,{className:t.className,style:{...c,...s,...t.style}},typeof n=="function"?n({icon:o,message:a}):A.createElement(A.Fragment,null,o,a))});LU(A.createElement);zm`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;const fV=()=>{var L;const t=Br();qs();const[r,s]=A.useState([]),[n,c]=A.useState(!0),[o,a]=A.useState("list"),[d,l]=A.useState({status:"all",dateFrom:"",dateTo:""}),[i,u]=A.useState(""),[f,h]=A.useState({open:!1,assessmentId:null,attempts:[],loading:!1,assessment:null});A.useEffect(()=>{m()},[d]);const m=async()=>{try{c(!0);const P={};Object.entries(d).forEach(([k,R])=>{R&&R!=="all"&&(P[k]=R)});const B=new URLSearchParams(P).toString(),q=B?`/student-assessments/available?${B}`:"/student-assessments/available",z=await Pe.get(q);s(z.data||[])}catch(P){console.error("Error fetching assessments:",P),ut.error("Error fetching assessments")}finally{c(!1)}},p=(P,B)=>{l(q=>({...q,[P]:B}))},x=P=>{const B=P.status,q={upcoming:{color:"bg-blue-100 text-blue-800",label:"Upcoming"},active:{color:"bg-green-100 text-green-800",label:"Active"},ended:{color:"bg-gray-100 text-gray-800",label:"Ended"},attempted:{color:"bg-purple-100 text-purple-800",label:"Attempted"}},z=q[B]||q.upcoming;return e.jsx(et,{className:z.color,children:z.label})},g=P=>{if(!P)return"N/A";try{return new Date(P).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"N/A"}},v=P=>{if(!P)return"N/A";const B=Math.floor(P/60),q=P%60;return B>0?`${B}h ${q}m`:`${q}m`},y=P=>{const B=P.completed_attempts||0,q=P.attempts_made||0;return P.can_resume||P.can_attempt?B>0?B+1:q+1:B>0?B:q||0},b=P=>{const B=P.scheduling;return B?{start:B.start_date?g(B.start_date):null,end:B.end_date?g(B.end_date):null}:{start:null,end:null}},C=P=>{if(!P.can_attempt&&!P.can_resume){ut.error("You cannot attempt this assessment");return}P.can_retake&&localStorage.setItem(`retake_${P.id}`,"true"),t(`/student/assessments/${P.id}/take`)},T=(P,B=null)=>{t(B?`/student/assessments/${P.id}/results?submission=${B}`:`/student/assessments/${P.id}/results`)},M=async P=>{try{h({open:!0,assessmentId:P.id,attempts:[],loading:!0});const B=await Pe.get(`/student-assessments/${P.id}/attempts`);B.success&&B.data?h({open:!0,assessmentId:P.id,attempts:B.data.attempts||[],assessment:B.data.assessment,loading:!1}):(ut.error("Failed to load previous attempts"),h(q=>({...q,loading:!1})))}catch(B){console.error("Error fetching attempts:",B),ut.error("Failed to load previous attempts"),h(q=>({...q,loading:!1}))}},U=r.filter(P=>{var B,q;return P.title.toLowerCase().includes(i.toLowerCase())||((B=P.description)==null?void 0:B.toLowerCase().includes(i.toLowerCase()))||((q=P.subject)==null?void 0:q.toLowerCase().includes(i.toLowerCase()))});return n?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):e.jsxs("div",{className:"container mx-auto max-w-7xl px-4 py-8   ",children:[e.jsx(Re,{className:"mb-4",children:e.jsx(De,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-800 mb-1 mt-3",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(hn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(Ye,{placeholder:"Search assessments...",value:i,onChange:P=>u(P.target.value),className:"pl-10 h-9 text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-800 mb-1",children:"Status"}),e.jsxs(At,{value:d.status,onValueChange:P=>p("status",P),children:[e.jsx(St,{className:"h-9 text-sm",children:e.jsx(Rt,{placeholder:"All Status"})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"all",children:"All Status"}),e.jsx(Te,{value:"upcoming",children:"Upcoming"}),e.jsx(Te,{value:"active",children:"Active"}),e.jsx(Te,{value:"ended",children:"Ended"}),e.jsx(Te,{value:"attempted",children:"Attempted"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-800 mb-1",children:"Date From"}),e.jsx(Ye,{type:"date",value:d.dateFrom,onChange:P=>p("dateFrom",P.target.value),className:"h-9 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-800 mb-1",children:"Date To"}),e.jsx(Ye,{type:"date",value:d.dateTo,onChange:P=>p("dateTo",P.target.value),className:"h-9 text-sm"})]}),e.jsxs("div",{className:"flex items-center gap-2 justify-start lg:justify-end",children:[e.jsxs(ee,{variant:o==="list"?"default":"outline",onClick:()=>a("list"),className:"h-9 px-3 text-sm",children:[e.jsx(Z_,{className:"h-4 w-4 mr-2"})," List"]}),e.jsxs(ee,{variant:o==="cards"?"default":"outline",onClick:()=>a("cards"),className:"h-9 px-3 text-sm",children:[e.jsx(Q7,{className:"h-4 w-4 mr-2"})," Cards"]})]})]})})}),o==="list"?e.jsx("div",{className:"space-y-4",children:U.length===0?e.jsx("div",{className:"p-6 text-center text-gray-500 bg-white border rounded-lg",children:"No assessments found."}):U.map(P=>{const B=b(P),q=y(P);return e.jsxs(Re,{className:"hover:shadow-md transition-shadow",children:[e.jsx(lt,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-2",children:[e.jsx(mt,{className:"text-lg font-bold text-gray-900 truncate",children:P.title}),x(P),P.proctoring_enabled&&e.jsx(et,{variant:"outline",className:"text-blue-600 border-blue-600 text-xs",children:"Proctored"}),P.password&&e.jsxs(et,{variant:"outline",className:"text-orange-600 border-orange-600 text-xs",children:[e.jsx(Wd,{className:"h-3 w-3 mr-1"})," Password"]})]})}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[P.can_resume?e.jsxs(ee,{onClick:()=>C(P),className:"h-9 px-4 text-sm",children:[e.jsx(ta,{className:"h-4 w-4 mr-1"})," Resume"]}):P.can_attempt?e.jsxs(ee,{onClick:()=>C(P),className:"h-9 px-4 text-sm",children:[e.jsx(ta,{className:"h-4 w-4 mr-1"})," Start"]}):null,(P.has_completed_submissions||P.completed_attempts>0||P.submission_status==="completed"||P.attempts_made>0&&!P.can_resume)&&e.jsxs(ee,{variant:"outline",onClick:()=>T(P),className:"h-9 px-4 text-sm",children:[e.jsx(Ss,{className:"h-4 w-4 mr-1"})," View Results"]})]})]})}),e.jsxs(De,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsx(Re,{className:"bg-blue-50 border-blue-200",children:e.jsx(De,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ps,{className:"h-4 w-4 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Duration"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:v(P.time_limit_minutes||P.duration_minutes)})]})]})})}),e.jsx(Re,{className:"bg-purple-50 border-purple-200",children:e.jsx(De,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(so,{className:"h-4 w-4 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Total Points"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[P.total_points||0," pts"]})]})]})})}),e.jsx(Re,{className:"bg-green-50 border-green-200",children:e.jsx(De,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fr,{className:"h-4 w-4 text-green-600"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Start Time"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:B.start||"N/A"})]})]})})}),e.jsx(Re,{className:"bg-red-50 border-red-200",children:e.jsx(De,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fr,{className:"h-4 w-4 text-red-600"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"End Time"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:B.end||"N/A"})]})]})})})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y0,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Attempt Number:"}),e.jsx(et,{variant:"outline",className:"font-semibold",children:q>0?q:"Not Started"})]}),P.max_attempts&&e.jsxs("span",{className:"text-xs text-gray-500",children:["(Max: ",P.max_attempts," attempts)"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[P.submission_status==="completed"&&e.jsxs(et,{className:"bg-green-100 text-green-800",children:[e.jsx(Yt,{className:"h-3 w-3 mr-1"}),"Completed"]}),P.can_retake&&e.jsxs(et,{className:"bg-blue-100 text-blue-800",children:[e.jsx(Lo,{className:"h-3 w-3 mr-1"}),"Can Retake"]})]})]})]})]},P.id)})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:U.map(P=>{const B=b(P),q=y(P);return e.jsxs(Re,{className:"hover:shadow-lg transition-all duration-200 flex flex-col",children:[e.jsxs(lt,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-3",children:[e.jsx(mt,{className:"text-xl font-bold text-gray-900 line-clamp-2 flex-1",children:P.title}),x(P)]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[P.proctoring_enabled&&e.jsxs(et,{variant:"outline",className:"text-blue-600 border-blue-600 text-xs",children:[e.jsx(Ss,{className:"h-3 w-3 mr-1"})," Proctored"]}),P.password&&e.jsxs(et,{variant:"outline",className:"text-orange-600 border-orange-600 text-xs",children:[e.jsx(Wd,{className:"h-3 w-3 mr-1"})," Password"]})]})]}),e.jsxs(De,{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsx(Re,{className:"bg-blue-50 border-blue-200",children:e.jsx(De,{className:"p-3",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(Ps,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"Duration"})]}),e.jsx("p",{className:"text-sm font-bold text-gray-900",children:v(P.time_limit_minutes||P.duration_minutes)})]})})}),e.jsx(Re,{className:"bg-purple-50 border-purple-200",children:e.jsx(De,{className:"p-3",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(so,{className:"h-4 w-4 text-purple-600"}),e.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"Points"})]}),e.jsxs("p",{className:"text-sm font-bold text-gray-900",children:[P.total_points||0," pts"]})]})})}),e.jsx(Re,{className:"bg-green-50 border-green-200",children:e.jsx(De,{className:"p-3",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(fr,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"Start"})]}),e.jsx("p",{className:"text-xs font-semibold text-gray-900 line-clamp-2",children:B.start||"N/A"})]})})}),e.jsx(Re,{className:"bg-red-50 border-red-200",children:e.jsx(De,{className:"p-3",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(fr,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"End"})]}),e.jsx("p",{className:"text-xs font-semibold text-gray-900 line-clamp-2",children:B.end||"N/A"})]})})})]}),e.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y0,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Attempt:"}),e.jsx(et,{variant:"outline",className:"font-semibold",children:q>0?q:"Not Started"})]}),P.max_attempts&&e.jsxs("span",{className:"text-xs text-gray-500",children:["/ ",P.max_attempts]})]}),P.submission_status==="completed"&&e.jsxs("div",{className:"mt-2 flex items-center gap-1",children:[e.jsx(Yt,{className:"h-3 w-3 text-green-600"}),e.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Completed"})]}),P.can_retake&&e.jsxs("div",{className:"mt-2 flex items-center gap-1",children:[e.jsx(Lo,{className:"h-3 w-3 text-blue-600"}),e.jsx("span",{className:"text-xs text-blue-600 font-medium",children:"Can Retake"})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 mt-auto",children:[P.can_resume?e.jsxs(ee,{onClick:()=>C(P),className:"w-full",children:[e.jsx(ta,{className:"h-4 w-4 mr-2"})," Resume Assessment"]}):P.can_attempt?e.jsxs(ee,{onClick:()=>C(P),className:"w-full",children:[e.jsx(ta,{className:"h-4 w-4 mr-2"})," Start Assessment"]}):null,(P.has_completed_submissions||P.completed_attempts>0||P.submission_status==="completed"||P.attempts_made>0&&!P.can_resume)&&e.jsxs(e.Fragment,{children:[e.jsxs(ee,{variant:"outline",onClick:()=>T(P),className:"w-full",children:[e.jsx(Ss,{className:"h-4 w-4 mr-2"})," View Results"]}),(P.completed_attempts>1||P.max_attempts>1&&P.completed_attempts>0)&&e.jsxs(ee,{variant:"outline",onClick:()=>M(P),className:"w-full",children:[e.jsx(xy,{className:"h-4 w-4 mr-2"})," View Previous Results"]})]})]})]})]},P.id)})}),U.length===0&&!n&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(lr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No assessments found"}),e.jsx("p",{className:"text-gray-600",children:i||Object.values(d).some(P=>P)?"Try adjusting your search or filters":"No assessments are currently available for you"})]}),e.jsx(Ht,{open:f.open,onOpenChange:P=>h(B=>({...B,open:P})),children:e.jsxs(Zt,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Jt,{children:[e.jsx(es,{children:"Previous Attempts"}),e.jsx(ps,{children:((L=f.assessment)==null?void 0:L.title)||"Select an attempt to view detailed results"})]}),f.loading?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"text-gray-500",children:"Loading attempts..."})}):f.attempts.length===0?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"text-gray-500",children:"No previous attempts found"})}):e.jsx("div",{className:"space-y-3 mt-4",children:f.attempts.map(P=>{var B;return e.jsx(Re,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>{T({id:f.assessmentId},P.submission_id),h(q=>({...q,open:!1}))},children:e.jsx(De,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs(et,{variant:"outline",className:"font-semibold",children:["Attempt #",P.attempt_number]}),e.jsx(et,{className:P.status==="submitted"||P.status==="graded"?"bg-green-100 text-green-800":P.status==="in_progress"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800",children:P.status==="submitted"||P.status==="graded"?"Completed":P.status==="in_progress"?"In Progress":P.status})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mt-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Score"}),e.jsx("p",{className:"text-sm font-semibold",children:P.percentage_score!==null&&P.percentage_score!==void 0?`${P.percentage_score.toFixed(1)}%`:P.score!==null&&P.score!==void 0?`${P.score} / ${((B=f.assessment)==null?void 0:B.total_points)||"N/A"}`:"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Time Taken"}),e.jsx("p",{className:"text-sm font-semibold",children:P.time_taken_minutes?`${Math.floor(P.time_taken_minutes)}m ${Math.round(P.time_taken_minutes%1*60)}s`:"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Submitted"}),e.jsx("p",{className:"text-sm font-semibold",children:P.submitted_at?g(P.submitted_at):"Not Submitted"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Started"}),e.jsx("p",{className:"text-sm font-semibold",children:P.started_at?g(P.started_at):g(P.created_at)})]})]})]}),e.jsx("div",{className:"ml-4",children:e.jsx(ee,{variant:"ghost",size:"sm",children:e.jsx(Ss,{className:"h-4 w-4"})})})]})})},P.submission_id)})})]})})]})},mV=({score:t,maxScore:r,percentage:s,passingScore:n,isPassed:c,isAutoSubmitted:o=!1})=>{const a=()=>s>=90?"text-green-600":s>=80?"text-blue-600":s>=70?"text-yellow-600":s>=60?"text-orange-600":"text-red-600",d=()=>s>=95?"Outstanding!":s>=90?"Excellent!":s>=80?"Great job!":s>=70?"Good work!":s>=60?"Not bad!":"Keep trying!",i=(()=>s>=95?{level:"Master",icon:Th,color:"text-purple-600"}:s>=90?{level:"Expert",icon:fu,color:"text-yellow-600"}:s>=80?{level:"Advanced",icon:so,color:"text-blue-600"}:s>=70?{level:"Proficient",icon:t9,color:"text-green-600"}:s>=60?{level:"Developing",icon:ra,color:"text-orange-600"}:{level:"Beginner",icon:lr,color:"text-gray-600"})(),u=i.icon;return e.jsx(Re,{className:`${c?"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20":"border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20"} border-2`,children:e.jsx(De,{className:"p-6 text-center",children:e.jsxs(os.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5,delay:.2},className:"space-y-4",children:[e.jsx("div",{className:"relative inline-block",children:e.jsxs("div",{className:"w-32 h-32 rounded-full border-8 border-gray-200 dark:border-gray-700 flex items-center justify-center relative overflow-hidden",children:[e.jsxs("div",{className:"text-center z-10",children:[e.jsxs("div",{className:`text-4xl font-bold ${a()}`,children:[s.toFixed(1),"%"]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[t.toFixed(1),"/",r.toFixed(1)]})]}),e.jsx("div",{className:"absolute inset-0 rounded-full border-8 border-transparent border-t-green-500 transform rotate-45",style:{background:`conic-gradient(from 0deg, #10b981 0deg ${s/100*360}deg, #e5e7eb ${s/100*360}deg 360deg)`}})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[c?e.jsx(Yt,{className:"h-6 w-6 text-green-600"}):e.jsx(Mr,{className:"h-6 w-6 text-red-600"}),e.jsx("span",{className:`text-xl font-bold ${c?"text-green-600":"text-red-600"}`,children:c?"PASSED":"FAILED"})]}),e.jsx("p",{className:"text-lg font-semibold text-foreground",children:d()}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Passing Score: ",n,"%"]}),o&&e.jsx("div",{className:"mt-3 p-3 bg-orange-100 dark:bg-orange-900/20 border border-orange-300 dark:border-orange-800 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ms,{className:"h-4 w-4 text-orange-600 dark:text-orange-400"}),e.jsx("span",{className:"text-sm text-orange-800 dark:text-orange-200 font-medium",children:"This assessment was automatically submitted when time expired"})]})})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(u,{className:`h-5 w-5 ${i.color}`}),e.jsx("span",{className:`font-semibold ${i.color}`,children:i.level})]})]})})})},pV=({questions:t,totalPoints:r,maxPoints:s,timeTaken:n,timeLimit:c})=>{const o=A.useMemo(()=>{const a=t.reduce((i,u)=>{const f=u.question_type||"multiple_choice";i[f]||(i[f]={count:0,correct:0,points:0,maxPoints:0}),i[f].count++;const h=Number(u.points)||1;return i[f].maxPoints+=h,u.is_correct&&(i[f].correct++,i[f].points+=h),i},{}),d=s>0?r/s*100:0,l=c>0?(c-n)/c*100:0;return{questionTypes:a,overallAccuracy:d,timeEfficiency:l,totalQuestions:t.length,correctQuestions:t.filter(i=>i.is_correct).length}},[t,r,s,n,c]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Re,{children:[e.jsx(lt,{children:e.jsxs(mt,{className:"flex items-center space-x-2",children:[e.jsx(Rr,{className:"h-5 w-5"}),"Overall Performance"]})}),e.jsx(De,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[o.overallAccuracy.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Accuracy"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[o.correctQuestions,"/",o.totalQuestions]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Questions Correct"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:r.toFixed(1)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Points Earned"})]}),e.jsxs("div",{className:"text-center p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:[o.timeEfficiency.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Time Efficiency"})]})]})})]}),e.jsxs(Re,{children:[e.jsx(lt,{children:e.jsxs(mt,{className:"flex items-center space-x-2",children:[e.jsx(a9,{className:"h-5 w-5"}),"Performance by Question Type"]})}),e.jsx(De,{children:e.jsx("div",{className:"space-y-4",children:Object.entries(o.questionTypes).map(([a,d])=>{const l=d.count>0?d.correct/d.count*100:0;return d.maxPoints>0&&d.points/d.maxPoints*100,e.jsxs(os.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium capitalize",children:a.replace("_"," ")}),e.jsxs(et,{variant:"outline",children:[d.count," questions"]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[d.points.toFixed(1),"/",d.maxPoints.toFixed(1)," points"]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Accuracy"}),e.jsxs("span",{children:[l.toFixed(1),"%"]})]}),e.jsx(co,{value:l,className:"h-2"})]})]},a)})})})]}),e.jsxs(Re,{children:[e.jsx(lt,{children:e.jsxs(mt,{className:"flex items-center space-x-2",children:[e.jsx(Ps,{className:"h-5 w-5"}),"Time Analysis"]})}),e.jsx(De,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[Math.floor(n/60),":",(n%60).toString().padStart(2,"0")]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Time Used"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[Math.floor(c/60),":",(c%60).toString().padStart(2,"0")]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Time Limit"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:[o.timeEfficiency.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Efficiency"})]})]})})]})]})},gV=({question:t,userAnswer:r,correctAnswer:s,isCorrect:n,points:c,maxPoints:o,questionNumber:a})=>{var h;const[d,l]=A.useState(!1),i=m=>{switch(m){case"multiple_choice":return e.jsx(y0,{className:"h-4 w-4"});case"true_false":return e.jsx(Yt,{className:"h-4 w-4"});case"short_answer":return e.jsx(Os,{className:"h-4 w-4"});case"essay":return e.jsx(Os,{className:"h-4 w-4"});case"coding":return e.jsx(Gr,{className:"h-4 w-4"});default:return e.jsx(Os,{className:"h-4 w-4"})}},u=m=>{switch(m){case"multiple_choice":return"text-blue-600 dark:text-blue-400 bg-blue-100 dark:bg-blue-900/20";case"true_false":return"text-green-600 dark:text-green-400 bg-green-100 dark:bg-green-900/20";case"short_answer":return"text-orange-600 dark:text-orange-400 bg-orange-100 dark:bg-orange-900/20";case"essay":return"text-purple-600 dark:text-purple-400 bg-purple-100 dark:bg-purple-900/20";case"coding":return"text-green-600 dark:text-green-400 bg-green-100 dark:bg-green-900/20";default:return"text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-900/20"}},f=()=>!t.options||!Array.isArray(t.options)?null:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h5",{className:"font-medium text-sm mb-2",children:"Options:"}),t.options.map((m,p)=>{const x=r===m,g=s===m;let v="p-3 rounded-lg border";return x&&g?v+=" bg-green-100 dark:bg-green-900/20 border-green-300 dark:border-green-700 text-green-800 dark:text-green-200":x&&!g?v+=" bg-red-100 dark:bg-red-900/20 border-red-300 dark:border-red-700 text-red-800 dark:text-red-200":g?v+=" bg-green-100 dark:bg-green-900/20 border-green-300 dark:border-green-700 text-green-800 dark:text-green-200":v+=" bg-muted border-border text-foreground",e.jsx("div",{className:v,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"font-medium",children:[String.fromCharCode(65+p),"."]}),e.jsx("span",{children:m}),x&&g&&e.jsx(Yt,{className:"h-4 w-4 text-green-600 ml-auto"}),x&&!g&&e.jsx(Mr,{className:"h-4 w-4 text-red-600 ml-auto"}),!x&&g&&e.jsx(Yt,{className:"h-4 w-4 text-green-600 ml-auto"})]})},p)})]});return e.jsx(os.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:e.jsx(Re,{className:`${n?"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20":"border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20"}`,children:e.jsx(De,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[n?e.jsx(Yt,{className:"h-5 w-5 text-green-600"}):e.jsx(Mr,{className:"h-5 w-5 text-red-600"}),e.jsx(et,{variant:n?"default":"destructive",children:n?"Correct":"Incorrect"}),e.jsxs(et,{className:u(t.question_type),children:[i(t.question_type),e.jsx("span",{className:"ml-1",children:(h=t.question_type)==null?void 0:h.replace("_"," ").toUpperCase()})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[c,"/",o," points"]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-2",children:["Question ",a,":"]}),e.jsx("div",{className:"p-3 bg-card border border-border rounded-lg",children:e.jsx("p",{className:"text-foreground whitespace-pre-wrap",children:t.question_text})})]}),t.question_type==="multiple_choice"&&f(),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-sm mb-2",children:"Your Answer:"}),e.jsx("div",{className:`p-3 rounded-lg ${n?"bg-green-100 dark:bg-green-900/20 border border-green-300 dark:border-green-700":"bg-red-100 dark:bg-red-900/20 border border-red-300 dark:border-red-700"}`,children:e.jsx("span",{className:"text-sm whitespace-pre-wrap",children:r||"No answer provided"})})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-sm mb-2",children:"Correct Answer:"}),e.jsx("div",{className:"p-3 rounded-lg bg-green-100 dark:bg-green-900/20 border border-green-300 dark:border-green-700",children:e.jsx("span",{className:"text-sm whitespace-pre-wrap",children:s||"Not available"})})]}),t.explanation&&e.jsxs("div",{children:[e.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>l(!d),className:"w-full",children:[e.jsx(Ti,{className:"h-4 w-4 mr-2"}),d?"Hide":"Show"," Explanation"]}),e.jsx(dv,{children:d&&e.jsx(os.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 whitespace-pre-wrap",children:t.explanation})})})]})]})})})})},xV=()=>{var N;const{assessmentId:t}=dy(),r=Br(),[s]=tm(),{user:n}=qs(),{toast:c}=Js(),[o,a]=A.useState(null),[d,l]=A.useState(null),[i,u]=A.useState([]),[f,h]=A.useState(!0),[m,p]=A.useState("overview"),[x,g]=A.useState(null),[v,y]=A.useState(!1),[b,C]=A.useState(!1),[T,M]=A.useState(null);A.useEffect(()=>{L(),U()},[t]);const U=async()=>{try{y(!0);const E=await Pe.getAssessmentAttemptsHistory(t);E.success&&g(E.data)}catch(E){console.error("Error loading attempts history:",E)}finally{y(!1)}},L=async()=>{try{h(!0);const E=await Pe.getAssessmentInstances({student_id:n.id,assessment_id:t});E.success&&E.data.length>0&&a(E.data[0]);const I=s.get("submission");if(I){const D=await Pe.get(`/student-assessments/${I}/results`);D.success&&(l(D.data),u(D.data.answers||D.data.questions||[]),C(D.data.autoSubmitted||!1))}else{const D=await Pe.getAssessmentResults(t,n.id);D.success&&(l(D.data),u(D.data.questions||[]),C(D.data.autoSubmitted||!1))}}catch(E){console.error("Error loading results:",E),M({message:E.message||"Failed to load assessment results",isFallback:!1,canRetry:!0}),c({variant:"destructive",title:"Error Loading Results",description:E.message||"Failed to load assessment results. Please try again or contact support."})}finally{h(!1)}},P=E=>{const I=Math.floor(E/60),D=E%60;return I>0?`${I}h ${D}m`:`${D}m`},B=E=>new Date(E).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});if(f)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading results..."})]})});if(T&&!T.canRetry)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs(Re,{className:"max-w-md",children:[e.jsx(lt,{children:e.jsxs(mt,{className:"flex items-center gap-2 text-red-600",children:[e.jsx(Ms,{className:"h-5 w-5"}),"Error Loading Results"]})}),e.jsxs(De,{children:[e.jsx(pr,{variant:"destructive",children:e.jsx(gr,{children:T.message||"Failed to load assessment results"})}),T.isFallback&&e.jsxs(pr,{className:"mt-4",children:[e.jsx(Ti,{className:"h-4 w-4"}),e.jsx(gr,{children:"Note: Results shown may be calculated from cached data. Please refresh for accurate results."})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs(ee,{onClick:()=>{M(null),L()},variant:"outline",children:[e.jsx(Is,{className:"h-4 w-4 mr-2"}),"Retry"]}),e.jsx(ee,{onClick:()=>r("/student/assessments"),children:"Back to Assessments"})]})]})]})});if(!o||!d)return!f&&!T?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(Re,{className:"w-full max-w-md text-center",children:e.jsxs(De,{className:"pt-6",children:[e.jsx(Ms,{className:"h-16 w-16 text-red-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Results Not Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Assessment results could not be loaded."}),e.jsx(ee,{onClick:()=>r("/student/assessments"),children:"Back to Assessments"})]})})}):null;const q=E=>{if(typeof E=="string"){const I=E.match(/(\d+\.?\d*)/);return I?parseFloat(I[1]):0}return parseFloat(E)||0},z=q(d.score),k=q(d.total_points)||q(o.total_points),R=q(d.percentage_score)||(k>0?z/k*100:0),S=o.passing_score||70,w=R>=S,_=d.time_taken_minutes||0,j=o.time_limit_minutes||0;return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("div",{className:"bg-card border-b",children:e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>r("/student/assessments"),children:[e.jsx(oa,{className:"h-4 w-4 mr-1"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:o.title}),e.jsx("p",{className:"text-muted-foreground",children:"Assessment Results"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(ee,{variant:"outline",size:"sm",children:[e.jsx(Zs,{className:"h-4 w-4 mr-2"}),"Export"]}),e.jsxs(ee,{variant:"outline",size:"sm",children:[e.jsx(u9,{className:"h-4 w-4 mr-2"}),"Share"]})]})]})})}),e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsx(mV,{score:z,maxScore:k,percentage:R,passingScore:S,isPassed:w,isAutoSubmitted:b}),e.jsxs(Re,{className:"mt-6",children:[e.jsx(lt,{className:"pb-3",children:e.jsx(mt,{className:"text-base",children:"Assessment Details"})}),e.jsx(De,{className:"space-y-3",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Type:"}),e.jsx("span",{className:"font-medium capitalize",children:(N=o.assessment_type)==null?void 0:N.replace("_"," ")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Duration:"}),e.jsx("span",{className:"font-medium",children:P(j)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Completed:"}),e.jsx("span",{className:"font-medium",children:B(d.submitted_at)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Time Used:"}),e.jsx("span",{className:"font-medium",children:P(_)})]})]})})]}),x&&e.jsxs(Re,{className:"mt-6",children:[e.jsx(lt,{className:"pb-3",children:e.jsxs(mt,{className:"text-base flex items-center space-x-2",children:[e.jsx(xy,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{children:"Attempts"})]})}),e.jsxs(De,{className:"space-y-3",children:[e.jsx("div",{className:"space-y-2",children:x.attempts.map((E,I)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"font-medium",children:["#",E.attempt_number,":"]}),e.jsxs("span",{className:"text-muted-foreground",children:[E.percentage_score,"%  ",E.time_taken_minutes,"m"]})]}),e.jsx("span",{className:"text-muted-foreground",children:new Date(E.submitted_at).toLocaleDateString()})]},E.id))}),x.can_retake&&e.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded",children:[e.jsxs("div",{className:"text-sm text-green-700 dark:text-green-300 mb-2",children:[e.jsx("strong",{children:"Can retake!"})," Next: ",x.next_attempt_number,x.assessment.max_attempts&&e.jsxs("span",{children:["/",x.assessment.max_attempts]})]}),e.jsxs(ee,{onClick:async()=>{try{localStorage.setItem(`retake_${t}`,"true"),console.log("Retake flag set:",`retake_${t}`);const E=await Pe.retakeAssessment(t);if(E.success)c({title:"Assessment Taking Unavailable",description:"Assessment taking functionality has been temporarily disabled.",duration:3e3}),r("/student/assessments");else throw new Error(E.message||"Failed to start retake")}catch(E){localStorage.removeItem(`retake_${t}`),console.error("Error starting retake:",E),c({title:"Retake Failed",description:E.message||"Failed to start assessment retake",variant:"destructive",duration:5e3})}},size:"sm",className:"w-full bg-green-600 hover:bg-green-700",children:[e.jsx(ta,{className:"mr-1 h-3 w-3"}),"Retake"]})]})]})]})]}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(Dr,{value:m,onValueChange:p,children:[e.jsxs(Ir,{className:"grid w-full grid-cols-3",children:[e.jsx(zt,{value:"overview",children:"Overview"}),e.jsx(zt,{value:"questions",children:"Question Review"}),e.jsx(zt,{value:"analytics",children:"Analytics"})]}),e.jsx(Kt,{value:"overview",className:"space-y-6",children:e.jsxs(os.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs(Re,{children:[e.jsx(lt,{children:e.jsxs(mt,{className:"flex items-center space-x-2",children:[e.jsx(Nc,{className:"h-5 w-5"}),"Performance Summary"]})}),e.jsx(De,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Questions:"}),e.jsx("span",{className:"font-medium",children:i.length||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Score:"}),e.jsxs("span",{className:"font-medium text-green-600 dark:text-green-400",children:[z.toFixed(1),"/",k.toFixed(1)]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Accuracy:"}),e.jsxs("span",{className:"font-medium",children:[R.toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Time Used:"}),e.jsx("span",{className:"font-medium",children:P(_)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Time Limit:"}),e.jsx("span",{className:"font-medium",children:P(j)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Status:"}),e.jsx("span",{className:`font-medium ${w?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:w?"Passed":"Failed"})]})]})]})})]}),e.jsxs(Re,{children:[e.jsx(lt,{children:e.jsxs(mt,{className:"flex items-center space-x-2",children:[e.jsx(X7,{className:"h-5 w-5"}),"Recommendations"]})}),e.jsx(De,{children:e.jsxs("div",{className:"space-y-3",children:[w?e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Yt,{className:"h-5 w-5 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-800 dark:text-green-200",children:"Great job!"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"You've successfully passed this assessment."})]})]}):e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Ms,{className:"h-5 w-5 text-orange-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-orange-800 dark:text-orange-200",children:"Areas for improvement"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Review wrong questions and focus on those topics."})]})]}),R<80&&e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(lr,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-800 dark:text-blue-200",children:"Study suggestions"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Review course materials and practice similar questions."})]})]}),R>=90&&e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(fu,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-yellow-800 dark:text-yellow-200",children:"Outstanding performance!"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"You achieved an excellent score. Keep up the great work!"})]})]})]})})]})]})}),e.jsx(Kt,{value:"questions",className:"space-y-6",children:e.jsx(os.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx("div",{className:"space-y-4",children:i.map((E,I)=>e.jsx(gV,{question:E,userAnswer:E.user_answer,correctAnswer:E.correct_answer,isCorrect:E.is_correct,points:E.is_correct?E.points||1:0,maxPoints:E.points||1,questionNumber:I+1},E.id))})})}),e.jsx(Kt,{value:"analytics",className:"space-y-6",children:e.jsx(os.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(pV,{questions:i,totalPoints:z,maxPoints:k,timeTaken:_,timeLimit:j})})})]})})]})})]})};class yV{constructor(){this.storageKey="lms_export_history",this.maxHistoryItems=50}getExportHistory(){try{const r=localStorage.getItem(this.storageKey);return r?JSON.parse(r):[]}catch(r){return console.error("Error loading export history:",r),[]}}addExportToHistory(r){try{const s=this.getExportHistory(),n={id:Date.now().toString(),timestamp:new Date().toISOString(),filename:r.filename,type:r.type,assessmentName:r.assessmentName,collegeName:r.collegeName,recordCount:r.recordCount,fileSize:r.fileSize,settings:r.settings};return s.unshift(n),s.length>this.maxHistoryItems&&s.splice(this.maxHistoryItems),localStorage.setItem(this.storageKey,JSON.stringify(s)),n}catch(s){return console.error("Error saving export history:",s),null}}removeExportFromHistory(r){try{const n=this.getExportHistory().filter(c=>c.id!==r);return localStorage.setItem(this.storageKey,JSON.stringify(n)),!0}catch(s){return console.error("Error removing export from history:",s),!1}}clearExportHistory(){try{return localStorage.removeItem(this.storageKey),!0}catch(r){return console.error("Error clearing export history:",r),!1}}getExportTemplates(){try{const r=localStorage.getItem("lms_export_templates");return r?JSON.parse(r):[]}catch(r){return console.error("Error loading export templates:",r),[]}}saveExportTemplate(r){try{const s=this.getExportTemplates(),n={id:Date.now().toString(),name:r.name,description:r.description,timestamp:new Date().toISOString(),columns:r.columns,filters:r.filters,settings:r.settings};return s.push(n),localStorage.setItem("lms_export_templates",JSON.stringify(s)),n}catch(s){return console.error("Error saving export template:",s),null}}loadExportTemplate(r){try{return this.getExportTemplates().find(n=>n.id===r)||null}catch(s){return console.error("Error loading export template:",s),null}}deleteExportTemplate(r){try{const n=this.getExportTemplates().filter(c=>c.id!==r);return localStorage.setItem("lms_export_templates",JSON.stringify(n)),!0}catch(s){return console.error("Error deleting export template:",s),!1}}getExportStatistics(){try{const r=this.getExportHistory(),s=this.getExportTemplates(),n={totalExports:r.length,totalTemplates:s.length,exportsByType:{},exportsByMonth:{},totalRecordsExported:0,averageFileSize:0};return r.forEach(c=>{n.exportsByType[c.type]=(n.exportsByType[c.type]||0)+1;const o=new Date(c.timestamp).toISOString().slice(0,7);n.exportsByMonth[o]=(n.exportsByMonth[o]||0)+1,n.totalRecordsExported+=c.recordCount||0,n.averageFileSize+=c.fileSize||0}),r.length>0&&(n.averageFileSize=Math.round(n.averageFileSize/r.length)),n}catch(r){return console.error("Error calculating export statistics:",r),{totalExports:0,totalTemplates:0,exportsByType:{},exportsByMonth:{},totalRecordsExported:0,averageFileSize:0}}}formatFileSize(r){if(r===0)return"0 Bytes";const s=1024,n=["Bytes","KB","MB","GB"],c=Math.floor(Math.log(r)/Math.log(s));return parseFloat((r/Math.pow(s,c)).toFixed(2))+" "+n[c]}formatTimestamp(r){return new Date(r).toLocaleString()}}const yi=new yV,vV=({isOpen:t,onClose:r,assessmentData:s,submissions:n,onExport:c})=>{A.useState("regular");const[o,a]=A.useState({}),[d,l]=A.useState({}),[i,u]=A.useState({fileFormat:"xlsx",includeCharts:!0,includeSummary:!0,colorCode:!0,customFilename:"",includeTimestamp:!0}),[f,h]=A.useState(!1),[m,p]=A.useState(0),[x,g]=A.useState([]),[v,y]=A.useState([]),[b,C]=A.useState([]),T={studentInfo:[{key:"studentIdNumber",label:"Student ID Number",default:!0},{key:"studentName",label:"Student Name",default:!0},{key:"emailId",label:"Email ID",default:!0},{key:"phoneNumber",label:"Phone Number",default:!1},{key:"avatarUrl",label:"Avatar URL",default:!1},{key:"isActive",label:"Is Active",default:!1},{key:"emailVerified",label:"Email Verified",default:!1}],academicInfo:[{key:"department",label:"Department",default:!0},{key:"batch",label:"Batch",default:!0},{key:"admissionType",label:"Admission Type (Regular/Lateral)",default:!1},{key:"joiningYear",label:"Joining Year",default:!1},{key:"finalYear",label:"Final Year",default:!1},{key:"currentYear",label:"Current Year",default:!1},{key:"yearStartDate",label:"Year Start Date",default:!1}],collegeInfo:[{key:"collegeName",label:"College Name",default:!0},{key:"collegeCode",label:"College Code",default:!1},{key:"collegeAddress",label:"College Address",default:!1},{key:"collegeCity",label:"College City",default:!1},{key:"collegeState",label:"College State",default:!1},{key:"collegeCountry",label:"College Country",default:!1},{key:"collegePhone",label:"College Phone",default:!1},{key:"collegeEmail",label:"College Email",default:!1},{key:"collegeWebsite",label:"College Website",default:!1}],assessmentDetails:[{key:"assessmentId",label:"Assessment ID",default:!1},{key:"assessmentTitle",label:"Assessment Title",default:!0},{key:"assessmentType",label:"Assessment Type",default:!0},{key:"assessmentCategory",label:"Assessment Category",default:!1},{key:"difficultyLevel",label:"Difficulty Level",default:!1},{key:"totalPoints",label:"Total Points",default:!0},{key:"durationMinutes",label:"Duration (Minutes)",default:!1},{key:"startTime",label:"Start Time",default:!1},{key:"endTime",label:"End Time",default:!1},{key:"passingScore",label:"Passing Score",default:!1},{key:"maxAttempts",label:"Max Attempts",default:!1},{key:"isTimed",label:"Is Timed",default:!1},{key:"allowRetake",label:"Allow Retake",default:!1}],submissionDetails:[{key:"submissionId",label:"Submission ID",default:!1},{key:"submittedAt",label:"Submitted At",default:!0},{key:"startedAt",label:"Started At",default:!1},{key:"gradedAt",label:"Graded At",default:!1},{key:"gradedBy",label:"Graded By",default:!1},{key:"timeTakenMinutes",label:"Time Taken (Minutes)",default:!0},{key:"attemptNumber",label:"Attempt Number",default:!0},{key:"submissionStatus",label:"Submission Status",default:!0},{key:"ipAddress",label:"IP Address",default:!1},{key:"userAgent",label:"User Agent",default:!1}],performanceMetrics:[{key:"score",label:"Score (Points)",default:!0},{key:"maxScore",label:"Max Score (Points)",default:!0},{key:"percentageScore",label:"Percentage Score",default:!0},{key:"correctAnswers",label:"Correct Answers",default:!1},{key:"totalQuestions",label:"Total Questions",default:!1},{key:"feedback",label:"Feedback",default:!1},{key:"performanceLevel",label:"Performance Level",default:!0}],questionTypeBreakdown:[{key:"multipleChoiceMarks",label:"Multiple Choice Marks",default:!1},{key:"trueFalseMarks",label:"True/False Marks",default:!1},{key:"shortAnswerMarks",label:"Short Answer Marks",default:!1},{key:"essayMarks",label:"Essay Marks",default:!1},{key:"codingMarks",label:"Coding Marks",default:!1},{key:"fillBlanksMarks",label:"Fill Blanks Marks",default:!1},{key:"matchingMarks",label:"Matching Marks",default:!1},{key:"orderingMarks",label:"Ordering Marks",default:!1},{key:"fileUploadMarks",label:"File Upload Marks",default:!1}],attendanceInfo:[{key:"attendanceStatus",label:"Attendance Status (Present/Absent)",default:!0},{key:"lateSubmission",label:"Late Submission",default:!1},{key:"disqualified",label:"Disqualified",default:!1}],additionalAnalytics:[{key:"createdAt",label:"Created At",default:!1},{key:"updatedAt",label:"Updated At",default:!1},{key:"isPublished",label:"Is Published",default:!1},{key:"isActive",label:"Is Active",default:!1}]},M={studentFilters:[{key:"allStudents",label:"All Students",default:!0},{key:"presentStudents",label:"Present Students Only (Submitted/Graded)",default:!1},{key:"absentStudents",label:"Absent Students Only (Not Submitted)",default:!1},{key:"byDepartment",label:"By Department",default:!1},{key:"byBatch",label:"By Batch",default:!1},{key:"byAdmissionType",label:"By Admission Type (Regular/Lateral)",default:!1},{key:"byJoiningYear",label:"By Joining Year",default:!1},{key:"byCurrentYear",label:"By Current Year",default:!1},{key:"activeStudentsOnly",label:"Active Students Only",default:!1},{key:"emailVerifiedOnly",label:"Email Verified Students Only",default:!1}],performanceFilters:[{key:"byPerformanceRange",label:"By Performance Range",default:!1},{key:"byPerformanceLevel",label:"By Performance Level",default:!1},{key:"byAttemptNumber",label:"By Attempt Number",default:!1},{key:"bySubmissionStatus",label:"By Submission Status",default:!1},{key:"lateSubmissionsOnly",label:"Late Submissions Only",default:!1},{key:"firstAttemptOnly",label:"First Attempt Only",default:!1},{key:"disqualifiedOnly",label:"Disqualified Students Only",default:!1},{key:"gradedSubmissionsOnly",label:"Graded Submissions Only",default:!1}],assessmentFilters:[{key:"byAssessmentType",label:"By Assessment Type",default:!1},{key:"byAssessmentCategory",label:"By Assessment Category",default:!1},{key:"byDifficultyLevel",label:"By Difficulty Level",default:!1},{key:"byDateRange",label:"By Date Range",default:!1},{key:"byTimeRange",label:"By Time Range",default:!1},{key:"byDurationRange",label:"By Duration Range",default:!1},{key:"timedAssessmentsOnly",label:"Timed Assessments Only",default:!1},{key:"retakeAllowedOnly",label:"Retake Allowed Only",default:!1},{key:"publishedAssessmentsOnly",label:"Published Assessments Only",default:!1}],collegeFilters:[{key:"byCollege",label:"By College",default:!1},{key:"byCollegeCity",label:"By College City",default:!1},{key:"byCollegeState",label:"By College State",default:!1},{key:"byCollegeCountry",label:"By College Country",default:!1}]};A.useEffect(()=>{const k={};Object.values(T).forEach(S=>{S.forEach(w=>{k[w.key]=w.default})}),a(k);const R={};Object.values(M).forEach(S=>{S.forEach(w=>{R[w.key]=w.default})}),l(R),y(yi.getExportHistory()),C(yi.getExportTemplates())},[]),A.useEffect(()=>{if(n&&n.length>0){const k=n.slice(0,5).map(R=>({rollNumber:R.student_id_number||"N/A",studentName:R.student_name||"N/A",emailId:R.student_email||"N/A",department:R.department_name||"N/A",batch:R.batch||"N/A",percentage:R.score||0,attendanceStatus:R.status==="submitted"?"Present":"Absent"}));g(k)}},[n,o,d]);const U=(k,R)=>{a(S=>({...S,[k]:R}))},L=(k,R)=>{l(S=>({...S,[k]:R}))},P=async(k="regular")=>{h(!0),p(0);try{const R={type:k,columns:o,filters:d,settings:i,assessmentData:s,submissions:n},S=setInterval(()=>{p(_=>_>=90?(clearInterval(S),90):_+10)},200);await c(R);const w={filename:B(),type:k,assessmentName:(s==null?void 0:s.title)||"Unknown Assessment",collegeName:(s==null?void 0:s.college_name)||"Unknown College",recordCount:(n==null?void 0:n.length)||0,fileSize:0,settings:i};yi.addExportToHistory(w),y(yi.getExportHistory()),p(100),setTimeout(()=>{h(!1),p(0),r()},1e3)}catch(R){console.error("Export failed:",R),h(!1),p(0)}},B=()=>{var w,_;const k=((w=s==null?void 0:s.title)==null?void 0:w.replace(/[^a-zA-Z0-9]/g,"_"))||"Assessment",R=((_=s==null?void 0:s.college_name)==null?void 0:_.replace(/[^a-zA-Z0-9]/g,"_"))||"College",S=new Date().toISOString().slice(0,19).replace(/[:-]/g,"");return i.customFilename?`${i.customFilename}_${S}`:`${k}_${R}_${S}`},q=()=>Object.values(o).filter(Boolean).length,z=()=>Object.values(d).filter(Boolean).length;return e.jsx(Ht,{open:t,onOpenChange:r,children:e.jsxs(Zt,{className:"max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsx(Jt,{className:"flex-shrink-0",children:e.jsxs(es,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Zs,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:"Enhanced Export Options"})]}),e.jsx(ee,{variant:"ghost",size:"sm",onClick:r,children:e.jsx(Dn,{className:"h-4 w-4"})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs(Dr,{defaultValue:"quick",className:"w-full",children:[e.jsxs(Ir,{className:"grid w-full grid-cols-3",children:[e.jsx(zt,{value:"quick",children:"Quick Export"}),e.jsx(zt,{value:"advanced",children:"Advanced Export"}),e.jsx(zt,{value:"history",children:"Export History"})]}),e.jsxs(Kt,{value:"quick",className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Quick Export"}),e.jsx("p",{className:"text-blue-700 text-sm mb-4",children:"Export with dynamic columns based on assessment question types. Includes:"}),e.jsxs("ul",{className:"text-blue-700 text-sm mb-4 list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Roll Number, Name, Email ID, Department, Batch"}),e.jsx("li",{children:"Dynamic assessment marks columns (MCQ, Coding, Descriptive, etc.)"}),e.jsx("li",{children:"Total Marks, Percentage"}),e.jsx("li",{children:"All students (present and absent) sorted by percentage"}),e.jsx("li",{children:"Performance distribution charts"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-blue-600",children:[e.jsx("strong",{children:(n==null?void 0:n.length)||0})," students ",e.jsxs("strong",{children:[" ",(s==null?void 0:s.title)||"Assessment"]})]}),e.jsx(ee,{onClick:()=>P("regular"),disabled:f,className:"bg-blue-600 hover:bg-blue-700",children:f?e.jsxs(e.Fragment,{children:[e.jsx(Tr,{className:"h-4 w-4 mr-2 animate-spin"}),"Exporting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Zs,{className:"h-4 w-4 mr-2"}),"Quick Export"]})})]})]}),f&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Export Progress"}),e.jsxs("span",{children:[m,"%"]})]}),e.jsx(co,{value:m,className:"w-full"})]})]}),e.jsxs(Kt,{value:"advanced",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-semibold flex items-center",children:[e.jsx(la,{className:"h-4 w-4 mr-2"}),"Select Data Columns (",q(),")"]}),Object.entries(T).map(([k,R])=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm text-gray-700 capitalize",children:k.replace(/([A-Z])/g," $1").trim()}),e.jsx("div",{className:"space-y-1 pl-4",children:R.map(S=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:S.key,checked:o[S.key]||!1,onCheckedChange:w=>U(S.key,w)}),e.jsx(Se,{htmlFor:S.key,className:"text-sm",children:S.label})]},S.key))})]},k))]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-semibold flex items-center",children:[e.jsx(Ss,{className:"h-4 w-4 mr-2"}),"Apply Filters (",z(),")"]}),Object.entries(M).map(([k,R])=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm text-gray-700 capitalize",children:k.replace(/([A-Z])/g," $1").trim()}),e.jsx("div",{className:"space-y-1 pl-4",children:R.map(S=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:S.key,checked:d[S.key]||!1,onCheckedChange:w=>L(S.key,w)}),e.jsx(Se,{htmlFor:S.key,className:"text-sm",children:S.label})]},S.key))})]},k))]})]}),e.jsx(xc,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold",children:"Export Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{children:"File Format"}),e.jsxs(At,{value:i.fileFormat,onValueChange:k=>u(R=>({...R,fileFormat:k})),children:[e.jsx(St,{children:e.jsx(Rt,{})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"xlsx",children:"Excel (.xlsx)"}),e.jsx(Te,{value:"csv",children:"CSV (.csv)"}),e.jsx(Te,{value:"pdf",children:"PDF (.pdf)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{children:"Custom Filename"}),e.jsx(Ye,{placeholder:"Enter custom filename",value:i.customFilename,onChange:k=>u(R=>({...R,customFilename:k.target.value}))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"includeCharts",checked:i.includeCharts,onCheckedChange:k=>u(R=>({...R,includeCharts:k}))}),e.jsx(Se,{htmlFor:"includeCharts",children:"Include Charts and Graphs"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"includeSummary",checked:i.includeSummary,onCheckedChange:k=>u(R=>({...R,includeSummary:k}))}),e.jsx(Se,{htmlFor:"includeSummary",children:"Include Summary Statistics"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{id:"colorCode",checked:i.colorCode,onCheckedChange:k=>u(R=>({...R,colorCode:k}))}),e.jsx(Se,{htmlFor:"colorCode",children:"Color Code Performance Levels"})]})]})]}),e.jsx(xc,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold",children:"Preview"}),e.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:["Filename: ",e.jsxs("code",{className:"bg-gray-100 px-2 py-1 rounded",children:[B(),".",i.fileFormat]})]}),e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 p-2 text-xs font-medium",children:"Preview (First 5 records)"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsx("tr",{children:Object.entries(o).filter(([k,R])=>R).slice(0,6).map(([k,R])=>{var S,w,_;return e.jsx("th",{className:"p-2 text-left",children:((S=T.studentInfo.find(j=>j.key===k))==null?void 0:S.label)||((w=T.academicInfo.find(j=>j.key===k))==null?void 0:w.label)||((_=T.performanceMetrics.find(j=>j.key===k))==null?void 0:_.label)||k},k)})})}),e.jsx("tbody",{children:x.map((k,R)=>e.jsx("tr",{className:"border-t",children:Object.entries(o).filter(([S,w])=>w).slice(0,6).map(([S,w])=>e.jsx("td",{className:"p-2",children:k[S]||"N/A"},S))},R))})]})})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(ee,{variant:"outline",onClick:r,children:"Cancel"}),e.jsx(ee,{onClick:()=>P("advanced"),disabled:f,className:"bg-green-600 hover:bg-green-700",children:f?e.jsxs(e.Fragment,{children:[e.jsx(Tr,{className:"h-4 w-4 mr-2 animate-spin"}),"Exporting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Zs,{className:"h-4 w-4 mr-2"}),"Export Selected Data"]})})]})]}),e.jsxs(Kt,{value:"history",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold",children:"Export History & Templates"}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>{const k={name:`Template_${new Date().toISOString().slice(0,10)}`,description:"Custom export template",columns:o,filters:d,settings:i};yi.saveExportTemplate(k),C(yi.getExportTemplates())},children:[e.jsx(no,{className:"h-4 w-4 mr-2"}),"Save Template"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm text-gray-700",children:"Recent Exports"}),v.length===0?e.jsxs("div",{className:"text-center py-4 text-gray-500 text-sm",children:[e.jsx(xy,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No export history available"})]}):v.slice(0,5).map((k,R)=>e.jsx("div",{className:"border rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h5",{className:"font-medium text-sm truncate",children:k.filename}),e.jsx("p",{className:"text-xs text-gray-600",children:yi.formatTimestamp(k.timestamp)}),e.jsxs("p",{className:"text-xs text-gray-500",children:[k.recordCount," records"]})]}),e.jsx("div",{className:"flex items-center space-x-1",children:e.jsx(et,{variant:"outline",className:"text-xs",children:k.type})})]})},R))]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm text-gray-700",children:"Saved Templates"}),b.length===0?e.jsxs("div",{className:"text-center py-4 text-gray-500 text-sm",children:[e.jsx(no,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No templates saved"})]}):b.map((k,R)=>e.jsx("div",{className:"border rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h5",{className:"font-medium text-sm truncate",children:k.name}),e.jsx("p",{className:"text-xs text-gray-600",children:yi.formatTimestamp(k.timestamp)}),e.jsx("p",{className:"text-xs text-gray-500",children:k.description})]}),e.jsx("div",{className:"flex items-center space-x-1",children:e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>{a(k.columns),l(k.filters),u(k.settings)},children:"Load"})})]})},R))]})]})]})]})})]})})};class bV{constructor(){this.workbook=null}async exportAssessmentData(r){const{type:s,columns:n,filters:c,settings:o,assessmentData:a,submissions:d}=r;this.workbook=new tz.Workbook,this.workbook.creator="LMS Platform",this.workbook.lastModifiedBy="LMS Platform",this.workbook.created=new Date,this.workbook.modified=new Date;const l=this.filterSubmissions(d,c);return s==="regular"?await this.createRegularExport(l,a,o):await this.createAdvancedExport(l,a,n,c,o),this.workbook}filterSubmissions(r,s){let n=[...r];return s.presentStudents&&(n=n.filter(c=>c.status==="submitted"||c.status==="graded")),s.absentStudents&&(n=n.filter(c=>c.status!=="submitted"&&c.status!=="graded")),s.byDepartment&&s.selectedDepartments&&(n=n.filter(c=>s.selectedDepartments.includes(c.department_name))),s.byBatch&&s.selectedBatches&&(n=n.filter(c=>s.selectedBatches.includes(c.batch))),s.byPerformanceRange&&s.selectedRanges&&(n=n.filter(c=>{const o=c.score||0;return s.selectedRanges.some(a=>{switch(a){case">90%":return o>90;case"80-90%":return o>=80&&o<=90;case"70-80%":return o>=70&&o<80;case"60-70%":return o>=60&&o<70;case"50-60%":return o>=50&&o<60;case"<50%":return o<50;default:return!0}})})),s.firstAttemptOnly&&(n=n.filter(c=>(c.attempt_number||1)===1)),s.lateSubmissionsOnly&&(n=n.filter(c=>c.late_submission===!0)),n}async createRegularExport(r,s,n){const c=await this.getAssessmentQuestionTypes(s.id);await this.createDynamicStudentPerformanceSheet(r,s,n,c);const o=r.filter(a=>a.status!=="submitted"&&a.status!=="graded");await this.createDynamicAbsenteesSheet(o,s,c),await this.createAnalyticsSummarySheet(r,s,n)}async createAdvancedExport(r,s,n,c,o){if(await this.createCustomStudentSheet(r,s,n,o),c.absentStudents||c.allStudents){const a=r.filter(d=>d.status!=="submitted"&&d.status!=="graded");await this.createCustomAbsenteesSheet(a,s,n)}o.includeSummary&&await this.createAnalyticsSummarySheet(r,s,o)}async createAnalyticsSummarySheet(r,s,n){const c=this.workbook.addWorksheet("Analytics Summary"),o=r.length,a=r.filter(h=>h.status==="submitted"||h.status==="graded").length,d=o-a,l=a>0?r.filter(h=>h.status==="submitted"||h.status==="graded").reduce((h,m)=>h+(m.score||0),0)/a:0;c.addRow(["Assessment Analytics Summary",""]),c.addRow(["Assessment Title",(s==null?void 0:s.title)||"N/A"]),c.addRow(["Assessment Date",s!=null&&s.created_at?new Date(s.created_at).toLocaleDateString():"N/A"]),c.addRow(["Total Students",o]),c.addRow(["Present Students",a]),c.addRow(["Absent Students",d]),c.addRow(["Attendance Rate",`${(a/o*100).toFixed(1)}%`]),c.addRow(["Average Score",`${l.toFixed(1)}%`]),c.addRow([""]),c.addRow(["Performance Distribution",""]);const i=[{range:">90%",count:r.filter(h=>(h.score||0)>90).length},{range:"80-90%",count:r.filter(h=>(h.score||0)>=80&&(h.score||0)<=90).length},{range:"70-80%",count:r.filter(h=>(h.score||0)>=70&&(h.score||0)<80).length},{range:"60-70%",count:r.filter(h=>(h.score||0)>=60&&(h.score||0)<70).length},{range:"50-60%",count:r.filter(h=>(h.score||0)>=50&&(h.score||0)<60).length},{range:"<50%",count:r.filter(h=>(h.score||0)<50).length}];c.addRow(["Range","Count"]),i.forEach(h=>{c.addRow([h.range,h.count])}),c.addRow([""]),c.addRow(["Department-wise Analysis",""]);const u=[...new Set(r.map(h=>h.department_name).filter(Boolean))];c.addRow(["Department","Total","Present","Absent","Avg Score"]),u.forEach(h=>{const m=r.filter(g=>g.department_name===h),p=m.filter(g=>g.status==="submitted"||g.status==="graded"),x=p.length>0?p.reduce((g,v)=>g+(v.score||0),0)/p.length:0;c.addRow([h,m.length,p.length,m.length-p.length,`${x.toFixed(1)}%`])});const f=c.getRow(1);f.font={bold:!0,size:14},f.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF4472C4"}},c.columns.forEach(h=>{h.width=Math.max(h.width||10,20)})}async createCustomStudentSheet(r,s,n,c){const o=this.workbook.addWorksheet("Custom Student Data"),a=[],d=this.getColumnMapping();Object.entries(n).forEach(([i,u])=>{u&&d[i]&&a.push(d[i].label)}),o.addRow(a);const l=o.getRow(1);l.font={bold:!0,color:{argb:"FFFFFFFF"}},l.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF4472C4"}},r.forEach(i=>{const u=[];Object.entries(n).forEach(([f,h])=>{if(h&&d[f]){const m=this.getColumnValue(i,f,d[f]);u.push(m)}}),o.addRow(u)}),o.columns.forEach(i=>{i.width=Math.max(i.width||10,15)})}async createCustomAbsenteesSheet(r,s,n){const c=this.workbook.addWorksheet("Custom Absentees Data"),o=[],a=this.getColumnMapping();Object.entries(n).forEach(([l,i])=>{i&&a[l]&&o.push(a[l].label)}),c.addRow(o);const d=c.getRow(1);d.font={bold:!0,color:{argb:"FFFFFFFF"}},d.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFDC3545"}},r.forEach(l=>{const i=[];Object.entries(n).forEach(([f,h])=>{if(h&&a[f]){const m=this.getColumnValue(l,f,a[f],!0);i.push(m)}});const u=c.addRow(i);u.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFFE4E1"}}}),c.columns.forEach(l=>{l.width=Math.max(l.width||10,15)})}async addPerformancePivotTable(r,s){}async addAttendancePivotTable(r,s){}async getAssessmentQuestionTypes(r){try{if(r&&typeof r=="object"&&r.questionTypes)return r.questionTypes;if(r&&typeof r=="object"&&r.questions){const s=[...new Set(r.questions.map(n=>n.question_type))];return s.length>0?s:this.getDefaultQuestionTypes()}return this.getDefaultQuestionTypes()}catch(s){return console.error("Error getting question types:",s),this.getDefaultQuestionTypes()}}getDefaultQuestionTypes(){return["multiple_choice","true_false","short_answer","essay","coding","fill_blanks","matching","ordering","file_upload"]}async createDynamicStudentPerformanceSheet(r,s,n,c){const o=this.workbook.addWorksheet("Student Performance Report"),a=[...r].sort((f,h)=>(h.percentage_score||0)-(f.percentage_score||0)),d=["Roll Number","Name","Email ID","Department","Batch"],l=c.map(f=>({multiple_choice:"MCQ Marks",true_false:"True/False Marks",short_answer:"Short Answer Marks",essay:"Essay Marks",coding:"Coding Marks",fill_blanks:"Fill Blanks Marks",matching:"Matching Marks",ordering:"Ordering Marks",file_upload:"File Upload Marks"})[f]||`${f.replace("_"," ").toUpperCase()} Marks`),i=[...d,...l,"Total Marks","Percentage"];o.addRow(i);const u=o.getRow(1);u.font={bold:!0,color:{argb:"FFFFFFFF"}},u.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF4472C4"}},a.forEach(f=>{const h=[f.student_id_number||"N/A",f.student_name||"N/A",f.student_email||"N/A",f.department_name||"N/A",f.batch||"N/A"],m=c.map(g=>{if(f.status!=="submitted"&&f.status!=="graded")return"Absent";const v=f.score||0,y=c.length;return Math.round(v/y)||0}),p=[...h,...m,f.score||0,f.percentage_score||0],x=o.addRow(p);if(n.colorCode){const g=f.percentage_score||0,v=i.length;g>=80?x.getCell(v).fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF90EE90"}}:g>=60?x.getCell(v).fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFFFFE0"}}:g<60&&(x.getCell(v).fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFFB6C1"}}),f.status!=="submitted"&&f.status!=="graded"&&(x.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFD3D3D3"}})}}),o.columns.forEach(f=>{f.width=Math.max(f.width||10,15)}),await this.addPerformanceDistributionChart(o,a)}async createDynamicAbsenteesSheet(r,s,n){const c=this.workbook.addWorksheet("Absentees Report"),o=["Roll Number","Name","Email ID","Department","Batch"],a=n.map(i=>({multiple_choice:"MCQ Marks",true_false:"True/False Marks",short_answer:"Short Answer Marks",essay:"Essay Marks",coding:"Coding Marks",fill_blanks:"Fill Blanks Marks",matching:"Matching Marks",ordering:"Ordering Marks",file_upload:"File Upload Marks"})[i]||`${i.replace("_"," ").toUpperCase()} Marks`),d=[...o,...a,"Total"];c.addRow(d);const l=c.getRow(1);l.font={bold:!0,color:{argb:"FFFFFFFF"}},l.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFDC3545"}},r.forEach(i=>{const u=[i.student_id_number||"N/A",i.student_name||"N/A",i.student_email||"N/A",i.department_name||"N/A",i.batch||"N/A"],f=n.map(()=>"Absent"),h=[...u,...f,"Absent"],m=c.addRow(h);m.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFFE4E1"}}}),c.columns.forEach(i=>{i.width=Math.max(i.width||10,15)})}async addPerformanceDistributionChart(r,s){const n={"90-100%":s.filter(d=>(d.percentage_score||0)>=90).length,"80-89%":s.filter(d=>(d.percentage_score||0)>=80&&(d.percentage_score||0)<90).length,"70-79%":s.filter(d=>(d.percentage_score||0)>=70&&(d.percentage_score||0)<80).length,"60-69%":s.filter(d=>(d.percentage_score||0)>=60&&(d.percentage_score||0)<70).length,"Below 60%":s.filter(d=>(d.percentage_score||0)<60).length},c=s.length+5;r.addRow([]),r.addRow(["Performance Distribution Chart"]),r.addRow(["Range","Count"]),Object.entries(n).forEach(([d,l])=>{r.addRow([d,l])});const o=r.getRow(c+1);o.font={bold:!0,size:14},o.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF4472C4"}};const a=r.getRow(c+2);a.font={bold:!0},a.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFE0E0E0"}}}getGrade(r){return r>=90?"A+":r>=80?"A":r>=70?"B+":r>=60?"B":r>=50?"C+":r>=40?"C":"F"}getColumnMapping(){return{studentIdNumber:{label:"Student ID Number",key:"student_id_number"},studentName:{label:"Student Name",key:"student_name"},emailId:{label:"Email ID",key:"student_email"},phoneNumber:{label:"Phone Number",key:"phone"},avatarUrl:{label:"Avatar URL",key:"avatar_url"},isActive:{label:"Is Active",key:"is_active"},emailVerified:{label:"Email Verified",key:"email_verified"},department:{label:"Department",key:"department_name"},batch:{label:"Batch",key:"batch"},admissionType:{label:"Admission Type",key:"admission_type"},joiningYear:{label:"Joining Year",key:"joining_year"},finalYear:{label:"Final Year",key:"final_year"},currentYear:{label:"Current Year",key:"current_year"},yearStartDate:{label:"Year Start Date",key:"year_start_date"},collegeName:{label:"College Name",key:"college_name"},collegeCode:{label:"College Code",key:"college_code"},collegeAddress:{label:"College Address",key:"college_address"},collegeCity:{label:"College City",key:"college_city"},collegeState:{label:"College State",key:"college_state"},collegeCountry:{label:"College Country",key:"college_country"},collegePhone:{label:"College Phone",key:"college_phone"},collegeEmail:{label:"College Email",key:"college_email"},collegeWebsite:{label:"College Website",key:"college_website"},assessmentId:{label:"Assessment ID",key:"assessment_id"},assessmentTitle:{label:"Assessment Title",key:"assessment_title"},assessmentType:{label:"Assessment Type",key:"assessment_type"},assessmentCategory:{label:"Assessment Category",key:"assessment_category"},difficultyLevel:{label:"Difficulty Level",key:"difficulty_level"},totalPoints:{label:"Total Points",key:"total_points"},durationMinutes:{label:"Duration (Minutes)",key:"duration_minutes"},startTime:{label:"Start Time",key:"start_time"},endTime:{label:"End Time",key:"end_time"},passingScore:{label:"Passing Score",key:"passing_score"},maxAttempts:{label:"Max Attempts",key:"max_attempts"},isTimed:{label:"Is Timed",key:"is_timed"},allowRetake:{label:"Allow Retake",key:"allow_retake"},submissionId:{label:"Submission ID",key:"submission_id"},submittedAt:{label:"Submitted At",key:"submitted_at"},startedAt:{label:"Started At",key:"started_at"},gradedAt:{label:"Graded At",key:"graded_at"},gradedBy:{label:"Graded By",key:"graded_by"},timeTakenMinutes:{label:"Time Taken (Minutes)",key:"time_taken_minutes"},attemptNumber:{label:"Attempt Number",key:"attempt_number"},submissionStatus:{label:"Submission Status",key:"status"},ipAddress:{label:"IP Address",key:"ip_address"},userAgent:{label:"User Agent",key:"user_agent"},score:{label:"Score (Points)",key:"score"},maxScore:{label:"Max Score (Points)",key:"max_score"},percentageScore:{label:"Percentage Score",key:"percentage_score"},correctAnswers:{label:"Correct Answers",key:"correct_answers"},totalQuestions:{label:"Total Questions",key:"total_questions"},feedback:{label:"Feedback",key:"feedback"},performanceLevel:{label:"Performance Level",key:"performance_level"},multipleChoiceMarks:{label:"Multiple Choice Marks",key:"multiple_choice_marks"},trueFalseMarks:{label:"True/False Marks",key:"true_false_marks"},shortAnswerMarks:{label:"Short Answer Marks",key:"short_answer_marks"},essayMarks:{label:"Essay Marks",key:"essay_marks"},codingMarks:{label:"Coding Marks",key:"coding_marks"},fillBlanksMarks:{label:"Fill Blanks Marks",key:"fill_blanks_marks"},matchingMarks:{label:"Matching Marks",key:"matching_marks"},orderingMarks:{label:"Ordering Marks",key:"ordering_marks"},fileUploadMarks:{label:"File Upload Marks",key:"file_upload_marks"},attendanceStatus:{label:"Attendance Status",key:"attendance_status"},lateSubmission:{label:"Late Submission",key:"late_submission"},disqualified:{label:"Disqualified",key:"disqualified"},createdAt:{label:"Created At",key:"created_at"},updatedAt:{label:"Updated At",key:"updated_at"},isPublished:{label:"Is Published",key:"is_published"},isActive:{label:"Is Active",key:"is_active"}}}getColumnValue(r,s,n,c=!1){if(c&&["score","maxScore","percentageScore","correctAnswers","multipleChoiceMarks","codingMarks","essayMarks","shortAnswerMarks","trueFalseMarks","fillBlanksMarks","matchingMarks","orderingMarks","fileUploadMarks"].includes(s))return"Absent";const o=r[n.key];switch(s){case"percentageScore":return o?`${o}%`:"0%";case"timeTakenMinutes":return o?`${o} min`:"N/A";case"performanceLevel":const a=r.percentage_score||0;return a>=90?"Excellent":a>=80?"Good":a>=70?"Average":a>=60?"Below Average":"Needs Improvement";case"attendanceStatus":return r.status==="submitted"||r.status==="graded"?"Present":"Absent";case"submissionStatus":return r.status||"Not attempted";case"isActive":case"emailVerified":case"isTimed":case"allowRetake":case"isPublished":return o?"Yes":"No";case"admissionType":return o==="lateral"?"Lateral":"Regular";case"submittedAt":case"startedAt":case"gradedAt":case"createdAt":case"updatedAt":case"yearStartDate":return o?new Date(o).toLocaleString():"N/A";case"startTime":case"endTime":return o?new Date(o).toLocaleString():"N/A";case"feedback":return o||"No feedback provided";case"ipAddress":return o||"N/A";case"userAgent":return o?o.substring(0,50)+"...":"N/A";default:return o||"N/A"}}generateFilename(r,s){var a,d;const n=((a=r==null?void 0:r.title)==null?void 0:a.replace(/[^a-zA-Z0-9]/g,"_"))||"Assessment",c=((d=r==null?void 0:r.college_name)==null?void 0:d.replace(/[^a-zA-Z0-9]/g,"_"))||"College",o=new Date().toISOString().slice(0,19).replace(/[:-]/g,"");return s.customFilename?`${s.customFilename}_${o}`:`${n}_${c}_${o}`}async downloadWorkbook(r,s="xlsx"){if(s==="xlsx"){const n=await this.workbook.xlsx.writeBuffer(),c=new Blob([n],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});this.downloadBlob(c,`${r}.xlsx`)}else if(s==="csv"){const n=this.workbookToCSV(),c=new Blob([n],{type:"text/csv"});this.downloadBlob(c,`${r}.csv`)}}workbookToCSV(){let r="";return this.workbook.worksheets.forEach(s=>{r+=`
=== ${s.name} ===
`,s.eachRow((n,c)=>{const o=n.values.slice(1);r+=o.join(",")+`
`})}),r}downloadBlob(r,s){const n=window.URL.createObjectURL(r),c=document.createElement("a");c.href=n,c.download=s,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(n)}}const cg=new bV,wV=()=>{const{user:t}=qs(),{toast:r}=Js();Br();const[s,n]=A.useState(!0),[c,o]=A.useState(null),[a,d]=A.useState([]),[l,i]=A.useState(!1),[u,f]=A.useState(!1),[h,m]=A.useState(null),[p,x]=A.useState(()=>{const _={dateRange:"30",collegeId:"all",assessmentType:"all"};return((t==null?void 0:t.role)==="admin"&&(t!=null&&t.college_id)||(t==null?void 0:t.role)==="faculty"&&(t!=null&&t.college_id))&&(_.collegeId=t.college_id),_}),[g,v]=A.useState({colleges:[],assessmentTypes:[]}),[y,b]=A.useState(""),[C,T]=A.useState(!1),[M,U]=A.useState(null);A.useEffect(()=>{P(),L()},[p]);const L=async()=>{try{const _=await Pe.getCollegesForAnalytics();if(_.success){let j=_.data;(t==null?void 0:t.role)==="admin"&&(t!=null&&t.college_id)?j=_.data.filter(N=>N.id===t.college_id):(t==null?void 0:t.role)==="faculty"&&(t!=null&&t.college_id)&&(j=_.data.filter(N=>N.id===t.college_id)),v(N=>({...N,colleges:j}))}}catch{}},P=async()=>{try{n(!0);const _=await Pe.getAnalyticsData(p);_.success&&(o(_.data),_.data.assessmentStats?d(_.data.assessmentStats):d([]))}catch{r({title:"Error",description:"Failed to load analytics data",variant:"destructive"})}finally{n(!1)}},B=()=>{P()},q=_=>{r({title:"Student Response",description:`Viewing response for ${_.student_name} (Score: ${_.score||0}%)`})},z=async _=>{try{const j=await Pe.getAssessmentSubmissions(_.id);j.success?(U({..._,submissions:j.data}),T(!0)):r({title:"Error",description:"Failed to load assessment details",variant:"destructive"})}catch{r({title:"Error",description:"Failed to load assessment details",variant:"destructive"})}},k=async(_,j)=>{const N=a.find(E=>E.id===_);if(!N){r({title:"Export Failed",description:"Assessment not found.",variant:"destructive"});return}m(N),f(!0)},R=async _=>{i(!0);try{const{type:j,columns:N,filters:E,settings:I,assessmentData:D,submissions:V}=_;let H={...D};if(j==="regular"&&(D!=null&&D.id))try{const F=await Pe.get(`/assessments/${D.id}/questions`);if(F.success&&F.data){const O=[...new Set(F.data.map(W=>W.question_type))];H.questionTypes=O,H.questions=F.data}}catch(F){console.warn("Could not fetch question types, using defaults:",F)}const G=cg.generateFilename(H,I),$={..._,assessmentData:H},Y=await cg.exportAssessmentData($);await cg.downloadWorkbook(G,I.fileFormat),r({title:"Export Successful",description:`${j==="regular"?"Regular":"Advanced"} export completed successfully.`})}catch(j){console.error("Export failed:",j),r({title:"Export Failed",description:"Failed to export data. Please try again.",variant:"destructive"})}finally{i(!1)}},S=async()=>{try{i(!0);const _=["Assessment Name","Type","Total Students","Students Attempted","Students Completed","Completion Rate (%)","Average Score (%)","Status"],j=a.map(G=>[G.title||"",G.assessment_type||"",G.totalStudents||0,G.totalStudents||0,G.completedSubmissions||0,G.totalStudents>0?Math.round(G.completedSubmissions/G.totalStudents*100):0,G.averageScore||0,"published"]),N=[_,...j].map(G=>G.map($=>`"${$}"`).join(",")).join(`
`),E=new Blob([N],{type:"text/csv;charset=utf-8;"}),I=document.createElement("a"),D=URL.createObjectURL(E);I.setAttribute("href",D);const H=`all_assessments_analytics_${new Date().toISOString().split("T")[0]}.csv`;I.setAttribute("download",H),I.style.visibility="hidden",document.body.appendChild(I),I.click(),document.body.removeChild(I),r({title:"Success",description:`Exported analytics data for ${a.length} assessments`})}catch{r({title:"Error",description:"Failed to export data",variant:"destructive"})}finally{i(!1)}},w=a.filter(_=>{var N,E,I;return!y||((N=_.title)==null?void 0:N.toLowerCase().includes(y.toLowerCase()))||((E=_.type)==null?void 0:E.toLowerCase().includes(y.toLowerCase()))||((I=_.assessment_type)==null?void 0:I.toLowerCase().includes(y.toLowerCase()))});return s?e.jsx("div",{className:"min-h-screen bg-background p-4",children:e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-primary mx-auto"}),e.jsx("p",{className:"mt-4 text-muted-foreground text-lg",children:"Loading analytics..."})]})})}):e.jsx("div",{className:"min-h-screen bg-background p-1 sm:p-2 md:p-4",children:e.jsxs("div",{className:"w-full max-w-none space-y-4 sm:space-y-6 -mt-1 sm:-mt-2 md:-mt-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-muted via-muted/50 to-muted rounded-2xl p-4 sm:p-6 text-card-foreground shadow-lg border border-border",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold mb-2",children:"Assessment Analytics Dashboard"}),e.jsx("p",{className:"text-sm sm:text-lg text-muted-foreground",children:"Track assessment completion and student performance"}),e.jsxs("div",{className:"mt-2 flex items-center space-x-2",children:[e.jsxs(et,{variant:"secondary",className:"text-sm",children:[(t==null?void 0:t.role)==="student"&&" Your Performance Data",(t==null?void 0:t.role)==="faculty"&&" Your Department Analytics",(t==null?void 0:t.role)==="admin"&&" Your College Analytics",(t==null?void 0:t.role)==="super_admin"&&" System-wide Analytics"]}),(t==null?void 0:t.role)==="faculty"&&(t==null?void 0:t.department)&&e.jsxs(et,{variant:"outline",className:"text-sm",children:["Department: ",t.department]}),(t==null?void 0:t.role)==="admin"&&(t==null?void 0:t.college_id)&&e.jsxs(et,{variant:"outline",className:"text-sm",children:["College ID: ",t.college_id]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 sm:gap-4",children:[e.jsxs(ee,{onClick:B,variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(Is,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Refresh"})]}),e.jsxs(ee,{onClick:S,disabled:l,variant:"outline",className:"w-full sm:w-auto bg-green-600 hover:bg-green-700 text-white border-green-600",children:[e.jsx(Zs,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2"}),e.jsx("span",{className:"text-sm sm:text-base",children:l?"Exporting...":"Export All"})]}),e.jsxs(ee,{onClick:()=>f(!0),disabled:l,variant:"outline",className:"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white border-blue-600",children:[e.jsx(Zs,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Enhanced Export"})]})]})]})}),e.jsx(Re,{className:"bg-card backdrop-blur-sm border-0 shadow-lg border border-border",children:e.jsx(De,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 w-full",children:[e.jsx(hn,{className:"h-4 w-4 sm:h-5 sm:w-5 text-muted-foreground flex-shrink-0"}),e.jsx(Ye,{placeholder:"Search assessments...",value:y,onChange:_=>b(_.target.value),className:"flex-1 text-sm sm:text-base"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 w-full",children:[e.jsxs("div",{className:"w-full",children:[e.jsx(Se,{htmlFor:"dateRange",className:"text-xs sm:text-sm text-muted-foreground",children:"Date Range"}),e.jsxs(At,{value:p.dateRange,onValueChange:_=>x(j=>({...j,dateRange:_})),children:[e.jsx(St,{className:"text-sm",children:e.jsx(Rt,{placeholder:"Select date range"})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"7",children:"Last 7 days"}),e.jsx(Te,{value:"30",children:"Last 30 days"}),e.jsx(Te,{value:"90",children:"Last 90 days"}),e.jsx(Te,{value:"365",children:"Last year"})]})]})]}),(t==null?void 0:t.role)!=="student"&&e.jsxs("div",{className:"w-full",children:[e.jsx(Se,{htmlFor:"collegeId",className:"text-xs sm:text-sm text-muted-foreground",children:"College"}),e.jsxs(At,{value:p.collegeId,onValueChange:_=>x(j=>({...j,collegeId:_})),disabled:(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="faculty",children:[e.jsx(St,{className:"text-sm",children:e.jsx(Rt,{placeholder:"Select college"})}),e.jsxs(Ct,{children:[(t==null?void 0:t.role)==="super_admin"&&e.jsx(Te,{value:"all",children:"All Colleges"}),g.colleges&&Array.isArray(g.colleges)&&g.colleges.map(_=>e.jsx(Te,{value:_.id,children:_.name},_.id))]})]}),((t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="faculty")&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Filtered to your college automatically"})]})]})]})})}),e.jsx(Re,{className:"bg-card backdrop-blur-sm border-0 shadow-lg border border-border",children:e.jsxs(De,{className:"p-0",children:[e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-border bg-muted/30",children:[e.jsx("th",{className:"text-left p-4 font-semibold text-card-foreground",children:"Assessment Name"}),e.jsx("th",{className:"text-center p-4 font-semibold text-card-foreground",children:"Total Students"}),e.jsx("th",{className:"text-center p-4 font-semibold text-card-foreground",children:"Students Attempted"}),e.jsx("th",{className:"text-center p-4 font-semibold text-card-foreground",children:"Student Submissions"}),e.jsx("th",{className:"text-center p-4 font-semibold text-card-foreground",children:"Completion Rate"}),e.jsx("th",{className:"text-center p-4 font-semibold text-card-foreground",children:"Average Score"}),e.jsx("th",{className:"text-center p-4 font-semibold text-card-foreground",children:"Actions"})]})}),e.jsx("tbody",{children:w.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"text-center py-8",children:e.jsxs("div",{className:"text-muted-foreground",children:[e.jsx(Os,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-lg font-medium",children:"No assessments found"}),e.jsx("p",{className:"text-sm",children:"No assessments match your current filters or no assessments have been created yet."})]})})}):w.map(_=>e.jsxs("tr",{className:"border-b border-border hover:bg-muted/20",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-card-foreground",children:_.title||"Untitled Assessment"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:_.description||"No description available"})]})}),e.jsx("td",{className:"text-center p-4",children:e.jsx(et,{variant:"outline",children:_.totalStudents||0})}),e.jsx("td",{className:"text-center p-4",children:e.jsx(et,{variant:"secondary",children:_.totalStudents||0})}),e.jsx("td",{className:"text-center p-4",children:e.jsx(et,{variant:"default",children:_.completedSubmissions||0})}),e.jsx("td",{className:"text-center p-4",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("span",{className:"font-medium",children:[_.totalStudents>0?Math.round(_.completedSubmissions/_.totalStudents*100):0,"%"]})})}),e.jsx("td",{className:"text-center p-4",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("span",{className:"font-medium",children:[_.averageScore?Math.round(_.averageScore):0,"%"]})})}),e.jsx("td",{className:"text-center p-4",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>z(_),className:"bg-blue-600 hover:bg-blue-700 text-white border-blue-600",children:[e.jsx(Ss,{className:"h-4 w-4 mr-1"}),"View Details"]}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>k(_.id,_.title),disabled:l,className:"bg-green-600 hover:bg-green-700 text-white border-green-600",children:e.jsx(Zs,{className:"h-4 w-4"})})]})})]},_.id))})]})}),e.jsx("div",{className:"md:hidden",children:w.length===0?e.jsx("div",{className:"text-center py-8 px-4",children:e.jsxs("div",{className:"text-muted-foreground",children:[e.jsx(Os,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-lg font-medium",children:"No assessments found"}),e.jsx("p",{className:"text-sm",children:"No assessments match your current filters or no assessments have been created yet."})]})}):e.jsx("div",{className:"space-y-4 p-4",children:w.map(_=>e.jsx("div",{className:"bg-muted/20 rounded-lg p-4 border border-border",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-card-foreground text-sm",children:_.title||"Untitled Assessment"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:_.description||"No description available"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-semibold text-card-foreground",children:_.totalStudents||0}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Students"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-semibold text-card-foreground",children:_.completedSubmissions||0}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Submissions"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-semibold text-card-foreground",children:[_.totalStudents>0?Math.round(_.completedSubmissions/_.totalStudents*100):0,"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Completion"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-semibold text-card-foreground",children:[_.averageScore?Math.round(_.averageScore):0,"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg Score"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>z(_),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white border-blue-600 text-xs",children:[e.jsx(Ss,{className:"h-3 w-3 mr-1"}),"View Details"]}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>k(_.id,_.title),disabled:l,className:"bg-green-600 hover:bg-green-700 text-white border-green-600 text-xs",children:e.jsx(Zs,{className:"h-3 w-3"})})]})]})},_.id))})})]})}),e.jsx(Ht,{open:C,onOpenChange:T,children:e.jsxs(Zt,{className:"max-w-[98vw] w-[98vw] sm:max-w-[95vw] sm:w-[95vw] md:max-w-[92vw] md:w-[92vw] lg:max-w-[90vw] lg:w-[90vw] xl:max-w-[88vw] xl:w-[88vw] 2xl:max-w-[85vw] 2xl:w-[85vw] max-h-[98vh] h-[98vh] overflow-hidden flex flex-col",children:[e.jsx(Jt,{className:"flex-shrink-0 border-b pb-4",children:e.jsxs(es,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>T(!1),className:"h-8 w-8 p-0 hover:bg-muted",children:e.jsx(oa,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Assessment Details"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:(M==null?void 0:M.title)||"Untitled Assessment"})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs(ee,{onClick:()=>k(M==null?void 0:M.id,M==null?void 0:M.title),disabled:l,variant:"outline",size:"sm",className:"bg-green-600 hover:bg-green-700 text-white border-green-600",children:[e.jsx(Zs,{className:"h-4 w-4 mr-2"}),l?"Exporting...":"Export"]})})]})}),M&&e.jsxs("div",{className:"flex-1 overflow-y-auto space-y-6 p-1",children:[e.jsxs(Re,{children:[e.jsx(lt,{className:"pb-3",children:e.jsxs(mt,{className:"text-lg font-semibold flex items-center",children:[e.jsx(ra,{className:"h-5 w-5 mr-2 text-blue-600"}),"Key Metrics"]})}),e.jsx(De,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 border border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-blue-700",children:M.totalStudents||0}),e.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Total Students"})]}),e.jsx(as,{className:"h-8 w-8 text-blue-500"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-green-700",children:M.completedSubmissions||0}),e.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Submissions"})]}),e.jsx(Yt,{className:"h-8 w-8 text-green-500"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4 border border-purple-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold text-purple-700",children:[M.totalStudents>0?Math.round(M.completedSubmissions/M.totalStudents*100):0,"%"]}),e.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Completion Rate"})]}),e.jsx(Nc,{className:"h-8 w-8 text-purple-500"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-4 border border-orange-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold text-orange-700",children:[M.averageScore?Math.round(M.averageScore):0,"%"]}),e.jsx("p",{className:"text-sm text-orange-600 font-medium",children:"Average Score"})]}),e.jsx(so,{className:"h-8 w-8 text-orange-500"})]})})]})})]}),e.jsxs(Re,{children:[e.jsx(lt,{className:"pb-3",children:e.jsxs(mt,{className:"text-lg font-semibold flex items-center",children:[e.jsx($7,{className:"h-5 w-5 mr-2 text-indigo-600"}),"Student Submissions"]})}),e.jsxs(De,{className:"p-0",children:[e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-[700px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-border bg-muted/30",children:[e.jsx("th",{className:"text-left p-3 font-semibold text-card-foreground min-w-[160px]",children:"Student"}),e.jsx("th",{className:"text-center p-3 font-semibold text-card-foreground min-w-[100px]",children:"College"}),e.jsx("th",{className:"text-center p-3 font-semibold text-card-foreground min-w-[90px]",children:"Department"}),e.jsx("th",{className:"text-center p-3 font-semibold text-card-foreground min-w-[100px]",children:"Submission Date"}),e.jsx("th",{className:"text-center p-3 font-semibold text-card-foreground min-w-[60px]",children:"Score"}),e.jsx("th",{className:"text-center p-3 font-semibold text-card-foreground min-w-[80px]",children:"Status"}),e.jsx("th",{className:"text-center p-3 font-semibold text-card-foreground min-w-[80px]",children:"Time Taken"}),e.jsx("th",{className:"text-center p-3 font-semibold text-card-foreground min-w-[60px]",children:"Attempt"}),e.jsx("th",{className:"text-center p-3 font-semibold text-card-foreground min-w-[80px]",children:"Response"})]})}),e.jsx("tbody",{children:M.submissions&&M.submissions.length>0?M.submissions.map((_,j)=>e.jsxs("tr",{className:"border-b border-border hover:bg-muted/50 transition-colors duration-200",children:[e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("div",{className:"font-medium text-card-foreground text-xs",children:_.student_name}),e.jsx("div",{className:"text-xs text-muted-foreground font-mono",children:_.student_id_number}),e.jsx("div",{className:"text-xs text-muted-foreground truncate max-w-[140px]",title:_.student_email,children:_.student_email})]})}),e.jsx("td",{className:"text-center p-2",children:e.jsx("div",{className:"text-xs text-muted-foreground truncate max-w-[90px]",title:_.college_name,children:_.college_name})}),e.jsx("td",{className:"text-center p-2",children:e.jsx("div",{className:"text-xs text-muted-foreground truncate max-w-[80px]",title:_.department_name,children:_.department_name})}),e.jsx("td",{className:"text-center p-2",children:e.jsx("div",{className:"text-xs text-muted-foreground",children:_.submitted_at?new Date(_.submitted_at).toLocaleDateString():"Not submitted"})}),e.jsx("td",{className:"text-center p-2",children:e.jsxs(et,{variant:_.score>=80?"default":_.score>=60?"secondary":"destructive",className:"font-medium text-xs px-1.5 py-0.5",children:[_.score||0,"%"]})}),e.jsx("td",{className:"text-center p-2",children:e.jsx(et,{variant:_.status==="submitted"||_.status==="graded"?"default":_.status==="in_progress"?"secondary":"outline",className:"text-xs px-1.5 py-0.5",children:_.status||"Not attempted"})}),e.jsx("td",{className:"text-center p-2",children:e.jsx("div",{className:"text-xs text-muted-foreground",children:_.time_taken_minutes?`${_.time_taken_minutes}m`:"-"})}),e.jsx("td",{className:"text-center p-2",children:e.jsx("div",{className:"text-xs text-muted-foreground font-mono",children:_.attempt_number||1})}),e.jsx("td",{className:"text-center p-2",children:e.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>q(_),className:"bg-blue-600 hover:bg-blue-700 text-white border-blue-600 px-1.5 py-0.5 text-xs h-6",children:[e.jsx(Ss,{className:"h-3 w-3 mr-0.5"}),"View"]})})]},_.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"text-center py-12",children:e.jsxs("div",{className:"text-muted-foreground",children:[e.jsx(Os,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium",children:"No submissions found"}),e.jsx("p",{className:"text-sm",children:"This assessment doesn't have any student submissions yet."})]})})})})]})}),e.jsx("div",{className:"lg:hidden",children:M.submissions&&M.submissions.length>0?e.jsx("div",{className:"space-y-4 p-4",children:M.submissions.map(_=>e.jsx("div",{className:"bg-muted/20 rounded-lg p-4 border border-border",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-card-foreground",children:_.student_name}),e.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:_.student_id_number}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:_.student_email})]}),e.jsx("div",{className:"text-right",children:e.jsxs(et,{variant:_.score>=80?"default":_.score>=60?"secondary":"destructive",className:"font-medium",children:[_.score||0,"%"]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"College:"}),e.jsx("p",{className:"font-medium",children:_.college_name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Department:"}),e.jsx("p",{className:"font-medium",children:_.department_name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Status:"}),e.jsx(et,{variant:_.status==="submitted"||_.status==="graded"?"default":_.status==="in_progress"?"secondary":"outline",className:"text-xs",children:_.status||"Not attempted"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Time:"}),e.jsx("p",{className:"font-medium",children:_.time_taken_minutes?`${_.time_taken_minutes} min`:"-"})]})]}),e.jsxs("div",{className:"pt-2 border-t border-border",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Submitted:"}),e.jsx("p",{className:"text-xs font-medium",children:_.submitted_at?new Date(_.submitted_at).toLocaleString():"Not submitted"})]}),e.jsx("div",{className:"pt-3",children:e.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>q(_),className:"w-full bg-blue-600 hover:bg-blue-700 text-white border-blue-600",children:[e.jsx(Ss,{className:"h-3 w-3 mr-2"}),"View Response"]})})]})},_.id))}):e.jsx("div",{className:"text-center py-12 px-4",children:e.jsxs("div",{className:"text-muted-foreground",children:[e.jsx(Os,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium",children:"No submissions found"}),e.jsx("p",{className:"text-sm",children:"This assessment doesn't have any student submissions yet."})]})})})]})]})]})]})}),e.jsx(vV,{isOpen:u,onClose:()=>{f(!1),m(null)},assessmentData:h,submissions:(h==null?void 0:h.submissions)||[],onExport:R})]})})},jV=()=>{const{assessmentId:t}=dy(),r=Br();qs();const{toast:s}=Js(),[n,c]=A.useState(!0),[o,a]=A.useState(null),[d,l]=A.useState([]),[i,u]=A.useState(!1);A.useEffect(()=>{t&&f()},[t]);const f=async()=>{try{c(!0);const m=await Pe.getAssessmentDetails(t);m.success&&a(m.data.assessment);const p=await Pe.getAssessmentSubmissions(t);p.success&&l(p.data)}catch(m){console.error("Error loading assessment details:",m),s({title:"Error",description:"Failed to load assessment details",variant:"destructive"})}finally{c(!1)}},h=async()=>{try{if(u(!0),d.length===0){s({title:"No Data",description:"No submissions to export",variant:"destructive"});return}const m=["Student Name","Student ID","Email","College","Department","Submission Date","Score","Status","Time Taken","Attempt"],p=d.map(T=>[T.student_name||"",T.student_id_number||"",T.student_email||"",T.college_name||"",T.department_name||"",T.submitted_at?new Date(T.submitted_at).toLocaleString():"Not submitted",T.score||0,T.status||"Not attempted",T.time_taken_minutes?`${T.time_taken_minutes} min`:"-",T.attempt_number||1]),x=[m,...p].map(T=>T.map(M=>`"${M}"`).join(",")).join(`
`),g=new Blob([x],{type:"text/csv;charset=utf-8;"}),v=document.createElement("a"),y=URL.createObjectURL(g);v.setAttribute("href",y);const b=new Date().toISOString().split("T")[0],C=`assessment_${(o==null?void 0:o.title)||t}_submissions_${b}.csv`;v.setAttribute("download",C),v.style.visibility="hidden",document.body.appendChild(v),v.click(),document.body.removeChild(v),s({title:"Success",description:`Exported ${d.length} student submissions!`})}catch(m){console.error("Export error:",m),s({title:"Error",description:"Failed to export data",variant:"destructive"})}finally{u(!1)}};return n?e.jsx("div",{className:"min-h-screen bg-background p-4",children:e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-primary mx-auto"}),e.jsx("p",{className:"mt-4 text-muted-foreground text-lg",children:"Loading assessment details..."})]})})}):o?e.jsx("div",{className:"min-h-screen bg-background p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(ee,{variant:"outline",onClick:()=>r("/analytics"),className:"h-10 w-10 p-0",children:e.jsx(oa,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Assessment Details"}),e.jsx("p",{className:"text-muted-foreground",children:o.title})]})]}),e.jsxs(ee,{onClick:h,disabled:i,variant:"outline",className:"bg-green-600 hover:bg-green-700 text-white border-green-600",children:[e.jsx(Zs,{className:"h-4 w-4 mr-2"}),i?"Exporting...":"Export Data"]})]}),e.jsxs(Re,{children:[e.jsx(lt,{children:e.jsxs(mt,{className:"text-xl font-semibold flex items-center space-x-2",children:[e.jsx(lr,{className:"h-5 w-5"}),e.jsx("span",{children:"Assessment Summary"})]})}),e.jsx(De,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx(as,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:d.length||0}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Total Students"})]}),e.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg border border-orange-200",children:[e.jsx(ra,{className:"h-8 w-8 text-orange-600 mx-auto mb-2"}),e.jsx("p",{className:"text-3xl font-bold text-orange-600",children:d.length||0}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Students Attempted"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsx(Yt,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:d.filter(m=>m.status==="submitted"||m.status==="graded").length||0}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Student Submissions"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsx(Nc,{className:"h-8 w-8 text-purple-600 mx-auto mb-2"}),e.jsxs("p",{className:"text-3xl font-bold text-purple-600",children:[d.length>0?Math.round(d.filter(m=>m.status==="submitted"||m.status==="graded").length/d.length*100):0,"%"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Completion Rate"})]})]})})]}),e.jsxs(Re,{children:[e.jsx(lt,{children:e.jsx(mt,{className:"text-xl font-semibold",children:"Assessment Information"})}),e.jsx(De,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(lr,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"Type:"}),e.jsx(et,{variant:"outline",children:o.assessment_type||"N/A"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ps,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"Time Limit:"}),e.jsxs("span",{children:[o.time_limit_minutes||"No limit"," minutes"]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ra,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"Total Points:"}),e.jsx("span",{children:o.total_points||"N/A"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Yt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"Passing Score:"}),e.jsxs("span",{children:[o.passing_score||"N/A","%"]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(as,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"Max Attempts:"}),e.jsx("span",{children:o.max_attempts||"Unlimited"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(tr,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"Status:"}),e.jsx(et,{variant:o.status==="published"?"default":"secondary",children:o.status||"N/A"})]})]})]})})]}),e.jsxs(Re,{children:[e.jsx(lt,{className:"bg-gray-50 border-b",children:e.jsxs(mt,{className:"text-xl font-semibold flex items-center space-x-2",children:[e.jsx(Go,{className:"h-5 w-5"}),e.jsx("span",{children:"Student Submissions Details"})]})}),e.jsx(De,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-[800px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-border bg-muted/30",children:[e.jsx("th",{className:"text-left p-3 font-semibold text-card-foreground min-w-[160px]",children:"Student Name"}),e.jsx("th",{className:"text-left p-3 font-semibold text-card-foreground min-w-[100px]",children:"Student ID"}),e.jsx("th",{className:"text-left p-3 font-semibold text-card-foreground min-w-[180px]",children:"Email"}),e.jsx("th",{className:"text-center p-3 font-semibold text-card-foreground min-w-[120px]",children:"College"}),e.jsx("th",{className:"text-center p-3 font-semibold text-card-foreground min-w-[100px]",children:"Department"}),e.jsx("th",{className:"text-center p-3 font-semibold text-card-foreground min-w-[120px]",children:"Submission Date"}),e.jsx("th",{className:"text-center p-3 font-semibold text-card-foreground min-w-[60px]",children:"Score"}),e.jsx("th",{className:"text-center p-3 font-semibold text-card-foreground min-w-[80px]",children:"Status"}),e.jsx("th",{className:"text-center p-3 font-semibold text-card-foreground min-w-[80px]",children:"Time Taken"}),e.jsx("th",{className:"text-center p-3 font-semibold text-card-foreground min-w-[60px]",children:"Attempt"})]})}),e.jsx("tbody",{children:d&&d.length>0?d.map((m,p)=>e.jsxs("tr",{className:`border-b border-border hover:bg-blue-50/50 transition-colors duration-200 ${p%2===0?"bg-gray-50/30":""}`,children:[e.jsx("td",{className:"p-2",children:e.jsx("div",{className:"font-medium text-card-foreground text-sm",children:m.student_name})}),e.jsx("td",{className:"p-2",children:e.jsx("div",{className:"text-xs text-muted-foreground font-mono",children:m.student_id_number})}),e.jsx("td",{className:"p-2",children:e.jsx("div",{className:"text-xs text-muted-foreground truncate max-w-[170px]",title:m.student_email,children:m.student_email})}),e.jsx("td",{className:"text-center p-2",children:e.jsx("div",{className:"text-xs text-muted-foreground truncate max-w-[110px]",title:m.college_name,children:m.college_name})}),e.jsx("td",{className:"text-center p-2",children:e.jsx("div",{className:"text-xs text-muted-foreground truncate max-w-[90px]",title:m.department_name,children:m.department_name})}),e.jsx("td",{className:"text-center p-2",children:e.jsx("div",{className:"text-xs text-muted-foreground",children:m.submitted_at?new Date(m.submitted_at).toLocaleDateString():"Not submitted"})}),e.jsx("td",{className:"text-center p-2",children:e.jsxs(et,{variant:m.score>=70?"default":m.score>=50?"secondary":"destructive",className:"text-xs px-1.5 py-0.5",children:[m.score||0,"%"]})}),e.jsx("td",{className:"text-center p-2",children:e.jsx(et,{variant:m.status==="submitted"||m.status==="graded"?"default":m.status==="in_progress"?"secondary":"outline",className:"text-xs px-1.5 py-0.5",children:m.status||"Not attempted"})}),e.jsx("td",{className:"text-center p-2",children:e.jsx("div",{className:"text-xs text-muted-foreground",children:m.time_taken_minutes?`${m.time_taken_minutes}m`:"-"})}),e.jsx("td",{className:"text-center p-2",children:e.jsx("div",{className:"text-xs text-muted-foreground font-mono",children:m.attempt_number||1})})]},m.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"10",className:"text-center py-8",children:e.jsxs("div",{className:"text-muted-foreground",children:[e.jsx(Os,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-lg font-medium",children:"No submissions found"}),e.jsx("p",{className:"text-sm",children:"This assessment doesn't have any student submissions yet."})]})})})})]})})})]})]})}):e.jsx("div",{className:"min-h-screen bg-background p-4",children:e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-muted-foreground text-lg",children:"Assessment not found"}),e.jsxs(ee,{onClick:()=>r("/analytics"),className:"mt-4",variant:"outline",children:[e.jsx(oa,{className:"h-4 w-4 mr-2"}),"Back to Analytics"]})]})})})},_V="modulepreload",NV=function(t){return"/"+t},d2={},SV=function(r,s,n){if(!s||s.length===0)return r();const c=document.getElementsByTagName("link");return Promise.all(s.map(o=>{if(o=NV(o),o in d2)return;d2[o]=!0;const a=o.endsWith(".css"),d=a?'[rel="stylesheet"]':"";if(!!n)for(let u=c.length-1;u>=0;u--){const f=c[u];if(f.href===o&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${d}`))return;const i=document.createElement("link");if(i.rel=a?"stylesheet":_V,a||(i.as="script",i.crossOrigin=""),i.href=o,document.head.appendChild(i),a)return new Promise((u,f)=>{i.addEventListener("load",u),i.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>r()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})},Fv=A.createContext(),Bl=({children:t})=>e.jsx("div",{children:t}),zl=({children:t,delayDuration:r=0})=>{const[s,n]=A.useState(!1);return e.jsx(Fv.Provider,{value:{isOpen:s,setIsOpen:n,delayDuration:r},children:e.jsx("div",{className:"relative inline-block",children:t})})},Ul=({asChild:t,children:r,...s})=>{const{setIsOpen:n,delayDuration:c}=A.useContext(Fv);let o=null;const a=()=>{c>0?o=setTimeout(()=>{n(!0)},c):n(!0)},d=()=>{o&&clearTimeout(o),n(!1)};return t?Lt.cloneElement(r,{...s,onMouseEnter:l=>{var i,u;a(),(u=(i=r.props).onMouseEnter)==null||u.call(i,l)},onMouseLeave:l=>{var i,u;d(),(u=(i=r.props).onMouseLeave)==null||u.call(i,l)}}):e.jsx("div",{...s,onMouseEnter:a,onMouseLeave:d,children:r})},Vl=({className:t,children:r,...s})=>{const{isOpen:n,setIsOpen:c}=A.useContext(Fv);return n?e.jsxs("div",{className:`absolute z-[9999] px-3 py-2 text-sm text-white bg-gray-900 rounded-md shadow-lg transition-opacity duration-200 ${t||""}`,style:{bottom:"100%",left:"50%",transform:"translateX(-50%)",marginBottom:"8px",minWidth:"180px"},onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),...s,children:[r,e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2",style:{borderLeft:"5px solid transparent",borderRight:"5px solid transparent",borderTop:"5px solid #1f2937"}})]}):null},CV=({onUploadComplete:t})=>{const[r,s]=A.useState(!1),[n,c]=A.useState(!1),[o,a]=A.useState(0),[d,l]=A.useState(null),[i,u]=A.useState(null),[f,h]=A.useState(!1),m=A.useRef(null),{toast:p}=Js(),x=async()=>{try{const C=await Pe.downloadBulkUploadTemplate(),T=window.URL.createObjectURL(C),M=document.createElement("a");M.href=T,M.download="coding_profiles_bulk_template.xlsx",document.body.appendChild(M),M.click(),document.body.removeChild(M),window.URL.revokeObjectURL(T),p({title:"Template Downloaded",description:"Excel template has been downloaded successfully"})}catch(C){console.error("Error downloading template:",C),p({title:"Error",description:"Failed to download template",variant:"destructive"})}},g=async C=>{const T=C.target.files[0];if(T){if(!T.name.match(/\.(xlsx|xls)$/i)){p({title:"Invalid File Type",description:"Please upload an Excel file (.xlsx or .xls)",variant:"destructive"});return}c(!0),a(0),l(null);try{new FormData().append("file",T);const U=setInterval(()=>{a(P=>P>=90?(clearInterval(U),90):P+10)},200),L=await Pe.bulkUploadProfiles(T);clearInterval(U),a(100),L.success&&(l(L.data),p({title:"Upload Successful",description:`Processed ${L.data.total} rows successfully`}),t&&t(L.data),v())}catch(M){console.error("Upload error:",M),p({title:"Upload Failed",description:M.message||"Failed to upload file",variant:"destructive"})}finally{c(!1),m.current&&(m.current.value="")}}},v=async()=>{try{h(!0);const C=await Pe.getBulkUploadStats();C.success&&u(C.data)}catch(C){console.error("Error fetching stats:",C)}finally{h(!1)}},y=async()=>{try{c(!0);const C=await Pe.syncBulkProfiles();C.success&&(p({title:"Sync Completed",description:C.message}),t&&t(C.data),v())}catch(C){console.error("Sync error:",C),p({title:"Sync Failed",description:C.message||"Failed to sync profiles",variant:"destructive"})}finally{c(!1)}},b=()=>{s(!0),v()};return e.jsxs(Ht,{open:r,onOpenChange:s,children:[e.jsx(xa,{asChild:!0,children:e.jsxs(ee,{onClick:b,children:[e.jsx(va,{className:"h-4 w-4 mr-2"}),"Bulk Upload"]})}),e.jsxs(Zt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Jt,{children:e.jsxs(es,{className:"flex items-center",children:[e.jsx(h1,{className:"h-5 w-5 mr-2"}),"Bulk Upload Coding Profiles"]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Re,{children:[e.jsx(lt,{children:e.jsx(mt,{className:"text-lg",children:"Instructions"})}),e.jsx(De,{className:"space-y-2",children:e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("p",{children:"1. Download the Excel template using the button below"}),e.jsx("p",{children:"2. Fill in Roll Number OR Email ID (at least one required)"}),e.jsx("p",{children:"3. Add platform usernames for each student"}),e.jsx("p",{children:"4. Upload the completed file"}),e.jsx("p",{children:"5. URLs will be auto-generated and profiles will be created"})]})})]}),e.jsxs(Re,{children:[e.jsx(lt,{children:e.jsxs(mt,{className:"text-lg flex items-center",children:[e.jsx(Zs,{className:"h-5 w-5 mr-2"}),"Download Template"]})}),e.jsx(De,{children:e.jsxs(ee,{onClick:x,variant:"outline",children:[e.jsx(Zs,{className:"h-4 w-4 mr-2"}),"Download Excel Template"]})})]}),e.jsxs(Re,{children:[e.jsx(lt,{children:e.jsxs(mt,{className:"text-lg flex items-center",children:[e.jsx(va,{className:"h-5 w-5 mr-2"}),"Upload File"]})}),e.jsxs(De,{className:"space-y-4",children:[e.jsx("input",{ref:m,type:"file",accept:".xlsx,.xls",onChange:g,className:"hidden",id:"file-upload"}),e.jsx("label",{htmlFor:"file-upload",children:e.jsx(ee,{asChild:!0,variant:"outline",disabled:n,children:e.jsxs("span",{children:[e.jsx(h1,{className:"h-4 w-4 mr-2"}),"Choose Excel File"]})})}),n&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Is,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{className:"text-sm",children:"Uploading and processing..."})]}),e.jsx(co,{value:o,className:"w-full"})]}),d&&e.jsx(Re,{className:"border-green-200 bg-green-50",children:e.jsx(De,{className:"pt-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Yt,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"font-medium text-green-800",children:"Upload Completed"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Total Rows:"})," ",d.total]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Successful:"})," ",d.successful]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Failed:"})," ",d.failed]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Profiles Created:"})," ",d.profiles_created]})]}),d.errors&&d.errors.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Errors:"}),e.jsxs("div",{className:"max-h-32 overflow-y-auto space-y-1",children:[d.errors.slice(0,10).map((C,T)=>e.jsxs("div",{className:"text-xs text-red-600 bg-red-100 p-2 rounded",children:["Row ",C.row,": ",C.error]},T)),d.errors.length>10&&e.jsxs("div",{className:"text-xs text-red-600",children:["... and ",d.errors.length-10," more errors"]})]})]})]})})})]})]}),i&&e.jsxs(Re,{children:[e.jsx(lt,{children:e.jsxs(mt,{className:"text-lg flex items-center",children:[e.jsx(Rr,{className:"h-5 w-5 mr-2"}),"Current Statistics"]})}),e.jsx(De,{children:f?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Is,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{className:"text-sm",children:"Loading statistics..."})]}):e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i.overall_stats.total_students_with_profiles}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Students"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:i.overall_stats.synced_profiles}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Synced"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:i.overall_stats.pending_profiles}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Pending"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:i.overall_stats.failed_profiles}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Failed"})]})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsxs(ee,{onClick:y,disabled:n||!(i!=null&&i.overall_stats.pending_profiles),variant:"outline",children:[e.jsx(Is,{className:"h-4 w-4 mr-2"}),"Sync All Profiles"]}),e.jsx(ee,{onClick:()=>s(!1),children:"Close"})]})]})]})]})},kV=({onProfileAdded:t})=>{const[r,s]=A.useState(!1),[n,c]=A.useState(!1),[o,a]=A.useState(!1),[d,l]=A.useState([]),[i,u]=A.useState([]),[f,h]=A.useState(null),[m,p]=A.useState(""),{toast:x}=Js(),[g,v]=A.useState({studentSearch:"",rollNumber:"",email:"",leetcode:"",codechef:"",hackerrank:"",hackerearth:"",geeksforgeeks:""});A.useEffect(()=>{r&&y()},[r]);const y=async()=>{try{const L=await Pe.get("/coding-profiles/platforms");L.success&&u(L.data)}catch(L){console.error("Error fetching platforms:",L),x({title:"Error",description:"Failed to fetch platforms.",variant:"destructive"})}},b=async L=>{if(!L||L.length<2){l([]);return}a(!0);try{const P=await Pe.get(`/users/search?q=${encodeURIComponent(L)}&role=student&limit=10`);P.success?l(P.data):l([])}catch(P){console.error("Error searching students:",P),x({title:"Error",description:"Failed to search students.",variant:"destructive"}),l([])}finally{a(!1)}},C=L=>{h(L),v(P=>({...P,rollNumber:L.student_id||"",email:L.email||""})),l([]),p("")},T=(L,P)=>{v(B=>({...B,[L]:P})),L==="studentSearch"&&(p(P),b(P))},M=async L=>{var q,z;if(L.preventDefault(),!f){x({title:"Error",description:"Please select a student first.",variant:"destructive"});return}const P={leetcode:g.leetcode,codechef:g.codechef,hackerrank:g.hackerrank,hackerearth:g.hackerearth,geeksforgeeks:g.geeksforgeeks};if(!Object.values(P).some(k=>k.trim())){x({title:"Error",description:"Please provide at least one platform username.",variant:"destructive"});return}c(!0);try{const k=[];Object.entries(P).forEach(([R,S])=>{S.trim()&&k.push({platform:R,username:S.trim()})});for(const R of k)await Pe.post("/coding-profiles/profiles",{student_id:f.id,platform:R.platform,username:R.username});x({title:"Success",description:`Added ${k.length} profile(s) for ${f.name}`}),v({studentSearch:"",rollNumber:"",email:"",leetcode:"",codechef:"",hackerrank:"",hackerearth:"",geeksforgeeks:""}),h(null),p(""),s(!1),t&&t()}catch(k){console.error("Error adding profiles:",k),x({title:"Error",description:((z=(q=k.response)==null?void 0:q.data)==null?void 0:z.message)||"Failed to add profiles.",variant:"destructive"})}finally{c(!1)}},U=()=>{v({studentSearch:"",rollNumber:"",email:"",leetcode:"",codechef:"",hackerrank:"",hackerearth:"",geeksforgeeks:""}),h(null),p(""),l([]),s(!1)};return e.jsxs(Ht,{open:r,onOpenChange:s,children:[e.jsx(xa,{asChild:!0,children:e.jsxs(ee,{variant:"outline",children:[e.jsx(rm,{className:"h-4 w-4 mr-2"})," Add Profile"]})}),e.jsxs(Zt,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[e.jsx(Jt,{children:e.jsx(es,{children:"Add Student Coding Profile"})}),e.jsxs("form",{onSubmit:M,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"studentSearch",children:"Search Student"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ye,{id:"studentSearch",type:"text",placeholder:"Search by name, roll number, or email...",value:g.studentSearch,onChange:L=>T("studentSearch",L.target.value),className:"w-full"}),o&&e.jsx(Tr,{className:"absolute right-3 top-3 h-4 w-4 animate-spin"})]}),d.length>0&&e.jsx("div",{className:"border rounded-md max-h-40 overflow-y-auto",children:d.map(L=>e.jsxs("div",{className:"p-2 hover:bg-muted cursor-pointer border-b last:border-b-0",onClick:()=>C(L),children:[e.jsx("div",{className:"font-medium",children:L.name}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[L.student_id&&`Roll: ${L.student_id}`,L.student_id&&L.email&&"  ",L.email&&`Email: ${L.email}`]})]},L.id))}),m&&m.length>=2&&d.length===0&&!o&&e.jsxs("div",{className:"p-2 text-sm text-gray-500 bg-gray-50 rounded-md",children:['No students found for "',m,'"']})]}),f&&e.jsxs("div",{className:"p-3 bg-muted rounded-md",children:[e.jsx("div",{className:"font-medium",children:"Selected Student:"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[f.name,f.student_id&&` (${f.student_id})`]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:f.email})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"Platform Usernames"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"leetcode",children:"LeetCode"}),e.jsx(Ye,{id:"leetcode",type:"text",placeholder:"Enter LeetCode username",value:g.leetcode,onChange:L=>T("leetcode",L.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"codechef",children:"CodeChef"}),e.jsx(Ye,{id:"codechef",type:"text",placeholder:"Enter CodeChef username",value:g.codechef,onChange:L=>T("codechef",L.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"hackerrank",children:"HackerRank"}),e.jsx(Ye,{id:"hackerrank",type:"text",placeholder:"Enter HackerRank username",value:g.hackerrank,onChange:L=>T("hackerrank",L.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"hackerearth",children:"HackerEarth"}),e.jsx(Ye,{id:"hackerearth",type:"text",placeholder:"Enter HackerEarth username",value:g.hackerearth,onChange:L=>T("hackerearth",L.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{htmlFor:"geeksforgeeks",children:"GeeksforGeeks"}),e.jsx(Ye,{id:"geeksforgeeks",type:"text",placeholder:"Enter GeeksforGeeks username",value:g.geeksforgeeks,onChange:L=>T("geeksforgeeks",L.target.value)})]})]})]}),e.jsxs(ir,{children:[e.jsx(ee,{type:"button",variant:"outline",onClick:U,children:"Cancel"}),e.jsx(ee,{type:"submit",disabled:n||!f,children:n?e.jsxs(e.Fragment,{children:[e.jsx(Tr,{className:"h-4 w-4 mr-2 animate-spin"})," Adding..."]}):"Add Profiles"})]})]})]})]})},EV=()=>{const[t,r]=A.useState([]),[s,n]=A.useState(!0),[c,o]=A.useState(""),[a,d]=A.useState("all"),[l,i]=A.useState([]),[u,f]=A.useState(new Set),[h,m]=A.useState(new Map),[p,x]=A.useState("all"),[g,v]=A.useState("all"),[y,b]=A.useState("all"),[C,T]=A.useState("all"),[M,U]=A.useState([]),[L,P]=A.useState([]),[B,q]=A.useState([]),[z,k]=A.useState(!1),[R,S]=A.useState(null);A.useState(!1),A.useState(null);const[w,_]=A.useState({}),[j,N]=A.useState(!1),[E,I]=A.useState(!1);A.useState(!1),A.useState(null),A.useState(""),A.useState({});const[D,V]=A.useState(!1),[H,G]=A.useState(null),[$,Y]=A.useState([]);A.useState(null),A.useState({platform:"",username:""});const[F,O]=A.useState(!1),[W,K]=A.useState(""),[Q,X]=A.useState(""),[te,de]=A.useState(!1),[xe,ne]=A.useState(null),[ge,be]=A.useState(!1),[Ie,Ce]=A.useState(""),[Oe,Ee]=A.useState(""),[pe,Ae]=A.useState(!1),{toast:st}=Js(),qe=[{name:"leetcode",displayName:"LeetCode",color:"bg-orange-100 text-orange-800"},{name:"codechef",displayName:"CodeChef",color:"bg-red-100 text-red-800"},{name:"hackerrank",displayName:"HackerRank",color:"bg-green-100 text-green-800"},{name:"hackerearth",displayName:"HackerEarth",color:"bg-blue-100 text-blue-800"},{name:"geeksforgeeks",displayName:"GeeksforGeeks",color:"bg-purple-100 text-purple-800"}];A.useEffect(()=>{ae(),He(),$e()},[c,a,p,g,y]),A.useEffect(()=>{t.length>0&&ie()},[t.length]);const ie=async()=>{try{I(!0);const ye=t.map(Qe=>Qe.student_id).map(async Qe=>{try{const he=await Pe.getCachedPlatformStatistics(Qe);if(he.success)return{studentId:Qe,data:he.data.platformStatistics}}catch{}return{studentId:Qe,data:null}}),ke=await Promise.all(ye),Fe={},Ke=new Set;ke.forEach(({studentId:Qe,data:he})=>{he&&(Fe[Qe]=he,Ke.add(Qe))}),_(Qe=>({...Qe,...Fe})),f(Ke),m(Qe=>{const he=new Map(Qe);return Object.entries(Fe).forEach(([je,Ne])=>{he.set(je,{data:Ne,timestamp:Date.now(),cached:!0})}),he}),Object.keys(Fe).length>0&&st({title:"Cached Data Loaded",description:`Loaded cached platform statistics for ${Object.keys(Fe).length} students`,variant:"default"})}catch(re){console.error("Error loading cached platform stats:",re),st({title:"Warning",description:"Failed to load cached platform statistics",variant:"destructive"})}finally{I(!1)}};A.useEffect(()=>{const re=setTimeout(()=>{ae()},150);return()=>clearTimeout(re)},[c]);const ae=async()=>{try{n(!0);const re=a==="all"?"":a,ye=new URLSearchParams({page:"1",limit:"10000",search:c,platform:re});p&&p!=="all"&&ye.append("college",p),g&&g!=="all"&&ye.append("department",g),y&&y!=="all"&&ye.append("batch",y);const ke=await Pe.get(`/coding-profiles/students?${ye.toString()}`);ke.success?r(ke.data.students):r([])}catch{st({title:"Error",description:"Failed to fetch students data",variant:"destructive"}),r([])}finally{n(!1)}},we=re=>{ae()},ve=()=>{ae()},He=async()=>{try{const re=await Pe.get("/coding-profiles/platforms");re.success&&i(re.data)}catch{}},$e=async()=>{try{const re=await Pe.get("/colleges");re.success&&U(re.data.colleges||[])}catch{}},ue=async re=>{try{const ye=await Pe.get(`/colleges/${re}/departments`);ye.success&&P(ye.data||[])}catch{}},oe=async re=>{try{const ye=await Pe.get(`/colleges/${re}/batches`);ye.success&&q(ye.data||[])}catch{}},_e=re=>{S(re),k(!0)},Me=async()=>{if(R)try{st({title:"Deleting",description:"Deleting all profiles for this student..."}),(await Pe.delete(`/coding-profiles/student/${R.student_id}`)).success&&(st({title:"Success",description:"Student profiles deleted successfully"}),ae(),fetchAnalytics())}catch{st({title:"Error",description:"Failed to delete student profiles",variant:"destructive"})}finally{k(!1),S(null)}},ze=re=>{G(re);const ye=[];re.platforms&&Object.keys(re.platforms).forEach(ke=>{re.platforms[ke]&&ye.push({platform:ke,username:re.platforms[ke].username,id:re.platforms[ke].id})}),Y(ye),V(!0)},Xe=re=>{var ke;const ye=(ke=w[re])==null?void 0:ke.hackerrank;ye&&(ne(ye),de(!0))},Ve=async re=>{if(u.has(re)||w[re])return;const ye=re,ke=h.get(ye),Fe=5*60*1e3;if(ke&&Date.now()-ke.timestamp<Fe){_(Ke=>({...Ke,[re]:ke.data})),f(Ke=>new Set([...Ke,re]));return}try{N(!0),f(Qe=>new Set([...Qe,re]));const Ke=await Pe.get(`/coding-profiles/student/${re}/statistics`);if(Ke.success){const Qe=Ke.data.platformStatistics;_(he=>({...he,[re]:Qe})),m(he=>{const je=new Map(he);return je.set(ye,{data:Qe,timestamp:Date.now()}),je})}}catch{f(Qe=>{const he=new Set(Qe);return he.delete(re),he}),st({title:"Error",description:"Failed to fetch platform statistics. You can enter data manually.",variant:"destructive"})}finally{N(!1)}},ot=async(re,ye=!1)=>{var Fe,Ke,Qe,he;let ke;if(ye?(ke=re,f(new Set),m(new Map)):ke=re.filter(je=>!u.has(je)&&!w[je]),!(ke.length===0&&!ye))try{I(!0),f(Ne=>new Set([...Ne,...ke]));const je=await Pe.fetchBatchPlatformStatistics(ke,ye);if(je.success){const Ne=je.data.results;_(tt=>({...tt,...Ne})),m(tt=>{const jt=new Map(tt);return Object.entries(Ne).forEach(([dt,kt])=>{kt&&jt.set(dt,{data:kt,timestamp:Date.now()})}),jt}),st({title:"Success",description:`Loaded statistics for ${je.data.processedCount} students`})}}catch(je){f(jt=>{const dt=new Set(jt);return ke.forEach(kt=>dt.delete(kt)),dt});const Ne=((Fe=je.message)==null?void 0:Fe.toLowerCase().includes("timeout"))||((Ke=je.message)==null?void 0:Ke.toLowerCase().includes("too long")),tt=((Qe=je.message)==null?void 0:Qe.toLowerCase().includes("empty response"))||((he=je.message)==null?void 0:he.toLowerCase().includes("failed to fetch"))||je.name==="TypeError";st({title:tt?"Server Error":Ne?"Request Timeout":"Error",description:tt?"The server took too long to respond or encountered an error. The request is being processed in batches. Please wait a moment and try again, or refresh the page.":Ne?"The request took too long to complete. This may happen when processing many students. Please try with fewer students or try again later.":je.message||"Failed to load batch statistics",variant:"destructive"})}finally{I(!1)}},xt=re=>{x(re),v("all"),b("all"),q([]),P([]),re&&re!=="all"&&(ue(re),oe(re))},ft=re=>!re||!Array.isArray(re)||re.length===0?"No badges earned":re.map(ye=>`(${ye.name||"Unknown"} - ${ye.stars||0} - ${ye.level||"N/A"})`).join(", "),at=re=>{var ke,Fe;let ye="coding_profiles_export";if(re.college!=="all"){const Ke=M.find(Qe=>Qe.id===re.college);ye+=`_${((ke=Ke==null?void 0:Ke.name)==null?void 0:ke.replace(/\s+/g,"_"))||"Unknown"}`}if(re.department!=="all"){const Ke=L.find(Qe=>Qe.id===re.department);ye+=`_${((Fe=Ke==null?void 0:Ke.name)==null?void 0:Fe.replace(/\s+/g,"_"))||"Unknown"}`}return re.batch!=="all"&&(ye+=`_${re.batch}`),ye+=`_${new Date().toISOString().split("T")[0]}.xlsx`,ye},Be=()=>{if(t.length===0){st({title:"No Data",description:"No students data available to export",variant:"destructive"});return}if(E){st({title:"Loading Data",description:"Please wait for platform statistics to finish loading",variant:"destructive"});return}if(Object.keys(w).length===0){st({title:"No Platform Data",description:"Please load platform statistics first by clicking 'Load Stats'",variant:"destructive"});return}const ye=at({college:p,department:g,batch:y});Ce(ye),Ee(ye),be(!0)},Ue=async()=>{Ae(!0);try{const re=t.map(Qe=>{var tt,jt,dt,kt,gt,wt,Pt,bt,yt,Ge,J,ce;const he=w[Qe.student_id]||{},je=he.hackerrank||{},Ne=ft(je.badges);return{Name:Qe.student_name,Email:Qe.student_email,"Roll Number":Qe.student_roll_number,"College Name":Qe.college_name,Department:Qe.department,Batch:Qe.batch,LeetCode_Total_Solved:((tt=he.leetcode)==null?void 0:tt.problemsSolved)||0,LeetCode_Easy_Solved:((jt=he.leetcode)==null?void 0:jt.easySolved)||0,LeetCode_Medium_Solved:((dt=he.leetcode)==null?void 0:dt.mediumSolved)||0,LeetCode_Hard_Solved:((kt=he.leetcode)==null?void 0:kt.hardSolved)||0,LeetCode_Rank:((gt=he.leetcode)==null?void 0:gt.rank)||"N/A",CodeChef_Problems_Solved:((wt=he.codechef)==null?void 0:wt.problemsSolved)||0,HackerRank_Badges:Ne,HackerEarth_Problems_Solved:((Pt=he.hackerearth)==null?void 0:Pt.problemsSolved)||0,HackerEarth_Points:((bt=he.hackerearth)==null?void 0:bt.points)||0,GeeksforGeeks_Total_Solved:((yt=he.geeksforgeeks)==null?void 0:yt.problemsSolved)||0,GeeksforGeeks_Easy_Solved:((Ge=he.geeksforgeeks)==null?void 0:Ge.easySolved)||0,GeeksforGeeks_Medium_Solved:((J=he.geeksforgeeks)==null?void 0:J.mediumSolved)||0,GeeksforGeeks_Hard_Solved:((ce=he.geeksforgeeks)==null?void 0:ce.hardSolved)||0}}),ye=Oe.trim()||Ie,ke=await SV(()=>import("./xlsx-6ed613d4.js"),[]),Fe=ke.utils.json_to_sheet(re),Ke=ke.utils.book_new();ke.utils.book_append_sheet(Ke,Fe,"Coding Profiles"),ke.writeFile(Ke,ye),st({title:"Export Successful",description:`Data exported to ${ye}`}),be(!1)}catch{st({title:"Export Failed",description:"Failed to export data. Please try again.",variant:"destructive"})}finally{Ae(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"hidden md:flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Coding Profiles Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage and track students' coding platform profiles"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{"data-add-profile-trigger":!0,children:e.jsx(kV,{onProfileAdded:ve})}),e.jsx("div",{"data-bulk-upload-trigger":!0,children:e.jsx(CV,{onUploadComplete:we})}),e.jsx(Bl,{children:e.jsxs(zl,{children:[e.jsx(Ul,{asChild:!0,children:e.jsxs(ee,{onClick:Be,disabled:s||t.length===0||E||Object.keys(w).length===0,children:[e.jsx(Zs,{className:"h-4 w-4 mr-2"}),"Export Data"]})}),e.jsx(Vl,{children:s?"Loading students...":t.length===0?"No students data available":E?"Loading platform statistics...":Object.keys(w).length===0?"Click 'Load Stats' to enable export":"Ready to export data"})]})})]})]}),e.jsx("div",{className:"md:hidden",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Coding Profiles"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage students' coding profiles"})]}),e.jsxs(Ri,{children:[e.jsx(Pi,{asChild:!0,children:e.jsxs(ee,{variant:"outline",size:"sm",children:[e.jsx(Np,{className:"h-4 w-4 mr-2"}),"Actions"]})}),e.jsxs(Xa,{align:"end",className:"w-48 p-1",children:[e.jsxs(br,{onClick:()=>{const re=document.querySelector("[data-add-profile-trigger]");re&&re.click()},className:"px-3 py-2 text-sm",children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),"Add Profile"]}),e.jsxs(br,{onClick:()=>{const re=document.querySelector("[data-bulk-upload-trigger]");re&&re.click()},className:"px-3 py-2 text-sm",children:[e.jsx(va,{className:"h-4 w-4 mr-2"}),"Bulk Upload"]}),e.jsxs(br,{onClick:Be,disabled:s||t.length===0||E||Object.keys(w).length===0,className:"px-3 py-2 text-sm",children:[e.jsx(Zs,{className:"h-4 w-4 mr-2"}),"Export Data"]})]})]})]})})]}),e.jsxs(Dr,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(Ir,{children:[e.jsx(zt,{value:"overview",children:"Overview"}),e.jsx(zt,{value:"students",children:"Students"})]}),e.jsxs(Kt,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(Re,{children:[e.jsxs(lt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(mt,{className:"text-sm font-medium",children:"Total Students"}),e.jsx(as,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(De,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Students with coding profiles"})]})]}),e.jsxs(Re,{children:[e.jsxs(lt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(mt,{className:"text-sm font-medium",children:"Active Platforms"}),e.jsx(Gr,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(De,{children:[e.jsx("div",{className:"text-2xl font-bold",children:qe.filter(re=>t.some(ye=>{var ke;return(ke=ye.platforms)==null?void 0:ke[re.name]})).length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Platforms in use"})]})]}),e.jsxs(Re,{className:"sm:col-span-2 lg:col-span-2",children:[e.jsxs(lt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(mt,{className:"text-sm font-medium",children:"Platform Distribution"}),e.jsx(Rr,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(De,{children:[e.jsx("div",{className:"block sm:hidden space-y-3",children:qe.map(re=>{const ye=t.filter(ke=>{var Fe;return(Fe=ke.platforms)==null?void 0:Fe[re.name]}).length;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:re.name==="leetcode"?"#f97316":re.name==="codechef"?"#dc2626":re.name==="hackerrank"?"#16a34a":re.name==="hackerearth"?"#2563eb":"#9333ea"}}),e.jsx("span",{className:"text-sm font-medium",children:re.displayName})]}),e.jsx("div",{className:"text-lg font-bold text-primary",children:ye})]},re.name)})}),e.jsx("div",{className:"hidden sm:grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:qe.map(re=>{const ye=t.filter(ke=>{var Fe;return(Fe=ke.platforms)==null?void 0:Fe[re.name]}).length;return e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center mb-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:re.name==="leetcode"?"#f97316":re.name==="codechef"?"#dc2626":re.name==="hackerrank"?"#16a34a":re.name==="hackerearth"?"#2563eb":"#9333ea"}}),e.jsx("span",{className:"text-xs font-medium",children:re.displayName})]}),e.jsx("div",{className:"text-lg font-bold text-primary",children:ye})]},re.name)})})]})]})]}),e.jsxs("div",{className:"grid gap-6 grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(Re,{className:"lg:col-span-1",children:[e.jsxs(lt,{className:"pb-3",children:[e.jsxs(mt,{className:"flex items-center text-lg",children:[e.jsx(so,{className:"h-5 w-5 mr-2 text-yellow-500"}),"Top Performers"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Students with highest problem counts"}),e.jsx("div",{className:"mt-3",children:e.jsxs(At,{value:C,onValueChange:T,children:[e.jsx(St,{className:"w-full",children:e.jsx(Rt,{placeholder:"Filter by college"})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"all",children:"All Colleges"}),M&&Array.isArray(M)&&M.map(re=>e.jsx(Te,{value:re.id.toString(),children:re.name},re.id))]})]})})]}),e.jsx(De,{children:e.jsx("div",{className:"space-y-4",children:(()=>{const re=t.filter(ye=>{if(C&&C!=="all"){const ke=M.find(Ke=>Ke.id===C),Fe=ke==null?void 0:ke.name;return ye.college_id===C||ye.college_name===Fe}return!0}).filter(ye=>w[ye.student_id]).map(ye=>{const ke=Object.entries(w[ye.student_id]||{}).filter(([Fe,Ke])=>Fe!=="hackerrank").reduce((Fe,[Ke,Qe])=>Fe+((Qe==null?void 0:Qe.problemsSolved)||0),0);return{student:ye,totalProblems:ke}}).sort((ye,ke)=>ke.totalProblems-ye.totalProblems).slice(0,5);return re.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(so,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:C==="all"?"No student data available":"No students found for selected college"})]}):re.map(({student:ye,totalProblems:ke},Fe)=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg bg-muted/50 hover:bg-muted/70 transition-colors",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/10 text-primary font-bold text-sm",children:Fe+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm truncate",children:ye.student_name}),e.jsxs("div",{className:"text-xs text-muted-foreground truncate",children:[ye.college_name,"  ",ye.department]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-primary",children:ke}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"problems"})]})]},Fe))})()})})]}),e.jsxs(Re,{className:"lg:col-span-1",children:[e.jsxs(lt,{className:"pb-3",children:[e.jsxs(mt,{className:"flex items-center text-lg",children:[e.jsx(as,{className:"h-5 w-5 mr-2 text-blue-500"}),"College Distribution"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Students across institutions"})]}),e.jsx(De,{children:e.jsx("div",{className:"space-y-3",children:Object.entries(t.reduce((re,ye)=>{const ke=ye.college_name||"Unknown";return re[ke]=(re[ke]||0)+1,re},{})).sort(([,re],[,ye])=>ye-re).slice(0,6).map(([re,ye],ke)=>e.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-blue-100 text-blue-600 font-bold text-xs",children:ke+1}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("div",{className:"font-medium text-sm truncate",children:re})}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"font-bold text-blue-600",children:ye})})]},re))})})]}),e.jsxs(Re,{className:"lg:col-span-1",children:[e.jsxs(lt,{className:"pb-3",children:[e.jsxs(mt,{className:"flex items-center text-lg",children:[e.jsx(Rr,{className:"h-5 w-5 mr-2 text-green-500"}),"Department Distribution"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Students by academic department"})]}),e.jsx(De,{children:e.jsx("div",{className:"space-y-3",children:Object.entries(t.reduce((re,ye)=>{const ke=ye.department||"Unknown";return re[ke]=(re[ke]||0)+1,re},{})).sort(([,re],[,ye])=>ye-re).slice(0,6).map(([re,ye],ke)=>e.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-green-100 text-green-600 font-bold text-xs",children:ke+1}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("div",{className:"font-medium text-sm truncate",children:re})}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"font-bold text-green-600",children:ye})})]},re))})})]})]})]}),e.jsx(Kt,{value:"students",className:"space-y-6",children:e.jsxs(Re,{children:[e.jsxs(lt,{children:[e.jsx("div",{className:"flex items-center justify-between",children:E&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-blue-600",children:[e.jsx(Is,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:"Loading cached platform data..."})]})}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"lg:hidden space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(hn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(Ye,{placeholder:"Search students by name, email, or roll number...",value:c,onChange:re=>o(re.target.value),className:"pl-10 w-full h-11 text-base"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Platform"}),e.jsxs(At,{value:a,onValueChange:d,children:[e.jsx(St,{className:"w-full h-11",children:e.jsx(Rt,{placeholder:"Select Platform"})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"all",children:"All Platforms"}),qe.map(re=>e.jsx(Te,{value:re.name,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:re.name==="leetcode"?"#f97316":re.name==="codechef"?"#dc2626":re.name==="hackerrank"?"#16a34a":re.name==="hackerearth"?"#2563eb":"#9333ea"}}),e.jsx("span",{children:re.displayName})]})},re.name))]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"College"}),e.jsxs(At,{value:p,onValueChange:xt,children:[e.jsx(St,{className:"w-full h-11",children:e.jsx(Rt,{placeholder:"Select College"})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"all",children:"All Colleges"}),M&&Array.isArray(M)&&M.map(re=>e.jsx(Te,{value:re.id.toString(),children:re.name},re.id))]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Department"}),e.jsxs(At,{value:g,onValueChange:v,disabled:!p||p==="all",children:[e.jsx(St,{className:"w-full h-11",children:e.jsx(Rt,{placeholder:!p||p==="all"?"Select College First":"Select Department"})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"all",children:"All Departments"}),L&&Array.isArray(L)&&L.map((re,ye)=>e.jsx(Te,{value:re.name,children:re.name},re.name||ye))]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Batch"}),e.jsxs(At,{value:y,onValueChange:b,disabled:!p||p==="all",children:[e.jsx(St,{className:"w-full h-11",children:e.jsx(Rt,{placeholder:!p||p==="all"?"Select College First":"Select Batch"})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"all",children:"All Batches"}),B&&Array.isArray(B)&&B.map(re=>e.jsx(Te,{value:re.name,children:re.name},re.id))]})]})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs(ee,{onClick:()=>ot(t.map(re=>re.student_id),!0),disabled:E,variant:"outline",size:"lg",className:"w-full sm:w-auto h-12 text-base font-medium",children:[e.jsx(Is,{className:`h-5 w-5 mr-2 ${E?"animate-spin":""}`}),"Refresh Platform Statistics"]})})]}),e.jsxs("div",{className:"hidden lg:flex flex-col lg:flex-row gap-3 items-start lg:items-center",children:[e.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[e.jsx(hn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(Ye,{placeholder:"Search students...",value:c,onChange:re=>o(re.target.value),className:"pl-10 w-full"})]}),e.jsxs(At,{value:a,onValueChange:d,children:[e.jsx(St,{className:"w-full lg:w-[160px]",children:e.jsx(Rt,{placeholder:"Platform"})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"all",children:"All Platforms"}),qe.map(re=>e.jsx(Te,{value:re.name,children:re.displayName},re.name))]})]}),e.jsxs(At,{value:p,onValueChange:xt,children:[e.jsx(St,{className:"w-full lg:w-[160px]",children:e.jsx(Rt,{placeholder:"College"})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"all",children:"All Colleges"}),M&&Array.isArray(M)&&M.map(re=>e.jsx(Te,{value:re.id.toString(),children:re.name},re.id))]})]}),e.jsxs(At,{value:g,onValueChange:v,disabled:!p||p==="all",children:[e.jsx(St,{className:"w-full lg:w-[160px]",children:e.jsx(Rt,{placeholder:!p||p==="all"?"Select College First":"Department"})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"all",children:"All Departments"}),L&&Array.isArray(L)&&L.map((re,ye)=>e.jsx(Te,{value:re.name,children:re.name},re.name||ye))]})]}),e.jsxs(At,{value:y,onValueChange:b,disabled:!p||p==="all",children:[e.jsx(St,{className:"w-full lg:w-[120px]",children:e.jsx(Rt,{placeholder:!p||p==="all"?"Select College First":"Batch"})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"all",children:"All Batches"}),B&&Array.isArray(B)&&B.map(re=>e.jsx(Te,{value:re.name,children:re.name},re.id))]})]}),e.jsxs(ee,{onClick:()=>ot(t.map(re=>re.student_id),!0),disabled:E,variant:"outline",size:"sm",className:"w-full lg:w-auto",children:[e.jsx(Is,{className:`h-4 w-4 mr-2 ${E?"animate-spin":""}`}),e.jsx("span",{className:"hidden sm:inline",children:"Refresh Stats"}),e.jsx("span",{className:"sm:hidden",children:"Refresh"})]})]})]})]}),e.jsx(De,{children:s?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx(Is,{className:"h-6 w-6 animate-spin"})}):e.jsxs("div",{className:"space-y-4",children:[t.length>0?e.jsx(Bl,{children:e.jsxs("div",{children:[e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs($o,{children:[e.jsx(Bo,{children:e.jsxs(_n,{children:[e.jsx(Xt,{className:"min-w-[100px]",children:"Name"}),e.jsx(Xt,{className:"min-w-[150px]",children:"Email"}),e.jsx(Xt,{className:"min-w-[80px]",children:"Roll Number"}),e.jsx(Xt,{className:"min-w-[120px]",children:"College"}),e.jsx(Xt,{className:"min-w-[100px]",children:"Department"}),e.jsx(Xt,{className:"min-w-[60px]",children:"Batch"}),e.jsx(Xt,{className:"text-center min-w-[70px]",children:"LeetCode"}),e.jsx(Xt,{className:"text-center min-w-[70px]",children:"CodeChef"}),e.jsx(Xt,{className:"text-center min-w-[70px]",children:"HackerRank"}),e.jsx(Xt,{className:"text-center min-w-[70px]",children:"HackerEarth"}),e.jsx(Xt,{className:"text-center min-w-[70px]",children:"GeeksforGeeks"}),e.jsx(Xt,{className:"text-center min-w-[140px]",children:"Links & Actions"})]})}),e.jsx(zo,{children:t.filter(re=>a!=="all"?re.platforms&&re.platforms[a]:!0).map(re=>e.jsxs(_n,{children:[e.jsx(ns,{className:"font-medium truncate",children:re.student_name}),e.jsx(ns,{className:"truncate",children:re.student_email&&re.student_email.length>16?`${re.student_email.substring(0,16)}...`:re.student_email}),e.jsx(ns,{className:"truncate",children:re.student_roll_number||"N/A"}),e.jsx(ns,{className:"truncate",children:re.college_name||"N/A"}),e.jsx(ns,{className:"truncate",children:re.department||"N/A"}),e.jsx(ns,{className:"truncate",children:re.batch||"N/A"}),["leetcode","codechef","hackerrank","hackerearth","geeksforgeeks"].map(ye=>{var ke,Fe;return e.jsx(ns,{className:"text-center",children:(ke=re.platforms)!=null&&ke[ye]?(Fe=w[re.student_id])!=null&&Fe[ye]?ye==="leetcode"||ye==="hackerrank"||ye==="geeksforgeeks"?e.jsxs(zl,{delayDuration:100,children:[e.jsx(Ul,{asChild:!0,children:e.jsx("div",{className:"font-bold text-lg cursor-pointer hover:opacity-80 transition-opacity",style:{color:ye==="leetcode"?"#f97316":ye==="codechef"?"#dc2626":ye==="hackerrank"?"#16a34a":ye==="hackerearth"?"#2563eb":"#9333ea"},onClick:()=>{ye==="hackerrank"&&Xe(re.student_id)},children:w[re.student_id][ye].problemsSolved||"N/A"})}),e.jsx(Vl,{children:ye==="leetcode"||ye==="geeksforgeeks"?e.jsx("div",{className:"text-xs min-w-[180px]",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"text-green-400 font-semibold",children:["Easy: ",String(w[re.student_id][ye].easySolved||"N/A")]})}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"text-yellow-400 font-semibold",children:["Medium: ",String(w[re.student_id][ye].mediumSolved||"N/A")]})}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"text-red-400 font-semibold",children:["Hard: ",String(w[re.student_id][ye].hardSolved||"N/A")]})}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"text-blue-400 font-semibold",children:["Rank: ",ye==="geeksforgeeks"?"N/A":String(w[re.student_id][ye].rank||"N/A")]})})]})}):ye==="hackerrank"?e.jsx("div",{className:"text-xs max-w-[160px]",children:e.jsx("div",{className:"text-center p-2  rounded border border-blue-400/30",children:e.jsx("div",{className:"text-blue-300 text-xs font-medium",children:"Click view details"})})}):ye==="hackerearth"?e.jsx("div",{className:"text-xs min-w-[180px]",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"text-blue-400 font-semibold",children:["Points: ",String(w[re.student_id][ye].points||"N/A")]})}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"text-green-400 font-semibold",children:["Problems: ",String(w[re.student_id][ye].problemsSolved||"N/A")]})})]})}):null})]}):e.jsx("div",{className:"font-bold text-lg",style:{color:ye==="leetcode"?"#f97316":ye==="codechef"?"#dc2626":ye==="hackerrank"?"#16a34a":ye==="hackerearth"?"#2563eb":"#9333ea"},children:w[re.student_id][ye].problemsSolved||"N/A"}):e.jsx("div",{className:"text-gray-400",children:u.has(re.student_id)?"Loading...":e.jsx(ee,{size:"sm",variant:"ghost",onClick:()=>Ve(re.student_id),className:"text-xs",children:"Load"})}):e.jsx("span",{className:"text-gray-400 text-xs",children:"No Profile"})},ye)}),e.jsx(ns,{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[re.platforms&&Object.keys(re.platforms).length>0?e.jsxs(Ri,{children:[e.jsx(Pi,{asChild:!0,children:e.jsxs(ee,{size:"sm",variant:"outline",className:"text-xs whitespace-nowrap",children:[e.jsx(Rh,{className:"h-3 w-3 mr-1"}),"Links"]})}),e.jsx(Xa,{align:"end",className:"min-w-[200px]",children:Object.keys(re.platforms).map(ye=>{if(re.platforms[ye]){const ke=qe.find(Qe=>Qe.name===ye),Fe=re.platforms[ye].username,Ke=re.platforms[ye].profile_url;return e.jsx(br,{asChild:!0,children:e.jsxs("a",{href:Ke||`https://${ye==="leetcode"?"leetcode.com/u":ye==="codechef"?"www.codechef.com/users":ye==="hackerrank"?"www.hackerrank.com/profile":ye==="hackerearth"?"www.hackerearth.com/@":"www.geeksforgeeks.org/user"}/${Fe}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center w-full",children:[e.jsx(Rh,{className:"h-3 w-3 mr-2"}),e.jsx("span",{className:"w-2 h-2 rounded-full mr-2",style:{backgroundColor:ye==="leetcode"?"#f97316":ye==="codechef"?"#dc2626":ye==="hackerrank"?"#16a34a":ye==="hackerearth"?"#2563eb":"#9333ea"}}),(ke==null?void 0:ke.displayName)||ye]})},ye)}return null})})]}):e.jsx("span",{className:"text-gray-400 text-xs",children:"No Links"}),e.jsxs(Ri,{children:[e.jsx(Pi,{asChild:!0,children:e.jsx(ee,{size:"sm",variant:"outline",className:"whitespace-nowrap",children:e.jsx(Np,{className:"h-4 w-4"})})}),e.jsxs(Xa,{align:"end",children:[e.jsxs(br,{onClick:()=>Ve(re.student_id),children:[e.jsx(Is,{className:"h-4 w-4 mr-2"}),"Refresh Stats"]}),e.jsxs(br,{onClick:()=>ze(re),children:[e.jsx(wr,{className:"h-4 w-4 mr-2"}),"Edit Profiles"]}),e.jsxs(br,{onClick:()=>_e(re),className:"text-red-600 focus:text-red-600",children:[e.jsx(Ds,{className:"h-4 w-4 mr-2"}),"Delete All"]})]})]})]})})]},re.student_id))})]})}),e.jsx("div",{className:"lg:hidden space-y-4",children:t.filter(re=>a!=="all"?re.platforms&&re.platforms[a]:!0).map(re=>e.jsx(Re,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg text-foreground",children:re.student_name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:re.student_email}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Roll: ",re.student_roll_number||"N/A"]})]}),e.jsxs(Ri,{children:[e.jsx(Pi,{asChild:!0,children:e.jsx(ee,{size:"sm",variant:"outline",children:e.jsx(Np,{className:"h-4 w-4"})})}),e.jsxs(Xa,{align:"end",children:[e.jsxs(br,{onClick:()=>Ve(re.student_id),children:[e.jsx(Is,{className:"h-4 w-4 mr-2"}),"Refresh Stats"]}),e.jsxs(br,{onClick:()=>ze(re),children:[e.jsx(wr,{className:"h-4 w-4 mr-2"}),"Edit Profiles"]}),e.jsxs(br,{onClick:()=>_e(re),className:"text-red-600 focus:text-red-600",children:[e.jsx(Ds,{className:"h-4 w-4 mr-2"}),"Delete All"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"College:"}),e.jsx("p",{className:"font-medium truncate",children:re.college_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Department:"}),e.jsx("p",{className:"font-medium truncate",children:re.department||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Batch:"}),e.jsx("p",{className:"font-medium truncate",children:re.batch||"N/A"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-foreground",children:"Platform Statistics"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-2",children:["leetcode","codechef","hackerrank","hackerearth","geeksforgeeks"].map(ye=>{var ke,Fe;return e.jsxs("div",{className:"flex flex-col items-center p-2 bg-muted rounded text-center",children:[e.jsx("span",{className:"text-xs font-medium capitalize mb-1",children:ye}),e.jsx("div",{className:"text-center",children:(ke=re.platforms)!=null&&ke[ye]?(Fe=w[re.student_id])!=null&&Fe[ye]?e.jsx("div",{className:"font-bold text-sm",style:{color:ye==="leetcode"?"#f97316":ye==="codechef"?"#dc2626":ye==="hackerrank"?"#16a34a":ye==="hackerearth"?"#2563eb":"#9333ea"},children:w[re.student_id][ye].problemsSolved||"N/A"}):e.jsx("div",{className:"text-muted-foreground text-xs",children:u.has(re.student_id)?"Loading...":"Load"}):e.jsx("span",{className:"text-muted-foreground text-xs",children:"No Profile"})})]},ye)})})]}),re.platforms&&Object.keys(re.platforms).length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-foreground",children:"Profile Links"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.keys(re.platforms).map(ye=>{var ke;if(re.platforms[ye]){const Fe=qe.find(he=>he.name===ye),Ke=re.platforms[ye].username,Qe=re.platforms[ye].profile_url;return e.jsxs("a",{href:Qe||`https://${ye==="leetcode"?"leetcode.com/u":ye==="codechef"?"www.codechef.com/users":ye==="hackerrank"?"www.hackerrank.com/profile":ye==="hackerearth"?"www.hackerearth.com/@":"www.geeksforgeeks.org/user"}/${Ke}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center px-2 py-1 text-xs bg-primary/10 text-primary rounded hover:bg-primary/20 transition-colors whitespace-nowrap",children:[e.jsx(Rh,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:(Fe==null?void 0:Fe.displayName)||ye}),e.jsx("span",{className:"sm:hidden",children:((ke=Fe==null?void 0:Fe.displayName)==null?void 0:ke.substring(0,3))||ye.substring(0,3)})]},ye)}return null})})]})]})},re.student_id))})]})}):e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"text-gray-500",children:"No students found"})}),e.jsxs("div",{className:"text-sm text-gray-500 text-center",children:["Showing ",t.length," students"]})]})})]})})]}),e.jsx(Ht,{open:te,onOpenChange:de,children:e.jsxs(Zt,{className:"max-w-md mx-4 sm:mx-0",children:[e.jsx(Jt,{children:e.jsx(es,{className:"text-lg",children:"HackerRank Badges"})}),xe&&e.jsx("div",{className:"space-y-2",children:xe.badges&&Array.isArray(xe.badges)&&xe.badges.length>0?e.jsx("div",{className:"space-y-1",children:xe.badges.map((re,ye)=>{const ke=(re.level||"").toLowerCase(),Ke=(Qe=>{switch(Qe){case"bronze":return{bg:"bg-orange-100",border:"border-orange-300",text:"text-orange-900",accent:"text-orange-700"};case"silver":return{bg:"bg-gray-50",border:"border-gray-200",text:"text-gray-900",accent:"text-gray-600"};case"gold":return{bg:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-900",accent:"text-yellow-600"};default:return{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-900",accent:"text-blue-600"}}})(ke);return e.jsxs("div",{className:`flex items-center justify-between p-2 ${Ke.bg} border ${Ke.border} rounded-md`,children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:`text-sm font-medium ${Ke.text}`,children:re.name||"Unknown Badge"})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-yellow-500 text-xs",children:""}),e.jsx("span",{className:`text-xs font-medium ${Ke.accent}`,children:re.stars||0})]}),e.jsx("div",{className:`text-xs font-medium ${Ke.accent}`,children:re.level||"N/A"})]})]},ye)})}):e.jsxs("div",{className:"text-center py-4 text-gray-500",children:[e.jsx("div",{className:"text-sm font-medium",children:"No badges found"}),e.jsx("div",{className:"text-xs",children:"This student hasn't earned any badges yet"})]})})]})}),e.jsx(Ht,{open:ge,onOpenChange:be,children:e.jsxs(Zt,{className:"max-w-md mx-4 sm:mx-0",children:[e.jsxs(Jt,{children:[e.jsx(es,{className:"text-lg",children:"Export Data"}),e.jsx(ps,{children:"Choose a filename for your export. The file will be downloaded as an Excel (.xlsx) file."})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Filename"}),e.jsx(Ye,{value:Oe,onChange:re=>Ee(re.target.value),placeholder:"Enter filename...",className:"w-full"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Generated filename: ",Ie]})]})}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[e.jsx(ee,{variant:"outline",onClick:()=>be(!1),disabled:pe,children:"Cancel"}),e.jsx(ee,{onClick:Ue,disabled:pe,className:"flex items-center gap-2",children:pe?e.jsxs(e.Fragment,{children:[e.jsx(Is,{className:"h-4 w-4 animate-spin"}),"Exporting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Zs,{className:"h-4 w-4"}),"Download"]})})]})]})}),e.jsx(Ht,{open:D,onOpenChange:V,children:e.jsxs(Zt,{className:"max-w-lg mx-4 sm:mx-0",children:[e.jsx(Jt,{children:e.jsxs(es,{className:"text-lg",children:["Edit Profiles - ",H==null?void 0:H.student_name]})}),e.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[$.map((re,ye)=>{var ke,Fe,Ke,Qe,he,je,Ne,tt,jt;return e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-muted/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 min-w-0 flex-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:(Fe=(ke=qe.find(dt=>dt.name===re.platform))==null?void 0:ke.color)!=null&&Fe.includes("orange")?"#f97316":(Qe=(Ke=qe.find(dt=>dt.name===re.platform))==null?void 0:Ke.color)!=null&&Qe.includes("red")?"#dc2626":(je=(he=qe.find(dt=>dt.name===re.platform))==null?void 0:he.color)!=null&&je.includes("green")?"#16a34a":(tt=(Ne=qe.find(dt=>dt.name===re.platform))==null?void 0:Ne.color)!=null&&tt.includes("blue")?"#2563eb":"#9333ea"}}),e.jsx("span",{className:"text-sm font-medium truncate",children:((jt=qe.find(dt=>dt.name===re.platform))==null?void 0:jt.displayName)||re.platform})]}),e.jsx(Ye,{value:re.username,onChange:dt=>{const kt=[...$];kt[ye].username=dt.target.value,Y(kt)},placeholder:"Username",className:"flex-1 h-8 text-sm"}),e.jsx(ee,{size:"sm",variant:"ghost",onClick:()=>{const dt=$.filter((kt,gt)=>gt!==ye);Y(dt)},className:"h-8 w-8 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",children:e.jsx(Ds,{className:"h-3 w-3"})})]},ye)}),(()=>{const re=$.map(Fe=>Fe.platform),ke=qe.map(Fe=>Fe.name).filter(Fe=>!re.includes(Fe));return ke.length===0?null:e.jsxs(ee,{variant:"outline",onClick:()=>{K(""),X(""),O(!0)},className:"w-full h-8 text-sm",children:[e.jsx(vs,{className:"h-3 w-3 mr-2"}),"Add Profile (",ke.length," remaining)"]})})()]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>V(!1),children:"Cancel"}),e.jsx(ee,{size:"sm",onClick:async()=>{try{for(const re of $)re.id?await Pe.updateStudentCodingProfile(H.student_id,re.id,{platform:re.platform,username:re.username}):await Pe.addCodingProfile(H.student_id,{platform:re.platform,username:re.username});st({title:"Profiles Updated",description:"Coding profiles have been updated successfully"}),V(!1),ae()}catch{st({title:"Error",description:"Failed to update profiles",variant:"destructive"})}},children:"Save"})]})]})}),e.jsx(Ht,{open:F,onOpenChange:O,children:e.jsxs(Zt,{className:"max-w-md mx-4 sm:mx-0",children:[e.jsxs(Jt,{children:[e.jsx(es,{className:"text-lg",children:"Add New Profile"}),e.jsxs(ps,{children:["Add a coding profile for ",H==null?void 0:H.student_name]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Platform"}),e.jsxs(At,{value:W,onValueChange:K,children:[e.jsx(St,{children:e.jsx(Rt,{placeholder:"Select platform"})}),e.jsx(Ct,{children:(()=>{const re=$.map(Fe=>Fe.platform);return qe.map(Fe=>Fe.name).filter(Fe=>!re.includes(Fe)).map(Fe=>{var Qe,he,je,Ne;const Ke=qe.find(tt=>tt.name===Fe);return e.jsx(Te,{value:Fe,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:(Qe=Ke==null?void 0:Ke.color)!=null&&Qe.includes("orange")?"#f97316":(he=Ke==null?void 0:Ke.color)!=null&&he.includes("red")?"#dc2626":(je=Ke==null?void 0:Ke.color)!=null&&je.includes("green")?"#16a34a":(Ne=Ke==null?void 0:Ke.color)!=null&&Ne.includes("blue")?"#2563eb":"#9333ea"}}),e.jsx("span",{children:(Ke==null?void 0:Ke.displayName)||Fe})]})},Fe)})})()})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Username"}),e.jsx(Ye,{value:Q,onChange:re=>X(re.target.value),placeholder:"Enter username",className:"w-full"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>O(!1),children:"Cancel"}),e.jsx(ee,{size:"sm",onClick:()=>{if(W&&Q.trim()){const re={platform:W,username:Q.trim(),id:null};Y([...$,re]),O(!1),K(""),X("")}},disabled:!W||!Q.trim(),children:"Add Profile"})]})]})}),e.jsx(Uo,{open:z,onOpenChange:k,children:e.jsxs(Mi,{children:[e.jsxs(Ii,{children:[e.jsx(Fi,{children:"Delete All Profiles"}),e.jsxs(Li,{children:["Are you sure you want to delete all coding profiles for ",R==null?void 0:R.student_name,"? This action cannot be undone."]})]}),e.jsxs(Oi,{children:[e.jsx(Ko,{children:"Cancel"}),e.jsx(Di,{onClick:Me,className:"bg-red-600 hover:bg-red-700",children:"Delete All"})]})]})})]})},AV=()=>{const[t,r]=A.useState(null),[s,n]=A.useState(!0),[c,o]=A.useState([]),[a,d]=A.useState({}),[l,i]=A.useState([]),[u,f]=A.useState(!1),[h,m]=A.useState(!1),[p,x]=A.useState(!1),[g,v]=A.useState(null),[y,b]=A.useState(!1),[C,T]=A.useState(null),[M,U]=A.useState(null),[L,P]=A.useState(new Map),{toast:B}=Js(),q=[{name:"leetcode",displayName:"LeetCode",color:"bg-orange-100 text-orange-800"},{name:"codechef",displayName:"CodeChef",color:"bg-red-100 text-red-800"},{name:"hackerrank",displayName:"HackerRank",color:"bg-green-100 text-green-800"},{name:"hackerearth",displayName:"HackerEarth",color:"bg-blue-100 text-blue-800"},{name:"geeksforgeeks",displayName:"GeeksforGeeks",color:"bg-purple-100 text-purple-800"}];A.useEffect(()=>{z()},[]);const z=async()=>{try{n(!0);const V=await k();await R(),await S(),await w(V)}catch{B({title:"Error",description:"Failed to initialize page",variant:"destructive"})}finally{n(!1)}},k=async()=>{try{const V=await Pe.getProfile();return V.success?(r(V.data),V.data):null}catch{return null}},R=async()=>{try{const V=await Pe.getCodingPlatforms();V.success&&o(V.data)}catch{}},S=async()=>{try{const V=await Pe.getStudentCodingProfiles();V.success&&i(V.data)}catch{}},w=async(V=null)=>{const H=V||t;if(H!=null&&H.id)try{m(!0);const G=await Pe.getStudentCachedPlatformStatistics();if(G.success){const $={};Object.entries(G.data.platformStatistics).forEach(([Y,F])=>{F!=null&&($[Y]=F)}),d($),U(G.data.lastUpdated),P(Y=>{const F=new Map(Y);return F.set("cached",{data:$,timestamp:Date.now(),cached:!0}),F}),B({title:"Cached Data Loaded",description:"Loaded your cached platform statistics",variant:"default"})}}catch{}finally{m(!1)}},_=async()=>{try{f(!0),m(!0);const V=await Pe.syncAllProfiles();if(V.success)B({title:"Success",description:`Synced ${V.data.synced} profiles successfully!`,variant:"default"}),await w(),await S();else throw new Error(V.message||"Failed to sync profiles")}catch(V){B({title:"Error",description:V.message||"Failed to sync profiles. Please try again.",variant:"destructive"})}finally{f(!1),m(!1)}},j=V=>{v(V),x(!0)},N=async()=>{if(g)try{B({title:"Deleting",description:"Deleting coding profile..."}),(await Pe.deleteCodingProfile(g.id)).success&&(B({title:"Success",description:"Coding profile deleted successfully"}),await S(),t!=null&&t.id&&await w(t))}catch{B({title:"Error",description:"Failed to delete coding profile",variant:"destructive"})}finally{x(!1),v(null)}},E=()=>{const V=a.hackerrank;V&&(T(V),b(!0))},I=V=>{const H=q.find(G=>G.name===V);return H?H.displayName:V},D=A.useMemo(()=>{const V={};return Object.entries(a).forEach(([H,G])=>{G&&(V[H]={...G})}),l&&l.length>0&&l.forEach(H=>{H.platform_name&&V[H.platform_name]&&(V[H.platform_name]={...V[H.platform_name],username:H.username,profile_url:H.profile_url,profile_id:H.id,sync_status:H.sync_status,sync_error:H.sync_error})}),V},[a,l]);return A.useMemo(()=>Object.values(D).reduce((V,H)=>V+((H==null?void 0:H.problemsSolved)||0),0),[D]),A.useMemo(()=>{const V={};return Object.entries(D).forEach(([H,G])=>{G&&G.problemsSolved>0&&(V[H]=G.problemsSolved)}),V},[D]),s?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-muted-foreground mx-auto"}),e.jsx("p",{className:"mt-4 text-muted-foreground text-lg",children:"Loading your coding profiles..."})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-background p-4",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(Re,{className:"bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-blue-900/20 dark:to-indigo-900/20 border-blue-200 dark:border-blue-800 hover:shadow-lg transition-all duration-300 z-10 h-full flex flex-col",children:e.jsx(De,{className:"p-4 sm:p-6 flex-1 flex flex-col justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 mx-auto bg-blue-500 dark:bg-blue-600 rounded-full flex items-center justify-center",children:e.jsx(Is,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Sync Profiles"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Sync your existing coding platform profiles"})]}),e.jsx("div",{className:"space-y-2",children:e.jsxs(ee,{onClick:_,disabled:u||h,variant:"outline",className:"w-full border-blue-300 dark:border-blue-700 text-blue-700 dark:text-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 text-xs sm:text-sm",size:"sm",children:[u||h?e.jsx(Is,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(Is,{className:"h-4 w-4 mr-2"}),"Sync All"]})})]})})}),Object.entries(D).filter(([V,H])=>H!=null).map(([V,H])=>{var G;return e.jsx(Re,{className:"hover:shadow-lg transition-all duration-300 transform hover:scale-105 z-10 h-full flex flex-col",children:e.jsxs(De,{className:"p-4 sm:p-6 flex-1 flex flex-col",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 flex-1 min-w-0",children:[e.jsxs("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-lg flex items-center justify-center bg-white dark:bg-white p-1 flex-shrink-0 border border-gray-200 dark:border-gray-300 shadow-sm",children:[e.jsx("img",{src:V==="leetcode"?"https://upload.wikimedia.org/wikipedia/commons/1/19/LeetCode_logo_black.png":V==="codechef"?"https://codechefgcet.github.io/assets/codechef.png":V==="hackerrank"?"https://upload.wikimedia.org/wikipedia/commons/6/65/HackerRank_logo.png":V==="hackerearth"?"https://upload.wikimedia.org/wikipedia/commons/e/e8/HackerEarth_logo.png":V==="geeksforgeeks"?"https://upload.wikimedia.org/wikipedia/commons/e/eb/GeeksForGeeks_logo.png":"",alt:`${I(V)} logo`,className:"w-full h-full object-contain",onError:$=>{$.target.style.display="none",$.target.nextSibling.style.display="flex"}}),e.jsx("div",{className:"w-full h-full rounded-lg flex items-center justify-center text-white font-bold text-sm sm:text-lg hidden",style:{backgroundColor:V==="leetcode"?"#f97316":V==="codechef"?"#dc2626":V==="hackerrank"?"#16a34a":V==="hackerearth"?"#2563eb":V==="geeksforgeeks"?"#9333ea":"#6b7280"},children:I(V).charAt(0)})]}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"font-semibold text-base sm:text-lg text-foreground truncate",children:I(V)}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground truncate",children:(H==null?void 0:H.username)||"No username"})]})]}),e.jsxs("div",{className:"flex space-x-1 flex-shrink-0",children:[H!=null&&H.profile_url?e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Bl,{children:e.jsxs(zl,{children:[e.jsx(Ul,{asChild:!0,children:e.jsx(ee,{size:"sm",variant:"ghost",onClick:()=>window.open(H.profile_url,"_blank"),className:"h-8 w-8 p-0 text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:e.jsx(Rh,{className:"h-4 w-4"})})}),e.jsx(Vl,{className:"z-[9999] bg-gray-900 text-white px-2 py-1 rounded text-sm",side:"right",align:"center",children:e.jsx("p",{children:"View Profile"})})]})}),(H==null?void 0:H.sync_status)==="failed"&&e.jsx(Bl,{children:e.jsxs(zl,{children:[e.jsx(Ul,{asChild:!0,children:e.jsx("div",{className:"cursor-help",children:e.jsx("span",{className:"text-red-500 text-lg",children:""})})}),e.jsx(Vl,{className:"z-[9999] bg-red-600 text-white px-2 py-1 rounded text-xs",side:"right",align:"center",children:e.jsx("p",{children:"Sync failed - Kindly solve a problem or reach out to Admin"})})]})})]}):e.jsx(Bl,{children:e.jsxs(zl,{children:[e.jsx(Ul,{asChild:!0,children:e.jsx(ee,{size:"sm",variant:"ghost",onClick:()=>{B({title:"Edit Profile",description:"Please use the Super Admin panel to edit profiles.",variant:"default"})},className:"h-8 w-8 p-0 text-orange-600 hover:text-orange-700 hover:bg-orange-50",children:e.jsx(vs,{className:"h-4 w-4"})})}),e.jsx(Vl,{className:"z-[9999] bg-orange-600 text-white px-2 py-1 rounded text-sm",side:"right",align:"center",children:e.jsx("p",{children:"Edit Profile"})})]})}),e.jsx(Bl,{children:e.jsxs(zl,{children:[e.jsx(Ul,{asChild:!0,children:e.jsx(ee,{size:"sm",variant:"ghost",onClick:()=>j({id:H.profile_id,platform:V}),className:"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(Ds,{className:"h-4 w-4"})})}),e.jsx(Vl,{className:"z-[9999] bg-red-600 text-white px-2 py-1 rounded text-sm",side:"right",align:"center",children:e.jsx("p",{children:"Delete Profile"})})]})})]})]}),e.jsxs("div",{className:"text-center mb-4 flex-1 flex flex-col justify-center",children:[e.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-1",children:V==="hackerrank"?((G=H==null?void 0:H.badges)==null?void 0:G.length)||0:(H==null?void 0:H.problemsSolved)||0}),e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:V==="hackerrank"?"Badges Earned":"Problems Solved"})]}),(V==="leetcode"||V==="geeksforgeeks")&&(H==null?void 0:H.easySolved)!==void 0&&e.jsxs("div",{className:"grid grid-cols-3 gap-1 sm:gap-2 text-center mt-auto",children:[e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-1 sm:p-2",children:[e.jsx("div",{className:"text-green-600 dark:text-green-400 font-bold text-xs sm:text-sm",children:(H==null?void 0:H.easySolved)||0}),e.jsx("div",{className:"text-green-600 dark:text-green-400 text-xs",children:"Easy"})]}),e.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-1 sm:p-2",children:[e.jsx("div",{className:"text-yellow-600 dark:text-yellow-400 font-bold text-xs sm:text-sm",children:(H==null?void 0:H.mediumSolved)||0}),e.jsx("div",{className:"text-yellow-600 dark:text-yellow-400 text-xs",children:"Medium"})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-1 sm:p-2",children:[e.jsx("div",{className:"text-red-600 dark:text-red-400 font-bold text-xs sm:text-sm",children:(H==null?void 0:H.hardSolved)||0}),e.jsx("div",{className:"text-red-600 dark:text-red-400 text-xs",children:"Hard"})]})]}),V==="hackerrank"&&(H==null?void 0:H.badges)&&H.badges.length>0&&e.jsxs("div",{className:"mt-3 mt-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:["Badges (",H.badges.length,")"]}),e.jsx(ee,{size:"sm",variant:"ghost",onClick:E,className:"text-xs h-6 px-2 text-blue-600 hover:text-blue-700",children:"View"})]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[H.badges.slice(0,2).map(($,Y)=>e.jsxs(et,{variant:"outline",className:"text-xs px-1 py-0",children:[($==null?void 0:$.name)||"Unknown"," (",($==null?void 0:$.stars)||0,")"]},Y)),H.badges.length>2&&e.jsxs(et,{variant:"outline",className:"text-xs px-1 py-0",children:["+",H.badges.length-2]})]})]}),(!(H!=null&&H.username)||!(H!=null&&H.profile_url))&&e.jsx("div",{className:"mt-3 p-2 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg",children:e.jsx("p",{className:"text-xs text-orange-700 dark:text-orange-300 text-center",children:" Profile needs setup"})})]})},V)})]})})}),e.jsx(Ht,{open:y,onOpenChange:b,children:e.jsxs(Zt,{className:"max-w-md mx-4 sm:mx-0",children:[e.jsx(Jt,{children:e.jsx(es,{className:"text-lg",children:"HackerRank Badges"})}),C?e.jsx("div",{className:"space-y-2",children:C.badges&&Array.isArray(C.badges)&&C.badges.length>0?e.jsx("div",{className:"space-y-1",children:C.badges.map((V,H)=>{const G=(V.level||"").toLowerCase(),Y=(F=>{switch(F){case"bronze":return{bg:"bg-orange-100 dark:bg-orange-900/20",border:"border-orange-300 dark:border-orange-800",text:"text-orange-900 dark:text-orange-300",accent:"text-orange-700 dark:text-orange-400"};case"silver":return{bg:"bg-gray-100 dark:bg-gray-800/20",border:"border-gray-300 dark:border-gray-700",text:"text-gray-900 dark:text-gray-300",accent:"text-gray-700 dark:text-gray-400"};case"gold":return{bg:"bg-yellow-100 dark:bg-yellow-900/20",border:"border-yellow-300 dark:border-yellow-800",text:"text-yellow-900 dark:text-yellow-300",accent:"text-yellow-700 dark:text-yellow-400"};case"platinum":return{bg:"bg-blue-100 dark:bg-blue-900/20",border:"border-blue-300 dark:border-blue-800",text:"text-blue-900 dark:text-blue-300",accent:"text-blue-600 dark:text-blue-400"};default:return{bg:"bg-gray-100 dark:bg-gray-800/20",border:"border-gray-300 dark:border-gray-700",text:"text-gray-900 dark:text-gray-300",accent:"text-gray-700 dark:text-gray-400"}}})(G);return e.jsxs("div",{className:`flex items-center justify-between p-2 ${Y.bg} border ${Y.border} rounded-md`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`text-sm font-medium ${Y.text}`,children:V.name||"Unknown Badge"}),e.jsx("div",{className:`text-xs ${Y.accent}`,children:V.stars?`${V.stars} `:"No stars"})]}),e.jsx("div",{className:`text-xs font-medium ${Y.accent} px-2 py-1 rounded-full ${Y.bg}`,children:G.toUpperCase()})]},H)})}):e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:e.jsx("p",{className:"text-sm",children:"No badges available"})})}):e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:e.jsx("p",{className:"text-sm",children:"No HackerRank data available"})})]})}),e.jsx(Uo,{open:p,onOpenChange:x,children:e.jsxs(Mi,{children:[e.jsxs(Ii,{children:[e.jsx(Fi,{children:"Delete Coding Profile"}),e.jsx(Li,{children:"Are you sure you want to delete this coding profile? This action cannot be undone."})]}),e.jsxs(Oi,{children:[e.jsx(Ko,{children:"Cancel"}),e.jsx(Di,{onClick:N,className:"bg-red-600 hover:bg-red-700",children:"Delete Profile"})]})]})})]})};/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */const{entries:jC,setPrototypeOf:u2,isFrozen:TV,getPrototypeOf:RV,getOwnPropertyDescriptor:PV}=Object;let{freeze:mn,seal:ca,create:nx}=Object,{apply:ax,construct:ix}=typeof Reflect<"u"&&Reflect;mn||(mn=function(r){return r});ca||(ca=function(r){return r});ax||(ax=function(r,s){for(var n=arguments.length,c=new Array(n>2?n-2:0),o=2;o<n;o++)c[o-2]=arguments[o];return r.apply(s,c)});ix||(ix=function(r){for(var s=arguments.length,n=new Array(s>1?s-1:0),c=1;c<s;c++)n[c-1]=arguments[c];return new r(...n)});const fh=pn(Array.prototype.forEach),MV=pn(Array.prototype.lastIndexOf),h2=pn(Array.prototype.pop),Gc=pn(Array.prototype.push),IV=pn(Array.prototype.splice),Lh=pn(String.prototype.toLowerCase),dg=pn(String.prototype.toString),ug=pn(String.prototype.match),Kc=pn(String.prototype.replace),OV=pn(String.prototype.indexOf),FV=pn(String.prototype.trim),ma=pn(Object.prototype.hasOwnProperty),on=pn(RegExp.prototype.test),Yc=LV(TypeError);function pn(t){return function(r){r instanceof RegExp&&(r.lastIndex=0);for(var s=arguments.length,n=new Array(s>1?s-1:0),c=1;c<s;c++)n[c-1]=arguments[c];return ax(t,r,n)}}function LV(t){return function(){for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return ix(t,s)}}function ws(t,r){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Lh;u2&&u2(t,null);let n=r.length;for(;n--;){let c=r[n];if(typeof c=="string"){const o=s(c);o!==c&&(TV(r)||(r[n]=o),c=o)}t[c]=!0}return t}function DV(t){for(let r=0;r<t.length;r++)ma(t,r)||(t[r]=null);return t}function Wa(t){const r=nx(null);for(const[s,n]of jC(t))ma(t,s)&&(Array.isArray(n)?r[s]=DV(n):n&&typeof n=="object"&&n.constructor===Object?r[s]=Wa(n):r[s]=n);return r}function Qc(t,r){for(;t!==null;){const n=PV(t,r);if(n){if(n.get)return pn(n.get);if(typeof n.value=="function")return pn(n.value)}t=RV(t)}function s(){return null}return s}const f2=mn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),hg=mn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),fg=mn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),$V=mn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),mg=mn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),BV=mn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),m2=mn(["#text"]),p2=mn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),pg=mn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),g2=mn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),mh=mn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),zV=ca(/\{\{[\w\W]*|[\w\W]*\}\}/gm),UV=ca(/<%[\w\W]*|[\w\W]*%>/gm),VV=ca(/\$\{[\w\W]*/gm),qV=ca(/^data-[\-\w.\u00B7-\uFFFF]+$/),HV=ca(/^aria-[\-\w]+$/),_C=ca(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),WV=ca(/^(?:\w+script|data):/i),GV=ca(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),NC=ca(/^html$/i),KV=ca(/^[a-z][.\w]*(-[.\w]+)+$/i);var x2=Object.freeze({__proto__:null,ARIA_ATTR:HV,ATTR_WHITESPACE:GV,CUSTOM_ELEMENT:KV,DATA_ATTR:qV,DOCTYPE_NAME:NC,ERB_EXPR:UV,IS_ALLOWED_URI:_C,IS_SCRIPT_OR_DATA:WV,MUSTACHE_EXPR:zV,TMPLIT_EXPR:VV});const Xc={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},YV=function(){return typeof window>"u"?null:window},QV=function(r,s){if(typeof r!="object"||typeof r.createPolicy!="function")return null;let n=null;const c="data-tt-policy-suffix";s&&s.hasAttribute(c)&&(n=s.getAttribute(c));const o="dompurify"+(n?"#"+n:"");try{return r.createPolicy(o,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}},y2=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function SC(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:YV();const r=J=>SC(J);if(r.version="3.3.0",r.removed=[],!t||!t.document||t.document.nodeType!==Xc.document||!t.Element)return r.isSupported=!1,r;let{document:s}=t;const n=s,c=n.currentScript,{DocumentFragment:o,HTMLTemplateElement:a,Node:d,Element:l,NodeFilter:i,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:f,DOMParser:h,trustedTypes:m}=t,p=l.prototype,x=Qc(p,"cloneNode"),g=Qc(p,"remove"),v=Qc(p,"nextSibling"),y=Qc(p,"childNodes"),b=Qc(p,"parentNode");if(typeof a=="function"){const J=s.createElement("template");J.content&&J.content.ownerDocument&&(s=J.content.ownerDocument)}let C,T="";const{implementation:M,createNodeIterator:U,createDocumentFragment:L,getElementsByTagName:P}=s,{importNode:B}=n;let q=y2();r.isSupported=typeof jC=="function"&&typeof b=="function"&&M&&M.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:z,ERB_EXPR:k,TMPLIT_EXPR:R,DATA_ATTR:S,ARIA_ATTR:w,IS_SCRIPT_OR_DATA:_,ATTR_WHITESPACE:j,CUSTOM_ELEMENT:N}=x2;let{IS_ALLOWED_URI:E}=x2,I=null;const D=ws({},[...f2,...hg,...fg,...mg,...m2]);let V=null;const H=ws({},[...p2,...pg,...g2,...mh]);let G=Object.seal(nx(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),$=null,Y=null;const F=Object.seal(nx(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let O=!0,W=!0,K=!1,Q=!0,X=!1,te=!0,de=!1,xe=!1,ne=!1,ge=!1,be=!1,Ie=!1,Ce=!0,Oe=!1;const Ee="user-content-";let pe=!0,Ae=!1,st={},qe=null;const ie=ws({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ae=null;const we=ws({},["audio","video","img","source","image","track"]);let ve=null;const He=ws({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),$e="http://www.w3.org/1998/Math/MathML",ue="http://www.w3.org/2000/svg",oe="http://www.w3.org/1999/xhtml";let _e=oe,Me=!1,ze=null;const Xe=ws({},[$e,ue,oe],dg);let Ve=ws({},["mi","mo","mn","ms","mtext"]),ot=ws({},["annotation-xml"]);const xt=ws({},["title","style","font","a","script"]);let ft=null;const at=["application/xhtml+xml","text/html"],Be="text/html";let Ue=null,re=null;const ye=s.createElement("form"),ke=function(ce){return ce instanceof RegExp||ce instanceof Function},Fe=function(){let ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(re&&re===ce)){if((!ce||typeof ce!="object")&&(ce={}),ce=Wa(ce),ft=at.indexOf(ce.PARSER_MEDIA_TYPE)===-1?Be:ce.PARSER_MEDIA_TYPE,Ue=ft==="application/xhtml+xml"?dg:Lh,I=ma(ce,"ALLOWED_TAGS")?ws({},ce.ALLOWED_TAGS,Ue):D,V=ma(ce,"ALLOWED_ATTR")?ws({},ce.ALLOWED_ATTR,Ue):H,ze=ma(ce,"ALLOWED_NAMESPACES")?ws({},ce.ALLOWED_NAMESPACES,dg):Xe,ve=ma(ce,"ADD_URI_SAFE_ATTR")?ws(Wa(He),ce.ADD_URI_SAFE_ATTR,Ue):He,ae=ma(ce,"ADD_DATA_URI_TAGS")?ws(Wa(we),ce.ADD_DATA_URI_TAGS,Ue):we,qe=ma(ce,"FORBID_CONTENTS")?ws({},ce.FORBID_CONTENTS,Ue):ie,$=ma(ce,"FORBID_TAGS")?ws({},ce.FORBID_TAGS,Ue):Wa({}),Y=ma(ce,"FORBID_ATTR")?ws({},ce.FORBID_ATTR,Ue):Wa({}),st=ma(ce,"USE_PROFILES")?ce.USE_PROFILES:!1,O=ce.ALLOW_ARIA_ATTR!==!1,W=ce.ALLOW_DATA_ATTR!==!1,K=ce.ALLOW_UNKNOWN_PROTOCOLS||!1,Q=ce.ALLOW_SELF_CLOSE_IN_ATTR!==!1,X=ce.SAFE_FOR_TEMPLATES||!1,te=ce.SAFE_FOR_XML!==!1,de=ce.WHOLE_DOCUMENT||!1,ge=ce.RETURN_DOM||!1,be=ce.RETURN_DOM_FRAGMENT||!1,Ie=ce.RETURN_TRUSTED_TYPE||!1,ne=ce.FORCE_BODY||!1,Ce=ce.SANITIZE_DOM!==!1,Oe=ce.SANITIZE_NAMED_PROPS||!1,pe=ce.KEEP_CONTENT!==!1,Ae=ce.IN_PLACE||!1,E=ce.ALLOWED_URI_REGEXP||_C,_e=ce.NAMESPACE||oe,Ve=ce.MATHML_TEXT_INTEGRATION_POINTS||Ve,ot=ce.HTML_INTEGRATION_POINTS||ot,G=ce.CUSTOM_ELEMENT_HANDLING||{},ce.CUSTOM_ELEMENT_HANDLING&&ke(ce.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(G.tagNameCheck=ce.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ce.CUSTOM_ELEMENT_HANDLING&&ke(ce.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(G.attributeNameCheck=ce.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ce.CUSTOM_ELEMENT_HANDLING&&typeof ce.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(G.allowCustomizedBuiltInElements=ce.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),X&&(W=!1),be&&(ge=!0),st&&(I=ws({},m2),V=[],st.html===!0&&(ws(I,f2),ws(V,p2)),st.svg===!0&&(ws(I,hg),ws(V,pg),ws(V,mh)),st.svgFilters===!0&&(ws(I,fg),ws(V,pg),ws(V,mh)),st.mathMl===!0&&(ws(I,mg),ws(V,g2),ws(V,mh))),ce.ADD_TAGS&&(typeof ce.ADD_TAGS=="function"?F.tagCheck=ce.ADD_TAGS:(I===D&&(I=Wa(I)),ws(I,ce.ADD_TAGS,Ue))),ce.ADD_ATTR&&(typeof ce.ADD_ATTR=="function"?F.attributeCheck=ce.ADD_ATTR:(V===H&&(V=Wa(V)),ws(V,ce.ADD_ATTR,Ue))),ce.ADD_URI_SAFE_ATTR&&ws(ve,ce.ADD_URI_SAFE_ATTR,Ue),ce.FORBID_CONTENTS&&(qe===ie&&(qe=Wa(qe)),ws(qe,ce.FORBID_CONTENTS,Ue)),pe&&(I["#text"]=!0),de&&ws(I,["html","head","body"]),I.table&&(ws(I,["tbody"]),delete $.tbody),ce.TRUSTED_TYPES_POLICY){if(typeof ce.TRUSTED_TYPES_POLICY.createHTML!="function")throw Yc('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ce.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Yc('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');C=ce.TRUSTED_TYPES_POLICY,T=C.createHTML("")}else C===void 0&&(C=QV(m,c)),C!==null&&typeof T=="string"&&(T=C.createHTML(""));mn&&mn(ce),re=ce}},Ke=ws({},[...hg,...fg,...$V]),Qe=ws({},[...mg,...BV]),he=function(ce){let Je=b(ce);(!Je||!Je.tagName)&&(Je={namespaceURI:_e,tagName:"template"});const ht=Lh(ce.tagName),le=Lh(Je.tagName);return ze[ce.namespaceURI]?ce.namespaceURI===ue?Je.namespaceURI===oe?ht==="svg":Je.namespaceURI===$e?ht==="svg"&&(le==="annotation-xml"||Ve[le]):!!Ke[ht]:ce.namespaceURI===$e?Je.namespaceURI===oe?ht==="math":Je.namespaceURI===ue?ht==="math"&&ot[le]:!!Qe[ht]:ce.namespaceURI===oe?Je.namespaceURI===ue&&!ot[le]||Je.namespaceURI===$e&&!Ve[le]?!1:!Qe[ht]&&(xt[ht]||!Ke[ht]):!!(ft==="application/xhtml+xml"&&ze[ce.namespaceURI]):!1},je=function(ce){Gc(r.removed,{element:ce});try{b(ce).removeChild(ce)}catch{g(ce)}},Ne=function(ce,Je){try{Gc(r.removed,{attribute:Je.getAttributeNode(ce),from:Je})}catch{Gc(r.removed,{attribute:null,from:Je})}if(Je.removeAttribute(ce),ce==="is")if(ge||be)try{je(Je)}catch{}else try{Je.setAttribute(ce,"")}catch{}},tt=function(ce){let Je=null,ht=null;if(ne)ce="<remove></remove>"+ce;else{const rt=ug(ce,/^[\r\n\t ]+/);ht=rt&&rt[0]}ft==="application/xhtml+xml"&&_e===oe&&(ce='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ce+"</body></html>");const le=C?C.createHTML(ce):ce;if(_e===oe)try{Je=new h().parseFromString(le,ft)}catch{}if(!Je||!Je.documentElement){Je=M.createDocument(_e,"template",null);try{Je.documentElement.innerHTML=Me?T:le}catch{}}const Le=Je.body||Je.documentElement;return ce&&ht&&Le.insertBefore(s.createTextNode(ht),Le.childNodes[0]||null),_e===oe?P.call(Je,de?"html":"body")[0]:de?Je.documentElement:Le},jt=function(ce){return U.call(ce.ownerDocument||ce,ce,i.SHOW_ELEMENT|i.SHOW_COMMENT|i.SHOW_TEXT|i.SHOW_PROCESSING_INSTRUCTION|i.SHOW_CDATA_SECTION,null)},dt=function(ce){return ce instanceof f&&(typeof ce.nodeName!="string"||typeof ce.textContent!="string"||typeof ce.removeChild!="function"||!(ce.attributes instanceof u)||typeof ce.removeAttribute!="function"||typeof ce.setAttribute!="function"||typeof ce.namespaceURI!="string"||typeof ce.insertBefore!="function"||typeof ce.hasChildNodes!="function")},kt=function(ce){return typeof d=="function"&&ce instanceof d};function gt(J,ce,Je){fh(J,ht=>{ht.call(r,ce,Je,re)})}const wt=function(ce){let Je=null;if(gt(q.beforeSanitizeElements,ce,null),dt(ce))return je(ce),!0;const ht=Ue(ce.nodeName);if(gt(q.uponSanitizeElement,ce,{tagName:ht,allowedTags:I}),te&&ce.hasChildNodes()&&!kt(ce.firstElementChild)&&on(/<[/\w!]/g,ce.innerHTML)&&on(/<[/\w!]/g,ce.textContent)||ce.nodeType===Xc.progressingInstruction||te&&ce.nodeType===Xc.comment&&on(/<[/\w]/g,ce.data))return je(ce),!0;if(!(F.tagCheck instanceof Function&&F.tagCheck(ht))&&(!I[ht]||$[ht])){if(!$[ht]&&bt(ht)&&(G.tagNameCheck instanceof RegExp&&on(G.tagNameCheck,ht)||G.tagNameCheck instanceof Function&&G.tagNameCheck(ht)))return!1;if(pe&&!qe[ht]){const le=b(ce)||ce.parentNode,Le=y(ce)||ce.childNodes;if(Le&&le){const rt=Le.length;for(let pt=rt-1;pt>=0;--pt){const Tt=x(Le[pt],!0);Tt.__removalCount=(ce.__removalCount||0)+1,le.insertBefore(Tt,v(ce))}}}return je(ce),!0}return ce instanceof l&&!he(ce)||(ht==="noscript"||ht==="noembed"||ht==="noframes")&&on(/<\/no(script|embed|frames)/i,ce.innerHTML)?(je(ce),!0):(X&&ce.nodeType===Xc.text&&(Je=ce.textContent,fh([z,k,R],le=>{Je=Kc(Je,le," ")}),ce.textContent!==Je&&(Gc(r.removed,{element:ce.cloneNode()}),ce.textContent=Je)),gt(q.afterSanitizeElements,ce,null),!1)},Pt=function(ce,Je,ht){if(Ce&&(Je==="id"||Je==="name")&&(ht in s||ht in ye))return!1;if(!(W&&!Y[Je]&&on(S,Je))){if(!(O&&on(w,Je))){if(!(F.attributeCheck instanceof Function&&F.attributeCheck(Je,ce))){if(!V[Je]||Y[Je]){if(!(bt(ce)&&(G.tagNameCheck instanceof RegExp&&on(G.tagNameCheck,ce)||G.tagNameCheck instanceof Function&&G.tagNameCheck(ce))&&(G.attributeNameCheck instanceof RegExp&&on(G.attributeNameCheck,Je)||G.attributeNameCheck instanceof Function&&G.attributeNameCheck(Je,ce))||Je==="is"&&G.allowCustomizedBuiltInElements&&(G.tagNameCheck instanceof RegExp&&on(G.tagNameCheck,ht)||G.tagNameCheck instanceof Function&&G.tagNameCheck(ht))))return!1}else if(!ve[Je]){if(!on(E,Kc(ht,j,""))){if(!((Je==="src"||Je==="xlink:href"||Je==="href")&&ce!=="script"&&OV(ht,"data:")===0&&ae[ce])){if(!(K&&!on(_,Kc(ht,j,"")))){if(ht)return!1}}}}}}}return!0},bt=function(ce){return ce!=="annotation-xml"&&ug(ce,N)},yt=function(ce){gt(q.beforeSanitizeAttributes,ce,null);const{attributes:Je}=ce;if(!Je||dt(ce))return;const ht={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:V,forceKeepAttr:void 0};let le=Je.length;for(;le--;){const Le=Je[le],{name:rt,namespaceURI:pt,value:Tt}=Le,vt=Ue(rt),_t=Tt;let Bt=rt==="value"?_t:FV(_t);if(ht.attrName=vt,ht.attrValue=Bt,ht.keepAttr=!0,ht.forceKeepAttr=void 0,gt(q.uponSanitizeAttribute,ce,ht),Bt=ht.attrValue,Oe&&(vt==="id"||vt==="name")&&(Ne(rt,ce),Bt=Ee+Bt),te&&on(/((--!?|])>)|<\/(style|title|textarea)/i,Bt)){Ne(rt,ce);continue}if(vt==="attributename"&&ug(Bt,"href")){Ne(rt,ce);continue}if(ht.forceKeepAttr)continue;if(!ht.keepAttr){Ne(rt,ce);continue}if(!Q&&on(/\/>/i,Bt)){Ne(rt,ce);continue}X&&fh([z,k,R],Gt=>{Bt=Kc(Bt,Gt," ")});const Qt=Ue(ce.nodeName);if(!Pt(Qt,vt,Bt)){Ne(rt,ce);continue}if(C&&typeof m=="object"&&typeof m.getAttributeType=="function"&&!pt)switch(m.getAttributeType(Qt,vt)){case"TrustedHTML":{Bt=C.createHTML(Bt);break}case"TrustedScriptURL":{Bt=C.createScriptURL(Bt);break}}if(Bt!==_t)try{pt?ce.setAttributeNS(pt,rt,Bt):ce.setAttribute(rt,Bt),dt(ce)?je(ce):h2(r.removed)}catch{Ne(rt,ce)}}gt(q.afterSanitizeAttributes,ce,null)},Ge=function J(ce){let Je=null;const ht=jt(ce);for(gt(q.beforeSanitizeShadowDOM,ce,null);Je=ht.nextNode();)gt(q.uponSanitizeShadowNode,Je,null),wt(Je),yt(Je),Je.content instanceof o&&J(Je.content);gt(q.afterSanitizeShadowDOM,ce,null)};return r.sanitize=function(J){let ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Je=null,ht=null,le=null,Le=null;if(Me=!J,Me&&(J="<!-->"),typeof J!="string"&&!kt(J))if(typeof J.toString=="function"){if(J=J.toString(),typeof J!="string")throw Yc("dirty is not a string, aborting")}else throw Yc("toString is not a function");if(!r.isSupported)return J;if(xe||Fe(ce),r.removed=[],typeof J=="string"&&(Ae=!1),Ae){if(J.nodeName){const Tt=Ue(J.nodeName);if(!I[Tt]||$[Tt])throw Yc("root node is forbidden and cannot be sanitized in-place")}}else if(J instanceof d)Je=tt("<!---->"),ht=Je.ownerDocument.importNode(J,!0),ht.nodeType===Xc.element&&ht.nodeName==="BODY"||ht.nodeName==="HTML"?Je=ht:Je.appendChild(ht);else{if(!ge&&!X&&!de&&J.indexOf("<")===-1)return C&&Ie?C.createHTML(J):J;if(Je=tt(J),!Je)return ge?null:Ie?T:""}Je&&ne&&je(Je.firstChild);const rt=jt(Ae?J:Je);for(;le=rt.nextNode();)wt(le),yt(le),le.content instanceof o&&Ge(le.content);if(Ae)return J;if(ge){if(be)for(Le=L.call(Je.ownerDocument);Je.firstChild;)Le.appendChild(Je.firstChild);else Le=Je;return(V.shadowroot||V.shadowrootmode)&&(Le=B.call(n,Le,!0)),Le}let pt=de?Je.outerHTML:Je.innerHTML;return de&&I["!doctype"]&&Je.ownerDocument&&Je.ownerDocument.doctype&&Je.ownerDocument.doctype.name&&on(NC,Je.ownerDocument.doctype.name)&&(pt="<!DOCTYPE "+Je.ownerDocument.doctype.name+`>
`+pt),X&&fh([z,k,R],Tt=>{pt=Kc(pt,Tt," ")}),C&&Ie?C.createHTML(pt):pt},r.setConfig=function(){let J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Fe(J),xe=!0},r.clearConfig=function(){re=null,xe=!1},r.isValidAttribute=function(J,ce,Je){re||Fe({});const ht=Ue(J),le=Ue(ce);return Pt(ht,le,Je)},r.addHook=function(J,ce){typeof ce=="function"&&Gc(q[J],ce)},r.removeHook=function(J,ce){if(ce!==void 0){const Je=MV(q[J],ce);return Je===-1?void 0:IV(q[J],Je,1)[0]}return h2(q[J])},r.removeHooks=function(J){q[J]=[]},r.removeAllHooks=function(){q=y2()},r}var Ff=SC();const XV=({assessment:t,submission:r,isRetake:s,onComplete:n,onBack:c,onCancel:o,sections:a=[],theme:d="light",isDarkMode:l=!1})=>{const[i,u]=A.useState(!1),h=(()=>{if(a&&a.length>0)return a.length;if(t!=null&&t.sections){if(Array.isArray(t.sections))return t.sections.length;if(typeof t.sections=="string")try{const g=JSON.parse(t.sections);if(Array.isArray(g))return g.length}catch{}}return 0})(),p=(()=>{const g=new Date,v=t.start_date&&t.start_time?new Date(`${t.start_date}T${t.start_time}`):null,y=t.end_date&&t.end_time?new Date(`${t.end_date}T${t.end_time}`):null;return v&&g<v?{status:"upcoming",message:"Assessment has not started yet"}:y&&g>y?{status:"expired",message:"Assessment has ended"}:{status:"active",message:"Assessment is currently active"}})(),x=()=>{i&&n()};return e.jsx("div",{className:`min-h-screen flex items-center justify-center px-4 py-8 ${l?"bg-gray-900":"bg-gray-50"}`,children:e.jsx("div",{className:"w-full max-w-2xl",children:e.jsx(Re,{className:`shadow-lg ${l?"bg-gray-800 border-gray-700":""}`,children:e.jsxs(De,{className:"p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:`text-3xl font-bold mb-3 ${l?"text-gray-100":"text-gray-900"}`,children:t.title}),e.jsx(et,{variant:p.status==="active"?"default":"secondary",className:"text-sm",children:p.status==="active"?"Active":p.status==="upcoming"?"Upcoming":"Expired"})]}),e.jsxs("div",{className:`flex items-center justify-center gap-6 mb-8 pb-8 border-b ${l?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:`flex items-center justify-center gap-2 mb-1 ${l?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Ps,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Time Limit"})]}),e.jsxs("p",{className:`text-lg font-semibold ${l?"text-gray-100":"text-gray-900"}`,children:[t.time_limit_minutes," minutes"]})]}),e.jsx("div",{className:`w-px h-12 ${l?"bg-gray-700":"bg-gray-200"}`}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:`flex items-center justify-center gap-2 mb-1 ${l?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Yt,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:t.total_questions?"Questions":h>0?"Sections":"Questions"})]}),e.jsx("p",{className:`text-lg font-semibold ${l?"text-gray-100":"text-gray-900"}`,children:t.total_questions||(h>0?h:"Multiple")})]}),e.jsx("div",{className:`w-px h-12 ${l?"bg-gray-700":"bg-gray-200"}`}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`mb-1 text-sm ${l?"text-gray-400":"text-gray-600"}`,children:"Total Points"}),e.jsx("p",{className:`text-lg font-semibold ${l?"text-gray-100":"text-gray-900"}`,children:t.total_points})]})]}),e.jsxs("div",{className:"space-y-6 mb-8",children:[t.description&&e.jsxs("div",{children:[e.jsx("h3",{className:`text-sm font-semibold mb-2 uppercase tracking-wide ${l?"text-gray-300":"text-gray-700"}`,children:"Description"}),e.jsx("div",{className:`leading-relaxed ${l?"text-gray-300":"text-gray-600"}`,children:e.jsx("p",{children:t.description})})]}),t.instructions&&e.jsxs("div",{children:[e.jsx("h3",{className:`text-sm font-semibold mb-2 uppercase tracking-wide ${l?"text-gray-300":"text-gray-700"}`,children:"Instructions"}),e.jsx("div",{className:`leading-relaxed prose prose-sm max-w-none ${l?"text-gray-300 prose-invert":"text-gray-600"}`,dangerouslySetInnerHTML:{__html:Ff.sanitize(t.instructions)}})]})]}),p.status!=="active"&&e.jsxs(pr,{variant:p.status==="expired"?"destructive":"default",className:"mb-6",children:[e.jsx(Ms,{className:"h-4 w-4"}),e.jsx(gr,{children:p.message})]}),e.jsx("div",{className:`mb-6 p-4 rounded-lg ${l?"bg-gray-700":"bg-gray-50"}`,children:e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i,onChange:g=>u(g.target.checked),className:`mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 rounded ${l?"border-gray-500 bg-gray-600":"border-gray-300"}`}),e.jsx("span",{className:`text-sm ${l?"text-gray-200":"text-gray-700"}`,children:"I have read and understood the assessment requirements and instructions"})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(ee,{variant:"outline",onClick:o,className:`flex-1 ${l?"border-gray-600 text-gray-300 hover:bg-gray-700":""}`,children:"Cancel"}),e.jsxs(ee,{onClick:x,disabled:!i||p.status!=="active",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(ta,{className:"h-4 w-4 mr-2"}),s?"Start Retake":"Start Assessment",e.jsx(li,{className:"h-4 w-4 ml-2"})]})]})]})})})})},ZV=({assessment:t,submission:r,onComplete:s,onBack:n,onCancel:c,theme:o="light",isDarkMode:a=!1})=>{const[d,l]=A.useState(!1),i=d,u=()=>{if(!i)return;const x={timestamp:new Date().toISOString(),ipAddress:"",userAgent:navigator.userAgent,agreements:{academicIntegrity:!0,proctoring:t.require_proctoring||!1,dataPrivacy:!0,assessmentRules:!0},assessmentId:t.id,submissionId:r.submissionId};localStorage.setItem(`agreement_${r.submissionId}`,JSON.stringify(x)),s()},f=`
    By proceeding with this assessment, you agree to maintain the highest standards of academic integrity. This includes:

    1. Completing the assessment independently without assistance from others
    2. Not using unauthorized materials, resources, or devices
    3. Not communicating with others during the assessment
    4. Not copying, sharing, or distributing assessment content
    5. Not attempting to circumvent security measures
    6. Not using artificial intelligence tools or automated assistance

    Violations of academic integrity may result in:
    - Immediate termination of the assessment
    - Zero score for the assessment
    - Academic disciplinary action
    - Permanent record of the violation
  `,h=`
    This assessment uses proctoring technology to ensure academic integrity. By continuing, you consent to:

    1. Video and audio monitoring during the assessment
    2. Screen recording and monitoring
    3. Browser lockdown and activity tracking
    4. Eye tracking and behavioral analysis (if enabled)
    5. Detection of suspicious activities
    6. Storage of monitoring data for review purposes

    The proctoring system will:
    - Monitor your environment and behavior
    - Detect attempts to use unauthorized resources
    - Flag suspicious activities for review
    - Automatically terminate the assessment if violations are detected

    Your privacy is important to us. Monitoring data is:
    - Used solely for academic integrity purposes
    - Stored securely and encrypted
    - Not shared with third parties
    - Deleted according to our data retention policy
  `,m=`
    Assessment Rules and Guidelines:

    1. Time Management:
       - Complete the assessment within the allocated time
       - Time cannot be paused or extended
       - Unanswered questions will receive zero points

    2. Navigation:
       - Use only the provided navigation controls
       - Do not use browser back/forward buttons
       - Do not refresh the page unless instructed

    3. Answer Submission:
       - Save your answers regularly
       - Ensure all required questions are answered
       - Submit only when you are ready to complete

    4. Technical Requirements:
       - Maintain a stable internet connection
       - Use a compatible browser
       - Ensure adequate device battery/power

    5. Prohibited Activities:
       - Switching tabs or applications
       - Using external devices or materials
       - Seeking help from others
       - Attempting to hack or bypass security
  `,p=`
    Data Privacy and Protection:

    We collect and process your personal data in accordance with applicable privacy laws and our privacy policy. This includes:

    1. Personal Information:
       - Name, student ID, and contact information
       - Assessment responses and performance data
       - Device and browser information
       - IP address and location data

    2. Assessment Data:
       - Answers and submissions
       - Time spent on questions
       - Navigation patterns
       - Proctoring monitoring data

    3. Data Usage:
       - Academic evaluation and grading
       - Assessment improvement and analytics
       - Academic integrity monitoring
       - Compliance with institutional policies

    4. Data Protection:
       - Encryption of sensitive data
       - Secure data transmission
       - Access controls and authentication
       - Regular security audits

    5. Your Rights:
       - Access to your personal data
       - Correction of inaccurate data
       - Data portability
       - Right to erasure (subject to legal requirements)

    By proceeding, you acknowledge that you have read and understood our data privacy practices.
  `;return e.jsxs("div",{className:`h-screen flex flex-col overflow-hidden m-0 ${a?"bg-gray-900":"bg-gray-50"}`,children:[e.jsx("div",{className:`border-b shadow-sm flex-shrink-0 ${a?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:e.jsx("div",{className:"max-w-4xl mx-auto px-6 py-4",children:e.jsxs("h1",{className:`text-2xl font-bold flex items-center ${a?"text-gray-100":"text-gray-900"}`,children:[e.jsx(l9,{className:`h-6 w-6 mr-2 ${a?"text-gray-300":""}`}),"Terms & Conditions"]})})}),e.jsx("div",{className:"flex-1 overflow-y-auto min-h-0",children:e.jsx("div",{className:"max-w-4xl mx-auto px-6 py-6",children:e.jsx(Re,{className:a?"bg-gray-800 border-gray-700":"",children:e.jsx(De,{className:"p-6",children:e.jsxs("div",{className:`text-sm whitespace-pre-line leading-relaxed space-y-6 ${a?"text-gray-300":"text-gray-700"}`,children:[e.jsxs("div",{children:[e.jsx("h2",{className:`font-semibold mb-3 ${a?"text-gray-100":"text-gray-900"}`,children:"Academic Integrity"}),e.jsx("div",{className:a?"text-gray-300":"text-gray-700",children:f})]}),t.require_proctoring&&e.jsxs("div",{className:`border-t pt-6 ${a?"border-gray-700":"border-gray-200"}`,children:[e.jsx("h2",{className:`font-semibold mb-3 ${a?"text-gray-100":"text-gray-900"}`,children:"Proctoring Terms"}),e.jsx("div",{className:a?"text-gray-300":"text-gray-700",children:h})]}),e.jsxs("div",{className:`border-t pt-6 ${a?"border-gray-700":"border-gray-200"}`,children:[e.jsx("h2",{className:`font-semibold mb-3 ${a?"text-gray-100":"text-gray-900"}`,children:"Assessment Rules and Guidelines"}),e.jsx("div",{className:a?"text-gray-300":"text-gray-700",children:m})]}),e.jsxs("div",{className:`border-t pt-6 ${a?"border-gray-700":"border-gray-200"}`,children:[e.jsx("h2",{className:`font-semibold mb-3 ${a?"text-gray-100":"text-gray-900"}`,children:"Data Privacy and Protection"}),e.jsx("div",{className:a?"text-gray-300":"text-gray-700",children:p})]}),e.jsx("div",{className:`border-t pt-6 mt-8 ${a?"border-gray-700":"border-gray-200"}`,children:e.jsx("div",{className:`rounded-lg p-4 ${a?"bg-gray-700":"bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Vt,{id:"agree-all",checked:d,onCheckedChange:l,className:"mt-1"}),e.jsx("label",{htmlFor:"agree-all",className:`text-sm cursor-pointer flex-1 ${a?"text-gray-200":"text-gray-700"}`,children:"I have read and agree to all the above terms and conditions"})]})})})]})})})})}),e.jsx("div",{className:`border-t shadow-sm flex-shrink-0 ${a?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:e.jsx("div",{className:"max-w-4xl mx-auto px-6 py-4",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(ee,{variant:"outline",onClick:n,className:a?"border-gray-600 text-gray-300 hover:bg-gray-700":"",children:[e.jsx(oa,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(ee,{variant:"outline",onClick:c,className:a?"border-gray-600 text-gray-300 hover:bg-gray-700":"",children:"Cancel"}),e.jsxs(ee,{onClick:u,disabled:!i,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Start Assessment",e.jsx(li,{className:"h-4 w-4 ml-2"})]})]})]})})})]})},JV=({assessment:t,submission:r,proctoringPermissions:s,setProctoringPermissions:n,onComplete:c,onBack:o,onCancel:a,theme:d="light",isDarkMode:l=!1})=>{const[i,u]=A.useState({camera:!1,microphone:!1,fullscreen:!1}),[f,h]=A.useState({}),[m,p]=A.useState(!1),[x,g]=A.useState(null),v=A.useRef(null),y=A.useRef(null),b=t.proctoring_settings||{},T=(()=>{const z=[];return b.require_webcam&&z.push({name:"Camera Monitoring",icon:fy}),b.require_microphone&&z.push({name:"Microphone Monitoring",icon:sN}),b.fullscreen_requirement&&z.push({name:"Fullscreen Mode",icon:J_}),b.browser_lockdown&&z.push({name:"Browser Lockdown",icon:Wd}),b.tab_switching_detection&&z.push({name:"Tab Switching Detection",icon:Gd}),z})();A.useEffect(()=>{u({camera:!1,microphone:!1,fullscreen:!1})},[b]);const M=async()=>{if(!b.require_webcam)return!0;try{const z=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:"user"}});return y.current=z,v.current&&(v.current.srcObject=z),u(k=>({...k,camera:!0})),h(k=>({...k,camera:null})),!0}catch(z){return console.error("Camera permission error:",z),h(k=>({...k,camera:"Camera access denied. Please enable camera access in your browser settings."})),!1}},U=async()=>{if(!b.require_microphone)return!0;try{const z=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});if(y.current){const k=[...y.current.getTracks(),...z.getTracks()];y.current=new MediaStream(k)}else y.current=z;return u(k=>({...k,microphone:!0})),h(k=>({...k,microphone:null})),!0}catch(z){return console.error("Microphone permission error:",z),h(k=>({...k,microphone:"Microphone access denied. Please enable microphone access in your browser settings."})),!1}},L=async()=>{if(!b.fullscreen_requirement)return!0;try{return document.documentElement.requestFullscreen?await document.documentElement.requestFullscreen():document.documentElement.webkitRequestFullscreen?await document.documentElement.webkitRequestFullscreen():document.documentElement.mozRequestFullScreen?await document.documentElement.mozRequestFullScreen():document.documentElement.msRequestFullscreen&&await document.documentElement.msRequestFullscreen(),u(z=>({...z,fullscreen:!0})),!0}catch(z){return console.error("Fullscreen permission error:",z),h(k=>({...k,fullscreen:"Fullscreen access denied. Please allow fullscreen mode."})),!1}},P=()=>(b.browser_lockdown,!0),B=async()=>{p(!0),g(null);try{const z=await M(),k=await U(),R=await L(),S=P();(!b.require_webcam||z)&&(!b.require_microphone||k)&&(!b.fullscreen_requirement||R)&&S?(n(i),c()):g("Please grant all required permissions to continue.")}catch(z){console.error("Setup error:",z),g("An error occurred during setup. Please try again.")}finally{p(!1)}},q=()=>{const z=!b.require_webcam||i.camera,k=!b.require_microphone||i.microphone,R=!b.fullscreen_requirement||i.fullscreen;return z&&k&&R&&!m};return e.jsxs("div",{className:`max-w-3xl mx-auto space-y-6 ${l?"bg-gray-900 min-h-screen py-8":""}`,children:[e.jsxs(Re,{className:l?"bg-gray-800 border-gray-700":"",children:[e.jsxs(lt,{className:l?"bg-gray-700":"",children:[e.jsxs(mt,{className:`text-xl flex items-center ${l?"text-gray-100":""}`,children:[e.jsx(el,{className:`h-5 w-5 mr-2 ${l?"text-gray-300":""}`}),"Proctoring Setup"]}),e.jsx("p",{className:`text-sm ${l?"text-gray-300":"text-gray-600"}`,children:"Grant required permissions to continue. Proctoring will only activate when you start answering questions."})]}),e.jsxs(De,{className:"space-y-6",children:[T.length>0?e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:`font-medium ${l?"text-gray-100":"text-gray-900"}`,children:"Active Proctoring Features:"}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:T.map((z,k)=>{const R=z.icon,S=z.name==="Camera Monitoring"&&i.camera||z.name==="Microphone Monitoring"&&i.microphone||z.name==="Fullscreen Mode"&&i.fullscreen||z.name==="Browser Lockdown"||z.name==="Tab Switching Detection";return e.jsxs("div",{className:`flex items-center justify-between p-3 border rounded-lg ${l?"bg-gray-700 border-gray-600":""}`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(R,{className:`h-5 w-5 ${l?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`text-sm font-medium ${l?"text-gray-200":"text-gray-700"}`,children:z.name})]}),S?e.jsx(Yt,{className:`h-5 w-5 ${l?"text-green-400":"text-green-600"}`}):e.jsx(Mr,{className:`h-5 w-5 ${l?"text-gray-500":"text-gray-400"}`})]},k)})})]}):e.jsxs(pr,{className:l?"bg-gray-700 border-gray-600":"",children:[e.jsx(Ms,{className:`h-4 w-4 ${l?"text-gray-300":""}`}),e.jsx(gr,{className:l?"text-gray-300":"",children:"Basic proctoring is enabled. No additional permissions required."})]}),(b.require_webcam||b.require_microphone)&&e.jsxs("div",{className:"space-y-4",children:[b.require_webcam&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:`text-sm font-medium ${l?"text-gray-200":"text-gray-700"}`,children:"Camera Access"}),i.camera?e.jsx(et,{variant:"default",className:"bg-green-600",children:"Granted"}):e.jsx(ee,{variant:"outline",size:"sm",onClick:M,disabled:m,className:l?"border-gray-600 text-gray-300 hover:bg-gray-700":"",children:"Request Camera"})]}),f.camera&&e.jsx("p",{className:`text-sm mt-1 ${l?"text-red-400":"text-red-600"}`,children:f.camera}),i.camera&&e.jsx("video",{ref:v,autoPlay:!0,muted:!0,className:`w-full h-48 rounded-lg border mt-2 ${l?"border-gray-600":""}`})]}),b.require_microphone&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:`text-sm font-medium ${l?"text-gray-200":"text-gray-700"}`,children:"Microphone Access"}),i.microphone?e.jsx(et,{variant:"default",className:"bg-green-600",children:"Granted"}):e.jsx(ee,{variant:"outline",size:"sm",onClick:U,disabled:m,className:l?"border-gray-600 text-gray-300 hover:bg-gray-700":"",children:"Request Microphone"})]}),f.microphone&&e.jsx("p",{className:`text-sm mt-1 ${l?"text-red-400":"text-red-600"}`,children:f.microphone})]}),b.fullscreen_requirement&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:`text-sm font-medium ${l?"text-gray-200":"text-gray-700"}`,children:"Fullscreen Mode"}),i.fullscreen?e.jsx(et,{variant:"default",className:"bg-green-600",children:"Enabled"}):e.jsx(ee,{variant:"outline",size:"sm",onClick:L,disabled:m,className:l?"border-gray-600 text-gray-300 hover:bg-gray-700":"",children:"Enable Fullscreen"})]}),f.fullscreen&&e.jsx("p",{className:`text-sm mt-1 ${l?"text-red-400":"text-red-600"}`,children:f.fullscreen})]})]}),x&&e.jsxs(pr,{variant:"destructive",children:[e.jsx(Ms,{className:"h-4 w-4"}),e.jsx(gr,{children:x})]}),e.jsxs(pr,{className:l?"bg-gray-700 border-gray-600":"",children:[e.jsx(el,{className:`h-4 w-4 ${l?"text-gray-300":""}`}),e.jsx(gr,{className:l?"text-gray-300":"",children:"Proctoring monitoring will only begin when you start answering questions, not during instructions or setup."})]})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(ee,{variant:"outline",onClick:o,className:l?"border-gray-600 text-gray-300 hover:bg-gray-700":"",children:[e.jsx(oa,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(ee,{variant:"outline",onClick:a,className:l?"border-gray-600 text-gray-300 hover:bg-gray-700":"",children:"Cancel"}),e.jsxs(ee,{onClick:B,disabled:!q(),className:"bg-blue-600 hover:bg-blue-700",children:["Continue",e.jsx(li,{className:"h-4 w-4 ml-2"})]})]})]})]})};var Lv="Radio",[eq,CC]=nn(Lv),[tq,sq]=eq(Lv),kC=A.forwardRef((t,r)=>{const{__scopeRadio:s,name:n,checked:c=!1,required:o,disabled:a,value:d="on",onCheck:l,form:i,...u}=t,[f,h]=A.useState(null),m=bs(r,g=>h(g)),p=A.useRef(!1),x=f?i||!!f.closest("form"):!0;return e.jsxs(tq,{scope:s,checked:c,disabled:a,children:[e.jsx(Dt.button,{type:"button",role:"radio","aria-checked":c,"data-state":RC(c),"data-disabled":a?"":void 0,disabled:a,value:d,...u,ref:m,onClick:It(t.onClick,g=>{c||l==null||l(),x&&(p.current=g.isPropagationStopped(),p.current||g.stopPropagation())})}),x&&e.jsx(TC,{control:f,bubbles:!p.current,name:n,value:d,checked:c,required:o,disabled:a,form:i,style:{transform:"translateX(-100%)"}})]})});kC.displayName=Lv;var EC="RadioIndicator",AC=A.forwardRef((t,r)=>{const{__scopeRadio:s,forceMount:n,...c}=t,o=sq(EC,s);return e.jsx(Tn,{present:n||o.checked,children:e.jsx(Dt.span,{"data-state":RC(o.checked),"data-disabled":o.disabled?"":void 0,...c,ref:r})})});AC.displayName=EC;var rq="RadioBubbleInput",TC=A.forwardRef(({__scopeRadio:t,control:r,checked:s,bubbles:n=!0,...c},o)=>{const a=A.useRef(null),d=bs(a,o),l=jv(s),i=Cy(r);return A.useEffect(()=>{const u=a.current;if(!u)return;const f=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(f,"checked").set;if(l!==s&&m){const p=new Event("click",{bubbles:n});m.call(u,s),u.dispatchEvent(p)}},[l,s,n]),e.jsx(Dt.input,{type:"radio","aria-hidden":!0,defaultChecked:s,...c,tabIndex:-1,ref:d,style:{...c.style,...i,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});TC.displayName=rq;function RC(t){return t?"checked":"unchecked"}var nq=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Um="RadioGroup",[aq,fH]=nn(Um,[Tc,CC]),PC=Tc(),MC=CC(),[iq,oq]=aq(Um),IC=A.forwardRef((t,r)=>{const{__scopeRadioGroup:s,name:n,defaultValue:c,value:o,required:a=!1,disabled:d=!1,orientation:l,dir:i,loop:u=!0,onValueChange:f,...h}=t,m=PC(s),p=mu(i),[x,g]=$a({prop:o,defaultProp:c??null,onChange:f,caller:Um});return e.jsx(iq,{scope:s,name:n,required:a,disabled:d,value:x,onValueChange:g,children:e.jsx(Py,{asChild:!0,...m,orientation:l,dir:p,loop:u,children:e.jsx(Dt.div,{role:"radiogroup","aria-required":a,"aria-orientation":l,"data-disabled":d?"":void 0,dir:p,...h,ref:r})})})});IC.displayName=Um;var OC="RadioGroupItem",FC=A.forwardRef((t,r)=>{const{__scopeRadioGroup:s,disabled:n,...c}=t,o=oq(OC,s),a=o.disabled||n,d=PC(s),l=MC(s),i=A.useRef(null),u=bs(r,i),f=o.value===c.value,h=A.useRef(!1);return A.useEffect(()=>{const m=x=>{nq.includes(x.key)&&(h.current=!0)},p=()=>h.current=!1;return document.addEventListener("keydown",m),document.addEventListener("keyup",p),()=>{document.removeEventListener("keydown",m),document.removeEventListener("keyup",p)}},[]),e.jsx(My,{asChild:!0,...d,focusable:!a,active:f,children:e.jsx(kC,{disabled:a,required:o.required,checked:f,...l,...c,name:o.name,ref:u,onCheck:()=>o.onValueChange(c.value),onKeyDown:It(m=>{m.key==="Enter"&&m.preventDefault()}),onFocus:It(c.onFocus,()=>{var m;h.current&&((m=i.current)==null||m.click())})})})});FC.displayName=OC;var lq="RadioGroupIndicator",LC=A.forwardRef((t,r)=>{const{__scopeRadioGroup:s,...n}=t,c=MC(s);return e.jsx(AC,{...c,...n,ref:r})});LC.displayName=lq;var DC=IC,$C=FC,cq=LC;const ox=A.forwardRef(({className:t,...r},s)=>e.jsx(DC,{className:Ot("grid gap-2",t),...r,ref:s}));ox.displayName=DC.displayName;const BC=A.forwardRef(({className:t,...r},s)=>e.jsx($C,{ref:s,className:Ot("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...r,children:e.jsx(cq,{className:"flex items-center justify-center",children:e.jsx(py,{className:"h-2.5 w-2.5 fill-current text-current"})})}));BC.displayName=$C.displayName;const od=A.memo(({option:t,index:r,value:s,onChange:n,type:c="radio",isDarkMode:o=!1})=>{const a=`option-${r}`,d=c==="radio"?s===t:Array.isArray(s)&&s.includes(t);return e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-lg transition-colors cursor-pointer ${o?"hover:bg-gray-700":"hover:bg-gray-50"}`,children:[c==="radio"?e.jsx(BC,{value:t,id:a,className:"mt-0.5"}):e.jsx(Vt,{id:a,checked:d,onCheckedChange:l=>{if(c==="checkbox"){const i=Array.isArray(s)?s:[];n(l?[...i,t]:i.filter(u=>u!==t))}},className:"mt-0.5"}),e.jsx(Se,{htmlFor:a,className:`flex-1 text-sm cursor-pointer leading-relaxed ${o?"text-gray-200":"text-gray-700"}`,children:t})]})});od.displayName="OptionItem";const zC=A.memo(({question:t,answer:r,onAnswerChange:s,onSave:n,theme:c="light",isDarkMode:o=!1})=>{const[a,d]=A.useState(r||""),[l,i]=A.useState(!1);A.useEffect(()=>{d(r||"")},[r,t.id]);const u=A.useMemo(()=>({id:t.id,text:t.question_text||t.content||t.title||"Question",type:t.question_type||"multiple_choice",points:t.points||1,options:Array.isArray(t.options)?t.options:[],isRequired:t.is_required!==!1}),[t]),f=A.useRef(null);A.useEffect(()=>(f.current&&clearTimeout(f.current),a&&n&&a!==(r||"")&&(typeof a=="string"?a.trim()!=="":Array.isArray(a)?a.length>0:typeof a=="object"&&a!==null)&&(f.current=setTimeout(()=>{n(a)},1e3)),()=>{f.current&&clearTimeout(f.current)}),[a,r,n]);const h=A.useCallback(M=>{d(M),s(M)},[s]);A.useCallback(async()=>{if(!a||typeof a=="string"&&!a.trim()){ut.error("Please provide an answer before saving");return}i(!0);try{await n(a),ut.success("Answer saved successfully")}catch(M){console.error("Error saving answer:",M),ut.error("Failed to save answer")}finally{i(!1)}},[a,n]);const m=A.useMemo(()=>a?typeof a=="string"?a.trim()!=="":Array.isArray(a)?a.length>0:typeof a=="object"?Object.keys(a).length>0:!1:!1,[a]),p=A.useMemo(()=>u.options.length===0?e.jsx("div",{className:`text-sm italic p-4 rounded-lg ${o?"text-gray-400 bg-gray-700":"text-gray-500 bg-gray-50"}`,children:"No options available for this question"}):e.jsx(ox,{value:a,onValueChange:h,className:"space-y-1",children:u.options.map((M,U)=>e.jsx(od,{option:M,index:U,value:a,onChange:h,type:"radio",isDarkMode:o},`${u.id}-option-${U}`))}),[u.id,u.options,a,h,o]),x=A.useMemo(()=>{if(u.options.length===0)return e.jsx("div",{className:`text-sm italic p-4 rounded-lg ${o?"text-gray-400 bg-gray-700":"text-gray-500 bg-gray-50"}`,children:"No options available for this question"});const M=Array.isArray(a)?a:[];return e.jsx("div",{className:"space-y-1",children:u.options.map((U,L)=>e.jsx(od,{option:U,index:L,value:M,onChange:h,type:"checkbox",isDarkMode:o},`${u.id}-checkbox-${L}`))})},[u.id,u.options,a,h,o]),g=A.useMemo(()=>e.jsxs(ox,{value:a,onValueChange:h,className:"space-y-1",children:[e.jsx(od,{option:"True",index:0,value:a,onChange:h,type:"radio",isDarkMode:o}),e.jsx(od,{option:"False",index:1,value:a,onChange:h,type:"radio",isDarkMode:o})]}),[a,h,o]),v=A.useMemo(()=>e.jsx(Ye,{value:a,onChange:M=>h(M.target.value),placeholder:"Enter your answer here...",className:`w-full ${o?"bg-gray-700 border-gray-600 text-gray-100 placeholder:text-gray-400":""}`,autoFocus:!1}),[a,h,o]),y=A.useMemo(()=>e.jsx(ms,{value:a,onChange:M=>h(M.target.value),placeholder:"Enter your essay answer here...",className:`w-full min-h-32 resize-none ${o?"bg-gray-700 border-gray-600 text-gray-100 placeholder:text-gray-400":""}`,rows:8}),[a,h,o]),b=A.useMemo(()=>{const U=u.text.match(/_{3,}/g)||[];if(U.length===0)return e.jsx("div",{className:`text-sm p-4 rounded-lg ${o?"text-gray-300 bg-gray-700":"text-gray-600 bg-gray-50"}`,children:"No blanks found in this question."});const L=Array.isArray(a)?a:[];return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:`text-sm mb-4 font-medium ${o?"text-gray-200":"text-gray-700"}`,children:"Fill in the blanks below:"}),U.map((P,B)=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(Se,{className:`text-sm font-medium min-w-[80px] ${o?"text-gray-200":"text-gray-700"}`,children:["Blank ",B+1,":"]}),e.jsx(Ye,{value:L[B]||"",onChange:q=>{const z=[...L];z[B]=q.target.value,h(z)},placeholder:"Enter answer...",className:`flex-1 ${o?"bg-gray-700 border-gray-600 text-gray-100 placeholder:text-gray-400":""}`})]},B))]})},[u.text,a,h,o]),C=A.useMemo(()=>{const M=U=>{const L=U.target.files[0];if(L){if(L.size>10485760){ut.error(`File size exceeds maximum allowed size (10MB). Selected file is ${(L.size/1024/1024).toFixed(2)}MB`),U.target.value="";return}h({fileName:L.name,fileSize:L.size,fileType:L.type,file:L})}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${o?"border-gray-600 hover:border-blue-500":"border-gray-300 hover:border-blue-400"}`,children:[e.jsx("div",{className:`text-sm mb-4 ${o?"text-gray-300":"text-gray-600"}`,children:"Click to upload or drag and drop"}),e.jsx(Ye,{type:"file",onChange:M,className:`w-full max-w-xs mx-auto cursor-pointer ${o?"bg-gray-700 text-gray-100":""}`,accept:t.accepted_file_types||"*"})]}),a&&a.fileName&&e.jsx("div",{className:`border rounded-lg p-4 ${o?"bg-green-900 border-green-700":"bg-green-50 border-green-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Yt,{className:`h-5 w-5 ${o?"text-green-400":"text-green-600"}`}),e.jsxs("div",{children:[e.jsx("div",{className:`text-sm font-medium ${o?"text-green-200":"text-green-900"}`,children:a.fileName}),e.jsxs("div",{className:`text-xs ${o?"text-green-300":"text-green-700"}`,children:[(a.fileSize/1024).toFixed(1)," KB"]})]})]}),e.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>h(null),className:o?"text-gray-300 hover:bg-gray-700":"",children:"Remove"})]})})]})},[a,t.accepted_file_types,h,o]),T=A.useMemo(()=>{switch(u.type){case"multiple_choice":case"single_choice":return p;case"true_false":return g;case"checkbox":case"multiple_select":return x;case"short_answer":return v;case"essay":return y;case"fill_blanks":return b;case"file_upload":return C;default:return e.jsxs("div",{className:`text-sm p-4 rounded-lg ${o?"text-gray-300 bg-gray-700":"text-gray-600 bg-gray-50"}`,children:["Unsupported question type: ",u.type]})}},[u.type,p,x,g,v,y,b,C]);return e.jsxs("div",{className:"space-y-6 pl-6 pt-6",children:[e.jsxs("div",{className:"pb-4",children:[e.jsx("h2",{className:`text-2xl font-bold mb-3 leading-tight ${o?"text-gray-100":"text-gray-900"}`,children:u.text}),e.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:e.jsxs(et,{variant:"outline",className:`text-xs font-medium ${o?"border-gray-600 text-gray-300":""}`,children:[u.points," ",u.points===1?"point":"points"]})})]}),e.jsx("div",{className:"space-y-2",children:T}),e.jsx("div",{className:`flex items-center pt-4 border-t ${o?"border-gray-700":"border-gray-200"}`,children:e.jsx("div",{className:"flex items-center space-x-2",children:m?e.jsxs("div",{className:`flex items-center space-x-2 ${o?"text-green-400":"text-green-600"}`,children:[e.jsx(Yt,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Answered (Auto-saved)"})]}):e.jsxs("div",{className:`flex items-center space-x-2 ${o?"text-gray-400":"text-gray-500"}`,children:[e.jsx(Ms,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Not answered"})]})})})]})});zC.displayName="QuestionRenderer";const dq=({question:t,answer:r,onAnswerChange:s,onSave:n,submissionId:c,theme:o="light",isDarkMode:a=!1})=>{var $e,ue;const d=()=>{var Me,ze,Xe,Ve;const oe={javascript:{label:"JavaScript",icon:""},python:{label:"Python",icon:""},java:{label:"Java",icon:""},cpp:{label:"C++",icon:""},c:{label:"C",icon:""},php:{label:"PHP",icon:""},ruby:{label:"Ruby",icon:""},go:{label:"Go",icon:""},rust:{label:"Rust",icon:""},typescript:{label:"TypeScript",icon:""}};let _e=[];return(Me=t.metadata)!=null&&Me.languages&&Array.isArray(t.metadata.languages)?_e=t.metadata.languages:(ze=t.metadata)!=null&&ze.starter_codes&&typeof t.metadata.starter_codes=="object"?_e=Object.keys(t.metadata.starter_codes):(Xe=t.coding_details)!=null&&Xe.languages&&Array.isArray(t.coding_details.languages)?_e=t.coding_details.languages:(Ve=t.coding_details)!=null&&Ve.starter_codes&&typeof t.coding_details.starter_codes=="object"?_e=Object.keys(t.coding_details.starter_codes):_e=["javascript"],_e.map(ot=>{var xt,ft;return{value:ot,label:((xt=oe[ot])==null?void 0:xt.label)||ot,icon:((ft=oe[ot])==null?void 0:ft.icon)||""}})},l=oe=>{var _e,Me,ze,Xe,Ve,ot,xt,ft;return r!=null&&r.code&&(r==null?void 0:r.language)===oe?r.code:(Me=(_e=t.metadata)==null?void 0:_e.starter_codes)!=null&&Me[oe]?t.metadata.starter_codes[oe]:(Xe=(ze=t.coding_details)==null?void 0:ze.starter_codes)!=null&&Xe[oe]?t.coding_details.starter_codes[oe]:oe===(t.language||((Ve=t.coding_details)==null?void 0:Ve.language)||((ot=t.metadata)==null?void 0:ot.language)||"javascript")&&(t.starter_code||((xt=t.coding_details)==null?void 0:xt.starter_code)||((ft=t.metadata)==null?void 0:ft.starter_code))||""},i=()=>{const oe=d();return oe.length===0?"javascript":r!=null&&r.language&&oe.find(_e=>_e.value===r.language)?r.language:oe[0].value},u=oe=>({javascript:"javascript",python:"python",java:"java",cpp:"cpp",c:"c",php:"php",ruby:"ruby",go:"go",rust:"rust",typescript:"typescript"})[oe]||"javascript",f=d(),h=i(),[m,p]=A.useState(l(h)),[x,g]=A.useState(h),[v,y]=A.useState((r==null?void 0:r.testResults)||[]),[b,C]=A.useState(!1),[T,M]=A.useState(!1),[U,L]=A.useState(!1),[P,B]=A.useState(0),[q,z]=A.useState(0),[k,R]=A.useState(40),[S,w]=A.useState(!1),[_,j]=A.useState(!1),[N,E]=A.useState(""),[I,D]=A.useState(""),[V,H]=A.useState(null),[G,$]=A.useState(!0),Y=A.useRef(null),F=A.useRef(null),O=A.useRef(null),[W,K]=A.useState("500px"),Q=A.useRef(null),X=oe=>{var Me,ze,Xe,Ve,ot,xt,ft;let _e=[];if(oe&&((ze=(Me=t.coding_details)==null?void 0:Me.test_cases_by_language)!=null&&ze[oe]&&Array.isArray(t.coding_details.test_cases_by_language[oe])?_e=t.coding_details.test_cases_by_language[oe]:(Ve=(Xe=t.metadata)==null?void 0:Xe.test_cases_by_language)!=null&&Ve[oe]&&Array.isArray(t.metadata.test_cases_by_language[oe])&&(_e=t.metadata.test_cases_by_language[oe])),_e.length===0){if(t.test_cases&&Array.isArray(t.test_cases))_e=t.test_cases;else if((ot=t.coding_details)!=null&&ot.test_cases&&Array.isArray(t.coding_details.test_cases))_e=t.coding_details.test_cases;else if((xt=t.metadata)!=null&&xt.test_cases){if(Array.isArray(t.metadata.test_cases))_e=t.metadata.test_cases;else if(typeof t.metadata.test_cases=="string")try{_e=JSON.parse(t.metadata.test_cases)}catch(at){console.warn("Failed to parse metadata.test_cases string:",at)}}else if(t.test_cases&&typeof t.test_cases=="string")try{_e=JSON.parse(t.test_cases)}catch(at){console.warn("Failed to parse test_cases string:",at)}else if((ft=t.coding_details)!=null&&ft.test_cases&&typeof t.coding_details.test_cases=="string")try{_e=JSON.parse(t.coding_details.test_cases)}catch(at){console.warn("Failed to parse coding_details.test_cases string:",at)}}return _e=_e.map(at=>at.output&&!at.expected_output&&!at.expectedOutput?{...at,expected_output:at.output,expectedOutput:at.output}:(at.expected_output&&!at.expectedOutput&&(at.expectedOutput=at.expected_output),at.expectedOutput&&!at.expected_output&&(at.expected_output=at.expectedOutput),at.input_data&&!at.input&&(at.input=at.input_data),at.inputData&&!at.input&&!at.input_data&&(at.input=at.inputData),at)),Array.isArray(_e)||(_e=[]),_e},te=oe=>{var _e,Me,ze,Xe,Ve,ot;if(oe){if((Me=(_e=t.coding_details)==null?void 0:_e.time_limits_by_language)!=null&&Me[oe])return t.coding_details.time_limits_by_language[oe];if((Xe=(ze=t.metadata)==null?void 0:ze.time_limits_by_language)!=null&&Xe[oe])return t.metadata.time_limits_by_language[oe]}return t.time_limit||((Ve=t.coding_details)==null?void 0:Ve.time_limit)||((ot=t.metadata)==null?void 0:ot.time_limit)||1e3},de=oe=>{var _e,Me,ze,Xe,Ve,ot;if(oe){if((Me=(_e=t.coding_details)==null?void 0:_e.memory_limits_by_language)!=null&&Me[oe])return t.coding_details.memory_limits_by_language[oe];if((Xe=(ze=t.metadata)==null?void 0:ze.memory_limits_by_language)!=null&&Xe[oe])return t.metadata.memory_limits_by_language[oe]}return t.memory_limit||((Ve=t.coding_details)==null?void 0:Ve.memory_limit)||((ot=t.metadata)==null?void 0:ot.memory_limit)||256},xe=A.useMemo(()=>X(x),[x,t]);A.useMemo(()=>te(x),[x,t]),A.useMemo(()=>de(x),[x,t]),A.useEffect(()=>{let oe=null,_e=null;const Me=()=>{if(O.current){const Xe=O.current.clientHeight;Xe>0&&K(`${Xe}px`)}};return _e=setTimeout(()=>{Me(),O.current&&(oe=new ResizeObserver(()=>{Me()}),oe.observe(O.current),window.addEventListener("resize",Me))},100),()=>{_e&&clearTimeout(_e),oe&&oe.disconnect(),window.removeEventListener("resize",Me)}},[]),A.useEffect(()=>(Y.current=setInterval(()=>{m&&m!==(r==null?void 0:r.code)&&Ce()},3e4),()=>{Y.current&&clearInterval(Y.current)}),[m]),A.useEffect(()=>{const oe=v.length>0&&v.every(Me=>{var ze,Xe;return Me&&((Xe=(ze=Me.result)==null?void 0:ze.verdict)==null?void 0:Xe.status)==="accepted"}),_e={code:m,language:x,testResults:v,executionTime:P,memoryUsage:q,allTestsPassed:oe,timestamp:new Date().toISOString()};if(JSON.stringify(_e)!==JSON.stringify(r)&&(s(_e),n&&m.trim())){Y.current&&clearTimeout(Y.current);const Me=oe?0:1e3;Y.current=setTimeout(()=>{n(_e)},Me)}return()=>{Y.current&&clearTimeout(Y.current)}},[m,x,v,P,q,r,s,n]);const ne=oe=>{p(typeof oe=="string"?oe:oe||"")},[ge,be]=A.useState(()=>{if(typeof Storage<"u"&&(t!=null&&t.id))try{const oe=localStorage.getItem(`code_${t.id}`);if(oe)return JSON.parse(oe)}catch(oe){console.error("Error loading code from localStorage:",oe)}return{}});A.useEffect(()=>{if(typeof Storage<"u"&&(t!=null&&t.id)&&Object.keys(ge).length>0)try{localStorage.setItem(`code_${t.id}`,JSON.stringify(ge))}catch(oe){console.error("Error saving code to localStorage:",oe)}},[ge,t==null?void 0:t.id]);const Ie=oe=>{m&&m.trim()&&x&&be(Me=>({...Me,[x]:m})),g(oe);const _e=ge[oe];if(_e&&_e.trim())p(_e);else{const Me=l(oe);p(Me)}y([])},Ce=async()=>{if(!m.trim()){ut.error("Please write some code before saving");return}L(!0);try{const oe={code:m,language:x,testResults:v,executionTime:P,memoryUsage:q,timestamp:new Date().toISOString()};await n(oe),ut.success("Code saved successfully")}catch(oe){console.error("Error saving code:",oe),ut.error("Failed to save code")}finally{L(!1)}},Oe=async()=>{if(!m.trim()){ut.error("Please write some code before running tests");return}if(xe.length===0){ut.error("No test cases available for this question");return}C(!0),y([]);try{const oe=Date.now(),_e=xe.map(Xe=>({input:Xe.input||Xe.input_data||"",expected_output:Xe.expected_output||Xe.expectedOutput||Xe.output||"",input_data:Xe.input||Xe.input_data||""})),Me=await Pe.runCodingTests({sourceCode:m,language:x,testCases:_e}),ze=Date.now();if(B(ze-oe),Me.success){const Ve=(Me.data.results||[]).map((ft,at)=>({testCase:xe[at],result:ft.result,index:at}));y(Ve);const ot=Ve.filter(ft=>{var at,Be;return((Be=(at=ft.result)==null?void 0:at.verdict)==null?void 0:Be.status)==="accepted"}).length;if(ot===Ve.length&&Ve.length>0){ut.success("All tests passed! Question marked as completed.",{duration:5e3});const ft={code:m,language:x,testResults:Ve,executionTime:P,memoryUsage:q,allTestsPassed:!0,timestamp:new Date().toISOString()};s(ft),n&&n(ft)}else{ut.success(`Tests completed: ${ot}/${Ve.length} passed`);const ft={code:m,language:x,testResults:Ve,executionTime:ze-oe,memoryUsage:q,allTestsPassed:!1,timestamp:new Date().toISOString()};s(ft)}}else throw new Error(Me.message||"Failed to run tests")}catch(oe){console.error("Error running tests:",oe),ut.error(oe.message||"Failed to run test cases"),y(xe.map((_e,Me)=>({testCase:_e,result:{verdict:{status:"error"},output:"",error:oe.message,executionTime:0,memoryUsage:0},index:Me})))}finally{C(!1)}},Ee=async(oe,_e)=>{if(!m.trim()){ut.error("Please write some code before running tests");return}C(!0);try{const Me={input:oe.input||oe.input_data||"",expected_output:oe.expected_output||oe.expectedOutput||oe.output||"",input_data:oe.input||oe.input_data||""},ze=await Pe.runCodingTests({sourceCode:m,language:x,testCases:[Me]});if(ze.success){const Xe=ze.data.results[0];y(Ve=>{var ft,at;const ot=[...Ve];return ot[_e]={testCase:oe,result:Xe.result,index:_e},ot.length>0&&ot.every(Be=>{var Ue,re;return Be&&((re=(Ue=Be.result)==null?void 0:Ue.verdict)==null?void 0:re.status)==="accepted"})?setTimeout(()=>{const Be={code:m,language:x,testResults:ot,executionTime:P,memoryUsage:q,allTestsPassed:!0,timestamp:new Date().toISOString()};s(Be),n&&n(Be),ut.success("All tests passed! Question marked as completed.",{duration:5e3})},100):ut.success(`Test case ${_e+1} ${((at=(ft=Xe.result)==null?void 0:ft.verdict)==null?void 0:at.status)==="accepted"?"passed":"failed"}`),ot})}else throw new Error(ze.message||"Failed to run test")}catch(Me){console.error("Error running single test:",Me),ut.error(Me.message||"Failed to run test case")}finally{C(!1)}},pe=()=>{if(window.confirm("Are you sure you want to reset your code? This action cannot be undone.")){const oe=l(x);p(oe||""),y([]),B(0),z(0),ut.success("Code reset to starter code")}},Ae=oe=>{w(!0),oe.preventDefault()};A.useEffect(()=>{const oe=Me=>{if(!S||!F.current)return;const Xe=F.current.getBoundingClientRect(),Ve=(Me.clientX-Xe.left)/Xe.width*100,ot=Math.max(25,Math.min(75,Ve));R(ot)},_e=()=>{w(!1)};return S&&(document.addEventListener("mousemove",oe),document.addEventListener("mouseup",_e)),()=>{document.removeEventListener("mousemove",oe),document.removeEventListener("mouseup",_e)}},[S]);const st=oe=>{var Me,ze;if(!oe)return e.jsx(Ms,{className:"h-4 w-4 text-gray-400"});switch((ze=(Me=oe.result)==null?void 0:Me.verdict)==null?void 0:ze.status){case"accepted":return e.jsx(Yt,{className:"h-4 w-4 text-green-600"});case"wrong_answer":return e.jsx(Mr,{className:"h-4 w-4 text-red-600"});case"time_limit_exceeded":return e.jsx(Ps,{className:"h-4 w-4 text-orange-600"});case"runtime_error":return e.jsx(Ms,{className:"h-4 w-4 text-red-600"});case"compilation_error":return e.jsx(Mr,{className:"h-4 w-4 text-red-600"});default:return e.jsx(Ms,{className:"h-4 w-4 text-gray-400"})}},qe=oe=>{var Me,ze;if(!oe)return"bg-gray-100";switch((ze=(Me=oe.result)==null?void 0:Me.verdict)==null?void 0:ze.status){case"accepted":return"bg-green-50 border-green-200";case"wrong_answer":return"bg-red-50 border-red-200";case"time_limit_exceeded":return"bg-orange-50 border-orange-200";case"runtime_error":return"bg-red-50 border-red-200";case"compilation_error":return"bg-red-50 border-red-200";default:return"bg-gray-50 border-gray-200"}},ie=()=>v.filter(oe=>{var _e,Me;return((Me=(_e=oe.result)==null?void 0:_e.verdict)==null?void 0:Me.status)==="accepted"}).length,ae=A.useCallback(async()=>{try{document.exitFullscreen?await document.exitFullscreen():document.webkitExitFullscreen?await document.webkitExitFullscreen():document.msExitFullscreen&&await document.msExitFullscreen(),j(!1),Q.current&&Q.current.parentNode&&Q.current.parentNode.removeChild(Q.current),Q.current=null}catch(oe){console.error("Error exiting fullscreen:",oe),j(!1)}},[]),we=async()=>{j(!0)};A.useEffect(()=>{const oe=()=>{!document.fullscreenElement&&!document.webkitFullscreenElement&&!document.msFullscreenElement?j(!1):j(!0)},_e=Me=>{Me.key==="Escape"&&_&&ae()};return _&&(document.addEventListener("fullscreenchange",oe),document.addEventListener("webkitfullscreenchange",oe),document.addEventListener("msfullscreenchange",oe),document.addEventListener("keydown",_e)),()=>{document.removeEventListener("fullscreenchange",oe),document.removeEventListener("webkitfullscreenchange",oe),document.removeEventListener("msfullscreenchange",oe),document.removeEventListener("keydown",_e)}},[_,ae]);const ve=async()=>{var oe,_e,Me;if(!m.trim()){ut.error("Please write some code before running custom test");return}if(!N.trim()){ut.error("Please enter test input");return}M(!0),H(null);try{const ze={input:N.trim(),expected_output:(I==null?void 0:I.trim())||"",input_data:N.trim()},Xe=await Pe.runCodingTests({sourceCode:m,language:x,testCases:[ze]});if(Xe.success&&Xe.data){const Ve=(oe=Xe.data.results)==null?void 0:oe[0];if(Ve&&Ve.result)H({input:N.trim(),expectedOutput:(I==null?void 0:I.trim())||"",output:Ve.result.output||"",error:Ve.result.error||"",status:((_e=Ve.result.verdict)==null?void 0:_e.status)||"unknown",executionTime:Ve.result.executionTime||0,memoryUsage:Ve.result.memoryUsage||0}),((Me=Ve.result.verdict)==null?void 0:Me.status)==="accepted"?ut.success(" Custom test passed!",{duration:3e3}):ut.error(" Custom test failed",{duration:3e3});else throw new Error("Unexpected response format from test server")}else throw new Error(Xe.message||"Failed to run custom test")}catch(ze){console.error("Error running custom test:",ze),ut.error(ze.message||"Failed to run custom test case"),H({input:N.trim(),expectedOutput:(I==null?void 0:I.trim())||"",output:"",error:ze.message||"Execution failed",status:"error",executionTime:0,memoryUsage:0})}finally{M(!1)}},He=()=>{var oe,_e,Me;return _?e.jsxs("div",{className:`fixed inset-0 z-[9999] flex flex-col ${a?"bg-gray-900":"bg-white"}`,children:[e.jsxs("div",{className:`flex items-center justify-between px-4 py-3 border-b ${a?"border-gray-700 bg-gray-800":"border-gray-200 bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h3",{className:`text-lg font-semibold ${a?"text-gray-100":"text-gray-900"}`,children:["Code Editor - ",((oe=f.find(ze=>ze.value===x))==null?void 0:oe.label)||x]}),f.length>0&&e.jsxs(At,{value:x,onValueChange:Ie,children:[e.jsx(St,{className:"w-[180px] h-8 text-xs",children:e.jsx(Rt,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:((_e=f.find(ze=>ze.value===x))==null?void 0:_e.icon)||""}),e.jsx("span",{children:((Me=f.find(ze=>ze.value===x))==null?void 0:Me.label)||x})]})})}),e.jsx(Ct,{children:f.map(ze=>e.jsx(Te,{value:ze.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:ze.icon}),e.jsx("span",{children:ze.label})]})},ze.value))})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:`text-xs flex items-center gap-1 ${a?"text-green-400":"text-green-600"}`,children:[e.jsx(Yt,{className:"h-3 w-3"}),"Auto-saved"]}),e.jsx(ee,{variant:"ghost",size:"sm",onClick:ae,className:"h-8 w-8 p-0",title:"Exit Fullscreen (ESC)",children:e.jsx(Dn,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx(If,{value:m||"",onChange:ne,language:u(x),theme:a?"vs-dark":"vs-light",height:"100%",options:{minimap:{enabled:!1},fontSize:14,lineNumbers:"on",wordWrap:"on",automaticLayout:!0,scrollBeyondLastLine:!1,tabSize:x==="python"?4:2,insertSpaces:!0,detectIndentation:!0,renderWhitespace:"selection",bracketPairColorization:{enabled:!0},readOnly:!1}})})]}):null};return e.jsxs(e.Fragment,{children:[_&&e.jsx(He,{}),e.jsx("div",{className:"h-full flex flex-col overflow-hidden",ref:F,children:e.jsxs("div",{className:"flex-1 flex overflow-hidden min-h-0",children:[e.jsx("div",{className:`border-r overflow-y-auto flex flex-col min-h-0 ${a?"bg-gray-800 border-gray-700":"bg-white"}`,style:{width:`${k}%`,height:"100%"},children:e.jsxs("div",{className:"p-4 space-y-4 pb-20",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Gr,{className:`h-5 w-5 ${a?"text-blue-400":"text-blue-600"}`}),e.jsx("h2",{className:`text-xl font-bold ${a?"text-gray-100":"text-gray-900"}`,children:t.title||t.question_text||"Coding Question"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(et,{variant:"outline",className:"text-xs",children:[t.points||1," ",t.points===1?"point":"points"]}),t.difficulty_level&&e.jsx(et,{variant:"outline",className:"text-xs",children:t.difficulty_level})]})]}),t.question_text&&e.jsx("div",{className:`prose max-w-none leading-relaxed ${a?"text-gray-300 prose-invert":"text-gray-700"}`,children:e.jsx("div",{dangerouslySetInnerHTML:{__html:Ff.sanitize(t.question_text)}})}),t.content&&e.jsx("div",{className:`prose max-w-none leading-relaxed ${a?"text-gray-300 prose-invert":"text-gray-700"}`,children:e.jsx("div",{dangerouslySetInnerHTML:{__html:Ff.sanitize(t.content)}})}),t.explanation&&e.jsxs("div",{className:`p-4 rounded-lg border ${a?"bg-blue-900 border-blue-700 text-blue-200":"bg-blue-50 border-blue-200 text-blue-800"}`,children:[e.jsx("h4",{className:"font-medium mb-2",children:"Explanation"}),e.jsx("div",{className:"text-sm",children:t.explanation})]}),e.jsxs(Re,{className:a?"bg-gray-800 border-gray-700":"",children:[e.jsx(lt,{className:a?"bg-gray-700":"",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(mt,{className:`text-sm ${a?"text-gray-100":""}`,children:"Predefined Test Cases"}),e.jsxs(ee,{onClick:Oe,disabled:b||!m.trim()||xe.length===0,className:"bg-green-600 hover:bg-green-700 text-white h-7 text-xs",size:"sm",children:[b?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white mr-2"}):e.jsx(ta,{className:"h-3 w-3 mr-2"}),"Run All Tests"]})]})}),e.jsxs(De,{children:[xe.length===0?e.jsxs(pr,{className:a?"bg-gray-700 border-gray-600":"",children:[e.jsx(Ms,{className:`h-4 w-4 ${a?"text-gray-300":""}`}),e.jsx(gr,{className:`text-xs ${a?"text-gray-300":""}`,children:"No test cases available for this question."})]}):e.jsx("div",{className:"space-y-3",children:xe.map((oe,_e)=>{var ze,Xe,Ve,ot,xt,ft,at,Be,Ue,re;const Me=v.find(ye=>ye.index===_e);return e.jsxs("div",{className:`border rounded-lg p-3 ${Me?qe(Me):a?"bg-gray-700 border-gray-600":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Me&&st(Me),e.jsxs(et,{variant:"outline",className:`text-xs ${a?"border-gray-500 text-gray-300":""}`,children:["Test Case ",_e+1]}),Me&&e.jsx(et,{variant:((Xe=(ze=Me.result)==null?void 0:ze.verdict)==null?void 0:Xe.status)==="accepted"?"default":"destructive",className:"text-xs",children:((xt=(ot=(Ve=Me.result)==null?void 0:Ve.verdict)==null?void 0:ot.status)==null?void 0:xt.replace(/_/g," "))||"Pending"}),e.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>Ee(oe,_e),disabled:b||!m.trim(),className:`ml-auto h-6 text-xs ${a?"border-gray-600 text-gray-300 hover:bg-gray-600":""}`,children:[e.jsx(ta,{className:"h-3 w-3 mr-1"}),"Run"]})]}),e.jsxs("div",{className:`space-y-2 text-sm ${a?"text-gray-300":""}`,children:[e.jsxs("div",{children:[e.jsx("span",{className:`font-medium ${a?"text-gray-200":"text-gray-700"}`,children:"Input:"}),e.jsx("div",{className:`mt-1 p-2 rounded border font-mono text-xs ${a?"bg-gray-800 border-gray-600 text-gray-200":"bg-white"}`,children:oe.input||oe.input_data||"No input"})]}),e.jsxs("div",{children:[e.jsx("span",{className:`font-medium ${a?"text-gray-200":"text-gray-700"}`,children:"Expected Output:"}),e.jsx("div",{className:`mt-1 p-2 rounded border font-mono text-xs ${a?"bg-gray-800 border-gray-600 text-gray-200":"bg-white"}`,children:oe.expected_output||oe.expectedOutput||oe.output||"No expected output"})]}),Me&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("span",{className:`font-medium ${a?"text-gray-200":"text-gray-700"}`,children:"Your Output:"}),e.jsx("div",{className:`mt-1 p-2 rounded border font-mono text-xs ${((at=(ft=Me.result)==null?void 0:ft.verdict)==null?void 0:at.status)==="accepted"?a?"bg-green-900 border-green-700 text-green-200":"bg-green-50 border-green-200 text-green-800":a?"bg-red-900 border-red-700 text-red-200":"bg-red-50 border-red-200 text-red-800"}`,children:((Be=Me.result)==null?void 0:Be.output)||((Ue=Me.result)==null?void 0:Ue.error)||"No output"})]}),((re=Me.result)==null?void 0:re.executionTime)&&e.jsxs("div",{className:`text-xs ${a?"text-gray-400":"text-gray-600"}`,children:["Time: ",Me.result.executionTime,"ms | Memory: ",Me.result.memoryUsage||0,"KB"]})]})]})]},_e)})}),v.length>0&&e.jsx("div",{className:`mt-4 pt-4 border-t ${a?"border-gray-700":""}`,children:e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:`font-semibold ${a?"text-green-400":"text-green-600"}`,children:[" ",ie()," passed"]}),e.jsxs("span",{className:`font-semibold ${a?"text-red-400":"text-red-600"}`,children:[" ",v.length-ie()," failed"]}),e.jsxs("span",{className:a?"text-gray-400":"text-gray-600",children:["Total: ",v.length]})]}),ie()===v.length&&v.length>0&&e.jsxs(et,{className:"bg-green-600 text-xs",children:[e.jsx(Yt,{className:"h-3 w-3 mr-1"}),"All tests passed!"]})]})})]})]}),e.jsxs(Re,{className:`mt-6 ${a?"bg-gray-800 border-gray-700":""}`,children:[e.jsx(lt,{className:`cursor-pointer ${a?"bg-gray-700 hover:bg-gray-600":"hover:bg-gray-50"}`,onClick:()=>$(!G),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(mt,{className:`text-sm ${a?"text-gray-100":""}`,children:"Custom Test Case"}),G?e.jsx(my,{className:`h-4 w-4 ${a?"text-gray-300":"text-gray-600"}`}):e.jsx(lc,{className:`h-4 w-4 ${a?"text-gray-300":"text-gray-600"}`})]})}),G&&e.jsxs(De,{className:"space-y-3 pt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-xs font-medium mb-1 block ${a?"text-gray-300":"text-gray-700"}`,children:"Input"}),e.jsx(ms,{value:N,onChange:oe=>E(oe.target.value),placeholder:"Enter test input...",className:`font-mono text-xs ${a?"bg-gray-700 border-gray-600 text-gray-100":""}`,rows:3})]}),e.jsxs(ee,{onClick:ve,disabled:T||!m.trim()||!N.trim(),className:"bg-blue-600 hover:bg-blue-700 text-white h-8 text-xs w-full",size:"sm",children:[T?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white mr-2"}):e.jsx(ta,{className:"h-3 w-3 mr-2"}),"Run Custom Test"]}),V&&e.jsxs("div",{className:`mt-4 pt-4 border-t ${a?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[V.status==="accepted"?e.jsx(Yt,{className:`h-4 w-4 ${a?"text-green-400":"text-green-600"}`}):e.jsx(Mr,{className:`h-4 w-4 ${a?"text-red-400":"text-red-600"}`}),e.jsx(et,{variant:V.status==="accepted"?"default":"destructive",className:"text-xs",children:V.status==="accepted"?"Passed":V.status==="wrong_answer"?"Wrong Answer":V.status==="time_limit_exceeded"?"Time Limit Exceeded":V.status==="runtime_error"?"Runtime Error":V.status==="compilation_error"?"Compilation Error":V.status==="error"?"Error":"Failed"}),V.executionTime>0&&e.jsxs("span",{className:`text-xs ml-auto ${a?"text-gray-400":"text-gray-600"}`,children:[V.executionTime,"ms | ",V.memoryUsage||0,"KB"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:`text-xs font-medium ${a?"text-gray-300":"text-gray-700"}`,children:"Your Output:"}),e.jsx("div",{className:`mt-1 p-2 rounded border font-mono text-xs ${V.status==="accepted"?a?"bg-green-900 border-green-700 text-green-200":"bg-green-50 border-green-200 text-green-800":a?"bg-red-900 border-red-700 text-red-200":"bg-red-50 border-red-200 text-red-800"}`,children:V.output||"No output"})]}),V.expectedOutput&&e.jsxs("div",{children:[e.jsx("span",{className:`text-xs font-medium ${a?"text-gray-300":"text-gray-700"}`,children:"Expected Output:"}),e.jsx("div",{className:`mt-1 p-2 rounded border font-mono text-xs ${a?"bg-gray-800 border-gray-600 text-gray-200":"bg-white"}`,children:V.expectedOutput})]}),V.error&&e.jsxs("div",{children:[e.jsx("span",{className:`text-xs font-medium ${a?"text-red-300":"text-red-700"}`,children:"Error:"}),e.jsx("div",{className:`mt-1 p-2 rounded border font-mono text-xs ${a?"bg-red-900 border-red-700 text-red-200":"bg-red-50 border-red-200 text-red-800"}`,children:V.error})]})]})]})]})]})]})}),e.jsx("div",{className:`w-1 cursor-col-resize flex items-center justify-center transition-colors ${a?"bg-gray-700 hover:bg-blue-600":"bg-gray-200 hover:bg-blue-500"}`,onMouseDown:Ae,children:e.jsx(H7,{className:`h-4 w-4 ${a?"text-gray-500":"text-gray-400"}`})}),e.jsx("div",{className:`flex flex-col overflow-hidden ${a?"bg-gray-900":"bg-gray-50"}`,style:{width:`${100-k}%`},children:e.jsxs(Re,{className:`h-full flex flex-col border-0 ${a?"bg-gray-800":"bg-white"}`,children:[e.jsx(lt,{className:`flex-shrink-0 border-b ${a?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(mt,{className:`text-sm flex items-center gap-2 ${a?"text-gray-100":""}`,children:[e.jsx(y9,{className:`h-4 w-4 ${a?"text-gray-300":""}`}),"Code Editor"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[f.length>0&&e.jsxs(At,{value:x,onValueChange:Ie,children:[e.jsx(St,{className:"w-[180px] h-8 text-xs",children:e.jsx(Rt,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:(($e=f.find(oe=>oe.value===x))==null?void 0:$e.icon)||""}),e.jsx("span",{children:((ue=f.find(oe=>oe.value===x))==null?void 0:ue.label)||x})]})})}),e.jsx(Ct,{children:f.map(oe=>e.jsx(Te,{value:oe.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:oe.icon}),e.jsx("span",{children:oe.label})]})},oe.value))})]}),e.jsxs(ee,{variant:"ghost",size:"sm",onClick:we,className:"h-7 text-xs",title:"Fullscreen",children:[e.jsx(e9,{className:"h-3 w-3 mr-1"}),"Fullscreen"]}),e.jsxs(ee,{variant:"ghost",size:"sm",onClick:pe,className:"h-7 text-xs",children:[e.jsx(Lo,{className:"h-3 w-3 mr-1"}),"Reset"]})]})]})}),e.jsxs(De,{className:"flex-1 flex flex-col p-0 overflow-hidden min-h-0",style:{height:"100%"},children:[e.jsxs("div",{className:`px-4 py-2 border-b flex items-center justify-between flex-shrink-0 ${a?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"}`,children:[e.jsx("span",{className:`text-sm font-medium ${a?"text-gray-200":"text-gray-700"}`,children:"Your Solution"}),e.jsxs("div",{className:`text-xs flex items-center gap-1 ${a?"text-green-400":"text-green-600"}`,children:[e.jsx(Yt,{className:"h-3 w-3"}),"Auto-saved"]})]}),e.jsx("div",{ref:O,className:"flex-1 overflow-hidden",style:{minHeight:"400px",height:"100%",position:"relative"},children:e.jsx(If,{value:m||"",onChange:ne,language:u(x),theme:a?"vs-dark":"vs-light",height:"100%",width:"100%",options:{minimap:{enabled:!1},fontSize:14,lineNumbers:"on",wordWrap:"on",automaticLayout:!0,scrollBeyondLastLine:!1,tabSize:x==="python"?4:2,insertSpaces:!0,detectIndentation:!0,renderWhitespace:"selection",bracketPairColorization:{enabled:!0},readOnly:!1}})})]})]})})]})})]})},UC=A.forwardRef(({duration:t,onTimeUp:r,className:s="",submissionId:n=null},c)=>{const[o,a]=A.useState(t||0),[d,l]=A.useState("synced"),[i,u]=A.useState(!1),f=A.useRef(null),h=A.useRef(null),m=A.useRef(r);A.useEffect(()=>{m.current=r},[r]),A.useImperativeHandle(c,()=>({getTimeRemaining:()=>o,reset:b=>{b&&b>0&&(a(b),u(!0))}}));const p=async()=>{if(!n)return null;try{l("syncing");const b=localStorage.getItem("token")||localStorage.getItem("lmsToken"),C={}.VITE_API_URL||"http://localhost:5000/api",T=await fetch(`${C}/student-assessments/${n}/time-remaining`,{headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"}});if(T.ok){const M=await T.json();if(M.success&&M.data&&M.data.remainingSeconds!==void 0)return l("synced"),M.data.remainingSeconds}return l("error"),null}catch(b){return console.error("Error fetching server time:",b),l("error"),null}};A.useEffect(()=>{if(!n||i)return;(async()=>{const C=await p();C!==null&&C>=0?(a(C),u(!0)):t&&t>0&&(a(t),u(!0))})()},[n,t,i]),A.useEffect(()=>{if(!n||!i)return;const b=async()=>{const C=await p();C!==null&&C>=0&&a(C)};return h.current=setInterval(b,3e4),()=>{h.current&&clearInterval(h.current)}},[n,i]),A.useEffect(()=>{if(!i||o<=0){f.current&&(clearInterval(f.current),f.current=null);return}return f.current=setInterval(()=>{a(b=>{const C=b-1;return C===300&&b>300?ut.warning("5 minutes remaining!",{duration:5e3}):C===60&&b>60?ut.error("1 minute remaining!",{duration:5e3}):C===30&&b>30&&ut.error("30 seconds remaining!",{duration:5e3}),C<=0?(m.current&&m.current(),ut.error("Time is up! Assessment will be submitted automatically.",{duration:1e4}),0):C})},1e3),()=>{f.current&&(clearInterval(f.current),f.current=null)}},[i,o]);const x=b=>{if(b<0)return"0:00";const C=Math.floor(b/3600),T=Math.floor(b%3600/60),M=b%60;return C>0?`${C}:${T.toString().padStart(2,"0")}:${M.toString().padStart(2,"0")}`:`${T}:${M.toString().padStart(2,"0")}`},g=()=>o<=60?"text-red-600":o<=300?"text-orange-600":o<=600?"text-yellow-600":"text-gray-700",v=()=>o<=60?"bg-red-50 border-red-200":o<=300?"bg-orange-50 border-orange-200":o<=600?"bg-yellow-50 border-yellow-200":"bg-gray-50 border-gray-200",y=()=>!t||t===0?0:Math.max(0,Math.min(100,(t-o)/t*100));return i?e.jsxs("div",{className:`flex items-center space-x-2 ${s}`,children:[e.jsx(Re,{className:`${v()} border`,children:e.jsx(De,{className:"p-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ps,{className:`h-4 w-4 ${g()}`,role:"timer","aria-live":"polite","aria-label":`Time remaining: ${x(o)}`}),e.jsx("span",{className:`font-mono text-sm font-medium ${g()}`,role:"timer","aria-live":"polite",children:x(o)}),n&&e.jsxs("div",{className:"flex items-center ml-1",title:d==="synced"?"Timer synced with server":d==="syncing"?"Syncing...":"Sync error","aria-label":`Sync status: ${d}`,children:[d==="synced"&&e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),d==="syncing"&&e.jsx("div",{className:"w-1.5 h-1.5 bg-yellow-500 rounded-full animate-pulse"}),d==="error"&&e.jsx("div",{className:"w-1.5 h-1.5 bg-red-500 rounded-full"})]})]})})}),e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-1",role:"progressbar","aria-valuenow":y(),"aria-valuemin":"0","aria-valuemax":"100",children:e.jsx("div",{className:`h-1 rounded-full transition-all duration-1000 ${o<=60?"bg-red-500":o<=300?"bg-orange-500":o<=600?"bg-yellow-500":"bg-blue-500"}`,style:{width:`${y()}%`}})}),o<=60&&o>0&&e.jsxs(pr,{variant:"destructive",className:"ml-2",children:[e.jsx(Ms,{className:"h-4 w-4"}),e.jsx(gr,{className:"text-xs",children:"Time almost up!"})]}),e.jsxs("div",{className:"sr-only",role:"status","aria-live":"assertive","aria-atomic":"true",children:[o<=60&&o>30&&"1 minute remaining",o<=30&&o>0&&`${o} seconds remaining`,o===0&&"Time is up"]})]}):e.jsx("div",{className:`flex items-center space-x-2 ${s}`,children:e.jsx(Re,{className:"bg-gray-50 border border-gray-200",children:e.jsx(De,{className:"p-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ps,{className:"h-4 w-4 text-gray-400 animate-pulse"}),e.jsx("span",{className:"font-mono text-sm font-medium text-gray-400",children:"Loading..."})]})})})})});UC.displayName="TimerComponent";const v2=({assessment:t,submission:r,questions:s,sections:n,answers:c,setAnswers:o,currentQuestionIndex:a,setCurrentQuestionIndex:d,currentSectionIndex:l,setCurrentSectionIndex:i,timeSpent:u,flaggedQuestions:f,flagQuestion:h,saveAnswer:m,saving:p,onComplete:x,onBack:g,onCancel:v,onTimeUp:y,proctoringEnabled:b,proctoringViolations:C,onShowSidebar:T,setShowSidebar:M,onSectionComplete:U,theme:L="light",isDarkMode:P=!1})=>{var ie;A.useState(!1);const[B,q]=A.useState(!1),[z,k]=A.useState(!1),R=T!==void 0?T:B,S=M||q,[w,_]=A.useState(!1),[j,N]=A.useState("saved"),[E,I]=A.useState("live"),[D,V]=A.useState(0),H=A.useRef(null),G=A.useRef(Date.now()),$=A.useRef(null),Y=(t==null?void 0:t.sequential_sections)||!1,F=(t==null?void 0:t.require_section_completion)||!1,O=A.useMemo(()=>{if(!n||n.length===0)return null;if(s&&s.length>0&&a>=0&&a<s.length){const ae=s[a];if(ae.section_id){const we=n.find(ve=>ve.id===ae.section_id);if(we)return we}}return l>=0&&l<n.length?n[l]:n[0]||null},[n,l,s,a]),W=A.useMemo(()=>!n||n.length===0?s:O?s.filter(ae=>ae.section_id===O.id):s,[s,n,O]),K=A.useMemo(()=>{if(s&&s.length>0&&a>=0&&a<s.length){const ae=s[a];if(n.length===0||!O||ae.section_id===O.id)return ae;if(W.length>0)return W[0]}return W.length>0?W[0]:null},[s,a,n.length,O,W]),Q=A.useMemo(()=>!K||!O||W.length===0?0:W.findIndex(ae=>ae.id===K.id),[K,O,W]),X=A.useCallback((ae,we)=>{typeof o=="function"&&(o.length===2?o(ae,we):o(ve=>({...ve,[ae]:we}))),N("saving")},[o]),te=A.useCallback(async(ae,we)=>{m&&await m(ae,we)},[m]),de=A.useCallback(()=>{K&&h&&h(K.id)},[K,h]);A.useEffect(()=>{V(C.length),C.length>0?I("flagged"):b&&I("live")},[C,b]),A.useEffect(()=>{if(K&&n&&n.length>0&&K.section_id){const ae=n.findIndex(we=>we.id===K.section_id);ae>=0&&ae!==l&&i(ae)}},[K,n,l,i]),A.useEffect(()=>(G.current=Date.now(),()=>{K&&Date.now()-G.current}),[a,K]),A.useEffect(()=>{N(p?"saving":"saved")},[p]),A.useEffect(()=>{const ae=we=>{we.key==="Escape"&&R&&S(!1)};return document.addEventListener("keydown",ae),()=>document.removeEventListener("keydown",ae)},[R]),A.useEffect(()=>{if(R&&$.current){const ae=$.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');ae.length>0&&ae[0].focus()}},[R]);const xe=A.useCallback(ae=>{if(!ae)return!1;const we=s.filter(He=>He.section_id===ae.id);if(we.length===0)return!0;const ve=we.filter(He=>{const $e=c[He.id];return $e?He.question_type==="coding"?$e&&(typeof $e=="object"&&$e.allTestsPassed===!0||typeof $e=="object"&&$e.code&&$e.code.trim()!==""&&Array.isArray($e.testResults)&&$e.testResults.length>0&&$e.testResults.every(ue=>{var oe,_e;return ue&&((_e=(oe=ue.result)==null?void 0:oe.verdict)==null?void 0:_e.status)==="accepted"})):typeof $e=="string"&&$e.trim()!==""||Array.isArray($e)&&$e.length>0||typeof $e=="object"&&$e.value&&$e.value!=="":!1}).length;return ae.completion_requirement==="all"?ve===we.length:ae.completion_requirement==="minimum"&&ae.minimum_questions?ve>=ae.minimum_questions:ae.completion_requirement==="percentage"&&ae.completion_percentage?ve/we.length*100>=ae.completion_percentage:ve===we.length},[s,c]),ne=A.useCallback(ae=>{if(!n||n.length===0)return!0;if(ae<0||ae>=n.length)return!1;if(ae===l)return!0;if(Y){if(ae<l){const we=n[ae];return(we==null?void 0:we.allow_return_to_section)!==!1}if(ae>l){for(let we=l;we<ae;we++)if(!xe(n[we]))return!1;return!0}}return!0},[n,l,Y,xe]),ge=A.useCallback((ae,we=null)=>{const ve=we!==null?n[we]:O;if(!ve&&n.length>0){if(ae>=0&&ae<s.length){const $e=s[ae];if(d(ae),$e.section_id){const ue=n.findIndex(oe=>oe.id===$e.section_id);ue>=0&&i(ue)}S(!1)}return}const He=ve?s.filter($e=>$e.section_id===ve.id):W;if(ae>=0&&ae<He.length){const $e=He[ae],ue=s.findIndex(oe=>oe.id===$e.id);if(ue>=0){const oe=n.find(_e=>_e.id===$e.section_id);if(oe&&oe.navigation_type==="sequential"&&ae<Q){ut.error("Sequential navigation: You cannot go back in this section");return}d(ue),we!==null&&we!==l&&i(we),S(!1)}}},[s,n,O,W,Q,l,d,i,S]),be=A.useCallback(async ae=>{if(!ne(ae)){Y&&ae>l?ut.error("Please complete the current section before proceeding"):ut.error("Cannot navigate to this section");return}if(m&&r)try{const we=n[l];if(we){const ve=s.filter(He=>He.section_id===we.id);for(const He of ve){const $e=c[He.id];$e!=null&&await m(He.id,$e,!1)}await new Promise(He=>setTimeout(He,150))}}catch(we){console.error("Error saving before section navigation:",we),ut.warning("Some answers may not be saved. Please try again.")}if(ae>=0&&ae<n.length){i(ae);const we=n[ae],ve=s.filter(He=>He.section_id===we.id);if(ve.length>0){const He=s.findIndex($e=>$e.id===ve[0].id);He>=0&&d(He)}S(!1)}},[n,s,ne,Y,l,d,i,S,m,r,c]),Ie=A.useCallback(()=>{Q>0&&ge(Q-1)},[Q,ge]),Ce=A.useCallback(async()=>{if(Q<W.length-1)ge(Q+1);else{if(F&&!xe(O)){ut.error("Please complete all required questions in this section before proceeding");return}if(m&&r)try{const ae=s.filter(we=>we.section_id===(O==null?void 0:O.id));for(const we of ae){const ve=c[we.id];ve!=null&&await m(we.id,ve,!1)}await new Promise(we=>setTimeout(we,150))}catch(ae){console.error("Error saving before section completion:",ae),ut.warning("Some answers may not be saved. Please try again.")}U?U():l<n.length-1&&ne(l+1)&&await be(l+1)}},[Q,W.length,l,n.length,F,xe,O,ne,ge,be,U,m,r,c,s]),Oe=()=>Object.keys(c).filter(ae=>c[ae]!==null&&c[ae]!==""&&c[ae]!==void 0).length,Ee=()=>f.size,pe=(ae,we)=>{const ve=!!c[ae.id]&&c[ae.id]!=="",He=f.has(ae.id);return we===a?{icon:e.jsx(jp,{className:"h-4 w-4 text-blue-600"}),status:"current"}:He&&ve?{icon:e.jsx(jp,{className:"h-4 w-4 text-yellow-600"}),status:"marked"}:He?{icon:e.jsx(jp,{className:"h-4 w-4 text-orange-600"}),status:"marked"}:ve?{icon:e.jsx(hu,{className:"h-4 w-4 text-green-600"}),status:"answered"}:{icon:e.jsx(py,{className:"h-4 w-4 text-gray-400"}),status:"unanswered"}},Ae=A.useMemo(()=>K?f.has(K.id):!1,[K,f]),st=A.useMemo(()=>K?c[K.id]:null,[K,c]),qe=A.useMemo(()=>K?K.question_type==="coding"?e.jsx(dq,{question:K,answer:st,onAnswerChange:ae=>{X(K.id,ae),te(K.id,ae)},onSave:ae=>te(K.id,ae),submissionId:r==null?void 0:r.submissionId,theme:L,isDarkMode:P}):e.jsx(zC,{question:K,answer:st,onAnswerChange:ae=>{X(K.id,ae),te(K.id,ae)},onSave:ae=>te(K.id,ae),theme:L,isDarkMode:P}):null,[K,st,X,te,r,L,P]);return!s||s.length===0?e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ms,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:`text-lg font-medium mb-2 ${P?"text-gray-100":"text-gray-900"}`,children:"No Questions Available"}),e.jsx("p",{className:P?"text-gray-400":"text-gray-600",children:"Questions are being loaded..."})]})}):e.jsxs("div",{className:`h-screen flex flex-col overflow-hidden ${P?"dark bg-gray-900":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex-1 flex overflow-hidden min-h-0",children:[e.jsxs(os.aside,{initial:!1,animate:{width:R&&!z?"320px":"60px"},className:`border-r flex flex-col transition-all duration-300 flex-shrink-0 ${P?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx("div",{className:`p-2 border-b flex-shrink-0 ${P?"border-gray-700":"border-gray-200"}`,children:e.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>{z||!R?(k(!1),S(!0)):(k(!0),S(!1))},className:"w-full justify-center",title:R&&!z?"Collapse Sidebar":"Expand Sidebar",children:e.jsx(eN,{className:"h-5 w-5"})})}),R&&!z&&e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:`p-3 border-b flex-shrink-0 ${P?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h2",{className:`font-medium text-sm ${P?"text-gray-100":"text-gray-900"}`,children:O?O.name||`Section ${l+1}`:"Questions"}),e.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>{k(!0),S(!1)},className:`h-6 w-6 p-0 ${P?"text-gray-300 hover:bg-gray-700":""}`,children:e.jsx(Dn,{className:"h-4 w-4"})})]}),n&&n.length>0&&e.jsxs("p",{className:`text-xs ${P?"text-gray-400":"text-gray-500"}`,children:[W.filter(ae=>{const we=c[ae.id];return we&&(typeof we=="string"&&we.trim()!==""||Array.isArray(we)&&we.length>0||typeof we=="object"&&we.value)}).length,"/",W.length," answered"]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:n&&n.length>0&&O?e.jsx("div",{className:"space-y-1",children:W.map((ae,we)=>{const ve=s.findIndex(_e=>_e.id===ae.id),He=pe(ae,ve),$e=ve===a,ue=ae.question_type==="coding"||ae.type==="coding",oe=ae.title||ae.question_text||ae.content;return e.jsxs("button",{onClick:()=>ge(we,l),className:`w-full flex items-center gap-2 p-2.5 rounded text-sm font-medium transition-all ${$e?"bg-blue-600 text-white shadow-sm":P?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,title:ue&&oe?oe:void 0,children:[e.jsx("span",{className:"text-xs flex-shrink-0",children:we+1}),ue&&oe?e.jsx("span",{className:"flex-1 text-left truncate text-xs",children:oe}):e.jsx("span",{className:"text-xs flex-shrink-0",children:He.icon}),ue&&oe&&e.jsx("span",{className:"text-xs flex-shrink-0",children:He.icon})]},ae.id)})}):e.jsx("div",{className:"space-y-1",children:s.map((ae,we)=>{const ve=pe(ae,we),He=we===a,$e=ae.question_type==="coding"||ae.type==="coding",ue=ae.title||ae.question_text||ae.content;return e.jsxs("button",{onClick:()=>ge(we),className:`w-full flex items-center gap-2 p-2.5 rounded text-sm font-medium transition-all ${He?"bg-blue-600 text-white shadow-sm":P?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,title:$e&&ue?ue:void 0,children:[e.jsx("span",{className:"text-xs flex-shrink-0",children:we+1}),$e&&ue?e.jsx("span",{className:"flex-1 text-left truncate text-xs",children:ue}):e.jsx("span",{className:"text-xs flex-shrink-0",children:ve.icon}),$e&&ue&&e.jsx("span",{className:"text-xs flex-shrink-0",children:ve.icon})]},ae.id||we)})})})]})]}),e.jsxs("div",{className:`flex-1 overflow-hidden min-h-0 flex flex-col ${P?"bg-gray-900":"bg-white"}`,children:[e.jsxs("div",{className:`flex items-center justify-between px-6 py-3 border-b flex-shrink-0 ${P?"border-gray-700 bg-gray-800":"border-gray-200 bg-white"}`,children:[e.jsxs(ee,{variant:"outline",onClick:Ie,disabled:Q===0,size:"sm",className:P?"border-gray-600 text-gray-300 hover:bg-gray-700 disabled:opacity-50":"",children:[e.jsx(oa,{className:"h-4 w-4 mr-2"}),"Previous"]}),K&&e.jsxs(ee,{variant:"outline",onClick:de,size:"sm",className:Ae?P?"bg-yellow-900 border-yellow-700 text-yellow-200 hover:bg-yellow-800":"bg-yellow-50 border-yellow-300 text-yellow-700 hover:bg-yellow-100":P?"border-gray-600 text-gray-300 hover:bg-gray-700":"",children:[e.jsx(Q_,{className:`h-4 w-4 mr-2 ${Ae?P?"fill-yellow-400 text-yellow-400":"fill-yellow-600 text-yellow-600":""}`}),Ae?"Marked for Review":"Mark for Review"]}),Q===W.length-1?e.jsxs(ee,{onClick:Ce,className:"bg-blue-600 hover:bg-blue-700 text-white",size:"sm",children:["Complete Section",e.jsx(li,{className:"h-4 w-4 ml-2"})]}):e.jsxs(ee,{variant:"outline",onClick:Ce,size:"sm",className:P?"border-gray-600 text-gray-300 hover:bg-gray-700":"",children:["Next",e.jsx(li,{className:"h-4 w-4 ml-2"})]})]}),e.jsx("div",{className:"flex-1 overflow-hidden min-h-0",children:K?e.jsx(dv,{mode:"wait",children:e.jsx(os.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2,ease:"easeOut"},className:"h-full",children:qe},a)}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ms,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading question..."})]})})]})]}),w&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs(Re,{className:"w-full max-w-md mx-4",children:[e.jsx(lt,{children:e.jsx(mt,{children:"Submit Assessment"})}),e.jsx(De,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-600",children:"Are you sure you want to submit your assessment? This action cannot be undone."}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Questions Answered:"}),e.jsxs("span",{className:"font-medium",children:[Oe(),"/",s.length]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Questions Flagged:"}),e.jsx("span",{className:"font-medium",children:Ee()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Time Remaining:"}),e.jsx("span",{className:"font-medium",children:(ie=H.current)!=null&&ie.getTimeRemaining()?`${Math.floor(H.current.getTimeRemaining()/60)}:${String(H.current.getTimeRemaining()%60).padStart(2,"0")}`:"N/A"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(ee,{variant:"outline",onClick:()=>_(!1),className:"flex-1",children:"Cancel"}),e.jsx(ee,{onClick:()=>{_(!1),x()},className:"flex-1 bg-green-600 hover:bg-green-700",children:"Submit Assessment"})]})]})})]})})]})},uq=({assessment:t,submission:r,questions:s,answers:n,flaggedQuestions:c,proctoringViolations:o,onComplete:a,onBack:d,onCancel:l,onSubmit:i,timerRef:u,theme:f="light",isDarkMode:h=!1})=>{const[m,p]=A.useState(!1),[x,g]=A.useState(!1);A.useState(!1);const[v,y]=A.useState(0),[b,C]=A.useState(0),T=Object.keys(n).length,M=c.size,U=Array.isArray(o)?o.length:0,L=s.length>0?T/s.length*100:0;A.useEffect(()=>{var z;if(r!=null&&r.started_at)try{const k=new Date(r.started_at);if(!isNaN(k.getTime())){const R=Date.now()-k.getTime(),S=Math.floor(R/1e3);C(S)}}catch(k){console.error("Error calculating time taken:",k),C(0)}if((z=u==null?void 0:u.current)!=null&&z.getTimeRemaining){const k=u.current.getTimeRemaining();if(k&&!isNaN(k)&&k>0){y(k);const R=setInterval(()=>{var w;const S=(w=u.current)==null?void 0:w.getTimeRemaining();if(S&&!isNaN(S)&&S>=0&&y(S),r!=null&&r.started_at)try{const _=new Date(r.started_at);if(!isNaN(_.getTime())){const j=Date.now()-_.getTime(),N=Math.floor(j/1e3);C(N)}}catch{}},1e3);return()=>clearInterval(R)}}if(r!=null&&r.started_at&&(t!=null&&t.time_limit_minutes))try{const k=new Date(r.started_at);if(!isNaN(k.getTime())){const R=t.time_limit_minutes*60*1e3,S=Date.now()-k.getTime(),w=Math.max(0,R-S);y(Math.floor(w/1e3))}}catch(k){console.error("Error calculating time remaining:",k),y(0)}},[r,t,u]);const P=z=>{if(!z||isNaN(z)||z<0)return"0:00";const k=Math.floor(z/60),R=Math.floor(z%60);return`${k}:${R.toString().padStart(2,"0")}`},B=async()=>{if(!x){ut.error("Please confirm that you want to submit your assessment");return}p(!0);try{await i(),a()}catch(z){console.error("Error submitting assessment:",z),ut.error("Failed to submit assessment")}finally{p(!1)}},q=()=>s.filter(z=>!n[z.id]);return e.jsx("div",{className:`min-h-screen py-8 px-4 ${h?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[e.jsx(Re,{className:h?"bg-gray-800 border-gray-700":"",children:e.jsxs(lt,{className:h?"bg-gray-700":"",children:[e.jsxs(mt,{className:`text-2xl flex items-center ${h?"text-gray-100":""}`,children:[e.jsx(hf,{className:`h-6 w-6 mr-2 ${h?"text-gray-300":""}`}),"Submit Assessment"]}),e.jsx("p",{className:h?"text-gray-300":"text-gray-600",children:"Review your answers and confirm submission. This action cannot be undone."})]})}),e.jsxs(Re,{className:h?"bg-gray-800 border-gray-700":"",children:[e.jsx(lt,{className:h?"bg-gray-700":"",children:e.jsx(mt,{className:`text-lg ${h?"text-gray-100":""}`,children:"Assessment Summary"})}),e.jsxs(De,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:`text-center p-4 rounded-lg ${h?"bg-blue-900":"bg-blue-50"}`,children:[e.jsx("div",{className:`text-2xl font-bold ${h?"text-blue-300":"text-blue-600"}`,children:T}),e.jsx("div",{className:`text-sm ${h?"text-blue-200":"text-blue-700"}`,children:"Answered"})]}),e.jsxs("div",{className:`text-center p-4 rounded-lg ${h?"bg-yellow-900":"bg-yellow-50"}`,children:[e.jsx("div",{className:`text-2xl font-bold ${h?"text-yellow-300":"text-yellow-600"}`,children:M}),e.jsx("div",{className:`text-sm ${h?"text-yellow-200":"text-yellow-700"}`,children:"Flagged"})]}),e.jsxs("div",{className:`text-center p-4 rounded-lg ${h?"bg-red-900":"bg-red-50"}`,children:[e.jsx("div",{className:`text-2xl font-bold ${h?"text-red-300":"text-red-600"}`,children:s.length-T}),e.jsx("div",{className:`text-sm ${h?"text-red-200":"text-red-700"}`,children:"Unanswered"})]}),e.jsxs("div",{className:`text-center p-4 rounded-lg ${h?"bg-green-900":"bg-green-50"}`,children:[e.jsxs("div",{className:`text-2xl font-bold ${h?"text-green-300":"text-green-600"}`,children:[Math.round(L),"%"]}),e.jsx("div",{className:`text-sm ${h?"text-green-200":"text-green-700"}`,children:"Complete"})]})]}),e.jsxs("div",{className:`grid grid-cols-3 gap-4 ${h?"bg-gray-700":"bg-gray-50"} p-4 rounded-lg`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(v9,{className:`h-5 w-5 ${h?"text-gray-300":"text-gray-600"}`}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${h?"text-gray-200":"text-gray-800"}`,children:"Time Remaining"}),e.jsx("p",{className:`text-sm ${h?"text-gray-300":"text-gray-600"}`,children:P(v)})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ps,{className:`h-5 w-5 ${h?"text-gray-300":"text-gray-600"}`}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${h?"text-gray-200":"text-gray-800"}`,children:"Total Time Taken"}),e.jsx("p",{className:`text-sm ${h?"text-gray-300":"text-gray-600"}`,children:P(b)})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ra,{className:`h-5 w-5 ${h?"text-gray-300":"text-gray-600"}`}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${h?"text-gray-200":"text-gray-800"}`,children:"Total Points"}),e.jsxs("p",{className:`text-sm ${h?"text-gray-300":"text-gray-600"}`,children:[t.total_points," points"]})]})]})]})]})]}),U>0&&e.jsxs(pr,{variant:"destructive",className:h?"bg-red-900 border-red-700":"",children:[e.jsx(Ms,{className:`h-4 w-4 ${h?"text-red-300":""}`}),e.jsxs(gr,{className:h?"text-red-200":"",children:[e.jsx("strong",{children:"Warning:"})," ",U," proctoring violation",U>1?"s":""," detected during your assessment."]})]}),q().length>0&&e.jsxs(pr,{className:h?"bg-orange-900 border-orange-700":"",children:[e.jsx(Ms,{className:`h-4 w-4 ${h?"text-orange-300":""}`}),e.jsxs(gr,{className:h?"text-orange-200":"",children:[e.jsx("strong",{children:"Warning:"})," You have ",q().length," unanswered question",q().length>1?"s":"",". These will receive zero points."]})]}),e.jsxs(Re,{className:h?"bg-gray-800 border-gray-700":"",children:[e.jsx(lt,{className:h?"bg-gray-700":"",children:e.jsx(mt,{className:`text-lg ${h?"text-gray-100":""}`,children:"Final Confirmation"})}),e.jsxs(De,{className:"space-y-4",children:[e.jsxs(pr,{className:h?"bg-orange-900 border-orange-700":"",children:[e.jsx(Ms,{className:`h-4 w-4 ${h?"text-orange-300":""}`}),e.jsxs(gr,{className:h?"text-orange-200":"",children:[e.jsx("strong",{children:"Important:"})," Once you submit your assessment, you cannot make any changes. Make sure you have reviewed all your answers carefully."]})]}),e.jsxs("div",{className:`space-y-3 ${h?"bg-gray-700":"bg-gray-50"} p-4 rounded-lg`,children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Vt,{id:"confirm-submission",checked:x,onCheckedChange:g}),e.jsx("label",{htmlFor:"confirm-submission",className:`text-sm cursor-pointer ${h?"text-gray-200":"text-gray-700"}`,children:"I confirm that I have reviewed my answers and want to submit this assessment. I understand that this action cannot be undone."})]}),U>0&&e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Vt,{id:"acknowledge-violations",checked:!0,disabled:!0}),e.jsxs("label",{htmlFor:"acknowledge-violations",className:`text-sm ${h?"text-gray-300":"text-gray-700"}`,children:["I acknowledge that ",U," proctoring violation",U>1?"s were":" was"," detected during my assessment."]})]})]})]})]}),e.jsxs("div",{className:"flex justify-between gap-3",children:[e.jsxs(ee,{variant:"outline",onClick:d,className:h?"border-gray-600 text-gray-300 hover:bg-gray-700":"",children:[e.jsx(oa,{className:"h-4 w-4 mr-2"}),"Back to Questions"]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(ee,{variant:"outline",onClick:l,className:h?"border-gray-600 text-gray-300 hover:bg-gray-700":"",children:"Cancel"}),e.jsxs(ee,{onClick:B,disabled:!x||m,className:"bg-green-600 hover:bg-green-700 text-white relative",children:[m?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):e.jsx(hf,{className:"h-4 w-4 mr-2"}),m?"Submitting...":"Submit Assessment",U>0&&e.jsx(et,{variant:"destructive",className:"ml-2 bg-red-600 hover:bg-red-700",title:`${U} proctoring violation${U>1?"s":""} detected`,children:U}),e.jsx(li,{className:"h-4 w-4 ml-2"})]})]})]})]})})},hq=({assessment:t,submission:r,questions:s,answers:n,flaggedQuestions:c,proctoringViolations:o,onComplete:a,onBack:d,onCancel:l})=>{const i=Br(),[u,f]=A.useState(null),[h,m]=A.useState(!0),[p,x]=A.useState(!1),[g,v]=A.useState("overview");A.useEffect(()=>{y()},[r]);const y=async()=>{try{if(m(!0),r!=null&&r.id&&(t!=null&&t.id)){const w=await Pe.getAssessmentResults(t.id,r.student_id||r.user_id);if(w.success&&w.data){const _=w.data;let j=0;if(_.started_at&&_.submitted_at){const I=new Date(_.started_at),D=new Date(_.submitted_at);j=Math.floor((D-I)/1e3)}else if(_.started_at){const I=new Date(_.started_at);j=Math.floor((Date.now()-I.getTime())/1e3)}else _.time_taken_minutes&&(j=_.time_taken_minutes*60);const N=[];_.questions&&Array.isArray(_.questions)&&_.questions.forEach(I=>{var D;I.question_type==="coding"&&I.coding_result&&N.push({questionId:I.id,testCasesPassed:I.coding_result.testCasesPassed||0,totalTestCases:I.coding_result.totalTestCases||((D=I.test_cases)==null?void 0:D.length)||0,score:I.coding_result.score||0})}),N.length===0&&s&&s.forEach(I=>{var D;if(I.question_type==="coding"){const V=n[I.id];if(V&&typeof V=="object"&&V.testResults){const H=V.testResults.filter($=>{var Y,F;return((F=(Y=$.result)==null?void 0:Y.verdict)==null?void 0:F.status)==="accepted"}).length,G=V.testResults.length||((D=I.test_cases)==null?void 0:D.length)||0;N.push({questionId:I.id,testCasesPassed:H,totalTestCases:G,score:G>0?Math.round(H/G*100):0})}else I.test_cases&&I.test_cases.length>0&&N.push({questionId:I.id,testCasesPassed:0,totalTestCases:I.test_cases.length,score:0})}});const E={score:_.score||_.total_score||0,maxScore:_.total_points||t.total_points||0,percentage:_.percentage_score||_.percentage||0,grade:C(_.percentage_score||_.percentage||0),timeTaken:j,timeLimit:t.time_limit_minutes?t.time_limit_minutes*60:0,questions:(_.questions||s||[]).map((I,D)=>({...I,questionNumber:D+1,userAnswer:I.user_answer||n[I.id],isCorrect:I.is_correct!==void 0?I.is_correct:!1,pointsEarned:I.points_earned||(I.is_correct?I.points||1:0),timeSpent:I.time_spent||0})),codingResults:N,proctoringSummary:{violations:o.length,severity:o.length>0?"medium":"low",flaggedActivities:o.map(I=>I.type)},canRetake:t.max_attempts>1&&(r.attempt_number||1)<t.max_attempts,nextAttemptAvailable:t.time_between_attempts_hours>0?new Date(Date.now()+t.time_between_attempts_hours*60*60*1e3):null};f(E)}else f(b(timeTakenSeconds))}else f(b(L()))}catch(w){console.error("Error fetching results:",w),ut.error("Failed to load results"),f(b(L()))}finally{m(!1)}},b=w=>({score:T(),maxScore:t.total_points,percentage:M(),grade:U(),timeTaken:w,timeLimit:t.time_limit_minutes?t.time_limit_minutes*60:0,questions:s.map((_,j)=>{const N=n[_.id];let E=!1,I=0;const D=Number(_.points)||1;if(N){if(_.question_type==="coding")(typeof N=="object"&&N.allTestsPassed===!0||typeof N=="object"&&N.testResults&&N.testResults.every(H=>{var G,$;return(($=(G=H.result)==null?void 0:G.verdict)==null?void 0:$.status)==="accepted"})&&N.testResults.length>0)&&(E=!0,I=D);else if(_.correct_answer){const V=typeof N=="string"?N.trim():JSON.stringify(N),H=typeof _.correct_answer=="string"?_.correct_answer.trim():JSON.stringify(_.correct_answer);V===H&&(E=!0,I=D)}}return{..._,questionNumber:j+1,userAnswer:N,isCorrect:E,pointsEarned:I,timeSpent:0}}),codingResults:s.filter(_=>_.question_type==="coding").map(_=>{var I;const j=n[_.id];let N=0,E=((I=_.test_cases)==null?void 0:I.length)||0;return j&&typeof j=="object"&&j.testResults&&(N=j.testResults.filter(D=>{var V,H;return((H=(V=D.result)==null?void 0:V.verdict)==null?void 0:H.status)==="accepted"}).length,E=j.testResults.length||E),{questionId:_.id,testCasesPassed:N,totalTestCases:E,score:E>0?Math.round(N/E*100):0}}),proctoringSummary:{violations:o.length,severity:o.length>0?"medium":"low",flaggedActivities:o.map(_=>_.type)},canRetake:t.max_attempts>1&&r.attempt_number<t.max_attempts,nextAttemptAvailable:t.time_between_attempts_hours>0?new Date(Date.now()+t.time_between_attempts_hours*60*60*1e3):null}),C=w=>w>=90?"A":w>=80?"B":w>=70?"C":w>=60?"D":"F",T=()=>{let w=0;return s.forEach(_=>{const j=Number(_.points)||1,N=n[_.id];if(N){if(_.question_type==="coding")(typeof N=="object"&&N.allTestsPassed===!0||typeof N=="object"&&N.testResults&&N.testResults.every(I=>{var D,V;return((V=(D=I.result)==null?void 0:D.verdict)==null?void 0:V.status)==="accepted"})&&N.testResults.length>0)&&(w+=j);else if(_.correct_answer){const E=typeof N=="string"?N.trim():JSON.stringify(N),I=typeof _.correct_answer=="string"?_.correct_answer.trim():JSON.stringify(_.correct_answer);E===I&&(w+=j)}}}),Math.round(w)},M=()=>{const w=T(),_=t.total_points||s.reduce((j,N)=>j+(Number(N.points)||1),0);return _===0?0:Math.round(w/_*100)},U=()=>{const w=M();return C(w)},L=()=>{if(r!=null&&r.started_at){const w=new Date(r.started_at),_=r!=null&&r.submitted_at?new Date(r.submitted_at):new Date;return Math.floor((_-w)/1e3)}return 0},P=w=>{const _=Math.floor(w/60),j=w%60;return`${_}:${j.toString().padStart(2,"0")}`},B=w=>{switch(w){case"A":return"text-green-600 bg-green-100";case"B":return"text-blue-600 bg-blue-100";case"C":return"text-yellow-600 bg-yellow-100";case"D":return"text-orange-600 bg-orange-100";case"F":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},q=w=>w>=90?"text-green-600":w>=80?"text-blue-600":w>=70?"text-yellow-600":w>=60?"text-orange-600":"text-red-600",z=w=>{switch(w){case"coding":return e.jsx(Gr,{className:"h-4 w-4"});case"essay":return e.jsx(Os,{className:"h-4 w-4"});case"multiple_choice":case"true_false":return e.jsx(ra,{className:"h-4 w-4"});default:return e.jsx(lr,{className:"h-4 w-4"})}},k=()=>{u.canRetake&&i(`/student/assessments/${t.id}/take?retake=true`)},R=()=>{ut.success("Results downloaded")},S=()=>{ut.success("Results shared")};return h?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading results..."})]})}):u?e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsx(Re,{children:e.jsx(lt,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(mt,{className:"text-2xl flex items-center",children:[e.jsx(fu,{className:"h-6 w-6 mr-2"}),"Assessment Results"]}),e.jsx("p",{className:"text-gray-600",children:t.title})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(et,{className:B(u.grade),children:["Grade: ",u.grade]}),e.jsxs(et,{variant:"outline",children:["Attempt ",r.attempt_number]})]})]})})}),e.jsxs(Re,{children:[e.jsx(lt,{children:e.jsx(mt,{className:"text-lg",children:"Score Overview"})}),e.jsxs(De,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg",children:[e.jsxs("div",{className:`text-4xl font-bold ${q(u.percentage)}`,children:[u.percentage,"%"]}),e.jsx("div",{className:"text-sm text-blue-700",children:"Overall Score"})]}),e.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-green-50 to-green-100 rounded-lg",children:[e.jsx("div",{className:"text-4xl font-bold text-green-600",children:u.score}),e.jsx("div",{className:"text-sm text-green-700",children:"Points Earned"})]}),e.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg",children:[e.jsx("div",{className:"text-4xl font-bold text-purple-600",children:u.maxScore}),e.jsx("div",{className:"text-sm text-purple-700",children:"Total Points"})]}),e.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg",children:[e.jsx("div",{className:"text-4xl font-bold text-orange-600",children:P(u.timeTaken)}),e.jsx("div",{className:"text-sm text-orange-700",children:"Time Taken"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Score Progress"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[u.score,"/",u.maxScore]})]}),e.jsx(co,{value:u.percentage,className:"w-full"})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${u.percentage>=t.passing_score?"bg-green-500":"bg-red-500"}`}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Passing Score: ",t.passing_score,"%"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${u.percentage>=t.passing_score?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:`text-sm font-medium ${u.percentage>=t.passing_score?"text-green-600":"text-red-600"}`,children:u.percentage>=t.passing_score?"PASSED":"FAILED"})]})]})]})]}),e.jsxs(Re,{children:[e.jsx(lt,{children:e.jsx(mt,{className:"text-lg",children:"Detailed Results"})}),e.jsx(De,{children:e.jsxs(Dr,{value:g,onValueChange:v,children:[e.jsxs(Ir,{className:"grid w-full grid-cols-4",children:[e.jsx(zt,{value:"overview",children:"Overview"}),e.jsx(zt,{value:"questions",children:"Questions"}),e.jsx(zt,{value:"coding",children:"Coding Results"}),e.jsx(zt,{value:"proctoring",children:"Proctoring"})]}),e.jsx(Kt,{value:"overview",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:"Performance Metrics"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Questions Answered:"}),e.jsxs("span",{className:"text-sm font-medium",children:[Object.keys(n).length,"/",s.length]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Correct Answers:"}),e.jsx("span",{className:"text-sm font-medium",children:u.questions.filter(w=>w.isCorrect).length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Flagged Questions:"}),e.jsx("span",{className:"text-sm font-medium",children:c.size})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Average Time per Question:"}),e.jsx("span",{className:"text-sm font-medium",children:P(Math.floor(u.timeTaken/s.length))})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:"Assessment Details"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Assessment Type:"}),e.jsx("span",{className:"text-sm font-medium",children:t.assessment_type||"Quiz"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Time Limit:"}),e.jsx("span",{className:"text-sm font-medium",children:P(u.timeLimit)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Attempt Number:"}),e.jsx("span",{className:"text-sm font-medium",children:r.attempt_number})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Submission Time:"}),e.jsx("span",{className:"text-sm font-medium",children:new Date().toLocaleString()})]})]})]})]})}),e.jsxs(Kt,{value:"questions",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:"Question Review"}),e.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>x(!p),children:[p?e.jsx(Wo,{className:"h-4 w-4 mr-1"}):e.jsx(Ss,{className:"h-4 w-4 mr-1"}),p?"Hide":"Show"," Answers"]})]}),e.jsx("div",{className:"space-y-3",children:u.questions.map(w=>e.jsxs("div",{className:`p-4 border rounded-lg ${w.isCorrect?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"font-medium",children:["Question ",w.questionNumber]}),z(w.question_type),e.jsx(et,{variant:"outline",className:"text-xs",children:w.question_type.replace("_"," ")}),e.jsxs(et,{variant:"outline",className:"text-xs",children:[w.points||1," pts"]}),c.has(w.id)&&e.jsx(Q_,{className:"h-4 w-4 text-yellow-600"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[w.isCorrect?e.jsx(Yt,{className:"h-5 w-5 text-green-600"}):e.jsx(Mr,{className:"h-5 w-5 text-red-600"}),e.jsxs(et,{variant:w.isCorrect?"default":"destructive",children:[w.pointsEarned,"/",w.points||1," pts"]})]})]}),e.jsx("div",{className:"text-sm text-gray-700 mb-2",children:w.question_text}),p&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Your Answer:"}),e.jsx("div",{className:"text-sm bg-white p-2 rounded border",children:(()=>{if(!w.userAnswer)return"No answer provided";if(w.question_type==="coding"){const _=w.userAnswer;return typeof _=="object"&&_.code?e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold mb-1",children:["Language: ",_.language||"N/A"]}),e.jsx("pre",{className:"bg-gray-100 p-2 rounded text-xs overflow-auto max-h-40",children:_.code}),_.testResults&&e.jsxs("div",{className:"mt-2 text-xs",children:["Test Results: ",_.testResults.filter(j=>{var N,E;return((E=(N=j.result)==null?void 0:N.verdict)==null?void 0:E.status)==="accepted"||j.status==="accepted"}).length," / ",_.testResults.length," passed"]})]}):JSON.stringify(w.userAnswer)}else if(w.question_type==="multiple_choice"||w.question_type==="single_choice"){const _=w.userAnswer;return typeof _=="object"&&_.selected_options?Array.isArray(_.selected_options)?_.selected_options.join(", "):_.selected_options:typeof _=="string"?_:JSON.stringify(_)}else return w.question_type==="true_false",typeof w.userAnswer=="string"?w.userAnswer:JSON.stringify(w.userAnswer)})()})]}),w.correct_answer&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Correct Answer:"}),e.jsx("div",{className:"text-sm bg-white p-2 rounded border",children:(()=>w.question_type==="coding"?w.correct_answer.code||w.correct_answer||"Manual grading required":w.question_type==="multiple_choice"||w.question_type==="single_choice"?Array.isArray(w.correct_answer)?w.correct_answer.join(", "):w.correct_answer:w.correct_answers&&Array.isArray(w.correct_answers)?w.options&&Array.isArray(w.options)?w.correct_answers.map(_=>w.options[_]).filter(Boolean).join(", "):w.correct_answers.join(", "):typeof w.correct_answer=="string"?w.correct_answer:JSON.stringify(w.correct_answer))()})]}),w.explanation&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Explanation:"}),e.jsx("div",{className:"text-sm bg-white p-2 rounded border",children:w.explanation})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2 text-xs text-gray-500",children:[e.jsxs("span",{children:["Time spent: ",P(w.timeSpent)]}),e.jsxs("span",{children:["Submitted: ",new Date().toLocaleTimeString()]})]})]},w.id))})]}),e.jsxs(Kt,{value:"coding",className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:"Coding Question Results"}),u.codingResults.length>0?e.jsx("div",{className:"space-y-3",children:u.codingResults.map(w=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium",children:"Coding Question"}),e.jsxs(et,{variant:"outline",children:[w.score,"% Score"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:w.testCasesPassed}),e.jsx("div",{className:"text-sm text-green-700",children:"Test Cases Passed"})]}),e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:w.totalTestCases}),e.jsx("div",{className:"text-sm text-blue-700",children:"Total Test Cases"})]}),e.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[Math.round(w.testCasesPassed/w.totalTestCases*100),"%"]}),e.jsx("div",{className:"text-sm text-purple-700",children:"Success Rate"})]})]})]},w.questionId))}):e.jsxs(pr,{children:[e.jsx(Ms,{className:"h-4 w-4"}),e.jsx(gr,{children:"No coding questions in this assessment."})]})]}),e.jsxs(Kt,{value:"proctoring",className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:"Proctoring Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(el,{className:"h-5 w-5 text-gray-600"}),e.jsx("span",{className:"font-medium",children:"Violations Detected"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-800",children:u.proctoringSummary.violations}),e.jsx("div",{className:"text-sm text-gray-600",children:u.proctoringSummary.violations===0?"No violations":"Violations detected"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Ms,{className:"h-5 w-5 text-gray-600"}),e.jsx("span",{className:"font-medium",children:"Severity Level"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-800 capitalize",children:u.proctoringSummary.severity}),e.jsx("div",{className:"text-sm text-gray-600",children:"Overall risk level"})]})]}),u.proctoringSummary.violations>0&&e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-800 mb-2",children:"Flagged Activities"}),e.jsx("div",{className:"space-y-2",children:u.proctoringSummary.flaggedActivities.map((w,_)=>e.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-yellow-50 rounded",children:[e.jsx(Ms,{className:"h-4 w-4 text-yellow-600"}),e.jsx("span",{className:"text-sm text-yellow-800",children:w.replace("_"," ").toUpperCase()})]},_))})]})]})]})})]}),u.canRetake&&e.jsxs(Re,{children:[e.jsx(lt,{children:e.jsxs(mt,{className:"text-lg flex items-center text-green-600",children:[e.jsx(Is,{className:"h-5 w-5 mr-2"}),"Retake Available"]})}),e.jsx(De,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs(pr,{children:[e.jsx(Ms,{className:"h-4 w-4"}),e.jsxs(gr,{children:["You can retake this assessment. You have ",t.max_attempts-r.attempt_number," attempt",t.max_attempts-r.attempt_number>1?"s":""," remaining."]})]}),u.nextAttemptAvailable&&e.jsxs("div",{className:"text-sm text-gray-600",children:["Next attempt available: ",u.nextAttemptAvailable.toLocaleString()]}),e.jsxs(ee,{onClick:k,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Is,{className:"h-4 w-4 mr-2"}),"Retake Assessment"]})]})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(ee,{variant:"outline",onClick:()=>i("/student/assessments"),children:[e.jsx(oa,{className:"h-4 w-4 mr-2"}),"Back to Assessments"]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(ee,{variant:"outline",onClick:R,children:[e.jsx(Zs,{className:"h-4 w-4 mr-2"}),"Download Results"]}),e.jsxs(ee,{variant:"outline",onClick:S,children:[e.jsx(h9,{className:"h-4 w-4 mr-2"}),"Share Results"]})]})]})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ms,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Results Not Available"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Unable to load assessment results."}),e.jsx(ee,{onClick:()=>i("/student/assessments"),children:"Back to Assessments"})]})})},fq=({section:t,sectionIndex:r,totalSections:s,onStart:n,onBack:c,onCancel:o,theme:a="light",isDarkMode:d=!1})=>e.jsx("div",{className:`min-h-screen flex items-center justify-center px-4 py-8 ${d?"bg-gray-900":"bg-gray-50"}`,children:e.jsx("div",{className:"w-full max-w-2xl",children:e.jsx(Re,{className:`shadow-lg ${d?"bg-gray-800 border-gray-700":""}`,children:e.jsxs(De,{className:"p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:`text-3xl font-bold mb-3 ${d?"text-gray-100":"text-gray-900"}`,children:t.name||`Section ${r+1}`}),e.jsxs(et,{variant:"default",className:"text-sm",children:["Section ",r+1," of ",s]})]}),t.description&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:`text-sm font-semibold mb-2 uppercase tracking-wide ${d?"text-gray-300":"text-gray-700"}`,children:"Description"}),e.jsx("div",{className:`leading-relaxed ${d?"text-gray-300":"text-gray-600"}`,children:e.jsx("p",{children:t.description})})]}),t.instructions&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:`text-sm font-semibold mb-2 uppercase tracking-wide ${d?"text-gray-300":"text-gray-700"}`,children:"Instructions"}),e.jsx("div",{className:`leading-relaxed prose prose-sm max-w-none ${d?"text-gray-300 prose-invert":"text-gray-600"}`,dangerouslySetInnerHTML:{__html:Ff.sanitize(t.instructions)}})]}),e.jsx("div",{className:`flex items-center justify-center gap-6 mb-8 pb-8 border-b ${d?"border-gray-700":"border-gray-200"}`,children:t.time_limit_minutes&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:`flex items-center justify-center gap-2 mb-1 ${d?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Ps,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Time Limit"})]}),e.jsxs("p",{className:`text-lg font-semibold ${d?"text-gray-100":"text-gray-900"}`,children:[t.time_limit_minutes," minutes"]})]}),e.jsx("div",{className:`w-px h-12 ${d?"bg-gray-700":"bg-gray-200"}`})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(ee,{variant:"outline",onClick:c,className:`flex-1 ${d?"border-gray-600 text-gray-300 hover:bg-gray-700":""}`,disabled:r===0,children:"Back"}),e.jsxs(ee,{onClick:n,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(ta,{className:"h-4 w-4 mr-2"}),"Start Section",e.jsx(li,{className:"h-4 w-4 ml-2"})]})]})]})})})}),mq=({section:t,sectionIndex:r,totalSections:s,sectionQuestions:n,answers:c,flaggedQuestions:o=new Set,onContinue:a,onBack:d,onCancel:l,onNavigateToQuestion:i,theme:u="light",isDarkMode:f=!1,isSavingBeforeContinue:h=!1,saving:m=!1})=>{const[p,x]=A.useState(!0),g=()=>{a&&a()},v=n.filter(T=>{const M=c[T.id];return M?T.question_type==="coding"?M&&(typeof M=="object"&&M.allTestsPassed===!0||typeof M=="object"&&M.code&&M.code.trim()!==""&&Array.isArray(M.testResults)&&M.testResults.length>0&&M.testResults.every(U=>{var L,P;return U&&((P=(L=U.result)==null?void 0:L.verdict)==null?void 0:P.status)==="accepted"})):typeof M=="string"&&M.trim()!==""||Array.isArray(M)&&M.length>0||typeof M=="object"&&M.value:!1}).length,y=r===s-1,b=T=>{const M=c[T.id];let U=!1;T.question_type==="coding"?U=M&&(typeof M=="object"&&M.allTestsPassed===!0||typeof M=="object"&&M.code&&M.code.trim()!==""&&Array.isArray(M.testResults)&&M.testResults.length>0&&M.testResults.every(P=>{var B,q;return P&&((q=(B=P.result)==null?void 0:B.verdict)==null?void 0:q.status)==="accepted"})):U=M&&(typeof M=="string"&&M.trim()!==""||Array.isArray(M)&&M.length>0||typeof M=="object"&&M.value);const L=o.has(T.id);return U&&L?{status:"answered-flagged",label:"Answered & Marked",color:"bg-yellow-600",textColor:"text-yellow-100"}:U?{status:"answered",label:"Answered",color:"bg-green-600",textColor:"text-green-100"}:L?{status:"flagged",label:"Marked for Review",color:"bg-orange-600",textColor:"text-orange-100"}:{status:"not-answered",label:"Not Answered",color:"bg-red-600",textColor:"text-red-100"}},C=T=>{i&&i(T,r)};return e.jsx("div",{className:`min-h-screen flex items-center justify-center px-4 py-8 ${f?"bg-gray-900":"bg-gray-50"}`,children:e.jsx("div",{className:"w-full max-w-4xl",children:e.jsx(Re,{className:`shadow-lg ${f?"bg-gray-800 border-gray-700":""}`,children:e.jsxs(De,{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"mb-3",children:e.jsx(Yt,{className:`h-8 w-8 mx-auto ${f?"text-green-400":"text-green-600"}`})}),e.jsxs("h1",{className:`text-xl font-bold mb-2 ${f?"text-gray-100":"text-gray-900"}`,children:[t.name||`Section ${r+1}`," Completed"]}),e.jsxs(et,{variant:"default",className:"text-xs bg-green-600",children:["Section ",r+1," of ",s]})]}),e.jsx("div",{className:`mb-4 pb-4 border-b ${f?"border-gray-700":"border-gray-200"}`,children:e.jsxs("div",{className:`rounded-lg p-4 space-y-2 ${f?"bg-gray-700":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:`text-sm font-medium ${f?"text-gray-200":"text-gray-700"}`,children:"Questions Answered:"}),e.jsxs("span",{className:`text-base font-semibold ${f?"text-gray-100":"text-gray-900"}`,children:[v," / ",n.length]})]}),e.jsx("div",{className:`w-full rounded-full h-1.5 ${f?"bg-gray-600":"bg-gray-200"}`,children:e.jsx("div",{className:"bg-green-600 h-1.5 rounded-full transition-all duration-300",style:{width:`${v/n.length*100}%`}})})]})}),e.jsxs(Re,{className:`mb-4 ${f?"bg-gray-700 border-gray-600":""}`,children:[e.jsx(lt,{className:`cursor-pointer py-3 ${f?"bg-gray-700 border-gray-600":""}`,onClick:()=>x(!p),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(mt,{className:`text-sm ${f?"text-gray-100":""}`,children:"Question Overview"}),p?e.jsx(my,{className:`h-4 w-4 ${f?"text-gray-300":"text-gray-600"}`}):e.jsx(lc,{className:`h-4 w-4 ${f?"text-gray-300":"text-gray-600"}`})]})}),p&&e.jsxs(De,{className:"pt-4",children:[e.jsx("div",{className:"grid grid-cols-8 sm:grid-cols-10 gap-1.5 mb-3",children:n.map((T,M)=>{const U=b(T);return e.jsx("button",{onClick:()=>C(M),className:`
                            aspect-square rounded flex items-center justify-center
                            font-medium text-xs transition-all hover:scale-105
                            ${U.color} ${U.textColor}
                            ${f?"hover:ring-1 hover:ring-gray-400":"hover:ring-1 hover:ring-gray-600"}
                          `,title:`Question ${M+1}: ${U.label}`,children:M+1},T.id)})}),e.jsxs("div",{className:"flex flex-wrap gap-3 justify-center text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-green-600"}),e.jsx("span",{className:f?"text-gray-300":"text-gray-700",children:"Answered"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-yellow-600"}),e.jsx("span",{className:f?"text-gray-300":"text-gray-700",children:"Answered & Marked"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-orange-600"}),e.jsx("span",{className:f?"text-gray-300":"text-gray-700",children:"Marked for Review"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-red-600"}),e.jsx("span",{className:f?"text-gray-300":"text-gray-700",children:"Not Answered"})]})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(ee,{variant:"outline",onClick:d,className:`flex-1 ${f?"border-gray-600 text-gray-300 hover:bg-gray-700":""}`,children:[e.jsx(oa,{className:"h-4 w-4 mr-2"}),"Review Section"]}),y?e.jsx(ee,{onClick:g,disabled:h||m,className:"flex-1 bg-green-600 hover:bg-green-700 text-white disabled:opacity-50",children:h||m?e.jsxs(e.Fragment,{children:[e.jsx(Tr,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Complete Assessment",e.jsx(li,{className:"h-4 w-4 ml-2"})]})}):e.jsx(ee,{onClick:g,disabled:h||m,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white disabled:opacity-50",children:h||m?e.jsxs(e.Fragment,{children:[e.jsx(Tr,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:["Continue to Next Section",e.jsx(li,{className:"h-4 w-4 ml-2"})]})})]})]})})})})},VC=A.forwardRef(({submissionId:t,proctoringSettings:r,onViolation:s,onMaxViolationsExceeded:n},c)=>{const[o,a]=A.useState(!1),[d,l]=A.useState([]),[i,u]=A.useState({camera:!1,microphone:!1,fullscreen:!1,browserLockdown:!1,eyeTracking:!1,tabSwitching:!1}),[f,h]=A.useState(0),[m,p]=A.useState(Date.now()),[x,g]=A.useState(!0),[v,y]=A.useState(0),b=A.useRef(null),C=A.useRef(null),T=A.useRef(null),M=A.useRef({});A.useRef(null);const U=A.useRef(0),L=A.useRef(0),P=A.useRef(0);A.useImperativeHandle(c,()=>({initialize:B,cleanup:q,getStatus:()=>i,getViolations:()=>d,getViolationCount:()=>f,getTabSwitchCount:()=>v})),A.useEffect(()=>(r&&t&&!o&&B(),()=>{q()}),[r,t]);const B=async()=>{try{if(!r){console.warn("Proctoring settings not provided");return}if(console.log("Initializing proctoring with settings:",r),a(!0),r.require_webcam||r.require_webcam===!0)try{await z()}catch(G){console.error("Failed to initialize camera monitoring:",G),D("camera_error","Failed to initialize camera monitoring")}if(r.require_microphone||r.require_microphone===!0)try{await k()}catch(G){console.error("Failed to initialize microphone monitoring:",G),D("microphone_error","Failed to initialize microphone monitoring")}(r.fullscreen_requirement||r.fullscreen_requirement===!0)&&R(),(r.browser_lockdown||r.browser_lockdown===!0)&&S(),(r.tab_switching_detection||r.tab_switching_detection===!0)&&w(),(r.copy_paste_detection||r.copy_paste_detection===!0)&&_(),(r.right_click_detection||r.right_click_detection===!0)&&j(),(r.keyboard_shortcut_detection||r.keyboard_shortcut_detection===!0)&&N(),(r.eye_tracking||r.eye_tracking===!0)&&E(),I(),ut.success("Proctoring monitoring started",{duration:3e3})}catch(G){console.error("Error initializing proctoring:",G),ut.error("Failed to initialize proctoring")}},q=()=>{b.current&&(b.current.getTracks().forEach(G=>G.stop()),b.current=null),Object.values(M.current).forEach(G=>{typeof G=="function"&&G()}),M.current={},C.current&&clearInterval(C.current),T.current&&clearTimeout(T.current),a(!1),u({camera:!1,microphone:!1,fullscreen:!1,browserLockdown:!1,eyeTracking:!1,tabSwitching:!1})},z=async()=>{try{const G=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:"user"}});if(b.current=G,u(Y=>({...Y,camera:!0})),G.getVideoTracks()[0]){const Y=document.createElement("canvas"),F=Y.getContext("2d"),O=document.createElement("video");O.srcObject=G;const K=setInterval(()=>{Y.width=O.videoWidth,Y.height=O.videoHeight,F.drawImage(O,0,0);const X=F.getImageData(0,0,Y.width,Y.height).data;let te=!1;for(let de=0;de<X.length;de+=4)if((X[de]+X[de+1]+X[de+2])/3>200){te=!0;break}te||D("camera_inactive","Camera appears to be covered or inactive")},5e3);M.current.camera=()=>clearInterval(K)}}catch(G){console.error("Camera monitoring error:",G),D("camera_error","Failed to access camera")}},k=async()=>{try{const G=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});if(b.current){const X=[...b.current.getTracks(),...G.getTracks()];b.current=new MediaStream(X)}else b.current=G;u(X=>({...X,microphone:!0}));const $=new AudioContext,Y=$.createAnalyser();$.createMediaStreamSource(G).connect(Y),Y.fftSize=256;const O=Y.frequencyBinCount,W=new Uint8Array(O),Q=setInterval(()=>{Y.getByteFrequencyData(W),W.reduce((te,de)=>te+de)/W.length<5&&D("microphone_inactive","Microphone appears to be muted or inactive")},3e3);M.current.microphone=()=>{clearInterval(Q),$.close()}}catch(G){console.error("Microphone monitoring error:",G),D("microphone_error","Failed to access microphone")}},R=()=>{const G=()=>{const Y=!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement);u(F=>({...F,fullscreen:Y})),Y||D("fullscreen_exit","Exited fullscreen mode")},$=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"];$.forEach(Y=>{document.addEventListener(Y,G)}),M.current.fullscreen=()=>{$.forEach(Y=>{document.removeEventListener(Y,G)})},G()},S=()=>{u(F=>({...F,browserLockdown:!0}));const G=F=>(F.preventDefault(),F.stopPropagation(),F.stopImmediatePropagation(),P.current++,D("right_click","Right-click detected"),!1),$=F=>{(F.key==="F12"||F.ctrlKey&&F.shiftKey&&F.key==="I"||F.ctrlKey&&F.shiftKey&&F.key==="C"||F.ctrlKey&&F.key==="U")&&(F.preventDefault(),F.stopPropagation(),D("dev_tools","Developer tools shortcut detected"))},Y=F=>(F.preventDefault(),F.stopPropagation(),L.current++,D("copy_paste","Copy/paste operation detected"),!1);document.addEventListener("contextmenu",G,{capture:!0}),window.addEventListener("contextmenu",G,{capture:!0}),document.addEventListener("keydown",$,{capture:!0}),document.addEventListener("copy",Y,{capture:!0}),document.addEventListener("paste",Y,{capture:!0}),document.addEventListener("cut",Y,{capture:!0}),M.current.browserLockdown=()=>{document.removeEventListener("contextmenu",G,{capture:!0}),window.removeEventListener("contextmenu",G,{capture:!0}),document.removeEventListener("keydown",$,{capture:!0}),document.removeEventListener("copy",Y,{capture:!0}),document.removeEventListener("paste",Y,{capture:!0}),document.removeEventListener("cut",Y,{capture:!0})}},w=()=>{u(Y=>({...Y,tabSwitching:!0}));const G=()=>{document.hidden&&(U.current++,y(Y=>Y+1),D("tab_switch","Tab switching or window focus lost detected"))},$=()=>{U.current++,y(Y=>Y+1),D("window_blur","Window focus lost")};document.addEventListener("visibilitychange",G),window.addEventListener("blur",$),M.current.tabSwitching=()=>{document.removeEventListener("visibilitychange",G),window.removeEventListener("blur",$)}},_=()=>{const G=$=>($.preventDefault(),$.stopPropagation(),L.current++,D("copy_paste","Copy/paste operation detected"),!1);document.addEventListener("copy",G,{capture:!0}),document.addEventListener("paste",G,{capture:!0}),document.addEventListener("cut",G,{capture:!0}),M.current.copyPaste=()=>{document.removeEventListener("copy",G,{capture:!0}),document.removeEventListener("paste",G,{capture:!0}),document.removeEventListener("cut",G,{capture:!0})}},j=()=>{const G=$=>($.preventDefault(),$.stopPropagation(),$.stopImmediatePropagation(),P.current++,D("right_click","Right-click detected"),!1);document.addEventListener("contextmenu",G,{capture:!0}),window.addEventListener("contextmenu",G,{capture:!0}),M.current.rightClick=()=>{document.removeEventListener("contextmenu",G,{capture:!0}),window.removeEventListener("contextmenu",G,{capture:!0})}},N=()=>{const G=$=>{($.key==="F12"||$.ctrlKey&&$.shiftKey&&$.key==="I"||$.ctrlKey&&$.shiftKey&&$.key==="C"||$.ctrlKey&&$.key==="U"||$.ctrlKey&&$.key==="S"||$.ctrlKey&&$.key==="A")&&($.preventDefault(),D("keyboard_shortcut",`Keyboard shortcut detected: ${$.key}`))};document.addEventListener("keydown",G),M.current.keyboardShortcuts=()=>{document.removeEventListener("keydown",G)}},E=()=>{u(Y=>({...Y,eyeTracking:!0}));const $=setInterval(()=>{Math.random()<.1&&D("eye_tracking","Eye movement suggests looking away from screen")},2e3);M.current.eyeTracking=()=>clearInterval($)},I=()=>{let G=Date.now();const $=()=>{const O=Date.now();G=O,p(O)},Y=["mousedown","mousemove","keypress","scroll","touchstart"];Y.forEach(O=>{document.addEventListener(O,$,{passive:!0})});const F=()=>{Date.now()-G>3e4&&D("inactivity","Extended period of inactivity detected")};C.current=setInterval(F,1e4),M.current.generalMonitoring=()=>{Y.forEach(O=>{document.removeEventListener(O,$)}),C.current&&clearInterval(C.current)}},D=(G,$)=>{const Y={id:Date.now()+Math.random(),type:G,description:$,timestamp:new Date().toISOString(),severity:V(G),metadata:{tabSwitches:U.current,copyPasteAttempts:L.current,rightClickAttempts:P.current,timeSinceActivity:Date.now()-m}};l(F=>F.filter(W=>W.type===G&&Date.now()-new Date(W.timestamp).getTime()<1e3).length>0?F:[...F,Y]),h(F=>F+1),s&&s(Y),ut.error(`Proctoring violation: ${$}`,{duration:5e3}),console.warn("Proctoring violation logged:",Y)},V=G=>({camera_inactive:"medium",microphone_inactive:"medium",fullscreen_exit:"high",tab_switch:"high",window_blur:"high",copy_paste:"high",right_click:"medium",dev_tools:"high",keyboard_shortcut:"medium",eye_tracking:"low",inactivity:"low"})[G]||"medium",H=G=>{switch(G){case"high":return"text-red-600 bg-red-100";case"medium":return"text-orange-600 bg-orange-100";case"low":return"text-yellow-600 bg-yellow-100";default:return"text-gray-600 bg-gray-100"}};return o?e.jsxs("div",{className:"fixed bottom-4 right-4 z-30 max-w-sm",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-full shadow-lg px-3 py-2 cursor-pointer flex items-center space-x-2",onClick:()=>g(!x),children:[e.jsx(el,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-xs font-medium",children:"Proctoring Active"}),f>0&&e.jsx(et,{variant:"destructive",children:f})]}),!x&&e.jsxs("div",{className:"mt-2 bg-white border border-gray-200 rounded-lg shadow-lg p-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-1 text-xs",children:[e.jsx(fy,{className:`h-3 w-3 ${i.camera?"text-green-600":"text-red-600"}`}),e.jsx("span",{children:"Camera"})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-xs",children:[e.jsx(sN,{className:`h-3 w-3 ${i.microphone?"text-green-600":"text-red-600"}`}),e.jsx("span",{children:"Mic"})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-xs",children:[e.jsx(J_,{className:`h-3 w-3 ${i.fullscreen?"text-green-600":"text-red-600"}`}),e.jsx("span",{children:"Fullscreen"})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-xs",children:[e.jsx(Wd,{className:`h-3 w-3 ${i.browserLockdown?"text-green-600":"text-red-600"}`}),e.jsx("span",{children:"Lockdown"})]})]}),d.length>0&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs font-medium text-gray-600",children:"Recent"}),d.slice(-3).map(G=>e.jsxs(pr,{className:"p-2",children:[e.jsx(Ms,{className:"h-3 w-3"}),e.jsxs(gr,{className:"text-xs",children:[e.jsx("div",{className:`inline-block px-1 py-0.5 rounded text-xs mr-1 ${H(G.severity)}`,children:G.severity}),G.description]})]},G.id))]})]})]}):null});VC.displayName="ProctoringMonitor";class pq{constructor(){this.keyPromise=null}async getKey(){if(this.keyPromise)return this.keyPromise;const r=await crypto.subtle.importKey("raw",new TextEncoder().encode(this.getKeyMaterial()),{name:"PBKDF2"},!1,["deriveKey"]);return this.keyPromise=crypto.subtle.deriveKey({name:"PBKDF2",salt:new TextEncoder().encode("lms-assessment-salt"),iterations:1e5,hash:"SHA-256"},r,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"]),this.keyPromise}getKeyMaterial(){var n;return`${localStorage.getItem("lmsUser")?(n=JSON.parse(localStorage.getItem("lmsUser")))==null?void 0:n.id:"default"}-lms-platform-secret-key`}async encrypt(r){try{if(!r)return null;const s=await this.getKey(),n=typeof r=="string"?r:JSON.stringify(r),c=new TextEncoder().encode(n),o=crypto.getRandomValues(new Uint8Array(12)),a=await crypto.subtle.encrypt({name:"AES-GCM",iv:o},s,c),d=new Uint8Array(o.length+a.byteLength);return d.set(o,0),d.set(new Uint8Array(a),o.length),btoa(String.fromCharCode(...d))}catch(s){return typeof window<"u"&&window.logger?window.logger.error("Encryption error:",s):console.error("Encryption error:",s),typeof r=="string"?r:JSON.stringify(r)}}async decrypt(r){try{if(!r)return null;const s=await this.getKey(),n=Uint8Array.from(atob(r),l=>l.charCodeAt(0)),c=n.slice(0,12),o=n.slice(12),a=await crypto.subtle.decrypt({name:"AES-GCM",iv:c},s,o),d=new TextDecoder().decode(a);try{return JSON.parse(d)}catch{return d}}catch(s){typeof window<"u"&&window.logger?window.logger.error("Decryption error:",s):console.error("Decryption error:",s);try{return JSON.parse(r)}catch{return r}}}}const Ea=new pq,gq=()=>{var at;const{assessmentId:t}=dy(),r=Br();qs();const{theme:s,setTheme:n}=D4(),[c,o]=A.useState(0),[a,d]=A.useState(null),[l,i]=A.useState(null),[u,f]=A.useState([]),[h,m]=A.useState([]),[p,x]=A.useState(!0),[g,v]=A.useState(null),[y,b]=A.useState(!1),[C,T]=A.useState(new Set),[M,U]=A.useState({}),[L,P]=A.useState(0),[B,q]=A.useState(0);A.useState(null);const[z,k]=A.useState({}),[R,S]=A.useState(new Set),[w,_]=A.useState(!1),[j,N]=A.useState(!1),[E,I]=A.useState({}),[D,V]=A.useState([]),[H,G]=A.useState(0),[$,Y]=A.useState(navigator.onLine),[F,O]=A.useState([]),W=A.useRef(F),K=A.useRef(null),Q=A.useRef(Date.now()),X=A.useRef(null);A.useRef(null);const te=A.useRef(null),[de,xe]=A.useState(!1);A.useRef(!1);const ne=A.useRef(!1),ge=A.useRef(M),be=A.useRef(l),Ie=A.useRef(!1),Ce=A.useRef([]),Oe=A.useRef({});A.useEffect(()=>{ge.current=M},[M]),A.useEffect(()=>{be.current=l},[l]);const Ee=()=>{const Be=[{id:"description",title:"Assessment Description",icon:e.jsx(Os,{className:"h-5 w-5"}),component:XV},{id:"terms",title:"Terms & Conditions",icon:e.jsx(Yt,{className:"h-5 w-5"}),component:ZV}];return a!=null&&a.require_proctoring&&Be.push({id:"proctoring",title:"Proctoring Setup",icon:e.jsx(el,{className:"h-5 w-5"}),component:JV}),h&&h.length>0?h.forEach((Ue,re)=>{Be.push({id:`section-start-${re}`,sectionIndex:re,title:`${Ue.name||`Section ${re+1}`} - Start`,icon:e.jsx(ta,{className:"h-5 w-5"}),component:fq,stepType:"section-start"}),Be.push({id:`section-questions-${re}`,sectionIndex:re,title:`${Ue.name||`Section ${re+1}`} - Questions`,icon:e.jsx(Gd,{className:"h-5 w-5"}),component:v2,stepType:"questions"}),Be.push({id:`section-completion-${re}`,sectionIndex:re,title:`${Ue.name||`Section ${re+1}`} - Complete`,icon:e.jsx(Yt,{className:"h-5 w-5"}),component:mq,stepType:"section-completion"})}):Be.push({id:"questions",title:"Assessment Questions",icon:e.jsx(Gd,{className:"h-5 w-5"}),component:v2,stepType:"questions"}),Be.push({id:"submission",title:"Submit Assessment",icon:e.jsx(no,{className:"h-5 w-5"}),component:uq}),a!=null&&a.show_results_immediately&&Be.push({id:"results",title:"Assessment Results",icon:e.jsx(Yt,{className:"h-5 w-5"}),component:hq}),Be},pe=A.useMemo(()=>a?Ee():[],[a,h,u]);A.useEffect(()=>{W.current=F},[F]);const Ae=pe[c]||null;A.useEffect(()=>(qe(),()=>{K.current&&clearInterval(K.current)}),[t]),A.useEffect(()=>{localStorage.getItem(`retake_${t}`)==="true"&&(b(!0),localStorage.removeItem(`retake_${t}`))},[t]);const st=A.useCallback(async()=>{if(!l||!$||Ie.current)return;const Be=l.id||l.submissionId;if(!Be)return;const Ue=[...W.current];if(Ue.length!==0){Ie.current=!0;try{let re=0,ye=0;const ke=new Set,Fe=Ke=>`${Ke.questionId}:${Ke.timestamp||"no-ts"}`;for(const Ke of Ue){const{questionId:Qe,answer:he,timeSpent:je,timestamp:Ne}=Ke;if(he!=null)try{if(await Pe.saveAnswer(Be,{questionId:Qe,answer:he,timeSpent:je}),re++,ke.add(Fe(Ke)),typeof Storage<"u"){const tt=`offline_answer_${Be}_${Qe}`,jt=localStorage.getItem(tt);if(jt)try{const dt=await Ea.decrypt(jt);if(dt!=null&&dt.timestamp&&dt.timestamp!==Ne)continue}catch(dt){logger.debug("Failed to decrypt offline answer during cleanup:",dt)}localStorage.removeItem(tt)}}catch(tt){logger.error(`Failed to sync answer for question ${Qe}:`,tt),ye++}}re>0?(O(Ke=>Ke.filter(Qe=>!ke.has(Fe(Qe)))),ye===0?ut.success("All answers synced successfully"):ut.warning(`${re} answers synced, ${ye} failed`)):ye>0&&ut.error("Failed to sync offline answers. We will retry automatically.")}catch(re){logger.error("Error syncing offline queue:",re)}finally{Ie.current=!1}}},[l,$]);A.useEffect(()=>{const Be=()=>{Y(!0),ut.success("Connection restored"),F.length>0&&l&&st()},Ue=()=>{Y(!1),ut.error("Connection lost. Answers will be saved when connection is restored.")};return window.addEventListener("online",Be),window.addEventListener("offline",Ue),()=>{window.removeEventListener("online",Be),window.removeEventListener("offline",Ue)}},[F,l,st]),A.useEffect(()=>{if(!l||!$)return;const Ue=setInterval(async()=>{try{const re=l.id||l.submissionId,ye=localStorage.getItem("token")||localStorage.getItem("lmsToken"),ke={}.VITE_API_URL||"http://localhost:5000/api",Fe=await fetch(`${ke}/student-assessments/${re}/answers`,{headers:{Authorization:`Bearer ${ye}`,"Content-Type":"application/json"}});if(Fe.ok){const Ke=Fe.headers.get("content-type");if(!Ke||!Ke.includes("application/json")){console.error("Response is not JSON:",Ke);return}const Qe=await Fe.json();if(Qe.data&&Array.isArray(Qe.data)){const he={};Qe.data.forEach(je=>{if(je.answer!==null&&je.answer!==void 0)try{const Ne=typeof je.answer=="string"?JSON.parse(je.answer):je.answer;he[je.question_id]=Ne}catch{he[je.question_id]=je.answer}}),U(je=>{const Ne={...he};if(Object.keys(je).forEach(tt=>{je[tt]!==void 0&&je[tt]!==null&&(Ne[tt]=je[tt])}),typeof Storage<"u"){const tt=`assessment_answers_${re}`,jt={answers:Ne,timestamp:Date.now()};Ea.encrypt(jt).then(dt=>{sessionStorage.setItem(tt,dt)}).catch(dt=>{logger.error("Error encrypting session data:",dt),sessionStorage.setItem(tt,JSON.stringify(jt))})}return Ne})}}}catch(re){logger.error("Error syncing answers with server:",re)}},6e4);return()=>clearInterval(Ue)},[l,$]),A.useEffect(()=>{if(!l||Object.keys(M).length===0)return;const Be=`assessment_answers_${l.id||l.submissionId}`;typeof Storage<"u"&&sessionStorage.setItem(Be,JSON.stringify({answers:M,timestamp:Date.now()}))},[M,l]),A.useEffect(()=>{if((Ae==null?void 0:Ae.sectionIndex)!==void 0&&B!==Ae.sectionIndex&&(q(Ae.sectionIndex),Ae.stepType==="questions"&&h[Ae.sectionIndex])){const Be=u.filter(Ue=>Ue.section_id===h[Ae.sectionIndex].id);if(Be.length>0){const Ue=u.findIndex(re=>re.id===Be[0].id);Ue>=0&&P(Ue)}}},[c,Ae,B,h,u]),A.useEffect(()=>{const Be=pe.findIndex(Ue=>Ue.stepType==="questions"||Ue.id==="questions");return c===Be&&l?(K.current=setInterval(ve,3e4),j&&X.current&&ie(),()=>{K.current&&(clearInterval(K.current),K.current=null),Object.values(Oe.current).forEach(Ue=>{Ue&&clearTimeout(Ue)}),Oe.current={},Ce.current.forEach(Ue=>{Ue&&clearTimeout(Ue)}),Ce.current=[]}):(K.current&&clearInterval(K.current),()=>{K.current&&clearInterval(K.current)})},[c,l,j,pe]),A.useEffect(()=>{if(l&&(Object.keys(M).length>0||Object.keys(z).length>0)){const Be=l.id||l.submissionId;if(Be){const Ue=`assessment_answers_${Be}`;(async()=>{const re=sessionStorage.getItem(Ue);let ye={answers:{},timeSpent:{}};if(re)try{ye=await Ea.decrypt(re)}catch{try{ye=JSON.parse(re)}catch{ye={answers:{},timeSpent:{}}}}const ke={answers:{...ye.answers,...M},timeSpent:{...ye.timeSpent,...z},timestamp:Date.now()};try{const Fe=await Ea.encrypt(ke);sessionStorage.setItem(Ue,Fe)}catch(Fe){console.error("Error encrypting session data:",Fe),sessionStorage.setItem(Ue,JSON.stringify(ke))}})()}}},[M,z,l]),A.useEffect(()=>{if(pe.findIndex(Ue=>{var re;return Ue.stepType==="questions"||Ue.id==="questions"||((re=Ue.id)==null?void 0:re.startsWith("section-questions-"))})===c&&u[L]){const Ue=u[L].id;return Q.current=Date.now(),()=>{if(Q.current&&Ue){const re=Date.now()-Q.current;k(ye=>{const Fe=(ye[Ue]||0)+re,Ke=ge.current[Ue],Qe=be.current;if(Ke!=null&&Qe){const he=Qe.id||Qe.submissionId;Pe.saveAnswer(he,{questionId:Ue,answer:Ke,timeSpent:Math.floor(Fe/1e3)}).catch(je=>{logger.error("Error saving time on question change:",je)})}return{...ye,[Ue]:Fe}})}}}},[c,L,u,l==null?void 0:l.id,l==null?void 0:l.submissionId]);const qe=async()=>{var Be,Ue;try{x(!0),v(null);const re=await Pe.getStudentAssessment(t),ye=re.data||re;d(ye),N(ye.require_proctoring);const ke=await Pe.getAssessmentQuestions(t);logger.debug("Questions Response:",ke);const Fe=ke.data||ke;logger.debug("Raw Questions:",Fe);const Ke=Array.isArray(Fe)?Fe:Fe.questions||((Be=Fe.data)==null?void 0:Be.questions)||Fe.data||[],Qe=Array.isArray(Fe==null?void 0:Fe.sections)?Fe.sections:((Ue=Fe.data)==null?void 0:Ue.sections)||[];logger.debug("Normalized Questions:",Ke),logger.debug("Normalized Sections:",Qe);const he=(Ke||[]).map((tt,jt)=>({...tt,id:tt.id||tt.question_id||tt.uuid||String(jt+1),question_text:tt.question_text||tt.content||tt.title||tt.text||`Question ${jt+1}`,question_type:tt.question_type||tt.type||"multiple_choice",points:tt.points??1,options:tt.options||tt.choices||tt.options,section_id:tt.section_id||null}));if(f(he),m(Qe),Qe&&Qe.length>0)if(he.length>0&&he[0].section_id){const tt=Qe.findIndex(jt=>jt.id===he[0].section_id);tt>=0&&q(tt)}else q(0);const je=y?await Pe.retakeAssessment(t):await Pe.startAssessment(t),Ne=je.data||je;if(i(Ne),Ne.id||Ne.submissionId)try{const tt=Ne.id||Ne.submissionId,jt=`assessment_answers_${tt}`,dt=sessionStorage.getItem(jt);if(dt)try{let Pt;try{Pt=await Ea.decrypt(dt)}catch{Pt=JSON.parse(dt)}Pt.timestamp&&Date.now()-Pt.timestamp<3e5&&(U(Pt.answers||{}),Pt.timeSpent&&k(Pt.timeSpent))}catch(Pt){logger.error("Error parsing cached answers:",Pt)}const kt=localStorage.getItem("token")||localStorage.getItem("lmsToken"),gt={}.VITE_API_URL||"http://localhost:5000/api",wt=await fetch(`${gt}/student-assessments/${tt}/answers`,{headers:{Authorization:`Bearer ${kt}`,"Content-Type":"application/json"}});if(wt.ok){const Pt=wt.headers.get("content-type");if(!Pt||!Pt.includes("application/json"))throw logger.error("Response is not JSON:",Pt),new Error("Invalid response format from server");const bt=await wt.json();if(bt.data&&Array.isArray(bt.data)){const yt={},Ge={};if(bt.data.forEach(J=>{if(J.answer!==null&&J.answer!==void 0)try{const ce=typeof J.answer=="string"?JSON.parse(J.answer):J.answer;if(yt[J.question_id]=ce,J.time_spent!==null&&J.time_spent!==void 0&&(Ge[J.question_id]=(J.time_spent||0)*1e3),ce.code&&ce.language&&typeof Storage<"u"){const Je=`code_${J.question_id}`,ht={[ce.language]:ce.code};localStorage.setItem(Je,JSON.stringify(ht))}}catch{yt[J.question_id]=J.answer,J.time_spent!==null&&J.time_spent!==void 0&&(Ge[J.question_id]=(J.time_spent||0)*1e3)}}),U(yt),k(J=>({...J,...Ge})),typeof Storage<"u"){const J={answers:yt,timeSpent:Ge,timestamp:Date.now()};Ea.encrypt(J).then(ce=>{sessionStorage.setItem(jt,ce)}).catch(ce=>{logger.error("Error encrypting session data:",ce),sessionStorage.setItem(jt,JSON.stringify(J))})}}}}catch(tt){logger.error("Error loading existing answers:",tt)}T(tt=>new Set([...tt,"description"]))}catch(re){logger.error("Error initializing assessment:",re),v(re.message||"Failed to initialize assessment"),ut.error("Failed to load assessment")}finally{x(!1)}},ie=async()=>{if(X.current&&(a!=null&&a.proctoring_settings))try{const Be=a.proctoring_settings||{};if(Be.require_webcam&&!E.camera)try{(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(re=>re.stop()),I(re=>({...re,camera:!0}))}catch(Ue){logger.error("Camera permission denied:",Ue),ut.error("Camera permission is required for proctoring")}if(Be.require_microphone&&!E.microphone)try{(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(re=>re.stop()),I(re=>({...re,microphone:!0}))}catch(Ue){logger.error("Microphone permission denied:",Ue),ut.error("Microphone permission is required for proctoring")}X.current.initialize&&X.current.initialize()}catch(Be){logger.error("Error initializing proctoring:",Be),ut.error("Failed to initialize proctoring monitoring")}};A.useEffect(()=>()=>{Object.values(Oe.current).forEach(Be=>{Be&&clearTimeout(Be)}),Oe.current={},Ce.current.forEach(Be=>{Be&&clearTimeout(Be)}),Ce.current=[],K.current&&(clearInterval(K.current),K.current=null)},[]);const ae=(Be,Ue)=>{U(re=>({...re,[Be]:Ue})),Oe.current[Be]&&clearTimeout(Oe.current[Be]),Oe.current[Be]=setTimeout(()=>{l&&we(Be,Ue,!1),delete Oe.current[Be]},1e3)},we=async(Be,Ue,re=!1)=>{if(l&&Ue!=null){if(!$){if(O(ye=>[...ye.filter(Fe=>Fe.questionId!==Be),{questionId:Be,answer:Ue,timeSpent:Math.floor((z[Be]||0)/1e3),timestamp:Date.now()}]),typeof Storage<"u"){const ke=`offline_answer_${l.id||l.submissionId}_${Be}`,Fe={questionId:Be,answer:Ue,timeSpent:Math.floor((z[Be]||0)/1e3),timestamp:Date.now()};try{const Ke=await Ea.encrypt(Fe);localStorage.setItem(ke,Ke)}catch(Ke){logger.error("Error encrypting offline answer:",Ke),localStorage.setItem(ke,JSON.stringify(Fe))}}re&&ut.warning("Answer queued for saving (offline)");return}try{const ye=z[Be]||0;if(await Pe.saveAnswer(l.id||l.submissionId,{questionId:Be,answer:Ue,timeSpent:Math.floor(ye/1e3)}),O(ke=>ke.filter(Fe=>Fe.questionId!==Be)),typeof Storage<"u"){const Fe=`offline_answer_${l.id||l.submissionId}_${Be}`;localStorage.removeItem(Fe)}re&&ut.success("Answer saved")}catch(ye){logger.error("Error saving answer:",ye),!navigator.onLine||ye.message.includes("fetch")||ye.message.includes("network")?(O(ke=>[...ke.filter(Ke=>Ke.questionId!==Be),{questionId:Be,answer:Ue,timeSpent:Math.floor((z[Be]||0)/1e3),timestamp:Date.now()}]),re&&ut.warning("Answer queued for saving (offline)")):re&&ut.error("Failed to save answer")}}},ve=async()=>{if(!l)return;_(!0);const Be=[],Ue=l.id||l.submissionId;try{const re={...M};if(typeof Storage<"u")for(let Fe=0;Fe<localStorage.length;Fe++){const Ke=localStorage.key(Fe);if(Ke&&Ke.startsWith(`offline_answer_${Ue}_`))try{const Qe=localStorage.getItem(Ke);let he;try{he=await Ea.decrypt(Qe)}catch{he=JSON.parse(Qe)}he&&he.questionId&&he.answer!==void 0&&he.answer!==null&&(re[he.questionId]||(re[he.questionId]=he.answer))}catch(Qe){logger.error("Error parsing stored answer:",Qe)}}if(typeof Storage<"u"){const Fe=`assessment_answers_${Ue}`,Ke=sessionStorage.getItem(Fe);if(Ke)try{let Qe;try{Qe=await Ea.decrypt(Ke)}catch{Qe=JSON.parse(Ke)}Qe&&Qe.answers&&Object.entries(Qe.answers).forEach(([he,je])=>{!re[he]&&je!==void 0&&je!==null&&(re[he]=je)}),Qe&&Qe.timeSpent&&Object.entries(Qe.timeSpent).forEach(([he,je])=>{!z[he]&&je&&k(Ne=>({...Ne,[he]:je}))})}catch(Qe){logger.error("Error parsing sessionStorage answers:",Qe)}}const ye=10,ke=Object.entries(re).filter(([Fe,Ke])=>Ke!=null);for(let Fe=0;Fe<ke.length;Fe+=ye){const Qe=ke.slice(Fe,Fe+ye).map(async([je,Ne])=>{try{const tt=z[je]||0;return await Pe.saveAnswer(Ue,{questionId:je,answer:Ne,timeSpent:Math.floor(tt/1e3)}),{questionId:je,success:!0}}catch(tt){return logger.error(`Failed to save answer for question ${je}:`,tt),{questionId:je,success:!1}}});(await Promise.all(Qe)).forEach(je=>{je.success||Be.push(je.questionId)}),Fe+ye<ke.length&&await new Promise(je=>setTimeout(je,50))}F.length>0&&await st(),Be.length===0?ut.success("Auto-saved",{duration:2e3}):ut.error(`Failed to save ${Be.length} answer${Be.length>1?"s":""}`,{duration:3e3})}catch(re){logger.error("Auto-save error:",re),ut.error("Auto-save error")}finally{_(!1)}},He=Be=>{S(Ue=>{const re=new Set(Ue);return re.has(Be)?(re.delete(Be),ut.success("Question unflagged")):(re.add(Be),ut.success("Question flagged for review")),re})},$e=Be=>{Be>=0&&Be<u.length&&P(Be)},ue=async Be=>{if(Be>=0&&Be<h.length){if(ne.current)return;ne.current=!0;try{if(_(!0),Object.values(Oe.current).forEach(re=>clearTimeout(re)),Oe.current={},u[L]){const re=u[L].id;if(Q.current){const ye=Date.now()-Q.current;k(ke=>({...ke,[re]:(ke[re]||0)+ye})),Q.current=Date.now()}}await ve(),await new Promise(re=>{const ye=setTimeout(re,1e3);Ce.current.push(ye),setTimeout(()=>{Ce.current=Ce.current.filter(ke=>ke!==ye)},1100)})}catch(re){logger.error("Error saving before navigation:",re),ut.error("Failed to save answers. Please try again."),ne.current=!1;return}finally{_(!1)}q(Be);const Ue=u.filter(re=>re.section_id===h[Be].id);if(Ue.length>0){const re=u.findIndex(ye=>ye.id===Ue[0].id);P(re)}ne.current=!1}},oe=async Be=>{if(ne.current)return;ne.current=!0;try{if(_(!0),Object.values(Oe.current).forEach(re=>clearTimeout(re)),Oe.current={},u[L]){const re=u[L].id;if(Q.current){const ye=Date.now()-Q.current;k(ke=>({...ke,[re]:(ke[re]||0)+ye})),Q.current=Date.now()}}await ve(),await new Promise(re=>{const ye=setTimeout(re,1e3);Ce.current.push(ye),setTimeout(()=>{Ce.current=Ce.current.filter(ke=>ke!==ye)},1100)})}catch(re){logger.error("Error saving before step completion:",re),ut.error("Failed to save answers. Please try again."),ne.current=!1;return}finally{_(!1)}T(re=>new Set([...re,Be]));const Ue=pe.findIndex(re=>re.id===Be);if(Ue<pe.length-1){const re=pe[Ue+1];if((re==null?void 0:re.sectionIndex)!==void 0&&(q(re.sectionIndex),re.stepType==="questions")){const ye=u.filter(ke=>{var Fe;return ke.section_id===((Fe=h[re.sectionIndex])==null?void 0:Fe.id)});if(ye.length>0){const ke=u.findIndex(Fe=>Fe.id===ye[0].id);ke>=0&&P(ke)}}o(Ue+1)}ne.current=!1},_e=()=>{c>0&&o(c-1)},Me=()=>{window.confirm("Are you sure you want to cancel? Your progress will be lost.")&&r("/student/assessments")},ze=async()=>{try{if(_(!0),u[L]){const ye=u[L].id;if(Q.current){const ke=Date.now()-Q.current;k(Fe=>({...Fe,[ye]:(Fe[ye]||0)+ke}))}}await ve(),F.length>0&&await st(),await new Promise(ye=>setTimeout(ye,1e3));const Be=l.id||l.submissionId,Ue={...M};if(typeof Storage<"u")for(let ye=0;ye<localStorage.length;ye++){const ke=localStorage.key(ye);if(ke&&ke.startsWith(`offline_answer_${Be}_`))try{const Fe=localStorage.getItem(ke);let Ke;try{Ke=await Ea.decrypt(Fe)}catch{Ke=JSON.parse(Fe)}Ke&&Ke.questionId&&Ke.answer!==void 0&&Ke.answer!==null&&(Ue[Ke.questionId]=Ke.answer)}catch(Fe){logger.error("Error parsing stored answer:",Fe)}}for(const[ye,ke]of Object.entries(Ue))if(ke!=null)try{const Fe=z[ye]||0;await Pe.saveAnswer(Be,{questionId:ye,answer:ke,timeSpent:Math.floor(Fe/1e3)})}catch(Fe){logger.error(`Final save failed for question ${ye}:`,Fe)}await new Promise(ye=>{const ke=setTimeout(ye,1e3);Ce.current.push(ke),setTimeout(()=>{Ce.current=Ce.current.filter(Fe=>Fe!==ke)},1100)});const re=await Pe.submitAssessment(Be,{deviceInfo:{userAgent:navigator.userAgent,screenResolution:`${screen.width}x${screen.height}`,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone},answers:Ue,timeSpent:z});if(ut.success("Assessment submitted successfully! All answers have been saved."),typeof Storage<"u"){for(let ye=localStorage.length-1;ye>=0;ye--){const ke=localStorage.key(ye);ke&&ke.startsWith(`offline_answer_${Be}_`)&&localStorage.removeItem(ke)}sessionStorage.removeItem(`assessment_answers_${Be}`),sessionStorage.removeItem("assessment-timer-session"),sessionStorage.removeItem("assessment-timer-session-start"),sessionStorage.removeItem("assessment-timer-session-duration")}a.show_results_immediately?oe("submission"):r(`/student/assessments/${t}/results`)}catch(Be){logger.error("Error submitting assessment:",Be),ut.error(Be.message||"Failed to submit assessment. Please try again.")}finally{_(!1)}},Xe=async()=>{ut.error("Time is up! Assessment will be auto-submitted.");try{if(u[L]){const re=u[L].id;if(Q.current){const ye=Date.now()-Q.current;k(ke=>({...ke,[re]:(ke[re]||0)+ye}))}}await ve(),F.length>0&&await st(),await new Promise(re=>setTimeout(re,1e3));const Be=l.id||l.submissionId,Ue={...M};if(typeof Storage<"u")for(let re=0;re<localStorage.length;re++){const ye=localStorage.key(re);if(ye&&ye.startsWith(`offline_answer_${Be}_`))try{const ke=JSON.parse(localStorage.getItem(ye));if(ke&&ke.questionId&&ke.answer!==void 0&&ke.answer!==null){Ue[ke.questionId]=ke.answer;const Fe=z[ke.questionId]||ke.timeSpent*1e3||0;await Pe.saveAnswer(Be,{questionId:ke.questionId,answer:ke.answer,timeSpent:Math.floor(Fe/1e3)})}}catch(ke){logger.error("Error parsing stored answer:",ke)}}await new Promise(re=>{const ye=setTimeout(re,1e3);Ce.current.push(ye),setTimeout(()=>{Ce.current=Ce.current.filter(ke=>ke!==ye)},1100)}),await ze()}catch(Be){console.error("Error in auto-submit on time up:",Be);try{await ze()}catch(Ue){console.error("Error in final submission attempt:",Ue),ut.error("Failed to auto-submit. Please contact support.")}}};if(p)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading assessment..."})]})});if(g)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ms,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Assessment"}),e.jsx("p",{className:"text-gray-600 mb-4",children:g}),e.jsx(ee,{onClick:()=>r("/student/assessments"),children:"Back to Assessments"})]})});if(!a||!l)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ms,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Assessment Not Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"The assessment you're looking for doesn't exist or you don't have access to it."}),e.jsx(ee,{onClick:()=>r("/student/assessments"),children:"Back to Assessments"})]})});const Ve=()=>{if(!Ae)return null;const Be=Ae.component,Ue={assessment:a,submission:l,questions:u,sections:h,answers:M,setAnswers:ae,currentQuestionIndex:L,setCurrentQuestionIndex:$e,currentSectionIndex:B,setCurrentSectionIndex:ue,timeSpent:z,flaggedQuestions:R,flagQuestion:He,saveAnswer:we,saving:w,onComplete:()=>oe(Ae.id),onBack:_e,onCancel:Me,onSubmit:ze,onTimeUp:Xe,proctoringEnabled:j,proctoringPermissions:E,setProctoringPermissions:I,proctoringViolations:D,setProctoringViolations:V,isRetake:y,onShowSidebar:de,setShowSidebar:xe,theme:s,isDarkMode:ft,timerRef:te};if(Ae.stepType==="section-start"){const re=h[Ae.sectionIndex];return e.jsx(Be,{...Ue,section:re,sectionIndex:Ae.sectionIndex,totalSections:h.length,onStart:()=>{q(Ae.sectionIndex),oe(Ae.id)}})}if(Ae.stepType==="section-completion"){const re=h[Ae.sectionIndex],ye=u.filter(ke=>ke.section_id===re.id);return e.jsx(Be,{...Ue,section:re,sectionIndex:Ae.sectionIndex,totalSections:h.length,sectionQuestions:ye,isSavingBeforeContinue:w,saving:w,onContinue:()=>{oe(Ae.id)},onBack:()=>{const ke=pe.findIndex(Fe=>Fe.id===`section-questions-${Ae.sectionIndex}`);ke>=0&&(q(Ae.sectionIndex),o(ke))},onNavigateToQuestion:(ke,Fe)=>{const Ke=pe.findIndex(Qe=>Qe.id===`section-questions-${Fe}`);if(Ke>=0){q(Fe),o(Ke);const Qe=u.filter(he=>he.section_id===h[Fe].id);if(Qe[ke]){const he=u.findIndex(je=>je.id===Qe[ke].id);he>=0&&P(he)}}}})}return Ae.stepType==="questions"&&Ae.sectionIndex!==void 0?(B!==Ae.sectionIndex&&q(Ae.sectionIndex),e.jsx(Be,{...Ue,onSectionComplete:()=>{const re=pe.findIndex(ye=>ye.id===`section-completion-${Ae.sectionIndex}`);re>=0&&o(re)}})):e.jsx(Be,{...Ue})},ot=(Ae==null?void 0:Ae.stepType)==="questions"||pe.findIndex(Be=>Be.id==="questions")===c,xt=ot||(Ae==null?void 0:Ae.stepType)==="section-start"||(Ae==null?void 0:Ae.stepType)==="section-completion"||(Ae==null?void 0:Ae.id)&&Ae.id.startsWith("section-"),ft=s==="dark";return e.jsxs("div",{className:`h-screen flex flex-col overflow-hidden ${ft?"dark bg-gray-900":"bg-gray-50"}`,children:[j&&ot&&l&&(a==null?void 0:a.proctoring_settings)&&e.jsx(VC,{ref:X,submissionId:l.id||l.submissionId,proctoringSettings:a.proctoring_settings||{},onViolation:Be=>{logger.debug("Proctoring violation:",Be),V(Ue=>[...Ue,Be]),(Be.type==="tab_switch"||Be.type==="window_blur")&&G(Ue=>Ue+1),ut.error(`Proctoring violation: ${Be.description||Be.type}`,{duration:5e3})}}),xt&&e.jsx("div",{className:"bg-white shadow-sm border-b flex-shrink-0 z-40",children:e.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16 gap-4",children:[e.jsx("div",{className:"flex items-center gap-4 min-w-0 flex-1",children:e.jsx("h1",{className:"text-lg font-semibold text-gray-900 truncate",children:(a==null?void 0:a.title)||"Assessment"})}),e.jsxs("div",{className:"flex items-center gap-4 flex-shrink-0",children:[e.jsx(UC,{ref:te,duration:a!=null&&a.time_limit_minutes?a.time_limit_minutes*60:3600,onTimeUp:Xe,className:"text-base font-mono",submissionId:(l==null?void 0:l.id)||(l==null?void 0:l.submissionId)},"assessment-timer"),w?e.jsxs("div",{className:"flex items-center gap-2 text-amber-600 dark:text-amber-400",children:[e.jsx(Tr,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{className:"text-sm",children:"Saving..."})]}):$?e.jsxs("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-400",children:[e.jsx(yo,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Saved"})]}):e.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400",children:[e.jsx(xo,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Offline"})]}),j&&e.jsxs(et,{className:`${D.length>0?"text-orange-600 bg-orange-50 border-orange-200":"text-green-600 bg-green-50 border-green-200"} border`,children:[e.jsx(Ss,{className:"h-3 w-3 mr-1"}),D.length>0?`Flagged (${D.length})`:"Live"]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[j&&((at=a==null?void 0:a.proctoring_settings)==null?void 0:at.tab_switching_detection)&&e.jsxs("div",{className:"flex items-center space-x-1 px-2 py-1 bg-orange-50 border border-orange-200 rounded-md",children:[e.jsx("span",{className:"text-xs font-medium text-orange-700",children:"Tab Switches:"}),e.jsx(et,{variant:"outline",className:"bg-orange-100 text-orange-700 border-orange-300 font-semibold",title:"Number of times you switched tabs or lost window focus",children:H})]}),e.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>n(s==="dark"?"light":"dark"),className:"h-8 w-8 p-0",title:s==="dark"?"Switch to light mode":"Switch to dark mode",children:s==="dark"?e.jsx(w0,{className:"h-4 w-4 text-gray-300"}):e.jsx(b0,{className:"h-4 w-4 text-gray-600"})}),e.jsxs(ee,{onClick:ze,className:"bg-green-600 hover:bg-green-700 text-white relative",size:"sm",children:[e.jsx(Yt,{className:"h-4 w-4 mr-1"}),"Submit",D.length>0&&e.jsx(et,{variant:"destructive",className:"ml-2 bg-red-600 hover:bg-red-700 text-white",title:`${D.length} proctoring violation${D.length>1?"s":""} detected`,children:D.length})]})]})]})})}),xt&&j&&D.length>0&&e.jsxs(pr,{variant:"destructive",className:"mx-4 mt-2 mb-0 z-30",children:[e.jsx(Ms,{className:"h-4 w-4"}),e.jsxs(gr,{children:[e.jsx("strong",{children:"Warning:"})," ",D.length," proctoring violation",D.length>1?"s":""," detected during your assessment.",D.length>=3&&e.jsx("span",{className:"font-semibold",children:" Multiple violations may result in disqualification."})]})]}),ot?e.jsx("div",{className:"flex-1 overflow-hidden min-h-0",children:Ve()}):e.jsx(e.Fragment,{children:(Ae==null?void 0:Ae.id)==="terms"||(Ae==null?void 0:Ae.stepType)==="section-start"||(Ae==null?void 0:Ae.stepType)==="section-completion"?e.jsx("div",{className:"flex-1 overflow-hidden min-h-0",children:Ve()}):e.jsx("div",{className:"flex-1 overflow-y-auto min-h-0",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsx(dv,{mode:"wait",children:e.jsx(os.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:Ve()},c)})})})})]})},xq=({onSelectProject:t,onCreateNew:r,onEditProject:s,refreshKey:n,showCreateButton:c=!1})=>{const[o,a]=A.useState([]),[d,l]=A.useState(!0),[i,u]=A.useState({search:"",status:"all",project_type:"all",college_id:"all"}),[f,h]=A.useState([]);A.useEffect(()=>{m(),p()},[i,n]);const m=async()=>{try{l(!0);const y={...i,status:i.status==="all"?"":i.status,project_type:i.project_type==="all"?"":i.project_type,college_id:i.college_id==="all"?"":i.college_id},b=await Pe.getProjects(y);b.success&&a(b.data||[])}catch(y){ut.error("Failed to load projects"),console.error(y)}finally{l(!1)}},p=async()=>{try{const y=await Pe.getColleges();if(y.success){const b=y.data;b&&Array.isArray(b.colleges)?h(b.colleges):Array.isArray(b)?h(b):h([])}else h([])}catch(y){console.error("Failed to load colleges:",y),h([])}},x=async y=>{if(confirm("Are you sure you want to delete this project?"))try{await Pe.deleteProject(y),ut.success("Project deleted successfully"),m()}catch{ut.error("Failed to delete project")}},g=y=>{var b;return!y.allocated_trainers_count||y.allocated_trainers_count===0?{status:"faculty_allocation",label:"Allocate Faculty",color:"bg-blue-500",action:"allocate_faculty"}:y.allocated_trainers_count>0&&(!y.sessions_count||y.sessions_count===0)?{status:"scheduling",label:"Create Schedule",color:"bg-yellow-500",action:"create_schedule"}:y.sessions_count>0&&y.status!=="live"&&y.status!=="completed"?{status:"admin_allocation",label:"Ready to Start",color:"bg-orange-500",action:"start_project"}:{status:y.status||"draft",label:((b=y.status||"draft")==null?void 0:b.replace("_"," "))||"Draft",color:v(y.status||"draft"),action:null}},v=y=>({draft:"bg-gray-500",faculty_allocation:"bg-blue-500",scheduling:"bg-yellow-500",admin_allocation:"bg-orange-500",live:"bg-green-500",completed:"bg-purple-500",cancelled:"bg-red-500"})[y]||"bg-gray-500";return d?e.jsx("div",{className:"text-center py-8",children:"Loading projects..."}):e.jsxs("div",{className:"space-y-4",children:[e.jsx(Re,{children:e.jsx(De,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[e.jsx(hn,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(Ye,{placeholder:"Search projects...",value:i.search,onChange:y=>u({...i,search:y.target.value}),className:"pl-10"})]}),e.jsxs(At,{value:i.status,onValueChange:y=>u({...i,status:y}),children:[e.jsx(St,{className:"w-[160px]",children:e.jsx(Rt,{placeholder:"All Statuses"})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"all",children:"All Statuses"}),e.jsx(Te,{value:"draft",children:"Draft"}),e.jsx(Te,{value:"faculty_allocation",children:"Faculty Allocation"}),e.jsx(Te,{value:"scheduling",children:"Scheduling"}),e.jsx(Te,{value:"admin_allocation",children:"Admin Allocation"}),e.jsx(Te,{value:"live",children:"Live"}),e.jsx(Te,{value:"completed",children:"Completed"})]})]}),e.jsxs(At,{value:i.project_type,onValueChange:y=>u({...i,project_type:y}),children:[e.jsx(St,{className:"w-[160px]",children:e.jsx(Rt,{placeholder:"All Types"})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"all",children:"All Types"}),e.jsx(Te,{value:"company_specific",children:"Company Specific"}),e.jsx(Te,{value:"crt",children:"CRT"}),e.jsx(Te,{value:"custom",children:"Custom"})]})]}),e.jsxs(At,{value:i.college_id,onValueChange:y=>u({...i,college_id:y}),children:[e.jsx(St,{className:"w-[180px]",children:e.jsx(Rt,{placeholder:"All Colleges"})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"all",children:"All Colleges"}),Array.isArray(f)&&f.map(y=>e.jsx(Te,{value:String(y.id),children:y.name},y.id))]})]}),c&&e.jsxs(ee,{onClick:r,children:[e.jsx(vs,{className:"mr-2 h-4 w-4"}),"Create Project"]})]})})}),e.jsx(Re,{children:e.jsx(De,{className:"pt-6",children:o.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-500 mb-4",children:"No projects found"}),e.jsx(ee,{onClick:r,children:"Create Your First Project"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs($o,{children:[e.jsx(Bo,{children:e.jsxs(_n,{children:[e.jsx(Xt,{children:"Project Name"}),e.jsx(Xt,{children:"College"}),e.jsx(Xt,{children:"Type"}),e.jsx(Xt,{children:"Status"}),e.jsx(Xt,{children:"Start Date"}),e.jsx(Xt,{children:"End Date"}),e.jsx(Xt,{children:"Hours"}),e.jsx(Xt,{children:"Trainers"}),e.jsx(Xt,{children:"Sessions"}),e.jsx(Xt,{className:"text-right",children:"Actions"})]})}),e.jsx(zo,{children:o.map(y=>{var b;return e.jsxs(_n,{className:"hover:bg-muted/50",children:[e.jsx(ns,{className:"font-medium",children:y.name}),e.jsx(ns,{children:y.college_name||"N/A"}),e.jsx(ns,{children:e.jsx("span",{className:"capitalize",children:((b=y.project_type)==null?void 0:b.replace("_"," "))||"N/A"})}),e.jsx(ns,{children:(()=>{const C=g(y);return e.jsx(et,{className:`${C.color} text-white text-xs px-2 py-0.5`,title:C.action?`Click "Select" to ${C.label.toLowerCase()}`:"Current Status",children:C.label})})()}),e.jsx(ns,{children:y.start_date?new Date(y.start_date).toLocaleDateString():"N/A"}),e.jsx(ns,{children:y.end_date?new Date(y.end_date).toLocaleDateString():"N/A"}),e.jsxs(ns,{children:[y.total_hours_required||0,"h"]}),e.jsx(ns,{children:y.allocated_trainers_count||0}),e.jsx(ns,{children:y.sessions_count||0}),e.jsx(ns,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(ee,{variant:"default",size:"sm",onClick:()=>{t(y)},title:"Select Project",children:"Select"}),e.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>{s&&s(y)},title:"Edit Project",children:e.jsx(wr,{className:"h-4 w-4"})}),e.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>x(y.id),className:"text-red-600 hover:text-red-700",title:"Delete Project",children:e.jsx(Ds,{className:"h-4 w-4"})})]})})]},y.id)})})]})})})})]})},yq=({open:t,onClose:r,project:s,onSuccess:n,viewMode:c=!1})=>{const[o,a]=A.useState(!1),[d,l]=A.useState([]),[i,u]=A.useState([]),[f,h]=A.useState([]),[m,p]=A.useState({name:"",college_id:"",project_type:"",total_hours_required:"",start_date:"",end_date:"",trainers_required:1,admins_required:0,mode:"online",preferred_timings:{start:"09:00",end:"17:00"},project_manager_id:"",spoc_id:"",description:"",department_ids:[],batch_ids:[]});A.useEffect(()=>{t&&(g(),s?(p({name:s.name||"",college_id:s.college_id||"",project_type:s.project_type||"",total_hours_required:s.total_hours_required||"",start_date:s.start_date||"",end_date:s.end_date||"",trainers_required:s.trainers_required||1,admins_required:s.admins_required||0,mode:s.mode||"online",preferred_timings:s.preferred_timings?JSON.parse(s.preferred_timings):{start:"09:00",end:"17:00"},project_manager_id:s.project_manager_id||"",spoc_id:s.spoc_id||"",description:s.description||"",department_ids:[],batch_ids:[]}),s.college_id&&(v(s.college_id),y(s.college_id))):x())},[t,s]);const x=()=>{p({name:"",college_id:"",project_type:"",total_hours_required:"",start_date:"",end_date:"",trainers_required:1,admins_required:0,mode:"online",preferred_timings:{start:"09:00",end:"17:00"},project_manager_id:"",spoc_id:"",description:"",department_ids:[],batch_ids:[]})},g=async()=>{try{const T=await Pe.getColleges();if(T.success){const M=T.data;M&&Array.isArray(M.colleges)?l(M.colleges):Array.isArray(M)?l(M):l([])}else l([])}catch(T){console.error("Failed to load colleges:",T),l([])}},v=async T=>{try{const M=await Pe.getCollegeDepartments(T);M.success&&u(M.data||[])}catch(M){console.error("Failed to load departments:",M)}},y=async T=>{try{const M=await Pe.getCollegeBatches(T);M.success&&h(M.data||[])}catch(M){console.error("Failed to load batches:",M)}},b=T=>{p({...m,college_id:T,department_ids:[],batch_ids:[]}),T&&(v(T),y(T))},C=async T=>{if(T.preventDefault(),!c){a(!0);try{s?(await Pe.updateProject(s.id,m),ut.success("Project updated successfully")):(await Pe.createProject(m),ut.success("Project created successfully")),n()}catch(M){ut.error(M.message||"Failed to save project")}finally{a(!1)}}};return e.jsx(Ht,{open:t,onOpenChange:r,children:e.jsxs(Zt,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Jt,{children:[e.jsx(es,{children:c?"View Project":s?"Edit Project":"Create New Project"}),e.jsx(ps,{children:c?"View project details":s?"Update project details":"Fill in the details to create a new project"})]}),e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"name",children:"Project Name *"}),e.jsx(Ye,{id:"name",value:m.name,onChange:T=>p({...m,name:T.target.value}),required:!0,disabled:c,readOnly:c})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"college_id",children:"College *"}),e.jsxs(At,{value:m.college_id,onValueChange:b,required:!0,disabled:c,children:[e.jsx(St,{children:e.jsx(Rt,{placeholder:"Select college"})}),e.jsx(Ct,{children:d.map(T=>e.jsx(Te,{value:T.id,children:T.name},T.id))})]})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"project_type",children:"Project Type *"}),e.jsxs(At,{value:m.project_type,onValueChange:T=>p({...m,project_type:T}),required:!0,disabled:c,children:[e.jsx(St,{children:e.jsx(Rt,{placeholder:"Select type"})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"company_specific",children:"Company Specific"}),e.jsx(Te,{value:"crt",children:"CRT"}),e.jsx(Te,{value:"custom",children:"Custom"})]})]})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"total_hours_required",children:"Total Hours Required *"}),e.jsx(Ye,{id:"total_hours_required",type:"number",value:m.total_hours_required,onChange:T=>p({...m,total_hours_required:T.target.value}),required:!0,min:"1",disabled:c,readOnly:c})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"start_date",children:"Start Date *"}),e.jsx(Ye,{id:"start_date",type:"date",value:m.start_date,onChange:T=>p({...m,start_date:T.target.value}),required:!0,disabled:c,readOnly:c})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"end_date",children:"End Date *"}),e.jsx(Ye,{id:"end_date",type:"date",value:m.end_date,onChange:T=>p({...m,end_date:T.target.value}),required:!0,disabled:c,readOnly:c})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"mode",children:"Mode *"}),e.jsxs(At,{value:m.mode,onValueChange:T=>p({...m,mode:T}),required:!0,disabled:c,children:[e.jsx(St,{children:e.jsx(Rt,{})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"online",children:"Online"}),e.jsx(Te,{value:"offline",children:"Offline"}),e.jsx(Te,{value:"hybrid",children:"Hybrid"})]})]})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"trainers_required",children:"Trainers Required"}),e.jsx(Ye,{id:"trainers_required",type:"number",value:m.trainers_required,onChange:T=>p({...m,trainers_required:parseInt(T.target.value)}),min:"1",disabled:c,readOnly:c})]})]}),m.college_id&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(Se,{children:"Departments"}),e.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:i.map(T=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:m.department_ids.includes(T.id),onChange:M=>{M.target.checked?p({...m,department_ids:[...m.department_ids,T.id]}):p({...m,department_ids:m.department_ids.filter(U=>U!==T.id)})},disabled:c}),e.jsx("span",{children:T.name})]},T.id))})]}),e.jsxs("div",{children:[e.jsx(Se,{children:"Batches"}),e.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:f.map(T=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:m.batch_ids.includes(T.id),onChange:M=>{M.target.checked?p({...m,batch_ids:[...m.batch_ids,T.id]}):p({...m,batch_ids:m.batch_ids.filter(U=>U!==T.id)})},disabled:c}),e.jsx("span",{children:T.name})]},T.id))})]})]}),e.jsxs("div",{children:[e.jsx(Se,{htmlFor:"description",children:"Description"}),e.jsx(ms,{id:"description",value:m.description,onChange:T=>p({...m,description:T.target.value}),rows:4,disabled:c,readOnly:c})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(ee,{type:"button",variant:"outline",onClick:r,children:c?"Close":"Cancel"}),!c&&e.jsx(ee,{type:"submit",disabled:o,children:o?"Saving...":s?"Update":"Create"})]})]})]})})},vq=({selectedProject:t})=>{const[r,s]=A.useState("month"),[n,c]=A.useState(new Date),[o,a]=A.useState([]),[d,l]=A.useState(!1);A.useEffect(()=>{t&&i()},[r,n,t]);const i=async()=>{if(t)try{l(!0);const p=u(),x=f(),g={project_id:t.id,start_date:p.toISOString().split("T")[0],end_date:x.toISOString().split("T")[0]},v=await Pe.getCalendarEvents(g);v.success&&a(v.data||[])}catch(p){ut.error("Failed to load calendar events"),console.error(p)}finally{l(!1)}},u=()=>{const p=new Date(n);return r==="day"?p:r==="week"?(p.setDate(p.getDate()-p.getDay()),p):r==="month"?(p.setDate(1),p):(r==="year"&&p.setMonth(0,1),p)},f=()=>{const p=new Date(n);return r==="day"?p:r==="week"?(p.setDate(p.getDate()+(6-p.getDay())),p):r==="month"?(p.setMonth(p.getMonth()+1),p.setDate(0),p):(r==="year"&&p.setMonth(11,31),p)},h=p=>{const x=new Date(n);r==="day"?x.setDate(x.getDate()+(p==="next"?1:-1)):r==="week"?x.setDate(x.getDate()+(p==="next"?7:-7)):r==="month"?x.setMonth(x.getMonth()+(p==="next"?1:-1)):r==="year"&&x.setFullYear(x.getFullYear()+(p==="next"?1:-1)),c(x)},m=()=>{if(r==="day")return n.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});if(r==="week"){const p=u(),x=f();return`${p.toLocaleDateString()} - ${x.toLocaleDateString()}`}else{if(r==="month")return n.toLocaleDateString("en-US",{year:"numeric",month:"long"});if(r==="year")return n.getFullYear().toString()}return n.toLocaleDateString()};return t?e.jsx("div",{className:"space-y-4",children:e.jsxs(Re,{children:[e.jsxs(lt,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(fr,{className:"h-5 w-5"}),"Calendar - ",t.name]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(At,{value:r,onValueChange:s,children:[e.jsx(St,{className:"w-32",children:e.jsx(Rt,{})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"day",children:"Day"}),e.jsx(Te,{value:"week",children:"Week"}),e.jsx(Te,{value:"month",children:"Month"}),e.jsx(Te,{value:"year",children:"Year"})]})]}),e.jsx(ee,{variant:"outline",size:"icon",onClick:()=>h("prev"),children:e.jsx(Hd,{className:"h-4 w-4"})}),e.jsx(ee,{variant:"outline",size:"icon",onClick:()=>c(new Date),children:"Today"}),e.jsx(ee,{variant:"outline",size:"icon",onClick:()=>h("next"),children:e.jsx(Oa,{className:"h-4 w-4"})})]})]}),e.jsx("p",{className:"text-sm text-gray-600",children:m()})]}),e.jsx(De,{children:d?e.jsx("div",{className:"text-center py-8",children:"Loading calendar..."}):e.jsxs("div",{className:"space-y-2",children:[o.map(p=>e.jsxs("div",{className:"p-3 border rounded-lg hover:bg-gray-50",style:{borderLeftColor:p.color_code||"#3B82F6",borderLeftWidth:"4px"},children:[e.jsx("div",{className:"font-medium",children:p.title||p.session_title}),e.jsxs("div",{className:"text-sm text-gray-600",children:[new Date(p.start_time).toLocaleString()," - ",new Date(p.end_time).toLocaleString()]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[p.project_name,"  ",p.batch_name,"  ",p.faculty_name]})]},p.id)),o.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No events scheduled"})]})})]})}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Please select a project to view calendar"})},bq=({selectedProject:t})=>{const[r,s]=A.useState([]),[n,c]=A.useState([]),[o,a]=A.useState({}),[d,l]=A.useState(new Set),[i,u]=A.useState({}),[f,h]=A.useState({}),[m,p]=A.useState(!1),x=A.useRef(null);A.useState(!1);const[g,v]=A.useState(null),[y,b]=A.useState([]),[C,T]=A.useState(-1),[M,U]=A.useState("#000000"),[L,P]=A.useState("#ffffff"),[B,q]=A.useState([]),[z,k]=A.useState(!1),[R,S]=A.useState(""),[w,_]=A.useState(null),[j,N]=A.useState({top:0,left:0}),[E,I]=A.useState(null),[D,V]=A.useState(!1),[H,G]=A.useState({});A.useEffect(()=>{t&&(W(),O(),K(),$())},[t]);const $=async()=>{if(t)try{const ue=await Pe.getProjectFaculty(t.id);ue.success&&q(ue.data||[])}catch(ue){console.error("Failed to load allocated trainers:",ue)}},Y=A.useCallback(()=>{if(C>0){const ue=C-1;T(ue),a(y[ue].gridData),u(y[ue].formats),ut.success("Undone")}else ut.error("Nothing to undo")},[y,C]),F=A.useCallback(()=>{if(C<y.length-1){const ue=C+1;T(ue),a(y[ue].gridData),u(y[ue].formats),ut.success("Redone")}else ut.error("Nothing to redo")},[y,C]);A.useEffect(()=>{const ue=oe=>{var Me;!(((Me=document.activeElement)==null?void 0:Me.contentEditable)==="true")&&(oe.ctrlKey||oe.metaKey)&&(oe.key==="z"||oe.key==="Z"?oe.shiftKey?(oe.preventDefault(),F()):(oe.preventDefault(),Y()):(oe.key==="y"||oe.key==="Y")&&(oe.preventDefault(),F()))};return window.addEventListener("keydown",ue),()=>{window.removeEventListener("keydown",ue)}},[Y,F]),A.useEffect(()=>{const ue=oe=>{z&&!oe.target.closest(".absolute.z-50")&&(k(!1),_(null))};if(z)return document.addEventListener("mousedown",ue),()=>{document.removeEventListener("mousedown",ue)}},[z]);const O=()=>{if(!(t!=null&&t.start_date)||!(t!=null&&t.end_date))return;const ue=new Date(t.start_date),oe=new Date(t.end_date),_e=[];for(let Me=new Date(ue);Me<=oe;Me.setDate(Me.getDate()+1))_e.push(new Date(Me));c(_e)},W=async()=>{if(t!=null&&t.college_id)try{const ue=await Pe.getBatches({college_id:t.college_id});ue.success&&s(ue.data||[])}catch(ue){console.error("Failed to load batches:",ue),ut.error("Failed to load batches")}},K=async()=>{if(t)try{p(!0);const ue=await Pe.getSessions({project_id:t.id});if(ue.success){const oe=ue.data||[],_e={};oe.forEach(Me=>{const ze=new Date(Me.start_time).toISOString().split("T")[0],Xe=new Date(Me.start_time).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),Ve=new Date(Me.end_time).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),ot=Xe.includes("AM")||Xe.includes("PM")&&parseInt(Xe.split(":")[0])<12?"morning":"afternoon",xt=`${ze}_${Me.batch_id}_${ot}`;_e[xt]={title:Me.title||"",time:`${Xe} - ${Ve}`,faculty:Me.faculty_name||"",faculty_id:Me.faculty_id||null,topic:Me.topic||""}}),a(_e)}}catch{ut.error("Failed to load sessions")}finally{p(!1)}},Q=(ue,oe,_e)=>`${ue.toISOString().split("T")[0]}_${oe}_${_e}`,X=(ue,oe,_e)=>{var Xe;if(Ae(ue))return oe===((Xe=r[0])==null?void 0:Xe.id)&&_e==="morning"?"Sunday":"";const Me=Q(ue,oe,_e),ze=o[Me];return ze?`${ze.title}
${ze.time}
${ze.faculty}`:""},te=(ue,oe,_e,Me)=>{ue.preventDefault();const ze=Q(oe,_e,Me);if(oe.getDay()===0){const Ve=new Set;r.forEach(ot=>{Ve.add(Q(oe,ot.id,"morning")),Ve.add(Q(oe,ot.id,"afternoon"))}),l(Ve),v({date:oe,batchId:_e,period:Me});return}if(ue.ctrlKey||ue.metaKey){const Ve=new Set(d);Ve.has(ze)?Ve.delete(ze):Ve.add(ze),l(Ve)}else if(ue.shiftKey&&g){const Ve=new Set,ot=n.findIndex(Ke=>Ke.toISOString().split("T")[0]===g.date.toISOString().split("T")[0]),xt=n.findIndex(Ke=>Ke.toISOString().split("T")[0]===oe.toISOString().split("T")[0]),ft=r.findIndex(Ke=>Ke.id===g.batchId),at=r.findIndex(Ke=>Ke.id===_e),Be=g.period,Ue=Me,re=Math.min(ot,xt),ye=Math.max(ot,xt),ke=Math.min(ft,at),Fe=Math.max(ft,at);for(let Ke=re;Ke<=ye;Ke++)for(let Qe=ke;Qe<=Fe;Qe++)Ke===re&&Qe===ke?(Ve.add(Q(n[Ke],r[Qe].id,Be)),Be!==Ue&&Ke===ye&&Qe===Fe&&Ve.add(Q(n[Ke],r[Qe].id,Ue))):Ke===ye&&Qe===Fe?Ve.add(Q(n[Ke],r[Qe].id,Ue)):(Ve.add(Q(n[Ke],r[Qe].id,"morning")),Ve.add(Q(n[Ke],r[Qe].id,"afternoon")));l(Ve)}else l(new Set([ze])),v({date:oe,batchId:_e,period:Me})},de=(ue,oe,_e,Me)=>{ue.preventDefault();const ze=ue.target;ze.contentEditable=!0,ze.focus()},xe=(ue,oe,_e,Me)=>{const ze=ue.target;ze.contentEditable=!1;const Xe=Q(oe,_e,Me),Ve={...o},ot=ze.textContent.split(`
`).filter(xt=>xt.trim());ot.length>0?Ve[Xe]={title:ot[0]||"",time:ot[1]||"",faculty:ot[2]||"",faculty_id:null,topic:ot[3]||""}:delete Ve[Xe],Ce(),a(Ve)},ne=async(ue,oe,_e,Me)=>{const ze=ue.target;if(ue.key==="Escape"&&z){ue.preventDefault(),k(!1),_(null),S("");return}if(ue.key==="Enter"&&!ue.shiftKey&&!z){ue.preventDefault(),ue.target.blur();return}(!z||ue.key!=="Escape"&&ue.key!=="Enter")&&setTimeout(()=>{ge(ze,oe,_e,Me)},10)},ge=(ue,oe,_e,Me)=>{const ze=ue.textContent||"",Xe=window.getSelection();if(Xe.rangeCount>0){const ot=Xe.getRangeAt(0).startOffset,xt=ze.substring(0,ot),ft=xt.lastIndexOf("@");if(ft!==-1){const at=xt.substring(ft+1);if(!at.includes(" ")&&!at.includes(`
`)){S(at),_({date:oe,batchId:_e,period:Me}),k(!0);const Be=ue.getBoundingClientRect();N({top:Be.bottom+5,left:Be.left})}else k(!1),_(null),S("")}else k(!1),_(null),S("")}},be=ue=>{if(!ue||!w){k(!1),_(null),S("");return}const oe=document.querySelector(`[data-cell-key="${Q(w.date,w.batchId,w.period)}"]`);if(!oe){k(!1),_(null),S("");return}k(!1),S("");const _e=w;_(null),oe.contentEditable=!0;const Me=oe.textContent||"",ze=Me.lastIndexOf("@");if(ze!==-1){const Xe=Me.substring(0,ze),Ve=Me.substring(ze+1),ot=Ve.search(/[\s\n]/),xt=ot===-1?Ve.length:ot,ft=Ve.substring(xt),at=Xe+ue.faculty_name+ft;oe.textContent=at,setTimeout(()=>{oe.focus();const ye=document.createRange(),ke=window.getSelection();try{if(oe.firstChild){const Fe=Xe.length+ue.faculty_name.length;ye.setStart(oe.firstChild,Math.min(Fe,oe.firstChild.length||0)),ye.collapse(!0),ke.removeAllRanges(),ke.addRange(ye)}}catch{oe.focus()}},0);const Be=Q(_e.date,_e.batchId,_e.period),Ue=at.split(`
`).filter(ye=>ye.trim()),re={...o};re[Be]={title:Ue[0]||"",time:Ue[1]||"",faculty:ue.faculty_name,faculty_id:ue.faculty_id||ue.id,topic:Ue[3]||""},a(re),Ce(),(ue.faculty_id||ue.id)&&Ie(_e.date,_e.batchId,_e.period,ue.faculty_id||ue.id)}},Ie=async(ue,oe,_e,Me)=>{if(!(!Me||!ue))try{const ze=ue.toISOString().split("T")[0],Xe=o[Q(ue,oe,_e)];if(!Xe||!Xe.time)return;const[Ve,ot]=Xe.time.split(" - "),xt=new Date(`${ze}T${Ve}`),ft=new Date(`${ze}T${ot}`),at=await Pe.checkConflicts({faculty_id:Me,start_time:xt.toISOString(),end_time:ft.toISOString(),project_id:t.id});if(at.success&&at.data&&at.data.length>0){const Be=Q(ue,oe,_e);G(Ue=>({...Ue,[Be]:at.data})),ut.error("Conflict detected: Trainer has overlapping session")}else{const Be=Q(ue,oe,_e);G(Ue=>{const re={...Ue};return delete re[Be],re})}}catch(ze){console.error("Error checking conflicts:",ze)}},Ce=()=>{const ue=y.slice(0,C+1);ue.push({gridData:JSON.parse(JSON.stringify(o)),formats:JSON.parse(JSON.stringify(i))}),b(ue),T(ue.length-1)},Oe=(ue,oe)=>{const _e={...i};d.forEach(Me=>{_e[Me]||(_e[Me]={}),_e[Me][ue]=oe}),Ce(),u(_e)},Ee=()=>{if(d.size<2){ut.error("Select at least 2 cells to merge");return}const ue=Array.from(d),oe=ue[0],_e={...f};_e[oe]=ue,Ce(),h(_e),ut.success("Cells merged")},pe=()=>{const ue={...f};d.forEach(oe=>{ue[oe]&&delete ue[oe]}),Ce(),h(ue),ut.success("Cells split")},Ae=ue=>ue.getDay()===0,st=(ue,oe,_e)=>{var ot;const Me=Q(ue,oe,_e),ze=i[Me]||{};if(Object.values(f).some(xt=>xt.includes(Me)&&xt[0]!==Me))return{display:"none"};const Ve=Ae(ue);return Ve&&((ot=r[0])==null||ot.id),{fontWeight:ze.bold?"bold":"normal",fontStyle:ze.italic?"italic":"normal",textDecoration:ze.underline?"underline":"none",textAlign:ze.align||(Ve?"center":"left"),backgroundColor:Ve?"#f3f4f6":ze.bgColor||L,color:ze.textColor||M}},qe=async()=>{try{const ue={project_id:t.id,dates:n.map(ze=>ze.toISOString().split("T")[0]),batches:r.map(ze=>({id:ze.id,name:ze.name})),grid_data:o,formats:i,merged_cells:f},oe=new Blob([JSON.stringify(ue,null,2)],{type:"application/json"}),_e=window.URL.createObjectURL(oe),Me=document.createElement("a");Me.href=_e,Me.setAttribute("download",`schedule_${t.name}_${new Date().toISOString().split("T")[0]}.json`),document.body.appendChild(Me),Me.click(),Me.remove(),ut.success("Schedule exported successfully")}catch{ut.error("Failed to export schedule")}},ie=async()=>{var ue;if(!t||B.length===0){ut.error("Please allocate trainers to the project first");return}try{p(!0);const oe=await Pe.autoGenerateSchedule(t.id);oe.success&&(ut.success(`Generated ${((ue=oe.data)==null?void 0:ue.length)||0} sessions`),K())}catch(oe){ut.error(oe.message||"Failed to generate schedule")}finally{p(!1)}},ae=(ue,oe,_e,Me)=>{ue.preventDefault();const ze=Q(oe,_e,Me);I({date:oe,batchId:_e,period:Me,key:ze}),V(!0),ue.dataTransfer.effectAllowed="copy"},we=ue=>{ue.preventDefault(),ue.dataTransfer.dropEffect="copy"},ve=(ue,oe,_e,Me)=>{if(ue.preventDefault(),!E)return;const ze=Q(oe,_e,Me),Xe=E.key;if(Xe===ze)return;const Ve=o[Xe];if(Ve){const ot={...o};ot[ze]={...Ve},a(ot),Ce(),Ve.faculty_id&&Ie(oe,_e,Me,Ve.faculty_id)}V(!1),I(null)},He=ue=>{if(d.size===0){ut.error("Please select cells to auto-fill");return}const oe=Array.from(d),_e=oe[0],Me=o[_e];if(!Me){ut.error("Source cell is empty");return}const ze={...o},[Xe,Ve,ot]=_e.split("_"),xt=n.findIndex(at=>at.toISOString().split("T")[0]===Xe),ft=r.findIndex(at=>at.id===Ve);oe.slice(1).forEach(at=>{const[Be,Ue,re]=at.split("_"),ye=n.findIndex(he=>he.toISOString().split("T")[0]===Be),ke=r.findIndex(he=>he.id===Ue),Fe=ye-xt,Ke=ke-ft;let Qe={...Me};if(ue==="down"&&Fe>0){const he=xt+Fe;if(he<n.length){const je=Q(n[he-1],Ue,re);o[je]&&(Qe={...o[je]})}}else if(ue==="right"&&Ke>0){const he=ft+Ke;if(he<r.length){const je=Q(n[ye],r[he-1].id,re);o[je]&&(Qe={...o[je]})}}if(ze[at]=Qe,Qe.faculty_id){const he=n[ye];Ie(he,Ue,re,Qe.faculty_id)}}),a(ze),Ce(),ut.success("Cells auto-filled")},$e=async()=>{try{p(!0);const ue=[];Object.keys(o).forEach(oe=>{var Ve;const[_e,Me,ze]=oe.split("_"),Xe=o[oe];if(Xe.title&&Xe.time)try{let ot=Xe.time.split(" - ")[0].trim(),xt=((Ve=Xe.time.split(" - ")[1])==null?void 0:Ve.trim())||"";const ft=at=>{if(!at)return null;if(at.includes(":")){const[Be,Ue]=at.split(":");return`${Be.padStart(2,"0")}:${Ue.padStart(2,"0")}:00`}return at};if(ot=ft(ot),xt=ft(xt),ot&&xt){const at=new Date(`${_e}T${ot}`),Be=new Date(`${_e}T${xt}`);if(isNaN(at.getTime())||isNaN(Be.getTime())){const Ue=ot.match(/(\d+):(\d+)\s*(AM|PM)/i),re=xt.match(/(\d+):(\d+)\s*(AM|PM)/i);if(Ue&&re){let ye=parseInt(Ue[1]);const ke=parseInt(Ue[2]),Fe=Ue[3].toUpperCase();let Ke=parseInt(re[1]);const Qe=parseInt(re[2]),he=re[3].toUpperCase();Fe==="PM"&&ye!==12&&(ye+=12),Fe==="AM"&&ye===12&&(ye=0),he==="PM"&&Ke!==12&&(Ke+=12),he==="AM"&&Ke===12&&(Ke=0);const je=new Date(`${_e}T${ye.toString().padStart(2,"0")}:${ke.toString().padStart(2,"0")}:00`),Ne=new Date(`${_e}T${Ke.toString().padStart(2,"0")}:${Qe.toString().padStart(2,"0")}:00`);ue.push({project_id:t.id,batch_id:Me,faculty_id:Xe.faculty_id||null,title:Xe.title,topic:Xe.topic||"",start_time:je.toISOString(),end_time:Ne.toISOString(),mode:t.mode||"online"})}}else ue.push({project_id:t.id,batch_id:Me,faculty_id:Xe.faculty||null,title:Xe.title,topic:Xe.topic||"",start_time:at.toISOString(),end_time:Be.toISOString(),mode:t.mode||"online"})}}catch(ot){console.error(`Error parsing time for ${oe}:`,ot)}});for(const oe of ue)try{await Pe.createSession(oe)}catch(_e){console.error("Error saving session:",_e)}ut.success(`Schedule saved successfully (${ue.length} sessions)`),K()}catch(ue){ut.error("Failed to save schedule"),console.error(ue)}finally{p(!1)}};return t?e.jsxs(Re,{children:[e.jsx(lt,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(mt,{children:["Scheduling - ",t.name]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ee,{variant:"outline",size:"sm",onClick:ie,disabled:m||B.length===0,children:[e.jsx(nm,{className:"mr-2 h-4 w-4"}),"Auto Generate"]}),e.jsxs(ee,{variant:"outline",size:"sm",onClick:qe,children:[e.jsx(Zs,{className:"mr-2 h-4 w-4"}),"Export"]}),e.jsxs(ee,{size:"sm",onClick:$e,disabled:m,children:[e.jsx(no,{className:"mr-2 h-4 w-4"}),m?"Saving...":"Save"]})]})]})}),e.jsxs(De,{className:"relative",children:[e.jsxs("div",{className:"flex items-center gap-2 p-2 border-b mb-4 flex-wrap",children:[e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>{var ue;return Oe("bold",!((ue=i[Array.from(d)[0]])!=null&&ue.bold))},children:e.jsx(O7,{className:"h-4 w-4"})}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>{var ue;return Oe("italic",!((ue=i[Array.from(d)[0]])!=null&&ue.italic))},children:e.jsx(K7,{className:"h-4 w-4"})}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>{var ue;return Oe("underline",!((ue=i[Array.from(d)[0]])!=null&&ue.underline))},children:e.jsx(w9,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>Oe("align","left"),children:e.jsx(R7,{className:"h-4 w-4"})}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>Oe("align","center"),children:e.jsx(T7,{className:"h-4 w-4"})}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>Oe("align","right"),children:e.jsx(P7,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx(ee,{variant:"outline",size:"sm",onClick:Ee,children:e.jsx(s9,{className:"h-4 w-4"})}),e.jsx(ee,{variant:"outline",size:"sm",onClick:pe,children:e.jsx(p9,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsxs(X5,{children:[e.jsx(Z5,{asChild:!0,children:e.jsx(ee,{variant:"outline",size:"sm",children:e.jsx(W7,{className:"h-4 w-4"})})}),e.jsx(Pv,{className:"w-64",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{children:"Background Color"}),e.jsx(Ye,{type:"color",value:L,onChange:ue=>{P(ue.target.value),Oe("bgColor",ue.target.value)}}),e.jsx(Se,{children:"Text Color"}),e.jsx(Ye,{type:"color",value:M,onChange:ue=>{U(ue.target.value),Oe("textColor",ue.target.value)}})]})})]}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx(ee,{variant:"outline",size:"sm",onClick:Y,disabled:C<=0,title:"Undo (Ctrl+Z)",children:e.jsx(j9,{className:"h-4 w-4"})}),e.jsx(ee,{variant:"outline",size:"sm",onClick:F,disabled:C>=y.length-1,title:"Redo (Ctrl+Y or Ctrl+Shift+Z)",children:e.jsx(i9,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>He("down"),disabled:d.size===0,title:"Auto Fill Down",children:"Fill "}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>He("right"),disabled:d.size===0,title:"Auto Fill Right",children:"Fill "})]}),z&&w&&e.jsxs("div",{className:"fixed z-[9999] bg-white border rounded-lg shadow-xl",style:{top:`${j.top}px`,left:`${j.left}px`,width:"320px",maxHeight:"400px",display:"flex",flexDirection:"column"},onMouseDown:ue=>ue.stopPropagation(),onClick:ue=>ue.stopPropagation(),children:[e.jsx("div",{className:"p-3 border-b",children:e.jsxs("div",{className:"relative",children:[e.jsx(hn,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(Ye,{type:"text",placeholder:"Search trainers...",value:R,onChange:ue=>{ue.stopPropagation(),S(ue.target.value)},onKeyDown:ue=>{if(ue.key==="Escape")k(!1),_(null),S("");else if(ue.key==="Enter"){const oe=B.filter(_e=>{var Me,ze;return!R||((Me=_e.faculty_name)==null?void 0:Me.toLowerCase().includes(R.toLowerCase()))||((ze=_e.faculty_email)==null?void 0:ze.toLowerCase().includes(R.toLowerCase()))});oe.length>0&&be(oe[0])}},className:"pl-8",autoFocus:!0})]})}),e.jsxs("div",{className:"overflow-y-auto max-h-[300px]",children:[B.filter(ue=>{var oe,_e;return!R||((oe=ue.faculty_name)==null?void 0:oe.toLowerCase().includes(R.toLowerCase()))||((_e=ue.faculty_email)==null?void 0:_e.toLowerCase().includes(R.toLowerCase()))}).map(ue=>e.jsx("div",{className:"px-3 py-2 hover:bg-blue-50 cursor-pointer border-b last:border-b-0 transition-colors",onMouseDown:oe=>{oe.preventDefault(),oe.stopPropagation(),be(ue)},onClick:oe=>{oe.preventDefault(),oe.stopPropagation(),be(ue)},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(as,{className:"h-4 w-4 text-gray-500 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm truncate",children:ue.faculty_name}),e.jsx("div",{className:"text-xs text-gray-500 truncate",children:ue.faculty_email})]})]})},ue.faculty_id||ue.id)),B.filter(ue=>{var oe,_e;return!R||((oe=ue.faculty_name)==null?void 0:oe.toLowerCase().includes(R.toLowerCase()))||((_e=ue.faculty_email)==null?void 0:_e.toLowerCase().includes(R.toLowerCase()))}).length===0&&e.jsx("div",{className:"px-3 py-8 text-center text-gray-500 text-sm",children:R?`No trainers found for "${R}"`:"No trainers available"})]})]}),e.jsx("div",{className:"overflow-auto max-h-[600px] border",children:e.jsxs("table",{className:"w-full border-collapse",ref:x,children:[e.jsxs("thead",{className:"sticky top-0 bg-white z-10",children:[e.jsxs("tr",{children:[e.jsx("th",{className:"border p-2 bg-gray-50 sticky left-0 z-20 min-w-[120px]",children:"Date"}),r.map(ue=>e.jsx(Lt.Fragment,{children:e.jsx("th",{colSpan:"2",className:"border p-2 bg-gray-100 text-center",children:ue.name})},ue.id))]}),e.jsxs("tr",{children:[e.jsx("th",{className:"border p-2 bg-gray-50 sticky left-0 z-20"}),r.map(ue=>e.jsxs(Lt.Fragment,{children:[e.jsx("th",{className:"border p-2 bg-gray-50 text-center min-w-[150px]",children:"Morning"}),e.jsx("th",{className:"border p-2 bg-gray-50 text-center min-w-[150px]",children:"Afternoon"})]},ue.id))]})]}),e.jsx("tbody",{children:n.map((ue,oe)=>{var Me,ze;const _e=Ae(ue);return _e&&((Me=r[0])==null||Me.id),e.jsxs("tr",{children:[e.jsx("td",{className:"border p-2 bg-gray-50 sticky left-0 z-10 font-medium",children:ue.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),_e?e.jsx("td",{colSpan:r.length*2,className:"border p-2 min-h-[80px] bg-gray-100 text-center font-semibold cursor-cell",style:st(ue,(ze=r[0])==null?void 0:ze.id,"morning"),onClick:Xe=>{var Ve;return te(Xe,ue,(Ve=r[0])==null?void 0:Ve.id,"morning")},contentEditable:!1,suppressContentEditableWarning:!0,children:"Sunday"}):r.map(Xe=>e.jsxs(Lt.Fragment,{children:[e.jsxs("td",{"data-cell-key":Q(ue,Xe.id,"morning"),className:`border p-2 min-h-[80px] cursor-cell whitespace-pre-line relative transition-all ${d.has(Q(ue,Xe.id,"morning"))?"bg-blue-50 border-blue-400 border-2 shadow-md ring-2 ring-blue-300 ring-offset-1":"hover:bg-gray-50"} ${H[Q(ue,Xe.id,"morning")]?"bg-red-100 ring-2 ring-red-500":""}`,style:st(ue,Xe.id,"morning"),onClick:Ve=>te(Ve,ue,Xe.id,"morning"),onDoubleClick:Ve=>de(Ve,ue,Xe.id),onBlur:Ve=>xe(Ve,ue,Xe.id,"morning"),onKeyDown:Ve=>ne(Ve,ue,Xe.id,"morning"),onDragStart:Ve=>ae(Ve,ue,Xe.id,"morning"),onDragOver:we,onDrop:Ve=>ve(Ve,ue,Xe.id,"morning"),draggable:!0,contentEditable:!1,suppressContentEditableWarning:!0,children:[X(ue,Xe.id,"morning"),H[Q(ue,Xe.id,"morning")]&&e.jsx("span",{className:"absolute top-1 right-1 text-xs text-red-600",title:"Conflict detected",children:""})]}),e.jsxs("td",{"data-cell-key":Q(ue,Xe.id,"afternoon"),className:`border p-2 min-h-[80px] cursor-cell whitespace-pre-line relative transition-all ${d.has(Q(ue,Xe.id,"afternoon"))?"bg-blue-50 border-blue-400 border-2 shadow-md ring-2 ring-blue-300 ring-offset-1":"hover:bg-gray-50"} ${H[Q(ue,Xe.id,"afternoon")]?"bg-red-100 ring-2 ring-red-500":""}`,style:st(ue,Xe.id,"afternoon"),onClick:Ve=>te(Ve,ue,Xe.id,"afternoon"),onDoubleClick:Ve=>de(Ve,ue,Xe.id),onBlur:Ve=>xe(Ve,ue,Xe.id,"afternoon"),onKeyDown:Ve=>ne(Ve,ue,Xe.id,"afternoon"),onDragStart:Ve=>ae(Ve,ue,Xe.id,"afternoon"),onDragOver:we,onDrop:Ve=>ve(Ve,ue,Xe.id,"afternoon"),draggable:!0,contentEditable:!1,suppressContentEditableWarning:!0,children:[X(ue,Xe.id,"afternoon"),H[Q(ue,Xe.id,"afternoon")]&&e.jsx("span",{className:"absolute top-1 right-1 text-xs text-red-600",title:"Conflict detected",children:""})]})]},Xe.id))]},oe)})})]})})]})]}):e.jsx(Re,{children:e.jsx(De,{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Please select a project to view scheduling"})})})},wq=({selectedProject:t})=>{const[r,s]=A.useState("faculty"),[n,c]=A.useState([]),[o,a]=A.useState([]),[d,l]=A.useState(!1),[i,u]=A.useState(!1),[f,h]=A.useState(null),[m,p]=A.useState(!1),[x,g]=A.useState({faculty_id:"",training_type:"",employment_type:"freelancer"});A.useEffect(()=>{t&&(v(),y())},[t]);const v=async()=>{if(t)try{const T=await Pe.getProjectFaculty(t.id);T.success&&c(T.data||[])}catch{ut.error("Failed to load faculty allocations")}},y=async()=>{if(t)try{const T=await Pe.getRecommendedTrainers(t.id);T.success&&a(T.data||[])}catch(T){console.error("Failed to load recommended trainers:",T)}},b=async()=>{var T,M;if(t){if(!x.faculty_id){ut.error("Please select a faculty member");return}if(!x.training_type){ut.error("Please select a training type");return}if(!x.employment_type){ut.error("Please select an employment type");return}try{p(!0);const U=await Pe.allocateFaculty(t.id,{faculty_id:x.faculty_id,training_type:x.training_type,employment_type:x.employment_type});U.success?(ut.success("Faculty allocated successfully"),l(!1),g({faculty_id:"",training_type:"",employment_type:"freelancer"}),v()):ut.error(U.message||"Failed to allocate faculty")}catch(U){console.error("Allocation error:",U),ut.error(((M=(T=U.response)==null?void 0:T.data)==null?void 0:M.message)||U.message||"Failed to allocate faculty")}finally{p(!1)}}},C=async()=>{if(f)try{p(!0),await Pe.replaceFaculty(f.id,{new_faculty_id:x.faculty_id,reason:x.reason||"Faculty replacement"}),ut.success("Faculty replaced successfully"),u(!1),h(null),v()}catch(T){ut.error(T.message||"Failed to replace faculty")}finally{p(!1)}};return t?e.jsxs("div",{className:"space-y-4",children:[e.jsxs(Dr,{value:r,onValueChange:s,children:[e.jsxs(Ir,{children:[e.jsx(zt,{value:"faculty",children:"Faculty Allocation"}),e.jsx(zt,{value:"scheduling",children:"Scheduling"})]}),e.jsxs(Kt,{value:"faculty",className:"space-y-4",children:[e.jsxs(Re,{children:[e.jsx(lt,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(mt,{children:["Faculty Allocations - ",t.name]}),e.jsxs(ee,{onClick:()=>l(!0),children:[e.jsx(as,{className:"mr-2 h-4 w-4"}),"Allocate Faculty"]})]})}),e.jsx(De,{children:e.jsxs("div",{className:"space-y-4",children:[n.map(T=>{var M;return e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:T.faculty_name}),e.jsx("div",{className:"text-sm text-gray-600",children:T.faculty_email}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(et,{children:T.employment_type}),e.jsx(et,{variant:"outline",children:T.allocation_status})]}),e.jsxs("div",{className:"mt-2 text-sm",children:[e.jsx("span",{className:"font-medium",children:"Training Type:"}),e.jsx(et,{variant:"outline",className:"ml-2 capitalize",children:((M=T.training_type)==null?void 0:M.replace("_"," "))||T.training_type||"N/A"})]})]}),e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>{h(T),u(!0)},children:"Replace"})]})},T.id)}),n.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No faculty allocated yet"})]})})]}),o.length>0&&e.jsxs(Re,{children:[e.jsx(lt,{children:e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(Nc,{className:"h-5 w-5"}),"Recommended Trainers"]})}),e.jsx(De,{children:e.jsx("div",{className:"space-y-2",children:o.slice(0,5).map(T=>{var M;return e.jsxs("div",{className:"flex justify-between items-center p-2 border rounded",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:T.name}),e.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-2",children:[e.jsx(Kd,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),T.rating||"N/A","  ",T.remaining_hours||0,"h available"]})]}),e.jsxs(et,{children:["Score: ",(M=T.score)==null?void 0:M.toFixed(1)]})]},T.id)})})})]})]}),e.jsx(Kt,{value:"scheduling",className:"space-y-4",children:e.jsx(bq,{selectedProject:t})})]}),e.jsx(Ht,{open:d,onOpenChange:l,children:e.jsxs(Zt,{children:[e.jsx(Jt,{children:e.jsx(es,{children:"Allocate Faculty"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Se,{children:"Select Faculty"}),e.jsxs(At,{value:x.faculty_id,onValueChange:T=>g({...x,faculty_id:T}),children:[e.jsx(St,{children:e.jsx(Rt,{placeholder:"Select faculty"})}),e.jsx(Ct,{children:o.map(T=>e.jsxs(Te,{value:T.id,children:[T.name," (Rating: ",T.rating||"N/A",")"]},T.id))})]})]}),e.jsxs("div",{children:[e.jsx(Se,{children:"Type of Training *"}),e.jsxs(At,{value:x.training_type,onValueChange:T=>g({...x,training_type:T}),required:!0,children:[e.jsx(St,{children:e.jsx(Rt,{placeholder:"Select training type"})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"technical",children:"Technical"}),e.jsx(Te,{value:"aptitude",children:"Aptitude"}),e.jsx(Te,{value:"verbal",children:"Verbal"}),e.jsx(Te,{value:"softskills",children:"Soft Skills"})]})]})]}),e.jsxs("div",{children:[e.jsx(Se,{children:"Employment Type"}),e.jsxs(At,{value:x.employment_type,onValueChange:T=>g({...x,employment_type:T}),children:[e.jsx(St,{children:e.jsx(Rt,{})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"freelancer",children:"Freelancer"}),e.jsx(Te,{value:"full_time",children:"Full Time"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(ee,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsx(ee,{onClick:b,disabled:m,children:m?"Allocating...":"Allocate"})]})]})]})}),e.jsx(Ht,{open:i,onOpenChange:u,children:e.jsxs(Zt,{children:[e.jsx(Jt,{children:e.jsx(es,{children:"Replace Faculty"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Se,{children:"Current Faculty"}),e.jsx(Ye,{value:(f==null?void 0:f.faculty_name)||"",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(Se,{children:"New Faculty"}),e.jsxs(At,{value:x.faculty_id,onValueChange:T=>g({...x,faculty_id:T}),children:[e.jsx(St,{children:e.jsx(Rt,{placeholder:"Select new faculty"})}),e.jsx(Ct,{children:o.map(T=>e.jsx(Te,{value:T.id,children:T.name},T.id))})]})]}),e.jsxs("div",{children:[e.jsx(Se,{children:"Reason"}),e.jsx(Ye,{value:x.reason||"",onChange:T=>g({...x,reason:T.target.value}),placeholder:"Reason for replacement"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(ee,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),e.jsx(ee,{onClick:C,disabled:m,children:m?"Replacing...":"Replace"})]})]})]})})]}):e.jsx(Re,{children:e.jsx(De,{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Please select a project to view faculty and scheduling"})})})},jq=({selectedProject:t})=>{const[r,s]=A.useState([]),[n,c]=A.useState(null),[o,a]=A.useState([]),[d,l]=A.useState(!1),[i,u]=A.useState({project_id:"",batch_id:"",start_date:"",end_date:""});A.useEffect(()=>{f()},[i]),A.useEffect(()=>{n&&h()},[n]);const f=async()=>{try{l(!0);const g=await Pe.getSessions(i);g.success&&s(g.data||[])}catch{ut.error("Failed to load sessions")}finally{l(!1)}},h=async()=>{var g;if(n)try{const v=await Pe.getSessionAttendance(n.id);v.success&&a(((g=v.data)==null?void 0:g.attendance)||[])}catch{ut.error("Failed to load attendance")}},m=async(g,v)=>{if(n)try{const y=o.map(b=>({student_id:b.student_id,status:b.student_id===g?v:b.status||"absent"}));await Pe.markAttendance(n.id,y),ut.success("Attendance marked successfully"),h()}catch{ut.error("Failed to mark attendance")}},p=g=>{switch(g){case"present":return e.jsx(Yt,{className:"h-5 w-5 text-green-500"});case"late":return e.jsx(Ps,{className:"h-5 w-5 text-yellow-500"});case"absent":return e.jsx(Mr,{className:"h-5 w-5 text-red-500"});default:return null}},x=g=>{switch(g){case"present":return"bg-green-100 text-green-800";case"late":return"bg-yellow-100 text-yellow-800";case"absent":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs(Re,{className:"lg:col-span-1",children:[e.jsx(lt,{children:e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(as,{className:"h-5 w-5"}),"Sessions"]})}),e.jsx(De,{children:e.jsxs("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:[r.map(g=>e.jsxs("div",{className:`p-3 border rounded-lg cursor-pointer hover:bg-gray-50 ${(n==null?void 0:n.id)===g.id?"bg-blue-50 border-blue-500":""}`,onClick:()=>c(g),children:[e.jsx("div",{className:"font-medium",children:g.title}),e.jsx("div",{className:"text-sm text-gray-600",children:new Date(g.start_time).toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-500",children:g.batch_name})]},g.id)),r.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No sessions found"})]})})]}),e.jsxs(Re,{className:"lg:col-span-2",children:[e.jsx(lt,{children:e.jsx(mt,{children:n?`Attendance - ${n.title}`:"Select a Session"})}),e.jsx(De,{children:n?e.jsxs("div",{className:"space-y-2",children:[o.map(g=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[p(g.status),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:g.student_name}),e.jsx("div",{className:"text-sm text-gray-600",children:g.student_roll})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(et,{className:x(g.status),children:g.status||"Not Marked"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(ee,{size:"sm",variant:g.status==="present"?"default":"outline",onClick:()=>m(g.student_id,"present"),children:"Present"}),e.jsx(ee,{size:"sm",variant:g.status==="late"?"default":"outline",onClick:()=>m(g.student_id,"late"),children:"Late"}),e.jsx(ee,{size:"sm",variant:g.status==="absent"?"default":"outline",onClick:()=>m(g.student_id,"absent"),children:"Absent"})]})]})]},g.student_id)),o.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No students found"})]}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Please select a session to view attendance"})})]})]})},_q=({selectedProject:t})=>{var x,g,v;const[r,s]=A.useState([]),[n,c]=A.useState(null),[o,a]=A.useState(!1),[d,l]=A.useState(!1),[i,u]=A.useState({project_id:"",feedback_type:"student_to_faculty",to_user_id:"",rating_overall:0,rating_professionalism:0,rating_content_relevance:0,rating_communication:0,textual_feedback:"",suggestions:""});A.useEffect(()=>{f(),h()},[]);const f=async()=>{try{const y=await Pe.getFeedback();y.success&&s(y.data||[])}catch{ut.error("Failed to load feedback")}},h=async()=>{try{const y=await Pe.getFeedbackAnalytics();y.success&&c(y.data)}catch(y){console.error("Failed to load analytics:",y)}},m=async()=>{try{l(!0),await Pe.submitFeedback(i),ut.success("Feedback submitted successfully"),a(!1),f(),h()}catch{ut.error("Failed to submit feedback")}finally{l(!1)}},p=y=>Array.from({length:5}).map((b,C)=>e.jsx(Kd,{className:`h-4 w-4 ${C<y?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},C));return e.jsxs("div",{className:"space-y-4",children:[n&&e.jsxs(Re,{children:[e.jsx(lt,{children:e.jsx(mt,{children:"Feedback Analytics"})}),e.jsx(De,{children:e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Overall Rating"}),e.jsx("div",{className:"text-2xl font-bold",children:((x=n.avg_overall_rating)==null?void 0:x.toFixed(2))||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Professionalism"}),e.jsx("div",{className:"text-2xl font-bold",children:((g=n.avg_professionalism)==null?void 0:g.toFixed(2))||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Content Relevance"}),e.jsx("div",{className:"text-2xl font-bold",children:((v=n.avg_content_relevance)==null?void 0:v.toFixed(2))||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Feedback"}),e.jsx("div",{className:"text-2xl font-bold",children:n.total_feedback||0})]})]})})]}),e.jsxs(Re,{children:[e.jsx(lt,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(tN,{className:"h-5 w-5"}),"Feedback"]}),e.jsx(ee,{onClick:()=>a(!0),children:"Submit Feedback"})]})}),e.jsx(De,{children:e.jsxs("div",{className:"space-y-4",children:[r.map(y=>{var b;return e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:y.from_user_name}),e.jsx("div",{className:"text-sm text-gray-600",children:(b=y.feedback_type)==null?void 0:b.replace("_"," ")}),y.rating_overall&&e.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[p(Math.round(y.rating_overall)),e.jsx("span",{className:"ml-2 text-sm",children:y.rating_overall.toFixed(1)})]}),y.textual_feedback&&e.jsx("div",{className:"mt-2 text-sm",children:y.textual_feedback})]}),e.jsx("div",{className:"text-sm text-gray-500",children:new Date(y.submitted_at).toLocaleDateString()})]})},y.id)}),r.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No feedback submitted yet"})]})})]}),e.jsx(Ht,{open:o,onOpenChange:a,children:e.jsxs(Zt,{className:"max-w-2xl",children:[e.jsx(Jt,{children:e.jsx(es,{children:"Submit Feedback"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Se,{children:"Feedback Type"}),e.jsxs(At,{value:i.feedback_type,onValueChange:y=>u({...i,feedback_type:y}),children:[e.jsx(St,{children:e.jsx(Rt,{})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"student_to_faculty",children:"Student to Faculty"}),e.jsx(Te,{value:"faculty_to_batch",children:"Faculty to Batch"}),e.jsx(Te,{value:"college_to_company",children:"College to Company"}),e.jsx(Te,{value:"end_of_course",children:"End of Course"})]})]})]}),e.jsxs("div",{children:[e.jsx(Se,{children:"Overall Rating"}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(y=>e.jsx(Kd,{className:`h-8 w-8 cursor-pointer ${y<=i.rating_overall?"fill-yellow-400 text-yellow-400":"text-gray-300"}`,onClick:()=>u({...i,rating_overall:y})},y))})]}),e.jsxs("div",{children:[e.jsx(Se,{children:"Feedback"}),e.jsx(ms,{value:i.textual_feedback,onChange:y=>u({...i,textual_feedback:y.target.value}),rows:4})]}),e.jsxs("div",{children:[e.jsx(Se,{children:"Suggestions"}),e.jsx(ms,{value:i.suggestions,onChange:y=>u({...i,suggestions:y.target.value}),rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(ee,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),e.jsx(ee,{onClick:m,disabled:d,children:d?"Submitting...":"Submit"})]})]})]})})]})},Nq=({selectedProject:t})=>{const[r,s]=A.useState("project-progress"),[n,c]=A.useState([]),[o,a]=A.useState(!1),[d,l]=A.useState({start_date:"",end_date:""});A.useEffect(()=>{i()},[r,d]);const i=async()=>{try{a(!0);let x;switch(r){case"project-progress":x=await Pe.getProjectProgressReport(d);break;case"trainer-utilization":x=await Pe.getTrainerUtilizationReport(d);break;case"college-attendance":x=await Pe.getCollegeAttendanceReport({...d,format:"json"});break;case"invoice-summary":x=await Pe.getInvoiceSummaryReport(d);break;default:return}x.success&&c(x.data||[])}catch{ut.error("Failed to load report")}finally{a(!1)}},u=async()=>{try{let x;switch(r){case"college-attendance":x=await Pe.getCollegeAttendanceReport({...d,format:"excel"});break;default:ut.error("Export not available for this report type");return}const g=window.URL.createObjectURL(new Blob([x])),v=document.createElement("a");v.href=g,v.setAttribute("download",`${r}.xlsx`),document.body.appendChild(v),v.click(),v.remove(),ut.success("Report exported successfully")}catch{ut.error("Failed to export report")}},f=()=>e.jsx("div",{className:"space-y-2",children:n.map(x=>{var g;return e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:x.project_name}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Progress: ",x.progress_percentage,"%  ",x.completed_sessions,"/",x.total_sessions," sessions"]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Hours: ",(g=x.hours_delivered)==null?void 0:g.toFixed(1),"/",x.total_hours_required]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-medium",children:x.status}),e.jsxs("div",{className:"text-xs text-gray-500",children:[x.allocated_trainers_count," trainers"]})]})]})},x.id)})}),h=()=>e.jsx("div",{className:"space-y-2",children:n.map(x=>{var g;return e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:x.faculty_name}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Utilization: ",x.utilization_percentage,"%  ",(g=x.hours_worked)==null?void 0:g.toFixed(1),"h worked"]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[x.active_projects," active projects  ",x.completed_sessions," completed sessions"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-medium",children:["Rating: ",x.rating||"N/A"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[x.remaining_hours,"h remaining"]})]})]})},x.faculty_id)})}),m=()=>e.jsx("div",{className:"space-y-2",children:n.map(x=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:x.college_name}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Attendance: ",x.attendance_percentage,"%"]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[x.present_count," present  ",x.absent_count," absent  ",x.late_count," late"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-medium",children:[x.total_sessions," sessions"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[x.unique_students," students"]})]})]})},x.college_id))}),p=()=>{var g,v,y,b,C;if(n.length===0)return e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No invoices found"});const x=((g=n[0])==null?void 0:g.totals)||{};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(Re,{children:[e.jsx(lt,{children:e.jsx(mt,{children:"Summary"})}),e.jsx(De,{children:e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Invoices"}),e.jsx("div",{className:"text-2xl font-bold",children:x.total_invoices||0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Hours"}),e.jsx("div",{className:"text-2xl font-bold",children:x.total_hours||0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Amount"}),e.jsxs("div",{className:"text-2xl font-bold",children:["",((v=x.total_net_payable)==null?void 0:v.toFixed(2))||"0.00"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total TDS"}),e.jsxs("div",{className:"text-2xl font-bold",children:["",((y=x.total_tds)==null?void 0:y.toFixed(2))||"0.00"]})]})]})})]}),e.jsx("div",{className:"space-y-2",children:(C=(b=n[0])==null?void 0:b.invoices)==null?void 0:C.map(T=>{var M;return e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:T.invoice_number}),e.jsx("div",{className:"text-sm text-gray-600",children:T.faculty_name}),e.jsx("div",{className:"text-sm text-gray-500",children:T.college_name})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-medium",children:["",(M=T.net_payable)==null?void 0:M.toFixed(2)]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[T.total_hours,"h"]})]})]})},T.id)})})]})};return e.jsx("div",{className:"space-y-4",children:e.jsxs(Re,{children:[e.jsx(lt,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(Rr,{className:"h-5 w-5"}),"Reports & Analytics"]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(ee,{variant:"outline",onClick:u,children:[e.jsx(Zs,{className:"mr-2 h-4 w-4"}),"Export"]})})]})}),e.jsxs(De,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx(Se,{children:"Report Type"}),e.jsxs(At,{value:r,onValueChange:s,children:[e.jsx(St,{children:e.jsx(Rt,{})}),e.jsxs(Ct,{children:[e.jsx(Te,{value:"project-progress",children:"Project Progress"}),e.jsx(Te,{value:"trainer-utilization",children:"Trainer Utilization"}),e.jsx(Te,{value:"college-attendance",children:"College Attendance"}),e.jsx(Te,{value:"invoice-summary",children:"Invoice Summary"})]})]})]}),e.jsxs("div",{children:[e.jsx(Se,{children:"Start Date"}),e.jsx(Ye,{type:"date",value:d.start_date,onChange:x=>l({...d,start_date:x.target.value})})]}),e.jsxs("div",{children:[e.jsx(Se,{children:"End Date"}),e.jsx(Ye,{type:"date",value:d.end_date,onChange:x=>l({...d,end_date:x.target.value})})]})]}),o?e.jsx("div",{className:"text-center py-8",children:"Loading report..."}):e.jsxs(e.Fragment,{children:[r==="project-progress"&&f(),r==="trainer-utilization"&&h(),r==="college-attendance"&&m(),r==="invoice-summary"&&p(),n.length===0&&!o&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No data available"})]})]})]})})},Sq=({selectedProject:t})=>{const{user:r}=qs(),[s,n]=A.useState([]),[c,o]=A.useState(!1);A.useEffect(()=>{a()},[]);const a=async()=>{try{o(!0);let i;(r==null?void 0:r.role)==="faculty"?i=await Pe.getFacultyInvoices(r.id):i=await Pe.getInvoices(),i.success&&n(i.data||[])}catch{ut.error("Failed to load invoices")}finally{o(!1)}},d=i=>{i.pdf_url?window.open(i.pdf_url,"_blank"):ut.error("PDF not available")},l=i=>({draft:"bg-gray-500",sent:"bg-blue-500",paid:"bg-green-500",overdue:"bg-red-500",cancelled:"bg-gray-500"})[i]||"bg-gray-500";return c?e.jsx("div",{className:"text-center py-8",children:"Loading invoices..."}):e.jsx("div",{className:"space-y-4",children:e.jsxs(Re,{children:[e.jsx(lt,{children:e.jsxs(mt,{className:"flex items-center gap-2",children:[e.jsx(Os,{className:"h-5 w-5"}),"Invoices"]})}),e.jsx(De,{children:e.jsxs("div",{className:"space-y-4",children:[s.map(i=>{var u;return e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:i.invoice_number}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[i.faculty_name,"  ",i.college_name]}),e.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Period: ",new Date(i.billing_period_start).toLocaleDateString()," - ",new Date(i.billing_period_end).toLocaleDateString()]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[i.total_hours,"h @ ",i.hourly_rate,"/hr"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold",children:["",(u=i.net_payable)==null?void 0:u.toFixed(2)]}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:i.tds_amount>0&&`TDS: ${i.tds_amount.toFixed(2)}`}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(et,{className:l(i.status),children:i.status}),i.pdf_url&&e.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>d(i),children:[e.jsx(Zs,{className:"mr-2 h-4 w-4"}),"PDF"]})]})]})]})},i.id)}),s.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No invoices found"})]})})]})})},ph=()=>{var m;const{user:t}=qs(),[r,s]=A.useState("projects"),[n,c]=A.useState(!1),[o,a]=A.useState(null),[d,l]=A.useState(!1),[i,u]=A.useState(0),h=(()=>[{id:"projects",label:"Projects",roles:["super-admin","college-admin","faculty"]},{id:"calendar",label:"Calendar",roles:["super-admin","college-admin","faculty","student"]},{id:"faculty-scheduling",label:"Faculty & Scheduling",roles:["super-admin","college-admin"]},{id:"attendance",label:"Attendance",roles:["super-admin","college-admin","faculty"]},{id:"feedback",label:"Feedback",roles:["super-admin","college-admin","faculty","student"]},{id:"reports",label:"Reports",roles:["super-admin","college-admin"]},{id:"invoices",label:"Invoices",roles:["super-admin","faculty"]}].filter(x=>x.roles.includes(t==null?void 0:t.role)))();return e.jsxs("div",{className:"container mx-auto p-6",children:[o?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ee,{variant:"ghost",onClick:()=>{a(null),s("projects")},children:" Back to Projects"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:o.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[o.college_name,"  ",(m=o.status)==null?void 0:m.replace("_"," ")]})]})]}),(t==null?void 0:t.role)==="super-admin"&&e.jsx(ee,{variant:"outline",onClick:()=>{l(!1),c(!0)},children:"Edit Project"})]}),e.jsxs(Dr,{value:r,onValueChange:s,className:"w-full",children:[e.jsx(Ir,{className:"grid w-full grid-cols-4 lg:grid-cols-8",children:h.filter(p=>p.id!=="projects").map(p=>e.jsx(zt,{value:p.id,children:p.label},p.id))}),e.jsx(Kt,{value:"calendar",className:"mt-6",children:e.jsx(vq,{selectedProject:o})}),e.jsx(Kt,{value:"faculty-scheduling",className:"mt-6",children:e.jsx(wq,{selectedProject:o})}),e.jsx(Kt,{value:"attendance",className:"mt-6",children:e.jsx(jq,{selectedProject:o})}),e.jsx(Kt,{value:"feedback",className:"mt-6",children:e.jsx(_q,{selectedProject:o})}),e.jsx(Kt,{value:"reports",className:"mt-6",children:e.jsx(Nq,{selectedProject:o})}),e.jsx(Kt,{value:"invoices",className:"mt-6",children:e.jsx(Sq,{selectedProject:o})})]})]}):e.jsx(e.Fragment,{children:e.jsx(xq,{showCreateButton:(t==null?void 0:t.role)==="super-admin",onSelectProject:async p=>{try{const x=await Pe.getProjectById(p.id);x.success?(a(x.data),s("calendar")):(a(p),s("calendar"))}catch(x){console.error("Failed to load project details:",x),a(p),s("calendar")}},onCreateNew:()=>{c(!0),a(null),l(!1)},onEditProject:p=>{a(p),l(!1),c(!0)}},i)}),n&&e.jsx(yq,{open:n,onClose:()=>{c(!1),a(null),l(!1)},project:o,viewMode:d,onSuccess:()=>{c(!1),a(null),l(!1),u(p=>p+1)}})]})};var qC={exports:{}},Cq="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",kq=Cq,Eq=kq;function HC(){}function WC(){}WC.resetWarningCache=HC;var Aq=function(){function t(n,c,o,a,d,l){if(l!==Eq){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}t.isRequired=t;function r(){return t}var s={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:r,element:t,elementType:t,instanceOf:r,node:t,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:WC,resetWarningCache:HC};return s.PropTypes=s,s};qC.exports=Aq();var Tq=qC.exports;const gh=Lf(Tq);let Vm=class extends Lt.Component{constructor(s){super(s);Gm(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(s){return{hasError:!0}}componentDidCatch(s,n){this.setState({error:s,errorInfo:n})}render(){return this.state.hasError?this.props.fallback?this.props.fallback(this.state.error,this.handleReset):e.jsxs("div",{style:{padding:"2rem",textAlign:"center",maxWidth:"600px",margin:"2rem auto",border:"1px solid #e0e0e0",borderRadius:"8px",backgroundColor:"#fff"},children:[e.jsx("h2",{style:{color:"#d32f2f",marginBottom:"1rem"},children:this.props.title||"Something went wrong"}),e.jsx("p",{style:{color:"#666",marginBottom:"1.5rem"},children:this.props.message||"An unexpected error occurred. Please try refreshing the page."}),!1,e.jsxs("div",{style:{marginTop:"1.5rem"},children:[e.jsx("button",{onClick:this.handleReset,style:{padding:"0.75rem 1.5rem",backgroundColor:"#1976d2",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1rem",marginRight:"1rem"},children:"Try Again"}),e.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"0.75rem 1.5rem",backgroundColor:"#666",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1rem"},children:"Reload Page"})]})]}):this.props.children}};Vm.propTypes={children:gh.node.isRequired,title:gh.string,message:gh.string,fallback:gh.func};Vm.defaultProps={title:"Something went wrong",message:"An unexpected error occurred. Please try refreshing the page.",fallback:null};var Dv="ToastProvider",[$v,Rq,Pq]=am("Toast"),[GC,pH]=nn("Toast",[Pq]),[Mq,qm]=GC(Dv),KC=t=>{const{__scopeToast:r,label:s="Notification",duration:n=5e3,swipeDirection:c="right",swipeThreshold:o=50,children:a}=t,[d,l]=A.useState(null),[i,u]=A.useState(0),f=A.useRef(!1),h=A.useRef(!1);return s.trim()||console.error(`Invalid prop \`label\` supplied to \`${Dv}\`. Expected non-empty \`string\`.`),e.jsx($v.Provider,{scope:r,children:e.jsx(Mq,{scope:r,label:s,duration:n,swipeDirection:c,swipeThreshold:o,toastCount:i,viewport:d,onViewportChange:l,onToastAdd:A.useCallback(()=>u(m=>m+1),[]),onToastRemove:A.useCallback(()=>u(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:h,children:a})})};KC.displayName=Dv;var YC="ToastViewport",Iq=["F8"],lx="toast.viewportPause",cx="toast.viewportResume",QC=A.forwardRef((t,r)=>{const{__scopeToast:s,hotkey:n=Iq,label:c="Notifications ({hotkey})",...o}=t,a=qm(YC,s),d=Rq(s),l=A.useRef(null),i=A.useRef(null),u=A.useRef(null),f=A.useRef(null),h=bs(r,f,a.onViewportChange),m=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=a.toastCount>0;A.useEffect(()=>{const g=v=>{var b;n.length!==0&&n.every(C=>v[C]||v.code===C)&&((b=f.current)==null||b.focus())};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[n]),A.useEffect(()=>{const g=l.current,v=f.current;if(p&&g&&v){const y=()=>{if(!a.isClosePausedRef.current){const M=new CustomEvent(lx);v.dispatchEvent(M),a.isClosePausedRef.current=!0}},b=()=>{if(a.isClosePausedRef.current){const M=new CustomEvent(cx);v.dispatchEvent(M),a.isClosePausedRef.current=!1}},C=M=>{!g.contains(M.relatedTarget)&&b()},T=()=>{g.contains(document.activeElement)||b()};return g.addEventListener("focusin",y),g.addEventListener("focusout",C),g.addEventListener("pointermove",y),g.addEventListener("pointerleave",T),window.addEventListener("blur",y),window.addEventListener("focus",b),()=>{g.removeEventListener("focusin",y),g.removeEventListener("focusout",C),g.removeEventListener("pointermove",y),g.removeEventListener("pointerleave",T),window.removeEventListener("blur",y),window.removeEventListener("focus",b)}}},[p,a.isClosePausedRef]);const x=A.useCallback(({tabbingDirection:g})=>{const y=d().map(b=>{const C=b.ref.current,T=[C,...Gq(C)];return g==="forwards"?T:T.reverse()});return(g==="forwards"?y.reverse():y).flat()},[d]);return A.useEffect(()=>{const g=f.current;if(g){const v=y=>{var T,M,U;const b=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!b){const L=document.activeElement,P=y.shiftKey;if(y.target===g&&P){(T=i.current)==null||T.focus();return}const z=x({tabbingDirection:P?"backwards":"forwards"}),k=z.findIndex(R=>R===L);gg(z.slice(k+1))?y.preventDefault():P?(M=i.current)==null||M.focus():(U=u.current)==null||U.focus()}};return g.addEventListener("keydown",v),()=>g.removeEventListener("keydown",v)}},[d,x]),e.jsxs($9,{ref:l,role:"region","aria-label":c.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:p?void 0:"none"},children:[p&&e.jsx(dx,{ref:i,onFocusFromOutsideViewport:()=>{const g=x({tabbingDirection:"forwards"});gg(g)}}),e.jsx($v.Slot,{scope:s,children:e.jsx(Dt.ol,{tabIndex:-1,...o,ref:h})}),p&&e.jsx(dx,{ref:u,onFocusFromOutsideViewport:()=>{const g=x({tabbingDirection:"backwards"});gg(g)}})]})});QC.displayName=YC;var XC="ToastFocusProxy",dx=A.forwardRef((t,r)=>{const{__scopeToast:s,onFocusFromOutsideViewport:n,...c}=t,o=qm(XC,s);return e.jsx(_v,{"aria-hidden":!0,tabIndex:0,...c,ref:r,style:{position:"fixed"},onFocus:a=>{var i;const d=a.relatedTarget;!((i=o.viewport)!=null&&i.contains(d))&&n()}})});dx.displayName=XC;var Tu="Toast",Oq="toast.swipeStart",Fq="toast.swipeMove",Lq="toast.swipeCancel",Dq="toast.swipeEnd",ZC=A.forwardRef((t,r)=>{const{forceMount:s,open:n,defaultOpen:c,onOpenChange:o,...a}=t,[d,l]=$a({prop:n,defaultProp:c??!0,onChange:o,caller:Tu});return e.jsx(Tn,{present:s||d,children:e.jsx(zq,{open:d,...a,ref:r,onClose:()=>l(!1),onPause:fn(t.onPause),onResume:fn(t.onResume),onSwipeStart:It(t.onSwipeStart,i=>{i.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:It(t.onSwipeMove,i=>{const{x:u,y:f}=i.detail.delta;i.currentTarget.setAttribute("data-swipe","move"),i.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),i.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:It(t.onSwipeCancel,i=>{i.currentTarget.setAttribute("data-swipe","cancel"),i.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),i.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),i.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),i.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:It(t.onSwipeEnd,i=>{const{x:u,y:f}=i.detail.delta;i.currentTarget.setAttribute("data-swipe","end"),i.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),i.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),i.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),i.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),l(!1)})})})});ZC.displayName=Tu;var[$q,Bq]=GC(Tu,{onClose(){}}),zq=A.forwardRef((t,r)=>{const{__scopeToast:s,type:n="foreground",duration:c,open:o,onClose:a,onEscapeKeyDown:d,onPause:l,onResume:i,onSwipeStart:u,onSwipeMove:f,onSwipeCancel:h,onSwipeEnd:m,...p}=t,x=qm(Tu,s),[g,v]=A.useState(null),y=bs(r,R=>v(R)),b=A.useRef(null),C=A.useRef(null),T=c||x.duration,M=A.useRef(0),U=A.useRef(T),L=A.useRef(0),{onToastAdd:P,onToastRemove:B}=x,q=fn(()=>{var S;(g==null?void 0:g.contains(document.activeElement))&&((S=x.viewport)==null||S.focus()),a()}),z=A.useCallback(R=>{!R||R===1/0||(window.clearTimeout(L.current),M.current=new Date().getTime(),L.current=window.setTimeout(q,R))},[q]);A.useEffect(()=>{const R=x.viewport;if(R){const S=()=>{z(U.current),i==null||i()},w=()=>{const _=new Date().getTime()-M.current;U.current=U.current-_,window.clearTimeout(L.current),l==null||l()};return R.addEventListener(lx,w),R.addEventListener(cx,S),()=>{R.removeEventListener(lx,w),R.removeEventListener(cx,S)}}},[x.viewport,T,l,i,z]),A.useEffect(()=>{o&&!x.isClosePausedRef.current&&z(T)},[o,T,x.isClosePausedRef,z]),A.useEffect(()=>(P(),()=>B()),[P,B]);const k=A.useMemo(()=>g?ak(g):null,[g]);return x.viewport?e.jsxs(e.Fragment,{children:[k&&e.jsx(Uq,{__scopeToast:s,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:k}),e.jsx($q,{scope:s,onClose:q,children:ll.createPortal(e.jsx($v.ItemSlot,{scope:s,children:e.jsx(D9,{asChild:!0,onEscapeKeyDown:It(d,()=>{x.isFocusedToastEscapeKeyDownRef.current||q(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:e.jsx(Dt.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":x.swipeDirection,...p,ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:It(t.onKeyDown,R=>{R.key==="Escape"&&(d==null||d(R.nativeEvent),R.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,q()))}),onPointerDown:It(t.onPointerDown,R=>{R.button===0&&(b.current={x:R.clientX,y:R.clientY})}),onPointerMove:It(t.onPointerMove,R=>{if(!b.current)return;const S=R.clientX-b.current.x,w=R.clientY-b.current.y,_=!!C.current,j=["left","right"].includes(x.swipeDirection),N=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,E=j?N(0,S):0,I=j?0:N(0,w),D=R.pointerType==="touch"?10:2,V={x:E,y:I},H={originalEvent:R,delta:V};_?(C.current=V,xh(Fq,f,H,{discrete:!1})):b2(V,x.swipeDirection,D)?(C.current=V,xh(Oq,u,H,{discrete:!1}),R.target.setPointerCapture(R.pointerId)):(Math.abs(S)>D||Math.abs(w)>D)&&(b.current=null)}),onPointerUp:It(t.onPointerUp,R=>{const S=C.current,w=R.target;if(w.hasPointerCapture(R.pointerId)&&w.releasePointerCapture(R.pointerId),C.current=null,b.current=null,S){const _=R.currentTarget,j={originalEvent:R,delta:S};b2(S,x.swipeDirection,x.swipeThreshold)?xh(Dq,m,j,{discrete:!0}):xh(Lq,h,j,{discrete:!0}),_.addEventListener("click",N=>N.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),Uq=t=>{const{__scopeToast:r,children:s,...n}=t,c=qm(Tu,r),[o,a]=A.useState(!1),[d,l]=A.useState(!1);return Hq(()=>a(!0)),A.useEffect(()=>{const i=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(i)},[]),d?null:e.jsx(Ac,{asChild:!0,children:e.jsx(_v,{...n,children:o&&e.jsxs(e.Fragment,{children:[c.label," ",s]})})})},Vq="ToastTitle",JC=A.forwardRef((t,r)=>{const{__scopeToast:s,...n}=t;return e.jsx(Dt.div,{...n,ref:r})});JC.displayName=Vq;var qq="ToastDescription",ek=A.forwardRef((t,r)=>{const{__scopeToast:s,...n}=t;return e.jsx(Dt.div,{...n,ref:r})});ek.displayName=qq;var tk="ToastAction",sk=A.forwardRef((t,r)=>{const{altText:s,...n}=t;return s.trim()?e.jsx(nk,{altText:s,asChild:!0,children:e.jsx(Bv,{...n,ref:r})}):(console.error(`Invalid prop \`altText\` supplied to \`${tk}\`. Expected non-empty \`string\`.`),null)});sk.displayName=tk;var rk="ToastClose",Bv=A.forwardRef((t,r)=>{const{__scopeToast:s,...n}=t,c=Bq(rk,s);return e.jsx(nk,{asChild:!0,children:e.jsx(Dt.button,{type:"button",...n,ref:r,onClick:It(t.onClick,c.onClose)})})});Bv.displayName=rk;var nk=A.forwardRef((t,r)=>{const{__scopeToast:s,altText:n,...c}=t;return e.jsx(Dt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...c,ref:r})});function ak(t){const r=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&r.push(n.textContent),Wq(n)){const c=n.ariaHidden||n.hidden||n.style.display==="none",o=n.dataset.radixToastAnnounceExclude==="";if(!c)if(o){const a=n.dataset.radixToastAnnounceAlt;a&&r.push(a)}else r.push(...ak(n))}}),r}function xh(t,r,s,{discrete:n}){const c=s.originalEvent.currentTarget,o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:s});r&&c.addEventListener(t,r,{once:!0}),n?yy(c,o):c.dispatchEvent(o)}var b2=(t,r,s=0)=>{const n=Math.abs(t.x),c=Math.abs(t.y),o=n>c;return r==="left"||r==="right"?o&&n>s:!o&&c>s};function Hq(t=()=>{}){const r=fn(t);_r(()=>{let s=0,n=0;return s=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(r)),()=>{window.cancelAnimationFrame(s),window.cancelAnimationFrame(n)}},[r])}function Wq(t){return t.nodeType===t.ELEMENT_NODE}function Gq(t){const r=[],s=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const c=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||c?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)r.push(s.currentNode);return r}function gg(t){const r=document.activeElement;return t.some(s=>s===r?!0:(s.focus(),document.activeElement!==r))}var Kq=KC,ik=QC,ok=ZC,lk=JC,ck=ek,dk=sk,uk=Bv;const Yq=Kq,hk=Lt.forwardRef(({className:t,...r},s)=>e.jsx(ik,{ref:s,className:Ot("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...r}));hk.displayName=ik.displayName;const Qq=sm("data-[swipe=move]:transition-none group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-background border",destructive:"group destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),fk=Lt.forwardRef(({className:t,variant:r,...s},n)=>e.jsx(ok,{ref:n,className:Ot(Qq({variant:r}),t),...s}));fk.displayName=ok.displayName;const Xq=Lt.forwardRef(({className:t,...r},s)=>e.jsx(dk,{ref:s,className:Ot("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...r}));Xq.displayName=dk.displayName;const mk=Lt.forwardRef(({className:t,...r},s)=>e.jsx(uk,{ref:s,className:Ot("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...r,children:e.jsx(Dn,{className:"h-4 w-4"})}));mk.displayName=uk.displayName;const pk=Lt.forwardRef(({className:t,...r},s)=>e.jsx(lk,{ref:s,className:Ot("text-sm font-semibold",t),...r}));pk.displayName=lk.displayName;const gk=Lt.forwardRef(({className:t,...r},s)=>e.jsx(ck,{ref:s,className:Ot("text-sm opacity-90",t),...r}));gk.displayName=ck.displayName;function xk(){const{toasts:t}=Js();return e.jsxs(Yq,{children:[t.map(({id:r,title:s,description:n,action:c,dismiss:o,...a})=>e.jsxs(fk,{...a,children:[e.jsxs("div",{className:"grid gap-1",children:[s&&e.jsx(pk,{children:s}),n&&e.jsx(gk,{children:n})]}),c,e.jsx(mk,{})]},r)),e.jsx(hk,{})]})}const zs=({children:t,roles:r})=>{const{user:s}=qs();return s?r&&!r.includes(s.role)?e.jsx(xd,{to:"/dashboard",replace:!0}):t:e.jsx(xd,{to:"/login",replace:!0})},Zq=({children:t})=>{const r=go();return r.pathname.includes("/student/assessments/")&&r.pathname.includes("/take")?t:e.jsx(IM,{children:t})};function Jq(){const{user:t}=qs();return e.jsxs(FA,{children:[e.jsx(Es,{path:"/",element:e.jsx(XL,{})}),e.jsx(Es,{path:"/login",element:t?e.jsx(xd,{to:`/dashboard/${t.role==="super-admin"?"super-admin":t.role==="college-admin"?"college-admin":t.role==="faculty"?"faculty":"student"}`,replace:!0}):e.jsx(tD,{})}),e.jsx(Es,{path:"/signup",element:t?e.jsx(xd,{to:`/dashboard/${t.role==="super-admin"?"super-admin":t.role==="college-admin"?"college-admin":t.role==="faculty"?"faculty":"student"}`,replace:!0}):e.jsx(sD,{})}),e.jsx(Es,{path:"/verify-email",element:e.jsx(rD,{})}),e.jsx(Es,{path:"/features",element:e.jsx(ez,{})}),e.jsx(Es,{path:"/create-question",element:e.jsx(Of,{})}),e.jsx(Es,{path:"/dashboard",element:e.jsx(zs,{children:e.jsx(nD,{})})}),e.jsx(Es,{path:"/dashboard/super-admin",element:e.jsx(zs,{roles:["super-admin"],children:e.jsx(gD,{})})}),e.jsx(Es,{path:"/dashboard/college-admin",element:e.jsx(zs,{roles:["college-admin"],children:e.jsx(aD,{})})}),e.jsx(Es,{path:"/dashboard/faculty",element:e.jsx(zs,{roles:["faculty"],children:e.jsx(xD,{})})}),e.jsx(Es,{path:"/dashboard/student",element:e.jsx(zs,{roles:["student"],children:e.jsx(yD,{})})}),e.jsx(Es,{path:"/admin/colleges",element:e.jsx(zs,{roles:["super-admin"],children:e.jsx(cB,{})})}),e.jsx(Es,{path:"/admin/users",element:e.jsx(zs,{roles:["super-admin"],children:e.jsx(sz,{})})}),e.jsx(Es,{path:"/assessments",element:e.jsx(zs,{roles:["super-admin","college-admin","faculty"],children:e.jsx(lz,{})})}),e.jsx(Es,{path:"/assessments/create",element:e.jsx(zs,{roles:["super-admin","college-admin","faculty"],children:e.jsx(SU,{})})}),e.jsx(Es,{path:"/question-bank",element:e.jsx(zs,{roles:["super-admin","college-admin","faculty"],children:e.jsx(TU,{})})}),e.jsx(Es,{path:"/dashboard/super-admin/attendance",element:e.jsx(zs,{roles:["super-admin"],children:e.jsx(CU,{})})}),e.jsx(Es,{path:"/dashboard/super-admin/courses",element:e.jsx(zs,{roles:["super-admin"],children:e.jsx(kU,{})})}),e.jsx(Es,{path:"/dashboard/super-admin/scheduling",element:e.jsx(zs,{roles:["super-admin"],children:e.jsx(EU,{})})}),e.jsx(Es,{path:"/dashboard/super-admin/faculty-status",element:e.jsx(zs,{roles:["super-admin"],children:e.jsx(AU,{})})}),e.jsx(Es,{path:"/dashboard/super-admin/project-management",element:e.jsx(zs,{roles:["super-admin"],children:e.jsx(ph,{})})}),e.jsx(Es,{path:"/dashboard/college-admin/project-management",element:e.jsx(zs,{roles:["college-admin"],children:e.jsx(ph,{})})}),e.jsx(Es,{path:"/dashboard/faculty/project-management",element:e.jsx(zs,{roles:["faculty"],children:e.jsx(ph,{})})}),e.jsx(Es,{path:"/dashboard/student/project-management",element:e.jsx(zs,{roles:["student"],children:e.jsx(ph,{})})}),e.jsx(Es,{path:"/analytics/dashboard",element:e.jsx(zs,{children:e.jsx(wV,{})})}),e.jsx(Es,{path:"/analytics/assessment/:assessmentId",element:e.jsx(zs,{children:e.jsx(jV,{})})}),e.jsx(Es,{path:"/student/assessments",element:e.jsx(zs,{roles:["student"],children:e.jsx(fV,{})})}),e.jsx(Es,{path:"/student/assessments/:assessmentId/results",element:e.jsx(zs,{roles:["student"],children:e.jsx(xV,{})})}),e.jsx(Es,{path:"/student/assessments/:assessmentId/take",element:e.jsx(zs,{roles:["student"],children:e.jsx(Vm,{title:"Assessment Taking Error",message:"An error occurred while loading the assessment. Please try again or contact support if the problem persists.",children:e.jsx(gq,{})})})}),e.jsx(Es,{path:"/profile",element:e.jsx(zs,{children:e.jsx(JB,{})})}),e.jsx(Es,{path:"/admin/coding-profiles",element:e.jsx(zs,{roles:["super-admin"],children:e.jsx(EV,{})})}),e.jsx(Es,{path:"/student/coding-platforms",element:e.jsx(zs,{roles:["student"],children:e.jsx(AV,{})})}),e.jsx(Es,{path:"*",element:e.jsx(xd,{to:t?"/dashboard":"/",replace:!0})})]})}function eH(){return e.jsx(hM,{defaultTheme:"light",storageKey:"vite-ui-theme",children:e.jsx(Vm,{title:"Application Error",message:"A critical error occurred. Please refresh the page or contact support.",children:e.jsx(qA,{children:e.jsxs(PM,{children:[e.jsx(Zq,{children:e.jsx(Jq,{})}),e.jsx(xk,{})]})})})})}class tH extends Lt.Component{constructor(s){super(s);Gm(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(s){return{hasError:!0}}componentDidCatch(s,n){console.error("Error caught by boundary:",s,n),this.setState({error:s,errorInfo:n})}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 dark:bg-red-900 rounded-full mb-4",children:e.jsx(Ms,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white text-center mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"An unexpected error occurred. Please try refreshing the page."}),!1,e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:this.handleReset,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Try Again"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"flex-1 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 font-medium py-2 px-4 rounded-lg transition-colors",children:"Refresh Page"})]})]})}):this.props.children}}xg.createRoot(document.getElementById("root")).render(e.jsx(Lt.StrictMode,{children:e.jsxs(tH,{children:[e.jsx(eH,{}),e.jsx(xk,{})]})}));
